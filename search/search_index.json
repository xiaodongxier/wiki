{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"","text":"<p>\u8bb0\u5f55\u4e00\u4e9b\u6280\u672f\u3001\u5de5\u5177\u3001\u4ea7\u54c1\u7b49\u76f8\u5173\u7684\u5185\u5bb9</p> <p></p> <p>\u6bcf\u65e5\u4e00\u56fe</p> <p></p>"},{"location":"%20%E9%A6%96%E9%A1%B5/%20%E6%88%91%E7%9A%84%E5%BE%85%E5%8A%9E/","title":"\u6211\u7684\u5f85\u529e","text":"<ul> <li> Vue3</li> <li> Nextjs</li> </ul> <ul> <li> \u5728\u7ebf\u7f16\u8f91\u5668\u4e71\u7801</li> <li> \u9875\u9762\u6570\u5b66\u516c\u5f0f\u6e32\u67d3</li> <li> \u5185\u5916\u7f51\u5f00\u53d1\u4f9d\u8d56\u5b89\u88c5\u95ee\u9898</li> <li> GPT\u6eda\u52a8\u95ee\u9898</li> <li> GPT\u89e3\u6790\u6570\u5b66\u516c\u5f0f\u95ee\u9898</li> </ul> <ul> <li> GitHub\u81ea\u52a8\u6293\u53d6bing\u58c1\u7eb8</li> <li> \u5b8c\u5168\u57fa\u4e8eGitHub\u7684\u56fe\u5e8a</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/","title":"\u6211\u7684\u4e66\u7b7e","text":""},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/#_2","title":"\u5728\u7ebf\u5de5\u5177\u7c7b","text":"<ul> <li>\u5728\u7ebf\u63a5\u7801-FreePhoneNum</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/#_3","title":"\u524d\u7aef\u5e93","text":"<ul> <li>AntV\u00b7\u8ba9\u6570\u636e\u6829\u6829\u5982\u751f</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/#mac","title":"Mac","text":"<ul> <li>macwk.cn</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/#_4","title":"\u6cd5\u5f8b\u7c7b","text":"<ul> <li>\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u6570\u636e\u5e93</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E4%B9%A6%E7%AD%BE/#_5","title":"\u5f00\u6e90\u5de5\u5177","text":"<ul> <li>\u57fa\u4e8eGitHub API \u7684\u5728\u7ebf\u56fe\u5e8a</li> </ul>"},{"location":"%20%E9%A6%96%E9%A1%B5/%E6%88%91%E7%9A%84%E7%BD%91%E7%AB%99/","title":"\u6211\u7684\u7f51\u7ad9","text":"<ul> <li>\u4e2a\u4eba\u7f51\u7ad9</li> <li>API\u7ad9\u70b9</li> <li>\u6bcf\u65e5\u6293\u53d6Bing\u56fe\u7247</li> <li>\u4e00\u8a00</li> <li>\u5b8c\u5168\u4f9d\u8d56GitHub\u7684\u56fe\u5e8a</li> </ul>"},{"location":"CSS/Less%E3%80%81Sass%E5%92%8CStylus/","title":"Less\u3001Sass\u548cStylus","text":"<p>Less\u3001Sass\u548cStylus\u662f\u4e09\u79cd\u5e38\u7528\u7684CSS\u9884\u5904\u7406\u5668\uff0c\u5b83\u4eec\u90fd\u6269\u5c55\u4e86CSS\u7684\u529f\u80fd\uff0c\u901a\u8fc7\u63d0\u4f9b\u53d8\u91cf\u3001\u5d4c\u5957\u89c4\u5219\u3001\u6df7\u5165\uff08Mixins\uff09\u3001\u51fd\u6570\u7b49\u5f3a\u5927\u7279\u6027\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u7f16\u5199\u66f4\u52a0\u9ad8\u6548\u3001\u53ef\u7ef4\u62a4\u7684\u6837\u5f0f\u8868\u3002\u4ee5\u4e0b\u662f\u5b83\u4eec\u7684\u4e3b\u8981\u533a\u522b\u4ee5\u53ca\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\u3002</p>"},{"location":"CSS/Less%E3%80%81Sass%E5%92%8CStylus/#less","title":"Less","text":"<p>\u4f18\u70b9: 1. \u8bed\u6cd5\u63a5\u8fd1CSS\uff0c\u6613\u4e8e\u5b66\u4e60\u548c\u4e0a\u624b\u3002 2. \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u90fd\u652f\u6301\uff08Node.js\uff09\uff0c\u7075\u6d3b\u6027\u8f83\u9ad8\u3002 3. \u793e\u533a\u652f\u6301\u826f\u597d\uff0c\u6709\u5927\u91cf\u7684\u6587\u6863\u548c\u6559\u7a0b\u3002 4. \u53ef\u4ee5\u901a\u8fc7JavaScript\u63d2\u4ef6\u6269\u5c55\u529f\u80fd\u3002</p> <p>\u7f3a\u70b9: 1. \u529f\u80fd\u76f8\u5bf9Sass\u8f83\u5c11\uff0c\u4f8b\u5982\u6ca1\u6709\u5185\u7f6e\u989c\u8272\u51fd\u6570\u7b49\u3002 2. \u5728\u67d0\u4e9b\u529f\u80fd\u4e0a\uff0c\u5982\u5faa\u73af\u7b49\uff0cLess\u4e0d\u5982Sass\u5f3a\u5927\u3002</p>"},{"location":"CSS/Less%E3%80%81Sass%E5%92%8CStylus/#sass","title":"Sass","text":"<p>\u5206\u4e3a\u4e24\u79cd\u8bed\u6cd5\u683c\u5f0f\uff1aSCSS\uff08Sassy CSS\uff09\u548c\u7f29\u8fdb\u8bed\u6cd5\uff08\u539f\u59cbSass\uff09\u3002</p> <p>\u4f18\u70b9: 1. \u529f\u80fd\u5f3a\u5927\uff0c\u63d0\u4f9b\u4e86\u8bb8\u591a\u9ad8\u7ea7\u529f\u80fd\uff0c\u5982\u6761\u4ef6\u8bed\u53e5\u3001\u5faa\u73af\u3001\u51fd\u6570\u7b49\u3002 2. SCSS\u8bed\u6cd5\u63a5\u8fd1CSS\uff0c\u5bb9\u6613\u8fc1\u79fb\u65e7\u9879\u76ee\u3002 3. \u6709\u4e00\u4e2a\u5065\u58ee\u7684\u6846\u67b6\u751f\u6001\u7cfb\u7edf\uff0c\u5982Compass\u3001Bourbon\u7b49\u3002 4. \u793e\u533a\u975e\u5e38\u6d3b\u8dc3\uff0c\u6709\u5927\u91cf\u8d44\u6e90\u548c\u63d2\u4ef6\u3002</p> <p>\u7f3a\u70b9: 1. \u5b66\u4e60\u66f2\u7ebf\u6bd4Less\u7565\u9661\u5ced\uff0c\u5c24\u5176\u662f\u5bf9\u4e8eSass\u7684\u7f29\u8fdb\u8bed\u6cd5\u3002 2. \u7f29\u8fdb\u8bed\u6cd5\uff08\u539f\u59cbSass\uff09\u4e0eCSS\u5dee\u5f02\u8f83\u5927\uff0c\u53ef\u80fd\u4e0d\u9002\u5408\u6240\u6709\u4eba\u3002</p>"},{"location":"CSS/Less%E3%80%81Sass%E5%92%8CStylus/#stylus","title":"Stylus","text":"<p>\u4f18\u70b9: 1. \u8bed\u6cd5\u6781\u5176\u7075\u6d3b\uff0c\u53ef\u4ee5\u4e0d\u4f7f\u7528\u5927\u62ec\u53f7\u548c\u5206\u53f7\uff0c\u7f16\u5199\u66f4\u5c11\u7684\u4ee3\u7801\u3002 2. \u529f\u80fd\u5f3a\u5927\uff0c\u652f\u6301\u5f88\u591a\u9ad8\u7ea7\u7279\u6027\uff0c\u5982\u52a8\u6001\u7c7b\u578b\u3001\u900f\u660e\u6df7\u5408\u7b49\u3002 3. \u53ef\u4ee5\u4f7f\u7528JavaScript\u8fdb\u884c\u6269\u5c55\uff0c\u5bf9Node.js\u5f00\u53d1\u8005\u53cb\u597d\u3002</p> <p>\u7f3a\u70b9: 1. \u8bed\u6cd5\u8fc7\u4e8e\u7075\u6d3b\uff0c\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u98ce\u683c\u4e0d\u4e00\u81f4\uff0c\u4e0d\u5229\u4e8e\u56e2\u961f\u534f\u4f5c\u3002 2. \u793e\u533a\u548c\u8d44\u6e90\u76f8\u5bf9\u4e8eSass\u548cLess\u8f83\u5c11\u3002</p>"},{"location":"CSS/Less%E3%80%81Sass%E5%92%8CStylus/#_1","title":"\u603b\u7ed3","text":"<p>\u9009\u62e9\u54ea\u4e00\u4e2a\u9884\u5904\u7406\u5668\u5f88\u5927\u7a0b\u5ea6\u4e0a\u53d6\u51b3\u4e8e\u4e2a\u4eba\u6216\u56e2\u961f\u7684\u504f\u597d\u3001\u9879\u76ee\u9700\u6c42\u548c\u6280\u672f\u6808\u3002Less\u548cSCSS\u7684\u8bed\u6cd5\u4e0e\u4f20\u7edfCSS\u975e\u5e38\u76f8\u4f3c\uff0c\u964d\u4f4e\u4e86\u5b66\u4e60\u6210\u672c\u3002Sass(SCSS)\u56e0\u5176\u5f3a\u5927\u7684\u529f\u80fd\u548c\u6d3b\u8dc3\u7684\u793e\u533a\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002Stylus\u5219\u4ee5\u5176\u7075\u6d3b\u6027\u548c\u8868\u73b0\u529b\u5438\u5f15\u4e86\u4e00\u90e8\u5206\u5f00\u53d1\u8005\u3002\u5728\u9009\u62e9\u65f6\uff0c\u8fd8\u5e94\u8be5\u8003\u8651\u4e0e\u73b0\u6709\u9879\u76ee\u548c\u5de5\u5177\u7684\u517c\u5bb9\u6027\uff0c\u4ee5\u53ca\u56e2\u961f\u7684\u719f\u6089\u7a0b\u5ea6\u3002</p>"},{"location":"CSS/%E6%96%87%E5%AD%97%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E5%8F%B7%E6%98%BE%E7%A4%BA/","title":"\u6587\u5b57\u8d85\u51fa\u7701\u7565\u53f7\u663e\u793a","text":""},{"location":"CSS/%E6%96%87%E5%AD%97%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E5%8F%B7%E6%98%BE%E7%A4%BA/#_2","title":"\u5355\u884c","text":"<p>\u8981\u5728CSS\u4e2d\u5b9e\u73b0\u4e00\u884c\u6587\u5b57\u8d85\u51fa\u7701\u7565\u53f7\u663e\u793a\uff0c\u53ef\u4ee5\u4f7f\u7528text-overflow\u5c5e\u6027\u3002text-overflow\u5c5e\u6027\u6307\u5b9a\u4e86\u5f53\u6587\u672c\u6ea2\u51fa\u5bb9\u5668\u65f6\u5982\u4f55\u663e\u793a\u3002</p> <p>\u9996\u5148\uff0c\u9700\u8981\u8bbe\u7f6e\u5bb9\u5668\u7684\u5bbd\u5ea6\uff0c\u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u56fa\u5b9a\u503c\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e\u5bb9\u5668\u7684\u5bbd\u5ea6\u4e3a200px\uff1a</p> <pre><code>.container {\n  width: 200px;\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u4f7f\u7528white-space\u5c5e\u6027\u5c06\u6587\u5b57\u9650\u5236\u4e3a\u4e00\u884c\uff0c\u5e76\u4f7f\u7528overflow\u5c5e\u6027\u5c06\u6ea2\u51fa\u7684\u5185\u5bb9\u9690\u85cf\u3002\u8bbe\u7f6eoverflow\u5c5e\u6027\u4e3ahidden\u53ef\u4ee5\u9690\u85cf\u6ea2\u51fa\u7684\u5185\u5bb9\uff0c\u800c\u4e0d\u4f1a\u663e\u793a\u6eda\u52a8\u6761\uff1a</p> <pre><code>.container {\n  width: 200px;\n  white-space: nowrap;\n  overflow: hidden;\n}\n</code></pre> <p>\u6700\u540e\uff0c\u4f7f\u7528text-overflow\u5c5e\u6027\u6765\u6307\u5b9a\u6ea2\u51fa\u65f6\u7684\u663e\u793a\u65b9\u5f0f\u3002\u8bbe\u7f6etext-overflow\u4e3aellipsis\u53ef\u4ee5\u5728\u6ea2\u51fa\u65f6\u663e\u793a\u7701\u7565\u53f7\uff1a</p> <pre><code>.container {\n  width: 200px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</code></pre> <p>\u8fd9\u6837\uff0c\u5f53\u6587\u5b57\u8d85\u8fc7\u5bb9\u5668\u5bbd\u5ea6\u65f6\uff0c\u4f1a\u663e\u793a\u7701\u7565\u53f7\u3002</p>"},{"location":"CSS/%E6%96%87%E5%AD%97%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E5%8F%B7%E6%98%BE%E7%A4%BA/#_3","title":"\u591a\u884c","text":"<p>\u5982\u679c\u8981\u5728CSS\u4e2d\u5b9e\u73b0\u591a\u884c\u6587\u5b57\u8d85\u51fa\u7701\u7565\u53f7\u663e\u793a\uff0c\u53ef\u4ee5\u4f7f\u7528CSS\u7684\u5c5e\u6027-webkit-line-clamp\u548c-webkit-box-orient\uff08\u9002\u7528\u4e8eWebKit\u6d4f\u89c8\u5668\uff09\u6216\u8005display: -webkit-box; -webkit-line-clamp; -webkit-box-orient\uff08\u9002\u7528\u4e8eChrome\u6d4f\u89c8\u5668\uff09\u3002</p> <p>\u9996\u5148\uff0c\u8bbe\u7f6e\u5bb9\u5668\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a\u56fa\u5b9a\u503c\u3002\u4f8b\u5982\uff0c\u8bbe\u7f6e\u5bb9\u5668\u7684\u5bbd\u5ea6\u4e3a200px\uff0c\u9ad8\u5ea6\u4e3a60px\uff1a</p> <pre><code>.container {\n  width: 200px;\n  height: 60px;\n}\n</code></pre> <p>\u7136\u540e\uff0c\u4f7f\u7528display: -webkit-box; -webkit-line-clamp; -webkit-box-orient\u5c5e\u6027\u6765\u9650\u5236\u6587\u672c\u7684\u884c\u6570\u548c\u65b9\u5411\u3002\u8bbe\u7f6e-webkit-line-clamp\u5c5e\u6027\u4e3a\u6240\u9700\u7684\u6700\u5927\u884c\u6570\uff0c\u8bbe\u7f6e-webkit-box-orient\u5c5e\u6027\u4e3avertical\u53ef\u4ee5\u5b9e\u73b0\u5782\u76f4\u65b9\u5411\u7684\u6587\u672c\u6ea2\u51fa\u9690\u85cf\uff1a</p> <pre><code>.container {\n  width: 200px;\n  height: 60px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3; /* \u6700\u5927\u884c\u6570\u4e3a3\u884c */\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</code></pre> <p>\u6700\u540e\uff0c\u4f7f\u7528text-overflow: ellipsis\u5c5e\u6027\u6765\u663e\u793a\u7701\u7565\u53f7\uff1a</p> <pre><code>.container {\n  width: 200px;\n  height: 60px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3; /* \u6700\u5927\u884c\u6570\u4e3a3\u884c */\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</code></pre> <p>\u8fd9\u6837\uff0c\u5f53\u6587\u5b57\u8d85\u8fc7\u5bb9\u5668\u7684\u9ad8\u5ea6\u65f6\uff0c\u4f1a\u663e\u793a\u7701\u7565\u53f7\u3002</p>"},{"location":"JavaScript/","title":"JavaScript \u77ed\u4ee3\u7801","text":""},{"location":"JavaScript/#js","title":"js\u6570\u7ec4\u8f6c\u5b57\u7b26\u4e32","text":"<pre><code>var numbers = [1, 2, 3, 4, 5];\nvar str = numbers.join(\",\");\nconsole.log(str); // \"1,2,3,4,5\"\n</code></pre>"},{"location":"JavaScript/#js_1","title":"js\u6570\u7ec4\u53bb\u91cd","text":"<pre><code>var arr = [1, 2, 3, 4, 5, 1, 2, 3, 4, 5];\nvar newArr = arr.filter(function(item, index, arr) {\n  return arr.indexOf(item) === index;\n});\nconsole.log(newArr); // [1, 2, 3, 4, 5]\n</code></pre>"},{"location":"JavaScript/#js_2","title":"js\u6570\u7ec4\u53bb\u7a7a\u683c","text":"<pre><code>var str = \"  hello world  \";\nvar newStr = str.replace(/\\s/g, \"\");\nconsole.log(newStr); // \"helloworld\"\n</code></pre>"},{"location":"JavaScript/#_1","title":"\u5220\u9664\u67d0\u4e2a\u5c5e\u6027","text":"<p>\u53bb\u9664 <code>phone</code> \u8fd4\u56de\u65b0\u7684\u5bf9\u8c61</p> <pre><code>const obj = {\n    name: 'wang',\n    age: 18,\n    sex: \"\u7537\",\n    phone: 18888888888\n}\nconst {phone, ...rest} = obj;\nconsole.log(rest)  // {\"name\": \"wang\",\"age\": 18,\"sex\": \"\u7537\"}\n</code></pre>"},{"location":"JavaScript/#_2","title":"\u65f6\u95f4\u6233","text":"<pre><code>new Date().getTime()\n</code></pre>"},{"location":"JavaScript/JS%E5%88%A0%E9%99%A4%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%9F%90%E6%9D%A1%E6%95%B0%E6%8D%AE/","title":"JS\u5220\u9664\u5bf9\u8c61\u4e2d\u67d0\u6761\u6570\u636e","text":"<p>\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5220\u9664\u5bf9\u8c61\u4e2d\u7684\u67d0\u6761\u6570\u636e\u5e76\u8fd4\u56de\u65b0\u5bf9\u8c61\u3002</p> <p>\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528<code>delete</code>\u5173\u952e\u5b57\u5220\u9664\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u7136\u540e\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\u3002</p> <pre><code>const obj = {\n  prop1: 'value1',\n  prop2: 'value2',\n  prop3: 'value3'\n};\nconst { prop2, ...newObj } = obj;\nconsole.log(newObj); // { prop1: 'value1', prop3: 'value3' }\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528<code>Object.assign()</code>\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u5c06\u8981\u4fdd\u7559\u7684\u5c5e\u6027\u590d\u5236\u5230\u65b0\u5bf9\u8c61\u4e2d\u3002</p> <pre><code>const obj = {\n  prop1: 'value1',\n  prop2: 'value2',\n  prop3: 'value3'\n};\nconst newObj = Object.assign({}, obj);\ndelete newObj.prop2;\nconsole.log(newObj); // { prop1: 'value1', prop3: 'value3' }\n</code></pre> <p>\u65e0\u8bba\u4f7f\u7528\u54ea\u79cd\u65b9\u6cd5\uff0c\u90fd\u4f1a\u5220\u9664\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u5e76\u8fd4\u56de\u65b0\u5bf9\u8c61\u3002</p>"},{"location":"JavaScript/JS%E5%A4%9A%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/","title":"JS\u591a\u6587\u4ef6\u7c7b\u578b\u5224\u65ad","text":"<pre><code>getFileType(fileType) {\n  switch (fileType) {\n    case \"html\":\n    case \"css\":\n    case \"js\":\n      return \"\u524d\u7aef\";\n    case \"java\":\n    case \"python\":\n      return \"\u540e\u7aef\";\n    case \"office\":\n      return \"\u6587\u6863\";\n    default:\n      return \"\u672a\u77e5\u7c7b\u578b\";\n  }\n},\n</code></pre>"},{"location":"JavaScript/JS%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2/","title":"JS\u5927\u5c0f\u5199\u8f6c\u6362","text":"<p>JavaScript\u4e2d\u7684\u5b57\u7b26\u4e32\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528<code>toLowerCase()</code>\u65b9\u6cd5\u5c06\u5927\u5199\u5b57\u6bcd\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>let str = \"HELLO WORLD\";\nlet lowerCaseStr = str.toLowerCase();\nconsole.log(lowerCaseStr); // \u8f93\u51fa \"hello world\"\n</code></pre> <p>JavaScript\u4e2d\u7684\u5b57\u7b26\u4e32\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528<code>toUpperCase()</code>\u65b9\u6cd5\u5c06\u5c0f\u5199\u5b57\u6bcd\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>let str = \"hello world\";\nlet upperCaseStr = str.toUpperCase();\nconsole.log(upperCaseStr); // \u8f93\u51fa \"HELLO WORLD\"\n</code></pre>"},{"location":"JavaScript/JS%E5%AF%B9%E8%B1%A1%E5%90%88%E5%B9%B6/","title":"JS\u5bf9\u8c61\u5408\u5e76","text":"<p>\u5728JavaScript\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>Object.assign()</code>\u65b9\u6cd5\u6765\u5408\u5e76\u5bf9\u8c61\u3002<code>Object.assign()</code>\u65b9\u6cd5\u5c06\u63a5\u6536\u4e00\u4e2a\u76ee\u6807\u5bf9\u8c61\u548c\u4e00\u4e2a\u6216\u591a\u4e2a\u6e90\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u6e90\u5bf9\u8c61\u7684\u5c5e\u6027\u590d\u5236\u5230\u76ee\u6807\u5bf9\u8c61\u4e2d\u3002\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e2d\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u5c5e\u6027\uff0c\u5219\u4f1a\u5c06\u6e90\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u8986\u76d6\u76ee\u6807\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528<code>Object.assign()</code>\u65b9\u6cd5\u5408\u5e76\u5bf9\u8c61\u7684\u793a\u4f8b\uff1a</p> <pre><code>const obj1 = { a: 1, b: 2 };\nconst obj2 = { c: 3, d: 4 };\nconst obj3 = { e: 5, f: 6 };\nconst mergedObj = Object.assign({}, obj1, obj2, obj3);\nconsole.log(mergedObj);\n</code></pre> <p>\u8f93\u51fa</p> <pre><code>{ a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 }\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06<code>obj1</code>\u3001<code>obj2</code>\u548c<code>obj3</code>\u5408\u5e76\u5230\u4e00\u4e2a\u65b0\u7684\u7a7a\u5bf9\u8c61\u4e2d\u3002<code>Object.assign({}, obj1, obj2, obj3)</code>\u4f1a\u5c06<code>obj1</code>\u3001<code>obj2</code>\u548c<code>obj3</code>\u7684\u5c5e\u6027\u590d\u5236\u5230\u65b0\u5bf9\u8c61\u4e2d\u3002\u6700\u7ec8\uff0c<code>mergedObj</code>\u5bf9\u8c61\u5c06\u5305\u542b\u6240\u6709\u5408\u5e76\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c<code>Object.assign()</code>\u65b9\u6cd5\u53ea\u4f1a\u5c06\u5bf9\u8c61\u7684\u53ef\u679a\u4e3e\u5c5e\u6027\u590d\u5236\u5230\u76ee\u6807\u5bf9\u8c61\u4e2d\u3002\u5982\u679c\u6e90\u5bf9\u8c61\u4e2d\u6709\u503c\u4e3a<code>null</code>\u6216<code>undefined</code>\u7684\u5c5e\u6027\uff0c\u5b83\u4eec\u5c06\u88ab\u5ffd\u7565\u3002\u5982\u679c\u4f60\u9700\u8981\u5408\u5e76\u6df1\u5c42\u5d4c\u5957\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\uff0c\u5982<code>Lodash</code>\u7684<code>merge</code>\u65b9\u6cd5\u3002</p>"},{"location":"JavaScript/JS%E5%AF%BB%E6%89%BE%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9F%90%E4%B8%AA%E6%95%B0%E6%8D%AE/","title":"JS\u5bfb\u627e\u6570\u7ec4\u5bf9\u8c61\u7684\u67d0\u4e2a\u6570\u636e","text":"<p>\u8981\u83b7\u53d6JavaScript\u6570\u7ec4\u5bf9\u8c61\u4e2d<code>id</code>\u4e3a1\u7684\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>Array.prototype.find()</code>\u65b9\u6cd5\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>const data = [\n  { id: 1, name: 'John' },\n  { id: 2, name: 'Jane' },\n  { id: 3, name: 'Bob' },\n];\nconst result = data.find(item =&gt; item.id === 1);\nconsole.log(result);\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c<code>data</code>\u662f\u4e00\u4e2a\u5305\u542b\u591a\u4e2a\u5bf9\u8c61\u7684\u6570\u7ec4\u3002<code>Array.prototype.find()</code>\u65b9\u6cd5\u7528\u4e8e\u5728\u6570\u7ec4\u4e2d\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002\u5728\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7<code>item.id === 1</code>\u6765\u5224\u65ad<code>id</code>\u662f\u5426\u4e3a1\uff0c\u5e76\u8fd4\u56de\u5bf9\u5e94\u7684\u5bf9\u8c61\u3002\u6700\u540e\uff0c\u5c06\u7ed3\u679c\u6253\u5370\u5230\u63a7\u5236\u53f0\u4e0a\u3002</p> <p>\u8fd0\u884c\u7ed3\u679c\u5c06\u4f1a\u662f\uff1a</p> <pre><code>{ id: 1, name: 'John' }\n</code></pre> <p>\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230<code>id</code>\u4e3a1\u7684\u6570\u636e\u5bf9\u8c61\u4e86\u3002</p>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/","title":"\u6570\u7ec4\u5408\u5e76\u7684\u65b9\u6cd5","text":"<p>\u5728JavaScript\u4e2d\uff0c\u5408\u5e76\u6570\u7ec4\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u6cd5\u5b9e\u73b0\uff0c\u8fd9\u91cc\u5217\u4e3e\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u65b9\u6cd5\uff1a</p>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#concat","title":"Concat \u65b9\u6cd5:","text":"<p><code>concat()</code> \u65b9\u6cd5\u7528\u4e8e\u5408\u5e76\u4e24\u4e2a\u6216\u591a\u4e2a\u6570\u7ec4\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4f1a\u6539\u53d8\u73b0\u6709\u7684\u6570\u7ec4\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\u3002</p> <pre><code>const array1 = ['a', 'b', 'c'];\nconst array2 = ['d', 'e', 'f'];\nconst combined = array1.concat(array2);\n// combined \u73b0\u5728\u662f ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#spread","title":"Spread \u64cd\u4f5c\u7b26 (...):","text":"<p>ES6 \u5f15\u5165\u4e86\u6269\u5c55\u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u7528\u6765\u5c55\u5f00\u6570\u7ec4\uff0c\u5e76\u4e14\u53ef\u4ee5\u7b80\u6d01\u5730\u5b9e\u73b0\u6570\u7ec4\u7684\u5408\u5e76\u3002</p> <pre><code>const array1 = ['a', 'b', 'c'];\nconst array2 = ['d', 'e', 'f'];\nconst combined = [...array1, ...array2];\n// combined \u73b0\u5728\u662f ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#push-spread","title":"Push \u65b9\u6cd5\u7ed3\u5408 Spread \u64cd\u4f5c\u7b26:","text":"<p>\u5982\u679c\u4f60\u60f3\u5728\u73b0\u6709\u6570\u7ec4\u4e0a\u6dfb\u52a0\u65b0\u6570\u7ec4\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u4f7f\u7528<code>push()</code>\u65b9\u6cd5\u7ed3\u5408\u6269\u5c55\u64cd\u4f5c\u7b26\u3002</p> <pre><code>const array1 = ['a', 'b', 'c'];\nconst array2 = ['d', 'e', 'f'];\narray1.push(...array2);\n// array1 \u73b0\u5728\u662f ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#arrayprototypeforeach","title":"Array.prototype.forEach() \u65b9\u6cd5:","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528<code>forEach()</code>\u904d\u5386\u6570\u7ec4\uff0c\u5e76\u5c06\u6bcf\u4e2a\u5143\u7d20\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u6570\u7ec4\u4e2d\u3002</p> <pre><code>const array1 = ['a', 'b', 'c'];\nconst array2 = ['d', 'e', 'f'];\narray2.forEach(item =&gt; array1.push(item));\n// array1 \u73b0\u5728\u662f ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#arrayprototypeflat","title":"Array.prototype.flat() \u65b9\u6cd5:","text":"<p>\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u5305\u542b\u6570\u7ec4\u7684\u6570\u7ec4\uff08\u5373\u6570\u7ec4\u7684\u6570\u7ec4\uff09\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>flat()</code>\u65b9\u6cd5\u5c06\u5b83\u4eec\u5c55\u5e73\u5230\u4e00\u4e2a\u5355\u4e00\u6570\u7ec4\u3002</p> <pre><code>const array1 = [['a', 'b', 'c'], ['d', 'e', 'f']];\nconst combined = array1.flat();\n// combined \u73b0\u5728\u662f ['a', 'b', 'c', 'd', 'e', 'f']\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6/#arrayprototypereduce","title":"Array.prototype.reduce() \u65b9\u6cd5:","text":"<p><code>reduce()</code>\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7528\u6765\u5408\u5e76\u6570\u7ec4\uff0c\u5c24\u5176\u662f\u5f53\u4f60\u9700\u8981\u5bf9\u5143\u7d20\u8fdb\u884c\u4e00\u4e9b\u989d\u5916\u64cd\u4f5c\u65f6\u3002</p> <pre><code>const array1 = [['a', 'b'], ['c', 'd']];\nconst combined = array1.reduce((acc, val) =&gt; acc.concat(val), []);\n// combined \u73b0\u5728\u662f ['a', 'b', 'c', 'd']\n</code></pre> <p>\u9009\u62e9\u54ea\u79cd\u65b9\u6cd5\u53d6\u51b3\u4e8e\u4f60\u7684\u5177\u4f53\u9700\u6c42\u548c\u4f60\u504f\u597d\u7684\u7f16\u7a0b\u98ce\u683c\u3002\u5728\u5904\u7406\u5927\u578b\u6570\u636e\u96c6\u65f6\uff0c\u4e00\u4e9b\u65b9\u6cd5\uff08\u5982<code>concat</code>\uff09\u53ef\u80fd\u6bd4\u5176\u4ed6\u65b9\u6cd5\uff08\u5982<code>push</code>\u7ed3\u5408\u6269\u5c55\u64cd\u4f5c\u7b26\uff09\u66f4\u5feb\uff0c\u56e0\u4e3a\u5b83\u4eec\u5bf9\u5185\u5b58\u7684\u4f7f\u7528\u66f4\u6709\u6548\u3002</p>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%B1%82%E7%BA%A7%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/","title":"JS\u6570\u7ec4\u5bf9\u8c61\u5c42\u7ea7\u683c\u5f0f\u8f6c\u6362","text":"<p>\u6848\u4f8b</p> <pre><code>var a = [\n  {\n      \"projectReview\": {\n          \"verifyMode\": \"\u5ba1\u67e5\u4f1a\",\n      },\n      \"verifyMemberList\": []\n  },\n  {\n      \"projectReview\": {\n          \"verifyMode\": \"\u5ba1\u67e5\u4f1a\",\n      },\n      \"verifyMemberList\": []\n  }\n];\n\nvar b = [\n  {\n    \"verifyMode\": \"\u5ba1\u67e5\u4f1a\",\n    \"verifyMemberList\": []\n  },\n  {\n    \"verifyMode\": \"\u5ba1\u67e5\u4f1a\",\n    \"verifyMemberList\": []\n  }\n]\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%B1%82%E7%BA%A7%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/#a-b","title":"a \u683c\u5f0f\u8f6c b \u683c\u5f0f","text":"<ul> <li>\u65b9\u6cd51</li> </ul> <pre><code>var c = a.map(function(element) {\n  return {\n    verifyMode: element.projectReview.verifyMode,\n    verifyMember: element.projectReview.verifyMember,\n    record: element.projectReview.record,\n    verifyMemberList: element.verifyMemberList\n  };\n});\nconsole.log(c);\n</code></pre> <ul> <li>\u65b9\u6cd52</li> </ul> <pre><code>const c = a.map(({ projectReview, verifyMemberList }) =&gt; ({\n  ...projectReview,\n  verifyMemberList\n}));\nconsole.log(c);\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%B1%82%E7%BA%A7%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2/#b-a","title":"b \u683c\u5f0f\u8f6c a \u683c\u5f0f","text":"<ul> <li>\u65b9\u6cd51</li> </ul> <pre><code>var c = b.map(function(element) {\n  return {\n    projectReview: {\n      verifyMode: element.verifyMode,\n      verifyMember: element.verifyMember,\n      record: element.record\n    },\n    verifyMemberList: element.verifyMemberList\n  };\n});\nconsole.log(c);\n</code></pre> <ul> <li>\u65b9\u6cd52</li> </ul> <pre><code>const c = b.map(({ verifyMode, verifyMember, record, verifyMemberList }) =&gt; ({\n  projectReview: {\n    verifyMode,\n    verifyMember,\n    record\n  },\n  verifyMemberList\n}));\nconsole.log(c);\n</code></pre>"},{"location":"JavaScript/JS%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E7%AD%9B%E9%80%89%E6%8C%87%E5%AE%9A%E5%90%8E%E7%BC%80%E6%96%87%E4%BB%B6/","title":"JS\u7b5b\u9009\u6307\u5b9a\u540e\u7f00\u6587\u4ef6","text":"<p>\u627e\u51fa\u4e0b\u9762\u6570\u636e\u4e2dname\u503c\u7684\u540e\u7f00\u4e3amd\u7684\u6570\u636e</p> <pre><code>const  files = [\n  {\n      \"name\": \"test.txt\",\n  },\n  {\n      \"name\": \"text.md\",\n  },\n  {\n      \"name\": \"text.js\",\n  }\n]\n</code></pre> <pre><code>const result = files.filter(file =&gt; file.name.endsWith(\".md\"));\nconsole.log(result);\n</code></pre> <p><code>.endsWith(\".md\")</code> \u662f JavaScript \u5b57\u7b26\u4e32\u7684\u5185\u7f6e\u65b9\u6cd5\u4e4b\u4e00\u3002\u5b83\u7528\u4e8e\u5224\u65ad\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u4ee5\u6307\u5b9a\u7684\u540e\u7f00\u7ed3\u5c3e\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>.md</code> \u662f\u8981\u5224\u65ad\u7684\u540e\u7f00\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u4ee5 <code>.md</code> \u7ed3\u5c3e\uff0c\u90a3\u4e48\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\u3002</p>"},{"location":"JavaScript/JS%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E8%AF%BB%E5%8F%96/","title":"JS\u672c\u5730\u5b58\u50a8\u8bfb\u53d6","text":"<p>\u5728JavaScript\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u6280\u672f\uff0c\u5982localStorage\u6216sessionStorage\uff0c\u6765\u8bfb\u53d6\u548c\u5199\u5165\u5bf9\u8c61\u3002</p> <ol> <li>\u5199\u5165\u5bf9\u8c61\uff1a</li> </ol> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u5bf9\u8c61\nvar obj = { name: 'John', age: 25 };\n\n// \u5c06\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\nvar objStr = JSON.stringify(obj);\n\n// \u4f7f\u7528localStorage\u5199\u5165\u5bf9\u8c61\nlocalStorage.setItem('myObj', objStr);\n</code></pre> <ol> <li>\u8bfb\u53d6\u5bf9\u8c61\uff1a</li> </ol> <pre><code>// \u4f7f\u7528localStorage\u8bfb\u53d6\u5bf9\u8c61\nvar objStr = localStorage.getItem('myObj');\n\n// \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5bf9\u8c61\nvar obj = JSON.parse(objStr);\n\n// \u73b0\u5728\u53ef\u4ee5\u8bbf\u95ee\u5bf9\u8c61\u7684\u5c5e\u6027\nconsole.log(obj.name); // \u8f93\u51fa: John\nconsole.log(obj.age); // \u8f93\u51fa: 25\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c<code>localStorage</code> \u548c <code>sessionStorage</code> \u53ea\u80fd\u5b58\u50a8\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u636e\uff0c\u56e0\u6b64\u9700\u8981\u4f7f\u7528 <code>JSON.stringify()</code> \u5c06\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528 <code>JSON.parse()</code> \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5bf9\u8c61\u3002</p>"},{"location":"JavaScript/JS%E6%A3%80%E6%B5%8B%E6%95%B0%E7%BB%84%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E8%AF%A5%E6%95%B0%E6%8D%AE/","title":"JS\u68c0\u6d4b\u6570\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u8be5\u6570\u636e","text":"<p>js\u6570\u7ec4\u6dfb\u52a0\u6570\u636e\uff0cpush\u7684\u65f6\u5019\u5148\u68c0\u67e5\uff0c\u5982\u679c\u5b58\u5728\u5c31\u5220\u9664\u6570\u7ec4\u4e2d\u6240\u6709\u8be5\u5143\u7d20\uff0c\u4e0d\u5b58\u5728\u5c31\u6dfb\u52a0</p>"},{"location":"JavaScript/JS%E6%A3%80%E6%B5%8B%E6%95%B0%E7%BB%84%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E8%AF%A5%E6%95%B0%E6%8D%AE/#_1","title":"\u6848\u4f8b","text":"<p>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u5c06\u8fd9\u4e2a\u903b\u8f91\u5c01\u88c5\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u5728\u9700\u8981\u7684\u5730\u65b9\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>let myArray = [1, 2, 3, 4, 5];\nlet elementToAddOrRemove = 3;\n\n// \u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728\nif (myArray.includes(elementToAddOrRemove)) {\n  // \u5b58\u5728\uff0c\u5220\u9664\u6240\u6709\u8be5\u5143\u7d20\n  myArray = myArray.filter(e =&gt; e !== elementToAddOrRemove);\n} else {\n  // \u4e0d\u5b58\u5728\uff0c\u6dfb\u52a0\u5143\u7d20\n  myArray.push(elementToAddOrRemove);\n}\n\nconsole.log(myArray);\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u76f4\u63a5\u5728\u6570\u7ec4\u4e0a\u8fd0\u884c\uff0c\u4f7f\u7528<code>includes</code>\u65b9\u6cd5\u68c0\u67e5\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u6570\u7ec4\u4e2d\u3002\u6839\u636e\u68c0\u67e5\u7ed3\u679c\uff0c\u5b83\u8981\u4e48\u4f7f\u7528<code>filter</code>\u65b9\u6cd5\u79fb\u9664\u6240\u6709\u5339\u914d\u7684\u5143\u7d20\uff0c\u8981\u4e48\u4f7f\u7528<code>push</code>\u65b9\u6cd5\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5143\u7d20\u3002\u6700\u540e\u6253\u5370\u51fa\u4fee\u6539\u540e\u7684\u6570\u7ec4\u3002</p>"},{"location":"JavaScript/JS%E6%A3%80%E6%B5%8B%E6%95%B0%E7%BB%84%E4%B8%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E8%AF%A5%E6%95%B0%E6%8D%AE/#_2","title":"\u5c01\u88c5","text":"<p>\u5728JavaScript\u4e2d\uff0c\u5982\u679c\u4f60\u60f3\u8981\u5728\u6570\u7ec4\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u4e14\u5728\u6dfb\u52a0\u4e4b\u524d\u68c0\u67e5\u8be5\u5143\u7d20\u662f\u5426\u5df2\u7ecf\u5b58\u5728\u4e8e\u6570\u7ec4\u4e2d\uff0c\u5982\u679c\u5b58\u5728\u5219\u5220\u9664\u6240\u6709\u8be5\u5143\u7d20\uff0c\u4e0d\u5b58\u5728\u5219\u6dfb\u52a0\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u903b\u8f91\uff1a</p> <pre><code>function toggleElementInArray(array, element) {\n  const index = array.indexOf(element);\n  if (index === -1) {\n    // \u4e0d\u5b58\u5728\uff0c\u6dfb\u52a0\u5143\u7d20\n    array.push(element);\n  } else {\n    // \u5b58\u5728\uff0c\u5220\u9664\u6240\u6709\u8be5\u5143\u7d20\n    return array.filter(e =&gt; e !== element);\n  }\n  return array;\n}\n\n// \u793a\u4f8b\u7528\u6cd5\nlet myArray = [1, 2, 3, 4, 5];\n\nmyArray = toggleElementInArray(myArray, 2); // \u5220\u96642\uff0c\u73b0\u5728\u6570\u7ec4\u662f [1, 3, 4, 5]\nmyArray = toggleElementInArray(myArray, 6); // \u6dfb\u52a06\uff0c\u73b0\u5728\u6570\u7ec4\u662f [1, 3, 4, 5, 6]\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c<code>toggleElementInArray</code>\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u548c\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\u3002\u5b83\u9996\u5148\u68c0\u67e5\u5143\u7d20\u662f\u5426\u5728\u6570\u7ec4\u4e2d\u3002\u5982\u679c\u4e0d\u5728\uff0c\u5c31\u4f7f\u7528<code>push</code>\u65b9\u6cd5\u6dfb\u52a0\u5b83\u3002\u5982\u679c\u5728\uff0c\u5c31\u4f7f\u7528<code>filter</code>\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u5176\u4e2d\u4e0d\u5305\u542b\u8be5\u5143\u7d20\u3002\u7136\u540e\u8fd4\u56de\u66f4\u65b0\u540e\u7684\u6570\u7ec4\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ea\u9002\u7528\u4e8e\u539f\u59cb\u6570\u636e\u7c7b\u578b\uff08\u5982\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\uff09\u7684\u6570\u7ec4\u3002\u5982\u679c\u6570\u7ec4\u5305\u542b\u5bf9\u8c61\u6216\u6570\u7ec4\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u66f4\u590d\u6742\u7684\u6bd4\u8f83\u903b\u8f91\u6765\u786e\u5b9a\u5143\u7d20\u662f\u5426\u76f8\u7b49\u3002</p>"},{"location":"JavaScript/%E5%88%A4%E6%96%AD%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%98%AF%E5%90%A6%E6%9C%89%E7%9B%B8%E5%90%8C%E5%AD%97%E6%AE%B5/","title":"\u5224\u65ad\u6570\u7ec4\u5bf9\u8c61\u4e2d\u662f\u5426\u6709\u76f8\u540c\u5b57\u6bb5","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528ES6\u7684<code>Array.prototype.some</code>\u65b9\u6cd5\u6765\u68c0\u67e5\u6570\u7ec4<code>a</code>\u4e2d\u662f\u5426\u5b58\u5728\u4e0e\u53d8\u91cf<code>b</code>\u76f8\u540c\u7684<code>userId</code>\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\uff1a</p> <pre><code>const a = [\n    {\n        \"userId\": \"c14ee262f1a51d76665b3e1f074bb4dc\",\n        \"speciality\": \"FUEL\",\n    },\n    {\n        \"userId\": \"dd2bed2d062f37b2a0bb00e5d8807d76\",\n        \"speciality\": \"TH\",\n    }\n];\n\nconst b = 'dd2bed2d062f37b2a0bb00e5d8807d76';\n\nconst hasMatchingUserId = a.some(item =&gt; item.userId === b);\n\nconsole.log(hasMatchingUserId); // \u8f93\u51fa\u7ed3\u679c\u5e94\u4e3a true\n</code></pre> <p>\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c<code>some</code>\u65b9\u6cd5\u4f1a\u904d\u5386\u6570\u7ec4<code>a</code>\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u5143\u7d20\u6267\u884c\u4e00\u4e2a\u6d4b\u8bd5\u51fd\u6570\u3002\u5982\u679c\u6d4b\u8bd5\u51fd\u6570\u5bf9\u4efb\u610f\u4e00\u4e2a\u5143\u7d20\u8fd4\u56de<code>true</code>\uff0c\u90a3\u4e48<code>some</code>\u65b9\u6cd5\u672c\u8eab\u4e5f\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6d4b\u8bd5\u51fd\u6570\u68c0\u67e5\u6bcf\u4e2a\u5143\u7d20\u7684<code>userId</code>\u5c5e\u6027\u662f\u5426\u7b49\u4e8e\u53d8\u91cf<code>b</code>\u7684\u503c\u3002</p>"},{"location":"JavaScript/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BCJSON%E4%B8%8EJSON%E4%BA%92%E8%BD%AC/","title":"\u5b57\u7b26\u4e32\u683cJSON\u4e0eJSON\u4e92\u8f6c","text":"<p>\u5b57\u7b26\u4e32\u683cJSON\u4e0eJSON\u4e92\u8f6c</p> <ul> <li>\u5b57\u7b26\u4e32\u8f6cJSON</li> </ul> <pre><code>JSON.parse(str)\n</code></pre> <ul> <li>JSON\u8f6c\u5b57\u7b26\u4e32</li> </ul> <pre><code>JSON.stringify(obj)\n</code></pre> <ul> <li>\u5b57\u7b26\u4e32\u8f6cJSON\u5b57\u7b26\u4e32</li> </ul> <pre><code>JSON.stringify(JSON.parse(str))\n</code></pre> <ul> <li>JSON\u5b57\u7b26\u4e32\u8f6c\u5b57\u7b26\u4e32</li> </ul> <pre><code>JSON.stringify(JSON.parse(JSON.stringify(obj)))\n</code></pre>"},{"location":"JavaScript/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E4%BC%98%E5%8C%96/","title":"\u6761\u4ef6\u5224\u65ad\u4f18\u5316","text":""},{"location":"JavaScript/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E4%BC%98%E5%8C%96/#1","title":"\u6848\u4f8b1","text":"<ul> <li>\u4f18\u5316\u524d</li> </ul> <pre><code>if (newData.editorId === this.userInfo.id || (newData.assistantEditorId === this.userInfo.id &amp;&amp; newData.isAssistantEditor) &amp;&amp; (newData.status === \"Created\" || newData.status === \"Pending_edit\" || newData.status === \"Editing\" || newData.status === \"Pending_modify\" || newData.status === \"Modifying\")) {\n          this.isRefuellingEngineer = true;\n        }\n</code></pre> <ul> <li>\u4f18\u5316\u540e</li> </ul> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4\u6765\u5305\u542b\u6240\u6709\u5141\u8bb8\u7684\u72b6\u6001\nconst allowStatuses = [\"Created\", \"Pending_edit\", \"Editing\", \"Pending_modify\", \"Modifying\"];\n\n// \u68c0\u67e5\u7528\u6237\u662f\u5426\u662f\u4e3b\u7f16\u8f91\u6216\u52a9\u7406\u7f16\u8f91\uff0c\u5e76\u4e14\u72b6\u6001\u662f\u5426\u5141\u8bb8\nconst isEditor = newData.editorId === this.userInfo.id;\nconst isAssistantEditor = newData.assistantEditorId === this.userInfo.id &amp;&amp; newData.isAssistantEditor;\n\n// \u5982\u679c\u7528\u6237\u662f\u4e3b\u7f16\u8f91\u6216\u52a9\u7406\u7f16\u8f91\uff0c\u5e76\u4e14\u72b6\u6001\u662f\u5141\u8bb8\u7684\uff0c\u8bbe\u7f6ethis.isRefuellingEngineer\u4e3atrue\nif ((isEditor || isAssistantEditor) &amp;&amp; allowStatuses.includes(newData.status)) {\n  this.isRefuellingEngineer = true;\n}\n</code></pre>"},{"location":"JavaScript/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E4%BC%98%E5%8C%96/#2","title":"\u6848\u4f8b2","text":"<ul> <li>\u4f18\u5316\u524d</li> </ul> <pre><code>if (newData.verifierId === this.userInfo.id &amp;&amp; (newData.status === \"Pending_verify\" || newData.status === \"Verifying\")) {\n          this.isVerificationEngineer = true;\n        }\n</code></pre> <ul> <li>\u4f18\u5316\u540e</li> </ul> <pre><code>// \u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4\u6765\u5305\u542b\u6240\u6709\u5141\u8bb8\u7684\u72b6\u6001\nconst verificationStatuses = [\"Pending_verify\", \"Verifying\"];\n\n// \u5982\u679c\u7528\u6237\u662f\u9a8c\u8bc1\u5de5\u7a0b\u5e08\uff0c\u5e76\u4e14\u72b6\u6001\u662f\u5141\u8bb8\u7684\uff0c\u8bbe\u7f6ethis.isVerificationEngineer\u4e3atrue\nif (newData.verifierId === this.userInfo.id &amp;&amp; verificationStatuses.includes(newData.status)) {\n  this.isVerificationEngineer = true;\n}\n</code></pre>"},{"location":"JavaScript/%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAantd%E4%B8%ADtable%E4%BD%BF%E7%94%A8/","title":"\u683c\u5f0f\u8f6c\u6362\u4e3aantd\u4e2dtable\u4f7f\u7528","text":""},{"location":"JavaScript/%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAantd%E4%B8%ADtable%E4%BD%BF%E7%94%A8/#jsabes6","title":"\u95ee\u9898\uff1a\u7528js\u5199\u6cd5\u628a\u4e0b\u9762a\u7684\u5bf9\u8c61\u6570\u636e\u7ed3\u6784\u8f6c\u6362\u6210b\u7684\u6570\u7ec4\u7ed3\u6784\uff0ces6\u5199\u6cd5\u4e5f\u884c","text":"<pre><code>var a = {\n    \"taskName\": \"\u65b0\u7ec4\u4ef6\u8ba1\u7b97\",\n    \"taskType\": \"\u8ba1\u7b97\",\n    \"status\": \"Created\",\n    \"isReview\": \"\u9700\u8981\u7f16\u8f91\",\n    \"program\": null,\n    \"isDelete\": false,\n    \"calculateStatus\": \"\",\n    \"isAssistantEditor\": null,\n    \"editorName\": \"\u7f16\u8f91\u4eba\",\n    \"verifierName\": \"\u6821\u6838\u4eba\",\n    \"assistantEditorName\": \"\u52a9\u7406\u7f16\u8f91\u4ebarogram\",\n};\n\nvar b = [\n    {\n        title: \"\u4efb\u52a1\u540d\u79f0\",\n        content: \"\u65b0\u7ec4\u4ef6\u8ba1\u7b97\",\n    },\n    {\n        title: \"\u4efb\u52a1\u7c7b\u578b\",\n        content: \"\u8ba1\u7b97\"\n    },\n    {\n        title: \"\u4efb\u52a1\u72b6\u6001\",\n        content: \"Created\"\n    },\n    {\n        title: \"\u662f\u5426\u7f16\u5ba1\",\n        content: '\u9700\u8981\u7f16\u8f91'\n    },\n    {\n        title: \"\u6821\u7b97\u5de5\u7a0b\u5e08\",\n        content: \"\u7f16\u8f91\u4eba\"\n    },\n    {\n        title: \"\u6821\u6838\u5de5\u7a0b\u5e08\",\n        content: \"\u6821\u6838\u4eba\"\n    },\n    {\n        title: \"\u8ba1\u7b97\u5de5\u7a0b\u5e08\",\n        content: \"\u52a9\u7406\u7f16\u8f91\u4eba\"\n    },\n\n]\n</code></pre>"},{"location":"JavaScript/%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BAantd%E4%B8%ADtable%E4%BD%BF%E7%94%A8/#_1","title":"\u89e3\u7b54\uff1a","text":"<pre><code>var a = {\n  \"taskName\": \"\u65b0\u7ec4\u4ef6\u8ba1\u7b97\",\n  \"taskType\": \"\u8ba1\u7b97\",\n  \"status\": \"Created\",\n  \"isReview\": \"\u9700\u8981\u7f16\u8f91\",\n  \"program\": null,\n  \"isDelete\": false,\n  \"calculateStatus\": \"\",\n  \"isAssistantEditor\": null,\n  \"editorName\": \"\u7f16\u8f91\u4eba\",\n  \"verifierName\": \"\u6821\u6838\u4eba\",\n  \"assistantEditorName\": \"\u52a9\u7406\u7f16\u8f91\u4eba\",\n};\n\n// \u5b9a\u4e49\u4e00\u4e2a\u6620\u5c04\u5173\u7cfb\uff0c\u7528\u4e8e\u5c06\u5bf9\u8c61\u7684key\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u6807\u9898\nconst titleMap = {\n  taskName: \"\u4efb\u52a1\u540d\u79f0\",\n  taskType: \"\u4efb\u52a1\u7c7b\u578b\",\n  status: \"\u4efb\u52a1\u72b6\u6001\",\n  isReview: \"\u662f\u5426\u7f16\u5ba1\",\n  editorName: \"\u6821\u7b97\u5de5\u7a0b\u5e08\",\n  verifierName: \"\u6821\u6838\u5de5\u7a0b\u5e08\",\n  assistantEditorName: \"\u8ba1\u7b97\u5de5\u7a0b\u5e08\"\n};\n\nvar b = Object.keys(a) // \u83b7\u53d6\u5bf9\u8c61\u7684\u6240\u6709\u952e\n  .filter(key =&gt; titleMap[key] !== undefined) // \u8fc7\u6ee4\u51fa\u5728titleMap\u4e2d\u5b9a\u4e49\u4e86\u6620\u5c04\u5173\u7cfb\u7684\u952e\n  .map(key =&gt; ({ title: titleMap[key], content: a[key] })); // \u6620\u5c04\u4e3a\u6240\u9700\u7684\u6570\u7ec4\u683c\u5f0f\n\nconsole.log(b);\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/Antd%E4%B8%ADTable%E7%BB%84%E4%BB%B6%E8%A1%8C%E7%B1%BB%E5%90%8D%E6%B7%BB%E5%8A%A0/","title":"Antd\u4e2dTable\u7ec4\u4ef6\u884c\u7c7b\u540d\u6dfb\u52a0","text":"<p>\u5173\u952e\u8bcd\uff1a rowClassName \u6587\u6863\uff1a https://1x.antdv.com/components/table-cn/</p> <p>\u6848\u4f8b\uff1a\u7528 <code>rowClassName</code> \u9694\u884c\u6362\u8272</p> <pre><code>&lt;a-table \n  :columns=\"columns\" \n  :data-source=\"dataSource\"\n   size=\"middle\" \n   row-key=\"id\" \n   :pagination=\"false\" \n   :row-class-name=\"rowClassName\"\n/&gt;\n</code></pre> <pre><code>rowClassName(record, index) {\n  console.log(record, index);\n  let className = \"light-row\";\n  if (index % 2 === 1) className = \"dark-row\";\n  return className;\n}\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/form%E8%A1%A8%E5%8D%95%E6%B8%85%E7%A9%BA/","title":"form\u8868\u5355\u6e05\u7a7a","text":"<pre><code>resetForm() {\n  this.$refs.ruleForm.resetFields();\n},\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/modal%E5%B7%A6%E4%B8%8A%E8%A7%92%E5%85%B3%E9%97%AD%E6%8C%89%E9%92%AE%E4%B8%8D%E7%94%9F%E6%95%88/","title":"modal\u5de6\u4e0a\u89d2\u5173\u95ed\u6309\u94ae\u4e0d\u751f\u6548","text":"<p>\u5982\u679c\u6ca1\u6709\u4f7f\u7528 <code>v-model</code>\uff0c\u9700\u8981 <code>cancel</code> \u4e8b\u4ef6\u63a7\u5236 </p> <pre><code>&lt;a-modal\n  title=\"Title\"\n  :visible=\"visible\"\n  :confirm-loading=\"confirmLoading\"\n  @ok=\"handleOk\"\n  @cancel=\"handleCancel\"\n&gt;\n  &lt;p&gt;{{ ModalText }}&lt;/p&gt;\n&lt;/a-modal&gt;\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/table%E5%A4%9A%E9%80%89%E5%92%8C%E5%8D%95%E9%80%89/","title":"table\u591a\u9009\u548c\u5355\u9009","text":"<pre><code>&lt;a-table\n  ref=\"table\"\n  row-key=\"fileId\"\n  :loading=\"loading\"\n  :columns=\"columns\"\n  :data-source=\"dataSource.records\"\n  :scroll=\"scroll\"\n  :row-selection=\"{ selectedRowKeys: selectedRowKeys, onChange: onSelectChange , type: 'radio'}\"\n  :pagination=\"pagination\"\n&gt;\n  &lt;template slot=\"name\" slot-scope=\"text,record\"&gt;\n    {{ getFileName(text) }}\n  &lt;/template&gt;\n&lt;/a-table&gt;\n</code></pre> <pre><code>&lt;a-table\n  ref=\"table\"\n  row-key=\"fileId\"\n  :loading=\"loading\"\n  :columns=\"columns\"\n  :data-source=\"dataSource.records\"\n  :scroll=\"scroll\"\n  :row-selection=\"{selectedRowKeys: selectedRowKeys,onChange: onSelectChange ,type: selectionType}\"\n  :pagination=\"pagination\"\n&gt;\n  &lt;template slot=\"name\" slot-scope=\"text,record\"&gt;\n    {{ getFileName(text) }}\n  &lt;/template&gt;\n&lt;/a-table&gt;\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/table%E7%82%B9%E5%87%BB%E8%A1%8C%E9%80%89%E4%B8%AD/","title":"table\u70b9\u51fb\u884c\u9009\u4e2d","text":"<p>https://github.com/ant-design/ant-design/issues/19962</p> <p>\u5e0c\u671bantd - table\u7ec4\u4ef6\uff0c\u5355\u9009\u548c\u591a\u9009\u60c5\u51b5\u4e0b\uff0c\u70b9\u51fb\u67d0\u4e00\u884c\u7684\u4efb\u4f55\u4f4d\u7f6e\u90fd\u53ef\u4ee5\u9009\u4e2d\u67d0\u4e00\u884c\uff0c\u800c\u4e0d\u662f\u53ea\u6709\u70b9\u51fb\u590d\u9009\u6846\u624d\u53ef\u4ee5\u9009\u4e2d\u67d0\u4e00\u884c #19962</p>"},{"location":"UI%E5%BA%93/AntDesign/table%E7%BC%96%E8%BE%91%E5%88%A0%E9%99%A4%E4%BF%9D%E5%AD%98/","title":"Table\u7f16\u8f91\u5220\u9664\u4fdd\u5b58","text":""},{"location":"UI%E5%BA%93/AntDesign/table%E7%BC%96%E8%BE%91%E5%88%A0%E9%99%A4%E4%BF%9D%E5%AD%98/#table","title":"table\u7f16\u8f91\u5220\u9664\u4fdd\u5b58","text":"<pre><code>&lt;a-table :columns=\"columns\" :data-source=\"dataSource\" :pagination=\"false\" :locale=\"{emptyText: '\u6682\u65e0\u6570\u636e,'}\"&gt;\n  &lt;span slot=\"tagKey\" slot-scope=\"text, record\"&gt;\n    &lt;span v-if=\"record.edit\"&gt;\n      &lt;a-input v-model=\"record.tagKey\" /&gt;\n    &lt;/span&gt;\n    &lt;span v-else&gt;{{ text }}&lt;/span&gt;\n  &lt;/span&gt;\n  &lt;span slot=\"tagName\" slot-scope=\"text, record\"&gt;\n    &lt;span v-if=\"record.edit\"&gt;\n      &lt;a-input v-model=\"record.tagName\" /&gt;\n    &lt;/span&gt;\n    &lt;span v-else&gt;{{ text }}&lt;/span&gt;\n  &lt;/span&gt;\n  &lt;span slot=\"action\" slot-scope=\"text, record\"&gt;\n    &lt;a v-if=\"record.edit\" @click=\"saveTextInfo(record)\"&gt;\u4fdd\u5b58&lt;/a&gt;\n    &lt;a v-else @click=\"deleteTextInfo(record)\"&gt;\u5220\u9664&lt;/a&gt;\n    &lt;a-divider type=\"vertical\" /&gt;\n    &lt;a @click=\"editTextInfo(record)\"&gt;\u7f16\u8f91&lt;/a&gt;\n  &lt;/span&gt;\n&lt;/a-table&gt;\n</code></pre> <pre><code>columns: [\n    {\n      title: \"\u5e8f\u53f7\",\n      dataIndex: \"num\",\n      width: \"15%\",\n      align: \"center\",\n      customRender: (t, r, index) =&gt; {\n        return parseInt(index) + 1;\n      }\n    },\n    {\n      title: \"\u6587\u672c\u540d\u79f0\",\n      dataIndex: \"tagKey\",\n      key: \"tagKey\",\n      align: \"center\",\n      width: \"35%\",\n      scopedSlots: { customRender: \"tagKey\" }\n    },\n    {\n      title: \"\u62a5\u544a\u6587\u672c\u6807\u7b7e\",\n      dataIndex: \"tagName\",\n      key: \"tagName\",\n      align: \"center\",\n      width: \"35%\",\n      scopedSlots: { customRender: \"tagName\" }\n    },\n    {\n      title: \"\u64cd\u4f5c\",\n      key: \"action\",\n      align: \"center\",\n      width: \"15%\",\n      scopedSlots: { customRender: \"action\" }\n    }\n  ],\n  dataSource: [\n    {\n      tagKey: \"\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\",\n      tagName: \"\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\",\n      edit: true\n    },\n    {\n      tagKey: \"\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\u6587\u672c\u540d\u79f0\",\n      tagName: \"\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\u62a5\u544a\u6587\u672c\u6807\u7b7e\",\n      edit: false\n    }\n  ],\n</code></pre> <pre><code> modifyState() {\n      this.dataSource.forEach(item =&gt; {\n        item.edit = false;\n      });\n    },\n    // \u65b0\u589e\u524d\u6821\u9a8c\u662f\u5426\u5b58\u5728edit\u4e3atrue\u7684\uff0c\u5982\u679c\u5b58\u5728\u5219\u63d0\u793a\u5148\u4fdd\u5b58\u4fee\u6539\u7684\u5728\u65b0\u5efa \n    addTextInfo() {\n      // \u68c0\u67e5dataSource\u6570\u7ec4\u4e2d\u662f\u5426\u6709edit\u4e3atrue\u7684\u9879\n      const hasUnsavedEdit = this.dataSource.some(item =&gt; item.edit === true);\n\n      if (hasUnsavedEdit) {\n        // \u5982\u679c\u5b58\u5728edit\u4e3atrue\u7684\u9879\uff0c\u63d0\u793a\u7528\u6237\u5148\u4fdd\u5b58\n        this.$message.error(\"\u5b58\u5728\u672a\u4fdd\u5b58\u7684\u7f16\u8f91\uff0c\u8bf7\u5148\u4fdd\u5b58\u518d\u8fdb\u884c\u65b0\u5efa\u64cd\u4f5c\u3002\");\n      } else {\n        // \u5982\u679c\u4e0d\u5b58\u5728edit\u4e3atrue\u7684\u9879\uff0c\u6267\u884c\u65b0\u589e\u903b\u8f91\n        const initInfo = {\n          tagKey: \"\",\n          tagName: \"\",\n          edit: true\n        };\n        // \u53ef\u9009\uff1a\u8c03\u7528modifyState\u65b9\u6cd5\uff08\u5982\u679c\u8be5\u65b9\u6cd5\u5b58\u5728\uff09\n        if (typeof this.modifyState === \"function\") {\n          this.modifyState();\n        }\n        // \u5c06\u65b0\u5efa\u7684\u9879\u6dfb\u52a0\u5230dataSource\u6570\u7ec4\n        this.dataSource.push(initInfo);\n      }\n    },\n    saveTextInfo(record) {\n      console.log(record);\n\n      // \u9700\u8981\u4fdd\u5b58\u7684\u8bb0\u5f55\u7684 tagKey \u548c tagName\n      const { tagKey, tagName } = record;\n      const index = this.dataSource.findIndex(item =&gt; item.tagKey === tagKey);\n      // \u521b\u5efa\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u4e0d\u5305\u62ec\u8981\u5220\u9664\u7684\u5143\u7d20\n      const newDataSource = this.dataSource.filter((item, currentIndex) =&gt; currentIndex !== index);\n      // \u68c0\u67e5\u662f\u5426\u6709\u76f8\u540c\u7684 tagKey \u6216 tagName\n      const existingRecord = newDataSource.find(item =&gt; item.tagKey === tagKey || item.tagName === tagName);\n      if (existingRecord) {\n        // \u5982\u679c\u627e\u5230\u4e86\u76f8\u540c\u7684\u8bb0\u5f55\uff0c\u5219\u63d0\u793a\u7528\u6237\n        this.$message.error(\"\u5df2\u5b58\u5728\u76f8\u540c\u7684\u6587\u672c\u540d\u79f0\u6216\u6587\u672c\u6807\u7b7e\uff0c\u8bf7\u4fee\u6539\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\");\n      } else if (!record.tagKey || !record.tagName) {\n        this.$message.error(\"\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\");\n      } else {\n        this.$message.success(\"\u4fdd\u5b58\u6210\u529f\");\n        this.modifyState();\n      }\n    },\n    deleteTextInfo(record) {\n      const tagKey = record.tagKey;\n      const index = this.dataSource.findIndex(item =&gt; item.tagKey === tagKey);\n      if (index !== -1) {\n        this.dataSource.splice(index, 1);\n      }\n    },\n    editTextInfo(record) {\n      const tagKey = record.tagKey;\n      const index = this.dataSource.findIndex(item =&gt; item.tagKey === tagKey);\n      if (index !== -1) {\n        // \u627e\u5230\u4e86\u5339\u914d\u7684\u8bb0\u5f55\uff0c\u73b0\u5728\u8bbe\u7f6e edit \u4e3a true\n        this.$set(this.dataSource[index], \"edit\", true);\n      }\n    },\n</code></pre> <p>\u63d0\u4ea4\u7684\u65f6\u5019\u9700\u8981\u628adataSource\u4e2d\u6bcf\u6761\u6570\u7ec4\u4e2d\u7684edit\u53bb\u6389</p> <pre><code>submitData() {\n  // \u521b\u5efa\u4e00\u4e2a\u4e0d\u5305\u542b edit \u5c5e\u6027\u7684\u65b0\u6570\u7ec4\n  const dataForSubmission = this.dataSource.map(({ edit, ...item }) =&gt; item);\n\n  // \u73b0\u5728 dataForSubmission \u6570\u7ec4\u4e2d\u7684\u5bf9\u8c61\u90fd\u4e0d\u5305\u542b edit \u5c5e\u6027\n  // \u60a8\u53ef\u4ee5\u4f7f\u7528 dataForSubmission \u6765\u8fdb\u884c\u6570\u636e\u63d0\u4ea4\n  // ...\n}\n</code></pre> <pre><code>submitForm(formName) {\n  const param = {\n    ...this.textForm,\n    tags: this.dataSource.map(({ edit, ...item }) =&gt; item)\n  };\n  console.log(param, \"aaaa\");\n  this.$refs[formName].validate(valid =&gt; {\n    if (valid) {\n      console.log(\"textForm\", this.textForm);\n    } else {\n      console.log(\"error submit!!\");\n      return false;\n    }\n  });\n}\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/table%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5/","title":"table\u8868\u683c\u5206\u9875","text":""},{"location":"UI%E5%BA%93/AntDesign/table%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5/#_1","title":"\u5206\u9875\u95ee\u9898","text":"<pre><code>columns: [\n  {\n    title: \"\u5e8f\u53f7\",\n    dataIndex: \"num\",\n    key: \"num\",\n    align: \"center\",\n    width: \"5%\",\n    // \u89e3\u51b3\u5206\u9875\u7684\u65f6\u5019\u5e8f\u53f7\u4ece1\u5f00\u59cb\u95ee\u9898\n    customRender: (t, r, index) =&gt; {\n      // \u90fd\u8981\u540c\u6b65data\u91cc\u9762\u7684\u6570\u636e\u5b9e\u884c\u7ed1\u5b9a,\u5199\u6b7b\u7684\u8bdd\u5feb\u901f\u5207\u6362\u9875\u7801\u4f1a\u4e71\n      return (index + (this.pagination.current - 1) * this.pagination.pageSize) + 1;\n    }\n  }\n],\nsearchForm: {\n    fileName: undefined,\n    fileType: undefined,\n    fileOrigin: undefined,\n    program: undefined\n},\nsearchFormData: {},\npagination: {\n  // \u9ed8\u8ba4\u503c \u9875\u7801\n  current: 1,\n  // \u6bcf\u9875\u6570\u91cf\n  pageSize: 20,\n  // \u66f4\u6539\u663e\u793a\u6761\u6570\n  showSizeChanger: true,\n  pageSizeOptions: [\"10\", \"20\", \"30\"],\n  // \u8df3\u8f6c\u5230\u67d0\u4e00\u9875\n  showQuickJumper: true,\n  // \u663e\u793a\u6761\u6570 \u5982\uff1a1-20 \u5171106\u6761\n  showTotal: (total, range) =&gt; {\n    return range[0] + \"-\" + range[1] + \" \u5171\" + total + \"\u6761\";\n  },\n  // \u663e\u793a\u6309\u94ae\u53d8\u5316\n  onShowSizeChange: (current, pageSize) =&gt; {\n    this.pagination.current = current;\n    this.pagination.pageSize = pageSize;\n    const size = {\n      size: pageSize,\n      // \u4fdd\u7559\u5728\u641c\u7d22\u6761\u4ef6, \u9632\u6b62\u5207\u6362\u9875\u7801\u5237\u65b0\u540e\u91cd\u7f6e\n      ...this.searchFormData\n    };\n    this.loading = true;\n    this.getFileList(current, size);\n  },\n  onChange: (current, pageSize) =&gt; {\n    this.loading = true;\n    this.getFileList(current, this.searchFormData);\n    this.pagination.current = current;\n  },\n  total: 0\n},\n</code></pre> <pre><code>getFileList(page, other) {\n  // \u540e\u7aef\u63a5\u53e3\u5b9a\u4e49 \u9875\u7801\u548c\u6570\u91cf \u5fc5\u4f20\n  // pageInfo \u9ed8\u8ba4\u503c, \u76f4\u63a5\u8c03\u7528\u7684\u65f6\u5019 getFileList() \u65e0\u9700\u4f20\u503c\n  const pageInfo = {\n    // \u6ca1\u6709\u4f20\u9875\u7801\u9ed8\u8ba41\n    current: page || 1,\n    // \u540c\u6b65\u6bcf\u9875\u6570\u91cf\n    size: this.pagination.pageSize\n  };\n  const params = Object.assign({}, pageInfo, { ...other });\n  getCosvcmsSysFileList(params).then((res) =&gt; {\n    if (res.success) {\n      this.dataSource = res.result;\n      this.pagination.total = res.result.total;\n      this.loading = false;\n    }\n  });\n},\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/table%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5/#_2","title":"\u5176\u4ed6","text":"<p><code>table</code> \u5c5e\u6027 <code>handleTableChange</code>  \u5206\u9875\u3001\u6392\u5e8f\u3001\u7b5b\u9009\u53d8\u5316\u65f6\u89e6\u53d1</p> <p></p>"},{"location":"UI%E5%BA%93/AntDesign/table%E8%A1%A8%E6%A0%BC%E8%8E%B7%E5%8F%96%E8%A1%8C%E6%95%B0%E6%8D%AE/","title":"\u9009\u62e9\u591a\u884c\u83b7\u53d6\u591a\u884c\u6570\u636e","text":"<pre><code>&lt;a-table\n  ref=\"table\"\n  row-key=\"fileId\"\n  :loading=\"loading\"\n  :columns=\"columns\"\n  :data-source=\"dataSource.records\"\n  :scroll=\"scroll\"\n  :row-selection=\"{ selectedRowKeys: selectedRowKeys, onChange: onSelectChange }\"\n  :pagination=\"pagination\"\n  @change=\"handleTableChange\"\n&gt;\n\n&lt;/a-table&gt;\n</code></pre> <pre><code>onSelectChange(selectedRowKeys, selectedRows) {\n  // keys\n  console.log(\"selectedRowKeys changed: \", selectedRowKeys);\n  // \u4e0a\u6570\u636e\n  console.log(\"selectedRows changed: \", selectedRows);\n},\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/table%E9%A6%96%E5%88%97%E5%BA%8F%E5%8F%B7/","title":"table\u9996\u5217\u5e8f\u53f7","text":"<pre><code>columns: [\n  {\n    title: \"\u5e8f\u53f7\",\n    dataIndex: \"num\",\n    width: \"15%\",\n    align: \"center\",\n    customRender: (t, r, index) =&gt; {\n      return parseInt(index) + 1;\n    }\n  }\n]\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8B%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6/","title":"\u6587\u4ef6\u4e0a\u4f20\u4e4b\u7c7b\u578b\u9650\u5236","text":"<p>antd \u4e0a\u4f20\u7ec4\u4ef6</p> <p><code>accept</code> \u63a5\u53d7\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b, \u8be6\u89c1 input accept Attribute</p> <p>\u552f\u4e00\u6587\u4ef6\u7c7b\u578b\u8bf4\u660e\u7b26</p> <pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;upload\n      :accept=\"'.pdf'\"\n      :before-upload=\"beforeUpload\"\n      :file-list=\"fileList\"\n      :multiple=\"false\"\n      :show-upload-list=\"false\"\n    &gt;\n      &lt;button type=\"button\"&gt;\n        \u9009\u62e9PDF\u6587\u4ef6\n      &lt;/button&gt;\n    &lt;/upload&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8B%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6/#accept","title":"accept \u8bf4\u660e","text":"<p><code>accept</code>\u5c5e\u6027\u7684\u503c\u53ef\u4ee5\u662f\u5408\u6cd5\u7684MIME\u7c7b\u578b\u6216\u6587\u4ef6\u6269\u5c55\u540d\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u4e8e\u6307\u5b9a\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u5408\u6cd5\u6587\u4ef6\u7c7b\u578b\u503c\u7684\u793a\u4f8b\uff1a</p> <ol> <li>\u5408\u6cd5\u7684MIME\u7c7b\u578b\uff1a</li> <li>\u56fe\u50cf\u6587\u4ef6\uff1a<code>image/jpeg</code>, <code>image/png</code>, <code>image/gif</code></li> <li>\u89c6\u9891\u6587\u4ef6\uff1a<code>video/mp4</code>, <code>video/mpeg</code>, <code>video/webm</code></li> <li>\u97f3\u9891\u6587\u4ef6\uff1a<code>audio/mpeg</code>, <code>audio/wav</code>, <code>audio/ogg</code></li> <li>\u6587\u672c\u6587\u4ef6\uff1a<code>text/plain</code>, <code>text/csv</code>, <code>application/pdf</code></li> <li>Microsoft Office\u6587\u4ef6\uff1a<code>application/msword</code>, <code>application/vnd.ms-excel</code>, <code>application/vnd.ms-powerpoint</code></li> <li> <p>PDF\u6587\u4ef6\uff1a<code>application/pdf</code></p> </li> <li> <p>\u5408\u6cd5\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff1a</p> </li> <li>\u56fe\u50cf\u6587\u4ef6\uff1a<code>.jpg</code>, <code>.jpeg</code>, <code>.png</code>, <code>.gif</code></li> <li>\u89c6\u9891\u6587\u4ef6\uff1a<code>.mp4</code>, <code>.avi</code>, <code>.mov</code>, <code>.webm</code></li> <li>\u97f3\u9891\u6587\u4ef6\uff1a<code>.mp3</code>, <code>.wav</code>, <code>.ogg</code></li> <li>\u6587\u672c\u6587\u4ef6\uff1a<code>.txt</code>, <code>.csv</code>, <code>.pdf</code></li> <li>Microsoft Office\u6587\u4ef6\uff1a<code>.doc</code>, <code>.xls</code>, <code>.ppt</code></li> <li>PDF\u6587\u4ef6\uff1a<code>.pdf</code></li> </ol> <p>\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u5408\u9002\u7684\u6587\u4ef6\u7c7b\u578b\u503c\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8d4b\u7ed9<code>accept</code>\u5c5e\u6027\u3002\u6ce8\u610f\uff0c\u4e0d\u540c\u7684\u6d4f\u89c8\u5668\u53ef\u80fd\u5bf9\u4e8eMIME\u7c7b\u578b\u7684\u8bc6\u522b\u5b58\u5728\u5dee\u5f02\uff0c\u56e0\u6b64\u5728\u6307\u5b9aMIME\u7c7b\u578b\u65f6\u6700\u597d\u8fdb\u884c\u6d4b\u8bd5\u4ee5\u786e\u4fdd\u517c\u5bb9\u6027\u3002\u540c\u65f6\uff0c\u6587\u4ef6\u6269\u5c55\u540d\u662f\u4e00\u79cd\u7b80\u5355\u4e14\u901a\u7528\u7684\u65b9\u5f0f\u6765\u9650\u5236\u6587\u4ef6\u7c7b\u578b\u3002</p>"},{"location":"UI%E5%BA%93/AntDesign/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B9%8B%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6/#_2","title":"\u552f\u4e00\u6587\u4ef6\u7c7b\u578b\u8bf4\u660e\u7b26","text":"<p>\u552f\u4e00\u6587\u4ef6\u7c7b\u578b\u8bf4\u660e\u7b26\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5728 <code>file</code> \u7c7b\u578b\u7684 <code>&lt;input&gt;</code> \u5143\u7d20\u4e2d\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u7684\u6587\u4ef6\u7c7b\u578b\u3002\u6bcf\u4e2a\u552f\u4e00\u6587\u4ef6\u7c7b\u578b\u8bf4\u660e\u7b26\u53ef\u4ee5\u91c7\u7528\u4e0b\u5217\u5f62\u5f0f\u4e4b\u4e00\uff1a</p> <ul> <li>\u4e00\u4e2a\u4ee5\u82f1\u6587\u53e5\u53f7\uff08\u201c.\u201d\uff09\u5f00\u5934\u7684\u5408\u6cd5\u7684\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u7684\u6587\u4ef6\u540d\u6269\u5c55\u540d\u3002\u4f8b\u5982\uff1a<code>.jpg</code>\u3001<code>.pdf</code> \u6216 <code>.doc</code>\u3002</li> <li>\u4e00\u4e2a\u4e0d\u5e26\u6269\u5c55\u540d\u7684 MIME \u7c7b\u578b\u5b57\u7b26\u4e32\u3002</li> <li>\u5b57\u7b26\u4e32 <code>audio/*</code>\uff0c\u8868\u793a\u201c\u4efb\u4f55\u97f3\u9891\u6587\u4ef6\u201d\u3002</li> <li>\u5b57\u7b26\u4e32 <code>video/*</code>\uff0c\u8868\u793a\u201c\u4efb\u4f55\u89c6\u9891\u6587\u4ef6\u201d\u3002</li> <li>\u5b57\u7b26\u4e32 <code>image/*</code>\uff0c\u8868\u793a\u201c\u4efb\u4f55\u56fe\u7247\u6587\u4ef6\u201d\u3002</li> </ul> <p><code>accept</code> \u5c5e\u6027\u7684\u503c\u662f\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\uff08\u7528\u9017\u53f7\u5206\u9694\uff09\u552f\u4e00\u6587\u4ef6\u7c7b\u578b\u8bf4\u660e\u7b26\u7684\u5b57\u7b26\u4e32\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u6587\u4ef6\u9009\u62e9\u5668\u9700\u8981\u80fd\u88ab\u8868\u793a\u6210\u4e00\u5f20\u56fe\u7247\u7684\u5185\u5bb9\uff0c\u5305\u62ec\u6807\u51c6\u7684\u56fe\u7247\u683c\u5f0f\u548c PDF \u6587\u4ef6\uff0c\u5927\u6982\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>&lt;input type=\"file\" accept=\"image/*,.pdf\" /&gt; \n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/%E8%A1%A8%E5%8D%95%E6%B7%BB%E5%8A%A0%E6%98%9F%E6%A0%87%E4%B8%8D%E6%A0%A1%E9%AA%8C/","title":"\u8868\u5355\u6dfb\u52a0\u661f\u6807\u4e0d\u6821\u9a8c","text":"<ol> <li>\u65b0\u589e <code>required</code></li> <li>\u4e0d\u6dfb\u52a0 <code>rule</code> \u6821\u9a8c</li> </ol> <pre><code>&lt;a-form-model-item label=\"Activity zone\" prop=\"region\" required&gt;\n  &lt;a-select v-model=\"form.region\" placeholder=\"please select your zone\"&gt;\n    &lt;a-select-option value=\"shanghai\"&gt;\n      Zone one\n    &lt;/a-select-option&gt;\n    &lt;a-select-option value=\"beijing\"&gt;\n      Zone two\n    &lt;/a-select-option&gt;\n  &lt;/a-select&gt;\n&lt;/a-form-model-item&gt;\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/%E8%A1%A8%E5%8D%95%E6%B7%BB%E5%8A%A0%E6%98%9F%E6%A0%87%E4%B8%8D%E6%A0%A1%E9%AA%8C/#_2","title":"\u53c2\u8003","text":"<ul> <li>\u5b98\u65b9\u6587\u6863\uff1ahttps://1x.antdv.com/components/form-model-cn</li> </ul>"},{"location":"UI%E5%BA%93/AntDesign/%E8%A1%A8%E5%8D%95%E9%87%8D%E7%BD%AE%E4%B8%8D%E7%94%9F%E6%95%88/","title":"\u8868\u5355\u91cd\u7f6e\u4e0d\u751f\u6548","text":"<p>\u91cd\u7f6e\u7684\u5185\u5bb9\u5fc5\u987b\u6dfb\u52a0 prop</p> <pre><code>this.$refs.setForm.resetFields();\n</code></pre> <pre><code>&lt;a-form-model-item label=\"Activity zone\" prop=\"region\"&gt;\n  &lt;a-select v-model=\"form.region\" placeholder=\"please select your zone\"&gt;\n    &lt;a-select-option value=\"shanghai\"&gt;\n      Zone one\n    &lt;/a-select-option&gt;\n    &lt;a-select-option value=\"beijing\"&gt;\n      Zone two\n    &lt;/a-select-option&gt;\n  &lt;/a-select&gt;\n&lt;/a-form-model-item&gt;\n</code></pre> <p>\u6dfb\u52a0\u661f\u6807\u4e0d\u6821\u9a8c</p> <ol> <li>\u65b0\u589e <code>required</code></li> <li>\u4e0d\u6dfb\u52a0 <code>rule</code> \u6821\u9a8c</li> </ol> <pre><code>&lt;a-form-model-item label=\"Activity zone\" prop=\"region\" required&gt;\n  &lt;a-select v-model=\"form.region\" placeholder=\"please select your zone\"&gt;\n    &lt;a-select-option value=\"shanghai\"&gt;\n      Zone one\n    &lt;/a-select-option&gt;\n    &lt;a-select-option value=\"beijing\"&gt;\n      Zone two\n    &lt;/a-select-option&gt;\n  &lt;/a-select&gt;\n&lt;/a-form-model-item&gt;\n</code></pre>"},{"location":"UI%E5%BA%93/AntDesign/%E8%A1%A8%E5%8D%95%E9%87%8D%E7%BD%AE%E4%B8%8D%E7%94%9F%E6%95%88/#_2","title":"\u53c2\u8003","text":"<ul> <li>\u5b98\u65b9\u6587\u6863\uff1ahttps://1x.antdv.com/components/form-model-cn</li> </ul>"},{"location":"Vue/","title":"\u7b80\u4ecb","text":"<p><code>Vue</code> \u76f8\u5173\u5185\u5bb9</p>"},{"location":"Vue/#vue2","title":"vue2 \u6570\u636e\u4f20\u9012","text":"<p>\u5728Vue 2\u4e2d\uff0c\u7236\u5b50\u7ec4\u4ef6\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u9012\u548c\u4e8b\u4ef6\u901a\u4fe1\u662f\u6838\u5fc3\u6982\u5ff5\u3002\u4e0b\u9762\u662f\u8be6\u7ec6\u7684\u603b\u7ed3\uff1a</p>"},{"location":"Vue/#props","title":"\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u503c\uff08Props\uff09","text":"<p>\u7236\u7ec4\u4ef6\u901a\u8fc7<code>props</code>\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u3002<code>props</code>\u662f\u5b50\u7ec4\u4ef6\u7528\u6765\u63a5\u6536\u6765\u81ea\u7236\u7ec4\u4ef6\u6570\u636e\u7684\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002</p> <p>\u7236\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;child-component :some-prop=\"value\"&gt;&lt;/child-component&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ChildComponent from './ChildComponent.vue';\n\nexport default {\n  components: {\n    ChildComponent\n  },\n  data() {\n    return {\n      value: '\u8fd9\u662f\u8981\u4f20\u9012\u7684\u6570\u636e'\n    };\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\u4e2d\u5b9a\u4e49<code>props</code>\u63a5\u6536\u6570\u636e\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  props: ['someProp'],\n  mounted() {\n    console.log(this.someProp); // \u8f93\u51fa\uff1a\u8fd9\u662f\u8981\u4f20\u9012\u7684\u6570\u636e\n  }\n};\n&lt;/script&gt;\n</code></pre>"},{"location":"Vue/#_2","title":"\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u503c\uff08\u4e8b\u4ef6\uff09","text":"<p>\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7<code>$emit</code>\u89e6\u53d1\u4e8b\u4ef6\uff0c\u5e76\u5c06\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6\u3002</p> <p>\u5b50\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  methods: {\n    sendDataToParent() {\n      this.$emit('custom-event', '\u6765\u81ea\u5b50\u7ec4\u4ef6\u7684\u6570\u636e');\n    }\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u7236\u7ec4\u4ef6\u4e2d\u76d1\u542c\u8fd9\u4e2a\u4e8b\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;child-component @custom-event=\"handleCustomEvent\"&gt;&lt;/child-component&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ChildComponent from './ChildComponent.vue';\n\nexport default {\n  components: {\n    ChildComponent\n  },\n  methods: {\n    handleCustomEvent(data) {\n      console.log(data); // \u8f93\u51fa\uff1a\u6765\u81ea\u5b50\u7ec4\u4ef6\u7684\u6570\u636e\n    }\n  }\n};\n&lt;/script&gt;\n</code></pre>"},{"location":"Vue/#_3","title":"\u5355\u5411\u6570\u636e\u6d41","text":"<p>Vue \u5f3a\u8c03\u5355\u5411\u6570\u636e\u6d41\uff0c\u5373<code>props</code>\u7684\u6539\u53d8\u5e94\u8be5\u53ea\u80fd\u7531\u7236\u7ec4\u4ef6\u6765\u8fdb\u884c\u3002\u5982\u679c\u5b50\u7ec4\u4ef6\u60f3\u8981\u4fee\u6539\u901a\u8fc7<code>props</code>\u4f20\u9012\u8fc7\u6765\u7684\u6570\u636e\uff0c\u5b83\u5e94\u5f53\uff1a</p> <ol> <li>\u4f7f\u7528\u8fd9\u4e2a<code>prop</code>\u7684\u503c\u6765\u521d\u59cb\u5316\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf\uff08data\u5c5e\u6027\uff09\uff0c\u7136\u540e\u4fee\u6539\u8fd9\u4e2a\u5c40\u90e8\u53d8\u91cf\u3002</li> <li>\u6216\u8005\uff0c\u901a\u8fc7\u4e8b\u4ef6\u53d1\u9001\u6d88\u606f\u7ed9\u7236\u7ec4\u4ef6\u6765\u8bf7\u6c42\u66f4\u65b0<code>prop</code>\u3002</li> </ol>"},{"location":"Vue/#_4","title":"\u975e\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1","text":"<p>\u5bf9\u4e8e\u975e\u7236\u5b50\u7ec4\u4ef6\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\uff1a</p> <ul> <li>\u4e8b\u4ef6\u603b\u7ebf\uff08Event Bus\uff09\uff1a\u521b\u5efa\u4e00\u4e2a\u5168\u5c40\u7684 Vue \u5b9e\u4f8b\u7528\u4f5c\u4e8b\u4ef6\u4e2d\u5fc3\uff0c\u5404\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u4e8b\u4ef6\u4e2d\u5fc3\u6765\u89e6\u53d1\u548c\u76d1\u542c\u4e8b\u4ef6\u3002</li> <li>Vuex\uff1a\u4f7f\u7528\u4e00\u4e2a\u5168\u5c40\u7684\u72b6\u6001\u7ba1\u7406\u5e93\u6765\u7ba1\u7406\u4e0d\u540c\u7ec4\u4ef6\u4e4b\u95f4\u7684\u72b6\u6001\u5171\u4eab\u548c\u901a\u4fe1\u3002</li> </ul>"},{"location":"Vue/#provideinject","title":"\u63d0\u4f9b/\u6ce8\u5165\u673a\u5236\uff08Provide/Inject\uff09","text":"<p>Vue \u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4f9d\u8d56\u6ce8\u5165\u673a\u5236\uff0c\u5141\u8bb8\u7956\u5148\u7ec4\u4ef6\u5411\u5176\u6240\u6709\u7684\u540e\u4ee3\u6ce8\u5165\u4e00\u4e2a\u4f9d\u8d56\uff0c\u65e0\u8bba\u7ec4\u4ef6\u5c42\u6b21\u6709\u591a\u6df1\uff0c\u5e76\u5728\u8d77\u4e0a\u4e0b\u6e38\u5173\u7cfb\u6210\u7acb\u7684\u65f6\u95f4\u91cc\u59cb\u7ec8\u751f\u6548\u3002</p> <p>\u7956\u5148\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  provide() {\n    return {\n      forDescendants: '\u6765\u81ea\u7956\u5148\u7ec4\u4ef6\u7684\u4fe1\u606f'\n    };\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u540e\u4ee3\u7ec4\u4ef6\u4e2d\uff1a</p> <pre><code>&lt;script&gt;\nexport default {\n  inject: ['forDescendants'],\n  mounted() {\n    console.log(this.forDescendants); // \u8f93\u51fa\uff1a\u6765\u81ea\u7956\u5148\u7ec4\u4ef6\u7684\u4fe1\u606f\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u8fd9\u4e9b\u662fVue 2\u4e2d\u7236\u5b50\u7ec4\u4ef6\u4e4b\u95f4\u4f20\u503c\u548c\u4f20\u4e8b\u4ef6\u7684\u57fa\u672c\u65b9\u6cd5\u3002\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u5e94\u6839\u636e\u5b9e\u9645\u573a\u666f\u548c\u9700\u6c42\u9009\u62e9\u5408\u9002\u7684\u901a\u4fe1\u65b9\u5f0f\u3002</p>"},{"location":"Vue/Vue2/Mac%E4%B8%8EWin%E4%B9%8B%E9%97%B4%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98/","title":"Mac\u4e0eWin\u4e4b\u95f4\u4f9d\u8d56\u95ee\u9898","text":""},{"location":"Vue/Vue2/PDF%E6%B5%81%E6%95%B0%E6%8D%AE%E9%A2%84%E8%A7%88/","title":"PDF\u6d41\u6570\u636e\u9884\u89c8","text":"<pre><code>&lt;a-modal\n  v-model=\"visible\"\n  :title=\"pdfTitle\"\n  on-ok=\"handleOk\"\n  :footer=\"null\"\n  width=\"50%\"\n  centered\n  class=\"pdf-wraper\"\n  :body-style=\"{height:'80vh'}\"\n&gt;\n  &lt;div class=\"pdf-content\"&gt;\n    &lt;object :data=\"pdfUrl\" type=\"application/pdf\" width=\"100%\" height=\"100%\" /&gt;\n  &lt;/div&gt;\n&lt;/a-modal&gt;\n</code></pre> <pre><code>getFile(params, { responseType: \"blob\" }).then((res) =&gt; {\n  const blob = new window.Blob([res], {\n    type: \"application/pdf;charset-UTF-8\"\n  });\n  // \u53c2\u6570\uff1a\u7528\u4e8e\u521b\u5efa URL \u7684 File \u5bf9\u8c61\u3001Blob \u5bf9\u8c61\u6216\u8005 MediaSource \u5bf9\u8c61\u3002\u200b\n  // \u8fd4\u56de\u503c\uff1a\u4e00\u4e2aDOMString\u5305\u542b\u4e86\u4e00\u4e2a\u5bf9\u8c61URL\uff0c\u8be5URL\u53ef\u7528\u4e8e\u6307\u5b9a\u6e90 object\u7684\u5185\u5bb9\u3002\n  const href = URL.createObjectURL(blob);\n  this.pdfUrl = href; \n  // \u65b0\u7a97\u53e3\u6253\u5f00\n  // window.open(href);\n});\n</code></pre>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/","title":"Vue\u5bfc\u51faPDF","text":""},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#html2pdfjs","title":"html2pdf.js","text":"<pre><code>sudo cnpm install --save html2pdf.js\n</code></pre>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#print-js","title":"print-js","text":"<pre><code>sudo cnpm install print-js   \n</code></pre>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#html2canvas-jspdf","title":"html2canvas &amp; jspdf","text":"<pre><code>sudo cnpm install --save html2canvas;\nsudo cnpm install --save jspdf\n</code></pre> <pre><code>// \u5bfc\u51fa\u9875\u9762\u4e3aPDF\u683c\u5f0f\nimport html2Canvas from \"html2canvas\";\nimport JsPDF from \"jspdf\";\nexport default {\n  install(Vue, options) {\n    Vue.prototype.getPdf = function (name, id) {\n      const title = name || \"index\";\n      html2Canvas(document.querySelector(`#${id}`), {\n        allowTaint: true,\n        // backgroundColor: \"red\",\n        taintTest: false,\n        useCORS: true,\n        dpi: window.devicePixelRatio * 4, // \u5c06\u5206\u8fa8\u7387\u63d0\u9ad8\u5230\u7279\u5b9a\u7684DPI \u63d0\u9ad8\u56db\u500d\n        scale: 4, // \u6309\u6bd4\u4f8b\u589e\u52a0\u5206\u8fa8\u7387\n        logging: true // \u53ef\u4ee5\u957f\u5c4f\u5206\u9875\u5bfc\u51fa\n      }).then(function (canvas) {\n        // \u83b7\u53d6canvas\u7684\u5bbd\u5ea6\n        const contentWidth = canvas.width;\n        // \u83b7\u53d6canvas\u7684\u9ad8\u5ea6\n        const contentHeight = canvas.height;\n        // \u8ba1\u7b97\u9875\u9762\u7684\u9ad8\u5ea6\n        const pageHeight = contentWidth / 592.28 * 841.89;\n        // \u521d\u59cb\u5316leftHeight\n        let leftHeight = contentHeight;\n        // \u521d\u59cb\u5316position\n        let position = 0;\n        // \u56fe\u7247\u5bbd\u5ea6\n        const imgWidth = 595.28;\n        // \u56fe\u7247\u9ad8\u5ea6\n        const imgHeight = 592.28 / contentWidth * contentHeight;\n        // \u5c06canvas\u8f6c\u6362\u4e3a\u56fe\u7247\n        const pageData = canvas.toDataURL(\"image/jpeg\", 1.0);\n        // \u521b\u5efaPDF\u5bf9\u8c61\n        const PDF = new JsPDF(\"l\", \"pt\", \"a4\");\n        // \u5982\u679cleftHeight\u5c0f\u4e8epageHeight\uff0c\u5219\u6dfb\u52a0\u56fe\u7247\n        if (leftHeight &lt; pageHeight) {\n          PDF.addImage(pageData, \"JPEG\", 0, 0, imgWidth, imgHeight);\n        // \u5426\u5219\uff0c\u5faa\u73af\u6dfb\u52a0\u56fe\u7247\n        } else {\n          while (leftHeight &gt; 0) {\n            PDF.addImage(pageData, \"JPEG\", 0, position, imgWidth, imgHeight);\n            leftHeight -= pageHeight;\n            position -= 841.89;\n            // \u5982\u679cleftHeight\u5927\u4e8e0\uff0c\u5219\u6dfb\u52a0\u65b0\u9875\n            if (leftHeight &gt; 0) {\n              PDF.addPage();\n            }\n          }\n        }\n        PDF.save(title + \".pdf\");\n      });\n    };\n  }\n};\n</code></pre> <pre><code>html2canvas\u63d2\u4ef6\u6709\u5f88\u591a\u53c2\u6570\uff0c\u4ee5\u4e0b\u662f\u5176\u4e2d\u4e00\u4e9b\u5e38\u7528\u7684\u53c2\u6570\u53ca\u5176\u9ed8\u8ba4\u503c\uff1a\n\n1. `allowTaint`\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09\uff1a\u662f\u5426\u5141\u8bb8\u6c61\u67d3\u8de8\u6e90\u56fe\u50cf\u3002\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u63d2\u4ef6\u5c06\u5c1d\u8bd5\u7ed8\u5236\u8de8\u6e90\u56fe\u50cf\u3002\n\n2. `backgroundColor`\uff08\u9ed8\u8ba4\u503c\uff1anull\uff09\uff1a\u6307\u5b9a\u5bfc\u51fa\u56fe\u50cf\u7684\u80cc\u666f\u989c\u8272\u3002\u53ef\u4ee5\u662f\u989c\u8272\u540d\u79f0\u3001\u5341\u516d\u8fdb\u5236\u503c\u6216rgba\u503c\u3002\n\n3. `canvas`\uff08\u9ed8\u8ba4\u503c\uff1anull\uff09\uff1a\u4f7f\u7528\u73b0\u6709\u7684canvas\u5143\u7d20\u6765\u7ed8\u5236\u56fe\u50cf\u3002\u5982\u679c\u6307\u5b9a\u4e86canvas\u5143\u7d20\uff0c\u63d2\u4ef6\u5c06\u5728\u8be5canvas\u4e0a\u7ed8\u5236\u56fe\u50cf\uff0c\u800c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684canvas\u3002\n\n4. `foreignObjectRendering`\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09\uff1a\u662f\u5426\u542f\u7528foreignObject\u6e32\u67d3\u3002\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u63d2\u4ef6\u5c06\u5c1d\u8bd5\u4f7f\u7528foreignObject\u6765\u6e32\u67d3\u6587\u672c\u3002\n\n5. `height`\uff08\u9ed8\u8ba4\u503c\uff1anull\uff09\uff1a\u6307\u5b9a\u5bfc\u51fa\u56fe\u50cf\u7684\u9ad8\u5ea6\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u63d2\u4ef6\u5c06\u81ea\u52a8\u8ba1\u7b97\u9ad8\u5ea6\u4ee5\u9002\u5e94\u5bfc\u51fa\u7684\u5185\u5bb9\u3002\n\n6. `ignoreElements`\uff08\u9ed8\u8ba4\u503c\uff1a(el) =&gt; false\uff09\uff1a\u6307\u5b9a\u8981\u5ffd\u7565\u7684\u5143\u7d20\u3002\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u63a5\u53d7\u4e00\u4e2a\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u6216\u662f\u4e00\u4e2aCSS\u9009\u62e9\u5668\u5b57\u7b26\u4e32\u3002\n\n7. `logging`\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09\uff1a\u662f\u5426\u542f\u7528\u65e5\u5fd7\u8bb0\u5f55\u3002\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u63d2\u4ef6\u5c06\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u65e5\u5fd7\u3002\n\n8. `scale`\uff08\u9ed8\u8ba4\u503c\uff1awindow.devicePixelRatio\uff09\uff1a\u6307\u5b9a\u5bfc\u51fa\u56fe\u50cf\u7684\u7f29\u653e\u6bd4\u4f8b\u3002\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u5b57\u6216\u4e00\u4e2a\u51fd\u6570\uff0c\u63a5\u53d7\u4e00\u4e2acanvas\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u6570\u5b57\u3002\n\n9. `useCORS`\uff08\u9ed8\u8ba4\u503c\uff1afalse\uff09\uff1a\u662f\u5426\u4f7f\u7528CORS\u6765\u52a0\u8f7d\u56fe\u50cf\u3002\u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u63d2\u4ef6\u5c06\u5c1d\u8bd5\u4f7f\u7528CORS\u6765\u52a0\u8f7d\u8de8\u6e90\u56fe\u50cf\u3002\n\n10. `width`\uff08\u9ed8\u8ba4\u503c\uff1anull\uff09\uff1a\u6307\u5b9a\u5bfc\u51fa\u56fe\u50cf\u7684\u5bbd\u5ea6\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u63d2\u4ef6\u5c06\u81ea\u52a8\u8ba1\u7b97\u5bbd\u5ea6\u4ee5\u9002\u5e94\u5bfc\u51fa\u7684\u5185\u5bb9\u3002\n\n\u8fd9\u4e9b\u53ea\u662fhtml2canvas\u63d2\u4ef6\u7684\u4e00\u90e8\u5206\u53c2\u6570\uff0c\u8fd8\u6709\u5176\u4ed6\u53c2\u6570\u53ef\u4f9b\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u67e5\u770bhtml2canvas\u6587\u6863\u4ee5\u83b7\u53d6\u66f4\u8be6\u7ec6\u7684\u53c2\u6570\u5217\u8868\u3002\n</code></pre>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#1","title":"\u7248\u672c1","text":"<p>\u8c03\u6574\u4e86\u5c45\u4e2d\uff0c\u4f46\u662f\u5185\u5bb9\u611f\u89c9\u6709\u70b9\u5c0f\uff0c\u5e0c\u671b\u5bbd\u5e26\u5728\u5927\u4e00\u70b9\uff0c\u9ad8\u5ea6\u518d\u9ad8\u4e00\u70b9\uff0c</p> <pre><code>// \u5bfc\u51fa\u9875\u9762\u4e3aPDF\u683c\u5f0f\nimport html2Canvas from \"html2canvas\";\nimport JsPDF from \"jspdf\";\nexport default {\n  install(Vue, options) {\n    Vue.prototype.getPdf = function (name, id) {\n      const title = name || \"index\";\n      html2Canvas(document.querySelector(`#${id}`), {\n        allowTaint: true,\n        // backgroundColor: \"red\",\n        taintTest: false,\n        useCORS: true,\n        dpi: window.devicePixelRatio * 4, // \u5c06\u5206\u8fa8\u7387\u63d0\u9ad8\u5230\u7279\u5b9a\u7684DPI \u63d0\u9ad8\u56db\u500d\n        scale: 4, // \u6309\u6bd4\u4f8b\u589e\u52a0\u5206\u8fa8\u7387\n        logging: true // \u53ef\u4ee5\u957f\u5c4f\u5206\u9875\u5bfc\u51fa\n      }).then(function (canvas) {\n        const contentWidth = canvas.width;\n        const contentHeight = canvas.height;\n        const pageHeight = contentWidth / 592.28 * 841.89;\n        let leftHeight = contentHeight;\n        let position = 0;\n        const imgWidth = 595.28;\n        const imgHeight = 592.28 / contentWidth * contentHeight;\n        const pageData = canvas.toDataURL(\"image/jpeg\", 1.0);\n        const PDF = new JsPDF(\"l\", \"pt\", \"a4\");\n\n        // \u83b7\u53d6\u9875\u9762\u5bbd\u5ea6\n        const pageWidth = PDF.internal.pageSize.getWidth();\n        // \u8ba1\u7b97x\u5750\u6807\n        const x = (pageWidth - imgWidth) / 2;\n        console.log(\"pageWidth\", pageWidth);\n        console.log(\"contentWidth\", contentWidth);\n        console.log(\"x\", x);\n        if (leftHeight &lt; pageHeight) {\n          PDF.addImage(pageData, \"JPEG\", x, 0, imgWidth, imgHeight);\n        // \u5426\u5219\uff0c\u5faa\u73af\u6dfb\u52a0\u56fe\u7247\n        } else {\n          while (leftHeight &gt; 0) {\n            PDF.addImage(pageData, \"JPEG\", x, position, imgWidth, imgHeight);\n            leftHeight -= pageHeight;\n            position -= 841.89;\n            // \u5982\u679cleftHeight\u5927\u4e8e0\uff0c\u5219\u6dfb\u52a0\u65b0\u9875\n            if (leftHeight &gt; 0) {\n              PDF.addPage();\n            }\n          }\n        }\n        PDF.save(title + \".pdf\");\n      });\n    };\n  }\n};\n</code></pre>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#_1","title":"\u53c2\u8003","text":"<ul> <li>vue-pdf\u5b9e\u73b0pdf\u9884\u89c8\u3001\u5206\u9875\u3001\u4e0b\u8f7d\u3001\u6253\u5370</li> <li>jsPDF addHTML \u5c06\u4f4e\u8d28\u91cf\u56fe\u50cf\u5bfc\u51fa\u4e3a PDF</li> </ul>"},{"location":"Vue/Vue2/Vue%E5%AF%BC%E5%87%BAPDF/#_2","title":"\u7f51\u7edc\u539f\u59cb\u7248\u672c","text":"<p>\u9ed8\u8ba4\u7ad6\u7248\u6253\u5370</p> <pre><code>function createPDFObject() {\n  html2canvas(document.getElementById(\"main\"), {\n   onrendered:function(canvas) {\n\n  var contentWidth = canvas.width;\n  var contentHeight = canvas.height;\n\n  //One page pdf shows the height of canvas generated by html page;\n  //\u4e00\u9875pdf\u663e\u793ahtml\u9875\u9762\u751f\u6210\u7684\u753b\u5e03\u7684\u9ad8\u5ea6\uff1b\n  var pageHeight = contentWidth / 592.28 * 841.89;\n  //html page height without pdf generation\n  // \u4e0d\u751f\u6210pdf\u7684html\u9875\u9762\u9ad8\u5ea6\n  var leftHeight = contentHeight;\n  //Page offset\n  // //\u9875\u9762\u504f\u79fb\u91cf\n  var position = 0;\n  //a4 paper size [595.28, 841.89], width and height of image in pdf of canvas generated by html page\n  // /a4\u7eb8\u5f20\u5927\u5c0f[595.28, 841.89]\uff0chtml\u9875\u9762\u751f\u6210\u7684\u753b\u5e03pdf\u4e2d\u56fe\u50cf\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6\n  var imgWidth = 595.28; \n  var imgHeight = 592.28/contentWidth * contentHeight;\n\n  //Return picture dataURL, parameters: picture format and sharpness (0-1)\n  // /\u8fd4\u56de\u56fe\u7247\u6570\u636eURL\uff0c\u53c2\u6570\uff1a\u56fe\u7247\u683c\u5f0f\u548c\u6e05\u6670\u5ea6\uff080-1\uff09\n  var pageData = canvas.toDataURL('image/jpeg', 1.0);\n\n  //Direction is vertical by default, dimension ponits, format A4 [595.28841.89]\n  // \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65b9\u5411\u4e3a\u5782\u76f4\uff0c\u5c3a\u5bf8\u4e3a\u5c0f\u9a6c\uff0c\u683c\u5f0f\u4e3aA4[595.28, 841.89]\n  var pdf = new jsPDF('', 'pt', 'a4');\n\n  //There are two heights to distinguish, one is the actual height of the html page, and the height of the generated pdf page (841.89)\n  // \u6709\u4e24\u4e2a\u9ad8\u5ea6\u9700\u8981\u533a\u5206\uff0c\u4e00\u4e2a\u662fhtml\u9875\u9762\u7684\u5b9e\u9645\u9ad8\u5ea6\uff0c\u53e6\u4e00\u4e2a\u662f\u751f\u6210\u7684pdf\u9875\u9762\u7684\u9ad8\u5ea6\uff08841.89\uff09\n  //When the content does not exceed the display range of one page of pdf, paging is not required\n  // \u5f53\u5185\u5bb9\u4e0d\u8d85\u8fc7\u4e00\u9875pdf\u7684\u663e\u793a\u8303\u56f4\u65f6\uff0c\u4e0d\u9700\u8981\u5206\u9875\n  if (leftHeight &lt; pageHeight) {\n      pdf.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight );\n  } else {\n      while(leftHeight &gt; 0) {\n          pdf.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)\n          leftHeight -= pageHeight;\n          position -= 841.89;\n          //Avoid adding blank pages\n          // \u907f\u514d\u6dfb\u52a0\u7a7a\u767d\u9875\n          if(leftHeight &gt; 0) {\n            pdf.addPage();\n          }\n      }\n  }\n   pdf.save('stone.pdf');\n\n  }\n });\n</code></pre> <p>\u8c03\u6574\u540e\uff0c\u53ef\u4ee5\u6a2a\u7248\u6253\u5370\uff0c\u4f46\u662f\u4e0b\u8fb9\u8ddd\u8c8c\u4f3c\u53c8\u95ee\u9898</p> <pre><code>// \u5bfc\u51fa\u9875\u9762\u4e3aPDF\u683c\u5f0f\nimport html2Canvas from \"html2canvas\";\nimport JsPDF from \"jspdf\";\n\n// \u5bfc\u51fa\u9ed8\u8ba4\u7684\u63d2\u4ef6\nexport default {\n  // \u5b89\u88c5\u63d2\u4ef6\n  install(Vue, options) {\n    // \u6dfb\u52a0getPdf\u65b9\u6cd5\u5230Vue\u5b9e\u4f8b\n    Vue.prototype.getPdf = function (name, id) {\n      // \u83b7\u53d6title\n      const title = name || \"index\";\n      // \u5c06\u6307\u5b9a\u5143\u7d20\u8f6c\u6362\u4e3a\u56fe\u7247\n      html2Canvas(document.querySelector(`#${id}`), {\n        allowTaint: true,\n        taintTest: false,\n        useCORS: true,\n        // \u8bbe\u7f6e\u56fe\u7247\u7f29\u653e\u6bd4\u4f8b\n        // \u8be5\u53c2\u6570\n        dpi: window.devicePixelRatio * 4,\n        // \u8bbe\u7f6e\u56fe\u7247\u7f29\u653e\u6bd4\u4f8b\n        // \u5927\u4e8e7\u8c8c\u4f3c\u5c31\u4e0d\u884c\u4e86\n        scale: 4,\n        // \u662f\u5426\u5f00\u542f\u65e5\u5fd7\n        logging: true\n      }).then(function (canvas) {\n        // a4 - \u5bbd841*592\n        // \u83b7\u53d6\u56fe\u7247\u5bbd\u5ea6\n        const contentWidth = canvas.width;\n        // \u83b7\u53d6\u56fe\u7247\u9ad8\u5ea6\n        const contentHeight = canvas.height;\n        // \u901a\u8fc7\u8ba1\u7b97\uff0c\u53ef\u4ee5\u5f97\u5230\u6bcf\u9875\u7684\u9ad8\u5ea6`pageHeight`\n        // const pageHeight = contentWidth / 592.28 * 841.89;\n        // \u5de6\u53f3\u540450\uff0c\u5171100\n        // \u4e0a\u4e0b\u540430\uff0c\u517160\n        // const pageHeight = contentWidth / 742 * 532;\n        const pageHeight = contentWidth / 742 * 532;\n        // \u53d8\u91cf`leftHeight`\u6765\u8868\u793a\u5269\u4f59\u7684\u9ad8\u5ea6\n        let leftHeight = contentHeight;\n        // \u521d\u59cb\u5316position\n        // let position = 0;\n        let position = 30;\n        // \u56fe\u7247\u5bbd\u5ea6\n        // const imgWidth = 595.28;\n        const imgWidth = 742;\n        // \u56fe\u7247\u9ad8\u5ea6\n        // const imgHeight = 592.28 / contentWidth * contentHeight;\n        const imgHeight = 742 / contentWidth * contentHeight;\n        // \u83b7\u53d6\u56fe\u7247\u6570\u636e\n        const pageData = canvas.toDataURL(\"image/jpeg\", 1.0);\n        console.log(\"contentWidth\", contentWidth);\n        console.log(\"contentHeight\", contentHeight);\n        console.log(\"pageHeight\", pageHeight);\n        console.log(\"leftHeight\", leftHeight);\n        console.log(\"position\", position);\n        console.log(\"imgWidth\", imgWidth);\n        console.log(\"imgHeight\", imgHeight);\n        // \u521b\u5efapdf\n        const PDF = new JsPDF(\"l\", \"pt\", \"a4\");\n        // \u5982\u679cleftHeight\u5c0f\u4e8epageHeight\uff0c\u5219\u76f4\u63a5\u6dfb\u52a0\u56fe\u7247\n        if (leftHeight &lt; pageHeight) {\n          // PDF.addImage(pageData, \"JPEG\", 50, 0, imgWidth, imgHeight);\n          PDF.addImage(pageData, \"JPEG\", 50, 30, imgWidth, imgHeight);\n        } else {\n          // \u5982\u679cleftHeight\u5927\u4e8epageHeight\uff0c\u5219\u5faa\u73af\u6dfb\u52a0\u56fe\u7247\n          while (leftHeight &gt; 0) {\n            PDF.addImage(pageData, \"JPEG\", 50, position, imgWidth, imgHeight);\n            leftHeight -= pageHeight;\n            // position -= 841.89;\n            position -= 532;\n            // \u5982\u679cleftHeight\u5927\u4e8e0\uff0c\u5219\u6dfb\u52a0\u65b0\u9875\n            if (leftHeight &gt; 0) {\n              PDF.addPage();\n            }\n          }\n        }\n        // \u4fdd\u5b58pdf\n        PDF.save(title + \".pdf\");\n      });\n    };\n  }\n};\n</code></pre>"},{"location":"Vue/Vue2/params%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9/","title":"state/params\u7684\u4f7f\u7528\u65b9\u6cd5\u53ca\u4f18\u7f3a\u70b9.md","text":"<p>\u5728 Vue Router \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>params</code> \u548c <code>query</code> \u6765\u4f20\u9012\u6570\u636e\u3002<code>params</code> \u7528\u4e8e\u8def\u7531\u8def\u5f84\u4e2d\u7684\u53c2\u6570\uff0c\u800c <code>query</code> \u5bf9\u5e94 URL \u7684\u67e5\u8be2\u5b57\u7b26\u4e32\u3002<code>state</code> \u5219\u662f HTML5 History \u65b0\u589e\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u5b83\u5141\u8bb8\u4f60\u5411\u5386\u53f2\u8bb0\u5f55\u4e2d\u7684\u8def\u7531\u6dfb\u52a0\u9644\u52a0\u7684\u72b6\u6001\u4fe1\u606f\u3002</p>"},{"location":"Vue/Vue2/params%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9/#_1","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>params</p> <p><code>params</code> \u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u52a8\u6001\u8def\u7531\uff0c\u5f53\u914d\u7f6e\u8def\u7531\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u8def\u5f84\u4e2d\u4f7f\u7528 <code>:paramName</code> \u7684\u5f62\u5f0f\u6765\u6307\u5b9a\u53c2\u6570\uff1a</p> <pre><code>const router = new VueRouter({\n  routes: [\n    { path: '/user/:userId', component: User }\n  ]\n})\n</code></pre> <p>\u7136\u540e\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u5bfc\u822a\uff0c\u5e76\u4f20\u9012\u53c2\u6570\uff1a</p> <pre><code>this.$router.push({ name: 'User', params: { userId: '123' } });\n</code></pre> <p>\u5728\u76ee\u6807\u7ec4\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u8fd9\u6837\u83b7\u53d6\u53c2\u6570\uff1a</p> <pre><code>this.$route.params.userId;\n</code></pre> <p>query</p> <p><code>query</code> \u5bf9\u5e94\u4e8e URL \u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u65f6\u65e0\u9700\u5728\u8def\u7531\u914d\u7f6e\u4e2d\u58f0\u660e\uff1a</p> <pre><code>this.$router.push({ path: '/search', query: { q: 'keyword' } });\n</code></pre> <p>\u5bfc\u822a\u5230 <code>/search?q=keyword</code>\uff0c\u5728\u7ec4\u4ef6\u4e2d\u83b7\u53d6\uff1a</p> <pre><code>this.$route.query.q;\n</code></pre> <p>state</p> <p><code>state</code> \u662f HTML5 History API \u63d0\u4f9b\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u4f7f\u7528 <code>router.push</code> \u6216 <code>router.replace</code> \u65f6\u4f20\u9012\uff1a</p> <pre><code>this.$router.push({\n  path: '/somewhere',\n  state: { someKey: 'someValue' }\n});\n</code></pre> <p>\u4f46\u662f\u5728 Vue Router \u4e2d\uff0c\u76f4\u63a5\u4ece <code>$route.state</code> \u8bbf\u95ee state \u662f\u4e0d\u53ef\u884c\u7684\u3002\u5982\u679c\u9700\u8981\u7c7b\u4f3c\u7684\u529f\u80fd\uff0c\u9700\u8981\u5229\u7528\u7b2c\u4e09\u65b9\u5e93\u6216\u8005\u624b\u52a8\u64cd\u4f5c HTML5 History API\u3002</p>"},{"location":"Vue/Vue2/params%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9/#_2","title":"\u4f18\u70b9","text":"<ul> <li>\u65e0\u9700\u5168\u5c40\u72b6\u6001\u7ba1\u7406: \u9002\u7528\u4e8e\u7b80\u5355\u7684\u7236\u5b50\u7ec4\u4ef6\u4f20\u503c\uff0c\u51cf\u5c11 Vuex \u7684\u4f7f\u7528\u3002</li> <li>\u7ec4\u4ef6\u89e3\u8026: \u907f\u514d\u4e86\u7236\u5b50\u7ec4\u4ef6\u76f4\u63a5\u4f20\u9012 props\uff0c\u4f7f\u7ec4\u4ef6\u66f4\u52a0\u72ec\u7acb\u3002</li> <li>URL\u5171\u4eab: \u901a\u8fc7 URL \u5206\u4eab\u65f6\uff0c\u6240\u5e26\u7684\u53c2\u6570\u53ef\u4ee5\u8ba9\u7528\u6237\u76f4\u63a5\u8bbf\u95ee\u5230\u5177\u6709\u76f8\u540c\u72b6\u6001\u7684\u9875\u9762\u3002</li> </ul>"},{"location":"Vue/Vue2/params%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9/#_3","title":"\u7f3a\u70b9","text":"<ul> <li>\u5237\u65b0\u9875\u9762: \u4f7f\u7528 <code>params</code> \u7684\u8def\u7531\u5237\u65b0\u540e\uff0c\u72b6\u6001\u5c06\u4f1a\u4e22\u5931\uff0c\u9664\u975e\u53c2\u6570\u662f\u52a8\u6001\u6bb5\u7684\u4e00\u90e8\u5206\u3002</li> <li>\u65e0\u6cd5\u4f20\u9012\u590d\u6742\u6570\u636e: <code>query</code> \u53ea\u9002\u5408\u4f20\u9012\u7b80\u5355\u7684\u6570\u636e\uff0c\u5bf9\u4e8e\u590d\u6742\u7684\u72b6\u6001\u6216\u8005\u5927\u91cf\u7684\u6570\u636e\u4e0d\u592a\u9002\u7528\u3002</li> <li>URL\u957f\u5ea6\u9650\u5236: <code>query</code> \u7684\u6570\u636e\u4f1a\u62fc\u63a5\u5728 URL \u4e2d\uff0c\u6d4f\u89c8\u5668\u5bf9 URL \u957f\u5ea6\u6709\u9650\u5236\uff0c\u8d85\u8fc7\u957f\u5ea6\u53ef\u80fd\u4f1a\u88ab\u622a\u65ad\u3002</li> <li>\u5b89\u5168\u6027: <code>query</code> \u4e2d\u7684\u6570\u636e\u66b4\u9732\u5728 URL \u4e2d\uff0c\u53ef\u80fd\u4f1a\u56e0\u6b64\u6cc4\u9732\u654f\u611f\u4fe1\u606f\u3002</li> </ul> <p>\u5bf9\u4e8e\u9700\u8981\u4fdd\u6301\u9875\u9762\u72b6\u6001\u7684\u573a\u666f\uff0c\u5efa\u8bae\u4f7f\u7528 Vuex \u7ed3\u5408\u672c\u5730\u5b58\u50a8\u6216\u670d\u52a1\u5668\u5b58\u50a8\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u72b6\u6001\uff0c\u786e\u4fdd\u9875\u9762\u5237\u65b0\u540e\u6570\u636e\u80fd\u591f\u88ab\u6062\u590d\u3002\u5bf9\u4e8e\u4e0d\u540c\u9875\u9762\u7684\u7b80\u5355\u6570\u636e\u4f20\u9012\uff0c\u4f7f\u7528 <code>params</code> \u548c <code>query</code> \u662f\u4e00\u79cd\u5feb\u6377\u7684\u65b9\u6cd5\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u6570\u636e\u7684\u5b89\u5168\u6027\u548cURL\u957f\u5ea6\u7684\u9650\u5236\u3002</p>"},{"location":"Vue/Vue2/watch%E7%9B%91%E5%90%AC/","title":"watch\u76d1\u542c","text":"<p>https://v2.cn.vuejs.org/v2/guide/computed.html#%E4%BE%A6%E5%90%AC%E5%99%A8</p> <p>\u5728 Vue 2 \u4e2d\uff0c<code>watch</code> \u53ef\u4ee5\u7528\u6765\u76d1\u542c\u591a\u79cd\u6570\u636e\u7c7b\u578b\u7684\u53d8\u5316\u3002\u4ee5\u4e0b\u662f <code>watch</code> \u80fd\u76d1\u542c\u7684\u4e00\u4e9b\u5e38\u89c1\u6570\u636e\u7c7b\u578b\uff1a</p> <ol> <li> <p>\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff1a\u5982 <code>String</code>\u3001<code>Number</code>\u3001<code>Boolean</code> \u7b49\u3002\u5f53\u88ab\u76d1\u542c\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u53d1\u751f\u53d8\u5316\u65f6\uff0c<code>watch</code> \u4f1a\u89e6\u53d1\u3002</p> </li> <li> <p>\u5bf9\u8c61\uff1a<code>watch</code> \u53ef\u4ee5\u76d1\u542c\u6574\u4e2a\u5bf9\u8c61\u7684\u53d8\u5316\u3002\u5982\u679c\u5bf9\u8c61\u7684\u5c5e\u6027\u53d1\u751f\u53d8\u5316\uff0c\u5373\u4f7f\u5bf9\u8c61\u5f15\u7528\u6ca1\u6709\u53d8\uff0c<code>watch</code> \u4e5f\u80fd\u68c0\u6d4b\u5230\uff08\u9700\u8981\u4f7f\u7528 <code>deep: true</code> \u9009\u9879\u6765\u6df1\u5ea6\u76d1\u542c\uff09\u3002</p> </li> <li> <p>\u6570\u7ec4\uff1a<code>watch</code> \u53ef\u4ee5\u76d1\u542c\u6570\u7ec4\u7684\u53d8\u5316\uff0c\u5305\u62ec\u6570\u7ec4\u5143\u7d20\u7684\u6dfb\u52a0\u3001\u5220\u9664\u548c\u5143\u7d20\u503c\u7684\u53d8\u5316\uff08\u540c\u6837\u9700\u8981\u4f7f\u7528 <code>deep: true</code> \u9009\u9879\u6765\u6df1\u5ea6\u76d1\u542c\uff09\u3002</p> </li> <li> <p>\u8ba1\u7b97\u5c5e\u6027 (Computed Properties)\uff1a<code>watch</code> \u4e5f\u53ef\u4ee5\u7528\u6765\u76d1\u542c\u8ba1\u7b97\u5c5e\u6027\u7684\u53d8\u5316\u3002\u5f53\u8ba1\u7b97\u5c5e\u6027\u4f9d\u8d56\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u53d1\u751f\u53d8\u5316\uff0c\u5bfc\u81f4\u8ba1\u7b97\u5c5e\u6027\u7684\u503c\u53d8\u5316\u65f6\uff0c<code>watch</code> \u4f1a\u89e6\u53d1\u3002</p> </li> <li> <p>Vue \u5b9e\u4f8b\u7684\u5c5e\u6027\uff1a<code>watch</code> \u53ef\u4ee5\u76d1\u542c Vue \u5b9e\u4f8b\u4e2d\u7684 data \u5c5e\u6027\u3001computed \u5c5e\u6027\u4ee5\u53ca props\u3002</p> </li> <li> <p>Vuex \u72b6\u6001\u7ba1\u7406\u4e2d\u7684\u6570\u636e\uff1a\u5982\u679c\u4f60\u5728\u9879\u76ee\u4e2d\u4f7f\u7528 Vuex\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>watch</code> \u6765\u76d1\u542c Vuex store \u4e2d\u7684 state \u6216 getters\u3002</p> </li> </ol> <p><code>watch</code> \u7684\u57fa\u672c\u8bed\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>new Vue({\n  // ... \u5176\u4ed6\u9009\u9879\n  watch: {\n    // \u76d1\u542c\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\n    someData(newVal, oldVal) {\n      // \u54cd\u5e94\u5f0f\u6570\u636e someData \u53d8\u5316\u65f6\u7684\u64cd\u4f5c\n    },\n    // \u6df1\u5ea6\u76d1\u542c\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4\n    'someObject': {\n      handler(newVal, oldVal) {\n        // \u5bf9\u8c61 someObject \u53d8\u5316\u65f6\u7684\u64cd\u4f5c\n      },\n      deep: true\n    },\n    // \u4f7f\u7528\u5b57\u7b26\u4e32\u65b9\u6cd5\u76d1\u542c\u6df1\u5c42\u5d4c\u5957\u7684\u6570\u636e\n    'someObject.deepProperty': function(newVal, oldVal) {\n      // someObject.deepProperty \u53d8\u5316\u65f6\u7684\u64cd\u4f5c\n    },\n    // \u76d1\u542c\u8ba1\u7b97\u5c5e\u6027\n    someComputedProperty(newVal, oldVal) {\n      // \u8ba1\u7b97\u5c5e\u6027 someComputedProperty \u53d8\u5316\u65f6\u7684\u64cd\u4f5c\n    }\n  }\n});\n</code></pre> <p>\u5728\u4f7f\u7528 <code>watch</code> \u65f6\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u76d1\u542c\u7684\u65b9\u5f0f\u662f\u6df1\u5ea6\u76d1\u542c <code>(deep: true)</code> \u8fd8\u662f\u4ec5\u76d1\u542c\u5f15\u7528\u53d8\u5316\u3002\u5bf9\u4e8e\u5bf9\u8c61\u548c\u6570\u7ec4\uff0c\u5982\u679c\u4f60\u60f3\u68c0\u6d4b\u5185\u90e8\u5c5e\u6027\u6216\u5143\u7d20\u7684\u53d8\u5316\uff0c\u6df1\u5ea6\u76d1\u542c\u662f\u5fc5\u987b\u7684\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u6df1\u5ea6\u76d1\u542c\uff0c\u90a3\u4e48\u53ea\u6709\u5bf9\u8c61\u6216\u6570\u7ec4\u5f15\u7528\u7684\u53d8\u5316\u624d\u4f1a\u89e6\u53d1 <code>watch</code>\u3002\u6ce8\u610f\u6df1\u5ea6\u76d1\u542c\u53ef\u80fd\u4f1a\u5e26\u6765\u6027\u80fd\u5f00\u9500\uff0c\u56e0\u4e3a\u5b83\u4f1a\u9012\u5f52\u5730\u904d\u5386\u88ab\u76d1\u542c\u7684\u5bf9\u8c61\u6216\u6570\u7ec4\u7684\u6240\u6709\u5c5e\u6027\u3002</p>"},{"location":"Vue/Vue2/watch%E7%9B%91%E5%90%AC/#_1","title":"\u5176\u4ed6","text":"<pre><code>\"itemNodeInfo\": {\n  handler: function(newValue, oldValue) {\n    console.log(\"\u66f4\u65b0\u524d\uff1a\", oldValue + \",\u66f4\u65b0\u540e\uff1a\", newValue);\n    this.taskInfoMap();\n  },\n  deep: true\n}\n</code></pre> <pre><code>var vm = new Vue({\n  el: '#demo',\n  data: {\n    firstName: 'Foo',\n    lastName: 'Bar',\n    fullName: 'Foo Bar'\n  },\n  watch: {\n    firstName: function (val) {\n      this.fullName = val + ' ' + this.lastName\n    },\n    lastName: function (val) {\n      this.fullName = this.firstName + ' ' + val\n    }\n  }\n})\n</code></pre>"},{"location":"Vue/Vue2/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%B5%81%E4%B8%8B%E8%BD%BD/","title":"\u4e8c\u8fdb\u5236\u6587\u4ef6\u6d41\u4e0b\u8f7d","text":"<pre><code>methods: {\n  // \u4e0b\u8f7d\u65b9\u6cd5\n  downloadMethod(params, saveName) {\n    sysFileDownload(params, { responseType: \"blob\" }).then((res) =&gt; {\n      if (!res) {\n        this.$message.warning(\"\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25\");\n        return;\n      }\n      if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n        window.navigator.msSaveBlob(new Blob([res]), saveName);\n      } else {\n        const url = window.URL.createObjectURL(new Blob([res]), { type: \"application/zip\" });\n        const link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        link.href = url;\n        link.setAttribute(\"download\", saveName);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        this.$message.success(\"\u6587\u4ef6\u4e0b\u8f7d\u6210\u529f\");\n      }\n    });\n  },\n  // \u4f7f\u7528\u4e0b\u8f7d\n  handleDownFile(record) {\n    console.log(\"record\", record);\n    console.log(this.selectedRowKeys);\n    const params = {\n      ids: this.selectedRowKeys.join(\",\")\n    };\n    // \u5224\u65ad\u662f\u5426\u9009\u62e9\u4e86\u4e0b\u8f7d\u6587\u4ef6\n    const selectData = this.selectedRowKeys.length;\n    if (selectData) \n      // \u5355\u6587\u4ef6\u4e0b\u8f7d\u663e\u793a\u6587\u4ef6\u540d\n      if (selectData === 1) {\n        this.downloadMethod(params, this.selectedRows[0].fileName);\n      } else {\n      // \u591a\u6587\u4ef6\u4e0b\u8f7d\u91cd\u547d\u540d\n        this.downloadMethod(params, \"download.zip\");\n      }\n    } else {\n      this.$message.warning(\"\u8bf7\u5148\u9009\u62e9\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\");\n    }\n  },\n}\n</code></pre>"},{"location":"Vue/Vue2/%E5%88%97%E8%A1%A8%E9%A1%B9%E9%80%89%E4%B8%AD%E9%AB%98%E4%BA%AE/","title":"\u5217\u8868\u9879\u9009\u4e2d\u9ad8\u4eae","text":"<p>\u8981\u5b9e\u73b0Vue2\u4e2d\u5217\u8868\u4e2d\u9009\u4e2d\u67d0\u4e00\u9879\u80cc\u666f\u53d8\u7eff\uff0c\u5176\u4ed6\u9879\u79fb\u9664\u80cc\u666f\uff0c\u53ef\u4ee5\u901a\u8fc7\u7ed1\u5b9aclass\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u3002</p> <ol> <li> <p>\u5728\u6570\u636e\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027selectedItem\uff0c\u7528\u4e8e\u8bb0\u5f55\u9009\u4e2d\u7684\u9879\uff1a    <pre><code>data() {\n  return {\n    items: [\n      { id: 1, name: 'Item 1' },\n      { id: 2, name: 'Item 2' },\n      { id: 3, name: 'Item 3' }\n    ],\n    selectedItem: null\n  }\n}\n</code></pre></p> </li> <li> <p>\u5728\u6a21\u677f\u4e2d\u904d\u5386items\uff0c\u5e76\u4e3a\u6bcf\u4e00\u9879\u7ed1\u5b9aclass\uff1a    <pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"item in items\" :key=\"item.id\" :class=\"{ 'selected': item === selectedItem }\" @click=\"selectItem(item)\"&gt;\n        {{ item.name }}\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre></p> </li> <li> <p>\u5728\u65b9\u6cd5\u4e2d\u5b9a\u4e49selectItem\u65b9\u6cd5\uff0c\u7528\u4e8e\u9009\u4e2d\u67d0\u4e00\u9879\uff1a    <pre><code>methods: {\n  selectItem(item) {\n    this.selectedItem = item;\n  }\n}\n</code></pre></p> </li> <li> <p>\u5728\u6837\u5f0f\u4e2d\u5b9a\u4e49.selected\u7c7b\uff0c\u7528\u4e8e\u8bbe\u7f6e\u9009\u4e2d\u9879\u7684\u80cc\u666f\u989c\u8272\uff1a    <pre><code>.selected {\n  background-color: green;\n}\n</code></pre></p> </li> </ol> <p>\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u5f53\u70b9\u51fb\u5217\u8868\u9879\u65f6\uff0c\u88ab\u9009\u4e2d\u7684\u9879\u4f1a\u6709\u7eff\u8272\u7684\u80cc\u666f\uff0c\u5176\u4ed6\u9879\u5219\u79fb\u9664\u80cc\u666f\u8272\u3002</p>"},{"location":"Vue/Vue2/%E5%A4%9A%E9%80%89%E6%A1%86%E9%BB%98%E8%AE%A4%E9%80%89%E4%B8%AD%E5%85%A8%E9%83%A8%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BF%AE%E6%94%B9/","title":"\u591a\u9009\u6846\u9ed8\u8ba4\u9009\u4e2d\u5168\u90e8\u4e0d\u5141\u8bb8\u4fee\u6539","text":""},{"location":"Vue/Vue2/%E5%A4%9A%E9%80%89%E6%A1%86%E9%BB%98%E8%AE%A4%E9%80%89%E4%B8%AD%E5%85%A8%E9%83%A8%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BF%AE%E6%94%B9/#_2","title":"\u5df2\u77e5","text":"<pre><code>&lt;a-checkbox-group v-if=\"pageInfo.checkItem\" :default-value=\"checkListItem\" :options=\"checkListItem\" disabled /&gt;\n</code></pre> <pre><code>/* \u5728\u4f60\u7684\u7ec4\u4ef6\u7684 &lt;style&gt; \u6807\u7b7e\u6216\u8005\u5168\u5c40\u6837\u5f0f\u6587\u4ef6\u4e2d */\n/* \u8986\u76d6\u9ed8\u8ba4\u7684\u7981\u7528\u590d\u9009\u6846\u6837\u5f0f */\n.ant-checkbox-wrapper-disabled .ant-checkbox-inner {\n  background-color: #0081FF;\n    border-color: #0081FF;\n}\n\n.ant-checkbox-wrapper-disabled .ant-checkbox-inner::after {\n  border-color: #fff; /* \u8bbe\u7f6e\u52fe\u9009\u7684\u989c\u8272\uff0c\u6839\u636e\u9700\u8981\u8c03\u6574 */\n}\n\n.ant-checkbox-disabled + span {\n  color: rgb(0 0 0 / 70%);\n}\n</code></pre>"},{"location":"Vue/Vue2/%E5%A4%9A%E9%80%89%E6%A1%86%E9%BB%98%E8%AE%A4%E9%80%89%E4%B8%AD%E5%85%A8%E9%83%A8%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BF%AE%E6%94%B9/#chatgpt","title":"ChatGPT","text":"<p>\u5982\u679c\u4f60\u5e0c\u671b\u4fdd\u6301\u590d\u9009\u6846\u7684\u989c\u8272\u4e0d\u53d8\u7070\uff0c\u540c\u65f6\u4e0d\u5141\u8bb8\u7528\u6237\u53d6\u6d88\u52fe\u9009\uff0c\u90a3\u4e48\u4f60\u53ef\u80fd\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e9b\u6837\u5f0f\uff0c\u5e76\u4e14\u5728\u4ea4\u4e92\u4e0a\u8fdb\u884c\u963b\u6b62\u3002\u8fd9\u901a\u5e38\u610f\u5473\u7740\u4f60\u9700\u8981\u8986\u76d6 Ant Design Vue \u7ec4\u4ef6\u7684\u9ed8\u8ba4\u6837\u5f0f\uff0c\u5e76\u4e14\u901a\u8fc7\u4e8b\u4ef6\u76d1\u542c\u6765\u963b\u6b62\u52fe\u9009\u72b6\u6001\u7684\u53d8\u5316\u3002</p> <p>\u9996\u5148\uff0c\u8bbe\u7f6e\u6240\u6709\u590d\u9009\u6846\u4e3a\u9ed8\u8ba4\u9009\u4e2d\u72b6\u6001\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;a-checkbox-group :options=\"checkListItem\" v-model=\"checkedList\" @change=\"handleChange\" /&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  data() {\n    const checkListItem = [\n      { label: '\u9009\u98791', value: '\u9009\u98791' },\n      { label: '\u9009\u98792', value: '\u9009\u98792' },\n      { label: '\u9009\u98793', value: '\u9009\u98793' },\n      // \u66f4\u591a\u9009\u9879...\n    ];\n\n    // \u521d\u59cb\u5316\u9009\u4e2d\u7684\u9879\u4e3a\u5168\u90e8\u9009\u9879\n    const checkedList = checkListItem.map(item =&gt; item.value);\n\n    return {\n      checkedList,\n      checkListItem,\n    };\n  },\n  methods: {\n    handleChange(checkedValues) {\n      // \u5982\u679c\u6709\u4efb\u4f55\u53d6\u6d88\u52fe\u9009\u7684\u884c\u4e3a\uff0c\u5f3a\u5236\u6062\u590d\u5230\u5168\u9009\u72b6\u6001\n      if (checkedValues.length &lt; this.checkListItem.length) {\n        this.$nextTick(() =&gt; {\n          this.checkedList = this.checkListItem.map(item =&gt; item.value);\n        });\n      }\n    },\n  },\n};\n&lt;/script&gt;\n</code></pre> <p>\u7136\u540e\uff0c\u4e3a\u4e86\u4fdd\u6301\u539f\u59cb\u590d\u9009\u6846\u7684\u989c\u8272\u4e0d\u53d8\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6837\u5f0f\u6765\u8986\u76d6 Ant Design Vue \u7684\u9ed8\u8ba4\u6837\u5f0f\u3002\u8fd9\u4e2a\u6b65\u9aa4\u53d6\u51b3\u4e8e\u4f60\u4f7f\u7528\u7684\u662f\u54ea\u4e2a\u7248\u672c\u7684 Ant Design Vue \u548c\u4f60\u7684\u9879\u76ee\u6784\u5efa\u914d\u7f6e\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u53ef\u80fd\u7684\u6837\u5f0f\u8986\u76d6\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\u9009\u62e9\u5668\u548c\u6837\u5f0f\u89c4\u5219\uff1a</p> <pre><code>/* \u5728\u4f60\u7684\u7ec4\u4ef6\u7684 &lt;style&gt; \u6807\u7b7e\u6216\u8005\u5168\u5c40\u6837\u5f0f\u6587\u4ef6\u4e2d */\n/* \u8986\u76d6\u9ed8\u8ba4\u7684\u7981\u7528\u590d\u9009\u6846\u6837\u5f0f */\n.ant-checkbox-wrapper-disabled .ant-checkbox-inner {\n  background-color: #fff; /* \u8bbe\u7f6e\u80cc\u666f\u989c\u8272\uff0c\u6839\u636e\u9700\u8981\u8c03\u6574 */\n  border-color: #d9d9d9; /* \u8bbe\u7f6e\u8fb9\u6846\u989c\u8272\uff0c\u6839\u636e\u9700\u8981\u8c03\u6574 */\n}\n\n.ant-checkbox-wrapper-disabled .ant-checkbox-inner::after {\n  border-color: #1890ff; /* \u8bbe\u7f6e\u52fe\u9009\u7684\u989c\u8272\uff0c\u6839\u636e\u9700\u8981\u8c03\u6574 */\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u6837\u5f0f\u8986\u76d6\u53ef\u80fd\u4f1a\u5bf9\u4f60\u7684\u5e94\u7528\u4e2d\u7684\u5176\u4ed6\u590d\u9009\u6846\u4ea7\u751f\u5f71\u54cd\uff0c\u56e0\u6b64\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u66f4\u5177\u4f53\u7684\u9009\u62e9\u5668\u6765\u9650\u5b9a\u8fd9\u4e9b\u6837\u5f0f\u89c4\u5219\u7684\u4f5c\u7528\u8303\u56f4\uff0c\u4f8b\u5982\u6dfb\u52a0\u7279\u5b9a\u7684\u7c7b\u540d\u6216 ID\u3002</p> <p>\u4ee5\u4e0a\u65b9\u6cd5\u53ef\u4ee5\u786e\u4fdd\u6240\u6709\u590d\u9009\u6846\u9ed8\u8ba4\u88ab\u9009\u4e2d\uff0c\u770b\u8d77\u6765\u4e0e\u672a\u7981\u7528\u72b6\u6001\u4e00\u81f4\uff0c\u5e76\u963b\u6b62\u7528\u6237\u53d6\u6d88\u52fe\u9009\u3002</p>"},{"location":"Vue/Vue2/%E5%BE%AA%E7%8E%AF%E8%B0%83%E5%8F%96%E6%8E%A5%E5%8F%A3%E6%8F%90%E7%A4%BA%E8%AF%AD%E6%98%BE%E7%A4%BA%E4%B8%80%E6%AC%A1/","title":"\u5faa\u73af\u8c03\u53d6\u63a5\u53e3\u63d0\u793a\u8bed\u663e\u793a\u4e00\u6b21","text":"<p>\u5faa\u73af\u8c03\u53d6\u63a5\u53e3, \u53ea\u6709\u5168\u90e8\u63d0\u4ea4\u5b8c\u6210\u540e\u624d\u8fd4\u56de\u6210\u529f</p>"},{"location":"Vue/Vue2/%E5%BE%AA%E7%8E%AF%E8%B0%83%E5%8F%96%E6%8E%A5%E5%8F%A3%E6%8F%90%E7%A4%BA%E8%AF%AD%E6%98%BE%E7%A4%BA%E4%B8%80%E6%AC%A1/#_2","title":"\u57fa\u672c\u5199\u6cd5","text":"<pre><code>submitTaskProcess() {\n  const taskIdArray = this.selectTaskInfo;\n  for (var i = 0; i &lt; taskIdArray.length; i++) {\n    const params = {\n      taskId: taskIdArray[i]\n    };\n    this.submitTaskProcessLoading = true;\n    stageTaskSsubmitProcess(params).then((res) =&gt; {\n      if (res.success) {\n        this.$message.success(res.message);\n        this.submitTaskProcessLoading = false;\n      } else {\n        this.$message.warning(res.message);\n      }\n    });\n  }\n}\n</code></pre>"},{"location":"Vue/Vue2/%E5%BE%AA%E7%8E%AF%E8%B0%83%E5%8F%96%E6%8E%A5%E5%8F%A3%E6%8F%90%E7%A4%BA%E8%AF%AD%E6%98%BE%E7%A4%BA%E4%B8%80%E6%AC%A1/#_3","title":"\u4f18\u5316","text":"<p>\u5982\u679c\u60a8\u5e0c\u671b\u5728\u5faa\u73af\u8c03\u7528\u63a5\u53e3\u65f6<code>message</code>\u53ea\u663e\u793a\u4e00\u6b21\uff0c\u5e76\u4e14\u60f3\u8981\u4f18\u5316<code>for</code>\u5faa\u73af\uff0c\u53ef\u4ee5\u91c7\u7528\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u4f7f\u7528<code>async</code>/<code>await</code>\u5904\u7406\u5f02\u6b65\u8c03\u7528\u3002</li> <li>\u4f7f\u7528<code>Array.prototype.map</code>\u548c<code>Promise.all</code>\u6765\u7b49\u5f85\u6240\u6709\u63a5\u53e3\u8c03\u7528\u5b8c\u6210\u3002</li> <li>\u53ea\u5728\u6240\u6709\u4efb\u52a1\u5b8c\u6210\u540e\u663e\u793a\u4e00\u6761\u6210\u529f\u6216\u8b66\u544a\u4fe1\u606f\u3002</li> </ol> <p>\u8fd9\u91cc\u662f\u4e00\u79cd\u4f18\u5316\u540e\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <pre><code>async submitTaskProcess() {\n  const taskIdArray = this.selectTaskInfo;\n  this.submitTaskProcessLoading = true;\n\n  // \u521b\u5efa\u4e00\u4e2a\u6240\u6709\u4efb\u52a1\u7684Promise\u6570\u7ec4\n  const promises = taskIdArray.map(taskId =&gt; {\n    const params = { taskId };\n    return stageTaskSsubmitProcess(params);\n  });\n\n  // \u7b49\u5f85\u6240\u6709\u4efb\u52a1\u5b8c\u6210\n  try {\n    const results = await Promise.all(promises);\n    const allSuccess = results.every(res =&gt; res.success);\n\n    // \u6839\u636e\u4efb\u52a1\u7684\u6210\u529f\u4e0e\u5426\u663e\u793a\u76f8\u5e94\u7684message\n    if (allSuccess) {\n      this.$message.success('\u6240\u6709\u4efb\u52a1\u90fd\u5df2\u6210\u529f\u63d0\u4ea4\uff01');\n    } else {\n      this.$message.warning('\u4e00\u4e2a\u6216\u591a\u4e2a\u4efb\u52a1\u63d0\u4ea4\u65f6\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u68c0\u67e5\u3002');\n    }\n  } catch (error) {\n    console.error('\u63d0\u4ea4\u4efb\u52a1\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef:', error);\n    this.$message.error('\u63d0\u4ea4\u4efb\u52a1\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef\u3002');\n  } finally {\n    this.submitTaskProcessLoading = false;\n  }\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a<code>promises</code>\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u6240\u6709<code>stageTaskSsubmitProcess</code>\u51fd\u6570\u8c03\u7528\u7684<code>Promise</code>\u3002\u7136\u540e\u901a\u8fc7<code>Promise.all</code>\u7b49\u5f85\u6240\u6709\u7684<code>Promise</code>\u90fd\u89e3\u51b3\u540e\u624d\u7ee7\u7eed\u6267\u884c\u3002</p> <p><code>results</code>\u53d8\u91cf\u5c06\u4f1a\u662f\u4e00\u4e2a\u5305\u542b\u6bcf\u4e2a\u4efb\u52a1\u8c03\u7528\u7ed3\u679c\u7684\u6570\u7ec4\u3002\u6211\u4eec\u63a5\u7740\u68c0\u67e5\u6240\u6709\u8c03\u7528\u662f\u5426\u6210\u529f\uff0c\u7136\u540e\u663e\u793a\u4e00\u6761\u7edf\u4e00\u7684\u4fe1\u606f\u3002<code>try</code>/<code>catch</code>/<code>finally</code>\u7ed3\u6784\u7528\u4e8e\u5904\u7406\u53ef\u80fd\u53d1\u751f\u7684\u4efb\u4f55\u5f02\u5e38\u60c5\u51b5\uff0c\u5e76\u5728\u6240\u6709\u64cd\u4f5c\u5b8c\u6210\u540e\u5173\u95ed\u52a0\u8f7d\u72b6\u6001\u3002</p> <p>\u8fd9\u6837\uff0c\u4e0d\u4ec5\u4f18\u5316\u4e86\u5faa\u73af\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u8fd8\u5b9e\u73b0\u4e86\u53ea\u663e\u793a\u4e00\u6b21\u4fe1\u606f\u7684\u8981\u6c42\u3002</p>"},{"location":"Vue/Vue2/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%8D%B0%E4%BF%9D%E5%AD%98pdf%E9%87%8D%E5%91%BD%E5%90%8D/","title":"\u6d4f\u89c8\u5668\u6253\u5370\u4fdd\u5b58pdf\u91cd\u547d\u540d","text":"<p>\u4f7f\u7528 <code>\"vue-print-nb\": \"^1.7.5\",</code> \u5e93\u8fdb\u884c\u9875\u9762\u90e8\u5206\u6253\u5370\u7684\u65f6\u5019\uff0c\u8fdb\u884c\u8c03\u53d6\u6d4f\u89c8\u5668\u539f\u751f\u6253\u5370\u7684\u65f6\u5019\u53ef\u4ee5\u4fdd\u5b58\u4e3a <code>pdf</code>\uff0c\u4f46\u662f\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u662f\u6839\u636e\u9875\u9762\u7684 <code>title</code> \u6765\u7684\uff0c\u5982\u679c\u60f3\u81ea\u5b9a\u4e49\u6839\u636e\u9009\u53d6\u90e8\u5206\u5185\u5bb9\u8fdb\u884c\u91cd\u547d\u540d\u7684\u8bdd\uff0c\u53ef\u4ee5\u4fee\u6539 <code>title</code> \u7684\u503c\u6765\u5b9e\u73b0\u3002</p> <p>\u901a\u8fc7\u8c03\u53d6\u6253\u5370\u56de\u8c03\u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u4fee\u6539\uff1a</p> <pre><code>printAre: {\n  id: \"pdf-content\",\n  beforeOpenCallback: () =&gt; {\n    document.querySelector(\"title\").innerText = \"\u4fdd\u5b58pdf\u7684\u6587\u4ef6\u540d\";\n    this.printLoading = true;\n  },\n  closeCallback: () =&gt; {\n    document.querySelector(\"title\").innerText = \"\u6539\u56de\u539f\u6765\u540d\u5b57\";\n    this.printLoading = false;\n  }\n},\n</code></pre>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/","title":"\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1\u4e0e\u4e8b\u4ef6\u89e6\u53d1","text":""},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_2","title":"\u4e00\u3001\u7ec4\u4ef6","text":""},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_3","title":"\u5b50\u7ec4\u4ef6","text":"<pre><code>&lt;template&gt;\n  &lt;div style=\"border:1px solid black;width:400px; height: 130px;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u5b50\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;button&gt;\u5b50\u7ec4\u4ef6\u5c06\u503c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6&lt;/button&gt;\n    &lt;div&gt;\u5b50\u7ec4\u4ef6\u63a5\u6536\u7236\u7ec4\u4ef6\u7684\u503c:&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt; \n</code></pre>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_4","title":"\u7236\u7ec4\u4ef6","text":"<pre><code>&lt;template&gt;\n &lt;div style=\"border:1px solid red;padding:2rem;width:400px;margin:0 auto;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u7236\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;div&gt;\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\u7684\u503c:&lt;/div&gt;\n    &lt;Child&gt;&lt;/Child&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport Child from './Child';\nexport default {\n    components: {\n        Child\n    }\n}\n&lt;/script&gt;\n</code></pre> <p>\u901a\u8fc7\u8fd9\u5f20\u56fe\u53ef\u4ee5\u770b\u51fa\u7236\u5b50\u7ec4\u4ef6\u7684\u7ed3\u6784\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u5b9e\u4e60\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1\u3002</p>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_5","title":"\u4e8c\u3001\u7236\u5b50\u7ec4\u4ef6\u901a\u4fe1","text":""},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_6","title":"\u7236\u7ec4\u4ef6\u7ed9\u5b50\u7ec4\u4ef6\u901a\u4fe1","text":"<p>\u5b9e\u73b0\u601d\u8def\uff1a\u5b50\u7ec4\u4ef6\u901a\u8fc7 <code>props</code> \u6765\u63a5\u53d7\u7236\u7ec4\u4ef6\u4f20\u8fc7\u6765\u7684\u503c\u3002</p> <ol> <li> <p>\u5728\u7236\u7ec4\u4ef6\u4e2d\uff0c\u5b9a\u4e49\u4e00\u4e2adata\u53d8\u91cf\uff0c\u5728\u5b50\u7ec4\u4ef6\u6807\u7b7e\u4e2d\u52a8\u6001\u7ed1\u5b9a\u8fd9\u4e2a\u503c\u3002</p> <pre><code>// Father.vue\n&lt;template&gt;\n &lt;div style=\"border:1px solid red;padding:2rem;width:400px;margin:0 auto;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u7236\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;div&gt;\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\u7684\u503c:{{ChildMsg}}&lt;/div&gt;\n    &lt;Child :FatherMsg=\"data\"&gt;&lt;/Child&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport Child from './Child';\nexport default {\n    data() {\n        return {\n            data: 'I am your father',\n        }\n    },\n    components: {\n        Child\n    }\n}\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u63a5\u7740\u5728\u5b50\u7ec4\u4ef6\u91cc\u901a\u8fc7 <code>props</code> \u6765\u63a5\u6536\uff0c\u8fd9\u6837\u5b50\u7ec4\u4ef6\u5c31\u63a5\u6536\u5230\u4e86\u7236\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684\u503c\u4e86\u3002</p> <pre><code>// Child.vue\n&lt;template&gt;\n  &lt;div style=\"border:1px solid black;width:400px; height: 130px;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u5b50\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;button&gt;\u5b50\u7ec4\u4ef6\u5c06\u503c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6&lt;/button&gt;\n    &lt;div&gt;\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u7684\u503c:{{FatherMsg}}&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt; \n\n&lt;script&gt;\nexport default {\n    data() {\n        return {\n            data: 'I am your children',\n        }\n    },\n    props: ['FatherMsg']\n}\n&lt;/script&gt;\n</code></pre> </li> </ol> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u901a\u4fe1\u5df2\u7ecf\u5b9e\u73b0\u4e86\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u901a\u4fe1\u4e86\uff0c\u8fd9\u4e2a\u5c31\u8981\u4f7f\u7528\u5230 <code>this.$emit</code> \u65b9\u6cd5\u4e86\u3002</p>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_7","title":"\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u901a\u4fe1","text":"<p>\u5b9e\u73b0\u601d\u8def\uff1a\u901a\u8fc7\u5728\u5b50\u7ec4\u4ef6\u4e2d\u4f7f\u7528 <code>this.$emit</code> \u6765\u89e6\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u5e76\u4f20\u503c\uff0c\u7136\u540e\u5728\u7236\u7ec4\u4ef6\u4e2d\u76d1\u542c\u8be5\u4e8b\u4ef6\u5373\u53ef\u3002</p> <ol> <li> <p>\u5728\u5b50\u7ec4\u4ef6\u4e2d\u7ed9 button \u6309\u94ae\u6dfb\u52a0 click \u4e8b\u4ef6\uff0c\u6765\u901a\u8fc7 <code>this.$emit</code> \u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u5e76\u4f20\u5165\u4e00\u4e2a\u53c2\u6570\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;div style=\"border:1px solid black;width:400px; height: 130px;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u5b50\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;button @click=\"send\"&gt;\u5b50\u7ec4\u4ef6\u5c06\u503c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6&lt;/button&gt;\n    &lt;div&gt;\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u7684\u503c:{{FatherMsg}}&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt; \n\n&lt;script&gt;\nexport default {\n    data() {\n        return {\n            data: 'I am your children',\n        }\n    },\n    props: ['FatherMsg'],\n    methods: {\n      send() {\n        this.$emit('ListenChild', this.data);\n      }\n    }\n}\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u5728\u7236\u7ec4\u4ef6\u4e2d\u7684\u5b50\u7ec4\u4ef6\u6807\u7b7e\u91cc\uff0c\u5148\u5728 <code>data</code> \u91cc\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u63a5\u6536\u8fd9\u4e2a\u503c\uff0c\u7136\u540e\u76d1\u542c\u5728\u5b50\u7ec4\u4ef6\u4e2d\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\uff0c\u5e76\u63a5\u53d7\u8fd9\u4e2a\u53c2\u6570\u8d4b\u503c\u7ed9\u5b9a\u4e49\u7684\u53d8\u91cf\uff1a</p> <pre><code>&lt;template&gt;\n &lt;div style=\"border:1px solid red;padding:2rem;width:400px;margin:0 auto;\"&gt;\n    &lt;h3&gt;\u6211\u662f\u7236\u7ec4\u4ef6&lt;/h3&gt;\n    &lt;div&gt;\u5b50\u7ec4\u4ef6\u5411\u7236\u7ec4\u4ef6\u4f20\u9012\u7684\u503c:{{ChildMsg}}&lt;/div&gt;\n    &lt;Child :FatherMsg=\"data\" @ListenChild=\"ListenChild\"&gt;&lt;/Child&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport Child from './Child';\nexport default {\n    data() {\n        return {\n            data: 'I am your father',\n            ChildMsg: '',\n        }\n    },\n    components: {\n        Child\n    },\n    methods: {\n        ListenChild(data) {\n            console.log(\"\u5b50\u7ec4\u4ef6\u4f20\u9012\u8fc7\u6765\u7684\u503c\uff1a\" , data);\n            this.ChildMsg = data;\n        }\n    }\n}\n&lt;/script&gt;\n</code></pre> </li> </ol> <p>\u70b9\u51fb\u5b50\u7ec4\u4ef6\u4e2d\u7684\u201c\u5b50\u7ec4\u4ef6\u5c06\u503c\u4f20\u9012\u7ed9\u7236\u7ec4\u4ef6\u201d\uff0c\u5c31\u53ef\u770b\u5230\u5982\u4e0b\u6548\u679c\uff1a </p> <p></p>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_8","title":"\u4e09\u3001\u7236\u5b50\u7ec4\u4ef6\u4e8b\u4ef6\u89e6\u53d1","text":""},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_9","title":"\u7236\u7ec4\u4ef6\u8c03\u7528\u5b50\u7ec4\u4ef6\u4e2d\u7684\u4e8b\u4ef6\u65b9\u6cd5","text":"<ol> <li> <p>\u901a\u8fc7 <code>ref</code> \u76f4\u63a5\u8c03\u7528\u5b50\u7ec4\u4ef6\u7684\u65b9\u6cd5\uff1a</p> <pre><code>// Child.vue \n&lt;template&gt;\n  &lt;div style=\"border: 1px solid black; width: 150px; margin: 10px auto\"&gt;\n    \u6211\u662f\u5b50\u7ec4\u4ef6\n    &lt;div style=\"color: red\"&gt; {{ msg }} &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\nexport default {\n    data() {\n        return {\n            msg: '',\n        }\n    },\n  methods: {\n    childFun() {\n      console.log('\u6211\u662f\u5b50\u7ec4\u4ef6\u7684\u65b9\u6cd5 childFun');\n      this.msg = '\u6211\u7684\u65b9\u6cd5\u88ab\u8c03\u7528\u4e86'\n    },\n  },\n};\n&lt;/script&gt;\n</code></pre> <p>\u5728\u5b50\u7ec4\u4ef6\u6807\u7b7e\u4e0a\u6dfb\u52a0 <code>ref</code> \u5c5e\u6027\uff0c\u7136\u540e\u5728\u65b9\u6cd5\u4e2d\u901a\u8fc7 <code>this.$refs</code> \u627e\u5230\u7ed1\u5b9a <code>ref</code> \u7684\u5c5e\u6027\u8c03\u7528\u8be5\u5b50\u7ec4\u4ef6\u5185\u7684\u65b9\u6cd5\u5373\u53ef\u3002</p> <pre><code>// Father.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid red; width: 200px; padding: 10px; margin: 0 auto\"&gt;\n    \u6211\u662f\u7236\u7ec4\u4ef6\n    &lt;Button @click=\"handleClick\"&gt;\u70b9\u51fb\u8c03\u7528\u5b50\u7ec4\u4ef6\u65b9\u6cd5&lt;/Button&gt;\n    &lt;Child ref=\"child\" /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;    \n\n&lt;script&gt;\nimport Child from './Child';\n\nexport default {\n    components: {\n        Child\n    },\n    methods: {\n        handleClick() {\n            this.$refs.child.childFun();\n        },\n    },\n}\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u901a\u8fc7\u7ec4\u4ef6\u7684 <code>$emit</code>\u3001<code>$on</code> \u65b9\u6cd5\uff1a</p> <pre><code>// Child.vue \n&lt;template&gt;\n  &lt;div style=\"border: 1px solid black; width: 150px; margin: 10px auto\"&gt;\n    \u6211\u662f\u5b50\u7ec4\u4ef6\n    &lt;div style=\"color: red\"&gt; {{ msg }} &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\nexport default {\n    data() {\n        return {\n            msg: '',\n        }\n    },\n  mounted() {\n    this.$on('childFun', function() {\n        console.log('\u6211\u662f\u5b50\u7ec4\u4ef6\u65b9\u6cd5');\n        this.msg = '\u6211\u7684\u65b9\u6cd5\u88ab\u8c03\u7528\u4e86'\n    });\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u5728\u5b50\u7ec4\u4ef6\u4e2d\u4f7f\u7528 <code>$on</code> \u7ed1\u5b9a\u4e00\u4e2a\u65b9\u6cd5\uff0c\u7136\u540e\u5728\u7236\u7ec4\u4ef6\u4e2d\u901a\u8fc7 <code>$emit</code> \u627e\u5230\u7ed1\u5b9a <code>$on</code> \u4e0a\u9762\u7684\u4e8b\u4ef6\u540d\u5373\u53ef\uff0c\u4f46\u662f\u4e5f\u9700\u8981 <code>ref</code> \u7684\u914d\u5408\u3002</p> <pre><code>// Father.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid red; width: 200px; padding: 10px; margin: 0 auto\"&gt;\n    \u6211\u662f\u7236\u7ec4\u4ef6\n    &lt;Button @click=\"handleClick\"&gt;\u70b9\u51fb\u8c03\u7528\u5b50\u7ec4\u4ef6\u65b9\u6cd5&lt;/Button&gt;\n    &lt;Child ref=\"child\" /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;    \n\n&lt;script&gt;\nimport Child from './Child';\n\nexport default {\n    components: {\n        Child\n    },\n    methods: {\n        handleClick() {\n\n            this.$refs.child.$emit(\"childFun\")    \n        },\n    },\n}\n&lt;/script&gt;\n</code></pre> </li> </ol> <p>\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f\u6548\u679c\u4e00\u81f4\u3002</p> <p>\u8c03\u7528\u65b9\u6cd5\u524d\uff1a</p> <p></p> <p>\u8c03\u7528\u65b9\u6cd5\u540e\uff1a </p> <p> </p>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_10","title":"\u5b50\u7ec4\u4ef6\u8c03\u7528\u7236\u7ec4\u4ef6\u4e2d\u7684\u4e8b\u4ef6\u65b9\u6cd5","text":"<ol> <li> <p>\u76f4\u63a5\u5728\u5b50\u7ec4\u4ef6\u4e2d\u901a\u8fc7 <code>this.$parent</code> \u6765\u8c03\u7528\u7236\u7ec4\u4ef6\u7684\u65b9\u6cd5</p> <pre><code>// Father.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid red; width: 200px; padding: 10px; margin: 0 auto\" &gt;\n    \u6211\u662f\u7236\u7ec4\u4ef6\n    &lt;Child&gt;&lt;/Child&gt;\n    &lt;div style=\"color: red\"&gt; {{ msg }} &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  import Child from './Child';\n  export default {\n      data() {\n          return {\n              msg: ''\n          }\n      },\n    components: {\n      Child\n    },\n    methods: {\n      fatherMethod() {\n        console.log('\u6211\u7684\u7236\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5');\n        this.msg = '\u6211\u7684\u65b9\u6cd5\u88ab\u5b50\u7ec4\u4ef6\u8c03\u7528\u4e86';\n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> <pre><code>// Child.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid black; width: 150px; margin: 10px auto\"&gt;\n    \u6211\u662f\u5b50\u7ec4\u4ef6\n    &lt;button @click=\"childMethod\"&gt;\u70b9\u51fb\u8c03\u7528\u7236\u7ec4\u4ef6\u65b9\u6cd5&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  export default {\n    methods: {\n      childMethod() {\n        this.$parent.fatherMethod();\n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u5728\u5b50\u7ec4\u4ef6\u91cc\u7528 <code>$emit</code> \u5411\u7236\u7ec4\u4ef6\u89e6\u53d1\u4e00\u4e2a\u4e8b\u4ef6\uff0c\u7236\u7ec4\u4ef6\u76d1\u542c\u8fd9\u4e2a\u4e8b\u4ef6\uff08\u63a8\u8350\u4f7f\u7528\uff09</p> <pre><code>// Father.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid red; width: 200px; padding: 10px; margin: 0 auto\" &gt;\n    \u6211\u662f\u7236\u7ec4\u4ef6\n    &lt;Child @fatherMethod=\"fatherMethod\"&gt;&lt;/Child&gt;\n    &lt;div style=\"color: red\"&gt; {{ msg }} &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  import Child from './Child';\n  export default {\n      data() {\n          return {\n              msg: ''\n          }\n      },\n    components: {\n      Child\n    },\n    methods: {\n      fatherMethod() {\n        console.log('\u6211\u7684\u7236\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5');\n        this.msg = '\u6211\u7684\u65b9\u6cd5\u88ab\u5b50\u7ec4\u4ef6\u8c03\u7528\u4e86';\n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\u53ef\u4ee5\u4f7f\u7528 <code>$emit</code> \u89e6\u53d1\u7236\u7ec4\u4ef6\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002</p> <pre><code>// Child.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid black; width: 150px; margin: 10px auto\"&gt;\n    \u6211\u662f\u5b50\u7ec4\u4ef6\n    &lt;button @click=\"childMethod\"&gt;\u70b9\u51fb\u8c03\u7528\u7236\u7ec4\u4ef6\u65b9\u6cd5&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  export default {\n    methods: {\n      childMethod() {\n\n        this.$emit('fatherMethod'); \n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> </li> <li> <p>\u7236\u7ec4\u4ef6\u628a\u65b9\u6cd5\u4f20\u5165\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u5728\u5b50\u7ec4\u4ef6\u91cc\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff1a</p> <pre><code>// Father.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid red; width: 200px; padding: 10px; margin: 0 auto\" &gt;\n    \u6211\u662f\u7236\u7ec4\u4ef6\n    &lt;Child :fatherMethod=\"fatherMethod\"&gt;&lt;/Child&gt;\n    &lt;div style=\"color: red\"&gt; {{ msg }} &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  import Child from './Child';\n  export default {\n      data() {\n          return {\n              msg: ''\n          }\n      },\n    components: {\n      Child\n    },\n    methods: {\n      fatherMethod() {\n        console.log('\u6211\u7684\u7236\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5');\n        this.msg = '\u6211\u7684\u65b9\u6cd5\u88ab\u5b50\u7ec4\u4ef6\u8c03\u7528\u4e86';\n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> <p>\u7236\u7ec4\u4ef6\u53ef\u4ee5\u5c06\u4e8b\u4ef6\u7ed1\u5b9a\u5230\u5b50\u7ec4\u4ef6\u6807\u7b7e\u4e0a\uff0c\u5b50\u7ec4\u4ef6\u4f7f\u7528 <code>props</code> \u63a5\u6536\u7236\u7ec4\u4ef6\u7684\u4e8b\u4ef6\u3002</p> <pre><code>// Child.vue\n&lt;template&gt;\n  &lt;div style=\"border: 1px solid black; width: 150px; margin: 10px auto\"&gt;\n    \u6211\u662f\u5b50\u7ec4\u4ef6\n    &lt;button @click=\"childMethod\"&gt;\u70b9\u51fb\u8c03\u7528\u7236\u7ec4\u4ef6\u65b9\u6cd5&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n&lt;script&gt;\n  export default {\n    props: {\n      fatherMethod: {\n        type: Function,\n        default: null\n      }\n    },\n    methods: {\n      childMethod() {\n        if (this.fatherMethod) {\n          this.fatherMethod();\n        }\n      }\n    }\n  };\n&lt;/script&gt;\n</code></pre> </li> </ol> <p>\u4ee5\u4e0a\u4e09\u79cd\u5b9e\u73b0\u65b9\u5f0f\u6548\u679c\u4e00\u81f4\u3002</p> <p>\u8c03\u7528\u65b9\u6cd5\u524d\uff1a</p> <p></p> <p>\u8c03\u7528\u65b9\u6cd5\u540e\uff1a </p> <p></p>"},{"location":"Vue/Vue2/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91/#_11","title":"\u56db\u3001\u603b\u7ed3","text":"<p>\u81f3\u6b64\uff0cVue \u7236\u5b50\u7ec4\u4ef6\u4e4b\u95f4\u5927\u90e8\u5206\u7684\u64cd\u4f5c\u90fd\u6d89\u53ca\u5230\u4e86\uff0c\u6211\u4eec\u5728\u7a0b\u5e8f\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5bf9\u4e8e\u8be5\u90e8\u5206\u5185\u5bb9\u53ef\u4ee5\u6e38\u5203\u6709\u4f59\u4e86\u3002</p>"},{"location":"Vue/Vue2/%E7%88%B6%E7%BB%84%E4%BB%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/","title":"\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e","text":"<p>\u5728Vue.js\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7props\u5c5e\u6027\u5c06\u7236\u7ec4\u4ef6\u7684\u6570\u636e\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002\u7136\u540e\u5728\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u76d1\u542c\u7236\u7ec4\u4ef6\u4f20\u9012\u7684\u6570\u636e\uff0c\u5b9e\u65f6\u66f4\u65b0\u5b50\u7ec4\u4ef6\u7684\u89c6\u56fe\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\u4ee3\u7801\uff1a</p> <p>\u7236\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;button @click=\"addData\"&gt;\u6dfb\u52a0\u6570\u636e&lt;/button&gt;\n    &lt;child-component :childData=\"parentData\"&gt;&lt;/child-component&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport ChildComponent from './ChildComponent.vue';\n\nexport default {\n  data() {\n    return {\n      parentData: [] // \u7236\u7ec4\u4ef6\u7684\u6570\u636e\n    };\n  },\n  methods: {\n    addData() {\n      this.parentData.push('\u65b0\u6570\u636e'); // \u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u5411\u7236\u7ec4\u4ef6\u7684\u6570\u636e\u4e2d\u6dfb\u52a0\u65b0\u6570\u636e\n    }\n  },\n  components: {\n    ChildComponent\n  }\n};\n&lt;/script&gt;\n</code></pre> <p>\u5b50\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;ul&gt;\n      &lt;li v-for=\"item in childData\" :key=\"item\"&gt;{{ item }}&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  props: ['childData'] // \u63a5\u6536\u7236\u7ec4\u4ef6\u4f20\u9012\u7684\u6570\u636e\n};\n&lt;/script&gt;\n</code></pre> <p>\u5728\u7236\u7ec4\u4ef6\u4e2d\uff0c\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u4f1a\u8c03\u7528<code>addData</code>\u65b9\u6cd5\uff0c\u5411\u7236\u7ec4\u4ef6\u7684\u6570\u636e<code>parentData</code>\u4e2d\u6dfb\u52a0\u65b0\u6570\u636e\u3002\u7136\u540e\u5c06<code>parentData</code>\u901a\u8fc7props\u5c5e\u6027\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002</p> <p>\u5728\u5b50\u7ec4\u4ef6\u4e2d\uff0c\u901a\u8fc7\u4f7f\u7528<code>v-for</code>\u6307\u4ee4\u5faa\u73af\u904d\u5386<code>childData</code>\uff0c\u5c06\u6bcf\u4e2a\u6570\u636e\u9879\u6e32\u67d3\u5230\u9875\u9762\u4e0a\u3002</p> <p>\u8fd9\u6837\uff0c\u5f53\u7236\u7ec4\u4ef6\u70b9\u51fb\u6309\u94ae\u6dfb\u52a0\u6570\u636e\u65f6\uff0c\u5b50\u7ec4\u4ef6\u4f1a\u5b9e\u65f6\u66f4\u65b0\u89c6\u56fe\uff0c\u663e\u793a\u6700\u65b0\u7684\u6570\u636e\u3002</p> <p>props \u5b8c\u6574\u7684\u5199\u6cd5\u662f\u4ec0\u4e48\uff1f\u9700\u8981\u7c7b\u578b\u548c\u9ed8\u8ba4\u503c\u7b49\u5185\u5bb9\u7684\u5199\u6cd5</p> <p>\u4e0b\u9762\u662fprops\u7684\u5b8c\u6574\u5199\u6cd5\uff0c\u5305\u62ec\u7c7b\u578b\u548c\u9ed8\u8ba4\u503c\uff1a</p> <pre><code>props: {\n  propName: {\n    type: Type, // \u5c5e\u6027\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\uff1aString, Number, Boolean, Object, Array\u7b49\n    default: DefaultValue // \u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\n    required: Boolean, // \u662f\u5426\u5fc5\u9700\uff0c\u9ed8\u8ba4\u4e3afalse\n    validator: Function // \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u51fd\u6570\n  }\n}\n</code></pre> <p>\u5176\u4e2d\uff0c<code>propName</code>\u662f\u5c5e\u6027\u540d\uff0c<code>Type</code>\u662f\u5c5e\u6027\u7684\u7c7b\u578b\uff0c<code>DefaultValue</code>\u662f\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a</p> <pre><code>props: {\n  message: {\n    type: String,\n    default: '\u9ed8\u8ba4\u6d88\u606f',\n    required: true,\n    validator: function(value) {\n      // \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u51fd\u6570\uff0c\u8fd4\u56detrue\u8868\u793a\u9a8c\u8bc1\u901a\u8fc7\uff0c\u8fd4\u56defalse\u8868\u793a\u9a8c\u8bc1\u4e0d\u901a\u8fc7\n      return value.length &lt;= 10;\n    }\n  }\n}\n</code></pre> <p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c<code>message</code>\u662f\u5c5e\u6027\u540d\uff0c\u7c7b\u578b\u4e3aString\uff0c\u5982\u679c\u7236\u7ec4\u4ef6\u6ca1\u6709\u4f20\u9012<code>message</code>\u5c5e\u6027\u65f6\uff0c\u5b83\u7684\u9ed8\u8ba4\u503c\u4e3a<code>'\u9ed8\u8ba4\u6d88\u606f'</code>\u3002<code>required</code>\u5c5e\u6027\u8bbe\u7f6e\u4e3a<code>true</code>\uff0c\u8868\u793a\u8be5\u5c5e\u6027\u662f\u5fc5\u9700\u7684\uff0c\u5982\u679c\u7236\u7ec4\u4ef6\u6ca1\u6709\u4f20\u9012\u8be5\u5c5e\u6027\uff0c\u5c06\u4f1a\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u8b66\u544a\u3002<code>validator</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u9a8c\u8bc1\u51fd\u6570\uff0c\u7528\u4e8e\u9a8c\u8bc1<code>message</code>\u5c5e\u6027\u7684\u503c\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u5982\u679c\u8fd4\u56defalse\uff0c\u5c06\u4f1a\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u8b66\u544a\u3002</p> <p>\u4e0b\u9762\u5728vscode\u7206\u7ea2Type of the default value for 'taskFlowData' prop must be a function.</p> <pre><code> props: {\n    taskFlowData: {\n      type: Object,\n      default: {},\n      required: true\n    }\n  },\n</code></pre> <p>\u5728Vue.js\u4e2d\uff0c\u5f53\u4f7f\u7528\u5bf9\u8c61\u6216\u6570\u7ec4\u4f5c\u4e3a\u9ed8\u8ba4\u503c\u65f6\uff0c\u9700\u8981\u5c06\u9ed8\u8ba4\u503c\u8bbe\u4e3a\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4f7f\u7528\u5bf9\u8c61\u6216\u6570\u7ec4\u5b57\u9762\u91cf\u3002\u8fd9\u662f\u56e0\u4e3a\u5bf9\u8c61\u6216\u6570\u7ec4\u5728JavaScript\u4e2d\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u5982\u679c\u76f4\u63a5\u4f7f\u7528\u5bf9\u8c61\u6216\u6570\u7ec4\u5b57\u9762\u91cf\u4f5c\u4e3a\u9ed8\u8ba4\u503c\uff0c\u5c06\u4f1a\u5bfc\u81f4\u5b83\u4eec\u5728\u4e0d\u540c\u7ec4\u4ef6\u5b9e\u4f8b\u4e4b\u95f4\u5171\u4eab\uff0c\u53ef\u80fd\u4f1a\u9020\u6210\u6570\u636e\u6df7\u4e71\u3002</p> <p>\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u5c06<code>default</code>\u5c5e\u6027\u7684\u503c\u6539\u4e3a\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff1a</p> <pre><code>props: {\n  taskFlowData: {\n    type: Object,\n    default: function() {\n      return {};\n    },\n    required: true\n  }\n}\n</code></pre> <p>\u8fd9\u6837\u505a\u53ef\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u7ec4\u4ef6\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684<code>taskFlowData</code>\u5bf9\u8c61\u3002</p>"},{"location":"Vue/Vue2/%E7%BD%91%E9%A1%B5%E6%89%93%E5%8D%B0/","title":"\u7f51\u9875\u6253\u5370","text":""},{"location":"Vue/Vue2/%E7%BD%91%E9%A1%B5%E6%89%93%E5%8D%B0/#_2","title":"\u5c40\u90e8\u6253\u5370","text":""},{"location":"Vue/Vue2/%E7%BD%91%E9%A1%B5%E6%89%93%E5%8D%B0/#pdf","title":"\u4fdd\u5b58\u672apdf\u6587\u4ef6\u540d\u95ee\u9898","text":"<p>\u6587\u4ef6\u6839\u636e\u9875\u9762 <code>title</code> \u6807\u7b7e\u7684\u5185\u5bb9\u81ea\u52a8\u547d\u540d\uff0c\u5982\u679c\u6587\u4ef6\u540d\u6839\u636e\u5c40\u90e8\u5185\u5bb9\u663e\u793a\u7684\u8bdd\u66f2\u7ebf\u6551\u56fd\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u539f\u58f0\u6253\u5370\u7684\u56de\u8c03\u52a8\u6001\u4fee\u6539\u9875\u9762\u7684 <code>title</code> \u6807\u7b7e\u5185\u5bb9\uff0c\u5bfc\u51fa\u5b8c\u6bd5\u5728\u628a title \u6539\u56de\u53bb</p>"},{"location":"Vue/Vue3/01-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/","title":"\u521b\u5efa\u9879\u76ee","text":""},{"location":"Vue/Vue3/01-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/#vue-cli","title":"\u57fa\u4e8e vue-cli \u521b\u5efa","text":"<pre><code>vue create peoject_name\n</code></pre>"},{"location":"Vue/Vue3/01-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/#vite","title":"\u57fa\u4e8e vite \u521b\u5efa","text":"<p>\u53c2\u8003\uff1avitejs.cn</p> <p>\ud83d\udca1 \u6781\u901f\u7684\u670d\u52a1\u542f\u52a8 - \u4f7f\u7528\u539f\u751f ESM \u6587\u4ef6\uff0c\u65e0\u9700\u6253\u5305!</p> <p>\u26a1\ufe0f \u8f7b\u91cf\u5feb\u901f\u7684\u70ed\u91cd\u8f7d - \u65e0\u8bba\u5e94\u7528\u7a0b\u5e8f\u5927\u5c0f\u5982\u4f55\uff0c\u90fd\u59cb\u7ec8\u6781\u5feb\u7684\u6a21\u5757\u70ed\u91cd\u8f7d\uff08HMR\uff09</p> <p>\ud83d\udee0\ufe0f \u4e30\u5bcc\u7684\u529f\u80fd - \u5bf9 TypeScript\u3001JSX\u3001CSS \u7b49\u652f\u6301\u5f00\u7bb1\u5373\u7528\u3002</p> <p>\ud83d\udce6 \u4f18\u5316\u7684\u6784\u5efa - \u53ef\u9009 \u201c\u591a\u9875\u5e94\u7528\u201d \u6216 \u201c\u5e93\u201d \u6a21\u5f0f\u7684\u9884\u914d\u7f6e Rollup \u6784\u5efa</p> <p>\ud83d\udd29 \u901a\u7528\u7684\u63d2\u4ef6 - \u5728\u5f00\u53d1\u548c\u6784\u5efa\u4e4b\u95f4\u5171\u4eab Rollup-superset \u63d2\u4ef6\u63a5\u53e3\u3002</p> <p>\ud83d\udd11 \u5b8c\u5168\u7c7b\u578b\u5316\u7684API - \u7075\u6d3b\u7684 API \u548c\u5b8c\u6574 TypeScript \u7c7b\u578b\u3002</p> <p>\u5df2\u5b89\u88c5 18.0 \u6216\u66f4\u9ad8\u7248\u672c\u7684 Node.js</p> <pre><code>npm create vue@latest\n</code></pre> <p></p> <p>\u76ee\u5f55\u7ed3\u6784</p> <pre><code>vue3-vite-demo                     \n\u251c\u2500 public                          \n\u2502  \u2514\u2500 favicon.ico                  \n\u251c\u2500 src                             \n\u2502  \u251c\u2500 assets                       \n\u2502  \u2502  \u251c\u2500 base.css                  \n\u2502  \u2502  \u251c\u2500 logo.svg                  \n\u2502  \u2502  \u2514\u2500 main.css                  \n\u2502  \u251c\u2500 components                   \n\u2502  \u2502  \u251c\u2500 icons                     \n\u2502  \u2502  \u2502  \u251c\u2500 IconCommunity.vue      \n\u2502  \u2502  \u2502  \u251c\u2500 IconDocumentation.vue  \n\u2502  \u2502  \u2502  \u251c\u2500 IconEcosystem.vue      \n\u2502  \u2502  \u2502  \u251c\u2500 IconSupport.vue        \n\u2502  \u2502  \u2502  \u2514\u2500 IconTooling.vue        \n\u2502  \u2502  \u251c\u2500 HelloWorld.vue            \n\u2502  \u2502  \u251c\u2500 TheWelcome.vue            \n\u2502  \u2502  \u2514\u2500 WelcomeItem.vue           \n\u2502  \u251c\u2500 App.vue                      \n\u2502  \u2514\u2500 main.ts                      \n\u251c\u2500 README.md                       \n\u251c\u2500 env.d.ts                        \n\u251c\u2500 index.html                      \n\u251c\u2500 package.json                    \n\u251c\u2500 tsconfig.app.json               \n\u251c\u2500 tsconfig.json                   \n\u251c\u2500 tsconfig.node.json              \n\u2514\u2500 vite.config.ts                  \n</code></pre> <p>\u8fd9\u4e2a\u662f\u4ec0\u4e48\u610f\u601d <code>/// &lt;reference types=\"vite/client\" /&gt;</code> \uff1f</p> <p><code>/// &lt;reference types=\"vite/client\" /&gt;</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u5f15\u5165\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\u7684\u6307\u4ee4\uff0c\u901a\u5e38\u88ab\u653e\u7f6e\u5728TypeScript\u6587\u4ef6\u7684\u6700\u9876\u90e8\u3002</p> <p>\u5728Vue 3\u4e2d\uff0cVite\u662f\u4e00\u79cd\u73b0\u4ee3\u5316\u7684\u6784\u5efa\u5de5\u5177\uff0c\u5b83\u53ef\u4ee5\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u63d0\u4f9b\u5feb\u901f\u7684\u70ed\u91cd\u8f7d\u548c\u51b7\u91cd\u542f\u529f\u80fd\u3002\u5f53\u4f7f\u7528Vite\u6784\u5efaVue 3\u9879\u76ee\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528<code>/// &lt;reference types=\"vite/client\" /&gt;</code>\u6307\u4ee4\u6765\u5f15\u5165Vite\u76f8\u5173\u7684\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\u3002</p> <p>Vite\u7684\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u5b9a\u4e8eVite\u7684\u5168\u5c40\u7c7b\u578b\uff0c\u4f8b\u5982<code>import.meta</code>\u548c<code>import.meta.env</code>\u3002\u901a\u8fc7\u5f15\u5165\u8fd9\u4e9b\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\uff0c\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u7279\u5b9a\u4e8eVite\u7684\u5168\u5c40\u7c7b\u578b\uff0c\u5e76\u83b7\u5f97\u4ee3\u7801\u8865\u5168\u548c\u7c7b\u578b\u68c0\u67e5\u7684\u652f\u6301\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c<code>/// &lt;reference types=\"vite/client\" /&gt;</code>\u6307\u4ee4\u4f1a\u544a\u8bc9TypeScript\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u5f15\u5165Vite\u7684\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\uff0c\u4ee5\u4fbf\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u6b63\u786e\u5730\u5904\u7406Vite\u76f8\u5173\u7684\u7c7b\u578b\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u5728Vue 3\u9879\u76ee\u4e2d\u4f7f\u7528Vite\u63d0\u4f9b\u7684\u7279\u5b9a\u529f\u80fd\uff0c\u5e76\u4e14\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u83b7\u5f97\u7c7b\u578b\u5b89\u5168\u7684\u652f\u6301\u3002</p>"},{"location":"Vue/Vue3/02-%E9%87%8D%E5%86%99src/","title":"02-\u91cd\u5199src","text":"<p><code>scripte</code> \u63d0\u793a <code>Vue3</code> \u63a8\u8350 <code>ts</code> \u5199\uff0c\u52a0\u4e0a <code>lange=\"ts\"</code> \u5373\u53ef\uff0c\u867d\u7136\u5199\u4e86 <code>ts</code>\uff0c\u4f46\u662f\u91cc\u9762\u4e5f\u652f\u6301\u5199 <code>js</code> \u8bed\u6cd5</p>"},{"location":"Vue/Vuex/Vuex%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%AE%83%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/","title":"Vuex\u7684\u4f7f\u7528\u65b9\u6cd5\u53ca\u5b83\u7684\u4f18\u7f3a\u70b9","text":"<p>vuex\u662f\u4e00\u4e2a\u4e13\u95e8\u4e3avue.js\u8bbe\u8ba1\u7684\u96c6\u4e2d\u5f0f\u72b6\u6001\u7ba1\u7406\u67b6\u6784\u3002\u5b83\u91c7\u7528\u96c6\u4e2d\u5f0f\u5b58\u50a8\u7ba1\u7406\u5e94\u7528\u7684\u6240\u6709\u7ec4\u4ef6\u7684\u72b6\u6001\uff0c\u5e76\u4ee5\u76f8\u5e94\u7684\u89c4\u5219\u4fdd\u8bc1\u72b6\u6001\u4ee5\u4e00\u79cd\u53ef\u9884\u6d4b\u7684\u65b9\u5f0f\u53d1\u751f\u53d8\u5316\u3002\u3002</p> <p>\u7531\u4e8evuex\u4e2d\u7684state\u5b58\u653e\u7684\u6570\u636e\u5728\u9875\u9762\u5237\u65b0\u65f6\u4f1a\u4e22\u5931\uff0cvuex\u53ea\u80fd\u7528\u4e8e\u5355\u4e2a\u9875\u9762\u4e2d\u4e0d\u540c\u7ec4\u4ef6\uff08\u4f8b\u5982\u5144\u5f1f\u7ec4\u4ef6\uff09\u7684\u6570\u636e\u6d41\u901a</p> <p>\u4f7f\u7528\u573a\u666f\uff1avuex\u4e3b\u8981\u662f\u662f\u505a\u6570\u636e\u4ea4\u4e92\uff0c\u7236\u5b50\u7ec4\u4ef6\u4f20\u503c\u53ef\u4ee5\u5f88\u5bb9\u6613\u529e\u5230\uff0c\u4f46\u662f\u5144\u5f1f\u7ec4\u4ef6\u95f4\u4f20\u503c\uff08\u5144\u5f1f\u7ec4\u4ef6\u4e0b\u53c8\u6709\u7236\u5b50\u7ec4\u4ef6\uff09\uff0c\u6216\u8005\u5927\u578bspa\u5355\u9875\u9762\u6846\u67b6\u9879\u76ee\uff0c\u9875\u9762\u591a\u5e76\u4e14\u4e00\u5c42\u5d4c\u5957\u4e00\u5c42\u7684\u4f20\u503c\uff0c\u5f02\u5e38\u9ebb\u70e6\uff0c\u7528vuex\u6765\u7ef4\u62a4\u5171\u6709\u7684\u72b6\u6001\u6216\u6570\u636e\u4f1a\u66f4\u4fbf\u6377</p>"},{"location":"Vue/Vuex/Vuex%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%AE%83%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/#vuex_1","title":"Vuex \u7684\u4f7f\u7528\u65b9\u6cd5\uff1a","text":"<ol> <li> <p>\u5b89\u88c5 Vuex    \u5982\u679c\u4f60\u4f7f\u7528 npm \u6216 yarn\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 Vuex\uff1a    <pre><code>npm install vuex --save\n# \u6216\u8005\nyarn add vuex\n</code></pre></p> </li> <li> <p>\u521b\u5efa Store    \u521b\u5efa\u4e00\u4e2a <code>store.js</code> \u6587\u4ef6\uff0c\u5e76\u5f15\u5165 Vuex\uff0c\u5e76\u8c03\u7528 <code>Vue.use(Vuex)</code> \u6765\u542f\u52a8 Vuex\uff1a    <pre><code>import Vue from 'vue';\nimport Vuex from 'vuex';\n\nVue.use(Vuex);\n\nconst store = new Vuex.Store({\n  state: {\n    // \u5b9a\u4e49\u72b6\u6001\n  },\n  mutations: {\n    // \u5b9a\u4e49\u6539\u53d8\u72b6\u6001\u7684\u65b9\u6cd5\n  },\n  actions: {\n    // \u5b9a\u4e49\u54cd\u5e94\u52a8\u4f5c\u7684\u65b9\u6cd5\n  },\n  getters: {\n    // \u5b9a\u4e49\u83b7\u53d6\u72b6\u6001\u4fe1\u606f\u7684\u65b9\u6cd5\n  },\n  modules: {\n    // \u5b9a\u4e49\u6a21\u5757\n  }\n});\n\nexport default store;\n</code></pre></p> </li> <li> <p>\u5f15\u5165 Store    \u5728\u4f60\u7684\u4e3b Vue \u5b9e\u4f8b\u4e2d\u5f15\u5165 store\uff1a    <pre><code>import Vue from 'vue';\nimport App from './App.vue';\nimport store from './store';\n\nnew Vue({\n  el: '#app',\n  store,\n  render: h =&gt; h(App)\n});\n</code></pre></p> </li> <li> <p>\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528    \u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u901a\u8fc7 <code>this.$store</code> \u8bbf\u95ee Vuex Store\uff1a    <pre><code>computed: {\n  count() {\n    return this.$store.state.count;\n  }\n},\nmethods: {\n  increment() {\n    this.$store.commit('increment');\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"Vue/Vuex/Vuex%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%AE%83%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/#vuex_2","title":"Vuex \u7684\u4f18\u70b9\uff1a","text":"<ul> <li>\u96c6\u4e2d\u5f0f\u7ba1\u7406\uff1aVuex \u5141\u8bb8\u5c06\u5e94\u7528\u7684\u72b6\u6001\u96c6\u4e2d\u5230\u4e00\u4e2a\u5730\u65b9\u7ba1\u7406\uff0c\u65b9\u4fbf\u8ddf\u8e2a\u548c\u8c03\u8bd5\u3002</li> <li>\u53ef\u9884\u6d4b\u6027\uff1a\u901a\u8fc7\u89c4\u8303\u7684\u65b9\u5f0f\u6539\u53d8\u72b6\u6001\uff08mutations\uff09\uff0c\u72b6\u6001\u7684\u53d8\u5316\u53ef\u9884\u6d4b\u4e14\u53ef\u8ffd\u6eaf\u3002</li> <li>\u63d2\u4ef6\uff1aVuex \u5141\u8bb8\u901a\u8fc7\u63d2\u4ef6\u6269\u5c55\uff0c\u4f8b\u5982\u5f00\u53d1\u5de5\u5177\u652f\u6301\u3001\u65e5\u5fd7\u8bb0\u5f55\u7b49\u3002</li> <li>\u7ec4\u4ef6\u89e3\u8026\uff1a\u7ec4\u4ef6\u4e0d\u9700\u8981\u901a\u8fc7 props \u4e00\u5c42\u5c42\u4f20\u9012\u72b6\u6001\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ece Vuex \u83b7\u53d6\u3002</li> </ul>"},{"location":"Vue/Vuex/Vuex%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%AE%83%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9/#vuex_3","title":"Vuex \u7684\u7f3a\u70b9\uff1a","text":"<ul> <li>\u5b66\u4e60\u66f2\u7ebf\uff1a\u5bf9\u4e8e\u5c0f\u9879\u76ee\u6216\u521d\u5b66\u8005\u6765\u8bf4\uff0cVuex \u7684\u6982\u5ff5\u548c\u5f15\u5165\u7684\u590d\u6742\u6027\u53ef\u80fd\u662f\u4e00\u4e2a\u5b66\u4e60\u8d1f\u62c5\u3002</li> <li>\u8fc7\u5ea6\u4f7f\u7528\uff1a\u5728\u5c0f\u578b\u9879\u76ee\u6216\u7b80\u5355\u7684\u72b6\u6001\u7ba1\u7406\u573a\u666f\u4e2d\u4f7f\u7528 Vuex \u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u590d\u6742\u6027\u548c\u5f00\u9500\u3002</li> <li>\u4ec5\u9650\u4e8e Vue\uff1aVuex \u4ec5\u80fd\u5728 Vue.js \u4e2d\u4f7f\u7528\uff0c\u6709\u4e00\u5b9a\u7684\u5c40\u9650\u6027\u3002</li> </ul> <p>\u603b\u800c\u8a00\u4e4b\uff0cVuex \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u72b6\u6001\u7ba1\u7406\u5de5\u5177\uff0c\u9002\u7528\u4e8e\u5927\u578b\u6216\u4e2d\u578b\u7684 Vue.js \u5e94\u7528\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7ec4\u7ec7\u548c\u7ba1\u7406\u5e94\u7528\u72b6\u6001\u3002\u5bf9\u4e8e\u5c0f\u578b\u9879\u76ee\uff0c\u53ef\u80fd\u9700\u8981\u8bc4\u4f30\u5176\u5e26\u6765\u7684\u6536\u76ca\u662f\u5426\u8db3\u591f\u5f25\u8865\u5b83\u5e26\u6765\u7684\u989d\u5916\u590d\u6742\u6027\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/","title":"\u8bf4\u660e","text":"<p>\u8bb0\u5f55\u4e00\u4e9b\u597d\u7528\u7684\u5de5\u5177\u3001\u8f6f\u4ef6\u3001\u7f51\u7ad9\u3001\u8d44\u6e90\u3001\u535a\u5ba2\u3001\u6559\u7a0b\u3001\u63d2\u4ef6\u3001\u6846\u67b6\u3001\u6a21\u677f\u3001\u6e90\u7801\u3001\u5de5\u5177\u7b49\u7b49</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/#_2","title":"\u5f00\u6e90\u5de5\u5177","text":"<ul> <li><code>nfc</code> \u8bfb\u5199\u5de5\u5177 MifareClassicTool</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E6%9C%AC%E5%9C%B0%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6/","title":"Mac\u672c\u5730\u968f\u673a\u751f\u6210\u6587\u4ef6","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E6%9C%AC%E5%9C%B0%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6/#mac_1","title":"mac\u672c\u5730\u968f\u673a\u751f\u6210\u6587\u672c\u6587\u4ef6","text":"<p>\u8981\u5728Mac\u672c\u5730\u968f\u673a\u751f\u6210\u6587\u672c\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7ec8\u7aef\u4e0a\u7684\u547d\u4ee4\u884c\u5de5\u5177\u3002\u4e0b\u9762\u662f\u4e00\u79cd\u65b9\u6cd5\uff1a</p> <ol> <li>\u6253\u5f00\u201c\u7ec8\u7aef\u201d\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u5728\u7ec8\u7aef\u7a97\u53e3\u4e2d\uff0c\u5bfc\u822a\u5230\u4f60\u60f3\u8981\u4fdd\u5b58\u6587\u672c\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u60f3\u8981\u5728\u684c\u9762\u4e0a\u521b\u5efa\u6587\u672c\u6587\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a<code>cd ~/Desktop</code>\u3002</li> <li>\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u4e00\u4e2a\u968f\u673a\u6587\u672c\u6587\u4ef6\uff1a</li> </ol> <pre><code>cat /dev/urandom | LC_ALL=C tr -dc 'a-zA-Z0-9' | fold -w 1000 | head -n 100 &gt; random.txt\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u5c06\u751f\u6210\u4e00\u4e2a100\u884c\u3001\u6bcf\u884c\u5305\u542b1000\u4e2a\u968f\u673a\u5b57\u6bcd\u548c\u6570\u5b57\u7684\u6587\u672c\u6587\u4ef6\u3002\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8c03\u6574\u884c\u6570\u548c\u6bcf\u884c\u7684\u5b57\u7b26\u6570\u3002 4. \u6309Enter\u952e\u8fd0\u884c\u547d\u4ee4\u3002\u5728\u4f60\u9009\u62e9\u7684\u76ee\u5f55\u4e0b\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u540d\u4e3a\u201crandom.txt\u201d\u7684\u6587\u672c\u6587\u4ef6\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u751f\u6210\u7684\u6587\u672c\u6587\u4ef6\u53ea\u5305\u542b\u968f\u673a\u7684\u5b57\u6bcd\u548c\u6570\u5b57\uff0c\u6ca1\u6709\u610f\u4e49\u3002\u5982\u679c\u4f60\u9700\u8981\u751f\u6210\u6709\u610f\u4e49\u7684\u6587\u672c\uff0c\u8bf7\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u6216\u5de5\u5177\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E6%9C%AC%E5%9C%B0%E9%9A%8F%E6%9C%BA%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6/#50","title":"\u968f\u673a\u751f\u621050\u4e2a\u6587\u4ef6","text":"<pre><code>#!/bin/bash\nfor i in {1..50}\ndo\n    cat /dev/urandom | LC_ALL=C tr -dc 'a-zA-Z0-9' | fold -w 1000 | head -n 100 &gt; \"file$i.txt\"\ndone\n</code></pre> <p>\u8fd9\u5c06\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u751f\u621050\u4e2a\u6587\u672c\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u5c06\u4ee5<code>file</code>\u5f00\u5934\uff0c\u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u6570\u5b57\uff081\u523050\uff09\uff0c\u4ee5<code>.txt</code>\u7ed3\u5c3e\u3002\u6bcf\u4e2a\u6587\u4ef6\u5305\u542b100\u884c\uff0c\u6bcf\u884c\u5305\u542b1000\u4e2a\u968f\u673a\u5b57\u6bcd\u548c\u6570\u5b57\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B8%8D%E7%94%9F%E6%95%88/","title":"Mac\u7ec8\u7aef\u547d\u4ee4\u4e0d\u751f\u6548","text":"<p>\u56e0\u4e3a\u8bbe\u7f6e python \u73af\u5883\u7b49\u95ee\u9898\uff0c\u5bfc\u81f4\u7535\u8111\u7ec8\u7aef\u4e0a\u6240\u6709\u547d\u4ee4\u90fd\u4e0d\u53ef\u7528\u4e86\uff0c\u6bd4\u5982 ls\u3001git .....</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B8%8D%E7%94%9F%E6%95%88/#1","title":"\u65b9\u6cd51","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u9700\u8981\u91cd\u7f6e\u4f60\u7684 <code>PATH</code> \u73af\u5883\u53d8\u91cf\uff0c\u81f3\u5c11\u8981\u5305\u542b <code>/usr/bin</code> \u548c <code>/bin</code>\uff0c\u8fd9\u4e9b\u76ee\u5f55\u4e2d\u5305\u542b\u4e86\u4e0a\u8ff0\u547d\u4ee4\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3002\u4e0b\u9762\u662f\u89e3\u51b3\u6b65\u9aa4\uff1a</p> <ol> <li>\u4e34\u65f6\u4fee\u590d <code>PATH</code>\uff1a</li> </ol> <pre><code>export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:$PATH\n</code></pre> <p>\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u540e\uff0c\u5c1d\u8bd5\u518d\u6b21\u8fd0\u884c\u4e00\u4e9b\u57fa\u7840\u547d\u4ee4\uff0c\u6bd4\u5982 <code>ls</code> \u6216 <code>mkdir</code>\uff0c\u770b\u662f\u5426\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002</p> <ol> <li>\u5982\u679c\u4e34\u65f6\u4fee\u590d\u6709\u6548\uff0c\u4f60\u9700\u8981\u5728\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u6c38\u4e45\u8bbe\u7f6e\u8fd9\u4e2a <code>PATH</code>\u3002\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u4f60\u7684 <code>.zshrc</code> \u6587\u4ef6\uff1a</li> </ol> <pre><code>nano ~/.zshrc\n</code></pre> <p>\u7136\u540e\u5728\u6587\u4ef6\u4e2d\u6dfb\u52a0\u6216\u4fee\u6539 <code>export PATH=...</code> \u8fd9\u4e00\u884c\uff0c\u786e\u4fdd\u5305\u542b\u4e0a\u8ff0\u8def\u5f84\u3002</p> <ol> <li> <p>\u5982\u679c\u4f60\u65e0\u6cd5\u4f7f\u7528\u7ec8\u7aef\u7f16\u8f91\u6587\u4ef6\uff08\u56e0\u4e3a\u57fa\u672c\u547d\u4ee4\u65e0\u6548\uff09\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u56fe\u5f62\u754c\u9762\u7684\u6587\u672c\u7f16\u8f91\u5668\u6765\u7f16\u8f91\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p> </li> <li> <p>\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4f7f\u66f4\u6539\u751f\u6548\uff1a</p> </li> </ol> <pre><code>source ~/.zshrc\n</code></pre> <p>\u6216\u8005\u5173\u95ed\u5e76\u91cd\u65b0\u6253\u5f00\u7ec8\u7aef\u7a97\u53e3\u3002</p> <ol> <li>\u786e\u8ba4 <code>PATH</code> \u5df2\u7ecf\u88ab\u6b63\u786e\u8bbe\u7f6e\uff1a</li> </ol> <pre><code>echo $PATH\n</code></pre> <p>\u770b\u770b\u8f93\u51fa\u662f\u5426\u5305\u542b\u4e86 <code>/usr/local/bin</code>\u3001<code>/usr/bin</code>\u3001<code>/bin</code>\u3001<code>/usr/sbin</code> \u548c <code>/sbin</code>\u3002</p> <ol> <li>\u6700\u540e\uff0c\u518d\u6b21\u5c1d\u8bd5\u6267\u884c <code>exec /bin/zsh</code>\uff0c\u770b\u770b\u662f\u5426\u8fd8\u6709\u9519\u8bef\u53d1\u751f\u3002</li> </ol>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B8%8D%E7%94%9F%E6%95%88/#2","title":"\u65b9\u6cd52","text":"<ol> <li>\u9996\u5148\u8f93\u5165\u547d\u4ee4\uff0c\u8ba9\u6682\u65f6\u53ef\u4ee5\u4f7f\u7528</li> </ol> <p>\u8f93\u5165\u4e0b\u9762\u547d\u4ee4\u56de\u8f66, \u5c31\u6682\u65f6\u53ef\u4ee5\u5728\u5f53\u524d\u7ec8\u7aef\u4e0b\u4f7f\u7528\u547d\u4ee4\u4e86</p> <pre><code>export PATH=/usr/bin:/usr/sbin:/bin:/sbin:/usr/X11R6/bin\n</code></pre> <p>\u6216\u8005</p> <pre><code>PATH=/bin:/usr/bin:/usr/local/bin:${PATH}\n</code></pre> <ol> <li>\u7136\u540e\u6253\u5f00  <code>.bash_profile</code> \u6587\u4ef6</li> </ol> <pre><code>open .bash_profile\n</code></pre> <ol> <li>\u52a0\u5165path\uff08\u6e05\u9664\u5168\u90e8\uff0c\u4ec5\u7559\u4e0b\u5217\u4ee3\u7801\u3002\u6ce8\uff1a\u590d\u5236\u5b8c\u6574\uff09</li> </ol> <pre><code>export PATH=\"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:${JAVA_HOME}:${JAVA_HOME}/bin\"\n</code></pre> <ol> <li>\u91cd\u542fprofile</li> </ol> <pre><code>source ~/.bash_profile\n</code></pre> <ol> <li>\u9000\u51faterminal\uff08\u7ec8\u7aef\uff09, \u91cd\u65b0\u6253\u5f00\uff0c\u5c1d\u8bd5\u8f93\u5165\u6307\u4ee4\uff0c\u662f\u5426\u6210\u529f</li> </ol>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B8%8D%E7%94%9F%E6%95%88/#_1","title":"\u5176\u4ed6\u95ee\u9898","text":"<ol> <li>vscode \u5de6\u4fa7 git \u63d0\u793a\u672a\u5b89\u88c5</li> </ol> <p>\u901a\u8fc7vscode\u8bbe\u7f6e\u627e\u5230 git.path \u8fdb\u884c\u8bbe\u7f6e</p> <pre><code>\"git.path\": \"/usr/bin/git\"\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/Mac%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E4%B8%8D%E7%94%9F%E6%95%88/#_2","title":"\u5176\u4ed6\u77e5\u8bc6\u70b9","text":"<ul> <li>\u65b0\u5efa\u6587\u4ef6\u547d\u4ee4</li> </ul> <pre><code>touch newfile.txt\n</code></pre> <ul> <li>\u6253\u5f00\u6587\u4ef6\u547d\u4ee4</li> </ul> <pre><code>open .bash_profile\n</code></pre> <ul> <li>\u7528\u6237\u6587\u4ef6\u5939\u8def\u5f84\u67e5\u770b</li> </ul> <pre><code>pwd\n# \u6211\u7684\u7a0b\u5e8f\u8fd4\u56de\u4e86\u5982\u4e0b\u6307\u4ee4\n/Users/wangyongjie\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/iCloud%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA/","title":"iCloud\u6570\u636e\u5bfc\u51fa","text":"<p>privacy.apple.com \u662f\u82f9\u679c\u516c\u53f8\u7684\u4e00\u4e2a\u7f51\u7ad9\uff0c\u7528\u4e8e\u5411\u7528\u6237\u63d0\u4f9b\u5173\u4e8e\u9690\u79c1\u548c\u6570\u636e\u4fdd\u62a4\u7684\u4fe1\u606f\u3002\u8be5\u7f51\u7ad9\u5217\u51fa\u4e86\u82f9\u679c\u516c\u53f8\u7684\u9690\u79c1\u653f\u7b56\u548c\u6570\u636e\u4fdd\u62a4\u63aa\u65bd\uff0c\u89e3\u91ca\u4e86\u82f9\u679c\u5982\u4f55\u6536\u96c6\u3001\u4f7f\u7528\u548c\u4fdd\u62a4\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\u7528\u6237\u53ef\u4ee5\u5728\u8be5\u7f51\u7ad9\u4e86\u89e3\u82f9\u679c\u516c\u53f8\u7684\u6570\u636e\u5b89\u5168\u63aa\u65bd\uff0c\u4ee5\u53ca\u5982\u4f55\u7ba1\u7406\u81ea\u5df1\u7684\u9690\u79c1\u8bbe\u7f6e\u3001\u8bbf\u95ee\u81ea\u5df1\u7684\u4e2a\u4eba\u6570\u636e\u4ee5\u53ca\u8bf7\u6c42\u5220\u9664\u4e2a\u4eba\u6570\u636e\u7b49\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Apple/%E8%BF%9E%E6%8E%A5%E7%94%B5%E8%84%91%E5%BC%B9%E7%AA%97%E9%97%AE%E9%A2%98/","title":"iPhone \u8fde\u63a5\u7535\u8111\u9891\u7e41\u51fa\u73b0\u5f39\u7a97\u95ee\u9898","text":"<pre><code>sudo killall -STOP -c usbd\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/ChatGPT/chatgpt-ui/","title":"chatgpt-ui","text":"<p>\u5f00\u6e90\u5730\u5740\uff1ahttps://github.com/WongSaang/chatgpt-ui</p> <ul> <li>English</li> <li>\u4e2d\u6587</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/ChatGPT/chatgpt-ui/#_1","title":"\u672c\u5730\u8c03\u8bd5","text":"<p>\u65b0\u5efa <code>.env</code></p> <pre><code># \u540e\u7aef\u5730\u5740\nSERVER_DOMAIN='https://localhost:8081'\n# \u9875\u9762\u6807\u9898\nNUXT_PUBLIC_APP_NAME=\"test\"\n</code></pre> <p>\u589e\u52a0 <code>changeOrigin: true</code> \u53c2\u6570\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u8de8\u57df\u7b49\u95ee\u9898</p> <pre><code>import { createProxyMiddleware } from 'http-proxy-middleware'\nexport default defineEventHandler(async (event) =&gt; {\n    await new Promise((resolve, reject) =&gt; {\n        createProxyMiddleware({\n            target: process.env.SERVER_DOMAIN,\n            pathFilter: '/api',\n            changeOrigin: true\n        })(event.node.req, event.node.res, (err) =&gt; {\n            if (err)\n                reject(err)\n            else\n                resolve(true)\n        })\n    })\n})\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/ChatGPT/chatgpt-ui/#_2","title":"\u5176\u4ed6","text":"<ul> <li>nuxt3\u4f7f\u7528vconsole\u7684\u6b63\u786e\u59ff\u52bf </li> <li>\u522b\u518d\u7528\u4e0d\u89c4\u8303\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u8f6f\u952e\u76d8\u906e\u6321\u8f93\u5165\u6846\u95ee\u9898\u4e86</li> <li>h5\u952e\u76d8\u5f39\u8d77\u906e\u6321\u8f93\u5165\u6846\u7684\u5904\u7406</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Git/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"\u5e38\u7528\u547d\u4ee4","text":"<p>Git \u662f\u4e00\u4e2a\u5e38\u7528\u7684\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u5bf9\u4e8e\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u719f\u7ec3\u638c\u63e1 Git \u547d\u4ee4\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b Git \u5e38\u7528\u547d\u4ee4\u7684\u603b\u7ed3\u548c\u8be6\u7ec6\u63cf\u8ff0\uff1a</p> <ol> <li> <p><code>git init</code> - \u521d\u59cb\u5316\u672c\u5730\u4ed3\u5e93\u3002\u5728\u5f53\u524d\u76ee\u5f55\u65b0\u5efa\u4e00\u4e2a Git \u4ee3\u7801\u5e93\uff0c\u751f\u6210 <code>.git</code> \u6587\u4ef6\u5939\uff0c\u91cc\u9762\u5305\u542b\u4e86\u5fc5\u9700\u7684\u4ed3\u5e93\u6587\u4ef6\u3002</p> </li> <li> <p><code>git clone &lt;repo&gt;</code> - \u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93\u3002\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5185\u5bb9\u514b\u9686\u5230\u672c\u5730\uff0c<code>&lt;repo&gt;</code> \u662f\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740\u3002</p> </li> <li> <p><code>git add &lt;file&gt;</code> - \u6dfb\u52a0\u6587\u4ef6\u5230\u6682\u5b58\u533a\u3002\u5c06\u5de5\u4f5c\u533a\u7684\u6587\u4ef6\u6539\u52a8\u6dfb\u52a0\u5230\u6682\u5b58\u533a\uff0c<code>&lt;file&gt;</code>\u53ef\u4ee5\u662f\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u662f<code>.</code>\u4ee3\u8868\u6dfb\u52a0\u6240\u6709\u6587\u4ef6\u53d8\u66f4\u3002</p> </li> <li> <p><code>git status</code> - \u67e5\u770b\u4ed3\u5e93\u5f53\u524d\u72b6\u6001\u3002\u663e\u793a\u6709\u53d8\u66f4\u7684\u6587\u4ef6\u548c\u6682\u5b58\u533a\u72b6\u6001\u3002</p> </li> <li> <p><code>git diff</code> - \u67e5\u770b\u6587\u4ef6\u53d8\u66f4\u5185\u5bb9\u3002\u6bd4\u8f83\u6587\u4ef6\u7684\u4e0d\u540c\uff0c\u5373\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02\u3002</p> </li> <li> <p><code>git commit -m \"&lt;message&gt;\"</code> - \u63d0\u4ea4\u66f4\u65b0\u3002\u5c06\u6682\u5b58\u533a\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u4ed3\u5e93\u4e2d\uff0c<code>&lt;message&gt;</code>\u662f\u672c\u6b21\u63d0\u4ea4\u7684\u8bf4\u660e\u3002</p> </li> <li> <p><code>git push &lt;remote&gt; &lt;branch&gt;</code> - \u63a8\u9001\u6570\u636e\u5230\u8fdc\u7a0b\u4ed3\u5e93\u3002\u5c06\u672c\u5730\u7684\u5206\u652f\u7248\u672c\u4e0a\u4f20\u5230\u8fdc\u7a0b\u5e76\u5408\u5e76\uff0c<code>&lt;remote&gt;</code>\u662f\u8fdc\u7a0b\u4ed3\u5e93\u540d\uff0c<code>&lt;branch&gt;</code>\u662f\u5206\u652f\u540d\u3002</p> </li> <li> <p><code>git pull &lt;remote&gt; &lt;branch&gt;</code> - \u4ece\u8fdc\u7a0b\u83b7\u53d6\u4ee3\u7801\u5e76\u5408\u5e76\u3002\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u7684\u6307\u5b9a\u5206\u652f\u62c9\u53d6\u6700\u65b0\u5185\u5bb9\u5e76\u4e0e\u672c\u5730\u6307\u5b9a\u5206\u652f\u5408\u5e76\u3002</p> </li> <li> <p><code>git branch</code> - \u5217\u51fa\u672c\u5730\u6240\u6709\u5206\u652f\u3002\u4e0d\u5e26\u53c2\u6570\u65f6\u5217\u51fa\u672c\u5730\u5206\u652f\uff0c\u52a0\u4e0a <code>-a</code> \u53c2\u6570\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u5206\u652f\uff08\u5305\u62ec\u8fdc\u7a0b\uff09\u3002</p> </li> <li> <p><code>git branch &lt;branch_name&gt;</code> - \u521b\u5efa\u65b0\u5206\u652f\u3002<code>&lt;branch_name&gt;</code> \u662f\u65b0\u5efa\u7684\u5206\u652f\u540d\u79f0\u3002</p> </li> <li> <p><code>git checkout &lt;branch&gt;</code> - \u5207\u6362\u5206\u652f\u3002\u5207\u6362\u5230\u6307\u5b9a\u5206\u652f\u5e76\u66f4\u65b0\u5de5\u4f5c\u533a\uff0c<code>&lt;branch&gt;</code> \u662f\u76ee\u6807\u5206\u652f\u540d\u3002</p> </li> <li> <p><code>git merge &lt;branch&gt;</code> - \u5408\u5e76\u5206\u652f\u3002\u5c06\u6307\u5b9a\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u3002</p> </li> <li> <p><code>git log</code> - \u67e5\u770b\u63d0\u4ea4\u5386\u53f2\u3002\u67e5\u770b\u5f53\u524d\u5206\u652f\u7684\u7248\u672c\u5386\u53f2\u3002</p> </li> <li> <p><code>git fetch &lt;remote&gt;</code> - \u4ece\u8fdc\u7a0b\u83b7\u53d6\u6700\u65b0\u7248\u672c\u5230\u672c\u5730\uff0c\u4e0d\u4f1a\u81ea\u52a8\u5408\u5e76\u3002</p> </li> <li> <p><code>git reset --hard &lt;commit&gt;</code> - \u56de\u6eda\u5230\u6307\u5b9acommit\u3002\u5c06HEAD\u6307\u5411\u6307\u5b9acommit\uff0c\u540c\u65f6\u66f4\u65b0\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u3002</p> </li> <li> <p><code>git stash</code> - \u6682\u5b58\u5f53\u524d\u4fee\u6539\uff0c\u5c06\u5de5\u4f5c\u533a\u7684\u6539\u52a8\u4fdd\u5b58\u8d77\u6765\uff0c\u53ef\u4ee5\u5728\u5176\u4ed6\u5206\u652f\u4e0a\u4f7f\u7528\u3002</p> </li> <li> <p><code>git tag &lt;tag_name&gt;</code> - \u6253\u6807\u7b7e\u3002\u7528\u4e8e\u6807\u8bb0\u53d1\u5e03\u7248\u672c\u53f7\u3002</p> </li> </ol> <p>\u8bf7\u6ce8\u610f\uff0c\u4e0a\u8ff0\u547d\u4ee4\u7684\u4f7f\u7528\u53ef\u80fd\u4f1a\u6839\u636e\u5177\u4f53\u60c5\u51b5\u6709\u6240\u53d8\u5316\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u5de5\u4f5c\u573a\u666f\u7075\u6d3b\u8fd0\u7528\u3002\u6b64\u5916\uff0cGit \u8fd8\u6709\u5f88\u591a\u9ad8\u7ea7\u529f\u80fd\u548c\u547d\u4ee4\uff0c\u9700\u8981\u5728\u5b9e\u9645\u5de5\u4f5c\u4e2d\u6839\u636e\u9700\u8981\u5b66\u4e60\u548c\u638c\u63e1\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Git/%E6%92%A4%E9%94%80commit%E6%93%8D%E4%BD%9C/","title":"\u64a4\u9500commit\u64cd\u4f5c","text":"<p>\u5728\u6211\u4eec\u4f7f\u7528git\u4f5c\u4e3a\u7248\u672c\u63a7\u5236\u5de5\u5177\u8fdb\u884c\u4ee3\u7801\u7ba1\u7406\u4e4b\u540e\uff0c\u7ecf\u5e38\u6027\u7684\u4f1a\u78b0\u5230\u4e00\u4e2a\u95ee\u9898\uff1a<code>git commit</code>\u540e\uff0c\u5982\u4f55\u64a4\u9500commit\uff0c\u4e0b\u9762\u8be6\u7ec6\u8bb2\u4e00\u4e0b\u3002</p> <p>git add newFiles</p> <p>git commit -m '\u65b0\u589exx\u9875\u9762'</p> <p>\u6267\u884ccommit\u540e\uff0c\u8fd8\u6ca1\u6267\u884cpush\u65f6\uff0c\u60f3\u8981\u64a4\u9500\u8fd9\u6b21\u7684commit\uff0c\u8be5\u600e\u4e48\u529e\uff1f</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\uff1a<code>git reset --soft HEAD^</code> \u8fd9\u6837\u5c31\u6210\u529f\u64a4\u9500\u4e86commit\u3002</p> <p>\u4f7f\u7528<code>git reset --hard HEAD^</code> \u8fd9\u6837\u8fdeadd\u4e5f\u64a4\u9500\u4e86\u3002</p> <p>*\u6ce8\uff1areset \u547d\u4ee4\u53ea\u80fd\u56de\u6eda\u6700\u65b0\u7684\u63d0\u4ea4\uff0c\u65e0\u6cd5\u6ee1\u8db3\u4fdd\u7559\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u53ea\u56de\u6eda\u4e4b\u524d\u7684\u67d0\u6b21\u63d0\u4ea4\u3002 </p> <p>\u547d\u4ee4\u89e3\u91ca\uff1a</p> <p>HEAD^\u8868\u793a\u4e0a\u4e00\u4e2a\u7248\u672c\uff0c\u5373\u4e0a\u4e00\u6b21\u7684<code>commit</code>\uff0c\u51e0\u4e2a^\u4ee3\u8868\u51e0\u6b21\u63d0\u4ea4\uff0c\u5982\u679c\u56de\u6eda\u4e24\u6b21\u5c31\u662fHEAD^^\u3002\u4e5f\u53ef\u4ee5\u5199\u6210HEAD\uff5e1\uff0c\u5982\u679c\u8fdb\u884c\u4e24\u6b21\u7684commit,\u60f3\u8981\u90fd\u64a4\u56de\uff0c\u53ef\u4ee5\u4f7f\u7528HEAD\uff5e2</p> <p>--soft \u4e0d\u5220\u9664\u5de5\u4f5c\u7a7a\u95f4\u7684\u6539\u52a8\u4ee3\u7801\uff0c\u64a4\u9500commit\uff0c\u4e0d\u64a4\u9500add</p> <p>--hard \u5220\u9664\u5de5\u4f5c\u7a7a\u95f4\u7684\u4ee3\u7801\uff0c\u64a4\u9500commit\u4e14\u64a4\u9500add</p> <p>\u90a3\u63d0\u4ea4\u5230\u4e86\u8fdc\u7a0b\u4ed3\u5e93\u540e\u60f3\u56de\u9000\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4</p> <p>1.\u672c\u5730\u56de\u9000\uff0c\u56de\u9000\u5230\u4e0a\u6b21\u63d0\u4ea4</p> <p>git reset --hard HEAD^</p> <p>2.\u8fdc\u7a0b\u56de\u9000\uff0c\u7136\u540e\u5f3a\u5236\u63a8\u9001\u5f53\u524d\u7248\u672c\u5230\u4e91\u7aef</p> <p>git push origin HEAD --force</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Git/%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%85%B3%E8%81%94%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/","title":"\u672c\u5730\u4ed3\u5e93\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93","text":"<pre><code>git remote add origin https://github.com/xiaodongxier/vue3-vite-demo.git\ngit add .\ngit commit -m \"first commit\"\ngit push -u origin main\n</code></pre> <pre><code>echo \"# vue3-vite-demo\" &gt;&gt; README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit branch -M main\ngit remote add origin https://github.com/xiaodongxier/vue3-vite-demo.git\ngit push -u origin main\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Git/%E9%9D%9E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"\u975e\u5e38\u7528\u547d\u4ee4","text":"<p>\u5728\u4f7f\u7528 Git \u8fc7\u7a0b\u4e2d\uff0c\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u6267\u884c\u4e00\u4e9b\u5f3a\u5236\u6027\u7684\u64cd\u4f5c\uff0c\u4ee5\u786e\u4fdd\u672c\u5730\u7684\u66f4\u6539\u80fd\u591f\u6309\u7167\u7279\u5b9a\u7684\u65b9\u5f0f\u540c\u6b65\u5230\u8fdc\u7a0b\u4ed3\u5e93\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5f3a\u5236\u6027\u8d28\u7684 Git \u64cd\u4f5c\uff1a</p> <ol> <li> <p>\u5f3a\u5236\u8986\u76d6\u672c\u5730\u4fee\u6539\uff1a    <pre><code>git reset --hard &lt;commit&gt;\n</code></pre>    \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06\u5f53\u524d\u5206\u652f\u7684HEAD\u6307\u5411\u6307\u5b9a\u7684commit\uff0c\u5e76\u91cd\u7f6e\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\uff0c\u4f7f\u5176\u4e0e\u8be5commit\u4e00\u81f4\uff0c\u4ece\u800c\u8986\u76d6\u672c\u5730\u6240\u6709\u66f4\u6539\u3002</p> </li> <li> <p>\u5f3a\u5236\u5220\u9664\u5206\u652f\uff1a</p> </li> <li> <p>\u5220\u9664\u672c\u5730\u5206\u652f\uff1a      <pre><code>git branch -D &lt;branch_name&gt;\n</code></pre> <code>-D</code>\u9009\u9879\u662f\u5f3a\u5236\u5220\u9664\u7684\u610f\u601d\uff0c\u5373\u4f7f\u5206\u652f\u6ca1\u6709\u5408\u5e76\u5230\u4e3b\u5206\u652f\uff0c\u4e5f\u4f1a\u88ab\u5220\u9664\u3002</p> </li> <li> <p>\u5220\u9664\u8fdc\u7a0b\u5206\u652f\uff1a      <pre><code>git push &lt;remote_name&gt; --delete &lt;branch_name&gt;\n</code></pre>      \u6216\u8005      <pre><code>git push &lt;remote_name&gt; :&lt;branch_name&gt;\n</code></pre>      \u8fd9\u4e9b\u547d\u4ee4\u4f1a\u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5206\u652f\u3002</p> </li> <li> <p>\u5f3a\u5236\u63a8\u9001\uff1a    <pre><code>git push &lt;remote_name&gt; &lt;branch_name&gt; --force\n</code></pre>    \u6216\u8005\u7b80\u5199\u4e3a\uff1a    <pre><code>git push &lt;remote_name&gt; &lt;branch_name&gt; -f\n</code></pre>    \u5f3a\u5236\u63a8\u9001\u4f1a\u5c06\u672c\u5730\u5206\u652f\u7684\u72b6\u6001\u8986\u76d6\u8fdc\u7a0b\u5206\u652f\u7684\u72b6\u6001\uff0c\u5373\u4f7f\u8fdc\u7a0b\u5206\u652f\u6709\u672c\u5730\u6ca1\u6709\u7684\u66f4\u6539\u3002\u8fd9\u5728\u56e2\u961f\u534f\u4f5c\u4e2d\u662f\u975e\u5e38\u5371\u9669\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4ed6\u4eba\u7684\u66f4\u6539\u4e22\u5931\uff0c\u5e94\u8be5\u8c28\u614e\u4f7f\u7528\u3002</p> </li> <li> <p>\u5f3a\u5236\u62c9\u53d6\u5e76\u8986\u76d6\u672c\u5730\u66f4\u6539\uff1a    <pre><code>git fetch --all\ngit reset --hard &lt;remote_name&gt;/&lt;branch_name&gt;\n</code></pre>    \u8fd9\u4e24\u4e2a\u7ec4\u5408\u547d\u4ee4\u4f1a\u5148\u6293\u53d6\u6240\u6709\u5206\u652f\u7684\u66f4\u65b0\uff0c\u7136\u540e\u786c\u91cd\u7f6e\u5f53\u524d\u5206\u652f\u5230\u8fdc\u7a0b\u5206\u652f\u7684\u72b6\u6001\uff0c\u8fd9\u4f1a\u8986\u76d6\u672c\u5730\u6240\u6709\u66f4\u6539\u3002</p> </li> </ol> <p>\u5728\u4f7f\u7528\u8fd9\u4e9b\u5f3a\u5236\u6027\u547d\u4ee4\u65f6\uff0c\u8bf7\u4e00\u5b9a\u8981\u5c0f\u5fc3\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002\u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u5efa\u8bae\u5148\u5907\u4efd\u91cd\u8981\u6570\u636e\uff0c\u6216\u8005\u786e\u4fdd\u4f60\u5b8c\u5168\u4e86\u89e3\u8fd9\u4e9b\u547d\u4ee4\u7684\u540e\u679c\u3002\u6b64\u5916\uff0c\u5728\u56e2\u961f\u73af\u5883\u4e2d\u5f3a\u5236\u66f4\u6539\u5171\u4eab\u7684\u5206\u652f\u662f\u4e00\u4e2a\u5371\u9669\u7684\u505a\u6cd5\uff0c\u5e94\u5f53\u907f\u514d\u6216\u7ecf\u8fc7\u56e2\u961f\u5145\u5206\u534f\u5546\u540e\u6267\u884c\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/GitHub%E7%9B%B8%E5%85%B3API/","title":"GitHub\u76f8\u5173API","text":"<p>\u6ce8\u610f\uff1a api\u5730\u5740\u533a\u5206\u5927\u5c0f\u5199\uff0cgithub\u5076\u5c14\u8bbf\u95ee\u4e0d\u4e86\u4e0d\u8981\u7740\u6025\uff0c\u8010\u5fc3\u7b49\u5f85\u4e00\u4f1a\u513f\u5c31\u597d</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/GitHub%E7%9B%B8%E5%85%B3API/#_1","title":"\u83b7\u53d6\u7528\u6237\u4fe1\u606f","text":"<pre><code>API\u5730\u5740\uff1ahttps://api.github.com/users/\n\u8bf7\u6c42\u65b9\u5f0f\uff1aget\n\u8bf7\u6c42\u53c2\u6570\uff1apath\u8def\u5f84\uff1a \u7528\u6237\u540d\n\u8fd4\u56de\u53c2\u6570\uff1a\u4e00\u4e2a\u7528\u6237\u5bf9\u8c61\n\u4f8b\u5b50\uff1ahttps://api.github.com/users/xiaodongxier\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\uff1a</p> <pre><code>{\n    \"login\": \"xiaodongxier\",\n    \"id\": 56629378,\n    \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n    \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n    \"gravatar_id\": \"\",\n    \"url\": \"https://api.github.com/users/xiaodongxier\",\n    \"html_url\": \"https://github.com/xiaodongxier\",\n    \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n    \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n    \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n    \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n    \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n    \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n    \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n    \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n    \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n    \"type\": \"User\",\n    \"site_admin\": false,\n    \"name\": \"\u5c0f\u4e1c\u897f\u513f\",\n    \"company\": null,\n    \"blog\": \"https://xiaodongxier.com\",\n    \"location\": null,\n    \"email\": null,\n    \"hireable\": null,\n    \"bio\": null,\n    \"twitter_username\": null,\n    \"public_repos\": 77,\n    \"public_gists\": 3,\n    \"followers\": 20,\n    \"following\": 8,\n    \"created_at\": \"2019-10-16T08:28:56Z\",\n    \"updated_at\": \"2023-12-01T07:36:28Z\"\n}\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/GitHub%E7%9B%B8%E5%85%B3API/#_2","title":"\u83b7\u53d6\u7528\u6237\u6240\u6709\u4ed3\u5e93","text":"<pre><code>API\u5730\u5740\uff1a https://api.github.com/users/{\u7528\u6237\u540d}/repos\n\u8bf7\u6c42\u65b9\u5f0f\uff1aget\n\u8bf7\u6c42\u53c2\u6570\uff1apath\u8def\u5f84\uff1a \u7528\u6237\u540d\n\u8fd4\u56de\u53c2\u6570\uff1a\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\n\u4f8b\u5b50\uff1ahttps://api.github.com/users/xiaodongxier/repos\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\uff1a</p> <pre><code>[\n    {\n        \"id\": 579297776,\n        \"node_id\": \"R_kgDOIodh8A\",\n        \"name\": \"404\",\n        \"full_name\": \"xiaodongxier/404\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/404\",\n        \"description\": \"\u5f15\u5bfc\u9875/404/\u4e2d\u8f6c\u7ad9\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/404\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/404/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/404/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/404/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/404/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/404/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/404/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/404/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/404/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/404/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/404/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/404/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/404/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/404/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/404/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/404/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/404/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/404/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/404/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/404/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/404/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/404/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/404/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/404/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/404/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/404/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/404/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/404/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/404/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/404/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/404/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/404/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/404/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/404/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/404/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/404/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/404/deployments\",\n        \"created_at\": \"2022-12-17T08:08:31Z\",\n        \"updated_at\": \"2022-12-17T08:08:31Z\",\n        \"pushed_at\": \"2022-12-20T09:43:43Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/404.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/404.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/404.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/404\",\n        \"homepage\": null,\n        \"size\": 2075,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 646647229,\n        \"node_id\": \"R_kgDOJosNvQ\",\n        \"name\": \"Administrative-divisions-of-China\",\n        \"full_name\": \"xiaodongxier/Administrative-divisions-of-China\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/Administrative-divisions-of-China\",\n        \"description\": \"\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u884c\u653f\u533a\u5212\uff1a\u7701\u7ea7\uff08\u7701\u4efd\uff09\u3001 \u5730\u7ea7\uff08\u57ce\u5e02\uff09\u3001 \u53bf\u7ea7\uff08\u533a\u53bf\uff09\u3001 \u4e61\u7ea7\uff08\u4e61\u9547\u8857\u9053\uff09\u3001 \u6751\u7ea7\uff08\u6751\u59d4\u4f1a\u5c45\u59d4\u4f1a\uff09 \uff0c\u4e2d\u56fd\u7701\u5e02\u533a\u9547\u6751\u4e8c\u7ea7\u4e09\u7ea7\u56db\u7ea7\u4e94\u7ea7\u8054\u52a8\u5730\u5740\u6570\u636e\u3002\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/Administrative-divisions-of-China/deployments\",\n        \"created_at\": \"2023-05-29T02:48:58Z\",\n        \"updated_at\": \"2023-05-29T02:48:58Z\",\n        \"pushed_at\": \"2023-03-17T07:44:54Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/Administrative-divisions-of-China.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/Administrative-divisions-of-China.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/Administrative-divisions-of-China.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/Administrative-divisions-of-China\",\n        \"homepage\": \"\",\n        \"size\": 151419,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"wtfpl\",\n            \"name\": \"Do What The F*ck You Want To Public License\",\n            \"spdx_id\": \"WTFPL\",\n            \"url\": \"https://api.github.com/licenses/wtfpl\",\n            \"node_id\": \"MDc6TGljZW5zZTE4\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 677955904,\n        \"node_id\": \"R_kgDOKGjJQA\",\n        \"name\": \"antd-vue-demo\",\n        \"full_name\": \"xiaodongxier/antd-vue-demo\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/antd-vue-demo\",\n        \"description\": \"antd-vue-demo\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/antd-vue-demo/deployments\",\n        \"created_at\": \"2023-08-13T07:49:10Z\",\n        \"updated_at\": \"2023-08-25T00:46:52Z\",\n        \"pushed_at\": \"2023-10-09T09:45:33Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/antd-vue-demo.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/antd-vue-demo.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/antd-vue-demo.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/antd-vue-demo\",\n        \"homepage\": \"https://blog.xiaodongxier.com/antd-vue-demo/\",\n        \"size\": 22568,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"Vue\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 385174880,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzODUxNzQ4ODA=\",\n        \"name\": \"app\",\n        \"full_name\": \"xiaodongxier/app\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/app\",\n        \"description\": \"\u5e38\u7528\u8f6f\u4ef6\u5bfc\u822a\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/app\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/app/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/app/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/app/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/app/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/app/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/app/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/app/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/app/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/app/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/app/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/app/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/app/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/app/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/app/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/app/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/app/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/app/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/app/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/app/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/app/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/app/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/app/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/app/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/app/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/app/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/app/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/app/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/app/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/app/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/app/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/app/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/app/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/app/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/app/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/app/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/app/deployments\",\n        \"created_at\": \"2021-07-12T08:19:03Z\",\n        \"updated_at\": \"2021-08-10T07:52:57Z\",\n        \"pushed_at\": \"2021-08-10T07:52:55Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/app.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/app.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/app.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/app\",\n        \"homepage\": \"https://xiaodongxier.github.io/app\",\n        \"size\": 29270,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"SCSS\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 391853116,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzOTE4NTMxMTY=\",\n        \"name\": \"Awesome-Profile-README-templates\",\n        \"full_name\": \"xiaodongxier/Awesome-Profile-README-templates\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/Awesome-Profile-README-templates\",\n        \"description\": \"A collection of awesome readme templates to display on your profile\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/Awesome-Profile-README-templates/deployments\",\n        \"created_at\": \"2021-08-02T07:26:54Z\",\n        \"updated_at\": \"2021-08-02T07:26:56Z\",\n        \"pushed_at\": \"2021-07-18T17:54:58Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/Awesome-Profile-README-templates.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/Awesome-Profile-README-templates.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/Awesome-Profile-README-templates.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/Awesome-Profile-README-templates\",\n        \"homepage\": \"\",\n        \"size\": 482,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 674533840,\n        \"node_id\": \"R_kgDOKDSR0A\",\n        \"name\": \"BeijngNotes\",\n        \"full_name\": \"xiaodongxier/BeijngNotes\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/BeijngNotes\",\n        \"description\": \"\u65e5\u5e38\u7b14\u8bb0\u8bb0\u5f55\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/BeijngNotes/deployments\",\n        \"created_at\": \"2023-08-04T07:14:20Z\",\n        \"updated_at\": \"2023-08-09T09:37:59Z\",\n        \"pushed_at\": \"2023-08-20T23:00:19Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/BeijngNotes.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/BeijngNotes.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/BeijngNotes.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/BeijngNotes\",\n        \"homepage\": null,\n        \"size\": 1387,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 715114914,\n        \"node_id\": \"R_kgDOKp_Jog\",\n        \"name\": \"bilibili_1hr_vue\",\n        \"full_name\": \"xiaodongxier/bilibili_1hr_vue\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/bilibili_1hr_vue\",\n        \"description\": \"\u5434\u60a0\u8bb2\u7f16\u7a0b_\u4e00\u5c0f\u65f6\u5b66\u4f1aVue\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/bilibili_1hr_vue/deployments\",\n        \"created_at\": \"2023-11-06T14:04:53Z\",\n        \"updated_at\": \"2023-11-06T15:03:42Z\",\n        \"pushed_at\": \"2023-11-06T15:08:38Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/bilibili_1hr_vue.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/bilibili_1hr_vue.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/bilibili_1hr_vue.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/bilibili_1hr_vue\",\n        \"homepage\": null,\n        \"size\": 173,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"Vue\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 663306339,\n        \"node_id\": \"R_kgDOJ4lAYw\",\n        \"name\": \"cdn\",\n        \"full_name\": \"xiaodongxier/cdn\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/cdn\",\n        \"description\": \"\u5404\u79cd\u5e93\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/cdn\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/cdn/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/cdn/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/cdn/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/cdn/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/cdn/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/cdn/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/cdn/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/cdn/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/cdn/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/cdn/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/cdn/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/cdn/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/cdn/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/cdn/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/cdn/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/cdn/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/cdn/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/cdn/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/cdn/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/cdn/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/cdn/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/cdn/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/cdn/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/cdn/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/cdn/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/cdn/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/cdn/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/cdn/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/cdn/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/cdn/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/cdn/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/cdn/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/cdn/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/cdn/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/cdn/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/cdn/deployments\",\n        \"created_at\": \"2023-07-07T02:38:16Z\",\n        \"updated_at\": \"2023-07-07T09:40:07Z\",\n        \"pushed_at\": \"2023-07-10T05:07:17Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/cdn.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/cdn.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/cdn.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/cdn\",\n        \"homepage\": \"https://cdn.xiaodongxier.com\",\n        \"size\": 5406,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"JavaScript\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [\n            \"npm\"\n        ],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 275721878,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkyNzU3MjE4Nzg=\",\n        \"name\": \"cnblogs-theme-silence\",\n        \"full_name\": \"xiaodongxier/cnblogs-theme-silence\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/cnblogs-theme-silence\",\n        \"description\": \":fire:  \u4e00\u6b3e\u4e13\u6ce8\u4e8e\u9605\u8bfb\u7684\u535a\u5ba2\u56ed\u4e3b\u9898\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/cnblogs-theme-silence/deployments\",\n        \"created_at\": \"2020-06-29T03:33:27Z\",\n        \"updated_at\": \"2020-06-29T03:33:29Z\",\n        \"pushed_at\": \"2020-06-01T04:38:42Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/cnblogs-theme-silence.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/cnblogs-theme-silence.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/cnblogs-theme-silence.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/cnblogs-theme-silence\",\n        \"homepage\": \"https://www.cnblogs.com/esofar/\",\n        \"size\": 2474,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 215681130,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkyMTU2ODExMzA=\",\n        \"name\": \"demo\",\n        \"full_name\": \"xiaodongxier/demo\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/demo\",\n        \"description\": \"\u6548\u679c\u6f14\u793a\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/demo\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/demo/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/demo/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/demo/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/demo/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/demo/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/demo/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/demo/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/demo/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/demo/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/demo/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/demo/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/demo/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/demo/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/demo/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/demo/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/demo/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/demo/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/demo/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/demo/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/demo/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/demo/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/demo/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/demo/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/demo/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/demo/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/demo/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/demo/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/demo/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/demo/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/demo/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/demo/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/demo/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/demo/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/demo/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/demo/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/demo/deployments\",\n        \"created_at\": \"2019-10-17T01:56:44Z\",\n        \"updated_at\": \"2021-05-14T14:29:33Z\",\n        \"pushed_at\": \"2023-07-13T10:47:08Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/demo.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/demo.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/demo.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/demo\",\n        \"homepage\": \"https://xiaodongxier.github.io/demo\",\n        \"size\": 4836,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": true,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 353214812,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzNTMyMTQ4MTI=\",\n        \"name\": \"docsify\",\n        \"full_name\": \"xiaodongxier/docsify\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/docsify\",\n        \"description\": \"\ud83c\udccf A magical documentation site generator.\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/docsify\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/docsify/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/docsify/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/docsify/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/docsify/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/docsify/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/docsify/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/docsify/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/docsify/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/docsify/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/docsify/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/docsify/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/docsify/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/docsify/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/docsify/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/docsify/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/docsify/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/docsify/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/docsify/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/docsify/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/docsify/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/docsify/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/docsify/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/docsify/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/docsify/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/docsify/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/docsify/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/docsify/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/docsify/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/docsify/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/docsify/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/docsify/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/docsify/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/docsify/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/docsify/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/docsify/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/docsify/deployments\",\n        \"created_at\": \"2021-03-31T03:36:09Z\",\n        \"updated_at\": \"2021-03-31T03:36:10Z\",\n        \"pushed_at\": \"2021-03-31T02:36:24Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/docsify.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/docsify.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/docsify.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/docsify\",\n        \"homepage\": \"https://docsify.js.org\",\n        \"size\": 20757,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"develop\"\n    },\n    {\n        \"id\": 563689149,\n        \"node_id\": \"R_kgDOIZk2vQ\",\n        \"name\": \"document-style-guide\",\n        \"full_name\": \"xiaodongxier/document-style-guide\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/document-style-guide\",\n        \"description\": \"\u4e2d\u6587\u6280\u672f\u6587\u6863\u7684\u5199\u4f5c\u89c4\u8303\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/document-style-guide/deployments\",\n        \"created_at\": \"2022-11-09T05:49:49Z\",\n        \"updated_at\": \"2022-11-09T02:12:18Z\",\n        \"pushed_at\": \"2022-09-14T14:30:24Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/document-style-guide.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/document-style-guide.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/document-style-guide.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/document-style-guide\",\n        \"homepage\": \"\",\n        \"size\": 61,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 345065698,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzNDUwNjU2OTg=\",\n        \"name\": \"doudou\",\n        \"full_name\": \"xiaodongxier/doudou\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/doudou\",\n        \"description\": \"doudou\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/doudou\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/doudou/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/doudou/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/doudou/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/doudou/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/doudou/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/doudou/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/doudou/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/doudou/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/doudou/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/doudou/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/doudou/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/doudou/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/doudou/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/doudou/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/doudou/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/doudou/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/doudou/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/doudou/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/doudou/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/doudou/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/doudou/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/doudou/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/doudou/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/doudou/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/doudou/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/doudou/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/doudou/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/doudou/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/doudou/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/doudou/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/doudou/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/doudou/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/doudou/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/doudou/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/doudou/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/doudou/deployments\",\n        \"created_at\": \"2021-03-06T10:28:59Z\",\n        \"updated_at\": \"2021-07-16T09:59:12Z\",\n        \"pushed_at\": \"2021-07-16T09:59:10Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/doudou.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/doudou.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/doudou.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/doudou\",\n        \"homepage\": null,\n        \"size\": 220,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"HTML\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 723310409,\n        \"node_id\": \"R_kgDOKxzXSQ\",\n        \"name\": \"dream\",\n        \"full_name\": \"xiaodongxier/dream\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/dream\",\n        \"description\": \"\u4e00\u4e2a\\\"\u76ee\u524d\u6211\u5728\u521b\u5efa\u8fd9\u4e2a\u9879\u76ee\u7684\u65f6\u5019\u6ee1\u6000\u6fc0\u52a8\u548c\u671f\u5f85\\\"\u7684\u9879\u76ee - 20231125\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/dream\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/dream/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/dream/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/dream/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/dream/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/dream/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/dream/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/dream/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/dream/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/dream/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/dream/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/dream/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/dream/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/dream/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/dream/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/dream/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/dream/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/dream/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/dream/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/dream/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/dream/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/dream/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/dream/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/dream/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/dream/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/dream/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/dream/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/dream/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/dream/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/dream/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/dream/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/dream/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/dream/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/dream/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/dream/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/dream/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/dream/deployments\",\n        \"created_at\": \"2023-11-25T09:01:01Z\",\n        \"updated_at\": \"2023-11-25T09:01:01Z\",\n        \"pushed_at\": \"2023-11-25T09:01:01Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/dream.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/dream.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/dream.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/dream\",\n        \"homepage\": null,\n        \"size\": 0,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 563685885,\n        \"node_id\": \"R_kgDOIZkp_Q\",\n        \"name\": \"es6\",\n        \"full_name\": \"xiaodongxier/es6\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/es6\",\n        \"description\": \"\u300aECMAScript 6\u5165\u95e8\u300b\u662f\u4e00\u672c\u5f00\u6e90\u7684 JavaScript \u8bed\u8a00\u6559\u7a0b\uff0c\u5168\u9762\u4ecb\u7ecd ECMAScript 6 \u65b0\u589e\u7684\u8bed\u6cd5\u7279\u6027\u3002\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/es6\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/es6/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/es6/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/es6/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/es6/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/es6/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/es6/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/es6/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/es6/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/es6/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/es6/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/es6/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/es6/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/es6/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/es6/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/es6/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/es6/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/es6/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/es6/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/es6/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/es6/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/es6/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/es6/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/es6/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/es6/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/es6/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/es6/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/es6/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/es6/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/es6/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/es6/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/es6/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/es6/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/es6/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/es6/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/es6/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/es6/deployments\",\n        \"created_at\": \"2022-11-09T05:37:24Z\",\n        \"updated_at\": \"2022-11-09T00:44:33Z\",\n        \"pushed_at\": \"2022-10-25T08:41:46Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/es6.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/es6.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/es6.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/es6\",\n        \"homepage\": \"http://es6.ruanyifeng.com/\",\n        \"size\": 5712,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"other\",\n            \"name\": \"Other\",\n            \"spdx_id\": \"NOASSERTION\",\n            \"url\": null,\n            \"node_id\": \"MDc6TGljZW5zZTA=\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"gh-pages\"\n    },\n    {\n        \"id\": 226665714,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkyMjY2NjU3MTQ=\",\n        \"name\": \"figurebed\",\n        \"full_name\": \"xiaodongxier/figurebed\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/figurebed\",\n        \"description\": \"\u5c0f\u4e1c\u897f\u513f\u7684 GitHub \u56fe\u5e8a\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/figurebed\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/figurebed/deployments\",\n        \"created_at\": \"2019-12-08T12:41:06Z\",\n        \"updated_at\": \"2022-10-21T06:38:59Z\",\n        \"pushed_at\": \"2023-08-06T10:35:25Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/figurebed.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/figurebed.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/figurebed.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/figurebed\",\n        \"homepage\": null,\n        \"size\": 192243,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"HTML\",\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 578959537,\n        \"node_id\": \"R_kgDOIoI4sQ\",\n        \"name\": \"gitcdn\",\n        \"full_name\": \"xiaodongxier/gitcdn\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/gitcdn\",\n        \"description\": \"\u56fe\u7247/\u8d44\u6e90/\u6587\u4ef6\u5e93\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/gitcdn\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/gitcdn/deployments\",\n        \"created_at\": \"2022-12-16T09:57:41Z\",\n        \"updated_at\": \"2022-12-16T09:57:41Z\",\n        \"pushed_at\": \"2023-12-01T11:06:31Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/gitcdn.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/gitcdn.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/gitcdn.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/gitcdn\",\n        \"homepage\": null,\n        \"size\": 39183,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 391850904,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzOTE4NTA5MDQ=\",\n        \"name\": \"github-readme-stats\",\n        \"full_name\": \"xiaodongxier/github-readme-stats\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/github-readme-stats\",\n        \"description\": \":zap: Dynamically generated stats for your github readmes\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/github-readme-stats/deployments\",\n        \"created_at\": \"2021-08-02T07:18:35Z\",\n        \"updated_at\": \"2021-08-02T07:18:37Z\",\n        \"pushed_at\": \"2021-08-01T14:03:57Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/github-readme-stats.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/github-readme-stats.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/github-readme-stats.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/github-readme-stats\",\n        \"homepage\": \"https://github-readme-stats.vercel.app\",\n        \"size\": 896,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 348230675,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzNDgyMzA2NzU=\",\n        \"name\": \"GitHub520\",\n        \"full_name\": \"xiaodongxier/GitHub520\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/GitHub520\",\n        \"description\": \":kissing_heart: \u8ba9\u4f60\u201c\u7231\u201d\u4e0a GitHub\uff0c\u89e3\u51b3\u8bbf\u95ee\u65f6\u56fe\u88c2\u3001\u52a0\u8f7d\u6162\u7684\u95ee\u9898\u3002\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/GitHub520\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/GitHub520/deployments\",\n        \"created_at\": \"2021-03-16T05:55:36Z\",\n        \"updated_at\": \"2021-03-16T05:55:37Z\",\n        \"pushed_at\": \"2021-03-16T04:24:20Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/GitHub520.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/GitHub520.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/GitHub520.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/GitHub520\",\n        \"homepage\": \"https://hellogithub.com\",\n        \"size\": 1433,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 392534612,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkzOTI1MzQ2MTI=\",\n        \"name\": \"grabient\",\n        \"full_name\": \"xiaodongxier/grabient\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/grabient\",\n        \"description\": \"UI to generate linear-gradients\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/grabient\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/grabient/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/grabient/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/grabient/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/grabient/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/grabient/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/grabient/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/grabient/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/grabient/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/grabient/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/grabient/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/grabient/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/grabient/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/grabient/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/grabient/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/grabient/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/grabient/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/grabient/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/grabient/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/grabient/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/grabient/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/grabient/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/grabient/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/grabient/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/grabient/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/grabient/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/grabient/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/grabient/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/grabient/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/grabient/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/grabient/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/grabient/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/grabient/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/grabient/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/grabient/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/grabient/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/grabient/deployments\",\n        \"created_at\": \"2021-08-04T03:26:40Z\",\n        \"updated_at\": \"2022-08-26T08:22:43Z\",\n        \"pushed_at\": \"2022-08-26T08:22:39Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/grabient.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/grabient.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/grabient.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/grabient\",\n        \"homepage\": \"https://www.grabient.com/\",\n        \"size\": 9678,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": \"JavaScript\",\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 584639072,\n        \"node_id\": \"R_kgDOItjiYA\",\n        \"name\": \"hexo-theme-butterfly\",\n        \"full_name\": \"xiaodongxier/hexo-theme-butterfly\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/hexo-theme-butterfly\",\n        \"description\": \" \ud83e\udd8b A Hexo Theme: Butterfly\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-butterfly/deployments\",\n        \"created_at\": \"2023-01-03T06:00:43Z\",\n        \"updated_at\": \"2023-01-03T03:39:29Z\",\n        \"pushed_at\": \"2022-12-21T16:18:35Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/hexo-theme-butterfly.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/hexo-theme-butterfly.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/hexo-theme-butterfly.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/hexo-theme-butterfly\",\n        \"homepage\": \"https://butterfly.js.org\",\n        \"size\": 2542,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"apache-2.0\",\n            \"name\": \"Apache License 2.0\",\n            \"spdx_id\": \"Apache-2.0\",\n            \"url\": \"https://api.github.com/licenses/apache-2.0\",\n            \"node_id\": \"MDc6TGljZW5zZTI=\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"dev\"\n    },\n    {\n        \"id\": 594983309,\n        \"node_id\": \"R_kgDOI3a5jQ\",\n        \"name\": \"hexo-theme-fluid\",\n        \"full_name\": \"xiaodongxier/hexo-theme-fluid\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/hexo-theme-fluid\",\n        \"description\": \":ocean: \u4e00\u6b3e Material Design \u98ce\u683c\u7684 Hexo \u4e3b\u9898 / An elegant Material-Design theme for Hexo\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-fluid/deployments\",\n        \"created_at\": \"2023-01-30T06:21:18Z\",\n        \"updated_at\": \"2023-01-30T05:33:47Z\",\n        \"pushed_at\": \"2023-01-02T20:46:33Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/hexo-theme-fluid.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/hexo-theme-fluid.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/hexo-theme-fluid.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/hexo-theme-fluid\",\n        \"homepage\": \"https://hexo.fluid-dev.com/\",\n        \"size\": 8445,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"gpl-3.0\",\n            \"name\": \"GNU General Public License v3.0\",\n            \"spdx_id\": \"GPL-3.0\",\n            \"url\": \"https://api.github.com/licenses/gpl-3.0\",\n            \"node_id\": \"MDc6TGljZW5zZTk=\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 584638792,\n        \"node_id\": \"R_kgDOItjhSA\",\n        \"name\": \"hexo-theme-icarus\",\n        \"full_name\": \"xiaodongxier/hexo-theme-icarus\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/hexo-theme-icarus\",\n        \"description\": \"A simple, delicate, and modern theme for the static site generator Hexo.\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-icarus/deployments\",\n        \"created_at\": \"2023-01-03T05:59:34Z\",\n        \"updated_at\": \"2023-01-03T04:51:15Z\",\n        \"pushed_at\": \"2022-12-31T21:06:32Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/hexo-theme-icarus.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/hexo-theme-icarus.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/hexo-theme-icarus.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/hexo-theme-icarus\",\n        \"homepage\": \"https://ppoffice.github.io/hexo-theme-icarus/\",\n        \"size\": 27071,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 584634631,\n        \"node_id\": \"R_kgDOItjRBw\",\n        \"name\": \"hexo-theme-matery\",\n        \"full_name\": \"xiaodongxier/hexo-theme-matery\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/hexo-theme-matery\",\n        \"description\": \"A beautiful hexo blog theme with material design and responsive design.\u4e00\u4e2a\u57fa\u4e8e\u6750\u6599\u8bbe\u8ba1\u548c\u54cd\u5e94\u5f0f\u8bbe\u8ba1\u800c\u6210\u7684\u5168\u9762\u3001\u7f8e\u89c2\u7684Hexo\u4e3b\u9898\u3002\u56fd\u5185\u8bbf\u95ee\uff1ahttp://blinkfox.com\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/hexo-theme-matery/deployments\",\n        \"created_at\": \"2023-01-03T05:41:42Z\",\n        \"updated_at\": \"2023-01-03T04:54:56Z\",\n        \"pushed_at\": \"2022-12-25T16:12:43Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/hexo-theme-matery.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/hexo-theme-matery.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/hexo-theme-matery.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/hexo-theme-matery\",\n        \"homepage\": \"https://blinkfox.github.io/\",\n        \"size\": 20953,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"apache-2.0\",\n            \"name\": \"Apache License 2.0\",\n            \"spdx_id\": \"Apache-2.0\",\n            \"url\": \"https://api.github.com/licenses/apache-2.0\",\n            \"node_id\": \"MDc6TGljZW5zZTI=\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"develop\"\n    },\n    {\n        \"id\": 528793558,\n        \"node_id\": \"R_kgDOH4S_1g\",\n        \"name\": \"holder\",\n        \"full_name\": \"xiaodongxier/holder\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/holder\",\n        \"description\": \":city_sunrise: Client-side image placeholders.\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/holder\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/holder/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/holder/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/holder/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/holder/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/holder/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/holder/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/holder/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/holder/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/holder/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/holder/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/holder/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/holder/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/holder/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/holder/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/holder/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/holder/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/holder/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/holder/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/holder/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/holder/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/holder/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/holder/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/holder/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/holder/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/holder/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/holder/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/holder/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/holder/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/holder/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/holder/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/holder/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/holder/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/holder/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/holder/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/holder/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/holder/deployments\",\n        \"created_at\": \"2022-08-25T10:05:54Z\",\n        \"updated_at\": \"2022-08-17T08:59:49Z\",\n        \"pushed_at\": \"2021-01-10T19:16:52Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/holder.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/holder.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/holder.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/holder\",\n        \"homepage\": \"http://holderjs.com\",\n        \"size\": 1556,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 727600794,\n        \"node_id\": \"R_kgDOK15Omg\",\n        \"name\": \"home\",\n        \"full_name\": \"xiaodongxier/home\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/home\",\n        \"description\": \"\u4e2a\u4eba\u4e3b\u9875\uff0c\u6211\u7684\u4e2a\u4eba\u4e3b\u9875\uff0c\u4e2a\u4eba\u4e3b\u9875\u6e90\u7801\uff0c\u4e3b\u9875\u6a21\u677f\uff0chomepage\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/home\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/home/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/home/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/home/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/home/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/home/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/home/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/home/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/home/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/home/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/home/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/home/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/home/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/home/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/home/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/home/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/home/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/home/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/home/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/home/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/home/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/home/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/home/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/home/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/home/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/home/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/home/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/home/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/home/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/home/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/home/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/home/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/home/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/home/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/home/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/home/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/home/deployments\",\n        \"created_at\": \"2023-12-05T07:36:05Z\",\n        \"updated_at\": \"2023-12-05T07:36:05Z\",\n        \"pushed_at\": \"2023-12-02T01:36:57Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/home.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/home.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/home.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/home\",\n        \"homepage\": \"https://www.imsyy.top\",\n        \"size\": 16133,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": false,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"mit\",\n            \"name\": \"MIT License\",\n            \"spdx_id\": \"MIT\",\n            \"url\": \"https://api.github.com/licenses/mit\",\n            \"node_id\": \"MDc6TGljZW5zZTEz\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"dev\"\n    },\n    {\n        \"id\": 584637454,\n        \"node_id\": \"R_kgDOItjcDg\",\n        \"name\": \"hugo-theme-luna\",\n        \"full_name\": \"xiaodongxier/hugo-theme-luna\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/hugo-theme-luna\",\n        \"description\": \"A simple, performance-first, SEO-friendly Hugo theme / \u4e00\u4e2a\u8f7b\u91cf\uff0c\u5feb\u901f\uff0cSEO \u53cb\u597d\u7684 Hugo \u4e3b\u9898\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/hugo-theme-luna/deployments\",\n        \"created_at\": \"2023-01-03T05:53:58Z\",\n        \"updated_at\": \"2023-01-02T21:34:24Z\",\n        \"pushed_at\": \"2022-12-28T11:13:39Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/hugo-theme-luna.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/hugo-theme-luna.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/hugo-theme-luna.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/hugo-theme-luna\",\n        \"homepage\": \"https://hugo-theme-luna.imiku.me\",\n        \"size\": 48162,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": {\n            \"key\": \"gpl-3.0\",\n            \"name\": \"GNU General Public License v3.0\",\n            \"spdx_id\": \"GPL-3.0\",\n            \"url\": \"https://api.github.com/licenses/gpl-3.0\",\n            \"node_id\": \"MDc6TGljZW5zZTk=\"\n        },\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 581440099,\n        \"node_id\": \"R_kgDOIqgSYw\",\n        \"name\": \"idear\",\n        \"full_name\": \"xiaodongxier/idear\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/idear\",\n        \"description\": \"\u4e0d\u9519\u7684\u4e1c\u897f/\u7a81\u53d1\u5947\u60f3/\u4e34\u65f6\u60f3\u6cd5\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/idear\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/idear/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/idear/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/idear/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/idear/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/idear/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/idear/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/idear/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/idear/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/idear/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/idear/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/idear/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/idear/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/idear/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/idear/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/idear/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/idear/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/idear/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/idear/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/idear/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/idear/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/idear/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/idear/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/idear/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/idear/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/idear/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/idear/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/idear/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/idear/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/idear/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/idear/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/idear/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/idear/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/idear/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/idear/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/idear/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/idear/deployments\",\n        \"created_at\": \"2022-12-23T07:33:11Z\",\n        \"updated_at\": \"2022-12-23T07:55:45Z\",\n        \"pushed_at\": \"2023-04-14T08:14:29Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/idear.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/idear.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/idear.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/idear\",\n        \"homepage\": \"https://xiaodongxier.github.io/idear\",\n        \"size\": 2178,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": true,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"main\"\n    },\n    {\n        \"id\": 528779386,\n        \"node_id\": \"R_kgDOH4SIeg\",\n        \"name\": \"imageManage\",\n        \"full_name\": \"xiaodongxier/imageManage\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/imageManage\",\n        \"description\": \"PHP\u56fe\u7247\u6587\u5b57\u5904\u7406\u5408\u6210 \u652f\u6301\u6587\u5b57\u6362\u884c\",\n        \"fork\": true,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/imageManage\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/imageManage/deployments\",\n        \"created_at\": \"2022-08-25T09:24:42Z\",\n        \"updated_at\": \"2022-03-29T08:55:12Z\",\n        \"pushed_at\": \"2018-12-12T08:22:08Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/imageManage.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/imageManage.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/imageManage.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/imageManage\",\n        \"homepage\": null,\n        \"size\": 15,\n        \"stargazers_count\": 0,\n        \"watchers_count\": 0,\n        \"language\": null,\n        \"has_issues\": false,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 0,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 0,\n        \"watchers\": 0,\n        \"default_branch\": \"master\"\n    },\n    {\n        \"id\": 272130938,\n        \"node_id\": \"MDEwOlJlcG9zaXRvcnkyNzIxMzA5Mzg=\",\n        \"name\": \"iNews\",\n        \"full_name\": \"xiaodongxier/iNews\",\n        \"private\": false,\n        \"owner\": {\n            \"login\": \"xiaodongxier\",\n            \"id\": 56629378,\n            \"node_id\": \"MDQ6VXNlcjU2NjI5Mzc4\",\n            \"avatar_url\": \"https://avatars.githubusercontent.com/u/56629378?v=4\",\n            \"gravatar_id\": \"\",\n            \"url\": \"https://api.github.com/users/xiaodongxier\",\n            \"html_url\": \"https://github.com/xiaodongxier\",\n            \"followers_url\": \"https://api.github.com/users/xiaodongxier/followers\",\n            \"following_url\": \"https://api.github.com/users/xiaodongxier/following{/other_user}\",\n            \"gists_url\": \"https://api.github.com/users/xiaodongxier/gists{/gist_id}\",\n            \"starred_url\": \"https://api.github.com/users/xiaodongxier/starred{/owner}{/repo}\",\n            \"subscriptions_url\": \"https://api.github.com/users/xiaodongxier/subscriptions\",\n            \"organizations_url\": \"https://api.github.com/users/xiaodongxier/orgs\",\n            \"repos_url\": \"https://api.github.com/users/xiaodongxier/repos\",\n            \"events_url\": \"https://api.github.com/users/xiaodongxier/events{/privacy}\",\n            \"received_events_url\": \"https://api.github.com/users/xiaodongxier/received_events\",\n            \"type\": \"User\",\n            \"site_admin\": false\n        },\n        \"html_url\": \"https://github.com/xiaodongxier/iNews\",\n        \"description\": \" \u65b0\u95fb\u8f6c\u8f7d\",\n        \"fork\": false,\n        \"url\": \"https://api.github.com/repos/xiaodongxier/iNews\",\n        \"forks_url\": \"https://api.github.com/repos/xiaodongxier/iNews/forks\",\n        \"keys_url\": \"https://api.github.com/repos/xiaodongxier/iNews/keys{/key_id}\",\n        \"collaborators_url\": \"https://api.github.com/repos/xiaodongxier/iNews/collaborators{/collaborator}\",\n        \"teams_url\": \"https://api.github.com/repos/xiaodongxier/iNews/teams\",\n        \"hooks_url\": \"https://api.github.com/repos/xiaodongxier/iNews/hooks\",\n        \"issue_events_url\": \"https://api.github.com/repos/xiaodongxier/iNews/issues/events{/number}\",\n        \"events_url\": \"https://api.github.com/repos/xiaodongxier/iNews/events\",\n        \"assignees_url\": \"https://api.github.com/repos/xiaodongxier/iNews/assignees{/user}\",\n        \"branches_url\": \"https://api.github.com/repos/xiaodongxier/iNews/branches{/branch}\",\n        \"tags_url\": \"https://api.github.com/repos/xiaodongxier/iNews/tags\",\n        \"blobs_url\": \"https://api.github.com/repos/xiaodongxier/iNews/git/blobs{/sha}\",\n        \"git_tags_url\": \"https://api.github.com/repos/xiaodongxier/iNews/git/tags{/sha}\",\n        \"git_refs_url\": \"https://api.github.com/repos/xiaodongxier/iNews/git/refs{/sha}\",\n        \"trees_url\": \"https://api.github.com/repos/xiaodongxier/iNews/git/trees{/sha}\",\n        \"statuses_url\": \"https://api.github.com/repos/xiaodongxier/iNews/statuses/{sha}\",\n        \"languages_url\": \"https://api.github.com/repos/xiaodongxier/iNews/languages\",\n        \"stargazers_url\": \"https://api.github.com/repos/xiaodongxier/iNews/stargazers\",\n        \"contributors_url\": \"https://api.github.com/repos/xiaodongxier/iNews/contributors\",\n        \"subscribers_url\": \"https://api.github.com/repos/xiaodongxier/iNews/subscribers\",\n        \"subscription_url\": \"https://api.github.com/repos/xiaodongxier/iNews/subscription\",\n        \"commits_url\": \"https://api.github.com/repos/xiaodongxier/iNews/commits{/sha}\",\n        \"git_commits_url\": \"https://api.github.com/repos/xiaodongxier/iNews/git/commits{/sha}\",\n        \"comments_url\": \"https://api.github.com/repos/xiaodongxier/iNews/comments{/number}\",\n        \"issue_comment_url\": \"https://api.github.com/repos/xiaodongxier/iNews/issues/comments{/number}\",\n        \"contents_url\": \"https://api.github.com/repos/xiaodongxier/iNews/contents/{+path}\",\n        \"compare_url\": \"https://api.github.com/repos/xiaodongxier/iNews/compare/{base}...{head}\",\n        \"merges_url\": \"https://api.github.com/repos/xiaodongxier/iNews/merges\",\n        \"archive_url\": \"https://api.github.com/repos/xiaodongxier/iNews/{archive_format}{/ref}\",\n        \"downloads_url\": \"https://api.github.com/repos/xiaodongxier/iNews/downloads\",\n        \"issues_url\": \"https://api.github.com/repos/xiaodongxier/iNews/issues{/number}\",\n        \"pulls_url\": \"https://api.github.com/repos/xiaodongxier/iNews/pulls{/number}\",\n        \"milestones_url\": \"https://api.github.com/repos/xiaodongxier/iNews/milestones{/number}\",\n        \"notifications_url\": \"https://api.github.com/repos/xiaodongxier/iNews/notifications{?since,all,participating}\",\n        \"labels_url\": \"https://api.github.com/repos/xiaodongxier/iNews/labels{/name}\",\n        \"releases_url\": \"https://api.github.com/repos/xiaodongxier/iNews/releases{/id}\",\n        \"deployments_url\": \"https://api.github.com/repos/xiaodongxier/iNews/deployments\",\n        \"created_at\": \"2020-06-14T04:13:15Z\",\n        \"updated_at\": \"2023-01-18T09:20:35Z\",\n        \"pushed_at\": \"2022-10-25T03:12:14Z\",\n        \"git_url\": \"git://github.com/xiaodongxier/iNews.git\",\n        \"ssh_url\": \"git@github.com:xiaodongxier/iNews.git\",\n        \"clone_url\": \"https://github.com/xiaodongxier/iNews.git\",\n        \"svn_url\": \"https://github.com/xiaodongxier/iNews\",\n        \"homepage\": null,\n        \"size\": 2,\n        \"stargazers_count\": 3,\n        \"watchers_count\": 3,\n        \"language\": null,\n        \"has_issues\": true,\n        \"has_projects\": true,\n        \"has_downloads\": true,\n        \"has_wiki\": true,\n        \"has_pages\": false,\n        \"has_discussions\": false,\n        \"forks_count\": 0,\n        \"mirror_url\": null,\n        \"archived\": false,\n        \"disabled\": false,\n        \"open_issues_count\": 127,\n        \"license\": null,\n        \"allow_forking\": true,\n        \"is_template\": false,\n        \"web_commit_signoff_required\": false,\n        \"topics\": [],\n        \"visibility\": \"public\",\n        \"forks\": 0,\n        \"open_issues\": 127,\n        \"watchers\": 3,\n        \"default_branch\": \"master\"\n    }\n]\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/Github%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE/","title":"Github\u52a0\u901f\u8bbf\u95ee","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/Github%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE/#httpsrawgithubusercontentcom-","title":"https://raw.githubusercontent.com - \u5b98\u65b9\u8bbf\u95ee\u6587\u4ef6","text":"<p>\u68af\u5b50</p> <pre><code>https://raw.githubusercontent.com/xiaodongxier/my_web_content/dream_data/TodoList/index.md\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/Github%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE/#httpsrawgitmirrorcom","title":"https://raw.gitmirror.com","text":"<p>\u65e0\u9700\u68af\u5b50\uff0c\u6162</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>https://raw.gitmirror.com/xiaodongxier/my_web_content/dream_data/TodoList/index.md\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/Github%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE/#httpscdnjsdelivrnetgh","title":"https://cdn.jsdelivr.net/gh/","text":"<p>\u95f4\u63a5\u6027\u8bbf\u95ee\u4e0d\u4e86\uff0c20231209 \u9700\u8981\u68af\u5b50</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>https://cdn.jsdelivr.net/gh/xiaodongxier/my_web_content@dream_data/TodoList/index.md\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/Github%E5%8A%A0%E9%80%9F%E8%AE%BF%E9%97%AE/#_1","title":"\u53c2\u8003","text":"<ul> <li>github\u5e38\u7528\u7684api\u63a5\u53e3</li> <li>github\u3001gitlab\u7b49\u5e38\u7528api\u63a5\u53e3 </li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/","title":"\u901a\u8fc7GitHub\u7684Actions\u5b9e\u73b0\u81ea\u52a8\u90e8\u7f72","text":"<ul> <li>\u53ef\u4ee5\u5b9e\u73b0hexo\u535a\u5ba2\u7684\u81ea\u52a8\u90e8\u7f72</li> <li>\u53ef\u4ee5\u5b9e\u73b0Vue\u9879\u76ee\u7684\u81ea\u52a8\u6253\u5305\u90e8\u7f72</li> </ul> <p>\u4ee5\u6211\u7684 iblog \u9879\u76ee\u4e3a\u4f8b, \u5168\u81ea\u52a8\u90e8\u7f72\u6d41\u7a0b\u8bb0\u5f55\u5982\u4e0b, \u65b9\u4fbf\u540e\u671f\u67e5\u770b</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/#1","title":"1. \u51c6\u5907","text":"<ul> <li>iblog_dev \u5f00\u53d1\u4ed3\u5e93</li> <li>iblog \u90e8\u7f72\u4ed3\u5e93</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/#2","title":"2. \u751f\u6210\u76f8\u5173\u53c2\u6570","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/#_1","title":"\u751f\u6210\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\uff1a","text":"<ol> <li>\u8fdb\u5165 GitHub\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u5934\u50cf\uff0c\u9009\u62e9 \"Settings\"\uff08\u8bbe\u7f6e\uff09\u3002</li> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u9009\u62e9 \"Developer settings\"\uff08\u5f00\u53d1\u8005\u8bbe\u7f6e\uff09\u3002</li> <li>\u5728 Developer settings \u9875\u9762\u4e0a\uff0c\u9009\u62e9 \"Personal access tokens\"\uff08\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\uff09\u3002</li> <li>\u70b9\u51fb \"Generate token\"\uff08\u751f\u6210\u4ee4\u724c\uff09\u3002</li> <li>\u63d0\u4f9b\u4e00\u4e2a\u8bf4\u660e\uff0c\u9009\u62e9\u9700\u8981\u7684\u6743\u9650\uff08\u5728\u8fd9\u91cc\uff0c\u81f3\u5c11\u9009\u62e9 <code>repo</code> \u6743\u9650\u4ee5\u5141\u8bb8\u8bfb\u5199\u4ed3\u5e93\uff09\u3002</li> <li>\u70b9\u51fb \"Generate token\"\u3002</li> <li>\u590d\u5236\u751f\u6210\u7684\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u3002\u8bf7\u8bb0\u4f4f\uff0c\u4ee4\u724c\u53ea\u5728\u751f\u6210\u65f6\u663e\u793a\u4e00\u6b21\uff0c\u786e\u4fdd\u4fdd\u5b58\u597d\u3002</li> </ol>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/#github-actions","title":"\u5728 GitHub Actions \u4e2d\u4f7f\u7528\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\uff1a","text":"<p>\u5728 GitHub \u4ed3\u5e93\u4e2d\uff0c\u5c06\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u6dfb\u52a0\u4e3a\u4e00\u4e2a secret\uff0c\u7136\u540e\u5728 GitHub Actions \u914d\u7f6e\u6587\u4ef6\u4e2d\u5f15\u7528\u8fd9\u4e2a secret\u3002</p> <ol> <li>\u8fdb\u5165 GitHub \u4ed3\u5e93\u3002</li> <li>\u5728\u4ed3\u5e93\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb\u4ed3\u5e93\u7684\u540d\u79f0\u3002</li> <li>\u5728\u4ed3\u5e93\u7684\u4e0a\u65b9\u5bfc\u822a\u680f\u4e2d\uff0c\u70b9\u51fb \"Settings\"\uff08\u8bbe\u7f6e\uff09\u9009\u9879\u3002</li> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\u9009\u62e9 \"Secrets\"\uff08\u5bc6\u94a5\uff09\u3002</li> <li>\u70b9\u51fb \"New repository secret\"\uff08\u65b0\u5efa\u4ed3\u5e93\u5bc6\u94a5\uff09\u3002</li> <li>\u5728 \"Name\" \u4e2d\u8f93\u5165 <code>GH_TOKEN_BLOG</code>\uff0c\u7136\u540e\u5728 \"Value\" \u4e2d\u7c98\u8d34\u4e4b\u524d\u590d\u5236\u7684\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\u3002</li> <li>\u70b9\u51fb \"Add secret\"\uff08\u6dfb\u52a0\u5bc6\u94a5\uff09\u3002</li> <li>\u5728\u4f60\u7684 GitHub Actions \u914d\u7f6e\u6587\u4ef6\uff08\u4f8b\u5982 <code>.github/workflows/build-and-deploy.yml</code>\uff09\u4e2d\uff0c\u4f7f\u7528 <code>${{ secrets.GH_TOKEN_BLOG }}</code> \u5f15\u7528\u8be5\u4e2a\u4eba\u8bbf\u95ee\u4ee4\u724c\uff0c\u4f8b\u5982\uff1a</li> </ol>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GitHub/%E9%80%9A%E8%BF%87GitHub%E7%9A%84Actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/#3-iblog_dev","title":"3. iblog_dev \u5f00\u53d1\u4ed3\u5e93\u76f8\u5173\u914d\u7f6e","text":"<p>\u5728 iblog_dev \u4ed3\u5e93\u7684\u8bbe\u7f6e\u4e2d\uff0c\u8f6c\u5230 \"Settings\" -&gt; \"Secrets\"\uff0c\u6dfb\u52a0\u4e24\u4e2a\u5bc6\u94a5\uff1a</p> <ul> <li>GH_TOKEN_BLOG: \u7528\u4e8e\u8bbf\u95ee blog \u4ed3\u5e93\u7684 Personal Access Token\u3002\u786e\u4fdd\u8be5 Token \u5177\u6709\u8bfb\u5199\u4ed3\u5e93\u7684\u6743\u9650\u3002</li> <li>REPO_NAME_BLOG: iblog \u4ed3\u5e93\u7684\u540d\u79f0\u3002</li> </ul> <p>\u5728\u4f60\u7684 iblog_dev \u5f00\u53d1\u4ed3\u5e93\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code>.github/workflows/build-and-deploy.yml</code> \u7684\u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>name: Build and Deploy\n\non:\n  push:\n    branches:\n      - master  # \u4f60\u7684\u9ed8\u8ba4\u5206\u652f\n\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout Repository\n        uses: actions/checkout@v2\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 14\n\n      - name: Install Dependencies\n        run: npm install\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Blog Repository\n        run: |\n          git clone https://${{ secrets.GH_TOKEN_BLOG }}@github.com/{{username}}/{{depot}}.git iblog\n          cd iblog\n          git config --global user.email \"username@gmail.com\"\n          git config --global user.name \"username\"\n          rm -rf ./*\n          cp -r ../dist/* .\n          git add .\n          git commit -m \"update\"\n          git push\n        env:\n          REPO_NAME_BLOG: ${{ secrets.REPO_NAME_BLOG }}\n</code></pre> <p>\u5b9e\u73b0\u4e86\u5f00\u53d1\u4ed3\u5e93iblog_dev\u6709\u4ee3\u7801push\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u81ea\u52a8\u6253\u5305\u90e8\u7f72\u5230 iblog \u4ed3\u5e93\u4e2d\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/","title":"\u8bf4\u660e","text":"<ul> <li>\u4e3b\u9898\u6587\u6863\uff1ahttps://squidfunk.github.io/mkdocs-material/getting-started/</li> </ul> <pre><code>pip install mkdocs # pip3 install mkdocs\nmkdocs new my-project\ncd my-project\nmkdocs serve\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/Mac%E5%AE%89%E8%A3%85MkDocs/","title":"Mac\u5b89\u88c5MkDocs","text":"<p>\u5728macOS\u4e0a\u5b89\u88c5MkDocs\u662f\u4e00\u4e2a\u76f8\u5bf9\u7b80\u5355\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u901a\u8fc7pip\u6765\u5b8c\u6210\u3002pip\u662fPython\u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0cMkDocs\u662f\u7528Python\u7f16\u5199\u7684\uff0c\u6240\u4ee5\u9996\u5148\u4f60\u9700\u8981\u786e\u4fdd\u4f60\u7684\u7cfb\u7edf\u4e0a\u5b89\u88c5\u4e86Python\u548cpip\u3002</p> <p>\u4ee5\u4e0b\u662f\u5b89\u88c5MkDocs\u7684\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u6253\u5f00\u7ec8\u7aef\u3002</p> </li> <li> <p>\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u4e86Python\u548cpip\u3002\u53ef\u4ee5\u901a\u8fc7\u5728\u7ec8\u7aef\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u6765\u68c0\u67e5\uff1a</p> </li> </ol> <pre><code>python --version\npip --version\n</code></pre> <p>\u5982\u679c\u7cfb\u7edf\u6ca1\u6709\u5b89\u88c5Python\u6216pip\uff0c\u4f60\u9700\u8981\u5148\u5b89\u88c5\u5b83\u4eec\u3002macOS\u901a\u5e38\u81ea\u5e26Python\uff0c\u4f46\u4f60\u53ef\u4ee5\u4ecePython\u5b98\u7f51\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684\u5b89\u88c5\u5305\uff0c\u901a\u5e38pip\u4f1a\u968fPython\u4e00\u8d77\u5b89\u88c5\u3002</p> <ol> <li>\u4f7f\u7528pip\u5b89\u88c5MkDocs\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a</li> </ol> <pre><code>pip install mkdocs\n</code></pre> <ol> <li>\u9a8c\u8bc1\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u68c0\u67e5MkDocs\u662f\u5426\u6b63\u786e\u5b89\u88c5\uff1a</li> </ol> <pre><code>mkdocs --version\n</code></pre> <p>\u5982\u679c\u51fa\u73b0\u7248\u672c\u53f7\uff0c\u8868\u793aMkDocs\u5df2\u7ecf\u6210\u529f\u5b89\u88c5\u5728\u4f60\u7684macOS\u4e0a\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684\u7cfb\u7edf\u4e2d\u540c\u65f6\u5b58\u5728Python 2\u548cPython 3\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528pip3\u547d\u4ee4\u6765\u5b89\u88c5\uff1a</p> <pre><code>pip3 install mkdocs\n</code></pre> <p>\u53e6\u5916\uff0c\u4e3a\u4e86\u907f\u514d\u6743\u9650\u95ee\u9898\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5728\u547d\u4ee4\u524d\u52a0\u4e0asudo\u6765\u83b7\u53d6\u7ba1\u7406\u5458\u6743\u9650\uff1a</p> <pre><code>sudo pip install mkdocs\n</code></pre> <p>\u6216\u8005\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fPython 3\uff1a</p> <pre><code>sudo pip3 install mkdocs\n</code></pre> <p>\u8f93\u5165\u7ba1\u7406\u5458\u5bc6\u7801\u540e\uff0cpip\u5c06\u4f1a\u5b89\u88c5MkDocs\u53ca\u5176\u6240\u6709\u4f9d\u8d56\u9879\u3002\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f60\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528MkDocs\u6765\u6784\u5efa\u548c\u7ba1\u7406\u4f60\u7684\u6587\u6863\u9879\u76ee\u4e86\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/","title":"MkDocs\u4f7f\u7528","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_1","title":"\u521b\u5efa\u65b0\u9879\u76ee","text":"<pre><code>mkdocs new my-project                   # \u201cmy-project\u201d\u4e3a\u9879\u76ee\u540d\u79f0\uff0c\u53ef\u81ea\u5b9a\u4e49\n</code></pre> <p>\u6b64\u65f6\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a\u201dmy-project\u201c\u7684\u6587\u4ef6\u5939\uff0c\u6253\u5f00\u8be5\u6587\u4ef6\u5939\u53ef\u53d1\u73b0\uff0c\u5b83\u5305\u542b\u5982\u4e0b\u6587\u4ef6\uff1a</p> <pre><code>my-project/mkdocs.yml                   # YAML \u914d\u7f6e\u6587\u4ef6\nmy-project/Docs/index.md            # \u4e3b\u9875\u5185\u5bb9\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_2","title":"\u4e3b\u9898","text":"<p>\u53ef\u4ee5\u5b89\u88c5 <code>material</code> \u4e3b\u9898\uff0c\u8fd9\u4e2a\u6bd4\u8f83\u7f8e\u89c2</p> <pre><code>pip install mkdocs mkdocs-material\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#yaml","title":"\u914d\u7f6e YAML \u6587\u4ef6","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_3","title":"\u9879\u76ee\u4fe1\u606f","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#site_name","title":"site_name","text":"<p>\u8fd9\u662f\u5fc5\u8981\u7684\u8bbe\u7f6e\uff0c\u5e76\u4e14\u5e94\u8be5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7528\u4f5c\u9879\u76ee\u6587\u6863\u7684\u4e3b\u8981\u6807\u9898\u3002\u4f8b\u5982\uff1a</p> <pre><code>site_name: My Docs\n</code></pre> <p>\u6e32\u67d3\u4e3b\u9898\u65f6\uff0c\u6b64\u8bbe\u7f6e\u5c06\u4f5c\u4e3a<code>site_name</code>\u4e0a\u4e0b\u6587\u53d8\u91cf\u4f20\u9012\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#site_url","title":"site_url","text":"<p>\u8bbe\u7f6e\u7f51\u7ad9\u7684URL\u5730\u5740\u3002\u4f8b\u5982\uff1a</p> <pre><code>site_url: https://xxxx.github.io\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#site_description","title":"site_description","text":"<p>\u8bbe\u7f6e\u7ad9\u70b9\u8bf4\u660e\uff0c\u8fd9\u4f1a\u5c06meta\u6807\u7b7e\u6dfb\u52a0\u5230\u751f\u6210\u7684HTML\u6807\u5934\u4e2d\u3002</p> <p>\u9ed8\u8ba4\u503c\uff1a<code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#site_author","title":"site_author","text":"<p>\u8bbe\u7f6e\u4f5c\u8005\u7684\u59d3\u540d\uff0c\u8fd9\u4f1a\u5c06meta\u6807\u7b7e\u6dfb\u52a0\u5230\u751f\u6210\u7684HTML\u6807\u5934\u4e2d\u3002</p> <p>\u9ed8\u8ba4\u503c\uff1a <code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#repo_name","title":"repo_name","text":"<p>\u5b58\u50a8\u5e93\u540d\u79f0\uff0c\u8bbe\u7f6e\u540e\u5728\u6bcf\u4e2a\u9875\u9762\u4e0a\u63d0\u4f9b\u6307\u5411\u60a8\u7684\u5b58\u50a8\u5e93\u7684\u94fe\u63a5\u7684\u540d\u79f0\u3002</p> <p>\u9ed8\u8ba4\u503c\uff1a<code>'GitHub'</code>\uff0c<code>'Bitbucket'</code>\u6216\u8005<code>'GitLab'</code>\u5982\u679c<code>repo_url</code>\u5339\u914d\u8fd9\u4e9b\u57df\uff0c\u5219\u4e3a\u7684\u4e3b\u673a\u540d<code>repo_url</code>\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#repo_url","title":"repo_url","text":"<p>\u5b58\u50a8\u5e93\u5730\u5740\uff0c\u8bbe\u7f6e\u540e\u5728\u6bcf\u4e2a\u9875\u9762\u4e0a\u63d0\u4f9b\u6307\u5411\u60a8\u7684\u5b58\u50a8\u5e93\uff08GitHub\uff0cBitbucket\uff0cGitLab\u7b49\uff09\u7684\u94fe\u63a5\u3002\u4f8b\u5982:</p> <pre><code>repo_url: https://github.com/example/repository/\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#edit_uri","title":"edit_uri","text":"<p>\u5728\u7ebf\u7f16\u8f91\u8def\u5f84\uff0c\u8bbe\u7f6e\u540e\uff0c\u76f4\u63a5\u63d0\u4f9b\u4e00\u4e2a\u94fe\u63a5\u5230\u6e90\u5b58\u50a8\u5e93\u4e2d\u7684\u9875\u9762\u3002\u8fd9\u4f7f\u67e5\u627e\u548c\u7f16\u8f91\u9875\u9762\u6e90\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u5982\u679c<code>repo_url</code>\u672a\u8bbe\u7f6e\uff0c\u5219\u5ffd\u7565\u6b64\u9009\u9879\u3002</p> <p>\u6ce8\u610f</p> <p>\u5bf9\u4e8eGitHub\u6216GitLab\u6258\u7ba1\u7684\u5b58\u50a8\u5e93\uff0c<code>edit_uri</code> \u5c06\u81ea\u52a8\u8bbe\u7f6e\u4e3a<code>edit/master/docs/</code>\uff08\u8bf7\u6ce8\u610f<code>edit</code>\u8def\u5f84\u548c<code>master</code>\u5206\u652f\uff09\u3002 \u5bf9\u4e8e\u7531Bitbucket\u6258\u7ba1\u7684\u5b58\u50a8\u5e93\uff0c\u7b49\u6548\u9879<code>edit_uri</code>\u5c06\u81ea\u52a8\u8bbe\u7f6e\u4e3a<code>src/default/docs/</code>\uff08\u8bf7\u6ce8\u610f<code>src</code>\u8def\u5f84\u548c<code>default</code> \u5206\u652f\uff09\u3002 \u8981\u4f7f\u7528\u4e0e\u9ed8\u8ba4\u503c\u4e0d\u540c\u7684URI\uff08\u4f8b\u5982\uff0c\u4e0d\u540c\u7684\u5206\u652f\uff09\uff0c\u53ea\u9700\u5c06\u8bbe\u7f6e<code>edit_uri</code>\u4e3a\u6240\u9700\u7684\u5b57\u7b26\u4e32\u3002\u5982\u679c\u60a8\u4e0d\u5e0c\u671b\u5728\u9875\u9762\u4e0a\u663e\u793a\u4efb\u4f55\u201c\u7f16\u8f91URL\u94fe\u63a5\u201d\uff0c\u8bf7\u8bbe\u7f6e<code>edit_uri</code>\u4e3a\u7a7a\u5b57\u7b26\u4e32\u4ee5\u7981\u7528\u81ea\u52a8\u8bbe\u7f6e\u3002</p> <p>\u6ce8\u610f</p> <p>\u5728GitHub\u548cGitLab\u4e0a\uff0c\u9ed8\u8ba4\u7684\u201c\u7f16\u8f91\u201d\u8def\u5f84\uff08<code>edit/master/docs/</code>\uff09\u5728\u5728\u7ebf\u7f16\u8f91\u5668\u4e2d\u6253\u5f00\u9875\u9762\u3002\u6b64\u529f\u80fd\u8981\u6c42\u7528\u6237\u62e5\u6709\u5e76\u767b\u5f55\u5230GitHub / GitLab\u5e10\u6237\u3002\u5426\u5219\uff0c\u7528\u6237\u5c06\u88ab\u91cd\u5b9a\u5411\u5230\u767b\u5f55/\u6ce8\u518c\u9875\u9762\u3002\u6216\u8005\uff0c\u4f7f\u7528\u201c blob\u201d\u8def\u5f84\uff08<code>blob/master/docs/</code>\uff09\u6253\u5f00\u4e00\u4e2a\u53ea\u8bfb\u89c6\u56fe\uff0c\u8be5\u89c6\u56fe\u652f\u6301\u533f\u540d\u8bbf\u95ee\u3002</p> <p>\u9ed8\u8ba4\u503c\uff1a<code>edit/master/docs/</code>\u7528\u4e8eGitHub\u548cGitLab\u5b58\u50a8\u5e93\u6216 <code>src/default/docs/</code>Bitbucket\u5b58\u50a8\u5e93\uff08\u5982\u679c<code>repo_url</code>\u4e0e\u8fd9\u4e9b\u57df\u5339\u914d\uff09\uff0c\u5426\u5219<code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#docs_dir","title":"docs_dir","text":"<p>\u5305\u542b\u6587\u6863\u6e90markdown\u6587\u4ef6\u7684\u76ee\u5f55\u3002\u5b83\u53ef\u4ee5\u662f\u76f8\u5bf9\u76ee\u5f55\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u76f8\u5bf9\u4e8e\u5305\u542b\u60a8\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u76ee\u5f55\u6765\u89e3\u6790\u7684\uff0c\u6216\u8005\u53ef\u4ee5\u662f\u4ece\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6839\u76ee\u5f55\u5f00\u59cb\u7684\u7edd\u5bf9\u76ee\u5f55\u8def\u5f84\u3002</p> <p>\u9ed8\u8ba4\u503c\uff1a<code>'docs'</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#copyright","title":"copyright","text":"<p>\u8bbe\u7f6e\u8981\u901a\u8fc7\u4e3b\u9898\u5305\u542b\u5728\u6587\u6863\u4e2d\u7684\u7248\u6743\u4fe1\u606f\u3002\u4f8b\u5982\uff1a</p> <pre><code>copyright: \"Copyright  &amp;copy;  2019  -  2020  xxxx\"\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>null</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_4","title":"\u9875\u9762\u98ce\u683c","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#material","title":"\u542f\u7528 material \u4e3b\u9898","text":"<pre><code>theme:\n  name: 'material'\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_5","title":"\u914d\u8272","text":"<p>\u5728Google\u7684Material Design \u8c03\u8272\u677f\u4e0a\uff0c\u4e3a\u6bcf\u79cd\u4e3b\u9898\u8272\u548c\u5f3a\u8c03\u8272\u5b9a\u4e49\u4e86\u9ed8\u8ba4\u8272\u76f8\uff0c\u8fd9\u4f7f\u66f4\u6539\u4e3b\u9898\u7684\u6574\u4f53\u5916\u89c2\u975e\u5e38\u5bb9\u6613\u3002\u53ea\u9700\u4f7f\u7528\u4ee5\u4e0b\u53d8\u91cf\u8bbe\u7f6e\u539f\u8272\u548c\u5f3a\u8c03\u8272\uff1a</p> <pre><code>theme:\n  palette:\n    primary: 'indigo'\n    accent: 'indigo'\n</code></pre> <p>\u989c\u8272\u540d\u79f0\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f46\u5fc5\u987b\u4e0e\u201c\u6750\u6599\u8bbe\u8ba1\u201d\u8c03\u8272\u677f\u7684\u540d\u79f0\u5339\u914d\u3002\u6709\u6548\u503c\u662f\uff1a<code>red</code>\uff0c<code>pink</code>\uff0c<code>purple</code>\uff0c<code>deep purple</code>\uff0c<code>indigo</code>\uff0c<code>blue</code>\uff0c<code>light blue</code>\uff0c<code>cyan</code>\uff0c<code>teal</code>\uff0c<code>green</code>\uff0c<code>light green</code>\uff0c<code>lime</code>\uff0c<code>yellow</code>\uff0c<code>amber</code>\uff0c<code>orange</code>\uff0c<code>deep orange</code>\uff0c<code>brown</code>\uff0c<code>grey</code>\uff0c<code>blue grey</code>\u548c <code>white</code>\u3002\u540e\u56db\u79cd\u989c\u8272\u53ea\u80fd\u7528\u4f5c\u4e3b\u9898\u8272\u3002</p> <p>\u4e3b\u9898\u8272</p> <p></p> <p>\u5f3a\u8c03\u8272</p> <p></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#logo","title":"\u7f51\u9875Logo","text":"<p>Logo \u5e94\u4e3a\u77e9\u5f62\uff0c\u6700\u5c0f\u5206\u8fa8\u7387\u4e3a128x128\uff0c\u7559\u51fa\u4e00\u5b9a\u7684\u8fb9\u7f18\u7a7a\u95f4\uff0c\u5e76\u5728\u900f\u660e\u5730\u9762\u4e0a\u7531\u9ad8\u5bf9\u6bd4\u5ea6\u533a\u57df\u7ec4\u6210\uff0c\u56e0\u4e3a\u5b83\u5c06\u653e\u7f6e\u5728\u5f69\u8272\u6807\u9898\u680f\u3002\u53ea\u9700\u521b\u5efa\u6587\u4ef6\u5939<code>docs/images</code>\uff0c\u6dfb\u52a0Logo\u5e76\u5c06\u5176\u5d4c\u5165\uff1a</p> <pre><code>theme:\n  logo: 'images/logo.svg'\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a <code>school</code></p> <p>\u6b64\u5916\uff0c\u53ef\u4ee5\u901a\u8fc7\u4eceMaterial Design\u56fe\u6807\u5b57\u4f53\u4e2d\u8bbe\u7f6e\u4efb\u610f\u8fde\u5b57\uff08\u6216Unicode\u4ee3\u7801\u70b9\uff09\u6765\u66f4\u6539\u9ed8\u8ba4\u56fe\u6807\uff0c\u4f8b\u5982:</p> <pre><code>theme:\n  logo:\n    icon: 'cloud'` \n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_6","title":"\u7f51\u7ad9\u56fe\u6807","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u5c06<code>favicon</code>\u53d8\u91cf\u8bbe\u7f6e\u4e3a<code>.ico</code>\u6216\u56fe\u50cf\u6587\u4ef6\u6765\u66f4\u6539\u9ed8\u8ba4\u56fe\u6807\u3002</p> <pre><code>theme:\n  favicon: 'assets/images/favicon.ico'` \n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>assets/images/favicon.png</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_7","title":"\u6587\u672c\u98ce\u683c","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_8","title":"\u8bed\u8a00","text":"<p>\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6307\u5b9a\u8bed\u8a00\uff1a</p> <pre><code>theme:\n  language: 'en'` \n</code></pre> <p>material for mkdocs \u652f\u6301\u56fd\u9645\u5316\uff08i18n\uff09\uff0c\u5e76\u63d0\u4f9b\u4ee5\u4e0b\u8bed\u8a00\u7684\u6240\u6709\u6a21\u677f\u53d8\u91cf\u548c\u6807\u7b7e\u7684\u7ffb\u8bd1\uff1a</p> Available languages <code>af</code> / Afrikaans <code>ar</code> / Arabic <code>ca</code> / Catalan <code>cs</code> / Czech <code>et</code> / Estonian <code>de</code> / German <code>hr</code> / Croatian <code>ja</code> / Japanese <code>ro</code> / Romanian <code>da</code> / Danish <code>nl</code> / Dutch <code>en</code> / English <code>fi</code> / Finnish <code>fr</code> / French <code>gl</code> / Galician <code>gr</code> / Greek <code>he</code> / Hebrew <code>hi</code> / Hindi <code>hu</code> / Hungarian <code>id</code> / Indonesian <code>it</code> / Italian <code>kr</code> / Korean <code>no</code> / Norwegian <code>nn</code> / Norwegian <code>fa</code> / Persian <code>pl</code> / Polish <code>pt</code> / Portugese <code>ru</code> / Russian <code>sr</code> / Serbian <code>sh</code> / Serbo-Croatian <code>sk</code> / Slovak <code>th</code> / Thai <code>vi</code> / Vietnamese <code>si</code> / Slovenian <code>es</code> / Spanish <code>sv</code> / Swedish <code>tr</code> / Turkish <code>uk</code> / Ukrainian <code>zh</code> / Chinese (Simplified) <code>zh-TW</code> / Chinese (Taiwanese) <code>zh-Hant</code> / Chinese (Traditional)"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_9","title":"\u5b57\u4f53","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e3b\u9898\u5305\u542bRoboto\u5b57\u4f53\u7cfb\u5217\uff0c\u5c24\u5176\u662f\u6587\u672c\u7684\u5e38\u89c4 sans-serif \u7c7b\u578b\u548c<code>monospaced</code>\u4ee3\u7801\u7684\u7c7b\u578b\u3002\u4e24\u79cd\u5b57\u4f53\u5747\u4eceGoogle\u5b57\u4f53\u52a0\u8f7d\uff0c\u5e76\u4e14\u53ef\u4ee5\u66f4\u6539\u4e3a\u5176\u4ed6\u5b57\u4f53\uff0c\u4f8b\u5982Ubuntu\u5b57\u4f53\u5bb6\u65cf\uff1a</p> <pre><code>theme:\n  font:\n    text: 'Ubuntu'\n    code: 'Ubuntu  Mono'\n</code></pre> <p>\u6587\u672c\u5b57\u4f53\u5c06\u4ee5\u6743\u91cd400\u548c700\u52a0\u8f7d\uff0c<code>monospaced</code>\u5b57\u4f53\u4ee5\u5e38\u89c4\u6743\u91cd\u52a0\u8f7d\u3002\u5982\u679c\u60a8\u60f3\u4ece\u5176\u4ed6\u76ee\u6807\u52a0\u8f7d\u5b57\u4f53\uff0c\u6216\u8005\u4e0d\u60f3\u4f7f\u7528Google\u5b57\u4f53\u52a0\u8f7d\uff0c\u53ea\u9700\u5c06\u5176\u8bbe\u7f6e<code>font</code>\u4e3a<code>false</code>\uff1a</p> <pre><code>theme:\n  font: false\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>Roboto</code>\u548c<code>Roboto Mono</code></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_10","title":"\u6587\u672c\u65b9\u5411","text":"<p>material \u540c\u65f6\u652f\u6301\u4ece\u5de6\u5230\u53f3\uff08<code>ltr</code>\uff09\u548c\u4ece\u53f3\u5230\u5de6\uff08<code>rtl</code>\uff09\u6587\u672c\u65b9\u5411\u3002\u8fd9\u4f7f\u66f4\u591a\u8bed\u8a00\uff08\u4f8b\u5982\u963f\u62c9\u4f2f\u8bed\uff0c\u5e0c\u4f2f\u6765\u8bed\uff0c\u53d9\u5229\u4e9a\u8bed\u548c\u5176\u4ed6\u8bed\u8a00\uff09\u53ef\u4ee5\u4e0e\u4e3b\u9898\u4e00\u8d77\u4f7f\u7528\uff1a</p> <pre><code>theme:\n  direction: 'rtl'\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a\u4e0e\u7ed9\u5b9a\u4e3b\u9898\u8bed\u8a00\u7684\u6700\u4f73\u5339\u914d\uff0c\u81ea\u52a8\u8bbe\u7f6e</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_11","title":"\u6807\u7b7e","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6574\u4e2a\u5bfc\u822a\u5728\u5de6\u4fa7\u4f7f\u7528\u53ef\u6298\u53e0\u90e8\u5206\u5448\u73b0\uff0c\u56e0\u4e3a\u6c34\u5e73\u5bfc\u822a\u5728\u8f83\u5c0f\u7684\u5c4f\u5e55\u4e0a\u7ecf\u5e38\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u5927\u578b\u6587\u6863\u9879\u76ee\uff0c\u6709\u65f6\u9700\u8981\u6dfb\u52a0\u53e6\u4e00\u4e2a\u5bfc\u822a\u5c42\u6765\u5206\u9694\u9876\u5c42\u90e8\u5206\u3002material \u901a\u8fc7 tabs \u529f\u80fd\u5b9e\u73b0\u4e86\u8fd9\u4e00\u70b9\uff0c\u53ef\u4ee5\u901a\u8fc7\u5c06\u76f8\u5e94\u529f\u80fd\u6807\u8bb0\u8bbe\u7f6e\u4e3a\u6765\u542f\u7528<code>true</code>\uff1a</p> <pre><code>theme:\n  feature:\n    tabs: true\n</code></pre> <p>\u9ed8\u8ba4\u503c\uff1a<code>fasle</code></p> <p>\u6ce8\u610f</p> <p>\u542f\u7528\u6807\u7b7e\u9875\u540e\uff0c\u9876\u5c42\u533a\u57df\u5c06\u5728\u6807\u9898\u6b63\u4e0b\u65b9\u7684\u9644\u52a0\u5c42\u4e2d\u5448\u73b0\u3002\u5de6\u4fa7\u7684\u5bfc\u822a\u5c06\u4ec5\u5305\u542b\u6240\u9009\u90e8\u5206\u4e2d\u5305\u542b\u7684\u9875\u9762\u3002\u6b64\u5916\uff0c\u5728\u9879\u76ee\u7684\u5185\u90e8\u5b9a\u4e49\u7684\u9876\u7ea7\u9875\u9762<code>mkdocs.yml</code>\u5c06\u88ab\u5206\u7ec4\u5728\u7b2c\u4e00\u4e2a\u9009\u9879\u5361\u4e0b\uff0c\u8be5\u9009\u9879\u5361\u5c06\u63a5\u6536\u7b2c\u4e00\u9875\u7684\u6807\u9898\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_12","title":"\u5bfc\u822a\u680f","text":"<p>\u7528\u4e8e\u786e\u5b9a\u7ad9\u70b9\u7684\u5168\u5c40\u5bfc\u822a\u7684\u683c\u5f0f\u548c\u5e03\u5c40\u3002\u6700\u7b80\u5355\u7684\u5bfc\u822a\u914d\u7f6e\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>nav:\n    - 'index.md'\n    - 'about.md' \n</code></pre> <p>\u6ce8\u610f</p> <p>\u5bfc\u822a\u914d\u7f6e\u4e2d\u7684\u6240\u6709\u8def\u5f84\u90fd\u5fc5\u987b\u76f8\u5bf9\u4e8e<code>docs_dir</code> \u914d\u7f6e\u9009\u9879\u3002\u5982\u679c\u8be5\u9009\u9879\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u503c\uff0c<code>docs</code>\u5219\u4e0a\u8ff0\u914d\u7f6e\u7684\u6e90\u6587\u4ef6\u5c06\u4f4d\u4e8e<code>docs/index.md</code>\u548c <code>docs/about.md</code>\u3002</p> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u5c06\u5bfc\u81f4\u5728\u9876\u5c42\u521b\u5efa\u4e24\u4e2a\u5bfc\u822a\u9879\uff0c\u5e76\u6839\u636eMarkdown\u6587\u4ef6\u7684\u5185\u5bb9\uff08\u5982\u679c\u5728\u6587\u4ef6\u4e2d\u672a\u5b9a\u4e49\u6807\u9898\u7684\u8bdd\uff09\u4ece\u6587\u4ef6\u540d\u63a8\u65ad\u5176\u6807\u9898\u3002\u8981\u8986\u76d6<code>nav</code>\u8bbe\u7f6e\u4e2d\u7684\u6807\u9898\uff0c\u8bf7\u5728\u6587\u4ef6\u540d\u4e4b\u524d\u6dfb\u52a0\u4e00\u4e2a\u6807\u9898\uff1a</p> <pre><code>nav:\n    - Home: 'index.md'\n    - About: 'about.md'\n</code></pre> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u5728\u5bfc\u822a\u4e2d\u4e3a\u9875\u9762\u5b9a\u4e49\u4e86\u6807\u9898\uff0c\u5219\u8be5\u6807\u9898\u5c06\u5728\u8be5\u9875\u9762\u7684\u6574\u4e2a\u7ad9\u70b9\u4e2d\u4f7f\u7528\uff0c\u5e76\u5c06\u8986\u76d6\u9875\u9762\u672c\u8eab\u5185\u5b9a\u4e49\u7684\u4efb\u4f55\u6807\u9898\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7\u5728\u90e8\u5206\u6807\u9898\u4e0b\u5217\u51fa\u76f8\u5173\u9875\u9762\u6765\u521b\u5efa\u5bfc\u822a\u5b50\u90e8\u5206\u3002\u4f8b\u5982\uff1a</p> <pre><code>nav:\n    - Home: 'index.md'\n    - User Guide:\n        - 'Writing  your  docs': 'writing-your-docs.md'\n        - 'Styling  your  docs': 'styling-your-docs.md'\n    - About:\n        - 'License': 'license.md'\n        - 'Release  Notes': 'release-notes.md'\n</code></pre> <p>\u901a\u8fc7\u4e0a\u8ff0\u914d\u7f6e\uff0c\u6211\u4eec\u5177\u6709\u4e09\u4e2a\u9876\u7ea7\u9879\uff1a\u201c\u4e3b\u9875\u201d\uff0c\u201c\u7528\u6237\u6307\u5357\u201d\u548c\u201c\u5173\u4e8e\u201d\u3002\u201c\u9996\u9875\u201d\u662f\u6307\u5411\u8be5\u7f51\u7ad9\u9996\u9875\u7684\u94fe\u63a5\u3002\u5728\u201c\u7528\u6237\u6307\u5357\u201d\u90e8\u5206\u4e0b\uff0c\u5217\u51fa\u4e86\u4e24\u4e2a\u9875\u9762\uff1a\u201c\u7f16\u5199\u6587\u6863\u201d\u548c\u201c\u6837\u5f0f\u5316\u6587\u6863\u201d\u3002\u5728\u201c\u5173\u4e8e\u201d\u90e8\u5206\u4e0b\uff0c\u53c8\u5217\u51fa\u4e86\u4e24\u4e2a\u9875\u9762\uff1a\u201c\u8bb8\u53ef\u8bc1\u201d\u548c\u201c\u53d1\u884c\u8bf4\u660e\u201d\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_13","title":"\u6269\u5c55\u529f\u80fd","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_14","title":"\u7f51\u7ad9\u641c\u7d22","text":"<p>\u7f51\u7ad9\u641c\u7d22\u662f\u4f7f\u7528lunr.js\u5b9e\u73b0\u7684\uff0c\u8be5\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5305\u62ec\u82f1\u8bed\u7684\u5355\u8bcd\uff0c\u800c\u5176\u4ed6\u8bed\u8a00\u7684\u8bcd\u5e72\u5305\u542b\u5728lunr-languages\u4e2d\uff0c\u8fd9\u4e24\u79cd\u8bed\u8a00\u90fd\u4e0e\u6b64\u4e3b\u9898\u96c6\u6210\u5728\u4e00\u8d77\u3002\u7d20\u6750\u4e3a\u7ed9\u5b9a\u7684\u4e3b\u9898\u8bed\u8a00\u9009\u62e9\u5339\u914d\u7684\uff08\u6216\u6700\u5339\u914d\u7684\uff09\u8bcd\u5e72\u3002<code>mkdocs.yml</code>\u901a\u8fc7\u663e\u5f0f\u5b9a\u4e49\u641c\u7d22\u8bed\u8a00\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u7684\u8bed\u8a00\u4e2d\u6fc0\u6d3b\u591a\u8bed\u8a00\u641c\u7d22\uff1a</p> <pre><code>extra:\n  search:\n    language: 'en,  de,  ru'\n</code></pre> <p>\u7f51\u7ad9\u641c\u7d22\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u8bed\u8a00\uff1a</p> Available language <code>da</code> / Danish <code>du</code> / Dutch <code>en</code> / English <code>fi</code> / Finnish <code>fr</code> / French <code>de</code> / German <code>hu</code> / Hungarian <code>it</code> / Italian <code>ja</code> / Japanese <code>no</code> / Norwegian <code>pt</code> / Portugese <code>ro</code> / Romanian <code>ru</code> / Russian <code>es</code> / Spanish <code>sv</code> / Swedish <code>tr</code> / Turkish <p>\u53ef\u4ee5\u5bf9\u8bcd\u7684\u5206\u9694\u7b26\u8fdb\u884c\u81ea\u5b9a\u4e49\uff0c\u8fd9\u53ef\u4ee5\u7d22\u5f15\u7531<code>-</code>\u6216\u5206\u9694\u7684\u5355\u8bcd\u90e8\u5206<code>.</code>\uff1a</p> <pre><code>extra:\n  search:\n    tokenizer: '[\\s\\-\\.]+'\n</code></pre> <p>\u6ce8\u610f</p> <p>\u76ee\u524d\uff0cLunr\u8bed\u8a00\u4e0d\u652f\u6301\u4e2d\u6587\u6216\u5176\u4ed6\u4e9a\u6d32\u8bed\u8a00\u3002\u4f46\u662f\uff0c\u5b9e\u8df5\u8bc1\u660e\uff0c\u53ef\u4f7f\u7528\u65e5\u8bed\u6765\u641c\u7d22\u4e2d\u6587\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_15","title":"\u793e\u4ea4\u5173\u7cfb","text":"<p>\u5728\u6587\u6863\u7684\u9875\u811a\u4e2d\u94fe\u63a5\u793e\u4ea4\u5e10\u6237\u3002<code>type</code>\u5fc5\u987b\u8868\u793a\u7c7b\u578b\uff0c\u4f8b\u5982<code>github</code>\uff0c<code>twitter</code>\u6216\u8005<code>linkedin</code>\uff0c<code>link</code>\u5fc5\u987b\u5305\u542b\u8981\u94fe\u63a5\u7684\u7f51\u5740\uff0c\u4f8b\u5982\uff1a</p> <pre><code>extra:\n  social:\n    - type: 'github'\n      link: 'https://github.com/xxxx'\n    - type: 'twitter'\n      link: 'https://twitter.com/xxxx'\n    - type: 'linkedin'\n      link: 'https://www.linkedin.com/in/xxxx'` \n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_16","title":"\u8c37\u6b4c\u5206\u6790","text":"<p>\u8bbe\u7f6eGoogle Analytics\uff08\u5206\u6790\uff09\u8ddf\u8e2a\u914d\u7f6e\u3002MkDocs\u53ef\u8f7b\u677e\u5c06\u7f51\u7ad9\u8ddf\u8e2a\u4e0eGoogle Analytics\uff08\u5206\u6790\uff09\u96c6\u6210\u3002\u9664\u4e86\u57fa\u672c\u8ddf\u8e2a\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u8ddf\u8e2a\u6240\u6709\u4f20\u51fa\u94fe\u63a5\u7684\u70b9\u51fb\u4ee5\u53ca\u7f51\u7ad9\u641c\u7d22\u7684\u4f7f\u7528\u65b9\u5f0f\u3002\u53ef\u4ee5\u5728\u9879\u76ee\u7684\u4e2d\u6fc0\u6d3b\u8ddf\u8e2a\uff1a</p> <pre><code>google_analytics:\n  - 'UA-XXXXXXXX-X'\n  - 'auto'\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_17","title":"\u8bc4\u8bba\u63d2\u4ef6","text":"<p>material \u5df2\u4e0eDisqus \u96c6\u6210\u5728\u4e00\u8d77\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u8981\u5728\u6587\u6863\u4e2d\u6dfb\u52a0\u6ce8\u91ca\u90e8\u5206\uff0c\u53ea\u9700\u8bbe\u7f6e\u4f60\u5728 Disqus \u91cc\u7684\u7b80\u79f0\uff1a</p> <pre><code>extra:\n  disqus: 'your-shortname'\n</code></pre> <p>\u6ce8\u610f</p> <p>\u9664\u4e86\u7d22\u5f15\u9875\u9762\u4e4b\u5916\uff0c\u6240\u6709\u9875\u9762\u4e0a\u90fd\u4f1a\u63d2\u5165\u6ce8\u91ca\u90e8\u5206\u3002\u6b64\u5916\uff0c\u5c06\u5728\u76ee\u5f55\u5e95\u90e8\u751f\u6210\u4e00\u4e2a\u65b0\u6761\u76ee\uff0c\u8be5\u6761\u76ee\u94fe\u63a5\u5230\u6ce8\u91ca\u90e8\u5206\u3002</p> <p>\u524d\u63d0</p> <p><code>site_url</code>\u5fc5\u987b\u8bbe\u7f6e\u503c\uff0c\u4ee5\u4f7fDisqus\u96c6\u6210\u6b63\u786e\u52a0\u8f7d\u3002</p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5728 markdown_extensions \u5b89\u88c5 meta \u4e3a\u7279\u5b9a\u9875\u9762\u542f\u7528\u6216\u7981\u7528 Disqus (\u4e0b\u8ff0)\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#markdown","title":"Markdown\u6269\u5c55","text":"<p>MkDocs\u9875\u9762\u5fc5\u987b\u4f7f\u7528Markdown\u5199\u4f5c\uff0cMarkdown\u662f\u4e00\u79cd\u8f7b\u91cf\u7ea7\u7684\u6807\u8bb0\u8bed\u8a00\uff0c\u5b83\u5bfc\u81f4\u6613\u4e8e\u9605\u8bfb\uff0c\u6613\u4e8e\u7f16\u5199\u7684\u7eaf\u6587\u672c\u6587\u6863\uff0c\u5e76\u4e14\u53ef\u4ee5\u4ee5\u53ef\u9884\u6d4b\u7684\u65b9\u5f0f\u8f6c\u6362\u4e3a\u6709\u6548\u7684HTML\u6587\u6863\u3002</p> <p>MkDocs\u4f7f\u7528Python-Markdown\u5e93\u5c06Markdown\u6587\u6863\u5448\u73b0\u4e3aHTML\u3002\u9664\u4e86\u5728\u6240\u6709Markdown\u5b9e\u73b0\u4e2d\u901a\u7528\u7684 \u57fa\u672cMarkdown\u8bed\u6cd5\uff0cMkDocs\u8fd8\u652f\u6301\u901a\u8fc7 Python-Markdown\u6269\u5c55 \u8bed\u6cd5\u3002\u5efa\u8bae\u9ed8\u8ba4\u542f\u7528\u4ee5\u4e0b\u6269\u5c55\uff1a</p> <pre><code>markdown_extensions:\n    - admonition                                                # \u6ce8\u89e3\u5757\u652f\u6301\n  - pymdownx.arithmatex                             # \u6570\u5b66\u516c\u5f0f\u7684TeX\u8bed\u6cd5\u652f\u6301\n  - pymdownx.betterem:\n      smart_enable: all\n  - pymdownx.caret\n  - pymdownx.critic\n  - pymdownx.details\n  - pymdownx.emoji:                                     # \u8868\u60c5\u652f\u6301\n      emoji_generator: !!python/name:pymdownx.emoji.to_svg\n  - pymdownx.inlinehilite\n  - pymdownx.magiclink\n  - pymdownx.mark\n  - pymdownx.smartsymbols\n  - pymdownx.superfences\n  - pymdownx.tasklist:                              # \u4efb\u52a1\u6e05\u5355\u652f\u6301\n      custom_checkbox: true\n  - pymdownx.tilde\n  - meta                                                            # \u5143\u6570\u636e\u652f\u6301\n</code></pre> <ul> <li>\u4f7f\u7528 arithmatex \u65f6\uff0c\u9664\u4e86\u6fc0\u6d3b\u6269\u5c55\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u5728<code>mkdocs.yml</code>\u4e2d\u5305\u62ecMathJax JavaScript\uff1a</li> </ul> <p><code>extra_javascript:   - 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML'</code> </p> <ul> <li>\u4f7f\u7528 meta \uff0c\u4e3a\u7279\u5b9a\u9875\u9762\u542f\u7528\u6216\u7981\u7528 Disqus\uff1a</li> </ul> <p>\u5143\u6570\u636e\u5728Markdown\u6587\u6863\u7684\u5f00\u5934\u4ee5\u4e00\u7cfb\u5217\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u7f16\u5199\uff0c\u5e76\u7531\u7ed3\u675f\u5143\u6570\u636e\u4e0a\u4e0b\u6587\u7684\u7a7a\u767d\u884c\u5206\u9694\u3002</p> <pre><code># \u53ef\u4ee5\u5728\u6bcf\u4e2a\u6587\u6863\u542f\u7528Disqus\uff1a\ndisqus: your-shortname\n\n# \u53ef\u4ee5\u901a\u8fc7\u5c06\u7279\u5b9a\u9875\u9762\u8bbe\u7f6e\u4e3a\u7a7a\u503c\u6765\u7981\u7528Disqus\uff1a\ndisqus:\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#mkdocsyml","title":"mkdocs.yml \u914d\u7f6e\u793a\u4f8b","text":"<pre><code># Project information\nsite_name: \u57fa\u4e8e Material for MkDocs \u642d\u5efa\u9759\u6001\u7f51\u9875\nsite_description: \nsite_author: derrors\nsite_url: https://derrors.github.io/\n\n\n# Repository\nrepo_name: 'Derrors/Derrors.github.io'\nrepo_url: 'https://github.com/Derrors/Derrors.github.io/'\n\n# Copyright\ncopyright: \"Copyright &amp;copy; 2019 - 2020 Qinghe Li\"\n\n\ntheme:\n  name: material\n  palette:\n    primary: 'deep purple'\n    accent: 'deep purple'\n\n  feature:\n    tabs: true\n\n  #font:\n    #text: 'Ubuntu'\n    #code: 'Ubuntu Mono'\n\n  favicon: 'assets/images/favicon.ico'\n\n  language: 'zh'\n\n\n# Customization\nextra:\n  social:\n    - type: github\n      link: https://github.com/Derrors\n\n  search:\n    language: 'ja'\n\n  disqus: 'derrors'\n\n\n# Extensions\nmarkdown_extensions:\n  - admonition\n  - codehilite:\n      guess_lang: false\n      linenums: false\n  - toc:\n      permalink: true\n  - footnotes\n  - meta\n  - def_list\n  - pymdownx.arithmatex\n  - pymdownx.betterem:\n      smart_enable: all\n  - pymdownx.caret\n  - pymdownx.critic\n  - pymdownx.details\n  - pymdownx.emoji:\n      emoji_generator: !!python/name:pymdownx.emoji.to_png\n  - pymdownx.inlinehilite\n  - pymdownx.magiclink\n  - pymdownx.mark\n  - pymdownx.smartsymbols\n  - pymdownx.superfences\n  - pymdownx.tasklist\n  - pymdownx.tilde\n\nextra_javascript:\n  - 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML'\n\n\n# Google Analytics\ngoogle_analytics:\n  - \"UA-156919721-1\"\n  - \"auto\"\n\nedit_uri:\n\nplugins:\n  - search\n\nnav:\n  - \u57fa\u4e8e Material for MkDocs \u642d\u5efa\u9759\u6001\u7f51\u9875: \n      - \u4ecb\u7ecd: \u4ecb\u7ecd.md\n      - \u5b89\u88c5 Mkdocs &amp;&amp; Material: \u5b89\u88c5 Mkdocs &amp;&amp; Material.md\n      - \u521b\u5efa\u65b0\u9879\u76ee: \u521b\u5efa\u65b0\u9879\u76ee.md\n      - \u914d\u7f6e YAML \u6587\u4ef6: \u914d\u7f6e YAML \u6587\u4ef6.md\n      - \u5f00\u53d1\u670d\u52a1\u5668\u5e76\u751f\u6210\u7f51\u9875: \u5f00\u53d1\u670d\u52a1\u5668\u5e76\u751f\u6210\u7f51\u9875.md\n      - \u5c06\u7f51\u9875\u90e8\u7f72\u5230 GitHub Pages: \u5c06\u7f51\u9875\u90e8\u7f72\u5230 GitHub Pages.md\n      - Reference: Reference.md\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E4%BD%BF%E7%94%A8/#_18","title":"\u53c2\u8003","text":"<ul> <li>https://derrors.github.io/</li> <li>https://www.mkdocs.org/getting-started/</li> <li>https://www.mkdocs.org/user-guide/choosing-your-theme/</li> <li>https://www.mkdocs.org/user-guide/choosing-your-theme/#mkdocs</li> <li>https://squidfunk.github.io/mkdocs-material/getting-started/</li> <li>https://github.com/squidfunk/mkdocs-material</li> <li>https://docs.rockylinux.org/zh/guides/contribute/navigation/</li> <li>https://derrors.github.io/%E9%85%8D%E7%BD%AE%20YAML%20%E6%96%87%E4%BB%B6/</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/MkDocs%E5%A2%9E%E5%8A%A0%E8%AF%84%E8%AE%BA/","title":"MkDocs\u589e\u52a0\u8bc4\u8bba","text":"<p>https://fengchao.pro/blog/comment-system-with-giscus/#%E4%B8%80%E9%94%AE%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F</p> <p>http://www.bryh.cn/a/586041.html</p> <ol> <li>\u5f88\u91cd\u8981\u7684\u4e00\u6b65</li> </ol> <pre><code>theme: \n  name: material\n  custom_dir: overrides  #\u4e3b\u8981\u662f\u8fd9\u4e00\u884c-\u81ea\u5b9a\u4e49\u76ee\u5f55\u5185\u5bb9-\u8bc4\u8bba\u7b49html\u6a21\u7248\u6587\u4ef6\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8MkDocs/","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528 <code>MkDocs</code>","text":"<p>\u6211\u60f3\u4f7f\u7528GitHub\u90e8\u7f72\u4e00\u4e2a\u7c7b\u4f3cdocs\u6216\u8005wiki\u7684\u4e2a\u4eba\u77e5\u8bc6\u6c89\u6dc0\u7684\u7f51\u7ad9\uff0c\u6709\u6ca1\u6709\u76f8\u5173\u7684\u6846\u67b6\uff1f\u652f\u6301markdown\u8bed\u6cd5\u7684\uff0c\u4e0d\u9700\u8981\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\u7684</p> <p>GitHub\u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3aGitHub Pages\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u6765\u6258\u7ba1\u9759\u6001\u7f51\u7ad9\u3002\u5bf9\u4e8e\u60a8\u60f3\u8981\u521b\u5efa\u7684\u7c7b\u4f3cdocs\u6216wiki\u7684\u4e2a\u4eba\u77e5\u8bc6\u6c89\u6dc0\u7f51\u7ad9\uff0c\u6709\u51e0\u4e2a\u6d41\u884c\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u53ef\u4ee5\u6ee1\u8db3\u60a8\u7684\u9700\u6c42\uff0c\u5b83\u4eec\u652f\u6301Markdown\u8bed\u6cd5\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\uff1a</p> <ol> <li> <p>Jekyll\uff1a\u662f\u6700\u4e3a\u5e7f\u6cdb\u4f7f\u7528\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u4e4b\u4e00\uff0c\u4e0eGitHub Pages\u6709\u975e\u5e38\u597d\u7684\u96c6\u6210\u3002\u60a8\u53ef\u4ee5\u76f4\u63a5\u5c06Jekyll\u7f51\u7ad9\u6e90\u4ee3\u7801\u6258\u7ba1\u5728GitHub\u4ed3\u5e93\u4e2d\uff0cGitHub\u4f1a\u81ea\u52a8\u5c06\u5176\u751f\u6210\u4e3a\u9759\u6001\u7f51\u7ad9\u3002</p> </li> <li> <p>Hugo\uff1a\u8fd9\u662f\u4e00\u4e2a\u7528Go\u7f16\u5199\u7684\u5f00\u6e90\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u3002\u5b83\u4ee5\u5feb\u901f\u7684\u9875\u9762\u751f\u6210\u901f\u5ea6\u800c\u95fb\u540d\uff0c\u540c\u65f6\u62e5\u6709\u4e30\u5bcc\u7684\u4e3b\u9898\u548c\u63d2\u4ef6\u3002\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u751f\u6210\u7ad9\u70b9\uff0c\u7136\u540e\u5c06\u751f\u6210\u7684\u9759\u6001\u6587\u4ef6\u63a8\u9001\u5230GitHub Pages\u3002</p> </li> <li> <p>MkDocs\uff1a\u8fd9\u662f\u4e00\u4e2a\u4e13\u95e8\u4e3a\u6587\u6863\u9879\u76ee\u6253\u9020\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u3002\u5982\u679c\u4f60\u7684\u91cd\u70b9\u662f\u521b\u5efa\u6280\u672f\u6587\u6863\u3001\u4e2a\u4eba\u7b14\u8bb0\u6216wiki\uff0cMkDocs\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\u3002\u5b83\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u76ee\u5f55\u7ed3\u6784\u548c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u6765\u751f\u6210\u9759\u6001\u7f51\u7ad9\u3002</p> </li> <li> <p>Docusaurus\uff1a\u662fFacebook\u56e2\u961f\u5f00\u6e90\u7684\u4e00\u4e2a\u9879\u76ee\uff0c\u4e13\u95e8\u7528\u6765\u6784\u5efa\u3001\u90e8\u7f72\u548c\u7ef4\u62a4\u5f00\u6e90\u9879\u76ee\u6587\u6863\u7684\u7f51\u7ad9\u3002\u5b83\u4e5f\u652f\u6301Markdown\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u751f\u6210\u641c\u7d22\u5f15\u64ce\u4f18\u5316\uff08SEO\uff09\u53cb\u597d\u7684\u6587\u6863\u7f51\u7ad9\uff0c\u5e76\u4e14\u652f\u6301\u6587\u6863\u7248\u672c\u7ba1\u7406\u3002</p> </li> <li> <p>VuePress\uff1a\u5982\u679c\u4f60\u719f\u6089Vue.js\uff0cVuePress\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u9009\u62e9\u3002\u5b83\u662f\u4e00\u4e2a\u57fa\u4e8eVue\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\uff0c\u4e13\u95e8\u4e3a\u6280\u672f\u6587\u6863\u800c\u8bbe\u8ba1\u3002VuePress\u7f51\u7ad9\u53ef\u4ee5\u8f7b\u6613\u5730\u90e8\u7f72\u5728GitHub Pages\u4e0a\u3002</p> </li> </ol> <p>\u8981\u4f7f\u7528GitHub Pages\u90e8\u7f72\u8fd9\u4e9b\u9759\u6001\u7f51\u7ad9\uff0c\u60a8\u9700\u8981\uff1a</p> <ul> <li>\u521b\u5efa\u4e00\u4e2aGitHub\u4ed3\u5e93\u3002</li> <li>\u9009\u62e9\u4e00\u4e2a\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u5e76\u6839\u636e\u5176\u6587\u6863\u521b\u5efa\u60a8\u7684\u7ad9\u70b9\u3002</li> <li>\u5c06\u751f\u6210\u7684\u9759\u6001\u6587\u4ef6\u63a8\u9001\u5230GitHub\u4ed3\u5e93\u7684\u7279\u5b9a\u5206\u652f\uff08\u901a\u5e38\u662f<code>gh-pages</code>\u5206\u652f\uff09\u3002</li> <li>\u5728\u4ed3\u5e93\u7684\u8bbe\u7f6e\u4e2d\u542f\u7528GitHub Pages\u670d\u52a1\uff0c\u5e76\u9009\u62e9\u76f8\u5e94\u7684\u5206\u652f\u548c\u76ee\u5f55\u3002</li> </ul> <p>\u6bcf\u4e2a\u751f\u6210\u5668\u90fd\u6709\u5176\u8be6\u7ec6\u7684\u6587\u6863\u6765\u6307\u5bfc\u60a8\u5982\u4f55\u521b\u5efa\u548c\u90e8\u7f72\u7f51\u7ad9\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u559c\u597d\u548c\u6280\u672f\u6808\u9009\u62e9\u6700\u9002\u5408\u60a8\u7684\u5de5\u5177\u3002</p> <p>\u4e3a\u4ec0\u4e48\u4e0d\u63a8\u8350hexo\uff1f\u4ed6\u6709\u4ec0\u4e48\u4e0d\u8db3\u5417</p> <p>\u62b1\u6b49\uff0c\u6211\u6ca1\u6709\u5728\u4e4b\u524d\u7684\u56de\u7b54\u4e2d\u63d0\u53caHexo\u3002\u5b9e\u9645\u4e0a\uff0cHexo \u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u6d41\u884c\u4e14\u4f18\u79c0\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\uff0c\u5b83\u7279\u522b\u53d7\u5230\u8bb8\u591a\u535a\u5ba2\u548c\u4e2a\u4eba\u7f51\u7ad9\u521b\u5efa\u8005\u7684\u559c\u7231\u3002Hexo \u4f7f\u7528 Node.js \u6784\u5efa\uff0c\u652f\u6301 Markdown \u683c\u5f0f\u7684\u6587\u6863\uff0c\u5e76\u4e14\u62e5\u6709\u5927\u91cf\u7684\u4e3b\u9898\u548c\u63d2\u4ef6\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p>Hexo \u7684\u4e00\u4e9b\u7279\u70b9\u5305\u62ec\uff1a</p> <ul> <li>\u5feb\u901f\u7684\u751f\u6210\u901f\u5ea6\u3002</li> <li>\u652f\u6301Markdown\u548c\u591a\u79cd\u6e32\u67d3\u5f15\u64ce\u3002</li> <li>\u4e30\u5bcc\u7684\u63d2\u4ef6\u7cfb\u7edf\uff0c\u53ef\u4ee5\u6269\u5c55\u7f51\u7ad9\u7684\u529f\u80fd\u3002</li> <li>\u7b80\u5355\u6613\u7528\uff0c\u914d\u7f6e\u7075\u6d3b\uff0c\u9002\u5408\u4e2a\u4eba\u535a\u5ba2\u548c\u6587\u6863\u7f51\u7ad9\u3002</li> <li>\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u4e0eGitHub Pages\u96c6\u6210\uff0c\u81ea\u52a8\u90e8\u7f72\u3002</li> </ul> <p>Hexo \u5e76\u6ca1\u6709\u7279\u522b\u7684\u4e0d\u8db3\uff0c\u5b83\u662f\u5426\u9002\u5408\u60a8\u4e3b\u8981\u53d6\u51b3\u4e8e\u60a8\u7684\u4e2a\u4eba\u9700\u6c42\u548c\u5bf9\u6280\u672f\u6808\u7684\u504f\u597d\u3002\u5982\u679c\u60a8\u719f\u6089Node.js\u73af\u5883\uff0c\u5e76\u4e14\u559c\u6b22Hexo\u63d0\u4f9b\u7684\u529f\u80fd\u548c\u751f\u6001\u7cfb\u7edf\uff0c\u5b83\u7edd\u5bf9\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</p> <p>\u9009\u62e9\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u65f6\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u8003\u8651\u4ee5\u4e0b\u56e0\u7d20\uff1a</p> <ul> <li>\u4f60\u662f\u5426\u5df2\u7ecf\u719f\u6089\u8be5\u5de5\u5177\u7684\u6280\u672f\u6808\uff08\u6bd4\u5982 Node.js, Ruby, Go \u7b49\uff09\u3002</li> <li>\u751f\u6210\u5668\u662f\u5426\u6709\u6d3b\u8dc3\u7684\u793e\u533a\u548c\u8db3\u591f\u7684\u7ef4\u62a4\u652f\u6301\u3002</li> <li>\u662f\u5426\u6709\u6ee1\u8db3\u60a8\u9700\u6c42\u7684\u4e3b\u9898\u548c\u63d2\u4ef6\u3002</li> <li>\u751f\u6210\u5668\u662f\u5426\u6613\u4e8e\u5b66\u4e60\u548c\u4f7f\u7528\u3002</li> <li>\u751f\u6210\u7684\u7f51\u7ad9\u662f\u5426\u6ee1\u8db3\u60a8\u5bf9\u6027\u80fd\u548cSEO\u7684\u8981\u6c42\u3002</li> </ul> <p>\u7efc\u5408\u8003\u8651\u4e0a\u8ff0\u56e0\u7d20\u540e\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u6700\u9002\u5408\u60a8\u9879\u76ee\u9700\u6c42\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\uff0c\u4e0d\u8bba\u662fHexo\u8fd8\u662f\u5176\u4ed6\u7684\u751f\u6210\u5668\u3002</p> <p>\u4f60\u63a8\u8350\u7684\u8fd9\u4e9b\u54ea\u4e2a\u65b9\u4fbf\u4e0eGitHub\u81ea\u52a8\u90e8\u7f72\u7ed3\u5408</p> <p>\u6240\u6709\u6211\u4e4b\u524d\u63d0\u5230\u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u90fd\u53ef\u4ee5\u65b9\u4fbf\u5730\u4e0eGitHub\u81ea\u52a8\u90e8\u7f72\u7ed3\u5408\u3002GitHub Pages \u4e0e\u8fd9\u4e9b\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u534f\u540c\u5de5\u4f5c\u7684\u65b9\u5f0f\u5927\u81f4\u76f8\u4f3c\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u901a\u8fc7GitHub\u7684\u6301\u7eed\u96c6\u6210/\u6301\u7eed\u90e8\u7f72(CI/CD)\u670d\u52a1\uff0c\u5982GitHub Actions\uff0c\u6765\u81ea\u52a8\u5316\u90e8\u7f72\u6d41\u7a0b\u3002</p> <p>\u4ee5\u4e0b\u662f\u8fd9\u4e9b\u751f\u6210\u5668\u7684\u7b80\u8981\u8bf4\u660e\u4ee5\u53ca\u5b83\u4eec\u5982\u4f55\u4e0eGitHub\u81ea\u52a8\u90e8\u7f72\u7ed3\u5408\uff1a</p> <ol> <li> <p>Jekyll: \u7531\u4e8e\u662fGitHub Pages\u5b98\u65b9\u652f\u6301\u7684\u751f\u6210\u5668\uff0c\u4e0eGitHub\u7684\u96c6\u6210\u662f\u6700\u65e0\u7f1d\u7684\u3002\u53ea\u9700\u5c06\u6e90\u6587\u4ef6\u63a8\u9001\u5230\u7279\u5b9a\u7684GitHub\u4ed3\u5e93\u5206\u652f\uff0cGitHub Pages\u5c31\u4f1a\u81ea\u52a8\u6784\u5efa\u5e76\u90e8\u7f72\u60a8\u7684\u7f51\u7ad9\u3002</p> </li> <li> <p>Hugo: \u867d\u7136\u4e0d\u662fGitHub\u5b98\u65b9\u652f\u6301\u7684\u751f\u6210\u5668\uff0c\u4f46\u662f\u901a\u8fc7GitHub Actions\uff0c\u60a8\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u8bbe\u7f6e\u81ea\u52a8\u5316\u811a\u672c\u6765\u6784\u5efa\u548c\u90e8\u7f72\u60a8\u7684Hugo\u7f51\u7ad9\u3002</p> </li> <li> <p>MkDocs: \u901a\u8fc7\u4f7f\u7528GitHub Actions\uff0c\u60a8\u53ef\u4ee5\u7f16\u5199\u5de5\u4f5c\u6d41\u7a0b\u6587\u4ef6\u6765\u5b89\u88c5MkDocs\u53ca\u5176\u4f9d\u8d56\u9879\uff0c\u6784\u5efa\u7f51\u7ad9\uff0c\u5e76\u5c06\u751f\u6210\u7684\u7ad9\u70b9\u63a8\u9001\u5230GitHub Pages\u5206\u652f\u3002</p> </li> <li> <p>Docusaurus: \u4e0eMkDocs\u7c7b\u4f3c\uff0c\u60a8\u53ef\u4ee5\u5229\u7528GitHub Actions\u6765\u6267\u884c\u6784\u5efa\u548c\u90e8\u7f72\u6d41\u7a0b\uff0c\u81ea\u52a8\u5c06Docusaurus\u751f\u6210\u7684\u9759\u6001\u6587\u4ef6\u90e8\u7f72\u5230GitHub Pages\u3002</p> </li> <li> <p>VuePress: \u7531\u4e8eVuePress\u662f\u57fa\u4e8eVue.js\u7684\uff0c\u5982\u679c\u60a8\u7684\u9879\u76ee\u5df2\u7ecf\u5728\u4f7f\u7528Vue.js\uff0c\u90a3\u4e48VuePress\u4f1a\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u8865\u5145\u3002\u901a\u8fc7GitHub Actions\uff0c\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u8bbe\u7f6e\u81ea\u52a8\u90e8\u7f72\u5230GitHub Pages\u3002</p> </li> <li> <p>Hexo: \u4e0e\u4e0a\u8ff0\u751f\u6210\u5668\u4e00\u6837\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7GitHub Actions\u6765\u81ea\u52a8\u5316Hexo\u7f51\u7ad9\u7684\u6784\u5efa\u548c\u90e8\u7f72\u8fc7\u7a0b\u3002</p> </li> </ol> <p>\u5bf9\u4e8e\u6240\u6709\u8fd9\u4e9b\u751f\u6210\u5668\uff0c\u60a8\u53ea\u9700\u8981\u5728\u4ed3\u5e93\u4e2d\u521b\u5efa\u4e00\u4e2a<code>.github/workflows</code>\u76ee\u5f55\uff0c\u5e76\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2aYAML\u683c\u5f0f\u7684GitHub Actions\u5de5\u4f5c\u6d41\u7a0b\u6587\u4ef6\u3002\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u5982\u4f55\u5b89\u88c5\u4f9d\u8d56\u9879\u3001\u6784\u5efa\u7f51\u7ad9\u4ee5\u53ca\u5c06\u6784\u5efa\u4ea7\u7269\u63a8\u9001\u5230GitHub Pages\u5206\u652f\u7684\u6b65\u9aa4\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u4e00\u4e2a\u57fa\u672c\u7684GitHub Actions\u5de5\u4f5c\u6d41\u7a0b\u6587\u4ef6\u53ef\u80fd\u5305\u542b\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u68c0\u51fa\u6e90\u4ee3\u7801\u3002</li> <li>\u5b89\u88c5\u4f9d\u8d56\u9879\u548c\u6784\u5efa\u5de5\u5177\u3002</li> <li>\u8fd0\u884c\u6784\u5efa\u547d\u4ee4\u751f\u6210\u9759\u6001\u6587\u4ef6\u3002</li> <li>\u5c06\u9759\u6001\u6587\u4ef6\u63a8\u9001\u5230GitHub Pages\u5206\u652f\u3002</li> </ol> <p>\u9009\u62e9\u54ea\u4e2a\u751f\u6210\u5668\u7ed3\u5408GitHub\u81ea\u52a8\u90e8\u7f72\uff0c\u53d6\u51b3\u4e8e\u60a8\u5bf9\u751f\u6210\u5668\u672c\u8eab\u7684\u559c\u597d\u4ee5\u53ca\u60a8\u9879\u76ee\u7684\u7279\u5b9a\u9700\u6c42\u3002</p> <p>\u4ed6\u4eec\u5404\u81ea\u7684\u4f18\u7f3a\u70b9</p> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\u7684\u4f18\u7f3a\u70b9\uff0c\u7528\u4ee5\u5e2e\u52a9\u60a8\u9009\u62e9\u6700\u9002\u5408\u60a8\u9700\u6c42\u7684\u5de5\u5177\uff1a</p> <ol> <li> <p>Jekyll</p> <ul> <li>\u4f18\u70b9\uff1a\u4e0eGitHub Pages\u96c6\u6210\u6700\u4e3a\u7d27\u5bc6\uff0c\u8bbe\u7f6e\u7b80\u5355\uff1b\u62e5\u6709\u4e30\u5bcc\u7684\u63d2\u4ef6\u548c\u4e3b\u9898\uff1b\u5927\u578b\u793e\u533a\u652f\u6301\u3002</li> <li>\u7f3a\u70b9\uff1aRuby\u73af\u5883\u53ef\u80fd\u5bf9\u67d0\u4e9b\u7528\u6237\u4e0d\u591f\u53cb\u597d\uff1b\u6784\u5efa\u901f\u5ea6\u76f8\u6bd4\u4e00\u4e9b\u5176\u4ed6\u751f\u6210\u5668\u8f83\u6162\uff1b\u63d2\u4ef6\u7cfb\u7edf\u4e0d\u652f\u6301Windows\u3002</li> <li> <p>Hugo</p> </li> <li> <p>\u4f18\u70b9\uff1a\u6781\u5feb\u7684\u6784\u5efa\u901f\u5ea6\uff1b\u4e0d\u4f9d\u8d56\u4e8e\u5916\u90e8\u73af\u5883\uff0c\u5355\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u8fd0\u884c\uff1b\u6709\u6d3b\u8dc3\u7684\u793e\u533a\u3002</p> </li> <li>\u7f3a\u70b9\uff1a\u4e3b\u9898\u548c\u63d2\u4ef6\u8f83Jekyll\u5c11\uff1b\u5b66\u4e60\u66f2\u7ebf\u53ef\u80fd\u76f8\u5bf9\u9661\u5ced\uff1b\u6a21\u677f\u8bed\u6cd5\u548c\u914d\u7f6e\u8f83\u4e3a\u590d\u6742\u3002</li> <li> <p>MkDocs</p> </li> <li> <p>\u4f18\u70b9\uff1a\u4e13\u4e3a\u6587\u6863\u800c\u8bbe\u8ba1\uff1b\u7b80\u5355\u6613\u7528\uff0c\u914d\u7f6e\u76f4\u89c2\uff1bMarkdown\u53cb\u597d\u3002</p> </li> <li>\u7f3a\u70b9\uff1a\u529f\u80fd\u76f8\u5bf9\u7b80\u5355\uff0c\u4e3b\u8981\u9488\u5bf9\u6587\u6863\u7c7b\u7ad9\u70b9\uff1b\u4e3b\u9898\u548c\u63d2\u4ef6\u8f83\u5c11\u3002</li> <li> <p>Docusaurus</p> </li> <li> <p>\u4f18\u70b9\uff1a\u652f\u6301\u6587\u6863\u7248\u672c\u7ba1\u7406\uff1b\u96c6\u6210\u4e86\u7ffb\u8bd1\u529f\u80fd\uff1b\u652f\u6301React\uff0c\u65b9\u4fbf\u5b9a\u5236\u548c\u6269\u5c55\u3002</p> </li> <li>\u7f3a\u70b9\uff1a\u76f8\u5bf9\u8f83\u65b0\uff0c\u793e\u533a\u548c\u63d2\u4ef6\u751f\u6001\u53ef\u80fd\u4e0d\u5982Jekyll\u6216Hugo\u4e30\u5bcc\uff1b\u4e3b\u8981\u9002\u7528\u4e8e\u6587\u6863\u7ad9\u70b9\u800c\u4e0d\u662f\u535a\u5ba2\u3002</li> <li> <p>VuePress</p> </li> <li> <p>\u4f18\u70b9\uff1aVue\u9a71\u52a8\uff0c\u9002\u5408Vue\u5f00\u53d1\u8005\uff1b\u4f18\u79c0\u7684\u9ed8\u8ba4\u4e3b\u9898\u548c\u5e03\u5c40\uff1b\u5bb9\u6613\u6269\u5c55\u548c\u81ea\u5b9a\u4e49\u3002</p> </li> <li>\u7f3a\u70b9\uff1a\u96c6\u4e2d\u4e8e\u6280\u672f\u6587\u6863\uff1b\u63d2\u4ef6\u548c\u4e3b\u9898\u751f\u6001\u7cfb\u7edf\u5728\u6210\u957f\u4e2d\uff0c\u8fd8\u4e0d\u5982Jekyll\u6216Hugo\u4e30\u5bcc\u3002</li> <li> <p>Hexo</p> </li> <li> <p>\u4f18\u70b9\uff1aNode.js\u73af\u5883\u4e0b\u7684\u5feb\u901f\u6784\u5efa\uff1b\u63d2\u4ef6\u548c\u4e3b\u9898\u4e30\u5bcc\uff1b\u793e\u533a\u6d3b\u8dc3\uff1b\u9002\u5408\u535a\u5ba2\u3002</p> </li> <li>\u7f3a\u70b9\uff1a\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u6027\u80fd\u95ee\u9898\uff1b\u6587\u6863\u548c\u56fd\u9645\u5316\u652f\u6301\u4e0d\u5982\u5176\u4ed6\u751f\u6210\u5668\uff1b\u63d2\u4ef6\u8d28\u91cf\u53c2\u5dee\u4e0d\u9f50\u3002</li> </ul> </li> </ol> <p>\u5728\u9009\u62e9\u65f6\uff0c\u60a8\u5e94\u8be5\u8003\u8651\u5230\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>\u60a8\u719f\u6089\u7684\u6280\u672f\u6808\uff1a\u9009\u62e9\u4e00\u4e2a\u4e0e\u60a8\u73b0\u6709\u6280\u80fd\u76f8\u5339\u914d\u7684\u751f\u6210\u5668\u4f1a\u66f4\u5bb9\u6613\u4e0a\u624b\u3002</li> <li>\u7f51\u7ad9\u76ee\u7684\uff1a\u4e0d\u540c\u7684\u751f\u6210\u5668\u53ef\u80fd\u9488\u5bf9\u4e0d\u540c\u7684\u7528\u9014\uff0c\u6bd4\u5982\u535a\u5ba2\u3001\u6587\u6863\u6216\u4e00\u822c\u7528\u9014\u7684\u7f51\u7ad9\uff0c\u9009\u62e9\u6700\u9002\u5408\u60a8\u7f51\u7ad9\u76ee\u7684\u7684\u3002</li> <li>\u793e\u533a\u548c\u652f\u6301\uff1a\u4e00\u4e2a\u6d3b\u8dc3\u7684\u793e\u533a\u548c\u826f\u597d\u7684\u6587\u6863\u652f\u6301\u6709\u52a9\u4e8e\u60a8\u89e3\u51b3\u95ee\u9898\u5e76\u5b66\u4e60\u6700\u4f73\u5b9e\u8df5\u3002</li> <li>\u6269\u5c55\u6027\u548c\u5b9a\u5236\u6027\uff1a\u5982\u679c\u60a8\u9700\u8981\u7279\u5b9a\u7684\u529f\u80fd\u6216\u8005\u60f3\u8981\u5bf9\u7f51\u7ad9\u6709\u66f4\u6df1\u5c42\u6b21\u7684\u5b9a\u5236\uff0c\u9009\u62e9\u4e00\u4e2a\u63d2\u4ef6\u4e30\u5bcc\u6216\u6613\u4e8e\u5b9a\u5236\u7684\u751f\u6210\u5668\u4f1a\u66f4\u5408\u9002\u3002</li> <li>\u6784\u5efa\u548c\u90e8\u7f72\u7684\u4fbf\u6377\u6027\uff1a\u8003\u8651\u5230\u751f\u6210\u5668\u4e0eGitHub Pages\u7684\u96c6\u6210\u7a0b\u5ea6\u548c\u6784\u5efa\u90e8\u7f72\u7684\u4fbf\u6377\u6027\u3002</li> </ul> <p>\u6700\u7ec8\u7684\u51b3\u7b56\u5e94\u57fa\u4e8e\u60a8\u7684\u5177\u4f53\u9700\u6c42\u3001\u6280\u672f\u504f\u597d\u4ee5\u53ca\u5bf9\u672a\u6765\u53ef\u80fd\u7684\u6269\u5c55\u6027\u7684\u8003\u8651\u3002</p> <p>\u6211\u7684\u7535\u8111\u662fmac\u6211\u5982\u679c\u4f7f\u7528MkDocs\uff0c\u9700\u8981\u505a\u54ea\u4e9b\u51c6\u5907</p> <p>\u8981\u5728Mac\u4e0a\u4f7f\u7528MkDocs\u8fdb\u884c\u6587\u6863\u7f51\u7ad9\u7684\u5f00\u53d1\uff0c\u60a8\u9700\u8981\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u51c6\u5907\u73af\u5883\uff1a</p> <ol> <li> <p>\u5b89\u88c5Python     MkDocs \u662f\u7528Python\u7f16\u5199\u7684\uff0c\u56e0\u6b64\u9700\u8981Python\u73af\u5883\u3002Mac\u901a\u5e38\u81ea\u5e26Python\uff0c\u4f46\u662f\u53ef\u80fd\u662fPython 2.x\u7248\u672c\u3002MkDocs \u9700\u8981 Python 3.5 \u4ee5\u4e0a\u7248\u672c\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528Homebrew\u6765\u5b89\u88c5\u6700\u65b0\u7684Python 3\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u5b89\u88c5Homebrew\uff0c\u53ef\u4ee5\u5728\u7ec8\u7aef\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b89\u88c5\u5b83\uff1a</p> <pre><code>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n</code></pre> <p>\u5b89\u88c5\u597dHomebrew\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5Python 3\uff1a</p> <pre><code>brew install python\n</code></pre> </li> <li> <p>\u5b89\u88c5MkDocs     \u4f7f\u7528Python\u7684\u5305\u7ba1\u7406\u5668pip\u6765\u5b89\u88c5MkDocs\u3002\u5728\u7ec8\u7aef\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>pip install mkdocs\n</code></pre> <p>\u5982\u679c\u60a8\u7684\u7cfb\u7edf\u4e2d\u540c\u65f6\u5b58\u5728Python 2\u548cPython 3\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528<code>pip3</code>\u6765\u4ee3\u66ff<code>pip</code>\u3002</p> </li> <li> <p>\u521b\u5efa\u65b0\u9879\u76ee     \u521b\u5efa\u4e00\u4e2a\u65b0\u7684MkDocs\u9879\u76ee\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>mkdocs new my-project\n</code></pre> <p>\u8be5\u547d\u4ee4\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>my-project</code>\u7684\u65b0\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u5305\u542bMkDocs\u7684\u914d\u7f6e\u6587\u4ef6<code>mkdocs.yml</code>\u4ee5\u53ca\u4e00\u4e2a\u540d\u4e3a<code>docs</code>\u7684\u6587\u6863\u76ee\u5f55\u3002</p> </li> <li> <p>\u8fd0\u884cMkDocs\u670d\u52a1\u5668     \u5207\u6362\u5230\u9879\u76ee\u76ee\u5f55\uff0c\u5e76\u542f\u52a8MkDocs\u5185\u7f6e\u7684\u5f00\u53d1\u670d\u52a1\u5668\uff1a</p> <pre><code>cd my-project\nmkdocs serve\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u542f\u52a8\u4e00\u4e2a\u672c\u5730\u670d\u52a1\u5668\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee<code>http://127.0.0.1:8000</code>\u6765\u67e5\u770b\u60a8\u7684\u6587\u6863\u3002</p> </li> <li> <p>\u7f16\u5199\u6587\u6863     \u5728<code>docs</code>\u6587\u4ef6\u5939\u4e2d\u4f7f\u7528Markdown\u683c\u5f0f\u7f16\u5199\u60a8\u7684\u6587\u6863\u3002MkDocs\u4f1a\u5b9e\u65f6\u76d1\u63a7\u8fd9\u4e9b\u6587\u4ef6\u7684\u53d8\u5316\uff0c\u5e76\u81ea\u52a8\u91cd\u65b0\u6784\u5efa\u7f51\u7ad9\u3002</p> </li> <li> <p>\u6784\u5efa\u9759\u6001\u7f51\u7ad9     \u5f53\u60a8\u51c6\u5907\u597d\u5c06\u60a8\u7684\u6587\u6863\u53d1\u5e03\u5230Web\u670d\u52a1\u5668\u6216GitHub Pages\u65f6\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6784\u5efa\u9759\u6001\u7f51\u7ad9\uff1a</p> <pre><code>mkdocs build\n</code></pre> <p>\u8be5\u547d\u4ee4\u4f1a\u5728<code>site</code>\u6587\u4ef6\u5939\u4e2d\u751f\u6210\u9759\u6001\u5185\u5bb9\uff0c\u60a8\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5185\u5bb9\u90e8\u7f72\u5230\u4efb\u4f55\u652f\u6301\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u7684\u670d\u52a1\u4e0a\u3002</p> </li> <li> <p>\u90e8\u7f72\u5230GitHub Pages     \u5982\u679c\u60a8\u60f3\u8981\u5c06\u7f51\u7ad9\u90e8\u7f72\u5230GitHub Pages\uff0cMkDocs\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u547d\u4ee4\u6765\u5e2e\u52a9\u60a8\u5b8c\u6210\u8fd9\u4e00\u8fc7\u7a0b\uff1a</p> <pre><code>mkdocs gh-deploy\nmkdocs gh-deploy\n</code></pre> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5c06\u6784\u5efa\u597d\u7684\u7f51\u7ad9\u63a8\u9001\u5230\u60a8\u7684GitHub\u4ed3\u5e93\u7684<code>gh-pages</code>\u5206\u652f\uff0cGitHub\u4f1a\u81ea\u52a8\u5c06\u5176\u53d1\u5e03\u5230GitHub Pages\u3002</p> </li> </ol> <p>\u4ee5\u4e0a\u5c31\u662f\u5728Mac\u4e0a\u4f7f\u7528MkDocs\u7684\u57fa\u672c\u51c6\u5907\u5de5\u4f5c\u3002\u8bb0\u5f97\u5728\u7f16\u8f91\u6587\u6863\u65f6\u5b9a\u671f\u4fdd\u5b58\u60a8\u7684\u66f4\u6539\uff0c\u5e76\u4e14\u5b9a\u671f\u5c06\u60a8\u7684\u66f4\u6539\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236\u7cfb\u7edf\u4e2d\u4ee5\u907f\u514d\u6570\u636e\u4e22\u5931\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/%E5%AE%89%E8%A3%85%E4%BA%86%E5%93%AA%E4%BA%9B%E6%8F%92%E4%BB%B6/","title":"\u5b89\u88c5\u4e86\u54ea\u4e9b\u63d2\u4ef6","text":"<pre><code>pip install \"mkdocs-material[imaging]\"\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MkDocs/%E5%AE%89%E8%A3%85%E4%BA%86%E5%93%AA%E4%BA%9B%E6%8F%92%E4%BB%B6/#_2","title":"\u6587\u7ae0\u521b\u5efa\u548c\u66f4\u65b0\u65f6\u95f4","text":"<pre><code>pip install mkdocs-git-revision-date-localized-plugin\n</code></pre> <p>\u914d\u7f6e</p> <pre><code>plugins:\n  - git-revision-date-localized:\n      enable_creation_date: true\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8/MonacoEditor%E5%8F%AA%E8%AF%BB%E6%A8%A1%E5%BC%8F%E6%8F%90%E7%A4%BA/","title":"MonacoEditor\u53ea\u8bfb\u6a21\u5f0f\u63d0\u793a","text":"<p>Monaco Editor\u7684<code>readOnly</code>\u5c5e\u6027\u786e\u5b9e\u4f1a\u963b\u6b62\u7528\u6237\u8fdb\u884c\u7f16\u8f91\uff0c\u4f46\u662f\u5b83\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55\u4e8b\u4ef6\u6765\u5141\u8bb8\u6211\u4eec\u81ea\u5b9a\u4e49\u53ea\u8bfb\u6a21\u5f0f\u4e0b\u7684\u63d0\u793a\u4fe1\u606f\u3002\u7531\u4e8eMonaco Editor\u6ca1\u6709\u76f4\u63a5\u7684API\u6765\u66f4\u6539\u53ea\u8bfb\u6a21\u5f0f\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u901a\u5e38\u9700\u8981\u91c7\u53d6\u4e00\u4e9b\u989d\u5916\u7684\u6b65\u9aa4\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002</p> <p>\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\u662f\u901a\u8fc7\u8986\u76d6\u9ed8\u8ba4\u7684\u884c\u4e3a\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528<code>editor.onDidAttemptReadOnlyEdit</code>\u4e8b\u4ef6\u6765\u76d1\u542c\u53ea\u8bfb\u5c1d\u8bd5\u7f16\u8f91\u7684\u52a8\u4f5c\uff0c\u7136\u540e\u5c55\u793a\u81ea\u5b9a\u4e49\u63d0\u793a\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u53ef\u80fd\u7684\u5b9e\u73b0\u65b9\u6cd5\uff1a</p> <pre><code>// \u521d\u59cb\u5316\u7f16\u8f91\u5668\nthis.monacoEditor = monaco.editor.create(this.$refs.codeEditContainer, {\n  value: this.selectFileInfo.content,\n  language: 'javascript', // \u5047\u8bbe\u662f JavaScript \u4ee3\u7801\n  readOnly: true, // \u53ea\u8bfb\u6a21\u5f0f\n  automaticLayout: true,\n  scrollBeyondLastLine: false,\n  quickSuggestions: false,\n  suggestOnTriggerCharacters: false,\n  contextmenu: false\n});\n\n// \u76d1\u542c\u53ea\u8bfb\u7f16\u8f91\u5668\u4e0a\u7684\u5c1d\u8bd5\u7f16\u8f91\u52a8\u4f5c\nthis.monacoEditor.onDidAttemptReadOnlyEdit(() =&gt; {\n  // \u5728\u8fd9\u91cc\u663e\u793a\u81ea\u5b9a\u4e49\u63d0\u793a\u4fe1\u606f\n  // \u4f8b\u5982\uff0c\u4f7f\u7528\u6d4f\u89c8\u5668\u7684alert\u51fd\u6570\u6216\u8005\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u5f39\u7a97\u7ec4\u4ef6\n  alert(\"\u53ea\u8bfb\u6a21\u5f0f\u7981\u6b62\u4fee\u6539\");\n});\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c<code>onDidAttemptReadOnlyEdit</code> \u662f\u4e00\u4e2a\u6bd4\u8f83\u65b0\u7684\u4e8b\u4ef6\uff0c\u53ef\u80fd\u9700\u8981\u5728\u8f83\u65b0\u7248\u672c\u7684 Monaco Editor \u4e2d\u624d\u6709\u3002\u5982\u679c\u4f60\u7684 Monaco Editor \u7248\u672c\u4e0d\u652f\u6301\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u4e0a\u8ff0\u4ee3\u7801\u5c06\u4e0d\u4f1a\u5de5\u4f5c\u3002\u6b64\u5916\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u5c01\u88c5\u4e86 Monaco Editor \u7684\u5e93\u6216\u7ec4\u4ef6\uff0c\u5b83\u53ef\u80fd\u4e0d\u4f1a\u63d0\u4f9b\u5bf9\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u76f4\u63a5\u8bbf\u95ee\u3002</p> <p>\u53e6\u5916\uff0c\u5982\u679c\u4f60\u5728\u7f51\u9875\u4e0a\u5df2\u7ecf\u6709\u4e86\u81ea\u5b9a\u4e49\u7684\u63d0\u793a\u7cfb\u7edf\uff0c\u6bd4\u5982\u4f7f\u7528\u4e86\u67d0\u4e2aUI\u6846\u67b6\u63d0\u4f9b\u7684\u63d0\u793a\u7ec4\u4ef6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5c06\u4e0a\u8ff0\u7684<code>alert</code>\u8c03\u7528\u66ff\u6362\u4e3a\u8be5\u63d0\u793a\u7cfb\u7edf\u7684\u8c03\u7528\u65b9\u6cd5\uff0c\u4ee5\u4fdd\u6301\u7f51\u9875UI\u98ce\u683c\u7684\u4e00\u81f4\u6027\u3002</p> <p>\u5982\u679c\u4f60\u63d0\u4f9b\u7684\u7248\u672c\u4fe1\u606f\u548c\u5177\u4f53\u7684\u4f7f\u7528\u573a\u666f\uff0c\u6211\u53ef\u80fd\u80fd\u63d0\u4f9b\u66f4\u52a0\u7cbe\u786e\u7684\u5efa\u8bae\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/","title":"\u76f8\u5173\u4ecb\u7ecd","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#yarn","title":"yarn","text":"<ul> <li>yarn \u5b98\u65b9\u4e2d\u6587\u6587\u6863</li> <li>yarn \u5b98\u65b9\u4e2d\u6587\u6587\u6863\uff08\u82f1\u6587\uff09</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#_2","title":"\u5b89\u88c5\u65b9\u5f0f","text":"<ul> <li>\u547d\u4ee4\u5b89\u88c5</li> </ul> <pre><code>npm install --global yarn\n</code></pre> <ul> <li>\u5b89\u88c5\u5305\u4e0b\u8f7d\u5b89\u88c5</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/","title":"\u5305\u7ba1\u7406\u5de5\u5177","text":"<ul> <li><code>yarn pack</code> </li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/%E9%80%9A%E8%BF%87yarn%E5%88%9B%E5%BB%BA%E7%A6%BB%E7%BA%BF%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/","title":"\u901a\u8fc7yarn\u521b\u5efa\u79bb\u7ebf\u955c\u50cf\u4ed3\u5e93","text":"<p>1\u3001\u914d\u7f6e\u662f\u79bb\u7ebf\u955c\u50cf\u7f13\u5b58\u6587\u4ef6\u5939\u7684\u4f4d\u7f6e</p> <pre><code>yarn config set yarn-offline-mirror ./npm-packages-offline-cache\n</code></pre> <p>2\u3001\u5e2e\u52a9\u6e05\u7406\u6240\u6709\u672a\u94fe\u63a5\u7684\u4f9d\u8d56\u9879(\u53ef\u4ee5\u4e0d\u8bbe\u7f6e)\u3002</p> <pre><code>yarn config set yarn-offline-mirror-pruning true\n</code></pre> <p>3\u3001\u4e0a\u9762\u8bbe\u7f6e\u5c06\u521b\u5efa~/.yarnrc\uff0c\u5982\u679c\u4e0d\u662f\u5168\u5c40\u8bbe\u7f6e\uff0c\u800c\u662f\u4ec5\u5f53\u524d\u9879\u76ee\u8981\u8bbe\u7f6e\uff0c\u5219\u9700\u8981\u79fb\u52a8\u8be5\u6587\u4ef6\u5230\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e2d\uff1a</p> <pre><code>mv ~/.yarnrc .\n</code></pre> <p>\u6ce8\u610f\u540e\u9762\u6709\u4e2a\u70b9  </p> <p>4\u3001\u5220\u9664\u4e4b\u524d\u7684node_modules\u548cyarn.lock\u5e76\u4ece\u65b0\u6784\u5efa</p> <pre><code>rm -rf node_modules/ yarn.lock\nyarn install\n</code></pre> <p>install\u6210\u529f\u540e\u5728npm-packages-offline-cache\u80fd\u770b\u5230.tgz\u538b\u7f29\u2f42\u4ef6  </p> <p>5\u3001\u79bb\u7ebf\u88c5\u7f6enode_modules \u6d4b\u8bd5\u8131\u673a\u72b6\u6001\u7684\u65b9\u6cd5\u5982\u4e0b(\u9700\u8981\u5173\u95ed\u6709\u7ebf\u6216\u65e0\u7ebf\u7f51\u7edc\u8fde\u63a5)</p> <pre><code>yarn cache clean\nyarn install --offlline\n</code></pre> <p>\u6211\u662f\u5148\u5220\u6389\u539f\u672c\u9879\u76ee\u4e0b\u7684node_modules\u76ee\u5f55\uff0c\u5173\u95ed\u7f51\u7edc\uff0c\u518dyarn install --offline\u540e\u9879\u76ee\u76ee\u5f55\u4e0b\u51fa\u73b0\u8ddf\u539f\u6765\u4e00\u81f4\u7684node_modules\u76ee\u5f55</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/","title":"Logic Flow","text":"<p>LogicFlow\u6848\u4f8b\u5206\u4eab :https://github.com/didi/LogicFlow/issues/716 \u8f6c\u8f7d\u5730\u5740\uff1ahttps://github.com/hsole/layoutFlow</p> <p>\u968f\u7740\u9879\u76ee\u4e2d\u6d41\u7a0b\u56fe\u88ab\u8fd0\u8425\u540c\u5b66\u753b\u7684\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u51fa\u73b0\u4e86\u4e00\u4e2a\u6d41\u7a0b\u56fe\u4e0a\u5b58\u5728\u51e0\u767e\u4e2a\u8282\u70b9\u7684\u60c5\u51b5\uff0c\u6d41\u7a0b\u56fe\u5e26\u6765\u7684\u4e1a\u52a1\u903b\u8f91\u53ef\u89c6\u5316\u6548\u679c\u8d8a\u6765\u8d8a\u4e0d\u660e\u663e\u3002\u867d\u7136\u6211\u4eec\u63d0\u4f9b\u4e86\u5206\u7ec4\u3001\u6ce8\u91ca\u3001\u8bb0\u53f7\u7b49\u4fee\u9970\u6027\u529f\u80fd\u53bb\u652f\u6301\u6807\u8bc6\u6d41\u7a0b\u4e2d\u91cd\u8981\u7684\u4e1a\u52a1\u5173\u952e\u70b9\uff0c\u4f46\u662f\u6548\u679c\u4ecd\u7136\u4e0d\u660e\u663e\u3002\u8fd9\u4e2a\u65f6\u5019\u60f3\u518d\u53bb\u901a\u8fc7\u4eba\u4e3a\u8c03\u6574\u53bb\u8ba9\u6df7\u4e71\u7684\u6d41\u7a0b\u56fe\u53d8\u5f97\u6e05\u6670\uff0c\u6bd4\u6211\u4eec\u4ee3\u7801\u91cd\u6784\u8fd8\u96be\u3002\u6240\u4ee5\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u81ea\u52a8\u5e03\u5c40\u548c\u4e00\u952e\u7f8e\u5316\u529f\u80fd\uff0c\u901a\u8fc7\u5b9e\u8df5\u53d1\u73b0\u8fd9\u4e24\u79cd\u65b9\u6848\u6548\u679c\u90fd\u4e0d\u9519\uff0c\u6709\u81ea\u5df1\u72ec\u7279\u7684\u5e94\u7528\u573a\u666f\u3002</p> <p>\u81ea\u52a8\u5e03\u5c40\u5927\u5bb6\u6700\u5e38\u89c1\u5230\u7684\u6548\u679c\u5e94\u8be5\u662f\u8111\u56fe\u3002\u753b\u56fe\u7684\u4eba\u4e0d\u9700\u8981\u624b\u52a8\u8c03\u6574\u8282\u70b9\u7684\u4f4d\u7f6e\uff0c\u7531\u7cfb\u7edf\u81ea\u52a8\u8ba1\u7b97\u51fa\u8282\u70b9\u5408\u9002\u7684\u4f4d\u7f6e\u3002</p> <p></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/#_1","title":"\u81ea\u52a8\u5e03\u5c40\u7684\u4f18\u7f3a\u70b9","text":"<p>\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u6d41\u7a0b\u56fe\u90fd\u53ef\u4ee5\u7528\u81ea\u52a8\u5e03\u5c40\uff0c\u9700\u8981\u57fa\u4e8e\u5177\u4f53\u7684\u4ea7\u54c1\u6765\u7ed3\u5408\u81ea\u52a8\u5e03\u5c40\u7684\u4f18\u7f3a\u70b9\u6765\u6743\u8861\u3002 </p> <p>\u81ea\u52a8\u5e03\u5c40\u4f18\u70b9\uff1a</p> <ol> <li>\u64cd\u4f5c\u4fbf\u6377\uff0c\u7701\u53bb\u4e86\u4f20\u7edf\u7ed8\u5236\u6d41\u7a0b\u56fe\u7684\u4f4d\u7f6e\u8c03\u6574\u7684\u64cd\u4f5c\u6210\u672c\u3002</li> <li>\u6d41\u7a0b\u56fe\u98ce\u683c\u7edf\u4e00\uff0c\u6574\u4e2a\u6d41\u7a0b\u56fe\u7f8e\u89c2\u5ea6\u4e0b\u9650\u66f4\u9ad8\u3002</li> </ol> <p>\u81ea\u52a8\u5e03\u5c40\u7684\u4e0d\u8db3\uff1a</p> <ol> <li>\u9996\u5148\u80fd\u7528\u7684\u4e1a\u52a1\u573a\u666f\u6709\u9650\uff0c\u4e00\u822c\u7528\u4e8e\u6811\u578b\u7ed3\u6784\uff08\u5982\u8111\u56fe\uff09\u6216\u8005\u5e03\u5c40\u6709\u89c4\u5f8b\u7684\u573a\u666f\u3002</li> <li>\u753b\u5e03\u7a7a\u95f4\u5229\u7528\u7387\u4e0d\u9ad8\uff0c\u7cfb\u7edf\u5f15\u5bfc\u7684\u8282\u70b9\u4f4d\u7f6e\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u81ea\u52a8\u5e03\u5c40\u4e0d\u5141\u8bb8\u8c03\u6574\u8282\u70b9\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5728\u8282\u70b9\u8f83\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u6574\u4e2a\u753b\u5e03\u7a7a\u767d\u7684\u5730\u65b9\u6bd4\u8f83\u591a\u3002</li> </ol>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/#_2","title":"\u5b9e\u73b0\u81ea\u52a8\u5e03\u5c40","text":"<p>\u5bf9\u4e8e\u5e03\u5c40\u76ee\u524d\u793e\u533a\u6709\u5f88\u591a\u65b9\u6848\uff0c\u5728\u5f88\u591a\u6570\u636e\u53ef\u89c6\u5316\u5e93\u4e2d\u90fd\u6709\u4f7f\u7528\u3002\u6211\u4eec\u5728\u6d41\u7a0b\u56fe\u8fd9\u8fb9\u6700\u5e38\u7528\u4e00\u822c\u90fd\u662f\u7ed3\u6784\u5316\u5e03\u5c40hierarchy\u3002\u5728\u7ed3\u6784\u5316\u5e03\u5c40\u91cc\u9762\uff0c\u53c8\u6709\u57fa\u4e8e\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u5e03\u5c40\u65b9\u6848\uff0c\u4f8b\u5982tree\u3001dagre\u3001elk\u7b49\u3002\u5173\u4e8e\u56fe\u5e03\u5c40\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u5927\u5bb6\u53ef\u4ee5\u770b\u8fd9\u7bc7\u6587\u7ae0\uff1ahttps://blog.js.cytoscape.org/2020/05/11/layouts/, \u8fd9\u91cc\u5c31\u4e0d\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u3002</p> <p>\u5728\u6211\u4eec\u9700\u8981\u7528\u5230\u81ea\u52a8\u5e03\u5c40\u7684\u4e1a\u52a1\u573a\u666f\u4e2d\uff0c\u6bd4\u8f83\u9002\u5408\u7684\u662f\u6811\u5e03\u5c40\u3002\u6211\u4eec\u5c31\u76f4\u63a5\u4f7f\u7528\u4e86https://github.com/antvis/hierarchy \u3002\u7528\u5b83\u7684\u539f\u56e0\u4e3b\u8981\u662fAPI\u4f7f\u7528\u8d77\u6765\u6bd4\u8f83\u65b9\u4fbf(API\u4e0a\u6bd4https://github.com/d3/d3-hierarchy\u4f1a\u66f4\u53cb\u597d\u4e00\u70b9)\uff0c\u8fd8\u80fd\u6bd4\u8f83\u597d\u7684\u5904\u7406\u6211\u4eec\u5404\u8282\u70b9\u5927\u5c0f\u4e0d\u4e00\u81f4\u7b49\u60c5\u51b5\uff0c\u4e5f\u80fd\u5f88\u597d\u7684\u548c\u6211\u4eec\u9879\u76ee\u4e2d\u7684\u6d41\u7a0b\u56fe\u6846\u67b6LogicFlow\u7ed3\u5408\u8d77\u6765\u3002\u4f7f\u7528\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u6b65\u9aa41\uff1a\u5c06LogicFlow\u7684\u56fe\u6570\u636e\u8f6c\u6362\u4e3a\u6811\u7ed3\u6784</p> <pre><code>export const graphToTree = (graphData) =&gt; {\n  let tree = null;\n  const nodesMap = new Map();\n  graphData.nodes.forEach(node =&gt; {\n    const treeNode = {\n      ...node,\n      children: [],\n    };\n    nodesMap.set(node.id, treeNode);\n    if (node.type === ROOT_NODE) {\n      tree = treeNode;\n    }\n  });\n  graphData.edges.forEach(edge =&gt; {\n    const node = nodesMap.get(edge.sourceNodeId);\n    node.children.push(nodesMap.get(edge.targetNodeId));\n  });\n  return tree;\n}\nconst graphData = lf.getGraphData()\nconst tree = graphToTree(graphData\n</code></pre> <p>\u6b65\u9aa4\u4e8c\uff1a\u8c03\u7528Hierarchy\u5bf9\u6811\u8fdb\u884c\u5e03\u5c40\uff0c\u91cd\u65b0\u8ba1\u7b97\u51fa\u6240\u6709\u8282\u70b9\u7684\u5750\u6807</p> <pre><code>import Hierarchy from '@antv/hierarchy';\n\nconst rootNode = Hierarchy.compactBox(tree, {\n  direction: 'LR', // \u4ece\u5de6\u5230\u53f3\u5e03\u5c40\n  getHeight(d) { // \u53ef\u4ee5\u7ec6\u7c92\u5ea6\u5904\u7406\u8282\u70b9\u9ad8\u5ea6\n    if (d.type === ROOT_NODE) {\n      return NODE_SIZE * 4;\n    }\n    return NODE_SIZE;\n  },\n  getWidth() { // \u53ef\u4ee5\u7ec6\u7c92\u5ea6\u5904\u7406\u8282\u70b9\u5bbd\u5ea6\n    return 200 + PEM * 1.6;\n  },\n  ...\n});\n// \u4fdd\u8bc1\u4e2d\u5fc3\u70b9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u907f\u514d\u6296\u52a8\nconst moveX = tree.x - rootNode.x;\nconst moveY = tree.y - rootNode.y;\nconst newTree = dfsTree(rootNode, currentNode =&gt; {\n  return {\n    id: currentNode.id,\n    text: currentNode.data.text.value,\n    properties: currentNode.data.properties,\n    type: currentNode.data.type,\n    x: currentNode.x + moveX,\n    y: currentNode.y + moveY,\n  }\n});\nreturn newTre\n</code></pre> <p>\u6b65\u9aa4\u4e09\uff1a\u5c06\u5f97\u5230\u7684\u65b0\u7684\u6811\u6570\u636e\u8f6c\u56deLogicFlow\u9700\u8981\u7684\u56fe\u6570\u636e</p> <pre><code>export const treeToGraph = (rootNode) =&gt; {\n  const nodes = [];\n  const edges = [];\n  function getNode(current, parent = null) {\n    const node = {\n      ...current\n    };\n    nodes.push(node);\n    if (current.children) {\n      current.children.forEach(subNode =&gt; {\n        getNode(subNode, node);\n      });\n    }\n    if (parent) {\n      const edge = {\n        sourceNodeId: parent.id,\n        targetNodeId: node.id,\n        type: 'mindmap-edge',\n      };\n      edges.push(edge);\n    }\n  }\n  getNode(rootNode);\n  return {\n    nodes,\n    edges,\n  };\n}\n</code></pre> <p>\u6700\u540e\uff0c\u628a\u56fe\u6570\u636e\u4ea4\u7ed9LogicFlow\u91cd\u65b0\u6e32\u67d3\u5c31\u884c\u3002</p> <p>\u4e00\u952e\u7f8e\u5316\u5728\u4ea7\u54c1\u4e0a\u662f\u4e00\u4e2a\u975e\u5e38\u7406\u60f3\u7684\u529f\u80fd\uff0c\u4e0d\u8bba\u6d41\u7a0b\u56fe\u591a\u6df7\u4e71\uff0c\u53ea\u9700\u8981\u6211\u4eec\u70b9\u51fb\u4e00\u4e0b\u4e00\u952e\u7f8e\u5316\u5c31\u81ea\u52a8\u53d8\u6210\u6574\u9f50\u7f8e\u89c2\u7684\u6d41\u7a0b\u56fe\u3002</p> <p></p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/#_3","title":"\u5b9e\u73b0\u4e00\u952e\u7f8e\u5316","text":"<p>\u548c\u4e0a\u9762\u7684\u81ea\u52a8\u5e03\u5c40\u4e0d\u540c\u7684\u662f\uff0c\u5728\u6211\u4eec\u4e1a\u52a1\u573a\u666f\u4e2d\uff0c\u6d41\u7a0b\u56fe\u4f1a\u5b58\u5728\u73af\u8fd9\u79cd\u7ed3\u6784\u3002\u8fd9\u4e2a\u65f6\u5019\u76f4\u63a5\u7528\u6811\u5e03\u5c40\u662f\u4e0d\u5408\u9002\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528dagre\u5e03\u5c40\u3002\u5728\u7f51\u4e0a\u627e\u4e86\u4e00\u5708\u540e\uff0c\u53d1\u73b0https://github.com/antvis/layout\u63d0\u4f9b\u7684dagre\u5e03\u5c40\u6700\u597d\u7528\uff08G6\u91cc\u9762\u7684dagre\u5e03\u5c40\u4e5f\u662f\u7528\u7684\u8fd9\u4e2a\uff09\u3002\u4e00\u952e\u7f8e\u5316\u7684\u5b9e\u73b0\u601d\u8def\u548c\u81ea\u52a8\u5e03\u5c40\u7c7b\u4f3c\uff0c\u90fd\u662f\u628aLogicFlow\u4e2d\u7684\u56fe\u6570\u636e\u4f20\u7ed9\u5e03\u5c40\u5e93\uff0c\u7136\u540e\u518d\u628a\u5f97\u5230\u7684\u65b0\u7684\u56fe\u6570\u636e\u91cd\u65b0\u4f7f\u7528LogicFlow\u6e32\u67d3\u3002\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u628a\u4e00\u952e\u7f8e\u5316\u7ed9\u5c01\u88c5\u6210\u4e86\u4e00\u4e2aLogicFlow\u63d2\u4ef6\uff0c\u7136\u540e\u5728\u91cc\u9762\u505a\u4e86\u4e00\u4e9b\u7b26\u5408LogicFlow\u7279\u6b8a\u7684\u5904\u7406\u3002</p> <pre><code>import { DagreLayout, DagreLayoutOptions } from '@antv/layout';\nexport default class Dagre {\n  static pluginName = 'dagre';\n  render(lf) {\n    this.lf = lf;\n  }\n  layout(option = {}) {\n    const { nodes, edges, gridSize } = this.lf.graphModel\n    const layoutInstance = new DagreLayout(option);\n    const layoutData = layoutInstance.layout({\n      nodes: nodes.map((node) =&gt; ({\n        id: node.id,\n        size: {\n          width: node.width,\n          height: node.height,\n        },\n        model: node,\n      })),\n      edges: edges.map((edge) =&gt; ({\n        source: edge.sourceNodeId,\n        target: edge.targetNodeId,\n        model: edge,\n      })),\n    });\n    const newGraphData = {\n      nodes: [],\n      edges: [],\n    };\n    layoutData.nodes.forEach(node =&gt; {\n      const { model } = node;\n      const data = model.getData();\n      data.x = node.x;\n      data.y = node.y;\n      newGraphData.nodes.push(data);\n    });\n    layoutData.edges.forEach(edge =&gt; {\n      const { model } = edge;\n      const data = model.getData();\n      data.pointsList = this.calcPointsList(model, newGraphData.nodes);\n      newGraphData.edges.push(data);\n    });\n    this.lf.render(newGraphData);\n  }\n}\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/#_4","title":"\u4e00\u952e\u7f8e\u5316\u7684\u4e0d\u8db3","text":"<p>\u5728\u6211\u4eec\u505a\u51fa\u7b2c\u4e00\u7248\u4e00\u952e\u7f8e\u5316\u540e\uff0c\u53d1\u73b0\u6700\u5927\u7684\u95ee\u9898\u5c31\u662f\u4e00\u952e\u7f8e\u5316\u540e\u6574\u4e2a\u6d41\u7a0b\u56fe\u5e03\u5c40\u5168\u53d8\u4e86\u3002  \u4f8b\u5982\u5f53\u6211\u4eec\u5728\u4e00\u4e2a\u6bd4\u8f83\u89c4\u6574\u7684\u6d41\u7a0b\u56fe\u4e0a\u65b0\u589e\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u5982\u679c\u8fd9\u4e2a\u8282\u70b9\u521a\u597d\u628a\u5b83\u6240\u5c5e\u7684\u67d0\u6761\u8def\u5f84\u53d8\u6210\u6700\u957f\u8def\u5f84\uff0c\u5c31\u4f1a\u89e6\u53d1\u5e03\u5c40\u7b97\u6cd5\u4e2d\u6700\u957f\u8def\u5f84\u4f5c\u4e3a\u4e3b\u8981\u8def\u5f84\u7684\u601d\u8def\uff0c\u5bfc\u81f4\u5f88\u591a\u8282\u70b9\u4f4d\u7f6e\u6539\u53d8\u3002\u4f46\u662f\u56e0\u4e3a\u753b\u6d41\u7a0b\u56fe\u7684\u4eba\u57fa\u672c\u4e0a\u90fd\u4f1a\u9009\u62e9\u5c06\u4e1a\u52a1\u4e0a\u6709\u5173\u8054\u6216\u8005\u7c7b\u4f3c\u7684\u8282\u70b9\u653e\u5230\u540c\u4e00\u5757\u533a\u57df\uff0c\u6211\u4eec\u7684\u7f8e\u5316\u4f1a\u7834\u574f\u8fd9\u4e2a\u903b\u8f91\uff0c\u5bfc\u81f4\u4f7f\u7528\u4f53\u9a8c\u5341\u5206\u4e0d\u597d\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow/#_5","title":"\u9009\u533a\u7f8e\u5316","text":"<p>\u7531\u4e8e\u4e00\u952e\u7f8e\u5316\u8fd9\u79cd\u7eaf\u7cfb\u7edf\u5e03\u5c40\u7684\u4e0d\u591f\u4eba\u6027\u5316\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u4e00\u79cd\u534a\u7cfb\u7edf\u534a\u4eba\u5de5\u7684\u5e03\u5c40\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u9009\u533a\u7f8e\u5316\u3002\u9009\u533a\u7f8e\u5316\u5c31\u662f\u6574\u4e2a\u6d41\u7a0b\u56fe\u7684\u6574\u4f53\u5e03\u5c40\u4ecd\u7136\u7531\u753b\u56fe\u7684\u4eba\u6765\u63a7\u5236\uff0c\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u5de5\u5177\uff0c\u8ba9\u753b\u6d41\u7a0b\u56fe\u7684\u4eba\u9009\u4e2d\u90e8\u5206\u533a\u57df\u5185\u7684\u8282\u70b9\uff0c\u5bf9\u8fd9\u90e8\u5206\u8282\u70b9\u5e03\u5c40\u8fdb\u884c\u7f8e\u5316\u3002\u8fd9\u6837\u867d\u7136\u6ca1\u6709\u4e00\u952e\u7f8e\u5316\u90a3\u6837\u4fbf\u6377\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u4f53\u9a8c\u53d1\u73b0\u66f4\u52a0\u5b9e\u7528\u3002</p> <p>\u4e0d\u8bba\u4efb\u4f55\u5bf9\u6d41\u7a0b\u56fe\u7684\u5e03\u5c40\u7684\u7f8e\u5316\u6548\u679c\uff0c\u5728\u7814\u53d1\u7684\u89d2\u5ea6\u6765\u8bf4\u90fd\u662f\u5bf9\u6d41\u7a0b\u4e0a\u7684\u70b9\u3001\u7ebf\u5750\u6807\u8fdb\u884c\u8c03\u6574\uff0c \u4f46\u662f\u6700\u5927\u7684\u95ee\u9898\u53ef\u80fd\u662f\u4e5f\u4e0d\u77e5\u9053\u57fa\u4e8e\u4ec0\u4e48\u89c4\u5219\u53bb\u8c03\u6574\u3002\u5982\u679c\u4ea7\u54c1\u5df2\u7ecf\u7ed9\u51fa\u6765\u6e05\u6670\u7684\u89c4\u5219\uff0c\u4e8b\u60c5\u5f80\u5f80\u6bd4\u8f83\u7b80\u5355\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6309\u7167\u8fd9\u4e2a\u89c4\u5219\u5b9e\u73b0\u81ea\u5df1\u7684\u5e03\u5c40\u7b97\u6cd5\u5373\u53ef\u3002\u53ef\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u8fd8\u662f\u9700\u8981\u6211\u4eec\u7814\u53d1\u81ea\u5df1\u53bb\u8c03\u7814\uff0c\u4ece\u5df2\u5f00\u6e90\u7684\u9879\u76ee\u91cc\u9762\u627e\u5230\u5408\u9002\u7684\u5e03\u5c40\u7b97\u6cd5\uff0c \u7136\u540e\u7ed3\u5408\u6211\u4eec\u5f53\u524d\u9879\u76ee\u7684\u6d41\u7a0b\u56fe\u6846\u67b6\u6765\u5b9e\u73b0 \u3002</p> <p>\u76ee\u524d\u4e0a\u6709\u90e8\u5206\u6d41\u7a0b\u56fe\u6846\u67b6\u5df2\u7ecf\u81ea\u5e26\u4e86\u4e00\u4e9b\u5e03\u5c40\u7b97\u6cd5\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u8fd8\u6709\u6bd4\u8f83\u591a\u7684\u7ec6\u8282\u9700\u8981\u5904\u7406\uff0c\u4f8b\u5982\u8ba9\u5e03\u5c40\u540e\u7684\u8fde\u7ebf\u6392\u5e03\u66f4\u52a0\u5408\u7406\u3001\u67d0\u4e9b\u8282\u70b9\u4f4d\u7f6e\u4fdd\u8bc1\u76f8\u5bf9\u4e0d\u53d8\u7b49\u3002\u6211\u628a\u5728\u6211\u4eec\u9879\u76ee\u4e2d\u5b9e\u9645\u7528\u5230\u7684\u4e24\u79cd\u65b9\u5f0f\u63d0\u53d6\u51fa\u5e03\u5c40\u90e8\u5206\u7684\u903b\u8f91\u653e\u5230\u4e86github\u4e0a\uff0c\u8d76\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u62c9\u4e0b\u6765\u770b\u770b\u3002</p> <p>github\u5730\u5740\uff1ahttps://github.com/hsole/layoutFlow</p> <p>demo\u5728\u7ebf\u5730\u5740\uff1ahttps://hsole.github.io/layoutFlow</p> <p>\u4e3b\u8981\u4f9d\u8d56\u5f00\u6e90\u9879\u76ee\uff1a</p> <p>https://github.com/antvis/layout</p> <p>https://github.com/antvis/hierarchy</p> <p>https://github.com/didi/LogicFlow</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E4%BA%8B%E4%BB%B6%E9%80%9A%E4%BF%A1/","title":"LogicFlow \u4e8b\u4ef6\u901a\u4fe1","text":"<p>https://beta.logic-flow.cn/tutorial/basic-event</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/","title":"LogicFlow\u5b98\u65b9API\u76f8\u5173","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#grid","title":"grid","text":"<p>https://site.logic-flow.cn/docs/#/zh/guide/basic/grid?id=%e7%bd%91%e6%a0%bc-grid</p> <pre><code>const lf = new LogicFlow({\n  grid: true,\n});\n\n// \u7b49\u540c\u4e8e\u9ed8\u8ba4\u5c5e\u6027\u5982\u4e0b\nconst lf = new LogicFlow({\n  grid: {\n    size: 20,\n    visible: true,\n    type: \"dot\",\n    config: {\n      color: \"#ababab\",\n      thickness: 1,\n    },\n  },\n});\n</code></pre> <pre><code>export type GridOptions = {\n  size?: number  // \u8bbe\u7f6e\u7f51\u683c\u5927\u5c0f\n  visible?: boolean,  // \u8bbe\u7f6e\u662f\u5426\u53ef\u89c1\uff0c\u82e5\u8bbe\u7f6e\u4e3afalse\u5219\u4e0d\u663e\u793a\u7f51\u683c\u7ebf\u4f46\u662f\u4ecd\u7136\u4fdd\u7559size\u6805\u683c\u7684\u6548\u679c\n  type?: 'dot' | 'mesh', // \u8bbe\u7f6e\u7f51\u683c\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301 dot \u70b9\u72b6\u548c mesh \u7ebf\u72b6\u4e24\u79cd\n  config?: {\n    color: string,  // \u8bbe\u7f6e\u7f51\u683c\u7684\u989c\u8272\n    thickness?: number,  // \u8bbe\u7f6e\u7f51\u683c\u7ebf\u7684\u5bbd\u5ea6\n  }\n};\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#_1","title":"\u6279\u91cf\u6ce8\u518c\u8282\u70b9","text":"<ul> <li>https://github.com/didi/LogicFlow/issues/605</li> </ul> <pre><code>// this.lf.register(UserTask);\n// this.lf.register(ButtonNode);\nthis.lf.batchRegister([ButtonNode, UserTask]);\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#-selectionselect","title":"\u6279\u91cf - SelectionSelect","text":"<ul> <li>https://site.logic-flow.cn/docs/#/zh/guide/extension/component-selection?id=%e6%a1%86%e9%80%89-selectionselect</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#_2","title":"\u5916\u6846","text":"<ul> <li>https://site.logic-flow.cn/docs/#/zh/api/editConfigModelApi?id=editconfigmodel</li> </ul> \u5c5e\u6027\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u8bf4\u660e isSilentMode boolean false \u662f\u5426\u4e3a\u9759\u9ed8\u6a21\u5f0f stopZoomGraph boolean false \u7981\u6b62\u7f29\u653e\u753b\u5e03 stopScrollGraph boolean false \u7981\u6b62\u9f20\u6807\u6eda\u52a8\u79fb\u52a8\u753b\u5e03 stopMoveGraph boolean false \u7981\u6b62\u62d6\u52a8\u753b\u5e03 adjustEdge boolean true \u5141\u8bb8\u8c03\u6574\u8fb9 adjustEdgeMiddle boolean false \u53ea\u5bf9\u6298\u7ebf\u751f\u6548\uff0c\u53ea\u5141\u8bb8\u8c03\u6574\u8fb9\u7684\u4e2d\u95f4\u7ebf\u6bb5\uff0c\u4e0d\u5141\u8bb8\u8c03\u6574\u4e0e\u8d77\u70b9\u7ec8\u70b9\u76f8\u8fde\u7684\u7ebf\u6bb5 adjustEdgeStartAndEnd boolean false \u5141\u8bb8\u8c03\u6574\u8fb9\u8d77\u70b9/\u7ec8\u70b9 adjustNodePosition boolean true \u5141\u8bb8\u62d6\u52a8\u8282\u70b9 hideAnchors boolean false \u9690\u85cf\u8282\u70b9\u6240\u6709\u951a\u70b9 hoverOutline boolean true \u663e\u793a\u8282\u70b9\u60ac\u6d6e\u65f6\u7684\u5916\u6846 nodeTextEdit boolean true \u5141\u8bb8\u8282\u70b9\u6587\u672c\u53ef\u4ee5\u7f16\u8f91 edgeTextEdit boolean true \u5141\u8bb8\u8fb9\u6587\u672c\u53ef\u4ee5\u7f16\u8f91 nodeTextDraggable boolean false \u5141\u8bb8\u8282\u70b9\u6587\u672c\u53ef\u4ee5\u62d6\u62fd edgeTextDraggable boolean false \u5141\u8bb8\u8fb9\u6587\u672c\u53ef\u4ee5\u62d6\u62fd metaKeyMultipleSelected boolean false \u5141\u8bb8\u6309\u7167 meta \u952e\u591a\u9009\u5143\u7d20 autoExpand boolean true \u8282\u70b9/\u8fb9\u8d85\u51fa\u753b\u5e03\u540e\u81ea\u52a8\u6269\u5c55\u753b\u5e03"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#-editconfigmodel","title":"\u63a7\u5236\u9875\u9762\u7f16\u8f91\u72b6\u6001 - editconfigmodel","text":"<ul> <li>https://site.logic-flow.cn/docs/#/zh/api/editConfigModelApi?id=editconfigmodel</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#-constructor","title":"\u8282\u70b9\u5b9e\u4f8b\u64cd\u4f5c\u4ee5\u53ca\u4e8b\u4ef6 - constructor","text":"<p>\u6d41\u7a0b\u56fe\u4e0a\u6240\u6709\u7684\u8282\u70b9\u5b9e\u4f8b\u64cd\u4f5c\u4ee5\u53ca\u4e8b\u4ef6\uff0c\u884c\u4e3a\u76d1\u542c\u90fd\u5728 LogicFlow \u5b9e\u4f8b\u4e0a\u8fdb\u884c\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/LogicFlow%E5%AE%98%E6%96%B9API%E7%9B%B8%E5%85%B3/#_3","title":"\u81ea\u5b9a\u4e49\u8282\u70b9\u7684\u951a\u70b9","text":"<ul> <li>https://site.logic-flow.cn/docs/#/zh/guide/basic/node?id=%e8%87%aa%e5%ae%9a%e4%b9%89%e8%8a%82%e7%82%b9%e7%9a%84%e9%94%9a%e7%82%b9</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/","title":"\u524d\u7aef\u6d41\u7a0b\u56fe\u5f00\u6e90\u6846\u67b6","text":"<p>LogicFlow \u662f\u4e00\u6b3e\u6d41\u7a0b\u56fe\u7f16\u8f91\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u6d41\u7a0b\u56fe\u4ea4\u4e92\u3001\u7f16\u8f91\u6240\u5fc5\u9700\u7684\u529f\u80fd\u548c\u7b80\u5355\u7075\u6d3b\u7684\u8282\u70b9\u81ea\u5b9a\u4e49\u3001\u63d2\u4ef6\u7b49\u62d3\u5c55\u673a\u5236\uff0c\u65b9\u4fbf\u6211\u4eec\u5feb\u901f\u5728\u4e1a\u52a1\u7cfb\u7edf\u5185\u6ee1\u8db3\u7c7b\u6d41\u7a0b\u56fe\u7684\u9700\u6c42\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/#jsplumb","title":"jsPlumb(\u514d\u8d39/\u6536\u8d39)","text":"<p>\u63d0\u4f9b\u4e86\u4e00\u5957\u4e30\u5bcc\u7684API\u6765\u521b\u5efa\u6d41\u7a0b\u56fe\u548c\u5176\u4ed6\u7c7b\u578b\u7684\u56fe\u8868\u3002\u5b83\u652f\u6301\u62d6\u653e\u529f\u80fd\u548c\u65e0\u7f1d\u7684\u8fde\u63a5\u8282\u70b9\u3002</p> <ul> <li>\u5f00\u6e90\u5730\u5740\uff1ahttps://github.com/jsplumb/jsplumb</li> <li>\u5b98\u65b9\u5730\u5740\uff1ahttps://jsplumbtoolkit.com</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/#antv-g6","title":"AntV G6(\u514d\u8d39\u5f00\u6e90)","text":"<p>G6 \u662f\u4e00\u4e2a\u7b80\u5355\u3001\u6613\u7528\u3001\u5b8c\u5907\u7684\u56fe\u53ef\u89c6\u5316\u5f15\u64ce\uff0c\u5b83\u5728\u9ad8\u5b9a\u5236\u80fd\u529b\u7684\u57fa\u7840\u4e0a\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u8bbe\u8ba1\u4f18\u96c5\u3001\u4fbf\u4e8e\u4f7f\u7528\u7684\u56fe\u53ef\u89c6\u5316\u89e3\u51b3\u65b9\u6848\u3002\u80fd\u5e2e\u52a9\u5f00\u53d1\u8005\u642d\u5efa\u5c5e\u4e8e\u81ea\u5df1\u7684\u56fe\u53ef\u89c6\u5316\u3001\u56fe\u5206\u6790\u3001\u6216\u56fe\u7f16\u8f91\u5668\u5e94\u7528\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/#antv-x6","title":"AntV X6 (\u514d\u8d39\u5f00\u6e90)","text":"<p>X6 \u662f\u57fa\u4e8e HTML \u548c SVG \u7684\u56fe\u7f16\u8f91\u5f15\u64ce\uff0c\u63d0\u4f9b\u4f4e\u6210\u672c\u7684\u5b9a\u5236\u80fd\u529b\u548c\u5f00\u7bb1\u5373\u7528\u7684\u5185\u7f6e\u6269\u5c55\uff0c\u65b9\u4fbf\u6211\u4eec\u5feb\u901f\u642d\u5efa DAG \u56fe\u3001ER \u56fe\u3001\u6d41\u7a0b\u56fe\u3001\u8840\u7f18\u56fe\u7b49\u5e94\u7528\u3002</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/#logic-flow","title":"Logic Flow (\u514d\u8d39\u5f00\u6e90)","text":"<p>LogicFlow \u662f\u4e00\u6b3e\u6d41\u7a0b\u56fe\u7f16\u8f91\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u6d41\u7a0b\u56fe\u4ea4\u4e92\u3001\u7f16\u8f91\u6240\u5fc5\u9700\u7684\u529f\u80fd\u548c\u7075\u6d3b\u7684\u8282\u70b9\u81ea\u5b9a\u4e49\u3001\u63d2\u4ef6\u7b49\u62d3\u5c55\u673a\u5236\u3002LogicFlow \u652f\u6301\u524d\u7aef\u7814\u53d1\u81ea\u5b9a\u4e49\u5f00\u53d1\u5404\u79cd\u903b\u8f91\u7f16\u6392\u573a\u666f\uff0c\u5982\u6d41\u7a0b\u56fe\u3001ER \u56fe\u3001BPMN \u6d41\u7a0b\u7b49\u3002\u5728\u5de5\u4f5c\u5ba1\u6279\u914d\u7f6e\u3001\u673a\u5668\u4eba\u903b\u8f91\u7f16\u6392\u3001\u65e0\u4ee3\u7801\u5e73\u53f0\u6d41\u7a0b\u914d\u7f6e\u90fd\u6709\u8f83\u597d\u7684\u5e94\u7528\u3002</p> <p>\u56fe\u6e32\u67d3\u65b9\u6848</p> <p>\u524d\u7aef\u7ed8\u5236\u56fe\u5f62\u65e0\u975e\u5c31\u662f HTML + CSS\u3001Canvas\u3001Svg \u4e09\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u7efc\u5408\u505a\u4e86\u4e00\u4e0b\u5bf9\u6bd4\uff0c\u5217\u51fa\u4e86\u76f8\u5e94\u7684\u4f18\u52a3\u52bf\uff1a</p> <p></p> <p>\u5728\u6d41\u7a0b\u56fe\u7684\u573a\u666f\u4e0b\uff0c\u4e0d\u9700\u8981\u6e32\u67d3\u5927\u91cf\u7684\u8282\u70b9\uff08\u6700\u591a\u51e0\u5343\u4e2a\u5143\u7d20\uff09\uff0c\u5bf9\u4e8e\u52a8\u753b\u7684\u8bc9\u6c42\u4e5f\u4e0d\u9ad8\u3002Svg \u57fa\u4e8e DOM \u7684\u7279\u6027\u4f1a\u66f4\u9002\u5408\u6211\u4eec\uff0c\u4e00\u4e2a\u662f\u5b66\u4e60\u6210\u672c\u548c\u5f00\u53d1\u6210\u672c\u66f4\u4f4e\uff0c\u53e6\u4e00\u4e2a\u662f\u57fa\u4e8e DOM \u53ef\u4ee5\u505a\u7684\u62d3\u5c55\u4e5f\u66f4\u591a\u3002\u4e0d\u8fc7 Svg \u6807\u7b7e\u5185\u90e8\u5e76\u4e0d\u652f\u6301\u63d2\u5165\u5176\u4ed6\u6bd4\u5982 div \u8fd9\u79cd\u6807\u7b7e\uff0c\u6240\u4ee5\u5728\u5b9e\u73b0\u67d0\u4e9b\u529f\u80fd\u7684\u65f6\u5019\uff0c\u90fd\u9700\u8981\u7ed3\u5408\u5176\u4ed6 HTML \u6807\u7b7e\u3002</p> <p>\u6240\u4ee5\u6700\u7ec8\u6211\u4eec\u9009\u62e9\u4f7f\u7528 HTML + Svg \u6765\u5b8c\u6210\u56fe\u7684\u6e32\u67d3\uff0cSvg \u8d1f\u8d23\u56fe\u5f62\u3001\u7ebf\u7684\u90e8\u5206\uff0cHTML \u6765\u5b9e\u73b0\u6587\u672c\u3001\u83dc\u5355\u3001\u80cc\u666f\u7b49\u56fe\u5c42\u3002</p> <ul> <li>https://codesandbox.io/embed/bold-moore-vgvpf?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview</li> <li>https://github.com/didi/LogicFlow/issues/716</li> <li></li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%9B%B8%E5%85%B3/%E5%89%8D%E7%AB%AF%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/#d3-hierarchy","title":"d3-hierarchy","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E7%A7%BB%E5%8A%A8%E7%AB%AF/nuxt3%E4%BD%BF%E7%94%A8vconsole/","title":"Nuxt3\u4f7f\u7528vconsole","text":""},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E7%A7%BB%E5%8A%A8%E7%AB%AF/nuxt3%E4%BD%BF%E7%94%A8vconsole/#nuxt3vconsole","title":"nuxt3\u4f7f\u7528vconsole\u7684\u6b63\u786e\u59ff\u52bf","text":"<p>vConsole github \u8bae\u9898</p> <p><code>Nuxt</code> \u662f\u4e00\u4e2a\u670d\u52a1\u7aef\u6e32\u67d3\u7684\u9879\u76ee\uff0c<code>vconsole</code> \u662f\u4e00\u4e2a\u524d\u7aef\u7684\u8c03\u8bd5\u5de5\u5177\u3002\u7531\u4e8e\u670d\u52a1\u7aef\u6e32\u67d3\u7684\u7279\u6027\uff0c<code>vconsole</code> \u65e0\u6cd5\u76f4\u63a5\u5728\u670d\u52a1\u7aef\u8fd0\u884c\u3002</p> <pre><code>app: {\n    head: {\n      script: [\n         {\n           src: '//unpkg.com/vconsole@latest/dist/vconsole.min.js',\n           type: 'text/javascript',\n         },\n      ],\n    },\n</code></pre> <p>\u521d\u59cb\u5316\uff1a</p> <pre><code>if (process.client) {\n  process.dev &amp;&amp; window.VConsole &amp;&amp; new window.VConsole()\n}\n</code></pre> <p>\u4e0a\u8ff0\u521d\u59cb\u5316\u65b9\u5f0f\u867d\u7136\u53ef\u4ee5\u5728\u9875\u9762\u5f15\u5165vconsole\uff0c\u4f46\u662f\u65e0\u6cd5\u6b63\u786e\u6355\u83b7\u5230\u8bf7\u6c42\u3002</p> <p>\u5c06\u521d\u59cb\u5316\u65b9\u5f0f\u653e\u5728config\u6587\u4ef6\u4e2d\uff1a</p> <pre><code>  app: {\n    head: {\n      script: [\n         {\n          src: '//unpkg.com/vconsole@latest/dist/vconsole.min.js',\n           type: 'text/javascript',\n         },\n         { innerHTML: 'new VConsole()' },\n      ],\n    },\n  },\n</code></pre> <p>\u4f7f\u7528eruda\u4e5f\u662f\u540c\u6837\u7684\u5f15\u5165\u65b9\u5f0f</p> <p>liriliri/eruda#303</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E7%A7%BB%E5%8A%A8%E7%AB%AF/nuxt3%E4%BD%BF%E7%94%A8vconsole/#_1","title":"\u53c2\u8003","text":"<ul> <li> <p>use vConsole in Nuxt.js #232</p> </li> <li> <p>nuxtjs</p> </li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E7%A7%BB%E5%8A%A8%E7%AB%AF/vConsole/","title":"vConsole - \u79fb\u52a8\u7aef\u5f00\u53d1\u8c03\u8bd5\u5229\u5668","text":"<ul> <li>gitee: https://gitee.com/Tencent/vConsole</li> <li>github: https://github.com/Tencent/vConsole</li> </ul> <p>vConsole\u662f\u4e00\u4e2a\u8f7b\u91cf\u3001\u53ef\u62d3\u5c55\u3001\u9488\u5bf9\u624b\u673a\u7f51\u9875\u7684\u524d\u7aef\u5f00\u53d1\u8005\u8c03\u8bd5\u9762\u677f\u3002</p> <p>\u7279\u6027 \u67e5\u770b console \u65e5\u5fd7 \u67e5\u770b\u7f51\u7edc\u8bf7\u6c42 \u67e5\u770b\u9875\u9762 element \u7ed3\u6784 \u67e5\u770b Cookies\u3001localStorage \u548c SessionStorage \u624b\u52a8\u6267\u884c JS \u547d\u4ee4\u884c \u81ea\u5b9a\u4e49\u63d2\u4ef6 \u4e0a\u624b</p>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E7%A7%BB%E5%8A%A8%E7%AB%AF/vConsole/#npm","title":"\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528 npm\uff08\u63a8\u8350\uff09","text":"<pre><code>$ npm install vconsole\n</code></pre> <p>Import \u5e76\u521d\u59cb\u5316\u540e\uff0c\u5373\u53ef\u4f7f\u7528 console.log \u529f\u80fd\uff0c\u5982 Chrome devtools \u4e0a\u4e00\u6837\u3002</p> <pre><code>import VConsole from 'vconsole';\n\nconst vConsole = new VConsole();\n// \u6216\u8005\u4f7f\u7528 options \u9009\u9879\u521d\u59cb\u5316\nconst vConsole = new VConsole({ maxLogNumber: 1000 });\n\n// \u63a5\u4e0b\u6765\u5373\u53ef\u7167\u5e38\u4f7f\u7528 `console` \u7b49\u65b9\u6cd5\nconsole.log('Hello world');\n\n// \u7ed3\u675f\u8c03\u8bd5\u540e\uff0c\u53ef\u79fb\u9664\u6389\nvConsole.destroy();\n\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528 unpkg \u7684 CDN \u76f4\u63a5\u63d2\u5165\u5230 HTML\n\n&lt;script src=\"https://unpkg.com/vconsole/dist/vconsole.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n  // VConsole \u9ed8\u8ba4\u4f1a\u6302\u8f7d\u5230 `window.VConsole` \u4e0a\n  var vConsole = new window.VConsole();\n&lt;/script&gt;\n</code></pre>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E8%A3%85%E6%9C%BA%E5%BF%85%E5%A4%87/","title":"\u88c5\u673a\u5fc5\u5907","text":"<ul> <li>xcode</li> <li>\u9996\u6b21\u4f7f\u7528git\u7684\u65f6\u5019\u4f1a\u63d0\u793a\u5b89\u88c5, \u76f4\u63a5\u70b9\u51fb\u5b89\u88c5\u5c31\u53ef\u4ee5\u4e86</li> <li>\u7ec8\u7aef</li> <li> <p>Oh my zsh</p> </li> <li> <p>\u8c37\u6b4c\u6d4f\u89c8\u5668</p> </li> <li>\u817e\u8baf\u7ba1\u5bb6Mac\u7248\u672c-\u65e7\u7248</li> <li>uPic</li> <li>PicGo</li> <li>\u9632\u706b\u5899-TripMode 2.2.1</li> <li>\u54d4\u54e9\u54d4\u54e9-\u5b66\u4e60-\u5a31\u4e50</li> <li>Bob\u7ffb\u8bd1\u8f6f\u4ef6</li> <li>Easydict\u7ffb\u8bd1</li> <li>ChatX - App Store</li> <li>\u8d85\u7ea7\u53f3\u952e</li> <li>vscode</li> </ul>"},{"location":"%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E8%A3%85%E6%9C%BA%E5%BF%85%E5%A4%87/%20OhMyZsh%E5%AE%89%E8%A3%85/","title":"OhMyZsh\u5b89\u88c5","text":"<p>\u5b98\u7f51\uff1ahttps://ohmyz.sh/#install</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/","title":"\u7b80\u4ecb","text":"<p>\u4f18\u79c0\u6587\u7ae0\u5185\u5bb9\u8f6c\u8f7d</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/","title":"01-ECMAScript 6 \u7b80\u4ecb","text":"<p>ECMAScript 6.0\uff08\u4ee5\u4e0b\u7b80\u79f0 ES6\uff09\u662f JavaScript \u8bed\u8a00\u7684\u4e0b\u4e00\u4ee3\u6807\u51c6\uff0c\u5df2\u7ecf\u5728 2015 \u5e74 6 \u6708\u6b63\u5f0f\u53d1\u5e03\u4e86\u3002\u5b83\u7684\u76ee\u6807\uff0c\u662f\u4f7f\u5f97 JavaScript \u8bed\u8a00\u53ef\u4ee5\u7528\u6765\u7f16\u5199\u590d\u6742\u7684\u5927\u578b\u5e94\u7528\u7a0b\u5e8f\uff0c\u6210\u4e3a\u4f01\u4e1a\u7ea7\u5f00\u53d1\u8bed\u8a00\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#ecmascript-javascript","title":"ECMAScript \u548c JavaScript \u7684\u5173\u7cfb","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u662f\uff0cECMAScript \u548c JavaScript \u5230\u5e95\u662f\u4ec0\u4e48\u5173\u7cfb\uff1f</p> <p>\u8981\u8bb2\u6e05\u695a\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u56de\u987e\u5386\u53f2\u30021996 \u5e74 11 \u6708\uff0cJavaScript \u7684\u521b\u9020\u8005 Netscape \u516c\u53f8\uff0c\u51b3\u5b9a\u5c06 JavaScript \u63d0\u4ea4\u7ed9\u6807\u51c6\u5316\u7ec4\u7ec7 ECMA\uff0c\u5e0c\u671b\u8fd9\u79cd\u8bed\u8a00\u80fd\u591f\u6210\u4e3a\u56fd\u9645\u6807\u51c6\u3002\u6b21\u5e74\uff0cECMA \u53d1\u5e03 262 \u53f7\u6807\u51c6\u6587\u4ef6\uff08ECMA-262\uff09\u7684\u7b2c\u4e00\u7248\uff0c\u89c4\u5b9a\u4e86\u6d4f\u89c8\u5668\u811a\u672c\u8bed\u8a00\u7684\u6807\u51c6\uff0c\u5e76\u5c06\u8fd9\u79cd\u8bed\u8a00\u79f0\u4e3a ECMAScript\uff0c\u8fd9\u4e2a\u7248\u672c\u5c31\u662f 1.0 \u7248\u3002</p> <p>\u8be5\u6807\u51c6\u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u9488\u5bf9 JavaScript \u8bed\u8a00\u5236\u5b9a\u7684\uff0c\u4f46\u662f\u4e4b\u6240\u4ee5\u4e0d\u53eb JavaScript\uff0c\u6709\u4e24\u4e2a\u539f\u56e0\u3002\u4e00\u662f\u5546\u6807\uff0cJava \u662f Sun \u516c\u53f8\u7684\u5546\u6807\uff0c\u6839\u636e\u6388\u6743\u534f\u8bae\uff0c\u53ea\u6709 Netscape \u516c\u53f8\u53ef\u4ee5\u5408\u6cd5\u5730\u4f7f\u7528 JavaScript \u8fd9\u4e2a\u540d\u5b57\uff0c\u4e14 JavaScript \u672c\u8eab\u4e5f\u5df2\u7ecf\u88ab Netscape \u516c\u53f8\u6ce8\u518c\u4e3a\u5546\u6807\u3002\u4e8c\u662f\u60f3\u4f53\u73b0\u8fd9\u95e8\u8bed\u8a00\u7684\u5236\u5b9a\u8005\u662f ECMA\uff0c\u4e0d\u662f Netscape\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u4fdd\u8bc1\u8fd9\u95e8\u8bed\u8a00\u7684\u5f00\u653e\u6027\u548c\u4e2d\u7acb\u6027\u3002</p> <p>\u56e0\u6b64\uff0cECMAScript \u548c JavaScript \u7684\u5173\u7cfb\u662f\uff0c\u524d\u8005\u662f\u540e\u8005\u7684\u89c4\u683c\uff0c\u540e\u8005\u662f\u524d\u8005\u7684\u4e00\u79cd\u5b9e\u73b0\uff08\u53e6\u5916\u7684 ECMAScript \u65b9\u8a00\u8fd8\u6709 JScript \u548c ActionScript\uff09\u3002\u65e5\u5e38\u573a\u5408\uff0c\u8fd9\u4e24\u4e2a\u8bcd\u662f\u53ef\u4ee5\u4e92\u6362\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#es6-ecmascript-2015","title":"ES6 \u4e0e ECMAScript 2015 \u7684\u5173\u7cfb","text":"<p>ECMAScript 2015\uff08\u7b80\u79f0 ES2015\uff09\u8fd9\u4e2a\u8bcd\uff0c\u4e5f\u662f\u7ecf\u5e38\u53ef\u4ee5\u770b\u5230\u7684\u3002\u5b83\u4e0e ES6 \u662f\u4ec0\u4e48\u5173\u7cfb\u5462\uff1f</p> <p>2011 \u5e74\uff0cECMAScript 5.1 \u7248\u53d1\u5e03\u540e\uff0c\u5c31\u5f00\u59cb\u5236\u5b9a 6.0 \u7248\u4e86\u3002\u56e0\u6b64\uff0cES6 \u8fd9\u4e2a\u8bcd\u7684\u539f\u610f\uff0c\u5c31\u662f\u6307 JavaScript \u8bed\u8a00\u7684\u4e0b\u4e00\u4e2a\u7248\u672c\u3002</p> <p>\u4f46\u662f\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7248\u672c\u5f15\u5165\u7684\u8bed\u6cd5\u529f\u80fd\u592a\u591a\uff0c\u800c\u4e14\u5236\u5b9a\u8fc7\u7a0b\u5f53\u4e2d\uff0c\u8fd8\u6709\u5f88\u591a\u7ec4\u7ec7\u548c\u4e2a\u4eba\u4e0d\u65ad\u63d0\u4ea4\u65b0\u529f\u80fd\u3002\u4e8b\u60c5\u5f88\u5feb\u5c31\u53d8\u5f97\u6e05\u695a\u4e86\uff0c\u4e0d\u53ef\u80fd\u5728\u4e00\u4e2a\u7248\u672c\u91cc\u9762\u5305\u62ec\u6240\u6709\u5c06\u8981\u5f15\u5165\u7684\u529f\u80fd\u3002\u5e38\u89c4\u7684\u505a\u6cd5\u662f\u5148\u53d1\u5e03 6.0 \u7248\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u53d1 6.1 \u7248\uff0c\u7136\u540e\u662f 6.2 \u7248\u30016.3 \u7248\u7b49\u7b49\u3002</p> <p>\u4f46\u662f\uff0c\u6807\u51c6\u7684\u5236\u5b9a\u8005\u4e0d\u60f3\u8fd9\u6837\u505a\u3002\u4ed6\u4eec\u60f3\u8ba9\u6807\u51c6\u7684\u5347\u7ea7\u6210\u4e3a\u5e38\u89c4\u6d41\u7a0b\uff1a\u4efb\u4f55\u4eba\u5728\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u53ef\u4ee5\u5411\u6807\u51c6\u59d4\u5458\u4f1a\u63d0\u4ea4\u65b0\u8bed\u6cd5\u7684\u63d0\u6848\uff0c\u7136\u540e\u6807\u51c6\u59d4\u5458\u4f1a\u6bcf\u4e2a\u6708\u5f00\u4e00\u6b21\u4f1a\uff0c\u8bc4\u4f30\u8fd9\u4e9b\u63d0\u6848\u662f\u5426\u53ef\u4ee5\u63a5\u53d7\uff0c\u9700\u8981\u54ea\u4e9b\u6539\u8fdb\u3002\u5982\u679c\u7ecf\u8fc7\u591a\u6b21\u4f1a\u8bae\u4ee5\u540e\uff0c\u4e00\u4e2a\u63d0\u6848\u8db3\u591f\u6210\u719f\u4e86\uff0c\u5c31\u53ef\u4ee5\u6b63\u5f0f\u8fdb\u5165\u6807\u51c6\u4e86\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u6807\u51c6\u7684\u7248\u672c\u5347\u7ea7\u6210\u4e3a\u4e86\u4e00\u4e2a\u4e0d\u65ad\u6eda\u52a8\u7684\u6d41\u7a0b\uff0c\u6bcf\u4e2a\u6708\u90fd\u4f1a\u6709\u53d8\u52a8\u3002</p> <p>\u6807\u51c6\u59d4\u5458\u4f1a\u6700\u7ec8\u51b3\u5b9a\uff0c\u6807\u51c6\u5728\u6bcf\u5e74\u7684 6 \u6708\u4efd\u6b63\u5f0f\u53d1\u5e03\u4e00\u6b21\uff0c\u4f5c\u4e3a\u5f53\u5e74\u7684\u6b63\u5f0f\u7248\u672c\u3002\u63a5\u4e0b\u6765\u7684\u65f6\u95f4\uff0c\u5c31\u5728\u8fd9\u4e2a\u7248\u672c\u7684\u57fa\u7840\u4e0a\u505a\u6539\u52a8\uff0c\u76f4\u5230\u4e0b\u4e00\u5e74\u7684 6 \u6708\u4efd\uff0c\u8349\u6848\u5c31\u81ea\u7136\u53d8\u6210\u4e86\u65b0\u4e00\u5e74\u7684\u7248\u672c\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u4e0d\u9700\u8981\u4ee5\u524d\u7684\u7248\u672c\u53f7\u4e86\uff0c\u53ea\u8981\u7528\u5e74\u4efd\u6807\u8bb0\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>ES6 \u7684\u7b2c\u4e00\u4e2a\u7248\u672c\uff0c\u5c31\u8fd9\u6837\u5728 2015 \u5e74 6 \u6708\u53d1\u5e03\u4e86\uff0c\u6b63\u5f0f\u540d\u79f0\u5c31\u662f\u300aECMAScript 2015 \u6807\u51c6\u300b\uff08\u7b80\u79f0 ES2015\uff09\u30022016 \u5e74 6 \u6708\uff0c\u5c0f\u5e45\u4fee\u8ba2\u7684\u300aECMAScript 2016 \u6807\u51c6\u300b\uff08\u7b80\u79f0 ES2016\uff09\u5982\u671f\u53d1\u5e03\uff0c\u8fd9\u4e2a\u7248\u672c\u53ef\u4ee5\u770b\u4f5c\u662f ES6.1 \u7248\uff0c\u56e0\u4e3a\u4e24\u8005\u7684\u5dee\u5f02\u975e\u5e38\u5c0f\uff08\u53ea\u65b0\u589e\u4e86\u6570\u7ec4\u5b9e\u4f8b\u7684<code>includes</code>\u65b9\u6cd5\u548c\u6307\u6570\u8fd0\u7b97\u7b26\uff09\uff0c\u57fa\u672c\u4e0a\u662f\u540c\u4e00\u4e2a\u6807\u51c6\u3002\u6839\u636e\u8ba1\u5212\uff0c2017 \u5e74 6 \u6708\u53d1\u5e03 ES2017 \u6807\u51c6\u3002</p> <p>\u56e0\u6b64\uff0cES6 \u65e2\u662f\u4e00\u4e2a\u5386\u53f2\u540d\u8bcd\uff0c\u4e5f\u662f\u4e00\u4e2a\u6cdb\u6307\uff0c\u542b\u4e49\u662f 5.1 \u7248\u4ee5\u540e\u7684 JavaScript \u7684\u4e0b\u4e00\u4ee3\u6807\u51c6\uff0c\u6db5\u76d6\u4e86 ES2015\u3001ES2016\u3001ES2017 \u7b49\u7b49\uff0c\u800c ES2015 \u5219\u662f\u6b63\u5f0f\u540d\u79f0\uff0c\u7279\u6307\u8be5\u5e74\u53d1\u5e03\u7684\u6b63\u5f0f\u7248\u672c\u7684\u8bed\u8a00\u6807\u51c6\u3002\u672c\u4e66\u4e2d\u63d0\u5230 ES6 \u7684\u5730\u65b9\uff0c\u4e00\u822c\u662f\u6307 ES2015 \u6807\u51c6\uff0c\u4f46\u6709\u65f6\u4e5f\u662f\u6cdb\u6307\u201c\u4e0b\u4e00\u4ee3 JavaScript \u8bed\u8a00\u201d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#_1","title":"\u8bed\u6cd5\u63d0\u6848\u7684\u6279\u51c6\u6d41\u7a0b","text":"<p>\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u5411\u6807\u51c6\u59d4\u5458\u4f1a\uff08\u53c8\u79f0 TC39 \u59d4\u5458\u4f1a\uff09\u63d0\u6848\uff0c\u8981\u6c42\u4fee\u6539\u8bed\u8a00\u6807\u51c6\u3002</p> <p>\u4e00\u79cd\u65b0\u7684\u8bed\u6cd5\u4ece\u63d0\u6848\u5230\u53d8\u6210\u6b63\u5f0f\u6807\u51c6\uff0c\u9700\u8981\u7ecf\u5386\u4e94\u4e2a\u9636\u6bb5\u3002\u6bcf\u4e2a\u9636\u6bb5\u7684\u53d8\u52a8\u90fd\u9700\u8981\u7531 TC39 \u59d4\u5458\u4f1a\u6279\u51c6\u3002</p> <ul> <li>Stage 0 - Strawman\uff08\u5c55\u793a\u9636\u6bb5\uff09</li> <li>Stage 1 - Proposal\uff08\u5f81\u6c42\u610f\u89c1\u9636\u6bb5\uff09</li> <li>Stage 2 - Draft\uff08\u8349\u6848\u9636\u6bb5\uff09</li> <li>Stage 3 - Candidate\uff08\u5019\u9009\u4eba\u9636\u6bb5\uff09</li> <li>Stage 4 - Finished\uff08\u5b9a\u6848\u9636\u6bb5\uff09</li> </ul> <p>\u4e00\u4e2a\u63d0\u6848\u53ea\u8981\u80fd\u8fdb\u5165 Stage 2\uff0c\u5c31\u5dee\u4e0d\u591a\u80af\u5b9a\u4f1a\u5305\u62ec\u5728\u4ee5\u540e\u7684\u6b63\u5f0f\u6807\u51c6\u91cc\u9762\u3002ECMAScript \u5f53\u524d\u7684\u6240\u6709\u63d0\u6848\uff0c\u53ef\u4ee5\u5728 TC39 \u7684\u5b98\u65b9\u7f51\u7ad9GitHub.com/tc39/ecma262\u67e5\u770b\u3002</p> <p>\u672c\u4e66\u7684\u5199\u4f5c\u76ee\u6807\u4e4b\u4e00\uff0c\u662f\u8ddf\u8e2a ECMAScript \u8bed\u8a00\u7684\u6700\u65b0\u8fdb\u5c55\uff0c\u4ecb\u7ecd 5.1 \u7248\u672c\u4ee5\u540e\u6240\u6709\u7684\u65b0\u8bed\u6cd5\u3002\u5bf9\u4e8e\u90a3\u4e9b\u660e\u786e\u6216\u5f88\u6709\u5e0c\u671b\uff0c\u5c06\u8981\u5217\u5165\u6807\u51c6\u7684\u65b0\u8bed\u6cd5\uff0c\u90fd\u5c06\u4e88\u4ee5\u4ecb\u7ecd\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#ecmascript","title":"ECMAScript \u7684\u5386\u53f2","text":"<p>ES6 \u4ece\u5f00\u59cb\u5236\u5b9a\u5230\u6700\u540e\u53d1\u5e03\uff0c\u6574\u6574\u7528\u4e86 15 \u5e74\u3002</p> <p>\u524d\u9762\u63d0\u5230\uff0cECMAScript 1.0 \u662f 1997 \u5e74\u53d1\u5e03\u7684\uff0c\u63a5\u4e0b\u6765\u7684\u4e24\u5e74\uff0c\u8fde\u7eed\u53d1\u5e03\u4e86 ECMAScript 2.0\uff081998 \u5e74 6 \u6708\uff09\u548c ECMAScript 3.0\uff081999 \u5e74 12 \u6708\uff09\u30023.0 \u7248\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6210\u529f\uff0c\u5728\u4e1a\u754c\u5f97\u5230\u5e7f\u6cdb\u652f\u6301\uff0c\u6210\u4e3a\u901a\u884c\u6807\u51c6\uff0c\u5960\u5b9a\u4e86 JavaScript \u8bed\u8a00\u7684\u57fa\u672c\u8bed\u6cd5\uff0c\u4ee5\u540e\u7684\u7248\u672c\u5b8c\u5168\u7ee7\u627f\u3002\u76f4\u5230\u4eca\u5929\uff0c\u521d\u5b66\u8005\u4e00\u5f00\u59cb\u5b66\u4e60 JavaScript\uff0c\u5176\u5b9e\u5c31\u662f\u5728\u5b66 3.0 \u7248\u7684\u8bed\u6cd5\u3002</p> <p>2000 \u5e74\uff0cECMAScript 4.0 \u5f00\u59cb\u915d\u917f\u3002\u8fd9\u4e2a\u7248\u672c\u6700\u540e\u6ca1\u6709\u901a\u8fc7\uff0c\u4f46\u662f\u5b83\u7684\u5927\u90e8\u5206\u5185\u5bb9\u88ab ES6 \u7ee7\u627f\u4e86\u3002\u56e0\u6b64\uff0cES6 \u5236\u5b9a\u7684\u8d77\u70b9\u5176\u5b9e\u662f 2000 \u5e74\u3002</p> <p>\u4e3a\u4ec0\u4e48 ES4 \u6ca1\u6709\u901a\u8fc7\u5462\uff1f\u56e0\u4e3a\u8fd9\u4e2a\u7248\u672c\u592a\u6fc0\u8fdb\u4e86\uff0c\u5bf9 ES3 \u505a\u4e86\u5f7b\u5e95\u5347\u7ea7\uff0c\u5bfc\u81f4\u6807\u51c6\u59d4\u5458\u4f1a\u7684\u4e00\u4e9b\u6210\u5458\u4e0d\u613f\u610f\u63a5\u53d7\u3002ECMA \u7684\u7b2c 39 \u53f7\u6280\u672f\u4e13\u5bb6\u59d4\u5458\u4f1a\uff08Technical Committee 39\uff0c\u7b80\u79f0 TC39\uff09\u8d1f\u8d23\u5236\u8ba2 ECMAScript \u6807\u51c6\uff0c\u6210\u5458\u5305\u62ec Microsoft\u3001Mozilla\u3001Google \u7b49\u5927\u516c\u53f8\u3002</p> <p>2007 \u5e74 10 \u6708\uff0cECMAScript 4.0 \u7248\u8349\u6848\u53d1\u5e03\uff0c\u672c\u6765\u9884\u8ba1\u6b21\u5e74 8 \u6708\u53d1\u5e03\u6b63\u5f0f\u7248\u672c\u3002\u4f46\u662f\uff0c\u5404\u65b9\u5bf9\u4e8e\u662f\u5426\u901a\u8fc7\u8fd9\u4e2a\u6807\u51c6\uff0c\u53d1\u751f\u4e86\u4e25\u91cd\u5206\u6b67\u3002\u4ee5 Yahoo\u3001Microsoft\u3001Google \u4e3a\u9996\u7684\u5927\u516c\u53f8\uff0c\u53cd\u5bf9 JavaScript \u7684\u5927\u5e45\u5347\u7ea7\uff0c\u4e3b\u5f20\u5c0f\u5e45\u6539\u52a8\uff1b\u4ee5 JavaScript \u521b\u9020\u8005 Brendan Eich \u4e3a\u9996\u7684 Mozilla \u516c\u53f8\uff0c\u5219\u575a\u6301\u5f53\u524d\u7684\u8349\u6848\u3002</p> <p>2008 \u5e74 7 \u6708\uff0c\u7531\u4e8e\u5bf9\u4e8e\u4e0b\u4e00\u4e2a\u7248\u672c\u5e94\u8be5\u5305\u62ec\u54ea\u4e9b\u529f\u80fd\uff0c\u5404\u65b9\u5206\u6b67\u592a\u5927\uff0c\u4e89\u8bba\u8fc7\u4e8e\u6fc0\u70c8\uff0cECMA \u5f00\u4f1a\u51b3\u5b9a\uff0c\u4e2d\u6b62 ECMAScript 4.0 \u7684\u5f00\u53d1\uff0c\u5c06\u5176\u4e2d\u6d89\u53ca\u73b0\u6709\u529f\u80fd\u6539\u5584\u7684\u4e00\u5c0f\u90e8\u5206\uff0c\u53d1\u5e03\u4e3a ECMAScript 3.1\uff0c\u800c\u5c06\u5176\u4ed6\u6fc0\u8fdb\u7684\u8bbe\u60f3\u6269\u5927\u8303\u56f4\uff0c\u653e\u5165\u4ee5\u540e\u7684\u7248\u672c\uff0c\u7531\u4e8e\u4f1a\u8bae\u7684\u6c14\u6c1b\uff0c\u8be5\u7248\u672c\u7684\u9879\u76ee\u4ee3\u53f7\u8d77\u540d\u4e3a Harmony\uff08\u548c\u8c10\uff09\u3002\u4f1a\u540e\u4e0d\u4e45\uff0cECMAScript 3.1 \u5c31\u6539\u540d\u4e3a ECMAScript 5\u3002</p> <p>2009 \u5e74 12 \u6708\uff0cECMAScript 5.0 \u7248\u6b63\u5f0f\u53d1\u5e03\u3002Harmony \u9879\u76ee\u5219\u4e00\u5206\u4e3a\u4e8c\uff0c\u4e00\u4e9b\u8f83\u4e3a\u53ef\u884c\u7684\u8bbe\u60f3\u5b9a\u540d\u4e3a JavaScript.next \u7ee7\u7eed\u5f00\u53d1\uff0c\u540e\u6765\u6f14\u53d8\u6210 ECMAScript 6\uff1b\u4e00\u4e9b\u4e0d\u662f\u5f88\u6210\u719f\u7684\u8bbe\u60f3\uff0c\u5219\u88ab\u89c6\u4e3a JavaScript.next.next\uff0c\u5728\u66f4\u8fdc\u7684\u5c06\u6765\u518d\u8003\u8651\u63a8\u51fa\u3002TC39 \u59d4\u5458\u4f1a\u7684\u603b\u4f53\u8003\u8651\u662f\uff0cES5 \u4e0e ES3 \u57fa\u672c\u4fdd\u6301\u517c\u5bb9\uff0c\u8f83\u5927\u7684\u8bed\u6cd5\u4fee\u6b63\u548c\u65b0\u529f\u80fd\u52a0\u5165\uff0c\u5c06\u7531 JavaScript.next \u5b8c\u6210\u3002\u5f53\u65f6\uff0cJavaScript.next \u6307\u7684\u662f ES6\uff0c\u7b2c\u516d\u7248\u53d1\u5e03\u4ee5\u540e\uff0c\u5c31\u6307 ES7\u3002TC39 \u7684\u5224\u65ad\u662f\uff0cES5 \u4f1a\u5728 2013 \u5e74\u7684\u5e74\u4e2d\u6210\u4e3a JavaScript \u5f00\u53d1\u7684\u4e3b\u6d41\u6807\u51c6\uff0c\u5e76\u5728\u6b64\u540e\u4e94\u5e74\u4e2d\u4e00\u76f4\u4fdd\u6301\u8fd9\u4e2a\u4f4d\u7f6e\u3002</p> <p>2011 \u5e74 6 \u6708\uff0cECMAScript 5.1 \u7248\u53d1\u5e03\uff0c\u5e76\u4e14\u6210\u4e3a ISO \u56fd\u9645\u6807\u51c6\uff08ISO/IEC 16262:2011\uff09\u3002</p> <p>2013 \u5e74 3 \u6708\uff0cECMAScript 6 \u8349\u6848\u51bb\u7ed3\uff0c\u4e0d\u518d\u6dfb\u52a0\u65b0\u529f\u80fd\u3002\u65b0\u7684\u529f\u80fd\u8bbe\u60f3\u5c06\u88ab\u653e\u5230 ECMAScript 7\u3002</p> <p>2013 \u5e74 12 \u6708\uff0cECMAScript 6 \u8349\u6848\u53d1\u5e03\u3002\u7136\u540e\u662f 12 \u4e2a\u6708\u7684\u8ba8\u8bba\u671f\uff0c\u542c\u53d6\u5404\u65b9\u53cd\u9988\u3002</p> <p>2015 \u5e74 6 \u6708\uff0cECMAScript 6 \u6b63\u5f0f\u901a\u8fc7\uff0c\u6210\u4e3a\u56fd\u9645\u6807\u51c6\u3002\u4ece 2000 \u5e74\u7b97\u8d77\uff0c\u8fd9\u65f6\u5df2\u7ecf\u8fc7\u53bb\u4e86 15 \u5e74\u3002</p> <p>\u76ee\u524d\uff0c\u5404\u5927\u6d4f\u89c8\u5668\u5bf9 ES6 \u7684\u652f\u6301\u53ef\u4ee5\u67e5\u770bhttps://compat-table.github.io/compat-table/es6/\u3002</p> <p>Node.js \u662f JavaScript \u7684\u670d\u52a1\u5668\u8fd0\u884c\u73af\u5883\uff08runtime\uff09\u3002\u5b83\u5bf9 ES6 \u7684\u652f\u6301\u5ea6\u66f4\u9ad8\u3002\u9664\u4e86\u90a3\u4e9b\u9ed8\u8ba4\u6253\u5f00\u7684\u529f\u80fd\uff0c\u8fd8\u6709\u4e00\u4e9b\u8bed\u6cd5\u529f\u80fd\u5df2\u7ecf\u5b9e\u73b0\u4e86\uff0c\u4f46\u662f\u9ed8\u8ba4\u6ca1\u6709\u6253\u5f00\u3002\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b Node.js \u9ed8\u8ba4\u6ca1\u6709\u6253\u5f00\u7684\u5b9e\u9a8c\u6027\u8bed\u6cd5\u3002</p> <pre><code>// Linux &amp; Mac\n$ node --v8-options | grep harmony\n\n// Windows\n$ node --v8-options | findstr harmony\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#babel","title":"Babel \u8f6c\u7801\u5668","text":"<p>Babel \u662f\u4e00\u4e2a\u5e7f\u6cdb\u4f7f\u7528\u7684 ES6 \u8f6c\u7801\u5668\uff0c\u53ef\u4ee5\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5 \u4ee3\u7801\uff0c\u4ece\u800c\u5728\u8001\u7248\u672c\u7684\u6d4f\u89c8\u5668\u6267\u884c\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4f60\u53ef\u4ee5\u7528 ES6 \u7684\u65b9\u5f0f\u7f16\u5199\u7a0b\u5e8f\uff0c\u53c8\u4e0d\u7528\u62c5\u5fc3\u73b0\u6709\u73af\u5883\u662f\u5426\u652f\u6301\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u8f6c\u7801\u524d\ninput.map(item =&gt; item + 1);\n\n// \u8f6c\u7801\u540e\ninput.map(function (item) {\n  return item + 1;\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u539f\u59cb\u4ee3\u7801\u7528\u4e86\u7bad\u5934\u51fd\u6570\uff0cBabel \u5c06\u5176\u8f6c\u4e3a\u666e\u901a\u51fd\u6570\uff0c\u5c31\u80fd\u5728\u4e0d\u652f\u6301\u7bad\u5934\u51fd\u6570\u7684 JavaScript \u73af\u5883\u6267\u884c\u4e86\u3002</p> <p>\u4e0b\u9762\u7684\u547d\u4ee4\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\uff0c\u5b89\u88c5 Babel\u3002</p> <pre><code>$ npm install --save-dev @babel/core\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#babelrc","title":"\u914d\u7f6e\u6587\u4ef6<code>.babelrc</code>","text":"<p>Babel \u7684\u914d\u7f6e\u6587\u4ef6\u662f<code>.babelrc</code>\uff0c\u5b58\u653e\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u3002\u4f7f\u7528 Babel \u7684\u7b2c\u4e00\u6b65\uff0c\u5c31\u662f\u914d\u7f6e\u8fd9\u4e2a\u6587\u4ef6\u3002</p> <p>\u8be5\u6587\u4ef6\u7528\u6765\u8bbe\u7f6e\u8f6c\u7801\u89c4\u5219\u548c\u63d2\u4ef6\uff0c\u57fa\u672c\u683c\u5f0f\u5982\u4e0b\u3002</p> <pre><code>{\n  \"presets\": [],\n  \"plugins\": []\n}\n</code></pre> <p><code>presets</code>\u5b57\u6bb5\u8bbe\u5b9a\u8f6c\u7801\u89c4\u5219\uff0c\u5b98\u65b9\u63d0\u4f9b\u4ee5\u4e0b\u7684\u89c4\u5219\u96c6\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b89\u88c5\u3002</p> <pre><code># \u6700\u65b0\u8f6c\u7801\u89c4\u5219\n$ npm install --save-dev @babel/preset-env\n\n# react \u8f6c\u7801\u89c4\u5219\n$ npm install --save-dev @babel/preset-react\n</code></pre> <p>\u7136\u540e\uff0c\u5c06\u8fd9\u4e9b\u89c4\u5219\u52a0\u5165<code>.babelrc</code>\u3002</p> <pre><code>  {\n    \"presets\": [\n      \"@babel/env\",\n      \"@babel/preset-react\"\n    ],\n    \"plugins\": []\n  }\n</code></pre> <p>\u6ce8\u610f\uff0c\u4ee5\u4e0b\u6240\u6709 Babel \u5de5\u5177\u548c\u6a21\u5757\u7684\u4f7f\u7528\uff0c\u90fd\u5fc5\u987b\u5148\u5199\u597d<code>.babelrc</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#_2","title":"\u547d\u4ee4\u884c\u8f6c\u7801","text":"<p>Babel \u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177<code>@babel/cli</code>\uff0c\u7528\u4e8e\u547d\u4ee4\u884c\u8f6c\u7801\u3002</p> <p>\u5b83\u7684\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\u3002</p> <pre><code>$ npm install --save-dev @babel/cli\n</code></pre> <p>\u57fa\u672c\u7528\u6cd5\u5982\u4e0b\u3002</p> <pre><code># \u8f6c\u7801\u7ed3\u679c\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\n$ npx babel example.js\n\n# \u8f6c\u7801\u7ed3\u679c\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\n# --out-file \u6216 -o \u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\n$ npx babel example.js --out-file compiled.js\n# \u6216\u8005\n$ npx babel example.js -o compiled.js\n\n# \u6574\u4e2a\u76ee\u5f55\u8f6c\u7801\n# --out-dir \u6216 -d \u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u76ee\u5f55\n$ npx babel src --out-dir lib\n# \u6216\u8005\n$ npx babel src -d lib\n\n# -s \u53c2\u6570\u751f\u6210source map\u6587\u4ef6\n$ npx babel src -d lib -s\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#babel-node","title":"babel-node","text":"<p><code>@babel/node</code>\u6a21\u5757\u7684<code>babel-node</code>\u547d\u4ee4\uff0c\u63d0\u4f9b\u4e00\u4e2a\u652f\u6301 ES6 \u7684 REPL \u73af\u5883\u3002\u5b83\u652f\u6301 Node \u7684 REPL \u73af\u5883\u7684\u6240\u6709\u529f\u80fd\uff0c\u800c\u4e14\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c ES6 \u4ee3\u7801\u3002</p> <p>\u9996\u5148\uff0c\u5b89\u88c5\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>$ npm install --save-dev @babel/node\n</code></pre> <p>\u7136\u540e\uff0c\u6267\u884c<code>babel-node</code>\u5c31\u8fdb\u5165 REPL \u73af\u5883\u3002</p> <pre><code>$ npx babel-node\n&gt; (x =&gt; x * 2)(1)\n2\n</code></pre> <p><code>babel-node</code>\u547d\u4ee4\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c ES6 \u811a\u672c\u3002\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u653e\u5165\u811a\u672c\u6587\u4ef6<code>es6.js</code>\uff0c\u7136\u540e\u76f4\u63a5\u8fd0\u884c\u3002</p> <pre><code># es6.js \u7684\u4ee3\u7801\n# console.log((x =&gt; x * 2)(1));\n$ npx babel-node es6.js\n2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#babelregister","title":"@babel/register \u6a21\u5757","text":"<p><code>@babel/register</code>\u6a21\u5757\u6539\u5199<code>require</code>\u547d\u4ee4\uff0c\u4e3a\u5b83\u52a0\u4e0a\u4e00\u4e2a\u94a9\u5b50\u3002\u6b64\u540e\uff0c\u6bcf\u5f53\u4f7f\u7528<code>require</code>\u52a0\u8f7d<code>.js</code>\u3001<code>.jsx</code>\u3001<code>.es</code>\u548c<code>.es6</code>\u540e\u7f00\u540d\u7684\u6587\u4ef6\uff0c\u5c31\u4f1a\u5148\u7528 Babel \u8fdb\u884c\u8f6c\u7801\u3002</p> <pre><code>$ npm install --save-dev @babel/register\n</code></pre> <p>\u4f7f\u7528\u65f6\uff0c\u5fc5\u987b\u9996\u5148\u52a0\u8f7d<code>@babel/register</code>\u3002</p> <pre><code>// index.js\nrequire('@babel/register');\nrequire('./es6.js');\n</code></pre> <p>\u7136\u540e\uff0c\u5c31\u4e0d\u9700\u8981\u624b\u52a8\u5bf9<code>index.js</code>\u8f6c\u7801\u4e86\u3002</p> <pre><code>$ node index.js\n2\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>@babel/register</code>\u53ea\u4f1a\u5bf9<code>require</code>\u547d\u4ee4\u52a0\u8f7d\u7684\u6587\u4ef6\u8f6c\u7801\uff0c\u800c\u4e0d\u4f1a\u5bf9\u5f53\u524d\u6587\u4ef6\u8f6c\u7801\u3002\u53e6\u5916\uff0c\u7531\u4e8e\u5b83\u662f\u5b9e\u65f6\u8f6c\u7801\uff0c\u6240\u4ee5\u53ea\u9002\u5408\u5728\u5f00\u53d1\u73af\u5883\u4f7f\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#polyfill","title":"polyfill","text":"<p>Babel \u9ed8\u8ba4\u53ea\u8f6c\u6362\u65b0\u7684 JavaScript \u53e5\u6cd5\uff08syntax\uff09\uff0c\u800c\u4e0d\u8f6c\u6362\u65b0\u7684 API\uff0c\u6bd4\u5982<code>Iterator</code>\u3001<code>Generator</code>\u3001<code>Set</code>\u3001<code>Map</code>\u3001<code>Proxy</code>\u3001<code>Reflect</code>\u3001<code>Symbol</code>\u3001<code>Promise</code>\u7b49\u5168\u5c40\u5bf9\u8c61\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5b9a\u4e49\u5728\u5168\u5c40\u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\uff08\u6bd4\u5982<code>Object.assign</code>\uff09\u90fd\u4e0d\u4f1a\u8f6c\u7801\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cES6 \u5728<code>Array</code>\u5bf9\u8c61\u4e0a\u65b0\u589e\u4e86<code>Array.from</code>\u65b9\u6cd5\u3002Babel \u5c31\u4e0d\u4f1a\u8f6c\u7801\u8fd9\u4e2a\u65b9\u6cd5\u3002\u5982\u679c\u60f3\u8ba9\u8fd9\u4e2a\u65b9\u6cd5\u8fd0\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>core-js</code>\u548c<code>regenerator-runtime</code>(\u540e\u8005\u63d0\u4f9bgenerator\u51fd\u6570\u7684\u8f6c\u7801)\uff0c\u4e3a\u5f53\u524d\u73af\u5883\u63d0\u4f9b\u4e00\u4e2a\u57ab\u7247\u3002</p> <p>\u5b89\u88c5\u547d\u4ee4\u5982\u4e0b\u3002</p> <pre><code>$ npm install --save-dev core-js regenerator-runtime\n</code></pre> <p>\u7136\u540e\uff0c\u5728\u811a\u672c\u5934\u90e8\uff0c\u52a0\u5165\u5982\u4e0b\u4e24\u884c\u4ee3\u7801\u3002</p> <pre><code>import 'core-js';\nimport 'regenerator-runtime/runtime';\n// \u6216\u8005\nrequire('core-js');\nrequire('regenerator-runtime/runtime');\n</code></pre> <p>Babel \u9ed8\u8ba4\u4e0d\u8f6c\u7801\u7684 API \u975e\u5e38\u591a\uff0c\u8be6\u7ec6\u6e05\u5355\u53ef\u4ee5\u67e5\u770b<code>babel-plugin-transform-runtime</code>\u6a21\u5757\u7684definitions.js\u6587\u4ef6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/01-intro/#_3","title":"\u6d4f\u89c8\u5668\u73af\u5883","text":"<p>Babel \u4e5f\u53ef\u4ee5\u7528\u4e8e\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u4f7f\u7528@babel/standalone\u6a21\u5757\u63d0\u4f9b\u7684\u6d4f\u89c8\u5668\u7248\u672c\uff0c\u5c06\u5176\u63d2\u5165\u7f51\u9875\u3002</p> <pre><code>&lt;script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/babel\"&gt;\n// Your ES6 code\n&lt;/script&gt;\n</code></pre> <p>\u6ce8\u610f\uff0c\u7f51\u9875\u5b9e\u65f6\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5\uff0c\u5bf9\u6027\u80fd\u4f1a\u6709\u5f71\u54cd\u3002\u751f\u4ea7\u73af\u5883\u9700\u8981\u52a0\u8f7d\u5df2\u7ecf\u8f6c\u7801\u5b8c\u6210\u7684\u811a\u672c\u3002</p> <p>Babel \u63d0\u4f9b\u4e00\u4e2aREPL \u5728\u7ebf\u7f16\u8bd1\u5668\uff0c\u53ef\u4ee5\u5728\u7ebf\u5c06 ES6 \u4ee3\u7801\u8f6c\u4e3a ES5 \u4ee3\u7801\u3002\u8f6c\u6362\u540e\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3a ES5 \u4ee3\u7801\u63d2\u5165\u7f51\u9875\u8fd0\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/","title":"02-let \u548c const \u547d\u4ee4","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#let","title":"let \u547d\u4ee4","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u65b0\u589e\u4e86<code>let</code>\u547d\u4ee4\uff0c\u7528\u6765\u58f0\u660e\u53d8\u91cf\u3002\u5b83\u7684\u7528\u6cd5\u7c7b\u4f3c\u4e8e<code>var</code>\uff0c\u4f46\u662f\u6240\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u53ea\u5728<code>let</code>\u547d\u4ee4\u6240\u5728\u7684\u4ee3\u7801\u5757\u5185\u6709\u6548\u3002</p> <pre><code>{\n  let a = 10;\n  var b = 1;\n}\n\na // ReferenceError: a is not defined.\nb // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u5206\u522b\u7528<code>let</code>\u548c<code>var</code>\u58f0\u660e\u4e86\u4e24\u4e2a\u53d8\u91cf\u3002\u7136\u540e\u5728\u4ee3\u7801\u5757\u4e4b\u5916\u8c03\u7528\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u7ed3\u679c<code>let</code>\u58f0\u660e\u7684\u53d8\u91cf\u62a5\u9519\uff0c<code>var</code>\u58f0\u660e\u7684\u53d8\u91cf\u8fd4\u56de\u4e86\u6b63\u786e\u7684\u503c\u3002\u8fd9\u8868\u660e\uff0c<code>let</code>\u58f0\u660e\u7684\u53d8\u91cf\u53ea\u5728\u5b83\u6240\u5728\u7684\u4ee3\u7801\u5757\u6709\u6548\u3002</p> <p><code>for</code>\u5faa\u73af\u7684\u8ba1\u6570\u5668\uff0c\u5c31\u5f88\u5408\u9002\u4f7f\u7528<code>let</code>\u547d\u4ee4\u3002</p> <pre><code>for (let i = 0; i &lt; 10; i++) {\n  // ...\n}\n\nconsole.log(i);\n// ReferenceError: i is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8ba1\u6570\u5668<code>i</code>\u53ea\u5728<code>for</code>\u5faa\u73af\u4f53\u5185\u6709\u6548\uff0c\u5728\u5faa\u73af\u4f53\u5916\u5f15\u7528\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u4e0b\u9762\u7684\u4ee3\u7801\u5982\u679c\u4f7f\u7528<code>var</code>\uff0c\u6700\u540e\u8f93\u51fa\u7684\u662f<code>10</code>\u3002</p> <pre><code>var a = [];\nfor (var i = 0; i &lt; 10; i++) {\n  a[i] = function () {\n    console.log(i);\n  };\n}\na[6](); // 10\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u662f<code>var</code>\u547d\u4ee4\u58f0\u660e\u7684\uff0c\u5728\u5168\u5c40\u8303\u56f4\u5185\u90fd\u6709\u6548\uff0c\u6240\u4ee5\u5168\u5c40\u53ea\u6709\u4e00\u4e2a\u53d8\u91cf<code>i</code>\u3002\u6bcf\u4e00\u6b21\u5faa\u73af\uff0c\u53d8\u91cf<code>i</code>\u7684\u503c\u90fd\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u800c\u5faa\u73af\u5185\u88ab\u8d4b\u7ed9\u6570\u7ec4<code>a</code>\u7684\u51fd\u6570\u5185\u90e8\u7684<code>console.log(i)</code>\uff0c\u91cc\u9762\u7684<code>i</code>\u6307\u5411\u7684\u5c31\u662f\u5168\u5c40\u7684<code>i</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u6570\u7ec4<code>a</code>\u7684\u6210\u5458\u91cc\u9762\u7684<code>i</code>\uff0c\u6307\u5411\u7684\u90fd\u662f\u540c\u4e00\u4e2a<code>i</code>\uff0c\u5bfc\u81f4\u8fd0\u884c\u65f6\u8f93\u51fa\u7684\u662f\u6700\u540e\u4e00\u8f6e\u7684<code>i</code>\u7684\u503c\uff0c\u4e5f\u5c31\u662f 10\u3002</p> <p>\u5982\u679c\u4f7f\u7528<code>let</code>\uff0c\u58f0\u660e\u7684\u53d8\u91cf\u4ec5\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u6709\u6548\uff0c\u6700\u540e\u8f93\u51fa\u7684\u662f 6\u3002</p> <pre><code>var a = [];\nfor (let i = 0; i &lt; 10; i++) {\n  a[i] = function () {\n    console.log(i);\n  };\n}\na[6](); // 6\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u662f<code>let</code>\u58f0\u660e\u7684\uff0c\u5f53\u524d\u7684<code>i</code>\u53ea\u5728\u672c\u8f6e\u5faa\u73af\u6709\u6548\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u5faa\u73af\u7684<code>i</code>\u5176\u5b9e\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\uff0c\u6240\u4ee5\u6700\u540e\u8f93\u51fa\u7684\u662f<code>6</code>\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u5982\u679c\u6bcf\u4e00\u8f6e\u5faa\u73af\u7684\u53d8\u91cf<code>i</code>\u90fd\u662f\u91cd\u65b0\u58f0\u660e\u7684\uff0c\u90a3\u5b83\u600e\u4e48\u77e5\u9053\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u503c\uff0c\u4ece\u800c\u8ba1\u7b97\u51fa\u672c\u8f6e\u5faa\u73af\u7684\u503c\uff1f\u8fd9\u662f\u56e0\u4e3a JavaScript \u5f15\u64ce\u5185\u90e8\u4f1a\u8bb0\u4f4f\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u503c\uff0c\u521d\u59cb\u5316\u672c\u8f6e\u7684\u53d8\u91cf<code>i</code>\u65f6\uff0c\u5c31\u5728\u4e0a\u4e00\u8f6e\u5faa\u73af\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u8ba1\u7b97\u3002</p> <p>\u53e6\u5916\uff0c<code>for</code>\u5faa\u73af\u8fd8\u6709\u4e00\u4e2a\u7279\u522b\u4e4b\u5904\uff0c\u5c31\u662f\u8bbe\u7f6e\u5faa\u73af\u53d8\u91cf\u7684\u90a3\u90e8\u5206\u662f\u4e00\u4e2a\u7236\u4f5c\u7528\u57df\uff0c\u800c\u5faa\u73af\u4f53\u5185\u90e8\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5b50\u4f5c\u7528\u57df\u3002</p> <pre><code>for (let i = 0; i &lt; 3; i++) {\n  let i = 'abc';\n  console.log(i);\n}\n// abc\n// abc\n// abc\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6b63\u786e\u8fd0\u884c\uff0c\u8f93\u51fa\u4e86 3 \u6b21<code>abc</code>\u3002\u8fd9\u8868\u660e\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>i</code>\u4e0e\u5faa\u73af\u53d8\u91cf<code>i</code>\u4e0d\u5728\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\uff0c\u6709\u5404\u81ea\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff08\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u4e0d\u53ef\u4f7f\u7528 <code>let</code> \u91cd\u590d\u58f0\u660e\u540c\u4e00\u4e2a\u53d8\u91cf\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_2","title":"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347","text":"<p><code>var</code>\u547d\u4ee4\u4f1a\u53d1\u751f\u201c\u53d8\u91cf\u63d0\u5347\u201d\u73b0\u8c61\uff0c\u5373\u53d8\u91cf\u53ef\u4ee5\u5728\u58f0\u660e\u4e4b\u524d\u4f7f\u7528\uff0c\u503c\u4e3a<code>undefined</code>\u3002\u8fd9\u79cd\u73b0\u8c61\u591a\u591a\u5c11\u5c11\u662f\u6709\u4e9b\u5947\u602a\u7684\uff0c\u6309\u7167\u4e00\u822c\u7684\u903b\u8f91\uff0c\u53d8\u91cf\u5e94\u8be5\u5728\u58f0\u660e\u8bed\u53e5\u4e4b\u540e\u624d\u53ef\u4ee5\u4f7f\u7528\u3002</p> <p>\u4e3a\u4e86\u7ea0\u6b63\u8fd9\u79cd\u73b0\u8c61\uff0c<code>let</code>\u547d\u4ee4\u6539\u53d8\u4e86\u8bed\u6cd5\u884c\u4e3a\uff0c\u5b83\u6240\u58f0\u660e\u7684\u53d8\u91cf\u4e00\u5b9a\u8981\u5728\u58f0\u660e\u540e\u4f7f\u7528\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>// var \u7684\u60c5\u51b5\nconsole.log(foo); // \u8f93\u51faundefined\nvar foo = 2;\n\n// let \u7684\u60c5\u51b5\nconsole.log(bar); // \u62a5\u9519ReferenceError\nlet bar = 2;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>foo</code>\u7528<code>var</code>\u547d\u4ee4\u58f0\u660e\uff0c\u4f1a\u53d1\u751f\u53d8\u91cf\u63d0\u5347\uff0c\u5373\u811a\u672c\u5f00\u59cb\u8fd0\u884c\u65f6\uff0c\u53d8\u91cf<code>foo</code>\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u4f46\u662f\u6ca1\u6709\u503c\uff0c\u6240\u4ee5\u4f1a\u8f93\u51fa<code>undefined</code>\u3002\u53d8\u91cf<code>bar</code>\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u4e0d\u4f1a\u53d1\u751f\u53d8\u91cf\u63d0\u5347\u3002\u8fd9\u8868\u793a\u5728\u58f0\u660e\u5b83\u4e4b\u524d\uff0c\u53d8\u91cf<code>bar</code>\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u8fd9\u65f6\u5982\u679c\u7528\u5230\u5b83\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_3","title":"\u6682\u65f6\u6027\u6b7b\u533a","text":"<p>\u53ea\u8981\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u5b58\u5728<code>let</code>\u547d\u4ee4\uff0c\u5b83\u6240\u58f0\u660e\u7684\u53d8\u91cf\u5c31\u201c\u7ed1\u5b9a\u201d\uff08binding\uff09\u8fd9\u4e2a\u533a\u57df\uff0c\u4e0d\u518d\u53d7\u5916\u90e8\u7684\u5f71\u54cd\u3002</p> <pre><code>var tmp = 123;\n\nif (true) {\n  tmp = 'abc'; // ReferenceError\n  let tmp;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b58\u5728\u5168\u5c40\u53d8\u91cf<code>tmp</code>\uff0c\u4f46\u662f\u5757\u7ea7\u4f5c\u7528\u57df\u5185<code>let</code>\u53c8\u58f0\u660e\u4e86\u4e00\u4e2a\u5c40\u90e8\u53d8\u91cf<code>tmp</code>\uff0c\u5bfc\u81f4\u540e\u8005\u7ed1\u5b9a\u8fd9\u4e2a\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u5728<code>let</code>\u58f0\u660e\u53d8\u91cf\u524d\uff0c\u5bf9<code>tmp</code>\u8d4b\u503c\u4f1a\u62a5\u9519\u3002</p> <p>ES6 \u660e\u786e\u89c4\u5b9a\uff0c\u5982\u679c\u533a\u5757\u4e2d\u5b58\u5728<code>let</code>\u548c<code>const</code>\u547d\u4ee4\uff0c\u8fd9\u4e2a\u533a\u5757\u5bf9\u8fd9\u4e9b\u547d\u4ee4\u58f0\u660e\u7684\u53d8\u91cf\uff0c\u4ece\u4e00\u5f00\u59cb\u5c31\u5f62\u6210\u4e86\u5c01\u95ed\u4f5c\u7528\u57df\u3002\u51e1\u662f\u5728\u58f0\u660e\u4e4b\u524d\u5c31\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u603b\u4e4b\uff0c\u5728\u4ee3\u7801\u5757\u5185\uff0c\u4f7f\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\u53d8\u91cf\u4e4b\u524d\uff0c\u8be5\u53d8\u91cf\u90fd\u662f\u4e0d\u53ef\u7528\u7684\u3002\u8fd9\u5728\u8bed\u6cd5\u4e0a\uff0c\u79f0\u4e3a\u201c\u6682\u65f6\u6027\u6b7b\u533a\u201d\uff08temporal dead zone\uff0c\u7b80\u79f0 TDZ\uff09\u3002</p> <pre><code>if (true) {\n  // TDZ\u5f00\u59cb\n  tmp = 'abc'; // ReferenceError\n  console.log(tmp); // ReferenceError\n\n  let tmp; // TDZ\u7ed3\u675f\n  console.log(tmp); // undefined\n\n  tmp = 123;\n  console.log(tmp); // 123\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5728<code>let</code>\u547d\u4ee4\u58f0\u660e\u53d8\u91cf<code>tmp</code>\u4e4b\u524d\uff0c\u90fd\u5c5e\u4e8e\u53d8\u91cf<code>tmp</code>\u7684\u201c\u6b7b\u533a\u201d\u3002</p> <p>\u201c\u6682\u65f6\u6027\u6b7b\u533a\u201d\u4e5f\u610f\u5473\u7740<code>typeof</code>\u4e0d\u518d\u662f\u4e00\u4e2a\u767e\u5206\u4e4b\u767e\u5b89\u5168\u7684\u64cd\u4f5c\u3002</p> <pre><code>typeof x; // ReferenceError\nlet x;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>x</code>\u4f7f\u7528<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5728\u58f0\u660e\u4e4b\u524d\uff0c\u90fd\u5c5e\u4e8e<code>x</code>\u7684\u201c\u6b7b\u533a\u201d\uff0c\u53ea\u8981\u7528\u5230\u8be5\u53d8\u91cf\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u6b64\uff0c<code>typeof</code>\u8fd0\u884c\u65f6\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a<code>ReferenceError</code>\u3002</p> <p>\u4f5c\u4e3a\u6bd4\u8f83\uff0c\u5982\u679c\u4e00\u4e2a\u53d8\u91cf\u6839\u672c\u6ca1\u6709\u88ab\u58f0\u660e\uff0c\u4f7f\u7528<code>typeof</code>\u53cd\u800c\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>typeof undeclared_variable // \"undefined\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>undeclared_variable</code>\u662f\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u53d8\u91cf\u540d\uff0c\u7ed3\u679c\u8fd4\u56de\u201cundefined\u201d\u3002\u6240\u4ee5\uff0c\u5728\u6ca1\u6709<code>let</code>\u4e4b\u524d\uff0c<code>typeof</code>\u8fd0\u7b97\u7b26\u662f\u767e\u5206\u4e4b\u767e\u5b89\u5168\u7684\uff0c\u6c38\u8fdc\u4e0d\u4f1a\u62a5\u9519\u3002\u73b0\u5728\u8fd9\u4e00\u70b9\u4e0d\u6210\u7acb\u4e86\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u662f\u4e3a\u4e86\u8ba9\u5927\u5bb6\u517b\u6210\u826f\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\uff0c\u53d8\u91cf\u4e00\u5b9a\u8981\u5728\u58f0\u660e\u4e4b\u540e\u4f7f\u7528\uff0c\u5426\u5219\u5c31\u62a5\u9519\u3002</p> <p>\u6709\u4e9b\u201c\u6b7b\u533a\u201d\u6bd4\u8f83\u9690\u853d\uff0c\u4e0d\u592a\u5bb9\u6613\u53d1\u73b0\u3002</p> <pre><code>function bar(x = y, y = 2) {\n  return [x, y];\n}\n\nbar(); // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>bar</code>\u51fd\u6570\u4e4b\u6240\u4ee5\u62a5\u9519\uff08\u67d0\u4e9b\u5b9e\u73b0\u53ef\u80fd\u4e0d\u62a5\u9519\uff09\uff0c\u662f\u56e0\u4e3a\u53c2\u6570<code>x</code>\u9ed8\u8ba4\u503c\u7b49\u4e8e\u53e6\u4e00\u4e2a\u53c2\u6570<code>y</code>\uff0c\u800c\u6b64\u65f6<code>y</code>\u8fd8\u6ca1\u6709\u58f0\u660e\uff0c\u5c5e\u4e8e\u201c\u6b7b\u533a\u201d\u3002\u5982\u679c<code>y</code>\u7684\u9ed8\u8ba4\u503c\u662f<code>x</code>\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6b64\u65f6<code>x</code>\u5df2\u7ecf\u58f0\u660e\u4e86\u3002</p> <pre><code>function bar(x = 2, y = x) {\n  return [x, y];\n}\nbar(); // [2, 2]\n</code></pre> <p>\u53e6\u5916\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4e5f\u4f1a\u62a5\u9519\uff0c\u4e0e<code>var</code>\u7684\u884c\u4e3a\u4e0d\u540c\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\nvar x = x;\n\n// \u62a5\u9519\nlet x = x;\n// ReferenceError: x is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62a5\u9519\uff0c\u4e5f\u662f\u56e0\u4e3a\u6682\u65f6\u6027\u6b7b\u533a\u3002\u4f7f\u7528<code>let</code>\u58f0\u660e\u53d8\u91cf\u65f6\uff0c\u53ea\u8981\u53d8\u91cf\u5728\u8fd8\u6ca1\u6709\u58f0\u660e\u5b8c\u6210\u524d\u4f7f\u7528\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\u4e0a\u9762\u8fd9\u884c\u5c31\u5c5e\u4e8e\u8fd9\u4e2a\u60c5\u51b5\uff0c\u5728\u53d8\u91cf<code>x</code>\u7684\u58f0\u660e\u8bed\u53e5\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c\u6210\u524d\uff0c\u5c31\u53bb\u53d6<code>x</code>\u7684\u503c\uff0c\u5bfc\u81f4\u62a5\u9519\u201dx \u672a\u5b9a\u4e49\u201c\u3002</p> <p>ES6 \u89c4\u5b9a\u6682\u65f6\u6027\u6b7b\u533a\u548c<code>let</code>\u3001<code>const</code>\u8bed\u53e5\u4e0d\u51fa\u73b0\u53d8\u91cf\u63d0\u5347\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u51cf\u5c11\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u9632\u6b62\u5728\u53d8\u91cf\u58f0\u660e\u524d\u5c31\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u4ece\u800c\u5bfc\u81f4\u610f\u6599\u4e4b\u5916\u7684\u884c\u4e3a\u3002\u8fd9\u6837\u7684\u9519\u8bef\u5728 ES5 \u662f\u5f88\u5e38\u89c1\u7684\uff0c\u73b0\u5728\u6709\u4e86\u8fd9\u79cd\u89c4\u5b9a\uff0c\u907f\u514d\u6b64\u7c7b\u9519\u8bef\u5c31\u5f88\u5bb9\u6613\u4e86\u3002</p> <p>\u603b\u4e4b\uff0c\u6682\u65f6\u6027\u6b7b\u533a\u7684\u672c\u8d28\u5c31\u662f\uff0c\u53ea\u8981\u4e00\u8fdb\u5165\u5f53\u524d\u4f5c\u7528\u57df\uff0c\u6240\u8981\u4f7f\u7528\u7684\u53d8\u91cf\u5c31\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u4f46\u662f\u4e0d\u53ef\u83b7\u53d6\uff0c\u53ea\u6709\u7b49\u5230\u58f0\u660e\u53d8\u91cf\u7684\u90a3\u4e00\u884c\u4ee3\u7801\u51fa\u73b0\uff0c\u624d\u53ef\u4ee5\u83b7\u53d6\u548c\u4f7f\u7528\u8be5\u53d8\u91cf\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_4","title":"\u4e0d\u5141\u8bb8\u91cd\u590d\u58f0\u660e","text":"<p><code>let</code>\u4e0d\u5141\u8bb8\u5728\u76f8\u540c\u4f5c\u7528\u57df\u5185\uff0c\u91cd\u590d\u58f0\u660e\u540c\u4e00\u4e2a\u53d8\u91cf\u3002</p> <pre><code>// \u62a5\u9519\nfunction func() {\n  let a = 10;\n  var a = 1;\n}\n\n// \u62a5\u9519\nfunction func() {\n  let a = 10;\n  let a = 1;\n}\n</code></pre> <p>\u56e0\u6b64\uff0c\u4e0d\u80fd\u5728\u51fd\u6570\u5185\u90e8\u91cd\u65b0\u58f0\u660e\u53c2\u6570\u3002</p> <pre><code>function func(arg) {\n  let arg;\n}\nfunc() // \u62a5\u9519\n\nfunction func(arg) {\n  {\n    let arg;\n  }\n}\nfunc() // \u4e0d\u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_5","title":"\u5757\u7ea7\u4f5c\u7528\u57df","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_6","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u5757\u7ea7\u4f5c\u7528\u57df\uff1f","text":"<p>ES5 \u53ea\u6709\u5168\u5c40\u4f5c\u7528\u57df\u548c\u51fd\u6570\u4f5c\u7528\u57df\uff0c\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u8fd9\u5e26\u6765\u5f88\u591a\u4e0d\u5408\u7406\u7684\u573a\u666f\u3002</p> <p>\u7b2c\u4e00\u79cd\u573a\u666f\uff0c\u5185\u5c42\u53d8\u91cf\u53ef\u80fd\u4f1a\u8986\u76d6\u5916\u5c42\u53d8\u91cf\u3002</p> <pre><code>var tmp = new Date();\n\nfunction f() {\n  console.log(tmp);\n  if (false) {\n    var tmp = 'hello world';\n  }\n}\n\nf(); // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u539f\u610f\u662f\uff0c<code>if</code>\u4ee3\u7801\u5757\u7684\u5916\u90e8\u4f7f\u7528\u5916\u5c42\u7684<code>tmp</code>\u53d8\u91cf\uff0c\u5185\u90e8\u4f7f\u7528\u5185\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u3002\u4f46\u662f\uff0c\u51fd\u6570<code>f</code>\u6267\u884c\u540e\uff0c\u8f93\u51fa\u7ed3\u679c\u4e3a<code>undefined</code>\uff0c\u539f\u56e0\u5728\u4e8e\u53d8\u91cf\u63d0\u5347\uff0c\u5bfc\u81f4\u5185\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u8986\u76d6\u4e86\u5916\u5c42\u7684<code>tmp</code>\u53d8\u91cf\u3002</p> <p>\u7b2c\u4e8c\u79cd\u573a\u666f\uff0c\u7528\u6765\u8ba1\u6570\u7684\u5faa\u73af\u53d8\u91cf\u6cc4\u9732\u4e3a\u5168\u5c40\u53d8\u91cf\u3002</p> <pre><code>var s = 'hello';\n\nfor (var i = 0; i &lt; s.length; i++) {\n  console.log(s[i]);\n}\n\nconsole.log(i); // 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>i</code>\u53ea\u7528\u6765\u63a7\u5236\u5faa\u73af\uff0c\u4f46\u662f\u5faa\u73af\u7ed3\u675f\u540e\uff0c\u5b83\u5e76\u6ca1\u6709\u6d88\u5931\uff0c\u6cc4\u9732\u6210\u4e86\u5168\u5c40\u53d8\u91cf\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#es6","title":"ES6 \u7684\u5757\u7ea7\u4f5c\u7528\u57df","text":"<p><code>let</code>\u5b9e\u9645\u4e0a\u4e3a JavaScript \u65b0\u589e\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\u3002</p> <pre><code>function f1() {\n  let n = 5;\n  if (true) {\n    let n = 10;\n  }\n  console.log(n); // 5\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u6709\u4e24\u4e2a\u4ee3\u7801\u5757\uff0c\u90fd\u58f0\u660e\u4e86\u53d8\u91cf<code>n</code>\uff0c\u8fd0\u884c\u540e\u8f93\u51fa 5\u3002\u8fd9\u8868\u793a\u5916\u5c42\u4ee3\u7801\u5757\u4e0d\u53d7\u5185\u5c42\u4ee3\u7801\u5757\u7684\u5f71\u54cd\u3002\u5982\u679c\u4e24\u6b21\u90fd\u4f7f\u7528<code>var</code>\u5b9a\u4e49\u53d8\u91cf<code>n</code>\uff0c\u6700\u540e\u8f93\u51fa\u7684\u503c\u624d\u662f 10\u3002</p> <p>ES6 \u5141\u8bb8\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u4efb\u610f\u5d4c\u5957\u3002</p> <pre><code>{{{{\n  {let insane = 'Hello World'}\n  console.log(insane); // \u62a5\u9519\n}}}};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e94\u5c42\u7684\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u6bcf\u4e00\u5c42\u90fd\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u7b2c\u56db\u5c42\u4f5c\u7528\u57df\u65e0\u6cd5\u8bfb\u53d6\u7b2c\u4e94\u5c42\u4f5c\u7528\u57df\u7684\u5185\u90e8\u53d8\u91cf\u3002</p> <p>\u5185\u5c42\u4f5c\u7528\u57df\u53ef\u4ee5\u5b9a\u4e49\u5916\u5c42\u4f5c\u7528\u57df\u7684\u540c\u540d\u53d8\u91cf\u3002</p> <pre><code>{{{{\n  let insane = 'Hello World';\n  {let insane = 'Hello World'}\n}}}};\n</code></pre> <p>\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u51fa\u73b0\uff0c\u5b9e\u9645\u4e0a\u4f7f\u5f97\u83b7\u5f97\u5e7f\u6cdb\u5e94\u7528\u7684\u533f\u540d\u7acb\u5373\u6267\u884c\u51fd\u6570\u8868\u8fbe\u5f0f\uff08\u533f\u540d IIFE\uff09\u4e0d\u518d\u5fc5\u8981\u4e86\u3002</p> <pre><code>// IIFE \u5199\u6cd5\n(function () {\n  var tmp = ...;\n  ...\n}());\n\n// \u5757\u7ea7\u4f5c\u7528\u57df\u5199\u6cd5\n{\n  let tmp = ...;\n  ...\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_7","title":"\u5757\u7ea7\u4f5c\u7528\u57df\u4e0e\u51fd\u6570\u58f0\u660e","text":"<p>\u51fd\u6570\u80fd\u4e0d\u80fd\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\uff1f\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u4ee4\u4eba\u6df7\u6dc6\u7684\u95ee\u9898\u3002</p> <p>ES5 \u89c4\u5b9a\uff0c\u51fd\u6570\u53ea\u80fd\u5728\u9876\u5c42\u4f5c\u7528\u57df\u548c\u51fd\u6570\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\uff0c\u4e0d\u80fd\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u58f0\u660e\u3002</p> <pre><code>// \u60c5\u51b5\u4e00\nif (true) {\n  function f() {}\n}\n\n// \u60c5\u51b5\u4e8c\ntry {\n  function f() {}\n} catch(e) {\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u51fd\u6570\u58f0\u660e\uff0c\u6839\u636e ES5 \u7684\u89c4\u5b9a\u90fd\u662f\u975e\u6cd5\u7684\u3002</p> <p>\u4f46\u662f\uff0c\u6d4f\u89c8\u5668\u6ca1\u6709\u9075\u5b88\u8fd9\u4e2a\u89c4\u5b9a\uff0c\u4e3a\u4e86\u517c\u5bb9\u4ee5\u524d\u7684\u65e7\u4ee3\u7801\uff0c\u8fd8\u662f\u652f\u6301\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\u51fd\u6570\uff0c\u56e0\u6b64\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u5b9e\u9645\u90fd\u80fd\u8fd0\u884c\uff0c\u4e0d\u4f1a\u62a5\u9519\u3002</p> <p>ES6 \u5f15\u5165\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u660e\u786e\u5141\u8bb8\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\u58f0\u660e\u51fd\u6570\u3002ES6 \u89c4\u5b9a\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u4e2d\uff0c\u51fd\u6570\u58f0\u660e\u8bed\u53e5\u7684\u884c\u4e3a\u7c7b\u4f3c\u4e8e<code>let</code>\uff0c\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u5916\u4e0d\u53ef\u5f15\u7528\u3002</p> <pre><code>function f() { console.log('I am outside!'); }\n\n(function () {\n  if (false) {\n    // \u91cd\u590d\u58f0\u660e\u4e00\u6b21\u51fd\u6570f\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728 ES5 \u4e2d\u8fd0\u884c\uff0c\u4f1a\u5f97\u5230\u201cI am inside!\u201d\uff0c\u56e0\u4e3a\u5728<code>if</code>\u5185\u58f0\u660e\u7684\u51fd\u6570<code>f</code>\u4f1a\u88ab\u63d0\u5347\u5230\u51fd\u6570\u5934\u90e8\uff0c\u5b9e\u9645\u8fd0\u884c\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// ES5 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n\n(function () {\n  function f() { console.log('I am inside!'); }\n  if (false) {\n  }\n  f();\n}());\n</code></pre> <p>ES6 \u5c31\u5b8c\u5168\u4e0d\u4e00\u6837\u4e86\uff0c\u7406\u8bba\u4e0a\u4f1a\u5f97\u5230\u201cI am outside!\u201d\u3002\u56e0\u4e3a\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\u7c7b\u4f3c\u4e8e<code>let</code>\uff0c\u5bf9\u4f5c\u7528\u57df\u4e4b\u5916\u6ca1\u6709\u5f71\u54cd\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u771f\u7684\u5728 ES6 \u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u4e00\u4e0b\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u662f\u4f1a\u62a5\u9519\u7684\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f</p> <pre><code>// \u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n\n(function () {\n  if (false) {\n    // \u91cd\u590d\u58f0\u660e\u4e00\u6b21\u51fd\u6570f\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n// Uncaught TypeError: f is not a function\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5728 ES6 \u6d4f\u89c8\u5668\u4e2d\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u539f\u6765\uff0c\u5982\u679c\u6539\u53d8\u4e86\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\u7684\u5904\u7406\u89c4\u5219\uff0c\u663e\u7136\u4f1a\u5bf9\u8001\u4ee3\u7801\u4ea7\u751f\u5f88\u5927\u5f71\u54cd\u3002\u4e3a\u4e86\u51cf\u8f7b\u56e0\u6b64\u4ea7\u751f\u7684\u4e0d\u517c\u5bb9\u95ee\u9898\uff0cES6 \u5728\u9644\u5f55 B\u91cc\u9762\u89c4\u5b9a\uff0c\u6d4f\u89c8\u5668\u7684\u5b9e\u73b0\u53ef\u4ee5\u4e0d\u9075\u5b88\u4e0a\u9762\u7684\u89c4\u5b9a\uff0c\u6709\u81ea\u5df1\u7684\u884c\u4e3a\u65b9\u5f0f\u3002</p> <ul> <li>\u5141\u8bb8\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u51fd\u6570\u3002</li> <li>\u51fd\u6570\u58f0\u660e\u7c7b\u4f3c\u4e8e<code>var</code>\uff0c\u5373\u4f1a\u63d0\u5347\u5230\u5168\u5c40\u4f5c\u7528\u57df\u6216\u51fd\u6570\u4f5c\u7528\u57df\u7684\u5934\u90e8\u3002</li> <li>\u540c\u65f6\uff0c\u51fd\u6570\u58f0\u660e\u8fd8\u4f1a\u63d0\u5347\u5230\u6240\u5728\u7684\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u5934\u90e8\u3002</li> </ul> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u4e09\u6761\u89c4\u5219\u53ea\u5bf9 ES6 \u7684\u6d4f\u89c8\u5668\u5b9e\u73b0\u6709\u6548\uff0c\u5176\u4ed6\u73af\u5883\u7684\u5b9e\u73b0\u4e0d\u7528\u9075\u5b88\uff0c\u8fd8\u662f\u5c06\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u51fd\u6570\u58f0\u660e\u5f53\u4f5c<code>let</code>\u5904\u7406\u3002</p> <p>\u6839\u636e\u8fd9\u4e09\u6761\u89c4\u5219\uff0c\u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\u4e2d\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u7684\u51fd\u6570\uff0c\u884c\u4e3a\u7c7b\u4f3c\u4e8e<code>var</code>\u58f0\u660e\u7684\u53d8\u91cf\u3002\u4e0a\u9762\u7684\u4f8b\u5b50\u5b9e\u9645\u8fd0\u884c\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>// \u6d4f\u89c8\u5668\u7684 ES6 \u73af\u5883\nfunction f() { console.log('I am outside!'); }\n(function () {\n  var f = undefined;\n  if (false) {\n    function f() { console.log('I am inside!'); }\n  }\n\n  f();\n}());\n// Uncaught TypeError: f is not a function\n</code></pre> <p>\u8003\u8651\u5230\u73af\u5883\u5bfc\u81f4\u7684\u884c\u4e3a\u5dee\u5f02\u592a\u5927\uff0c\u5e94\u8be5\u907f\u514d\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u58f0\u660e\u51fd\u6570\u3002\u5982\u679c\u786e\u5b9e\u9700\u8981\uff0c\u4e5f\u5e94\u8be5\u5199\u6210\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u800c\u4e0d\u662f\u51fd\u6570\u58f0\u660e\u8bed\u53e5\u3002</p> <pre><code>// \u5757\u7ea7\u4f5c\u7528\u57df\u5185\u90e8\u7684\u51fd\u6570\u58f0\u660e\u8bed\u53e5\uff0c\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\n{\n  let a = 'secret';\n  function f() {\n    return a;\n  }\n}\n\n// \u5757\u7ea7\u4f5c\u7528\u57df\u5185\u90e8\uff0c\u4f18\u5148\u4f7f\u7528\u51fd\u6570\u8868\u8fbe\u5f0f\n{\n  let a = 'secret';\n  let f = function () {\n    return a;\n  };\n}\n</code></pre> <p>\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002ES6 \u7684\u5757\u7ea7\u4f5c\u7528\u57df\u5fc5\u987b\u6709\u5927\u62ec\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u5927\u62ec\u53f7\uff0cJavaScript \u5f15\u64ce\u5c31\u8ba4\u4e3a\u4e0d\u5b58\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u3002</p> <pre><code>// \u7b2c\u4e00\u79cd\u5199\u6cd5\uff0c\u62a5\u9519\nif (true) let x = 1;\n\n// \u7b2c\u4e8c\u79cd\u5199\u6cd5\uff0c\u4e0d\u62a5\u9519\nif (true) {\n  let x = 1;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u79cd\u5199\u6cd5\u6ca1\u6709\u5927\u62ec\u53f7\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728\u5757\u7ea7\u4f5c\u7528\u57df\uff0c\u800c<code>let</code>\u53ea\u80fd\u51fa\u73b0\u5728\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u5c42\uff0c\u6240\u4ee5\u62a5\u9519\u3002\u7b2c\u4e8c\u79cd\u5199\u6cd5\u6709\u5927\u62ec\u53f7\uff0c\u6240\u4ee5\u5757\u7ea7\u4f5c\u7528\u57df\u6210\u7acb\u3002</p> <p>\u51fd\u6570\u58f0\u660e\u4e5f\u662f\u5982\u6b64\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u51fd\u6570\u53ea\u80fd\u58f0\u660e\u5728\u5f53\u524d\u4f5c\u7528\u57df\u7684\u9876\u5c42\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\n'use strict';\nif (true) {\n  function f() {}\n}\n\n// \u62a5\u9519\n'use strict';\nif (true)\n  function f() {}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#const","title":"const \u547d\u4ee4","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_8","title":"\u57fa\u672c\u7528\u6cd5","text":"<p><code>const</code>\u58f0\u660e\u4e00\u4e2a\u53ea\u8bfb\u7684\u5e38\u91cf\u3002\u4e00\u65e6\u58f0\u660e\uff0c\u5e38\u91cf\u7684\u503c\u5c31\u4e0d\u80fd\u6539\u53d8\u3002</p> <pre><code>const PI = 3.1415;\nPI // 3.1415\n\nPI = 3;\n// TypeError: Assignment to constant variable.\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\u6539\u53d8\u5e38\u91cf\u7684\u503c\u4f1a\u62a5\u9519\u3002</p> <p><code>const</code>\u58f0\u660e\u7684\u53d8\u91cf\u4e0d\u5f97\u6539\u53d8\u503c\uff0c\u8fd9\u610f\u5473\u7740\uff0c<code>const</code>\u4e00\u65e6\u58f0\u660e\u53d8\u91cf\uff0c\u5c31\u5fc5\u987b\u7acb\u5373\u521d\u59cb\u5316\uff0c\u4e0d\u80fd\u7559\u5230\u4ee5\u540e\u8d4b\u503c\u3002</p> <pre><code>const foo;\n// SyntaxError: Missing initializer in const declaration\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5bf9\u4e8e<code>const</code>\u6765\u8bf4\uff0c\u53ea\u58f0\u660e\u4e0d\u8d4b\u503c\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p><code>const</code>\u7684\u4f5c\u7528\u57df\u4e0e<code>let</code>\u547d\u4ee4\u76f8\u540c\uff1a\u53ea\u5728\u58f0\u660e\u6240\u5728\u7684\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u6709\u6548\u3002</p> <pre><code>if (true) {\n  const MAX = 5;\n}\n\nMAX // Uncaught ReferenceError: MAX is not defined\n</code></pre> <p><code>const</code>\u547d\u4ee4\u58f0\u660e\u7684\u5e38\u91cf\u4e5f\u662f\u4e0d\u63d0\u5347\uff0c\u540c\u6837\u5b58\u5728\u6682\u65f6\u6027\u6b7b\u533a\uff0c\u53ea\u80fd\u5728\u58f0\u660e\u7684\u4f4d\u7f6e\u540e\u9762\u4f7f\u7528\u3002</p> <pre><code>if (true) {\n  console.log(MAX); // ReferenceError\n  const MAX = 5;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u5e38\u91cf<code>MAX</code>\u58f0\u660e\u4e4b\u524d\u5c31\u8c03\u7528\uff0c\u7ed3\u679c\u62a5\u9519\u3002</p> <p><code>const</code>\u58f0\u660e\u7684\u5e38\u91cf\uff0c\u4e5f\u4e0e<code>let</code>\u4e00\u6837\u4e0d\u53ef\u91cd\u590d\u58f0\u660e\u3002</p> <pre><code>var message = \"Hello!\";\nlet age = 25;\n\n// \u4ee5\u4e0b\u4e24\u884c\u90fd\u4f1a\u62a5\u9519\nconst message = \"Goodbye!\";\nconst age = 30;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_9","title":"\u672c\u8d28","text":"<p><code>const</code>\u5b9e\u9645\u4e0a\u4fdd\u8bc1\u7684\uff0c\u5e76\u4e0d\u662f\u53d8\u91cf\u7684\u503c\u4e0d\u5f97\u6539\u52a8\uff0c\u800c\u662f\u53d8\u91cf\u6307\u5411\u7684\u90a3\u4e2a\u5185\u5b58\u5730\u5740\u6240\u4fdd\u5b58\u7684\u6570\u636e\u4e0d\u5f97\u6539\u52a8\u3002\u5bf9\u4e8e\u7b80\u5355\u7c7b\u578b\u7684\u6570\u636e\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\uff09\uff0c\u503c\u5c31\u4fdd\u5b58\u5728\u53d8\u91cf\u6307\u5411\u7684\u90a3\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u56e0\u6b64\u7b49\u540c\u4e8e\u5e38\u91cf\u3002\u4f46\u5bf9\u4e8e\u590d\u5408\u7c7b\u578b\u7684\u6570\u636e\uff08\u4e3b\u8981\u662f\u5bf9\u8c61\u548c\u6570\u7ec4\uff09\uff0c\u53d8\u91cf\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\uff0c\u4fdd\u5b58\u7684\u53ea\u662f\u4e00\u4e2a\u6307\u5411\u5b9e\u9645\u6570\u636e\u7684\u6307\u9488\uff0c<code>const</code>\u53ea\u80fd\u4fdd\u8bc1\u8fd9\u4e2a\u6307\u9488\u662f\u56fa\u5b9a\u7684\uff08\u5373\u603b\u662f\u6307\u5411\u53e6\u4e00\u4e2a\u56fa\u5b9a\u7684\u5730\u5740\uff09\uff0c\u81f3\u4e8e\u5b83\u6307\u5411\u7684\u6570\u636e\u7ed3\u6784\u662f\u4e0d\u662f\u53ef\u53d8\u7684\uff0c\u5c31\u5b8c\u5168\u4e0d\u80fd\u63a7\u5236\u4e86\u3002\u56e0\u6b64\uff0c\u5c06\u4e00\u4e2a\u5bf9\u8c61\u58f0\u660e\u4e3a\u5e38\u91cf\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>const foo = {};\n\n// \u4e3a foo \u6dfb\u52a0\u4e00\u4e2a\u5c5e\u6027\uff0c\u53ef\u4ee5\u6210\u529f\nfoo.prop = 123;\nfoo.prop // 123\n\n// \u5c06 foo \u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u4f1a\u62a5\u9519\nfoo = {}; // TypeError: \"foo\" is read-only\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>foo</code>\u50a8\u5b58\u7684\u662f\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u4e2a\u5730\u5740\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u4e0d\u53ef\u53d8\u7684\u53ea\u662f\u8fd9\u4e2a\u5730\u5740\uff0c\u5373\u4e0d\u80fd\u628a<code>foo</code>\u6307\u5411\u53e6\u4e00\u4e2a\u5730\u5740\uff0c\u4f46\u5bf9\u8c61\u672c\u8eab\u662f\u53ef\u53d8\u7684\uff0c\u6240\u4ee5\u4f9d\u7136\u53ef\u4ee5\u4e3a\u5176\u6dfb\u52a0\u65b0\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const a = [];\na.push('Hello'); // \u53ef\u6267\u884c\na.length = 0;    // \u53ef\u6267\u884c\na = ['Dave'];    // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>a</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u672c\u8eab\u662f\u53ef\u5199\u7684\uff0c\u4f46\u662f\u5982\u679c\u5c06\u53e6\u4e00\u4e2a\u6570\u7ec4\u8d4b\u503c\u7ed9<code>a</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u771f\u7684\u60f3\u5c06\u5bf9\u8c61\u51bb\u7ed3\uff0c\u5e94\u8be5\u4f7f\u7528<code>Object.freeze</code>\u65b9\u6cd5\u3002</p> <pre><code>const foo = Object.freeze({});\n\n// \u5e38\u89c4\u6a21\u5f0f\u65f6\uff0c\u4e0b\u9762\u4e00\u884c\u4e0d\u8d77\u4f5c\u7528\uff1b\n// \u4e25\u683c\u6a21\u5f0f\u65f6\uff0c\u8be5\u884c\u4f1a\u62a5\u9519\nfoo.prop = 123;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e38\u91cf<code>foo</code>\u6307\u5411\u4e00\u4e2a\u51bb\u7ed3\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u6dfb\u52a0\u65b0\u5c5e\u6027\u4e0d\u8d77\u4f5c\u7528\uff0c\u4e25\u683c\u6a21\u5f0f\u65f6\u8fd8\u4f1a\u62a5\u9519\u3002</p> <p>\u9664\u4e86\u5c06\u5bf9\u8c61\u672c\u8eab\u51bb\u7ed3\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u4e5f\u5e94\u8be5\u51bb\u7ed3\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5c06\u5bf9\u8c61\u5f7b\u5e95\u51bb\u7ed3\u7684\u51fd\u6570\u3002</p> <pre><code>var constantize = (obj) =&gt; {\n  Object.freeze(obj);\n  Object.keys(obj).forEach( (key, i) =&gt; {\n    if ( typeof obj[key] === 'object' ) {\n      constantize( obj[key] );\n    }\n  });\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#es6_1","title":"ES6 \u58f0\u660e\u53d8\u91cf\u7684\u516d\u79cd\u65b9\u6cd5","text":"<p>ES5 \u53ea\u6709\u4e24\u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a<code>var</code>\u547d\u4ee4\u548c<code>function</code>\u547d\u4ee4\u3002ES6 \u9664\u4e86\u6dfb\u52a0<code>let</code>\u548c<code>const</code>\u547d\u4ee4\uff0c\u540e\u9762\u7ae0\u8282\u8fd8\u4f1a\u63d0\u5230\uff0c\u53e6\u5916\u4e24\u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\uff1a<code>import</code>\u547d\u4ee4\u548c<code>class</code>\u547d\u4ee4\u3002\u6240\u4ee5\uff0cES6 \u4e00\u5171\u6709 6 \u79cd\u58f0\u660e\u53d8\u91cf\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#_10","title":"\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027","text":"<p>\u9876\u5c42\u5bf9\u8c61\uff0c\u5728\u6d4f\u89c8\u5668\u73af\u5883\u6307\u7684\u662f<code>window</code>\u5bf9\u8c61\uff0c\u5728 Node \u6307\u7684\u662f<code>global</code>\u5bf9\u8c61\u3002ES5 \u4e4b\u4e2d\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u4e0e\u5168\u5c40\u53d8\u91cf\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>window.a = 1;\na // 1\n\na = 2;\nwindow.a // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u8d4b\u503c\u4e0e\u5168\u5c40\u53d8\u91cf\u7684\u8d4b\u503c\uff0c\u662f\u540c\u4e00\u4ef6\u4e8b\u3002</p> <p>\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u4e0e\u5168\u5c40\u53d8\u91cf\u6302\u94a9\uff0c\u88ab\u8ba4\u4e3a\u662f JavaScript \u8bed\u8a00\u6700\u5927\u7684\u8bbe\u8ba1\u8d25\u7b14\u4e4b\u4e00\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u5e26\u6765\u4e86\u51e0\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff0c\u9996\u5148\u662f\u6ca1\u6cd5\u5728\u7f16\u8bd1\u65f6\u5c31\u62a5\u51fa\u53d8\u91cf\u672a\u58f0\u660e\u7684\u9519\u8bef\uff0c\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u77e5\u9053\uff08\u56e0\u4e3a\u5168\u5c40\u53d8\u91cf\u53ef\u80fd\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u521b\u9020\u7684\uff0c\u800c\u5c5e\u6027\u7684\u521b\u9020\u662f\u52a8\u6001\u7684\uff09\uff1b\u5176\u6b21\uff0c\u7a0b\u5e8f\u5458\u5f88\u5bb9\u6613\u4e0d\u77e5\u4e0d\u89c9\u5730\u5c31\u521b\u5efa\u4e86\u5168\u5c40\u53d8\u91cf\uff08\u6bd4\u5982\u6253\u5b57\u51fa\u9519\uff09\uff1b\u6700\u540e\uff0c\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u662f\u5230\u5904\u53ef\u4ee5\u8bfb\u5199\u7684\uff0c\u8fd9\u975e\u5e38\u4e0d\u5229\u4e8e\u6a21\u5757\u5316\u7f16\u7a0b\u3002\u53e6\u4e00\u65b9\u9762\uff0c<code>window</code>\u5bf9\u8c61\u6709\u5b9e\u4f53\u542b\u4e49\uff0c\u6307\u7684\u662f\u6d4f\u89c8\u5668\u7684\u7a97\u53e3\u5bf9\u8c61\uff0c\u9876\u5c42\u5bf9\u8c61\u662f\u4e00\u4e2a\u6709\u5b9e\u4f53\u542b\u4e49\u7684\u5bf9\u8c61\uff0c\u4e5f\u662f\u4e0d\u5408\u9002\u7684\u3002</p> <p>ES6 \u4e3a\u4e86\u6539\u53d8\u8fd9\u4e00\u70b9\uff0c\u4e00\u65b9\u9762\u89c4\u5b9a\uff0c\u4e3a\u4e86\u4fdd\u6301\u517c\u5bb9\u6027\uff0c<code>var</code>\u547d\u4ee4\u548c<code>function</code>\u547d\u4ee4\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4f9d\u65e7\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff1b\u53e6\u4e00\u65b9\u9762\u89c4\u5b9a\uff0c<code>let</code>\u547d\u4ee4\u3001<code>const</code>\u547d\u4ee4\u3001<code>class</code>\u547d\u4ee4\u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4e0d\u5c5e\u4e8e\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece ES6 \u5f00\u59cb\uff0c\u5168\u5c40\u53d8\u91cf\u5c06\u9010\u6b65\u4e0e\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\u8131\u94a9\u3002</p> <pre><code>var a = 1;\n// \u5982\u679c\u5728 Node \u7684 REPL \u73af\u5883\uff0c\u53ef\u4ee5\u5199\u6210 global.a\n// \u6216\u8005\u91c7\u7528\u901a\u7528\u65b9\u6cd5\uff0c\u5199\u6210 this.a\nwindow.a // 1\n\nlet b = 1;\nwindow.b // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5168\u5c40\u53d8\u91cf<code>a</code>\u7531<code>var</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5b83\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff1b\u5168\u5c40\u53d8\u91cf<code>b</code>\u7531<code>let</code>\u547d\u4ee4\u58f0\u660e\uff0c\u6240\u4ee5\u5b83\u4e0d\u662f\u9876\u5c42\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/02-let/#globalthis","title":"globalThis \u5bf9\u8c61","text":"<p>JavaScript \u8bed\u8a00\u5b58\u5728\u4e00\u4e2a\u9876\u5c42\u5bf9\u8c61\uff0c\u5b83\u63d0\u4f9b\u5168\u5c40\u73af\u5883\uff08\u5373\u5168\u5c40\u4f5c\u7528\u57df\uff09\uff0c\u6240\u6709\u4ee3\u7801\u90fd\u662f\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\u8fd0\u884c\u3002\u4f46\u662f\uff0c\u9876\u5c42\u5bf9\u8c61\u5728\u5404\u79cd\u5b9e\u73b0\u91cc\u9762\u662f\u4e0d\u7edf\u4e00\u7684\u3002</p> <ul> <li>\u6d4f\u89c8\u5668\u91cc\u9762\uff0c\u9876\u5c42\u5bf9\u8c61\u662f<code>window</code>\uff0c\u4f46 Node \u548c Web Worker \u6ca1\u6709<code>window</code>\u3002</li> <li>\u6d4f\u89c8\u5668\u548c Web Worker \u91cc\u9762\uff0c<code>self</code>\u4e5f\u6307\u5411\u9876\u5c42\u5bf9\u8c61\uff0c\u4f46\u662f Node \u6ca1\u6709<code>self</code>\u3002</li> <li>Node \u91cc\u9762\uff0c\u9876\u5c42\u5bf9\u8c61\u662f<code>global</code>\uff0c\u4f46\u5176\u4ed6\u73af\u5883\u90fd\u4e0d\u652f\u6301\u3002</li> </ul> <p>\u540c\u4e00\u6bb5\u4ee3\u7801\u4e3a\u4e86\u80fd\u591f\u5728\u5404\u79cd\u73af\u5883\uff0c\u90fd\u80fd\u53d6\u5230\u9876\u5c42\u5bf9\u8c61\uff0c\u73b0\u5728\u4e00\u822c\u662f\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u4f46\u662f\u6709\u5c40\u9650\u6027\u3002</p> <ul> <li>\u5168\u5c40\u73af\u5883\u4e2d\uff0c<code>this</code>\u4f1a\u8fd4\u56de\u9876\u5c42\u5bf9\u8c61\u3002\u4f46\u662f\uff0cNode.js \u6a21\u5757\u4e2d<code>this</code>\u8fd4\u56de\u7684\u662f\u5f53\u524d\u6a21\u5757\uff0cES6 \u6a21\u5757\u4e2d<code>this</code>\u8fd4\u56de\u7684\u662f<code>undefined</code>\u3002</li> <li>\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\uff0c\u5982\u679c\u51fd\u6570\u4e0d\u662f\u4f5c\u4e3a\u5bf9\u8c61\u7684\u65b9\u6cd5\u8fd0\u884c\uff0c\u800c\u662f\u5355\u7eaf\u4f5c\u4e3a\u51fd\u6570\u8fd0\u884c\uff0c<code>this</code>\u4f1a\u6307\u5411\u9876\u5c42\u5bf9\u8c61\u3002\u4f46\u662f\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u8fd9\u65f6<code>this</code>\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</li> <li>\u4e0d\u7ba1\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u8fd8\u662f\u666e\u901a\u6a21\u5f0f\uff0c<code>new Function('return this')()</code>\uff0c\u603b\u662f\u4f1a\u8fd4\u56de\u5168\u5c40\u5bf9\u8c61\u3002\u4f46\u662f\uff0c\u5982\u679c\u6d4f\u89c8\u5668\u7528\u4e86 CSP\uff08Content Security Policy\uff0c\u5185\u5bb9\u5b89\u5168\u7b56\u7565\uff09\uff0c\u90a3\u4e48<code>eval</code>\u3001<code>new Function</code>\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u3002</li> </ul> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5f88\u96be\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u90fd\u53d6\u5230\u9876\u5c42\u5bf9\u8c61\u3002\u4e0b\u9762\u662f\u4e24\u79cd\u52c9\u5f3a\u53ef\u4ee5\u4f7f\u7528\u7684\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\n(typeof window !== 'undefined'\n   ? window\n   : (typeof process === 'object' &amp;&amp;\n      typeof require === 'function' &amp;&amp;\n      typeof global === 'object')\n     ? global\n     : this);\n\n// \u65b9\u6cd5\u4e8c\nvar getGlobal = function () {\n  if (typeof self !== 'undefined') { return self; }\n  if (typeof window !== 'undefined') { return window; }\n  if (typeof global !== 'undefined') { return global; }\n  throw new Error('unable to locate global object');\n};\n</code></pre> <p>ES2020 \u5728\u8bed\u8a00\u6807\u51c6\u7684\u5c42\u9762\uff0c\u5f15\u5165<code>globalThis</code>\u4f5c\u4e3a\u9876\u5c42\u5bf9\u8c61\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4efb\u4f55\u73af\u5883\u4e0b\uff0c<code>globalThis</code>\u90fd\u662f\u5b58\u5728\u7684\uff0c\u90fd\u53ef\u4ee5\u4ece\u5b83\u62ff\u5230\u9876\u5c42\u5bf9\u8c61\uff0c\u6307\u5411\u5168\u5c40\u73af\u5883\u4e0b\u7684<code>this</code>\u3002</p> <p>\u57ab\u7247\u5e93<code>global-this</code>\u6a21\u62df\u4e86\u8fd9\u4e2a\u63d0\u6848\uff0c\u53ef\u4ee5\u5728\u6240\u6709\u73af\u5883\u62ff\u5230<code>globalThis</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/","title":"03-\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_1","title":"\u6570\u7ec4\u7684\u89e3\u6784\u8d4b\u503c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u5141\u8bb8\u6309\u7167\u4e00\u5b9a\u6a21\u5f0f\uff0c\u4ece\u6570\u7ec4\u548c\u5bf9\u8c61\u4e2d\u63d0\u53d6\u503c\uff0c\u5bf9\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c\uff0c\u8fd9\u88ab\u79f0\u4e3a\u89e3\u6784\uff08Destructuring\uff09\u3002</p> <p>\u4ee5\u524d\uff0c\u4e3a\u53d8\u91cf\u8d4b\u503c\uff0c\u53ea\u80fd\u76f4\u63a5\u6307\u5b9a\u503c\u3002</p> <pre><code>let a = 1;\nlet b = 2;\nlet c = 3;\n</code></pre> <p>ES6 \u5141\u8bb8\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>let [a, b, c] = [1, 2, 3];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u53ef\u4ee5\u4ece\u6570\u7ec4\u4e2d\u63d0\u53d6\u503c\uff0c\u6309\u7167\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u5bf9\u53d8\u91cf\u8d4b\u503c\u3002</p> <p>\u672c\u8d28\u4e0a\uff0c\u8fd9\u79cd\u5199\u6cd5\u5c5e\u4e8e\u201c\u6a21\u5f0f\u5339\u914d\u201d\uff0c\u53ea\u8981\u7b49\u53f7\u4e24\u8fb9\u7684\u6a21\u5f0f\u76f8\u540c\uff0c\u5de6\u8fb9\u7684\u53d8\u91cf\u5c31\u4f1a\u88ab\u8d4b\u4e88\u5bf9\u5e94\u7684\u503c\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u4f7f\u7528\u5d4c\u5957\u6570\u7ec4\u8fdb\u884c\u89e3\u6784\u7684\u4f8b\u5b50\u3002</p> <pre><code>let [foo, [[bar], baz]] = [1, [[2], 3]];\nfoo // 1\nbar // 2\nbaz // 3\n\nlet [ , , third] = [\"foo\", \"bar\", \"baz\"];\nthird // \"baz\"\n\nlet [x, , y] = [1, 2, 3];\nx // 1\ny // 3\n\nlet [head, ...tail] = [1, 2, 3, 4];\nhead // 1\ntail // [2, 3, 4]\n\nlet [x, y, ...z] = ['a'];\nx // \"a\"\ny // undefined\nz // []\n</code></pre> <p>\u5982\u679c\u89e3\u6784\u4e0d\u6210\u529f\uff0c\u53d8\u91cf\u7684\u503c\u5c31\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>let [foo] = [];\nlet [bar, foo] = [1];\n</code></pre> <p>\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\u90fd\u5c5e\u4e8e\u89e3\u6784\u4e0d\u6210\u529f\uff0c<code>foo</code>\u7684\u503c\u90fd\u4f1a\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u4e0d\u5b8c\u5168\u89e3\u6784\uff0c\u5373\u7b49\u53f7\u5de6\u8fb9\u7684\u6a21\u5f0f\uff0c\u53ea\u5339\u914d\u4e00\u90e8\u5206\u7684\u7b49\u53f7\u53f3\u8fb9\u7684\u6570\u7ec4\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u89e3\u6784\u4f9d\u7136\u53ef\u4ee5\u6210\u529f\u3002</p> <pre><code>let [x, y] = [1, 2, 3];\nx // 1\ny // 2\n\nlet [a, [b], d] = [1, [2, 3], 4];\na // 1\nb // 2\nd // 4\n</code></pre> <p>\u4e0a\u9762\u4e24\u4e2a\u4f8b\u5b50\uff0c\u90fd\u5c5e\u4e8e\u4e0d\u5b8c\u5168\u89e3\u6784\uff0c\u4f46\u662f\u53ef\u4ee5\u6210\u529f\u3002</p> <p>\u5982\u679c\u7b49\u53f7\u7684\u53f3\u8fb9\u4e0d\u662f\u6570\u7ec4\uff08\u6216\u8005\u4e25\u683c\u5730\u8bf4\uff0c\u4e0d\u662f\u53ef\u904d\u5386\u7684\u7ed3\u6784\uff0c\u53c2\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\uff0c\u90a3\u4e48\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlet [foo] = 1;\nlet [foo] = false;\nlet [foo] = NaN;\nlet [foo] = undefined;\nlet [foo] = null;\nlet [foo] = {};\n</code></pre> <p>\u4e0a\u9762\u7684\u8bed\u53e5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\uff0c\u8981\u4e48\u8f6c\u4e3a\u5bf9\u8c61\u4ee5\u540e\u4e0d\u5177\u5907 Iterator \u63a5\u53e3\uff08\u524d\u4e94\u4e2a\u8868\u8fbe\u5f0f\uff09\uff0c\u8981\u4e48\u672c\u8eab\u5c31\u4e0d\u5177\u5907 Iterator \u63a5\u53e3\uff08\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff09\u3002</p> <p>\u5bf9\u4e8e Set \u7ed3\u6784\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u7684\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>let [x, y, z] = new Set(['a', 'b', 'c']);\nx // \"a\"\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c\u53ea\u8981\u67d0\u79cd\u6570\u636e\u7ed3\u6784\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u90fd\u53ef\u4ee5\u91c7\u7528\u6570\u7ec4\u5f62\u5f0f\u7684\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>function* fibs() {\n  let a = 0;\n  let b = 1;\n  while (true) {\n    yield a;\n    [a, b] = [b, a + b];\n  }\n}\n\nlet [first, second, third, fourth, fifth, sixth] = fibs();\nsixth // 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>fibs</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff08\u53c2\u89c1\u300aGenerator \u51fd\u6570\u300b\u4e00\u7ae0\uff09\uff0c\u539f\u751f\u5177\u6709 Iterator \u63a5\u53e3\u3002\u89e3\u6784\u8d4b\u503c\u4f1a\u4f9d\u6b21\u4ece\u8fd9\u4e2a\u63a5\u53e3\u83b7\u53d6\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_3","title":"\u9ed8\u8ba4\u503c","text":"<p>\u89e3\u6784\u8d4b\u503c\u5141\u8bb8\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002</p> <pre><code>let [foo = true] = [];\nfoo // true\n\nlet [x, y = 'b'] = ['a']; // x='a', y='b'\nlet [x, y = 'b'] = ['a', undefined]; // x='a', y='b'\n</code></pre> <p>\u6ce8\u610f\uff0cES6 \u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\uff0c\u5224\u65ad\u4e00\u4e2a\u4f4d\u7f6e\u662f\u5426\u6709\u503c\u3002\u6240\u4ee5\uff0c\u53ea\u6709\u5f53\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\uff0c\u9ed8\u8ba4\u503c\u624d\u4f1a\u751f\u6548\u3002</p> <pre><code>let [x = 1] = [undefined];\nx // 1\n\nlet [x = 1] = [null];\nx // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u662f<code>null</code>\uff0c\u9ed8\u8ba4\u503c\u5c31\u4e0d\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a<code>null</code>\u4e0d\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5982\u679c\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u662f\u60f0\u6027\u6c42\u503c\u7684\uff0c\u5373\u53ea\u6709\u5728\u7528\u5230\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u6c42\u503c\u3002</p> <pre><code>function f() {\n  console.log('aaa');\n}\n\nlet [x = f()] = [1];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a<code>x</code>\u80fd\u53d6\u5230\u503c\uff0c\u6240\u4ee5\u51fd\u6570<code>f</code>\u6839\u672c\u4e0d\u4f1a\u6267\u884c\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u5176\u5b9e\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>let x;\nif ([1][0] === undefined) {\n  x = f();\n} else {\n  x = [1][0];\n}\n</code></pre> <p>\u9ed8\u8ba4\u503c\u53ef\u4ee5\u5f15\u7528\u89e3\u6784\u8d4b\u503c\u7684\u5176\u4ed6\u53d8\u91cf\uff0c\u4f46\u8be5\u53d8\u91cf\u5fc5\u987b\u5df2\u7ecf\u58f0\u660e\u3002</p> <pre><code>let [x = 1, y = x] = [];     // x=1; y=1\nlet [x = 1, y = x] = [2];    // x=2; y=2\nlet [x = 1, y = x] = [1, 2]; // x=1; y=2\nlet [x = y, y = 1] = [];     // ReferenceError: y is not defined\n</code></pre> <p>\u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u6240\u4ee5\u4f1a\u62a5\u9519\uff0c\u662f\u56e0\u4e3a<code>x</code>\u7528<code>y</code>\u505a\u9ed8\u8ba4\u503c\u65f6\uff0c<code>y</code>\u8fd8\u6ca1\u6709\u58f0\u660e\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_4","title":"\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_5","title":"\u7b80\u4ecb","text":"<p>\u89e3\u6784\u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e\u6570\u7ec4\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5bf9\u8c61\u3002</p> <pre><code>let { foo, bar } = { foo: 'aaa', bar: 'bbb' };\nfoo // \"aaa\"\nbar // \"bbb\"\n</code></pre> <p>\u5bf9\u8c61\u7684\u89e3\u6784\u4e0e\u6570\u7ec4\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u4e0d\u540c\u3002\u6570\u7ec4\u7684\u5143\u7d20\u662f\u6309\u6b21\u5e8f\u6392\u5217\u7684\uff0c\u53d8\u91cf\u7684\u53d6\u503c\u7531\u5b83\u7684\u4f4d\u7f6e\u51b3\u5b9a\uff1b\u800c\u5bf9\u8c61\u7684\u5c5e\u6027\u6ca1\u6709\u6b21\u5e8f\uff0c\u53d8\u91cf\u5fc5\u987b\u4e0e\u5c5e\u6027\u540c\u540d\uff0c\u624d\u80fd\u53d6\u5230\u6b63\u786e\u7684\u503c\u3002</p> <pre><code>let { bar, foo } = { foo: 'aaa', bar: 'bbb' };\nfoo // \"aaa\"\nbar // \"bbb\"\n\nlet { baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff0c\u7b49\u53f7\u5de6\u8fb9\u7684\u4e24\u4e2a\u53d8\u91cf\u7684\u6b21\u5e8f\uff0c\u4e0e\u7b49\u53f7\u53f3\u8fb9\u4e24\u4e2a\u540c\u540d\u5c5e\u6027\u7684\u6b21\u5e8f\u4e0d\u4e00\u81f4\uff0c\u4f46\u662f\u5bf9\u53d6\u503c\u5b8c\u5168\u6ca1\u6709\u5f71\u54cd\u3002\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u7684\u53d8\u91cf\u6ca1\u6709\u5bf9\u5e94\u7684\u540c\u540d\u5c5e\u6027\uff0c\u5bfc\u81f4\u53d6\u4e0d\u5230\u503c\uff0c\u6700\u540e\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5982\u679c\u89e3\u6784\u5931\u8d25\uff0c\u53d8\u91cf\u7684\u503c\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>let {foo} = {bar: 'baz'};\nfoo // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b49\u53f7\u53f3\u8fb9\u7684\u5bf9\u8c61\u6ca1\u6709<code>foo</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u53d8\u91cf<code>foo</code>\u53d6\u4e0d\u5230\u503c\uff0c\u6240\u4ee5\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u73b0\u6709\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u8d4b\u503c\u5230\u67d0\u4e2a\u53d8\u91cf\u3002</p> <pre><code>// \u4f8b\u4e00\nlet { log, sin, cos } = Math;\n\n// \u4f8b\u4e8c\nconst { log } = console;\nlog('hello') // hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4f8b\u4e00\u5c06<code>Math</code>\u5bf9\u8c61\u7684\u5bf9\u6570\u3001\u6b63\u5f26\u3001\u4f59\u5f26\u4e09\u4e2a\u65b9\u6cd5\uff0c\u8d4b\u503c\u5230\u5bf9\u5e94\u7684\u53d8\u91cf\u4e0a\uff0c\u4f7f\u7528\u8d77\u6765\u5c31\u4f1a\u65b9\u4fbf\u5f88\u591a\u3002\u4f8b\u4e8c\u5c06<code>console.log</code>\u8d4b\u503c\u5230<code>log</code>\u53d8\u91cf\u3002</p> <p>\u5982\u679c\u53d8\u91cf\u540d\u4e0e\u5c5e\u6027\u540d\u4e0d\u4e00\u81f4\uff0c\u5fc5\u987b\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>let { foo: baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // \"aaa\"\n\nlet obj = { first: 'hello', last: 'world' };\nlet { first: f, last: l } = obj;\nf // 'hello'\nl // 'world'\n</code></pre> <p>\u8fd9\u5b9e\u9645\u4e0a\u8bf4\u660e\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u662f\u4e0b\u9762\u5f62\u5f0f\u7684\u7b80\u5199\uff08\u53c2\u89c1\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\u3002</p> <pre><code>let { foo: foo, bar: bar } = { foo: 'aaa', bar: 'bbb' };\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u7684\u5185\u90e8\u673a\u5236\uff0c\u662f\u5148\u627e\u5230\u540c\u540d\u5c5e\u6027\uff0c\u7136\u540e\u518d\u8d4b\u7ed9\u5bf9\u5e94\u7684\u53d8\u91cf\u3002\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u540e\u8005\uff0c\u800c\u4e0d\u662f\u524d\u8005\u3002</p> <pre><code>let { foo: baz } = { foo: 'aaa', bar: 'bbb' };\nbaz // \"aaa\"\nfoo // error: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u662f\u5339\u914d\u7684\u6a21\u5f0f\uff0c<code>baz</code>\u624d\u662f\u53d8\u91cf\u3002\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u53d8\u91cf<code>baz</code>\uff0c\u800c\u4e0d\u662f\u6a21\u5f0f<code>foo</code>\u3002</p> <p>\u4e0e\u6570\u7ec4\u4e00\u6837\uff0c\u89e3\u6784\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5d4c\u5957\u7ed3\u6784\u7684\u5bf9\u8c61\u3002</p> <pre><code>let obj = {\n  p: [\n    'Hello',\n    { y: 'World' }\n  ]\n};\n\nlet { p: [x, { y }] } = obj;\nx // \"Hello\"\ny // \"World\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u8fd9\u65f6<code>p</code>\u662f\u6a21\u5f0f\uff0c\u4e0d\u662f\u53d8\u91cf\uff0c\u56e0\u6b64\u4e0d\u4f1a\u88ab\u8d4b\u503c\u3002\u5982\u679c<code>p</code>\u4e5f\u8981\u4f5c\u4e3a\u53d8\u91cf\u8d4b\u503c\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>let obj = {\n  p: [\n    'Hello',\n    { y: 'World' }\n  ]\n};\n\nlet { p, p: [x, { y }] } = obj;\nx // \"Hello\"\ny // \"World\"\np // [\"Hello\", {y: \"World\"}]\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const node = {\n  loc: {\n    start: {\n      line: 1,\n      column: 5\n    }\n  }\n};\n\nlet { loc, loc: { start }, loc: { start: { line }} } = node;\nline // 1\nloc  // Object {start: Object}\nstart // Object {line: 1, column: 5}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e09\u6b21\u89e3\u6784\u8d4b\u503c\uff0c\u5206\u522b\u662f\u5bf9<code>loc</code>\u3001<code>start</code>\u3001<code>line</code>\u4e09\u4e2a\u5c5e\u6027\u7684\u89e3\u6784\u8d4b\u503c\u3002\u6ce8\u610f\uff0c\u6700\u540e\u4e00\u6b21\u5bf9<code>line</code>\u5c5e\u6027\u7684\u89e3\u6784\u8d4b\u503c\u4e4b\u4e2d\uff0c\u53ea\u6709<code>line</code>\u662f\u53d8\u91cf\uff0c<code>loc</code>\u548c<code>start</code>\u90fd\u662f\u6a21\u5f0f\uff0c\u4e0d\u662f\u53d8\u91cf\u3002</p> <p>\u4e0b\u9762\u662f\u5d4c\u5957\u8d4b\u503c\u7684\u4f8b\u5b50\u3002</p> <pre><code>let obj = {};\nlet arr = [];\n\n({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });\n\nobj // {prop:123}\narr // [true]\n</code></pre> <p>\u5982\u679c\u89e3\u6784\u6a21\u5f0f\u662f\u5d4c\u5957\u7684\u5bf9\u8c61\uff0c\u800c\u4e14\u5b50\u5bf9\u8c61\u6240\u5728\u7684\u7236\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlet {foo: {bar}} = {baz: 'baz'};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b49\u53f7\u5de6\u8fb9\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\uff0c\u5bf9\u5e94\u4e00\u4e2a\u5b50\u5bf9\u8c61\u3002\u8be5\u5b50\u5bf9\u8c61\u7684<code>bar</code>\u5c5e\u6027\uff0c\u89e3\u6784\u65f6\u4f1a\u62a5\u9519\u3002\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a<code>foo</code>\u8fd9\u65f6\u7b49\u4e8e<code>undefined</code>\uff0c\u518d\u53d6\u5b50\u5c5e\u6027\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u53d6\u5230\u7ee7\u627f\u7684\u5c5e\u6027\u3002</p> <pre><code>const obj1 = {};\nconst obj2 = { foo: 'bar' };\nObject.setPrototypeOf(obj1, obj2);\n\nconst { foo } = obj1;\nfoo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj1</code>\u7684\u539f\u578b\u5bf9\u8c61\u662f<code>obj2</code>\u3002<code>foo</code>\u5c5e\u6027\u4e0d\u662f<code>obj1</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u800c\u662f\u7ee7\u627f\u81ea<code>obj2</code>\u7684\u5c5e\u6027\uff0c\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u53d6\u5230\u8fd9\u4e2a\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_6","title":"\u9ed8\u8ba4\u503c","text":"<p>\u5bf9\u8c61\u7684\u89e3\u6784\u4e5f\u53ef\u4ee5\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002</p> <pre><code>var {x = 3} = {};\nx // 3\n\nvar {x, y = 5} = {x: 1};\nx // 1\ny // 5\n\nvar {x: y = 3} = {};\ny // 3\n\nvar {x: y = 3} = {x: 5};\ny // 5\n\nvar { message: msg = 'Something went wrong' } = {};\nmsg // \"Something went wrong\"\n</code></pre> <p>\u9ed8\u8ba4\u503c\u751f\u6548\u7684\u6761\u4ef6\u662f\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\u4e25\u683c\u7b49\u4e8e<code>undefined</code>\u3002</p> <pre><code>var {x = 3} = {x: undefined};\nx // 3\n\nvar {x = 3} = {x: null};\nx // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027<code>x</code>\u7b49\u4e8e<code>null</code>\uff0c\u56e0\u4e3a<code>null</code>\u4e0e<code>undefined</code>\u4e0d\u4e25\u683c\u76f8\u7b49\uff0c\u6240\u4ee5\u662f\u4e2a\u6709\u6548\u7684\u8d4b\u503c\uff0c\u5bfc\u81f4\u9ed8\u8ba4\u503c<code>3</code>\u4e0d\u4f1a\u751f\u6548\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_7","title":"\u6ce8\u610f\u70b9","text":"<p>\uff081\uff09\u5982\u679c\u8981\u5c06\u4e00\u4e2a\u5df2\u7ecf\u58f0\u660e\u7684\u53d8\u91cf\u7528\u4e8e\u89e3\u6784\u8d4b\u503c\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>// \u9519\u8bef\u7684\u5199\u6cd5\nlet x;\n{x} = {x: 1};\n// SyntaxError: syntax error\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5199\u6cd5\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a JavaScript \u5f15\u64ce\u4f1a\u5c06<code>{x}</code>\u7406\u89e3\u6210\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u4ece\u800c\u53d1\u751f\u8bed\u6cd5\u9519\u8bef\u3002\u53ea\u6709\u4e0d\u5c06\u5927\u62ec\u53f7\u5199\u5728\u884c\u9996\uff0c\u907f\u514d JavaScript \u5c06\u5176\u89e3\u91ca\u4e3a\u4ee3\u7801\u5757\uff0c\u624d\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>// \u6b63\u786e\u7684\u5199\u6cd5\nlet x;\n({x} = {x: 1});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u6574\u4e2a\u89e3\u6784\u8d4b\u503c\u8bed\u53e5\uff0c\u653e\u5728\u4e00\u4e2a\u5706\u62ec\u53f7\u91cc\u9762\uff0c\u5c31\u53ef\u4ee5\u6b63\u786e\u6267\u884c\u3002\u5173\u4e8e\u5706\u62ec\u53f7\u4e0e\u89e3\u6784\u8d4b\u503c\u7684\u5173\u7cfb\uff0c\u53c2\u89c1\u4e0b\u6587\u3002</p> <p>\uff082\uff09\u89e3\u6784\u8d4b\u503c\u5141\u8bb8\u7b49\u53f7\u5de6\u8fb9\u7684\u6a21\u5f0f\u4e4b\u4e2d\uff0c\u4e0d\u653e\u7f6e\u4efb\u4f55\u53d8\u91cf\u540d\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u5199\u51fa\u975e\u5e38\u53e4\u602a\u7684\u8d4b\u503c\u8868\u8fbe\u5f0f\u3002</p> <pre><code>({} = [true, false]);\n({} = 'abc');\n({} = []);\n</code></pre> <p>\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u867d\u7136\u6beb\u65e0\u610f\u4e49\uff0c\u4f46\u662f\u8bed\u6cd5\u662f\u5408\u6cd5\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u3002</p> <p>\uff083\uff09\u7531\u4e8e\u6570\u7ec4\u672c\u8d28\u662f\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u5bf9\u6570\u7ec4\u8fdb\u884c\u5bf9\u8c61\u5c5e\u6027\u7684\u89e3\u6784\u3002</p> <pre><code>let arr = [1, 2, 3];\nlet {0 : first, [arr.length - 1] : last} = arr;\nfirst // 1\nlast // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u6570\u7ec4\u8fdb\u884c\u5bf9\u8c61\u89e3\u6784\u3002\u6570\u7ec4<code>arr</code>\u7684<code>0</code>\u952e\u5bf9\u5e94\u7684\u503c\u662f<code>1</code>\uff0c<code>[arr.length - 1]</code>\u5c31\u662f<code>2</code>\u952e\uff0c\u5bf9\u5e94\u7684\u503c\u662f<code>3</code>\u3002\u65b9\u62ec\u53f7\u8fd9\u79cd\u5199\u6cd5\uff0c\u5c5e\u4e8e\u201c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u201d\uff08\u53c2\u89c1\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_8","title":"\u5b57\u7b26\u4e32\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u5b57\u7b26\u4e32\u4e5f\u53ef\u4ee5\u89e3\u6784\u8d4b\u503c\u3002\u8fd9\u662f\u56e0\u4e3a\u6b64\u65f6\uff0c\u5b57\u7b26\u4e32\u88ab\u8f6c\u6362\u6210\u4e86\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002</p> <pre><code>const [a, b, c, d, e] = 'hello';\na // \"h\"\nb // \"e\"\nc // \"l\"\nd // \"l\"\ne // \"o\"\n</code></pre> <p>\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a<code>length</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u8fd8\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u5c5e\u6027\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>let {length : len} = 'hello';\nlen // 5\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_9","title":"\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u89e3\u6784\u8d4b\u503c\u65f6\uff0c\u5982\u679c\u7b49\u53f7\u53f3\u8fb9\u662f\u6570\u503c\u548c\u5e03\u5c14\u503c\uff0c\u5219\u4f1a\u5148\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>let {toString: s} = 123;\ns === Number.prototype.toString // true\n\nlet {toString: s} = true;\ns === Boolean.prototype.toString // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u5305\u88c5\u5bf9\u8c61\u90fd\u6709<code>toString</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u53d8\u91cf<code>s</code>\u90fd\u80fd\u53d6\u5230\u503c\u3002</p> <p>\u89e3\u6784\u8d4b\u503c\u7684\u89c4\u5219\u662f\uff0c\u53ea\u8981\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\u4e0d\u662f\u5bf9\u8c61\u6216\u6570\u7ec4\uff0c\u5c31\u5148\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { prop: x } = undefined; // TypeError\nlet { prop: y } = null; // TypeError\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_10","title":"\u51fd\u6570\u53c2\u6570\u7684\u89e3\u6784\u8d4b\u503c","text":"<p>\u51fd\u6570\u7684\u53c2\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>function add([x, y]){\n  return x + y;\n}\n\nadd([1, 2]); // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>add</code>\u7684\u53c2\u6570\u8868\u9762\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f46\u5728\u4f20\u5165\u53c2\u6570\u7684\u90a3\u4e00\u523b\uff0c\u6570\u7ec4\u53c2\u6570\u5c31\u88ab\u89e3\u6784\u6210\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u3002\u5bf9\u4e8e\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\u6765\u8bf4\uff0c\u5b83\u4eec\u80fd\u611f\u53d7\u5230\u7684\u53c2\u6570\u5c31\u662f<code>x</code>\u548c<code>y</code>\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);\n// [ 3, 7 ]\n</code></pre> <p>\u51fd\u6570\u53c2\u6570\u7684\u89e3\u6784\u4e5f\u53ef\u4ee5\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function move({x = 0, y = 0} = {}) {\n  return [x, y];\n}\n\nmove({x: 3, y: 8}); // [3, 8]\nmove({x: 3}); // [3, 0]\nmove({}); // [0, 0]\nmove(); // [0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>move</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u901a\u8fc7\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u89e3\u6784\uff0c\u5f97\u5230\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u7684\u503c\u3002\u5982\u679c\u89e3\u6784\u5931\u8d25\uff0c<code>x</code>\u548c<code>y</code>\u7b49\u4e8e\u9ed8\u8ba4\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u4e0b\u9762\u7684\u5199\u6cd5\u4f1a\u5f97\u5230\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <pre><code>function move({x, y} = { x: 0, y: 0 }) {\n  return [x, y];\n}\n\nmove({x: 3, y: 8}); // [3, 8]\nmove({x: 3}); // [3, undefined]\nmove({}); // [undefined, undefined]\nmove(); // [0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e3a\u51fd\u6570<code>move</code>\u7684\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u800c\u4e0d\u662f\u4e3a\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u6240\u4ee5\u4f1a\u5f97\u5230\u4e0e\u524d\u4e00\u79cd\u5199\u6cd5\u4e0d\u540c\u7684\u7ed3\u679c\u3002</p> <p><code>undefined</code>\u5c31\u4f1a\u89e6\u53d1\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002</p> <pre><code>[1, undefined, 3].map((x = 'yes') =&gt; x);\n// [ 1, 'yes', 3 ]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_11","title":"\u5706\u62ec\u53f7\u95ee\u9898","text":"<p>\u89e3\u6784\u8d4b\u503c\u867d\u7136\u5f88\u65b9\u4fbf\uff0c\u4f46\u662f\u89e3\u6790\u8d77\u6765\u5e76\u4e0d\u5bb9\u6613\u3002\u5bf9\u4e8e\u7f16\u8bd1\u5668\u6765\u8bf4\uff0c\u4e00\u4e2a\u5f0f\u5b50\u5230\u5e95\u662f\u6a21\u5f0f\uff0c\u8fd8\u662f\u8868\u8fbe\u5f0f\uff0c\u6ca1\u6709\u529e\u6cd5\u4ece\u4e00\u5f00\u59cb\u5c31\u77e5\u9053\uff0c\u5fc5\u987b\u89e3\u6790\u5230\uff08\u6216\u89e3\u6790\u4e0d\u5230\uff09\u7b49\u53f7\u624d\u80fd\u77e5\u9053\u3002</p> <p>\u7531\u6b64\u5e26\u6765\u7684\u95ee\u9898\u662f\uff0c\u5982\u679c\u6a21\u5f0f\u4e2d\u51fa\u73b0\u5706\u62ec\u53f7\u600e\u4e48\u5904\u7406\u3002ES6 \u7684\u89c4\u5219\u662f\uff0c\u53ea\u8981\u6709\u53ef\u80fd\u5bfc\u81f4\u89e3\u6784\u7684\u6b67\u4e49\uff0c\u5c31\u4e0d\u5f97\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u6761\u89c4\u5219\u5b9e\u9645\u4e0a\u4e0d\u90a3\u4e48\u5bb9\u6613\u8fa8\u522b\uff0c\u5904\u7406\u8d77\u6765\u76f8\u5f53\u9ebb\u70e6\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u53ea\u8981\u6709\u53ef\u80fd\uff0c\u5c31\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u653e\u7f6e\u5706\u62ec\u53f7\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_12","title":"\u4e0d\u80fd\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5","text":"<p>\u4ee5\u4e0b\u4e09\u79cd\u89e3\u6784\u8d4b\u503c\u4e0d\u5f97\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\uff081\uff09\u53d8\u91cf\u58f0\u660e\u8bed\u53e5</p> <pre><code>// \u5168\u90e8\u62a5\u9519\nlet [(a)] = [1];\n\nlet {x: (c)} = {};\nlet ({x: c}) = {};\nlet {(x: c)} = {};\nlet {(x): c} = {};\n\nlet { o: ({ p: p }) } = { o: { p: 2 } };\n</code></pre> <p>\u4e0a\u9762 6 \u4e2a\u8bed\u53e5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\uff0c\u6a21\u5f0f\u4e0d\u80fd\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\uff082\uff09\u51fd\u6570\u53c2\u6570</p> <p>\u51fd\u6570\u53c2\u6570\u4e5f\u5c5e\u4e8e\u53d8\u91cf\u58f0\u660e\uff0c\u56e0\u6b64\u4e0d\u80fd\u5e26\u6709\u5706\u62ec\u53f7\u3002</p> <pre><code>// \u62a5\u9519\nfunction f([(z)]) { return z; }\n// \u62a5\u9519\nfunction f([z,(x)]) { return x; }\n</code></pre> <p>\uff083\uff09\u8d4b\u503c\u8bed\u53e5\u7684\u6a21\u5f0f</p> <pre><code>// \u5168\u90e8\u62a5\u9519\n({ p: a }) = { p: 42 };\n([a]) = [5];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u6574\u4e2a\u6a21\u5f0f\u653e\u5728\u5706\u62ec\u53f7\u4e4b\u4e2d\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\n[({ p: a }), { x: c }] = [{}, {}];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u4e00\u90e8\u5206\u6a21\u5f0f\u653e\u5728\u5706\u62ec\u53f7\u4e4b\u4e2d\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_13","title":"\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u7684\u60c5\u51b5\u53ea\u6709\u4e00\u79cd\uff1a\u8d4b\u503c\u8bed\u53e5\u7684\u975e\u6a21\u5f0f\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <pre><code>[(b)] = [3]; // \u6b63\u786e\n({ p: (d) } = {}); // \u6b63\u786e\n[(parseInt.prop)] = [3]; // \u6b63\u786e\n</code></pre> <p>\u4e0a\u9762\u4e09\u884c\u8bed\u53e5\u90fd\u53ef\u4ee5\u6b63\u786e\u6267\u884c\uff0c\u56e0\u4e3a\u9996\u5148\u5b83\u4eec\u90fd\u662f\u8d4b\u503c\u8bed\u53e5\uff0c\u800c\u4e0d\u662f\u58f0\u660e\u8bed\u53e5\uff1b\u5176\u6b21\u5b83\u4eec\u7684\u5706\u62ec\u53f7\u90fd\u4e0d\u5c5e\u4e8e\u6a21\u5f0f\u7684\u4e00\u90e8\u5206\u3002\u7b2c\u4e00\u884c\u8bed\u53e5\u4e2d\uff0c\u6a21\u5f0f\u662f\u53d6\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\uff0c\u8ddf\u5706\u62ec\u53f7\u65e0\u5173\uff1b\u7b2c\u4e8c\u884c\u8bed\u53e5\u4e2d\uff0c\u6a21\u5f0f\u662f<code>p</code>\uff0c\u800c\u4e0d\u662f<code>d</code>\uff1b\u7b2c\u4e09\u884c\u8bed\u53e5\u4e0e\u7b2c\u4e00\u884c\u8bed\u53e5\u7684\u6027\u8d28\u4e00\u81f4\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/03-destructuring/#_14","title":"\u7528\u9014","text":"<p>\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c\u7528\u9014\u5f88\u591a\u3002</p> <p>\uff081\uff09\u4ea4\u6362\u53d8\u91cf\u7684\u503c</p> <pre><code>let x = 1;\nlet y = 2;\n\n[x, y] = [y, x];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4ea4\u6362\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u7684\u503c\uff0c\u8fd9\u6837\u7684\u5199\u6cd5\u4e0d\u4ec5\u7b80\u6d01\uff0c\u800c\u4e14\u6613\u8bfb\uff0c\u8bed\u4e49\u975e\u5e38\u6e05\u6670\u3002</p> <p>\uff082\uff09\u4ece\u51fd\u6570\u8fd4\u56de\u591a\u4e2a\u503c</p> <p>\u51fd\u6570\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u5982\u679c\u8981\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u53ea\u80fd\u5c06\u5b83\u4eec\u653e\u5728\u6570\u7ec4\u6216\u5bf9\u8c61\u91cc\u8fd4\u56de\u3002\u6709\u4e86\u89e3\u6784\u8d4b\u503c\uff0c\u53d6\u51fa\u8fd9\u4e9b\u503c\u5c31\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>// \u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\n\nfunction example() {\n  return [1, 2, 3];\n}\nlet [a, b, c] = example();\n\n// \u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n\nfunction example() {\n  return {\n    foo: 1,\n    bar: 2\n  };\n}\nlet { foo, bar } = example();\n</code></pre> <p>\uff083\uff09\u51fd\u6570\u53c2\u6570\u7684\u5b9a\u4e49</p> <p>\u89e3\u6784\u8d4b\u503c\u53ef\u4ee5\u65b9\u4fbf\u5730\u5c06\u4e00\u7ec4\u53c2\u6570\u4e0e\u53d8\u91cf\u540d\u5bf9\u5e94\u8d77\u6765\u3002</p> <pre><code>// \u53c2\u6570\u662f\u4e00\u7ec4\u6709\u6b21\u5e8f\u7684\u503c\nfunction f([x, y, z]) { ... }\nf([1, 2, 3]);\n\n// \u53c2\u6570\u662f\u4e00\u7ec4\u65e0\u6b21\u5e8f\u7684\u503c\nfunction f({x, y, z}) { ... }\nf({z: 3, y: 2, x: 1});\n</code></pre> <p>\uff084\uff09\u63d0\u53d6 JSON \u6570\u636e</p> <p>\u89e3\u6784\u8d4b\u503c\u5bf9\u63d0\u53d6 JSON \u5bf9\u8c61\u4e2d\u7684\u6570\u636e\uff0c\u5c24\u5176\u6709\u7528\u3002</p> <pre><code>let jsonData = {\n  id: 42,\n  status: \"OK\",\n  data: [867, 5309]\n};\n\nlet { id, status, data: number } = jsonData;\n\nconsole.log(id, status, number);\n// 42, \"OK\", [867, 5309]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ef\u4ee5\u5feb\u901f\u63d0\u53d6 JSON \u6570\u636e\u7684\u503c\u3002</p> <p>\uff085\uff09\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c</p> <pre><code>jQuery.ajax = function (url, {\n  async = true,\n  beforeSend = function () {},\n  cache = true,\n  complete = function () {},\n  crossDomain = false,\n  global = true,\n  // ... more config\n} = {}) {\n  // ... do stuff\n};\n</code></pre> <p>\u6307\u5b9a\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u907f\u514d\u4e86\u5728\u51fd\u6570\u4f53\u5185\u90e8\u518d\u5199<code>var foo = config.foo || 'default foo';</code>\u8fd9\u6837\u7684\u8bed\u53e5\u3002</p> <p>\uff086\uff09\u904d\u5386 Map \u7ed3\u6784</p> <p>\u4efb\u4f55\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002Map \u7ed3\u6784\u539f\u751f\u652f\u6301 Iterator \u63a5\u53e3\uff0c\u914d\u5408\u53d8\u91cf\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u83b7\u53d6\u952e\u540d\u548c\u952e\u503c\u5c31\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>const map = new Map();\nmap.set('first', 'hello');\nmap.set('second', 'world');\n\nfor (let [key, value] of map) {\n  console.log(key + \" is \" + value);\n}\n// first is hello\n// second is world\n</code></pre> <p>\u5982\u679c\u53ea\u60f3\u83b7\u53d6\u952e\u540d\uff0c\u6216\u8005\u53ea\u60f3\u83b7\u53d6\u952e\u503c\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>// \u83b7\u53d6\u952e\u540d\nfor (let [key] of map) {\n  // ...\n}\n\n// \u83b7\u53d6\u952e\u503c\nfor (let [,value] of map) {\n  // ...\n}\n</code></pre> <p>\uff087\uff09\u8f93\u5165\u6a21\u5757\u7684\u6307\u5b9a\u65b9\u6cd5</p> <p>\u52a0\u8f7d\u6a21\u5757\u65f6\uff0c\u5f80\u5f80\u9700\u8981\u6307\u5b9a\u8f93\u5165\u54ea\u4e9b\u65b9\u6cd5\u3002\u89e3\u6784\u8d4b\u503c\u4f7f\u5f97\u8f93\u5165\u8bed\u53e5\u975e\u5e38\u6e05\u6670\u3002</p> <pre><code>const { SourceMapConsumer, SourceNode } = require(\"source-map\");\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/","title":"04-\u5b57\u7b26\u4e32\u7684\u6269\u5c55","text":"<p>\u672c\u7ae0\u4ecb\u7ecd ES6 \u5bf9\u5b57\u7b26\u4e32\u7684\u6539\u9020\u548c\u589e\u5f3a\uff0c\u4e0b\u4e00\u7ae0\u4ecb\u7ecd\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#unicode","title":"\u5b57\u7b26\u7684 Unicode \u8868\u793a\u6cd5","text":"<p>ES6 \u52a0\u5f3a\u4e86\u5bf9 Unicode \u7684\u652f\u6301\uff0c\u5141\u8bb8\u91c7\u7528<code>\\uxxxx</code>\u5f62\u5f0f\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\uff0c\u5176\u4e2d<code>xxxx</code>\u8868\u793a\u5b57\u7b26\u7684 Unicode \u7801\u70b9\u3002</p> <pre><code>\"\\u0061\"\n// \"a\"\n</code></pre> <p>\u4f46\u662f\uff0c\u8fd9\u79cd\u8868\u793a\u6cd5\u53ea\u9650\u4e8e\u7801\u70b9\u5728<code>\\u0000</code>~<code>\\uFFFF</code>\u4e4b\u95f4\u7684\u5b57\u7b26\u3002\u8d85\u51fa\u8fd9\u4e2a\u8303\u56f4\u7684\u5b57\u7b26\uff0c\u5fc5\u987b\u7528\u4e24\u4e2a\u53cc\u5b57\u8282\u7684\u5f62\u5f0f\u8868\u793a\u3002</p> <pre><code>\"\\uD842\\uDFB7\"\n// \"\ud842\udfb7\"\n\n\"\\u20BB7\"\n// \" 7\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u76f4\u63a5\u5728<code>\\u</code>\u540e\u9762\u8ddf\u4e0a\u8d85\u8fc7<code>0xFFFF</code>\u7684\u6570\u503c\uff08\u6bd4\u5982<code>\\u20BB7</code>\uff09\uff0cJavaScript \u4f1a\u7406\u89e3\u6210<code>\\u20BB+7</code>\u3002\u7531\u4e8e<code>\\u20BB</code>\u662f\u4e00\u4e2a\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u6240\u4ee5\u53ea\u4f1a\u663e\u793a\u4e00\u4e2a\u7a7a\u683c\uff0c\u540e\u9762\u8ddf\u7740\u4e00\u4e2a<code>7</code>\u3002</p> <p>ES6 \u5bf9\u8fd9\u4e00\u70b9\u505a\u51fa\u4e86\u6539\u8fdb\uff0c\u53ea\u8981\u5c06\u7801\u70b9\u653e\u5165\u5927\u62ec\u53f7\uff0c\u5c31\u80fd\u6b63\u786e\u89e3\u8bfb\u8be5\u5b57\u7b26\u3002</p> <pre><code>\"\\u{20BB7}\"\n// \"\ud842\udfb7\"\n\n\"\\u{41}\\u{42}\\u{43}\"\n// \"ABC\"\n\nlet hello = 123;\nhell\\u{6F} // 123\n\n'\\u{1F680}' === '\\uD83D\\uDE80'\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u8868\u660e\uff0c\u5927\u62ec\u53f7\u8868\u793a\u6cd5\u4e0e\u56db\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\u662f\u7b49\u4ef7\u7684\u3002</p> <p>\u6709\u4e86\u8fd9\u79cd\u8868\u793a\u6cd5\u4e4b\u540e\uff0cJavaScript \u5171\u6709 6 \u79cd\u65b9\u6cd5\u53ef\u4ee5\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u3002</p> <pre><code>'\\z' === 'z'  // true\n'\\172' === 'z' // true\n'\\x7A' === 'z' // true\n'\\u007A' === 'z' // true\n'\\u{7A}' === 'z' // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#_1","title":"\u5b57\u7b26\u4e32\u7684\u904d\u5386\u5668\u63a5\u53e3","text":"<p>ES6 \u4e3a\u5b57\u7b26\u4e32\u6dfb\u52a0\u4e86\u904d\u5386\u5668\u63a5\u53e3\uff08\u8be6\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\uff0c\u4f7f\u5f97\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002</p> <pre><code>for (let codePoint of 'foo') {\n  console.log(codePoint)\n}\n// \"f\"\n// \"o\"\n// \"o\"\n</code></pre> <p>\u9664\u4e86\u904d\u5386\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u904d\u5386\u5668\u6700\u5927\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u7801\u70b9\uff0c\u4f20\u7edf\u7684<code>for</code>\u5faa\u73af\u65e0\u6cd5\u8bc6\u522b\u8fd9\u6837\u7684\u7801\u70b9\u3002</p> <pre><code>let text = String.fromCodePoint(0x20BB7);\n\nfor (let i = 0; i &lt; text.length; i++) {\n  console.log(text[i]);\n}\n// \" \"\n// \" \"\n\nfor (let i of text) {\n  console.log(i);\n}\n// \"\ud842\udfb7\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32<code>text</code>\u53ea\u6709\u4e00\u4e2a\u5b57\u7b26\uff0c\u4f46\u662f<code>for</code>\u5faa\u73af\u4f1a\u8ba4\u4e3a\u5b83\u5305\u542b\u4e24\u4e2a\u5b57\u7b26\uff08\u90fd\u4e0d\u53ef\u6253\u5370\uff09\uff0c\u800c<code>for...of</code>\u5faa\u73af\u4f1a\u6b63\u786e\u8bc6\u522b\u51fa\u8fd9\u4e00\u4e2a\u5b57\u7b26\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#u2028-u2029","title":"\u76f4\u63a5\u8f93\u5165 U+2028 \u548c U+2029","text":"<p>JavaScript \u5b57\u7b26\u4e32\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u5b57\u7b26\uff0c\u4ee5\u53ca\u8f93\u5165\u5b57\u7b26\u7684\u8f6c\u4e49\u5f62\u5f0f\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u201c\u4e2d\u201d\u7684 Unicode \u7801\u70b9\u662f U+4e2d\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u8f93\u5165\u8fd9\u4e2a\u6c49\u5b57\uff0c\u4e5f\u53ef\u4ee5\u8f93\u5165\u5b83\u7684\u8f6c\u4e49\u5f62\u5f0f<code>\\u4e2d</code>\uff0c\u4e24\u8005\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>'\u4e2d' === '\\u4e2d' // true\n</code></pre> <p>\u4f46\u662f\uff0cJavaScript \u89c4\u5b9a\u67095\u4e2a\u5b57\u7b26\uff0c\u4e0d\u80fd\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u76f4\u63a5\u4f7f\u7528\uff0c\u53ea\u80fd\u4f7f\u7528\u8f6c\u4e49\u5f62\u5f0f\u3002</p> <ul> <li>U+005C\uff1a\u53cd\u659c\u6760\uff08reverse solidus)</li> <li>U+000D\uff1a\u56de\u8f66\uff08carriage return\uff09</li> <li>U+2028\uff1a\u884c\u5206\u9694\u7b26\uff08line separator\uff09</li> <li>U+2029\uff1a\u6bb5\u5206\u9694\u7b26\uff08paragraph separator\uff09</li> <li>U+000A\uff1a\u6362\u884c\u7b26\uff08line feed\uff09</li> </ul> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5b57\u7b26\u4e32\u91cc\u9762\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u53cd\u659c\u6760\uff0c\u4e00\u5b9a\u8981\u8f6c\u4e49\u5199\u6210<code>\\\\</code>\u6216\u8005<code>\\u005c</code>\u3002</p> <p>\u8fd9\u4e2a\u89c4\u5b9a\u672c\u8eab\u6ca1\u6709\u95ee\u9898\uff0c\u9ebb\u70e6\u5728\u4e8e JSON \u683c\u5f0f\u5141\u8bb8\u5b57\u7b26\u4e32\u91cc\u9762\u76f4\u63a5\u4f7f\u7528 U+2028\uff08\u884c\u5206\u9694\u7b26\uff09\u548c U+2029\uff08\u6bb5\u5206\u9694\u7b26\uff09\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u670d\u52a1\u5668\u8f93\u51fa\u7684 JSON \u88ab<code>JSON.parse</code>\u89e3\u6790\uff0c\u5c31\u6709\u53ef\u80fd\u76f4\u63a5\u62a5\u9519\u3002</p> <pre><code>const json = '\"\\u2028\"';\nJSON.parse(json); // \u53ef\u80fd\u62a5\u9519\n</code></pre> <p>JSON \u683c\u5f0f\u5df2\u7ecf\u51bb\u7ed3\uff08RFC 7159\uff09\uff0c\u6ca1\u6cd5\u4fee\u6539\u4e86\u3002\u4e3a\u4e86\u6d88\u9664\u8fd9\u4e2a\u62a5\u9519\uff0cES2019 \u5141\u8bb8 JavaScript \u5b57\u7b26\u4e32\u76f4\u63a5\u8f93\u5165 U+2028\uff08\u884c\u5206\u9694\u7b26\uff09\u548c U+2029\uff08\u6bb5\u5206\u9694\u7b26\uff09\u3002</p> <pre><code>const PS = eval(\"'\\u2029'\");\n</code></pre> <p>\u6839\u636e\u8fd9\u4e2a\u63d0\u6848\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u73b0\u5728\u5c31\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u8fd9\u4e24\u4e2a\u5b57\u7b26\u3002\u53e6\u5916\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u4f9d\u7136\u4e0d\u5141\u8bb8\u76f4\u63a5\u8f93\u5165\u8fd9\u4e24\u4e2a\u5b57\u7b26\uff0c\u8fd9\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a JSON \u672c\u6765\u5c31\u4e0d\u5141\u8bb8\u76f4\u63a5\u5305\u542b\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#jsonstringify","title":"JSON.stringify() \u7684\u6539\u9020","text":"<p>\u6839\u636e\u6807\u51c6\uff0cJSON \u6570\u636e\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\u3002\u4f46\u662f\uff0c\u73b0\u5728\u7684<code>JSON.stringify()</code>\u65b9\u6cd5\u6709\u53ef\u80fd\u8fd4\u56de\u4e0d\u7b26\u5408 UTF-8 \u6807\u51c6\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cUTF-8 \u6807\u51c6\u89c4\u5b9a\uff0c<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u7801\u70b9\uff0c\u4e0d\u80fd\u5355\u72ec\u4f7f\u7528\uff0c\u5fc5\u987b\u914d\u5bf9\u4f7f\u7528\u3002\u6bd4\u5982\uff0c<code>\\uD834\\uDF06</code>\u662f\u4e24\u4e2a\u7801\u70b9\uff0c\u4f46\u662f\u5fc5\u987b\u653e\u5728\u4e00\u8d77\u914d\u5bf9\u4f7f\u7528\uff0c\u4ee3\u8868\u5b57\u7b26<code>\ud834\udf06</code>\u3002\u8fd9\u662f\u4e3a\u4e86\u8868\u793a\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\u7684\u4e00\u79cd\u53d8\u901a\u65b9\u6cd5\u3002\u5355\u72ec\u4f7f\u7528<code>\\uD834</code>\u548c<code>\\uDF06</code>\u8fd9\u4e24\u4e2a\u7801\u70b9\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u6216\u8005\u98a0\u5012\u987a\u5e8f\u4e5f\u4e0d\u884c\uff0c\u56e0\u4e3a<code>\\uDF06\\uD834</code>\u5e76\u6ca1\u6709\u5bf9\u5e94\u7684\u5b57\u7b26\u3002</p> <p><code>JSON.stringify()</code>\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5b83\u53ef\u80fd\u8fd4\u56de<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u5355\u4e2a\u7801\u70b9\u3002</p> <pre><code>JSON.stringify('\\u{D834}') // \"\\u{D834}\"\n</code></pre> <p>\u4e3a\u4e86\u786e\u4fdd\u8fd4\u56de\u7684\u662f\u5408\u6cd5\u7684 UTF-8 \u5b57\u7b26\uff0cES2019 \u6539\u53d8\u4e86<code>JSON.stringify()</code>\u7684\u884c\u4e3a\u3002\u5982\u679c\u9047\u5230<code>0xD800</code>\u5230<code>0xDFFF</code>\u4e4b\u95f4\u7684\u5355\u4e2a\u7801\u70b9\uff0c\u6216\u8005\u4e0d\u5b58\u5728\u7684\u914d\u5bf9\u5f62\u5f0f\uff0c\u5b83\u4f1a\u8fd4\u56de\u8f6c\u4e49\u5b57\u7b26\u4e32\uff0c\u7559\u7ed9\u5e94\u7528\u81ea\u5df1\u51b3\u5b9a\u4e0b\u4e00\u6b65\u7684\u5904\u7406\u3002</p> <pre><code>JSON.stringify('\\u{D834}') // \"\"\\\\uD834\"\"\nJSON.stringify('\\uDF06\\uD834') // \"\"\\\\udf06\\\\ud834\"\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#_2","title":"\u6a21\u677f\u5b57\u7b26\u4e32","text":"<p>\u4f20\u7edf\u7684 JavaScript \u8bed\u8a00\uff0c\u8f93\u51fa\u6a21\u677f\u901a\u5e38\u662f\u8fd9\u6837\u5199\u7684\uff08\u4e0b\u9762\u4f7f\u7528\u4e86 jQuery \u7684\u65b9\u6cd5\uff09\u3002</p> <pre><code>$('#result').append(\n  'There are &lt;b&gt;' + basket.count + '&lt;/b&gt; ' +\n  'items in your basket, ' +\n  '&lt;em&gt;' + basket.onSale +\n  '&lt;/em&gt; are on sale!'\n);\n</code></pre> <p>\u4e0a\u9762\u8fd9\u79cd\u5199\u6cd5\u76f8\u5f53\u7e41\u7410\u4e0d\u65b9\u4fbf\uff0cES6 \u5f15\u5165\u4e86\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>$('#result').append(`\n  There are &lt;b&gt;${basket.count}&lt;/b&gt; items\n   in your basket, &lt;em&gt;${basket.onSale}&lt;/em&gt;\n  are on sale!\n`);\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\uff08template string\uff09\u662f\u589e\u5f3a\u7248\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u53cd\u5f15\u53f7\uff08`\uff09\u6807\u8bc6\u3002\u5b83\u53ef\u4ee5\u5f53\u4f5c\u666e\u901a\u5b57\u7b26\u4e32\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u591a\u884c\u5b57\u7b26\u4e32\uff0c\u6216\u8005\u5728\u5b57\u7b26\u4e32\u4e2d\u5d4c\u5165\u53d8\u91cf\u3002</p> <pre><code>// \u666e\u901a\u5b57\u7b26\u4e32\n`In JavaScript '\\n' is a line-feed.`\n\n// \u591a\u884c\u5b57\u7b26\u4e32\n`In JavaScript this is\n not legal.`\n\nconsole.log(`string text line 1\nstring text line 2`);\n\n// \u5b57\u7b26\u4e32\u4e2d\u5d4c\u5165\u53d8\u91cf\nlet name = \"Bob\", time = \"today\";\n`Hello ${name}, how are you ${time}?`\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u90fd\u662f\u7528\u53cd\u5f15\u53f7\u8868\u793a\u3002\u5982\u679c\u5728\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u9700\u8981\u4f7f\u7528\u53cd\u5f15\u53f7\uff0c\u5219\u524d\u9762\u8981\u7528\u53cd\u659c\u6760\u8f6c\u4e49\u3002</p> <pre><code>let greeting = `\\`Yo\\` World!`;\n</code></pre> <p>\u5982\u679c\u4f7f\u7528\u6a21\u677f\u5b57\u7b26\u4e32\u8868\u793a\u591a\u884c\u5b57\u7b26\u4e32\uff0c\u6240\u6709\u7684\u7a7a\u683c\u548c\u7f29\u8fdb\u90fd\u4f1a\u88ab\u4fdd\u7559\u5728\u8f93\u51fa\u4e4b\u4e2d\u3002</p> <pre><code>$('#list').html(`\n&lt;ul&gt;\n  &lt;li&gt;first&lt;/li&gt;\n  &lt;li&gt;second&lt;/li&gt;\n&lt;/ul&gt;\n`);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6240\u6709\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u7a7a\u683c\u548c\u6362\u884c\uff0c\u90fd\u662f\u88ab\u4fdd\u7559\u7684\uff0c\u6bd4\u5982<code>&lt;ul&gt;</code>\u6807\u7b7e\u524d\u9762\u4f1a\u6709\u4e00\u4e2a\u6362\u884c\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u8981\u8fd9\u4e2a\u6362\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>trim</code>\u65b9\u6cd5\u6d88\u9664\u5b83\u3002</p> <pre><code>$('#list').html(`\n&lt;ul&gt;\n  &lt;li&gt;first&lt;/li&gt;\n  &lt;li&gt;second&lt;/li&gt;\n&lt;/ul&gt;\n`.trim());\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u5d4c\u5165\u53d8\u91cf\uff0c\u9700\u8981\u5c06\u53d8\u91cf\u540d\u5199\u5728<code>${}</code>\u4e4b\u4e2d\u3002</p> <pre><code>function authorize(user, action) {\n  if (!user.hasPrivilege(action)) {\n    throw new Error(\n      // \u4f20\u7edf\u5199\u6cd5\u4e3a\n      // 'User '\n      // + user.name\n      // + ' is not authorized to do '\n      // + action\n      // + '.'\n      `User ${user.name} is not authorized to do ${action}.`);\n  }\n}\n</code></pre> <p>\u5927\u62ec\u53f7\u5185\u90e8\u53ef\u4ee5\u653e\u5165\u4efb\u610f\u7684 JavaScript \u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u8fdb\u884c\u8fd0\u7b97\uff0c\u4ee5\u53ca\u5f15\u7528\u5bf9\u8c61\u5c5e\u6027\u3002</p> <pre><code>let x = 1;\nlet y = 2;\n\n`${x} + ${y} = ${x + y}`\n// \"1 + 2 = 3\"\n\n`${x} + ${y * 2} = ${x + y * 2}`\n// \"1 + 4 = 5\"\n\nlet obj = {x: 1, y: 2};\n`${obj.x + obj.y}`\n// \"3\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u4e4b\u4e2d\u8fd8\u80fd\u8c03\u7528\u51fd\u6570\u3002</p> <pre><code>function fn() {\n  return \"Hello World\";\n}\n\n`foo ${fn()} bar`\n// foo Hello World bar\n</code></pre> <p>\u5982\u679c\u5927\u62ec\u53f7\u4e2d\u7684\u503c\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u5c06\u6309\u7167\u4e00\u822c\u7684\u89c4\u5219\u8f6c\u4e3a\u5b57\u7b26\u4e32\u3002\u6bd4\u5982\uff0c\u5927\u62ec\u53f7\u4e2d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c06\u9ed8\u8ba4\u8c03\u7528\u5bf9\u8c61\u7684<code>toString</code>\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u6ca1\u6709\u58f0\u660e\uff0c\u5c06\u62a5\u9519\u3002</p> <pre><code>// \u53d8\u91cfplace\u6ca1\u6709\u58f0\u660e\nlet msg = `Hello, ${place}`;\n// \u62a5\u9519\n</code></pre> <p>\u7531\u4e8e\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u5927\u62ec\u53f7\u5185\u90e8\uff0c\u5c31\u662f\u6267\u884c JavaScript \u4ee3\u7801\uff0c\u56e0\u6b64\u5982\u679c\u5927\u62ec\u53f7\u5185\u90e8\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5c06\u4f1a\u539f\u6837\u8f93\u51fa\u3002</p> <pre><code>`Hello ${'World'}`\n// \"Hello World\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u751a\u81f3\u8fd8\u80fd\u5d4c\u5957\u3002</p> <pre><code>const tmpl = addrs =&gt; `\n  &lt;table&gt;\n  ${addrs.map(addr =&gt; `\n    &lt;tr&gt;&lt;td&gt;${addr.first}&lt;/td&gt;&lt;/tr&gt;\n    &lt;tr&gt;&lt;td&gt;${addr.last}&lt;/td&gt;&lt;/tr&gt;\n  `).join('')}\n  &lt;/table&gt;\n`;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u53d8\u91cf\u4e4b\u4e2d\uff0c\u53c8\u5d4c\u5165\u4e86\u53e6\u4e00\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\u3002</p> <pre><code>const data = [\n    { first: '&lt;Jane&gt;', last: 'Bond' },\n    { first: 'Lars', last: '&lt;Croft&gt;' },\n];\n\nconsole.log(tmpl(data));\n// &lt;table&gt;\n//\n//   &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt;\n//   &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;\n//\n//   &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;\n//   &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt;\n//\n// &lt;/table&gt;\n</code></pre> <p>\u5982\u679c\u9700\u8981\u5f15\u7528\u6a21\u677f\u5b57\u7b26\u4e32\u672c\u8eab\uff0c\u5728\u9700\u8981\u65f6\u6267\u884c\uff0c\u53ef\u4ee5\u5199\u6210\u51fd\u6570\u3002</p> <pre><code>let func = (name) =&gt; `Hello ${name}!`;\nfunc('Jack') // \"Hello Jack!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u5199\u6210\u4e86\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u5c31\u76f8\u5f53\u4e8e\u6267\u884c\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u4e86\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#_3","title":"\u5b9e\u4f8b\uff1a\u6a21\u677f\u7f16\u8bd1","text":"<p>\u4e0b\u9762\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u901a\u8fc7\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u751f\u6210\u6b63\u5f0f\u6a21\u677f\u7684\u5b9e\u4f8b\u3002</p> <pre><code>let template = `\n&lt;ul&gt;\n  &lt;% for(let i=0; i &lt; data.supplies.length; i++) { %&gt;\n    &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt;\n  &lt;% } %&gt;\n&lt;/ul&gt;\n`;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u6a21\u677f\u5b57\u7b26\u4e32\u4e4b\u4e2d\uff0c\u653e\u7f6e\u4e86\u4e00\u4e2a\u5e38\u89c4\u6a21\u677f\u3002\u8be5\u6a21\u677f\u4f7f\u7528<code>&lt;%...%&gt;</code>\u653e\u7f6e JavaScript \u4ee3\u7801\uff0c\u4f7f\u7528<code>&lt;%= ... %&gt;</code>\u8f93\u51fa JavaScript \u8868\u8fbe\u5f0f\u3002</p> <p>\u600e\u4e48\u7f16\u8bd1\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u5462\uff1f</p> <p>\u4e00\u79cd\u601d\u8def\u662f\u5c06\u5176\u8f6c\u6362\u4e3a JavaScript \u8868\u8fbe\u5f0f\u5b57\u7b26\u4e32\u3002</p> <pre><code>echo('&lt;ul&gt;');\nfor(let i=0; i &lt; data.supplies.length; i++) {\n  echo('&lt;li&gt;');\n  echo(data.supplies[i]);\n  echo('&lt;/li&gt;');\n};\necho('&lt;/ul&gt;');\n</code></pre> <p>\u8fd9\u4e2a\u8f6c\u6362\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u884c\u4e86\u3002</p> <pre><code>let evalExpr = /&lt;%=(.+?)%&gt;/g;\nlet expr = /&lt;%([\\s\\S]+?)%&gt;/g;\n\ntemplate = template\n  .replace(evalExpr, '`); \\n  echo( $1 ); \\n  echo(`')\n  .replace(expr, '`); \\n $1 \\n  echo(`');\n\ntemplate = 'echo(`' + template + '`);';\n</code></pre> <p>\u7136\u540e\uff0c\u5c06<code>template</code>\u5c01\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\u8fd4\u56de\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>let script =\n`(function parse(data){\n  let output = \"\";\n\n  function echo(html){\n    output += html;\n  }\n\n  ${ template }\n\n  return output;\n})`;\n\nreturn script;\n</code></pre> <p>\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u62fc\u88c5\u6210\u4e00\u4e2a\u6a21\u677f\u7f16\u8bd1\u51fd\u6570<code>compile</code>\u3002</p> <pre><code>function compile(template){\n  const evalExpr = /&lt;%=(.+?)%&gt;/g;\n  const expr = /&lt;%([\\s\\S]+?)%&gt;/g;\n\n  template = template\n    .replace(evalExpr, '`); \\n  echo( $1 ); \\n  echo(`')\n    .replace(expr, '`); \\n $1 \\n  echo(`');\n\n  template = 'echo(`' + template + '`);';\n\n  let script =\n  `(function parse(data){\n    let output = \"\";\n\n    function echo(html){\n      output += html;\n    }\n\n    ${ template }\n\n    return output;\n  })`;\n\n  return script;\n}\n</code></pre> <p><code>compile</code>\u51fd\u6570\u7684\u7528\u6cd5\u5982\u4e0b\u3002</p> <pre><code>let parse = eval(compile(template));\ndiv.innerHTML = parse({ supplies: [ \"broom\", \"mop\", \"cleaner\" ] });\n//   &lt;ul&gt;\n//     &lt;li&gt;broom&lt;/li&gt;\n//     &lt;li&gt;mop&lt;/li&gt;\n//     &lt;li&gt;cleaner&lt;/li&gt;\n//   &lt;/ul&gt;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#_4","title":"\u6807\u7b7e\u6a21\u677f","text":"<p>\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u529f\u80fd\uff0c\u4e0d\u4ec5\u4ec5\u662f\u4e0a\u9762\u8fd9\u4e9b\u3002\u5b83\u53ef\u4ee5\u7d27\u8ddf\u5728\u4e00\u4e2a\u51fd\u6570\u540d\u540e\u9762\uff0c\u8be5\u51fd\u6570\u5c06\u88ab\u8c03\u7528\u6765\u5904\u7406\u8fd9\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u3002\u8fd9\u88ab\u79f0\u4e3a\u201c\u6807\u7b7e\u6a21\u677f\u201d\u529f\u80fd\uff08tagged template\uff09\u3002</p> <pre><code>alert`hello`\n// \u7b49\u540c\u4e8e\nalert(['hello'])\n</code></pre> <p>\u6807\u7b7e\u6a21\u677f\u5176\u5b9e\u4e0d\u662f\u6a21\u677f\uff0c\u800c\u662f\u51fd\u6570\u8c03\u7528\u7684\u4e00\u79cd\u7279\u6b8a\u5f62\u5f0f\u3002\u201c\u6807\u7b7e\u201d\u6307\u7684\u5c31\u662f\u51fd\u6570\uff0c\u7d27\u8ddf\u5728\u540e\u9762\u7684\u6a21\u677f\u5b57\u7b26\u4e32\u5c31\u662f\u5b83\u7684\u53c2\u6570\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u6a21\u677f\u5b57\u7b26\u91cc\u9762\u6709\u53d8\u91cf\uff0c\u5c31\u4e0d\u662f\u7b80\u5355\u7684\u8c03\u7528\u4e86\uff0c\u800c\u662f\u4f1a\u5c06\u6a21\u677f\u5b57\u7b26\u4e32\u5148\u5904\u7406\u6210\u591a\u4e2a\u53c2\u6570\uff0c\u518d\u8c03\u7528\u51fd\u6570\u3002</p> <pre><code>let a = 5;\nlet b = 10;\n\ntag`Hello ${ a + b } world ${ a * b }`;\n// \u7b49\u540c\u4e8e\ntag(['Hello ', ' world ', ''], 15, 50);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u524d\u9762\u6709\u4e00\u4e2a\u6807\u8bc6\u540d<code>tag</code>\uff0c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u6574\u4e2a\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\uff0c\u5c31\u662f<code>tag</code>\u51fd\u6570\u5904\u7406\u6a21\u677f\u5b57\u7b26\u4e32\u540e\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u51fd\u6570<code>tag</code>\u4f9d\u6b21\u4f1a\u63a5\u6536\u5230\u591a\u4e2a\u53c2\u6570\u3002</p> <pre><code>function tag(stringArr, value1, value2){\n  // ...\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction tag(stringArr, ...values){\n  // ...\n}\n</code></pre> <p><code>tag</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u6570\u7ec4\u7684\u6210\u5458\u662f\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u90a3\u4e9b\u6ca1\u6709\u53d8\u91cf\u66ff\u6362\u7684\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53d8\u91cf\u66ff\u6362\u53ea\u53d1\u751f\u5728\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u4e0e\u7b2c\u4e8c\u4e2a\u6210\u5458\u4e4b\u95f4\u3001\u7b2c\u4e8c\u4e2a\u6210\u5458\u4e0e\u7b2c\u4e09\u4e2a\u6210\u5458\u4e4b\u95f4\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p><code>tag</code>\u51fd\u6570\u7684\u5176\u4ed6\u53c2\u6570\uff0c\u90fd\u662f\u6a21\u677f\u5b57\u7b26\u4e32\u5404\u4e2a\u53d8\u91cf\u88ab\u66ff\u6362\u540e\u7684\u503c\u3002\u7531\u4e8e\u672c\u4f8b\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u542b\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u56e0\u6b64<code>tag</code>\u4f1a\u63a5\u53d7\u5230<code>value1</code>\u548c<code>value2</code>\u4e24\u4e2a\u53c2\u6570\u3002</p> <p><code>tag</code>\u51fd\u6570\u6240\u6709\u53c2\u6570\u7684\u5b9e\u9645\u503c\u5982\u4e0b\u3002</p> <ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1a<code>['Hello ', ' world ', '']</code></li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570: 15</li> <li>\u7b2c\u4e09\u4e2a\u53c2\u6570\uff1a50</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c<code>tag</code>\u51fd\u6570\u5b9e\u9645\u4e0a\u4ee5\u4e0b\u9762\u7684\u5f62\u5f0f\u8c03\u7528\u3002</p> <pre><code>tag(['Hello ', ' world ', ''], 15, 50)\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u9700\u8981\u7f16\u5199<code>tag</code>\u51fd\u6570\u7684\u4ee3\u7801\u3002\u4e0b\u9762\u662f<code>tag</code>\u51fd\u6570\u7684\u4e00\u79cd\u5199\u6cd5\uff0c\u4ee5\u53ca\u8fd0\u884c\u7ed3\u679c\u3002</p> <pre><code>let a = 5;\nlet b = 10;\n\nfunction tag(s, v1, v2) {\n  console.log(s[0]);\n  console.log(s[1]);\n  console.log(s[2]);\n  console.log(v1);\n  console.log(v2);\n\n  return \"OK\";\n}\n\ntag`Hello ${ a + b } world ${ a * b}`;\n// \"Hello \"\n// \" world \"\n// \"\"\n// 15\n// 50\n// \"OK\"\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u4f8b\u5b50\u3002</p> <pre><code>let total = 30;\nlet msg = passthru`The total is ${total} (${total*1.05} with tax)`;\n\nfunction passthru(literals) {\n  let result = '';\n  let i = 0;\n\n  while (i &lt; literals.length) {\n    result += literals[i++];\n    if (i &lt; arguments.length) {\n      result += arguments[i];\n    }\n  }\n\n  return result;\n}\n\nmsg // \"The total is 30 (31.5 with tax)\"\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\uff0c\u5982\u4f55\u5c06\u5404\u4e2a\u53c2\u6570\u6309\u7167\u539f\u6765\u7684\u4f4d\u7f6e\u62fc\u5408\u56de\u53bb\u3002</p> <p><code>passthru</code>\u51fd\u6570\u91c7\u7528 rest \u53c2\u6570\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function passthru(literals, ...values) {\n  let output = \"\";\n  let index;\n  for (index = 0; index &lt; values.length; index++) {\n    output += literals[index] + values[index];\n  }\n\n  output += literals[index]\n  return output;\n}\n</code></pre> <p>\u201c\u6807\u7b7e\u6a21\u677f\u201d\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\uff0c\u5c31\u662f\u8fc7\u6ee4 HTML \u5b57\u7b26\u4e32\uff0c\u9632\u6b62\u7528\u6237\u8f93\u5165\u6076\u610f\u5185\u5bb9\u3002</p> <pre><code>let message =\n  SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;\n\nfunction SaferHTML(templateData) {\n  let s = templateData[0];\n  for (let i = 1; i &lt; arguments.length; i++) {\n    let arg = String(arguments[i]);\n\n    // Escape special characters in the substitution.\n    s += arg.replace(/&amp;/g, \"&amp;amp;\")\n            .replace(/&lt;/g, \"&amp;lt;\")\n            .replace(/&gt;/g, \"&amp;gt;\");\n\n    // Don't escape special characters in the template.\n    s += templateData[i];\n  }\n  return s;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sender</code>\u53d8\u91cf\u5f80\u5f80\u662f\u7528\u6237\u63d0\u4f9b\u7684\uff0c\u7ecf\u8fc7<code>SaferHTML</code>\u51fd\u6570\u5904\u7406\uff0c\u91cc\u9762\u7684\u7279\u6b8a\u5b57\u7b26\u90fd\u4f1a\u88ab\u8f6c\u4e49\u3002</p> <pre><code>let sender = '&lt;script&gt;alert(\"abc\")&lt;/script&gt;'; // \u6076\u610f\u4ee3\u7801\nlet message = SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;\n\nmessage\n// &lt;p&gt;&amp;lt;script&amp;gt;alert(\"abc\")&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;\n</code></pre> <p>\u6807\u7b7e\u6a21\u677f\u7684\u53e6\u4e00\u4e2a\u5e94\u7528\uff0c\u5c31\u662f\u591a\u8bed\u8a00\u8f6c\u6362\uff08\u56fd\u9645\u5316\u5904\u7406\uff09\u3002</p> <pre><code>i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`\n// \"\u6b22\u8fce\u8bbf\u95eexxx\uff0c\u60a8\u662f\u7b2cxxxx\u4f4d\u8bbf\u95ee\u8005\uff01\"\n</code></pre> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u672c\u8eab\u5e76\u4e0d\u80fd\u53d6\u4ee3 Mustache \u4e4b\u7c7b\u7684\u6a21\u677f\u5e93\uff0c\u56e0\u4e3a\u6ca1\u6709\u6761\u4ef6\u5224\u65ad\u548c\u5faa\u73af\u5904\u7406\u529f\u80fd\uff0c\u4f46\u662f\u901a\u8fc7\u6807\u7b7e\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u81ea\u5df1\u6dfb\u52a0\u8fd9\u4e9b\u529f\u80fd\u3002</p> <pre><code>// \u4e0b\u9762\u7684hashTemplate\u51fd\u6570\n// \u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6a21\u677f\u5904\u7406\u51fd\u6570\nlet libraryHtml = hashTemplate`\n  &lt;ul&gt;\n    #for book in ${myBooks}\n      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;\n    #end\n  &lt;/ul&gt;\n`;\n</code></pre> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u6807\u7b7e\u6a21\u677f\uff0c\u5728 JavaScript \u8bed\u8a00\u4e4b\u4e2d\u5d4c\u5165\u5176\u4ed6\u8bed\u8a00\u3002</p> <pre><code>jsx`\n  &lt;div&gt;\n    &lt;input\n      ref='input'\n      onChange='${this.handleChange}'\n      defaultValue='${this.state.value}' /&gt;\n      ${this.state.value}\n   &lt;/div&gt;\n`\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u901a\u8fc7<code>jsx</code>\u51fd\u6570\uff0c\u5c06\u4e00\u4e2a DOM \u5b57\u7b26\u4e32\u8f6c\u4e3a React \u5bf9\u8c61\u3002\u4f60\u53ef\u4ee5\u5728 GitHub \u627e\u5230<code>jsx</code>\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\u3002</p> <p>\u4e0b\u9762\u5219\u662f\u4e00\u4e2a\u5047\u60f3\u7684\u4f8b\u5b50\uff0c\u901a\u8fc7<code>java</code>\u51fd\u6570\uff0c\u5728 JavaScript \u4ee3\u7801\u4e4b\u4e2d\u8fd0\u884c Java \u4ee3\u7801\u3002</p> <pre><code>java`\nclass HelloWorldApp {\n  public static void main(String[] args) {\n    System.out.println(\"Hello World!\"); // Display the string.\n  }\n}\n`\nHelloWorldApp.main();\n</code></pre> <p>\u6a21\u677f\u5904\u7406\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08\u6a21\u677f\u5b57\u7b26\u4e32\u6570\u7ec4\uff09\uff0c\u8fd8\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\u3002</p> <pre><code>console.log`123`\n// [\"123\", raw: Array[1]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log</code>\u63a5\u53d7\u7684\u53c2\u6570\uff0c\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u6570\u7ec4\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\uff0c\u4fdd\u5b58\u7684\u662f\u8f6c\u4e49\u540e\u7684\u539f\u5b57\u7b26\u4e32\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>tag`First line\\nSecond line`\n\nfunction tag(strings) {\n  console.log(strings.raw[0]);\n  // strings.raw[0] \u4e3a \"First line\\\\nSecond line\"\n  // \u6253\u5370\u8f93\u51fa \"First line\\nSecond line\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>tag</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>strings</code>\uff0c\u6709\u4e00\u4e2a<code>raw</code>\u5c5e\u6027\uff0c\u4e5f\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u6570\u7ec4\u7684\u6210\u5458\u4e0e<code>strings</code>\u6570\u7ec4\u5b8c\u5168\u4e00\u81f4\u3002\u6bd4\u5982\uff0c<code>strings</code>\u6570\u7ec4\u662f<code>[\"First line\\nSecond line\"]</code>\uff0c\u90a3\u4e48<code>strings.raw</code>\u6570\u7ec4\u5c31\u662f<code>[\"First line\\\\nSecond line\"]</code>\u3002\u4e24\u8005\u552f\u4e00\u7684\u533a\u522b\uff0c\u5c31\u662f\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u659c\u6760\u90fd\u88ab\u8f6c\u4e49\u4e86\u3002\u6bd4\u5982\uff0cstrings.raw \u6570\u7ec4\u4f1a\u5c06<code>\\n</code>\u89c6\u4e3a<code>\\\\</code>\u548c<code>n</code>\u4e24\u4e2a\u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u6362\u884c\u7b26\u3002\u8fd9\u662f\u4e3a\u4e86\u65b9\u4fbf\u53d6\u5f97\u8f6c\u4e49\u4e4b\u524d\u7684\u539f\u59cb\u6a21\u677f\u800c\u8bbe\u8ba1\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/04-string/#_5","title":"\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u9650\u5236","text":"<p>\u524d\u9762\u63d0\u5230\u6807\u7b7e\u6a21\u677f\u91cc\u9762\uff0c\u53ef\u4ee5\u5185\u5d4c\u5176\u4ed6\u8bed\u8a00\u3002\u4f46\u662f\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u9ed8\u8ba4\u4f1a\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u5bfc\u81f4\u65e0\u6cd5\u5d4c\u5165\u5176\u4ed6\u8bed\u8a00\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u6807\u7b7e\u6a21\u677f\u91cc\u9762\u53ef\u4ee5\u5d4c\u5165 LaTEX \u8bed\u8a00\u3002</p> <pre><code>function latex(strings) {\n  // ...\n}\n\nlet document = latex`\n\\newcommand{\\fun}{\\textbf{Fun!}}  // \u6b63\u5e38\u5de5\u4f5c\n\\newcommand{\\unicode}{\\textbf{Unicode!}} // \u62a5\u9519\n\\newcommand{\\xerxes}{\\textbf{King!}} // \u62a5\u9519\n\nBreve over the h goes \\u{h}ere // \u62a5\u9519\n`\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>document</code>\u5185\u5d4c\u7684\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u5bf9\u4e8e LaTEX \u8bed\u8a00\u6765\u8bf4\u5b8c\u5168\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u662f JavaScript \u5f15\u64ce\u4f1a\u62a5\u9519\u3002\u539f\u56e0\u5c31\u5728\u4e8e\u5b57\u7b26\u4e32\u7684\u8f6c\u4e49\u3002</p> <p>\u6a21\u677f\u5b57\u7b26\u4e32\u4f1a\u5c06<code>\\u00FF</code>\u548c<code>\\u{42}</code>\u5f53\u4f5c Unicode \u5b57\u7b26\u8fdb\u884c\u8f6c\u4e49\uff0c\u6240\u4ee5<code>\\unicode</code>\u89e3\u6790\u65f6\u62a5\u9519\uff1b\u800c<code>\\x56</code>\u4f1a\u88ab\u5f53\u4f5c\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u6240\u4ee5<code>\\xerxes</code>\u4f1a\u62a5\u9519\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>\\u</code>\u548c<code>\\x</code>\u5728 LaTEX \u91cc\u9762\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u4f46\u662f JavaScript \u5c06\u5b83\u4eec\u8f6c\u4e49\u4e86\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES2018 \u653e\u677e\u4e86\u5bf9\u6807\u7b7e\u6a21\u677f\u91cc\u9762\u7684\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u9650\u5236\u3002\u5982\u679c\u9047\u5230\u4e0d\u5408\u6cd5\u7684\u5b57\u7b26\u4e32\u8f6c\u4e49\uff0c\u5c31\u8fd4\u56de<code>undefined</code>\uff0c\u800c\u4e0d\u662f\u62a5\u9519\uff0c\u5e76\u4e14\u4ece<code>raw</code>\u5c5e\u6027\u4e0a\u9762\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u5b57\u7b26\u4e32\u3002</p> <pre><code>function tag(strs) {\n  strs[0] === undefined\n  strs.raw[0] === \"\\\\unicode and \\\\u{55}\";\n}\ntag`\\unicode and \\u{55}`\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u677f\u5b57\u7b26\u4e32\u539f\u672c\u662f\u5e94\u8be5\u62a5\u9519\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u653e\u677e\u4e86\u5bf9\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u9650\u5236\uff0c\u6240\u4ee5\u4e0d\u62a5\u9519\u4e86\uff0cJavaScript \u5f15\u64ce\u5c06\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8bbe\u7f6e\u4e3a<code>undefined</code>\uff0c\u4f46\u662f<code>raw</code>\u5c5e\u6027\u4f9d\u7136\u53ef\u4ee5\u5f97\u5230\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u56e0\u6b64<code>tag</code>\u51fd\u6570\u8fd8\u662f\u53ef\u4ee5\u5bf9\u539f\u5b57\u7b26\u4e32\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u79cd\u5bf9\u5b57\u7b26\u4e32\u8f6c\u4e49\u7684\u653e\u677e\uff0c\u53ea\u5728\u6807\u7b7e\u6a21\u677f\u89e3\u6790\u5b57\u7b26\u4e32\u65f6\u751f\u6548\uff0c\u4e0d\u662f\u6807\u7b7e\u6a21\u677f\u7684\u573a\u5408\uff0c\u4f9d\u7136\u4f1a\u62a5\u9519\u3002</p> <pre><code>let bad = `bad escape sequence: \\unicode`; // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/","title":"05-\u5b57\u7b26\u4e32\u7684\u65b0\u589e\u65b9\u6cd5","text":"<p>\u672c\u7ae0\u4ecb\u7ecd\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#stringfromcodepoint","title":"String.fromCodePoint()","text":"<p>ES5 \u63d0\u4f9b<code>String.fromCharCode()</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u4ece Unicode \u7801\u70b9\u8fd4\u56de\u5bf9\u5e94\u5b57\u7b26\uff0c\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\u3002</p> <pre><code>String.fromCharCode(0x20BB7)\n// \"\u0bb7\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>String.fromCharCode()</code>\u4e0d\u80fd\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u7801\u70b9\uff0c\u6240\u4ee5<code>0x20BB7</code>\u5c31\u53d1\u751f\u4e86\u6ea2\u51fa\uff0c\u6700\u9ad8\u4f4d<code>2</code>\u88ab\u820d\u5f03\u4e86\uff0c\u6700\u540e\u8fd4\u56de\u7801\u70b9<code>U+0BB7</code>\u5bf9\u5e94\u7684\u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u7801\u70b9<code>U+20BB7</code>\u5bf9\u5e94\u7684\u5b57\u7b26\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86<code>String.fromCodePoint()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8bc6\u522b\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\uff0c\u5f25\u8865\u4e86<code>String.fromCharCode()</code>\u65b9\u6cd5\u7684\u4e0d\u8db3\u3002\u5728\u4f5c\u7528\u4e0a\uff0c\u6b63\u597d\u4e0e\u4e0b\u9762\u7684<code>codePointAt()</code>\u65b9\u6cd5\u76f8\u53cd\u3002</p> <pre><code>String.fromCodePoint(0x20BB7)\n// \"\ud842\udfb7\"\nString.fromCodePoint(0x78, 0x1f680, 0x79) === 'x\\uD83D\\uDE80y'\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>String.fromCodePoint</code>\u65b9\u6cd5\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u5219\u5b83\u4eec\u4f1a\u88ab\u5408\u5e76\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\u8fd4\u56de\u3002</p> <p>\u6ce8\u610f\uff0c<code>fromCodePoint</code>\u65b9\u6cd5\u5b9a\u4e49\u5728<code>String</code>\u5bf9\u8c61\u4e0a\uff0c\u800c<code>codePointAt</code>\u65b9\u6cd5\u5b9a\u4e49\u5728\u5b57\u7b26\u4e32\u7684\u5b9e\u4f8b\u5bf9\u8c61\u4e0a\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#stringraw","title":"String.raw()","text":"<p>ES6 \u8fd8\u4e3a\u539f\u751f\u7684 String \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e2a<code>raw()</code>\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u659c\u6760\u90fd\u88ab\u8f6c\u4e49\uff08\u5373\u659c\u6760\u524d\u9762\u518d\u52a0\u4e00\u4e2a\u659c\u6760\uff09\u7684\u5b57\u7b26\u4e32\uff0c\u5f80\u5f80\u7528\u4e8e\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u5904\u7406\u65b9\u6cd5\u3002</p> <pre><code>String.raw`Hi\\n${2+3}!`\n// \u5b9e\u9645\u8fd4\u56de \"Hi\\\\n5!\"\uff0c\u663e\u793a\u7684\u662f\u8f6c\u4e49\u540e\u7684\u7ed3\u679c \"Hi\\n5!\"\n\nString.raw`Hi\\u000A!`;\n// \u5b9e\u9645\u8fd4\u56de \"Hi\\\\u000A!\"\uff0c\u663e\u793a\u7684\u662f\u8f6c\u4e49\u540e\u7684\u7ed3\u679c \"Hi\\u000A!\"\n</code></pre> <p>\u5982\u679c\u539f\u5b57\u7b26\u4e32\u7684\u659c\u6760\u5df2\u7ecf\u8f6c\u4e49\uff0c\u90a3\u4e48<code>String.raw()</code>\u4f1a\u8fdb\u884c\u518d\u6b21\u8f6c\u4e49\u3002</p> <pre><code>String.raw`Hi\\\\n`\n// \u8fd4\u56de \"Hi\\\\\\\\n\"\n\nString.raw`Hi\\\\n` === \"Hi\\\\\\\\n\" // true\n</code></pre> <p><code>String.raw()</code>\u65b9\u6cd5\u53ef\u4ee5\u4f5c\u4e3a\u5904\u7406\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u57fa\u672c\u65b9\u6cd5\uff0c\u5b83\u4f1a\u5c06\u6240\u6709\u53d8\u91cf\u66ff\u6362\uff0c\u800c\u4e14\u5bf9\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\uff0c\u65b9\u4fbf\u4e0b\u4e00\u6b65\u4f5c\u4e3a\u5b57\u7b26\u4e32\u6765\u4f7f\u7528\u3002</p> <p><code>String.raw()</code>\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u53ea\u662f\u4e13\u7528\u4e8e\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u6807\u7b7e\u51fd\u6570\u3002\u5982\u679c\u5199\u6210\u6b63\u5e38\u51fd\u6570\u7684\u5f62\u5f0f\uff0c\u5b83\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5e94\u8be5\u662f\u4e00\u4e2a\u5177\u6709<code>raw</code>\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u4e14<code>raw</code>\u5c5e\u6027\u7684\u503c\u5e94\u8be5\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5bf9\u5e94\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u540e\u7684\u503c\u3002</p> <pre><code>// `foo${1 + 2}bar`\n// \u7b49\u540c\u4e8e\nString.raw({ raw: ['foo', 'bar'] }, 1 + 2) // \"foo3bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>String.raw()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684<code>raw</code>\u5c5e\u6027\u7b49\u540c\u4e8e\u539f\u59cb\u7684\u6a21\u677f\u5b57\u7b26\u4e32\u89e3\u6790\u540e\u5f97\u5230\u7684\u6570\u7ec4\u3002</p> <p>\u4f5c\u4e3a\u51fd\u6570\uff0c<code>String.raw()</code>\u7684\u4ee3\u7801\u5b9e\u73b0\u57fa\u672c\u5982\u4e0b\u3002</p> <pre><code>String.raw = function (strings, ...values) {\n  let output = '';\n  let index;\n  for (index = 0; index &lt; values.length; index++) {\n    output += strings.raw[index] + values[index];\n  }\n\n  output += strings.raw[index]\n  return output;\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#codepointat","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1acodePointAt()","text":"<p>JavaScript \u5185\u90e8\uff0c\u5b57\u7b26\u4ee5 UTF-16 \u7684\u683c\u5f0f\u50a8\u5b58\uff0c\u6bcf\u4e2a\u5b57\u7b26\u56fa\u5b9a\u4e3a<code>2</code>\u4e2a\u5b57\u8282\u3002\u5bf9\u4e8e\u90a3\u4e9b\u9700\u8981<code>4</code>\u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5b57\u7b26\uff08Unicode \u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684\u5b57\u7b26\uff09\uff0cJavaScript \u4f1a\u8ba4\u4e3a\u5b83\u4eec\u662f\u4e24\u4e2a\u5b57\u7b26\u3002</p> <pre><code>var s = \"\ud842\udfb7\";\n\ns.length // 2\ns.charAt(0) // ''\ns.charAt(1) // ''\ns.charCodeAt(0) // 55362\ns.charCodeAt(1) // 57271\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6c49\u5b57\u201c\ud842\udfb7\u201d\uff08\u6ce8\u610f\uff0c\u8fd9\u4e2a\u5b57\u4e0d\u662f\u201c\u5409\u7965\u201d\u7684\u201c\u5409\u201d\uff09\u7684\u7801\u70b9\u662f<code>0x20BB7</code>\uff0cUTF-16 \u7f16\u7801\u4e3a<code>0xD842 0xDFB7</code>\uff08\u5341\u8fdb\u5236\u4e3a<code>55362 57271</code>\uff09\uff0c\u9700\u8981<code>4</code>\u4e2a\u5b57\u8282\u50a8\u5b58\u3002\u5bf9\u4e8e\u8fd9\u79cd<code>4</code>\u4e2a\u5b57\u8282\u7684\u5b57\u7b26\uff0cJavaScript \u4e0d\u80fd\u6b63\u786e\u5904\u7406\uff0c\u5b57\u7b26\u4e32\u957f\u5ea6\u4f1a\u8bef\u5224\u4e3a<code>2</code>\uff0c\u800c\u4e14<code>charAt()</code>\u65b9\u6cd5\u65e0\u6cd5\u8bfb\u53d6\u6574\u4e2a\u5b57\u7b26\uff0c<code>charCodeAt()</code>\u65b9\u6cd5\u53ea\u80fd\u5206\u522b\u8fd4\u56de\u524d\u4e24\u4e2a\u5b57\u8282\u548c\u540e\u4e24\u4e2a\u5b57\u8282\u7684\u503c\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86<code>codePointAt()</code>\u65b9\u6cd5\uff0c\u80fd\u591f\u6b63\u786e\u5904\u7406 4 \u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5b57\u7b26\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u7684\u7801\u70b9\u3002</p> <pre><code>let s = '\ud842\udfb7a';\n\ns.codePointAt(0) // 134071\ns.codePointAt(1) // 57271\n\ns.codePointAt(2) // 97\n</code></pre> <p><code>codePointAt()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u662f\u5b57\u7b26\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff08\u4ece 0 \u5f00\u59cb\uff09\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cJavaScript \u5c06\u201c\ud842\udfb7a\u201d\u89c6\u4e3a\u4e09\u4e2a\u5b57\u7b26\uff0ccodePointAt \u65b9\u6cd5\u5728\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0a\uff0c\u6b63\u786e\u5730\u8bc6\u522b\u4e86\u201c\ud842\udfb7\u201d\uff0c\u8fd4\u56de\u4e86\u5b83\u7684\u5341\u8fdb\u5236\u7801\u70b9 134071\uff08\u5373\u5341\u516d\u8fdb\u5236\u7684<code>20BB7</code>\uff09\u3002\u5728\u7b2c\u4e8c\u4e2a\u5b57\u7b26\uff08\u5373\u201c\ud842\udfb7\u201d\u7684\u540e\u4e24\u4e2a\u5b57\u8282\uff09\u548c\u7b2c\u4e09\u4e2a\u5b57\u7b26\u201ca\u201d\u4e0a\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u7684\u7ed3\u679c\u4e0e<code>charCodeAt()</code>\u65b9\u6cd5\u76f8\u540c\u3002</p> <p>\u603b\u4e4b\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u4f1a\u6b63\u786e\u8fd4\u56de 32 \u4f4d\u7684 UTF-16 \u5b57\u7b26\u7684\u7801\u70b9\u3002\u5bf9\u4e8e\u90a3\u4e9b\u4e24\u4e2a\u5b57\u8282\u50a8\u5b58\u7684\u5e38\u89c4\u5b57\u7b26\uff0c\u5b83\u7684\u8fd4\u56de\u7ed3\u679c\u4e0e<code>charCodeAt()</code>\u65b9\u6cd5\u76f8\u540c\u3002</p> <p><code>codePointAt()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u7801\u70b9\u7684\u5341\u8fdb\u5236\u503c\uff0c\u5982\u679c\u60f3\u8981\u5341\u516d\u8fdb\u5236\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>toString()</code>\u65b9\u6cd5\u8f6c\u6362\u4e00\u4e0b\u3002</p> <pre><code>let s = '\ud842\udfb7a';\n\ns.codePointAt(0).toString(16) // \"20bb7\"\ns.codePointAt(2).toString(16) // \"61\"\n</code></pre> <p>\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u4e86\uff0c<code>codePointAt()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4ecd\u7136\u662f\u4e0d\u6b63\u786e\u7684\u3002\u6bd4\u5982\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26<code>a</code>\u5728\u5b57\u7b26\u4e32<code>s</code>\u7684\u6b63\u786e\u4f4d\u7f6e\u5e8f\u53f7\u5e94\u8be5\u662f 1\uff0c\u4f46\u662f\u5fc5\u987b\u5411<code>codePointAt()</code>\u65b9\u6cd5\u4f20\u5165 2\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u529e\u6cd5\u662f\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6b63\u786e\u8bc6\u522b 32 \u4f4d\u7684 UTF-16 \u5b57\u7b26\u3002</p> <pre><code>let s = '\ud842\udfb7a';\nfor (let ch of s) {\n  console.log(ch.codePointAt(0).toString(16));\n}\n// 20bb7\n// 61\n</code></pre> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u4e5f\u53ef\u4ee5\uff0c\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u8fdb\u884c\u5c55\u5f00\u8fd0\u7b97\u3002</p> <pre><code>let arr = [...'\ud842\udfb7a']; // arr.length === 2\narr.forEach(\n  ch =&gt; console.log(ch.codePointAt(0).toString(16))\n);\n// 20bb7\n// 61\n</code></pre> <p><code>codePointAt()</code>\u65b9\u6cd5\u662f\u6d4b\u8bd5\u4e00\u4e2a\u5b57\u7b26\u7531\u4e24\u4e2a\u5b57\u8282\u8fd8\u662f\u7531\u56db\u4e2a\u5b57\u8282\u7ec4\u6210\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u3002</p> <pre><code>function is32Bit(c) {\n  return c.codePointAt(0) &gt; 0xFFFF;\n}\n\nis32Bit(\"\ud842\udfb7\") // true\nis32Bit(\"a\") // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#normalize","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1anormalize()","text":"<p>\u8bb8\u591a\u6b27\u6d32\u8bed\u8a00\u6709\u8bed\u8c03\u7b26\u53f7\u548c\u91cd\u97f3\u7b26\u53f7\u3002\u4e3a\u4e86\u8868\u793a\u5b83\u4eec\uff0cUnicode \u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\u3002\u4e00\u79cd\u662f\u76f4\u63a5\u63d0\u4f9b\u5e26\u91cd\u97f3\u7b26\u53f7\u7684\u5b57\u7b26\uff0c\u6bd4\u5982<code>\u01d1</code>\uff08\\u01D1\uff09\u3002\u53e6\u4e00\u79cd\u662f\u63d0\u4f9b\u5408\u6210\u7b26\u53f7\uff08combining character\uff09\uff0c\u5373\u539f\u5b57\u7b26\u4e0e\u91cd\u97f3\u7b26\u53f7\u7684\u5408\u6210\uff0c\u4e24\u4e2a\u5b57\u7b26\u5408\u6210\u4e00\u4e2a\u5b57\u7b26\uff0c\u6bd4\u5982<code>O</code>\uff08\\u004F\uff09\u548c<code>\u02c7</code>\uff08\\u030C\uff09\u5408\u6210<code>\u01d1</code>\uff08\\u004F\\u030C\uff09\u3002</p> <p>\u8fd9\u4e24\u79cd\u8868\u793a\u65b9\u6cd5\uff0c\u5728\u89c6\u89c9\u548c\u8bed\u4e49\u4e0a\u90fd\u7b49\u4ef7\uff0c\u4f46\u662f JavaScript \u4e0d\u80fd\u8bc6\u522b\u3002</p> <pre><code>'\\u01D1'==='\\u004F\\u030C' //false\n\n'\\u01D1'.length // 1\n'\\u004F\\u030C'.length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0cJavaScript \u5c06\u5408\u6210\u5b57\u7b26\u89c6\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u5bfc\u81f4\u4e24\u79cd\u8868\u793a\u65b9\u6cd5\u4e0d\u76f8\u7b49\u3002</p> <p>ES6 \u63d0\u4f9b\u5b57\u7b26\u4e32\u5b9e\u4f8b\u7684<code>normalize()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u5c06\u5b57\u7b26\u7684\u4e0d\u540c\u8868\u793a\u65b9\u6cd5\u7edf\u4e00\u4e3a\u540c\u6837\u7684\u5f62\u5f0f\uff0c\u8fd9\u79f0\u4e3a Unicode \u6b63\u89c4\u5316\u3002</p> <pre><code>'\\u01D1'.normalize() === '\\u004F\\u030C'.normalize()\n// true\n</code></pre> <p><code>normalize</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u6765\u6307\u5b9a<code>normalize</code>\u7684\u65b9\u5f0f\uff0c\u53c2\u6570\u7684\u56db\u4e2a\u53ef\u9009\u503c\u5982\u4e0b\u3002</p> <ul> <li><code>NFC</code>\uff0c\u9ed8\u8ba4\u53c2\u6570\uff0c\u8868\u793a\u201c\u6807\u51c6\u7b49\u4ef7\u5408\u6210\u201d\uff08Normalization Form Canonical Composition\uff09\uff0c\u8fd4\u56de\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u7684\u5408\u6210\u5b57\u7b26\u3002\u6240\u8c13\u201c\u6807\u51c6\u7b49\u4ef7\u201d\u6307\u7684\u662f\u89c6\u89c9\u548c\u8bed\u4e49\u4e0a\u7684\u7b49\u4ef7\u3002</li> <li><code>NFD</code>\uff0c\u8868\u793a\u201c\u6807\u51c6\u7b49\u4ef7\u5206\u89e3\u201d\uff08Normalization Form Canonical Decomposition\uff09\uff0c\u5373\u5728\u6807\u51c6\u7b49\u4ef7\u7684\u524d\u63d0\u4e0b\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u5206\u89e3\u7684\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u3002</li> <li><code>NFKC</code>\uff0c\u8868\u793a\u201c\u517c\u5bb9\u7b49\u4ef7\u5408\u6210\u201d\uff08Normalization Form Compatibility Composition\uff09\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u3002\u6240\u8c13\u201c\u517c\u5bb9\u7b49\u4ef7\u201d\u6307\u7684\u662f\u8bed\u4e49\u4e0a\u5b58\u5728\u7b49\u4ef7\uff0c\u4f46\u89c6\u89c9\u4e0a\u4e0d\u7b49\u4ef7\uff0c\u6bd4\u5982\u201c\u56cd\u201d\u548c\u201c\u559c\u559c\u201d\u3002\uff08\u8fd9\u53ea\u662f\u7528\u6765\u4e3e\u4f8b\uff0c<code>normalize</code>\u65b9\u6cd5\u4e0d\u80fd\u8bc6\u522b\u4e2d\u6587\u3002\uff09</li> <li><code>NFKD</code>\uff0c\u8868\u793a\u201c\u517c\u5bb9\u7b49\u4ef7\u5206\u89e3\u201d\uff08Normalization Form Compatibility Decomposition\uff09\uff0c\u5373\u5728\u517c\u5bb9\u7b49\u4ef7\u7684\u524d\u63d0\u4e0b\uff0c\u8fd4\u56de\u5408\u6210\u5b57\u7b26\u5206\u89e3\u7684\u591a\u4e2a\u7b80\u5355\u5b57\u7b26\u3002</li> </ul> <pre><code>'\\u004F\\u030C'.normalize('NFC').length // 1\n'\\u004F\\u030C'.normalize('NFD').length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>NFC</code>\u53c2\u6570\u8fd4\u56de\u5b57\u7b26\u7684\u5408\u6210\u5f62\u5f0f\uff0c<code>NFD</code>\u53c2\u6570\u8fd4\u56de\u5b57\u7b26\u7684\u5206\u89e3\u5f62\u5f0f\u3002</p> <p>\u4e0d\u8fc7\uff0c<code>normalize</code>\u65b9\u6cd5\u76ee\u524d\u4e0d\u80fd\u8bc6\u522b\u4e09\u4e2a\u6216\u4e09\u4e2a\u4ee5\u4e0a\u5b57\u7b26\u7684\u5408\u6210\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd8\u662f\u53ea\u80fd\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u901a\u8fc7 Unicode \u7f16\u53f7\u533a\u95f4\u5224\u65ad\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#includes-startswith-endswith","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aincludes(), startsWith(), endsWith()","text":"<p>\u4f20\u7edf\u4e0a\uff0cJavaScript \u53ea\u6709<code>indexOf</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u6765\u786e\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u5305\u542b\u5728\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e2d\u3002ES6 \u53c8\u63d0\u4f9b\u4e86\u4e09\u79cd\u65b0\u65b9\u6cd5\u3002</p> <ul> <li>includes()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u627e\u5230\u4e86\u53c2\u6570\u5b57\u7b26\u4e32\u3002</li> <li>startsWith()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u53c2\u6570\u5b57\u7b26\u4e32\u662f\u5426\u5728\u539f\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u3002</li> <li>endsWith()\uff1a\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u8868\u793a\u53c2\u6570\u5b57\u7b26\u4e32\u662f\u5426\u5728\u539f\u5b57\u7b26\u4e32\u7684\u5c3e\u90e8\u3002</li> </ul> <pre><code>let s = 'Hello world!';\n\ns.startsWith('Hello') // true\ns.endsWith('!') // true\ns.includes('o') // true\n</code></pre> <p>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u90fd\u652f\u6301\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u5f00\u59cb\u641c\u7d22\u7684\u4f4d\u7f6e\u3002</p> <pre><code>let s = 'Hello world!';\n\ns.startsWith('world', 6) // true\ns.endsWith('Hello', 5) // true\ns.includes('Hello', 6) // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>n</code>\u65f6\uff0c<code>endsWith</code>\u7684\u884c\u4e3a\u4e0e\u5176\u4ed6\u4e24\u4e2a\u65b9\u6cd5\u6709\u6240\u4e0d\u540c\u3002\u5b83\u9488\u5bf9\u524d<code>n</code>\u4e2a\u5b57\u7b26\uff0c\u800c\u5176\u4ed6\u4e24\u4e2a\u65b9\u6cd5\u9488\u5bf9\u4ece\u7b2c<code>n</code>\u4e2a\u4f4d\u7f6e\u76f4\u5230\u5b57\u7b26\u4e32\u7ed3\u675f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#repeat","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1arepeat()","text":"<p><code>repeat</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u5c06\u539f\u5b57\u7b26\u4e32\u91cd\u590d<code>n</code>\u6b21\u3002</p> <pre><code>'x'.repeat(3) // \"xxx\"\n'hello'.repeat(2) // \"hellohello\"\n'na'.repeat(0) // \"\"\n</code></pre> <p>\u53c2\u6570\u5982\u679c\u662f\u5c0f\u6570\uff0c\u4f1a\u88ab\u53d6\u6574\u3002</p> <pre><code>'na'.repeat(2.9) // \"nana\"\n</code></pre> <p>\u5982\u679c<code>repeat</code>\u7684\u53c2\u6570\u662f\u8d1f\u6570\u6216\u8005<code>Infinity</code>\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>'na'.repeat(Infinity)\n// RangeError\n'na'.repeat(-1)\n// RangeError\n</code></pre> <p>\u4f46\u662f\uff0c\u5982\u679c\u53c2\u6570\u662f 0 \u5230-1 \u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u5219\u7b49\u540c\u4e8e 0\uff0c\u8fd9\u662f\u56e0\u4e3a\u4f1a\u5148\u8fdb\u884c\u53d6\u6574\u8fd0\u7b97\u30020 \u5230-1 \u4e4b\u95f4\u7684\u5c0f\u6570\uff0c\u53d6\u6574\u4ee5\u540e\u7b49\u4e8e<code>-0</code>\uff0c<code>repeat</code>\u89c6\u540c\u4e3a 0\u3002</p> <pre><code>'na'.repeat(-0.9) // \"\"\n</code></pre> <p>\u53c2\u6570<code>NaN</code>\u7b49\u540c\u4e8e 0\u3002</p> <pre><code>'na'.repeat(NaN) // \"\"\n</code></pre> <p>\u5982\u679c<code>repeat</code>\u7684\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u5219\u4f1a\u5148\u8f6c\u6362\u6210\u6570\u5b57\u3002</p> <pre><code>'na'.repeat('na') // \"\"\n'na'.repeat('3') // \"nanana\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#padstartpadend","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1apadStart()\uff0cpadEnd()","text":"<p>ES2017 \u5f15\u5165\u4e86\u5b57\u7b26\u4e32\u8865\u5168\u957f\u5ea6\u7684\u529f\u80fd\u3002\u5982\u679c\u67d0\u4e2a\u5b57\u7b26\u4e32\u4e0d\u591f\u6307\u5b9a\u957f\u5ea6\uff0c\u4f1a\u5728\u5934\u90e8\u6216\u5c3e\u90e8\u8865\u5168\u3002<code>padStart()</code>\u7528\u4e8e\u5934\u90e8\u8865\u5168\uff0c<code>padEnd()</code>\u7528\u4e8e\u5c3e\u90e8\u8865\u5168\u3002</p> <pre><code>'x'.padStart(5, 'ab') // 'ababx'\n'x'.padStart(4, 'ab') // 'abax'\n\n'x'.padEnd(5, 'ab') // 'xabab'\n'x'.padEnd(4, 'ab') // 'xaba'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>padStart()</code>\u548c<code>padEnd()</code>\u4e00\u5171\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5b57\u7b26\u4e32\u8865\u5168\u751f\u6548\u7684\u6700\u5927\u957f\u5ea6\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7528\u6765\u8865\u5168\u7684\u5b57\u7b26\u4e32\u3002</p> <p>\u5982\u679c\u539f\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u7b49\u4e8e\u6216\u5927\u4e8e\u6700\u5927\u957f\u5ea6\uff0c\u5219\u5b57\u7b26\u4e32\u8865\u5168\u4e0d\u751f\u6548\uff0c\u8fd4\u56de\u539f\u5b57\u7b26\u4e32\u3002</p> <pre><code>'xxx'.padStart(2, 'ab') // 'xxx'\n'xxx'.padEnd(2, 'ab') // 'xxx'\n</code></pre> <p>\u5982\u679c\u7528\u6765\u8865\u5168\u7684\u5b57\u7b26\u4e32\u4e0e\u539f\u5b57\u7b26\u4e32\uff0c\u4e24\u8005\u7684\u957f\u5ea6\u4e4b\u548c\u8d85\u8fc7\u4e86\u6700\u5927\u957f\u5ea6\uff0c\u5219\u4f1a\u622a\u53bb\u8d85\u51fa\u4f4d\u6570\u7684\u8865\u5168\u5b57\u7b26\u4e32\u3002</p> <pre><code>'abc'.padStart(10, '0123456789')\n// '0123456abc'\n</code></pre> <p>\u5982\u679c\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7a7a\u683c\u8865\u5168\u957f\u5ea6\u3002</p> <pre><code>'x'.padStart(4) // '   x'\n'x'.padEnd(4) // 'x   '\n</code></pre> <p><code>padStart()</code>\u7684\u5e38\u89c1\u7528\u9014\u662f\u4e3a\u6570\u503c\u8865\u5168\u6307\u5b9a\u4f4d\u6570\u3002\u4e0b\u9762\u4ee3\u7801\u751f\u6210 10 \u4f4d\u7684\u6570\u503c\u5b57\u7b26\u4e32\u3002</p> <pre><code>'1'.padStart(10, '0') // \"0000000001\"\n'12'.padStart(10, '0') // \"0000000012\"\n'123456'.padStart(10, '0') // \"0000123456\"\n</code></pre> <p>\u53e6\u4e00\u4e2a\u7528\u9014\u662f\u63d0\u793a\u5b57\u7b26\u4e32\u683c\u5f0f\u3002</p> <pre><code>'12'.padStart(10, 'YYYY-MM-DD') // \"YYYY-MM-12\"\n'09-12'.padStart(10, 'YYYY-MM-DD') // \"YYYY-09-12\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#trimstarttrimend","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1atrimStart()\uff0ctrimEnd()","text":"<p>ES2019 \u5bf9\u5b57\u7b26\u4e32\u5b9e\u4f8b\u65b0\u589e\u4e86<code>trimStart()</code>\u548c<code>trimEnd()</code>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002\u5b83\u4eec\u7684\u884c\u4e3a\u4e0e<code>trim()</code>\u4e00\u81f4\uff0c<code>trimStart()</code>\u6d88\u9664\u5b57\u7b26\u4e32\u5934\u90e8\u7684\u7a7a\u683c\uff0c<code>trimEnd()</code>\u6d88\u9664\u5c3e\u90e8\u7684\u7a7a\u683c\u3002\u5b83\u4eec\u8fd4\u56de\u7684\u90fd\u662f\u65b0\u5b57\u7b26\u4e32\uff0c\u4e0d\u4f1a\u4fee\u6539\u539f\u59cb\u5b57\u7b26\u4e32\u3002</p> <pre><code>const s = '  abc  ';\n\ns.trim() // \"abc\"\ns.trimStart() // \"abc  \"\ns.trimEnd() // \"  abc\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>trimStart()</code>\u53ea\u6d88\u9664\u5934\u90e8\u7684\u7a7a\u683c\uff0c\u4fdd\u7559\u5c3e\u90e8\u7684\u7a7a\u683c\u3002<code>trimEnd()</code>\u4e5f\u662f\u7c7b\u4f3c\u884c\u4e3a\u3002</p> <p>\u9664\u4e86\u7a7a\u683c\u952e\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u5bf9\u5b57\u7b26\u4e32\u5934\u90e8\uff08\u6216\u5c3e\u90e8\uff09\u7684 tab \u952e\u3001\u6362\u884c\u7b26\u7b49\u4e0d\u53ef\u89c1\u7684\u7a7a\u767d\u7b26\u53f7\u4e5f\u6709\u6548\u3002</p> <p>\u6d4f\u89c8\u5668\u8fd8\u90e8\u7f72\u4e86\u989d\u5916\u7684\u4e24\u4e2a\u65b9\u6cd5\uff0c<code>trimLeft()</code>\u662f<code>trimStart()</code>\u7684\u522b\u540d\uff0c<code>trimRight()</code>\u662f<code>trimEnd()</code>\u7684\u522b\u540d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#matchall","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1amatchAll()","text":"<p><code>matchAll()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5728\u5f53\u524d\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5339\u914d\uff0c\u8be6\u89c1\u300a\u6b63\u5219\u7684\u6269\u5c55\u300b\u7684\u4e00\u7ae0\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#replaceall","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1areplaceAll()","text":"<p>\u5386\u53f2\u4e0a\uff0c\u5b57\u7b26\u4e32\u7684\u5b9e\u4f8b\u65b9\u6cd5<code>replace()</code>\u53ea\u80fd\u66ff\u6362\u7b2c\u4e00\u4e2a\u5339\u914d\u3002</p> <pre><code>'aabbcc'.replace('b', '_')\n// 'aa_bcc'\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>replace()</code>\u53ea\u5c06\u7b2c\u4e00\u4e2a<code>b</code>\u66ff\u6362\u6210\u4e86\u4e0b\u5212\u7ebf\u3002</p> <p>\u5982\u679c\u8981\u66ff\u6362\u6240\u6709\u7684\u5339\u914d\uff0c\u4e0d\u5f97\u4e0d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u7684<code>g</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>'aabbcc'.replace(/b/g, '_')\n// 'aa__cc'\n</code></pre> <p>\u6b63\u5219\u8868\u8fbe\u5f0f\u6bd5\u7adf\u4e0d\u662f\u90a3\u4e48\u65b9\u4fbf\u548c\u76f4\u89c2\uff0cES2021 \u5f15\u5165\u4e86<code>replaceAll()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u66ff\u6362\u6240\u6709\u5339\u914d\u3002</p> <pre><code>'aabbcc'.replaceAll('b', '_')\n// 'aa__cc'\n</code></pre> <p>\u5b83\u7684\u7528\u6cd5\u4e0e<code>replace()</code>\u76f8\u540c\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u5b57\u7b26\u4e32\uff0c\u4e0d\u4f1a\u6539\u53d8\u539f\u5b57\u7b26\u4e32\u3002</p> <pre><code>String.prototype.replaceAll(searchValue, replacement)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>searchValue</code>\u662f\u641c\u7d22\u6a21\u5f0f\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5168\u5c40\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff08\u5e26\u6709<code>g</code>\u4fee\u9970\u7b26\uff09\u3002</p> <p>\u5982\u679c<code>searchValue</code>\u662f\u4e00\u4e2a\u4e0d\u5e26\u6709<code>g</code>\u4fee\u9970\u7b26\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c<code>replaceAll()</code>\u4f1a\u62a5\u9519\u3002\u8fd9\u4e00\u70b9\u8ddf<code>replace()</code>\u4e0d\u540c\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\n'aabbcc'.replace(/b/, '_')\n\n// \u62a5\u9519\n'aabbcc'.replaceAll(/b/, '_')\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>/b/</code>\u4e0d\u5e26\u6709<code>g</code>\u4fee\u9970\u7b26\uff0c\u4f1a\u5bfc\u81f4<code>replaceAll()</code>\u62a5\u9519\u3002</p> <p><code>replaceAll()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>replacement</code>\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u66ff\u6362\u7684\u6587\u672c\uff0c\u5176\u4e2d\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\u4e32\u3002</p> <ul> <li><code>$&amp;</code>\uff1a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u3002</li> <li><code>$`</code>\uff1a\u5339\u914d\u7ed3\u679c\u524d\u9762\u7684\u6587\u672c\u3002</li> <li><code>$'</code>\uff1a\u5339\u914d\u7ed3\u679c\u540e\u9762\u7684\u6587\u672c\u3002</li> <li><code>$n</code>\uff1a\u5339\u914d\u6210\u529f\u7684\u7b2c<code>n</code>\u7ec4\u5185\u5bb9\uff0c<code>n</code>\u662f\u4ece1\u5f00\u59cb\u7684\u81ea\u7136\u6570\u3002\u8fd9\u4e2a\u53c2\u6570\u751f\u6548\u7684\u524d\u63d0\u662f\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</li> <li><code>$$</code>\uff1a\u6307\u4ee3\u7f8e\u5143\u7b26\u53f7<code>$</code>\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>// $&amp; \u8868\u793a\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u5373`b`\u672c\u8eab\n// \u6240\u4ee5\u8fd4\u56de\u7ed3\u679c\u4e0e\u539f\u5b57\u7b26\u4e32\u4e00\u81f4\n'abbc'.replaceAll('b', '$&amp;')\n// 'abbc'\n\n// $` \u8868\u793a\u5339\u914d\u7ed3\u679c\u4e4b\u524d\u7684\u5b57\u7b26\u4e32\n// \u5bf9\u4e8e\u7b2c\u4e00\u4e2a`b`\uff0c$` \u6307\u4ee3`a`\n// \u5bf9\u4e8e\u7b2c\u4e8c\u4e2a`b`\uff0c$` \u6307\u4ee3`ab`\n'abbc'.replaceAll('b', '$`')\n// 'aaabc'\n\n// $' \u8868\u793a\u5339\u914d\u7ed3\u679c\u4e4b\u540e\u7684\u5b57\u7b26\u4e32\n// \u5bf9\u4e8e\u7b2c\u4e00\u4e2a`b`\uff0c$' \u6307\u4ee3`bc`\n// \u5bf9\u4e8e\u7b2c\u4e8c\u4e2a`b`\uff0c$' \u6307\u4ee3`c`\n'abbc'.replaceAll('b', `$'`)\n// 'abccc'\n\n// $1 \u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b2c\u4e00\u4e2a\u7ec4\u5339\u914d\uff0c\u6307\u4ee3`ab`\n// $2 \u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b2c\u4e8c\u4e2a\u7ec4\u5339\u914d\uff0c\u6307\u4ee3`bc`\n'abbc'.replaceAll(/(ab)(bc)/g, '$2$1')\n// 'bcab'\n\n// $$ \u6307\u4ee3 $\n'abc'.replaceAll('b', '$$')\n// 'a$c'\n</code></pre> <p><code>replaceAll()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>replacement</code>\u9664\u4e86\u4e3a\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c06\u66ff\u6362\u6389\u7b2c\u4e00\u4e2a\u53c2\u6570<code>searchValue</code>\u5339\u914d\u7684\u6587\u672c\u3002</p> <pre><code>'aabbcc'.replaceAll('b', () =&gt; '_')\n// 'aa__cc'\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>replaceAll()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f1a\u66ff\u6362\u6389\u6240\u6709<code>b</code>\u7684\u5339\u914d\u3002</p> <p>\u8fd9\u4e2a\u66ff\u6362\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6355\u6349\u5230\u7684\u5339\u914d\u5185\u5bb9\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6355\u6349\u5230\u662f\u7ec4\u5339\u914d\uff08\u6709\u591a\u5c11\u4e2a\u7ec4\u5339\u914d\uff0c\u5c31\u6709\u591a\u5c11\u4e2a\u5bf9\u5e94\u7684\u53c2\u6570\uff09\u3002\u6b64\u5916\uff0c\u6700\u540e\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u4e24\u4e2a\u53c2\u6570\uff0c\u5012\u6570\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6355\u6349\u5230\u7684\u5185\u5bb9\u5728\u6574\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u662f\u539f\u5b57\u7b26\u4e32\u3002</p> <pre><code>const str = '123abc456';\nconst regex = /(\\d+)([a-z]+)(\\d+)/g;\n\nfunction replacer(match, p1, p2, p3, offset, string) {\n  return [p1, p2, p3].join(' - ');\n}\n\nstr.replaceAll(regex, replacer)\n// 123 - abc - 456\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4e09\u4e2a\u7ec4\u5339\u914d\uff0c\u6240\u4ee5<code>replacer()</code>\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>match</code>\u662f\u6355\u6349\u5230\u7684\u5339\u914d\u5185\u5bb9\uff08\u5373\u5b57\u7b26\u4e32<code>123abc456</code>\uff09\uff0c\u540e\u9762\u4e09\u4e2a\u53c2\u6570<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u5219\u4f9d\u6b21\u4e3a\u4e09\u4e2a\u7ec4\u5339\u914d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/05-string-methods/#at","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aat()","text":"<p><code>at()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u53c2\u6570\u6307\u5b9a\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u652f\u6301\u8d1f\u7d22\u5f15\uff08\u5373\u5012\u6570\u7684\u4f4d\u7f6e\uff09\u3002</p> <pre><code>const str = 'hello';\nstr.at(1) // \"e\"\nstr.at(-1) // \"o\"\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4f4d\u7f6e\u8d85\u51fa\u4e86\u5b57\u7b26\u4e32\u8303\u56f4\uff0c<code>at()</code>\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u8be5\u65b9\u6cd5\u6765\u81ea\u6570\u7ec4\u6dfb\u52a0\u7684<code>at()</code>\u65b9\u6cd5\uff0c\u76ee\u524d\u8fd8\u662f\u4e00\u4e2a\u7b2c\u4e09\u9636\u6bb5\u7684\u63d0\u6848\uff0c\u53ef\u4ee5\u53c2\u8003\u300a\u6570\u7ec4\u300b\u4e00\u7ae0\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/","title":"06-\u6b63\u5219\u7684\u6269\u5c55","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#regexp","title":"RegExp \u6784\u9020\u51fd\u6570","text":"<p>\u5728 ES5 \u4e2d\uff0c<code>RegExp</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u6709\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\uff0c\u53c2\u6570\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\uff08flag\uff09\u3002</p> <pre><code>var regex = new RegExp('xyz', 'i');\n// \u7b49\u4ef7\u4e8e\nvar regex = /xyz/i;\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\uff0c\u53c2\u6570\u662f\u4e00\u4e2a\u6b63\u5219\u8868\u793a\u5f0f\uff0c\u8fd9\u65f6\u4f1a\u8fd4\u56de\u4e00\u4e2a\u539f\u6709\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u62f7\u8d1d\u3002</p> <pre><code>var regex = new RegExp(/xyz/i);\n// \u7b49\u4ef7\u4e8e\nvar regex = /xyz/i;\n</code></pre> <p>\u4f46\u662f\uff0cES5 \u4e0d\u5141\u8bb8\u6b64\u65f6\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6dfb\u52a0\u4fee\u9970\u7b26\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var regex = new RegExp(/xyz/, 'i');\n// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another\n</code></pre> <p>ES6 \u6539\u53d8\u4e86\u8fd9\u79cd\u884c\u4e3a\u3002\u5982\u679c<code>RegExp</code>\u6784\u9020\u51fd\u6570\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6b63\u5219\u5bf9\u8c61\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u4fee\u9970\u7b26\u3002\u800c\u4e14\uff0c\u8fd4\u56de\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u4f1a\u5ffd\u7565\u539f\u6709\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\uff0c\u53ea\u4f7f\u7528\u65b0\u6307\u5b9a\u7684\u4fee\u9970\u7b26\u3002</p> <pre><code>new RegExp(/abc/ig, 'i').flags\n// \"i\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u6709\u6b63\u5219\u5bf9\u8c61\u7684\u4fee\u9970\u7b26\u662f<code>ig</code>\uff0c\u5b83\u4f1a\u88ab\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>i</code>\u8986\u76d6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_1","title":"\u5b57\u7b26\u4e32\u7684\u6b63\u5219\u65b9\u6cd5","text":"<p>ES6 \u51fa\u73b0\u4e4b\u524d\uff0c\u5b57\u7b26\u4e32\u5bf9\u8c61\u5171\u6709 4 \u4e2a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a<code>match()</code>\u3001<code>replace()</code>\u3001<code>search()</code>\u548c<code>split()</code>\u3002</p> <p>ES6 \u5c06\u8fd9 4 \u4e2a\u65b9\u6cd5\uff0c\u5728\u8bed\u8a00\u5185\u90e8\u5168\u90e8\u8c03\u7528<code>RegExp</code>\u7684\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u4ece\u800c\u505a\u5230\u6240\u6709\u4e0e\u6b63\u5219\u76f8\u5173\u7684\u65b9\u6cd5\uff0c\u5168\u90fd\u5b9a\u4e49\u5728<code>RegExp</code>\u5bf9\u8c61\u4e0a\u3002</p> <ul> <li><code>String.prototype.match</code> \u8c03\u7528 <code>RegExp.prototype[Symbol.match]</code></li> <li><code>String.prototype.replace</code> \u8c03\u7528 <code>RegExp.prototype[Symbol.replace]</code></li> <li><code>String.prototype.search</code> \u8c03\u7528 <code>RegExp.prototype[Symbol.search]</code></li> <li><code>String.prototype.split</code> \u8c03\u7528 <code>RegExp.prototype[Symbol.split]</code></li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#u","title":"u \u4fee\u9970\u7b26","text":"<p>ES6 \u5bf9\u6b63\u5219\u8868\u8fbe\u5f0f\u6dfb\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0c\u542b\u4e49\u4e3a\u201cUnicode \u6a21\u5f0f\u201d\uff0c\u7528\u6765\u6b63\u786e\u5904\u7406\u5927\u4e8e<code>\\uFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f1a\u6b63\u786e\u5904\u7406\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\u3002</p> <pre><code>/^\\uD83D/u.test('\\uD83D\\uDC2A') // false\n/^\\uD83D/.test('\\uD83D\\uDC2A') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>\\uD83D\\uDC2A</code>\u662f\u4e00\u4e2a\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\uff0c\u4ee3\u8868\u4e00\u4e2a\u5b57\u7b26\u3002\u4f46\u662f\uff0cES5 \u4e0d\u652f\u6301\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u7f16\u7801\uff0c\u4f1a\u5c06\u5176\u8bc6\u522b\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u5bfc\u81f4\u7b2c\u4e8c\u884c\u4ee3\u7801\u7ed3\u679c\u4e3a<code>true</code>\u3002\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\u4ee5\u540e\uff0cES6 \u5c31\u4f1a\u8bc6\u522b\u5176\u4e3a\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u4ee3\u7801\u7ed3\u679c\u4e3a<code>false</code>\u3002</p> <p>\u4e00\u65e6\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u53f7\uff0c\u5c31\u4f1a\u4fee\u6539\u4e0b\u9762\u8fd9\u4e9b\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u884c\u4e3a\u3002</p> <p>\uff081\uff09\u70b9\u5b57\u7b26</p> <p>\u70b9\uff08<code>.</code>\uff09\u5b57\u7b26\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\uff0c\u542b\u4e49\u662f\u9664\u4e86\u6362\u884c\u7b26\u4ee5\u5916\u7684\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\u3002\u5bf9\u4e8e\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\uff0c\u70b9\u5b57\u7b26\u4e0d\u80fd\u8bc6\u522b\uff0c\u5fc5\u987b\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>var s = '\ud842\udfb7';\n\n/^.$/.test(s) // false\n/^.$/u.test(s) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u4e0d\u6dfb\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u5c31\u4f1a\u8ba4\u4e3a\u5b57\u7b26\u4e32\u4e3a\u4e24\u4e2a\u5b57\u7b26\uff0c\u4ece\u800c\u5339\u914d\u5931\u8d25\u3002</p> <p>\uff082\uff09Unicode \u5b57\u7b26\u8868\u793a\u6cd5</p> <p>ES6 \u65b0\u589e\u4e86\u4f7f\u7528\u5927\u62ec\u53f7\u8868\u793a Unicode \u5b57\u7b26\uff0c\u8fd9\u79cd\u8868\u793a\u6cd5\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u5fc5\u987b\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\uff0c\u624d\u80fd\u8bc6\u522b\u5f53\u4e2d\u7684\u5927\u62ec\u53f7\uff0c\u5426\u5219\u4f1a\u88ab\u89e3\u8bfb\u4e3a\u91cf\u8bcd\u3002</p> <pre><code>/\\u{61}/.test('a') // false\n/\\u{61}/u.test('a') // true\n/\\u{20BB7}/u.test('\ud842\udfb7') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u65e0\u6cd5\u8bc6\u522b<code>\\u{61}</code>\u8fd9\u79cd\u8868\u793a\u6cd5\uff0c\u53ea\u4f1a\u8ba4\u4e3a\u8fd9\u5339\u914d 61 \u4e2a\u8fde\u7eed\u7684<code>u</code>\u3002</p> <p>\uff083\uff09\u91cf\u8bcd</p> <p>\u4f7f\u7528<code>u</code>\u4fee\u9970\u7b26\u540e\uff0c\u6240\u6709\u91cf\u8bcd\u90fd\u4f1a\u6b63\u786e\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>/a{2}/.test('aa') // true\n/a{2}/u.test('aa') // true\n/\ud842\udfb7{2}/.test('\ud842\udfb7\ud842\udfb7') // false\n/\ud842\udfb7{2}/u.test('\ud842\udfb7\ud842\udfb7') // true\n</code></pre> <p>\uff084\uff09\u9884\u5b9a\u4e49\u6a21\u5f0f</p> <p><code>u</code>\u4fee\u9970\u7b26\u4e5f\u5f71\u54cd\u5230\u9884\u5b9a\u4e49\u6a21\u5f0f\uff0c\u80fd\u5426\u6b63\u786e\u8bc6\u522b\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>/^\\S$/.test('\ud842\udfb7') // false\n/^\\S$/u.test('\ud842\udfb7') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>\\S</code>\u662f\u9884\u5b9a\u4e49\u6a21\u5f0f\uff0c\u5339\u914d\u6240\u6709\u975e\u7a7a\u767d\u5b57\u7b26\u3002\u53ea\u6709\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0c\u5b83\u624d\u80fd\u6b63\u786e\u5339\u914d\u7801\u70b9\u5927\u4e8e<code>0xFFFF</code>\u7684 Unicode \u5b57\u7b26\u3002</p> <p>\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a\u6b63\u786e\u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u51fd\u6570\u3002</p> <pre><code>function codePointLength(text) {\n  var result = text.match(/[\\s\\S]/gu);\n  return result ? result.length : 0;\n}\n\nvar s = '\ud842\udfb7\ud842\udfb7';\n\ns.length // 4\ncodePointLength(s) // 2\n</code></pre> <p>\uff085\uff09i \u4fee\u9970\u7b26</p> <p>\u6709\u4e9b Unicode \u5b57\u7b26\u7684\u7f16\u7801\u4e0d\u540c\uff0c\u4f46\u662f\u5b57\u578b\u5f88\u76f8\u8fd1\uff0c\u6bd4\u5982\uff0c<code>\\u004B</code>\u4e0e<code>\\u212A</code>\u90fd\u662f\u5927\u5199\u7684<code>K</code>\u3002</p> <pre><code>/[a-z]/i.test('\\u212A') // false\n/[a-z]/iu.test('\\u212A') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u5c31\u65e0\u6cd5\u8bc6\u522b\u975e\u89c4\u8303\u7684<code>K</code>\u5b57\u7b26\u3002</p> <p>\uff086\uff09\u8f6c\u4e49</p> <p>\u6ca1\u6709<code>u</code>\u4fee\u9970\u7b26\u7684\u60c5\u51b5\u4e0b\uff0c\u6b63\u5219\u4e2d\u6ca1\u6709\u5b9a\u4e49\u7684\u8f6c\u4e49\uff08\u5982\u9017\u53f7\u7684\u8f6c\u4e49<code>\\,</code>\uff09\u65e0\u6548\uff0c\u800c\u5728<code>u</code>\u6a21\u5f0f\u4f1a\u62a5\u9519\u3002</p> <pre><code>/\\,/ // /\\,/\n/\\,/u // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6ca1\u6709<code>u</code>\u4fee\u9970\u7b26\u65f6\uff0c\u9017\u53f7\u524d\u9762\u7684\u53cd\u659c\u6760\u662f\u65e0\u6548\u7684\uff0c\u52a0\u4e86<code>u</code>\u4fee\u9970\u7b26\u5c31\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#regexpprototypeunicode","title":"RegExp.prototype.unicode \u5c5e\u6027","text":"<p>\u6b63\u5219\u5b9e\u4f8b\u5bf9\u8c61\u65b0\u589e<code>unicode</code>\u5c5e\u6027\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u4e86<code>u</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>const r1 = /hello/;\nconst r2 = /hello/u;\n\nr1.unicode // false\nr2.unicode // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u5426\u8bbe\u7f6e\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0c\u53ef\u4ee5\u4ece<code>unicode</code>\u5c5e\u6027\u770b\u51fa\u6765\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#y","title":"y \u4fee\u9970\u7b26","text":"<p>\u9664\u4e86<code>u</code>\u4fee\u9970\u7b26\uff0cES6 \u8fd8\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u6dfb\u52a0\u4e86<code>y</code>\u4fee\u9970\u7b26\uff0c\u53eb\u505a\u201c\u7c98\u8fde\u201d\uff08sticky\uff09\u4fee\u9970\u7b26\u3002</p> <p><code>y</code>\u4fee\u9970\u7b26\u7684\u4f5c\u7528\u4e0e<code>g</code>\u4fee\u9970\u7b26\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5168\u5c40\u5339\u914d\uff0c\u540e\u4e00\u6b21\u5339\u914d\u90fd\u4ece\u4e0a\u4e00\u6b21\u5339\u914d\u6210\u529f\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u3002\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c<code>g</code>\u4fee\u9970\u7b26\u53ea\u8981\u5269\u4f59\u4f4d\u7f6e\u4e2d\u5b58\u5728\u5339\u914d\u5c31\u53ef\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u786e\u4fdd\u5339\u914d\u5fc5\u987b\u4ece\u5269\u4f59\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\uff0c\u8fd9\u4e5f\u5c31\u662f\u201c\u7c98\u8fde\u201d\u7684\u6db5\u4e49\u3002</p> <pre><code>var s = 'aaa_aa_a';\nvar r1 = /a+/g;\nvar r2 = /a+/y;\n\nr1.exec(s) // [\"aaa\"]\nr2.exec(s) // [\"aaa\"]\n\nr1.exec(s) // [\"aa\"]\nr2.exec(s) // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e24\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4e00\u4e2a\u4f7f\u7528<code>g</code>\u4fee\u9970\u7b26\uff0c\u53e6\u4e00\u4e2a\u4f7f\u7528<code>y</code>\u4fee\u9970\u7b26\u3002\u8fd9\u4e24\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5404\u6267\u884c\u4e86\u4e24\u6b21\uff0c\u7b2c\u4e00\u6b21\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e24\u8005\u884c\u4e3a\u76f8\u540c\uff0c\u5269\u4f59\u5b57\u7b26\u4e32\u90fd\u662f<code>_aa_a</code>\u3002\u7531\u4e8e<code>g</code>\u4fee\u9970\u6ca1\u6709\u4f4d\u7f6e\u8981\u6c42\uff0c\u6240\u4ee5\u7b2c\u4e8c\u6b21\u6267\u884c\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u8981\u6c42\u5339\u914d\u5fc5\u987b\u4ece\u5934\u90e8\u5f00\u59cb\uff0c\u6240\u4ee5\u8fd4\u56de<code>null</code>\u3002</p> <p>\u5982\u679c\u6539\u4e00\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4fdd\u8bc1\u6bcf\u6b21\u90fd\u80fd\u5934\u90e8\u5339\u914d\uff0c<code>y</code>\u4fee\u9970\u7b26\u5c31\u4f1a\u8fd4\u56de\u7ed3\u679c\u4e86\u3002</p> <pre><code>var s = 'aaa_aa_a';\nvar r = /a+_/y;\n\nr.exec(s) // [\"aaa_\"]\nr.exec(s) // [\"aa_\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6bcf\u6b21\u5339\u914d\uff0c\u90fd\u662f\u4ece\u5269\u4f59\u5b57\u7b26\u4e32\u7684\u5934\u90e8\u5f00\u59cb\u3002</p> <p>\u4f7f\u7528<code>lastIndex</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u8bf4\u660e<code>y</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>const REGEX = /a/g;\n\n// \u6307\u5b9a\u4ece2\u53f7\u4f4d\u7f6e\uff08y\uff09\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 2;\n\n// \u5339\u914d\u6210\u529f\nconst match = REGEX.exec('xaya');\n\n// \u57283\u53f7\u4f4d\u7f6e\u5339\u914d\u6210\u529f\nmatch.index // 3\n\n// \u4e0b\u4e00\u6b21\u5339\u914d\u4ece4\u53f7\u4f4d\u5f00\u59cb\nREGEX.lastIndex // 4\n\n// 4\u53f7\u4f4d\u5f00\u59cb\u5339\u914d\u5931\u8d25\nREGEX.exec('xaya') // null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>lastIndex</code>\u5c5e\u6027\u6307\u5b9a\u6bcf\u6b21\u641c\u7d22\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c<code>g</code>\u4fee\u9970\u7b26\u4ece\u8fd9\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u5411\u540e\u641c\u7d22\uff0c\u76f4\u5230\u53d1\u73b0\u5339\u914d\u4e3a\u6b62\u3002</p> <p><code>y</code>\u4fee\u9970\u7b26\u540c\u6837\u9075\u5b88<code>lastIndex</code>\u5c5e\u6027\uff0c\u4f46\u662f\u8981\u6c42\u5fc5\u987b\u5728<code>lastIndex</code>\u6307\u5b9a\u7684\u4f4d\u7f6e\u53d1\u73b0\u5339\u914d\u3002</p> <pre><code>const REGEX = /a/y;\n\n// \u6307\u5b9a\u4ece2\u53f7\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 2;\n\n// \u4e0d\u662f\u7c98\u8fde\uff0c\u5339\u914d\u5931\u8d25\nREGEX.exec('xaya') // null\n\n// \u6307\u5b9a\u4ece3\u53f7\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\nREGEX.lastIndex = 3;\n\n// 3\u53f7\u4f4d\u7f6e\u662f\u7c98\u8fde\uff0c\u5339\u914d\u6210\u529f\nconst match = REGEX.exec('xaya');\nmatch.index // 3\nREGEX.lastIndex // 4\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c<code>y</code>\u4fee\u9970\u7b26\u53f7\u9690\u542b\u4e86\u5934\u90e8\u5339\u914d\u7684\u6807\u5fd7<code>^</code>\u3002</p> <pre><code>/b/y.exec('aba')\n// null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7531\u4e8e\u4e0d\u80fd\u4fdd\u8bc1\u5934\u90e8\u5339\u914d\uff0c\u6240\u4ee5\u8fd4\u56de<code>null</code>\u3002<code>y</code>\u4fee\u9970\u7b26\u7684\u8bbe\u8ba1\u672c\u610f\uff0c\u5c31\u662f\u8ba9\u5934\u90e8\u5339\u914d\u7684\u6807\u5fd7<code>^</code>\u5728\u5168\u5c40\u5339\u914d\u4e2d\u90fd\u6709\u6548\u3002</p> <p>\u4e0b\u9762\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684<code>replace</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>const REGEX = /a/gy;\n'aaxa'.replace(REGEX, '-') // '--xa'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6700\u540e\u4e00\u4e2a<code>a</code>\u56e0\u4e3a\u4e0d\u662f\u51fa\u73b0\u5728\u4e0b\u4e00\u6b21\u5339\u914d\u7684\u5934\u90e8\uff0c\u6240\u4ee5\u4e0d\u4f1a\u88ab\u66ff\u6362\u3002</p> <p>\u5355\u5355\u4e00\u4e2a<code>y</code>\u4fee\u9970\u7b26\u5bf9<code>match</code>\u65b9\u6cd5\uff0c\u53ea\u80fd\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5339\u914d\uff0c\u5fc5\u987b\u4e0e<code>g</code>\u4fee\u9970\u7b26\u8054\u7528\uff0c\u624d\u80fd\u8fd4\u56de\u6240\u6709\u5339\u914d\u3002</p> <pre><code>'a1a2a3'.match(/a\\d/y) // [\"a1\"]\n'a1a2a3'.match(/a\\d/gy) // [\"a1\", \"a2\", \"a3\"]\n</code></pre> <p><code>y</code>\u4fee\u9970\u7b26\u7684\u4e00\u4e2a\u5e94\u7528\uff0c\u662f\u4ece\u5b57\u7b26\u4e32\u63d0\u53d6 token\uff08\u8bcd\u5143\uff09\uff0c<code>y</code>\u4fee\u9970\u7b26\u786e\u4fdd\u4e86\u5339\u914d\u4e4b\u95f4\u4e0d\u4f1a\u6709\u6f0f\u6389\u7684\u5b57\u7b26\u3002</p> <pre><code>const TOKEN_Y = /\\s*(\\+|[0-9]+)\\s*/y;\nconst TOKEN_G  = /\\s*(\\+|[0-9]+)\\s*/g;\n\ntokenize(TOKEN_Y, '3 + 4')\n// [ '3', '+', '4' ]\ntokenize(TOKEN_G, '3 + 4')\n// [ '3', '+', '4' ]\n\nfunction tokenize(TOKEN_REGEX, str) {\n  let result = [];\n  let match;\n  while (match = TOKEN_REGEX.exec(str)) {\n    result.push(match[1]);\n  }\n  return result;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u91cc\u9762\u6ca1\u6709\u975e\u6cd5\u5b57\u7b26\uff0c<code>y</code>\u4fee\u9970\u7b26\u4e0e<code>g</code>\u4fee\u9970\u7b26\u7684\u63d0\u53d6\u7ed3\u679c\u662f\u4e00\u6837\u7684\u3002\u4f46\u662f\uff0c\u4e00\u65e6\u51fa\u73b0\u975e\u6cd5\u5b57\u7b26\uff0c\u4e24\u8005\u7684\u884c\u4e3a\u5c31\u4e0d\u4e00\u6837\u4e86\u3002</p> <pre><code>tokenize(TOKEN_Y, '3x + 4')\n// [ '3' ]\ntokenize(TOKEN_G, '3x + 4')\n// [ '3', '+', '4' ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g</code>\u4fee\u9970\u7b26\u4f1a\u5ffd\u7565\u975e\u6cd5\u5b57\u7b26\uff0c\u800c<code>y</code>\u4fee\u9970\u7b26\u4e0d\u4f1a\uff0c\u8fd9\u6837\u5c31\u5f88\u5bb9\u6613\u53d1\u73b0\u9519\u8bef\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#regexpprototypesticky","title":"RegExp.prototype.sticky \u5c5e\u6027","text":"<p>\u4e0e<code>y</code>\u4fee\u9970\u7b26\u76f8\u5339\u914d\uff0cES6 \u7684\u6b63\u5219\u5b9e\u4f8b\u5bf9\u8c61\u591a\u4e86<code>sticky</code>\u5c5e\u6027\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u4e86<code>y</code>\u4fee\u9970\u7b26\u3002</p> <pre><code>var r = /hello\\d/y;\nr.sticky // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#regexpprototypeflags","title":"RegExp.prototype.flags \u5c5e\u6027","text":"<p>ES6 \u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u65b0\u589e\u4e86<code>flags</code>\u5c5e\u6027\uff0c\u4f1a\u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\u3002</p> <pre><code>// ES5 \u7684 source \u5c5e\u6027\n// \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u6b63\u6587\n/abc/ig.source\n// \"abc\"\n\n// ES6 \u7684 flags \u5c5e\u6027\n// \u8fd4\u56de\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u4fee\u9970\u7b26\n/abc/ig.flags\n// 'gi'\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#s-dotall","title":"s \u4fee\u9970\u7b26\uff1adotAll \u6a21\u5f0f","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\uff0c\u70b9\uff08<code>.</code>\uff09\u662f\u4e00\u4e2a\u7279\u6b8a\u5b57\u7b26\uff0c\u4ee3\u8868\u4efb\u610f\u7684\u5355\u4e2a\u5b57\u7b26\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u4f8b\u5916\u3002\u4e00\u4e2a\u662f\u56db\u4e2a\u5b57\u8282\u7684 UTF-16 \u5b57\u7b26\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528<code>u</code>\u4fee\u9970\u7b26\u89e3\u51b3\uff1b\u53e6\u4e00\u4e2a\u662f\u884c\u7ec8\u6b62\u7b26\uff08line terminator character\uff09\u3002</p> <p>\u6240\u8c13\u884c\u7ec8\u6b62\u7b26\uff0c\u5c31\u662f\u8be5\u5b57\u7b26\u8868\u793a\u4e00\u884c\u7684\u7ec8\u7ed3\u3002\u4ee5\u4e0b\u56db\u4e2a\u5b57\u7b26\u5c5e\u4e8e\u201c\u884c\u7ec8\u6b62\u7b26\u201d\u3002</p> <ul> <li>U+000A \u6362\u884c\u7b26\uff08<code>\\n</code>\uff09</li> <li>U+000D \u56de\u8f66\u7b26\uff08<code>\\r</code>\uff09</li> <li>U+2028 \u884c\u5206\u9694\u7b26\uff08line separator\uff09</li> <li>U+2029 \u6bb5\u5206\u9694\u7b26\uff08paragraph separator\uff09</li> </ul> <pre><code>/foo.bar/.test('foo\\nbar')\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a<code>.</code>\u4e0d\u5339\u914d<code>\\n</code>\uff0c\u6240\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd4\u56de<code>false</code>\u3002</p> <p>\u4f46\u662f\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5339\u914d\u7684\u662f\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\uff0c\u8fd9\u65f6\u6709\u4e00\u79cd\u53d8\u901a\u7684\u5199\u6cd5\u3002</p> <pre><code>/foo[^]bar/.test('foo\\nbar')\n// true\n</code></pre> <p>\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u6bd5\u7adf\u4e0d\u592a\u7b26\u5408\u76f4\u89c9\uff0cES2018 \u5f15\u5165<code>s</code>\u4fee\u9970\u7b26\uff0c\u4f7f\u5f97<code>.</code>\u53ef\u4ee5\u5339\u914d\u4efb\u610f\u5355\u4e2a\u5b57\u7b26\u3002</p> <pre><code>/foo.bar/s.test('foo\\nbar') // true\n</code></pre> <p>\u8fd9\u88ab\u79f0\u4e3a<code>dotAll</code>\u6a21\u5f0f\uff0c\u5373\u70b9\uff08dot\uff09\u4ee3\u8868\u4e00\u5207\u5b57\u7b26\u3002\u6240\u4ee5\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u8fd8\u5f15\u5165\u4e86\u4e00\u4e2a<code>dotAll</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u5426\u5904\u5728<code>dotAll</code>\u6a21\u5f0f\u3002</p> <pre><code>const re = /foo.bar/s;\n// \u53e6\u4e00\u79cd\u5199\u6cd5\n// const re = new RegExp('foo.bar', 's');\n\nre.test('foo\\nbar') // true\nre.dotAll // true\nre.flags // 's'\n</code></pre> <p><code>/s</code>\u4fee\u9970\u7b26\u548c\u591a\u884c\u4fee\u9970\u7b26<code>/m</code>\u4e0d\u51b2\u7a81\uff0c\u4e24\u8005\u4e00\u8d77\u4f7f\u7528\u7684\u60c5\u51b5\u4e0b\uff0c<code>.</code>\u5339\u914d\u6240\u6709\u5b57\u7b26\uff0c\u800c<code>^</code>\u548c<code>$</code>\u5339\u914d\u6bcf\u4e00\u884c\u7684\u884c\u9996\u548c\u884c\u5c3e\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_2","title":"\u540e\u884c\u65ad\u8a00","text":"<p>JavaScript \u8bed\u8a00\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u53ea\u652f\u6301\u5148\u884c\u65ad\u8a00\uff08lookahead\uff09\u548c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\uff08negative lookahead\uff09\uff0c\u4e0d\u652f\u6301\u540e\u884c\u65ad\u8a00\uff08lookbehind\uff09\u548c\u540e\u884c\u5426\u5b9a\u65ad\u8a00\uff08negative lookbehind\uff09\u3002ES2018 \u5f15\u5165\u540e\u884c\u65ad\u8a00\uff0cV8 \u5f15\u64ce 4.9 \u7248\uff08Chrome 62\uff09\u5df2\u7ecf\u652f\u6301\u3002</p> <p>\u201c\u5148\u884c\u65ad\u8a00\u201d\u6307\u7684\u662f\uff0c<code>x</code>\u53ea\u6709\u5728<code>y</code>\u524d\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/x(?=y)/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u767e\u5206\u53f7\u4e4b\u524d\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/\\d+(?=%)/</code>\u3002\u201c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u6307\u7684\u662f\uff0c<code>x</code>\u53ea\u6709\u4e0d\u5728<code>y</code>\u524d\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/x(?!y)/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u4e0d\u5728\u767e\u5206\u53f7\u4e4b\u524d\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/\\d+(?!%)/</code>\u3002</p> <pre><code>/\\d+(?=%)/.exec('100% of US presidents have been male')  // [\"100\"]\n/\\d+(?!%)/.exec('that\u2019s all 44 of them')                 // [\"44\"]\n</code></pre> <p>\u4e0a\u9762\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u4e92\u6362\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5c31\u4e0d\u4f1a\u5f97\u5230\u76f8\u540c\u7ed3\u679c\u3002\u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c\u201c\u5148\u884c\u65ad\u8a00\u201d\u62ec\u53f7\u4e4b\u4e2d\u7684\u90e8\u5206\uff08<code>(?=%)</code>\uff09\uff0c\u662f\u4e0d\u8ba1\u5165\u8fd4\u56de\u7ed3\u679c\u7684\u3002</p> <p>\u201c\u540e\u884c\u65ad\u8a00\u201d\u6b63\u597d\u4e0e\u201c\u5148\u884c\u65ad\u8a00\u201d\u76f8\u53cd\uff0c<code>x</code>\u53ea\u6709\u5728<code>y</code>\u540e\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/(?&lt;=y)x/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u7f8e\u5143\u7b26\u53f7\u4e4b\u540e\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/(?&lt;=\\$)\\d+/</code>\u3002\u201c\u540e\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u5219\u4e0e\u201c\u5148\u884c\u5426\u5b9a\u65ad\u8a00\u201d\u76f8\u53cd\uff0c<code>x</code>\u53ea\u6709\u4e0d\u5728<code>y</code>\u540e\u9762\u624d\u5339\u914d\uff0c\u5fc5\u987b\u5199\u6210<code>/(?&lt;!y)x/</code>\u3002\u6bd4\u5982\uff0c\u53ea\u5339\u914d\u4e0d\u5728\u7f8e\u5143\u7b26\u53f7\u540e\u9762\u7684\u6570\u5b57\uff0c\u8981\u5199\u6210<code>/(?&lt;!\\$)\\d+/</code>\u3002</p> <pre><code>/(?&lt;=\\$)\\d+/.exec('Benjamin Franklin is on the $100 bill')  // [\"100\"]\n/(?&lt;!\\$)\\d+/.exec('it\u2019s worth about \u20ac90')                   // [\"90\"]\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u62ec\u53f7\u4e4b\u4e2d\u7684\u90e8\u5206\uff08<code>(?&lt;=\\$)</code>\uff09\uff0c\u4e5f\u662f\u4e0d\u8ba1\u5165\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u4f7f\u7528\u540e\u884c\u65ad\u8a00\u8fdb\u884c\u5b57\u7b26\u4e32\u66ff\u6362\u3002</p> <pre><code>const RE_DOLLAR_PREFIX = /(?&lt;=\\$)foo/g;\n'$foo %foo foo'.replace(RE_DOLLAR_PREFIX, 'bar');\n// '$bar %foo foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u6709\u5728\u7f8e\u5143\u7b26\u53f7\u540e\u9762\u7684<code>foo</code>\u624d\u4f1a\u88ab\u66ff\u6362\u3002</p> <p>\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u5b9e\u73b0\uff0c\u9700\u8981\u5148\u5339\u914d<code>/(?&lt;=y)x/</code>\u7684<code>x</code>\uff0c\u7136\u540e\u518d\u56de\u5230\u5de6\u8fb9\uff0c\u5339\u914d<code>y</code>\u7684\u90e8\u5206\u3002\u8fd9\u79cd\u201c\u5148\u53f3\u540e\u5de6\u201d\u7684\u6267\u884c\u987a\u5e8f\uff0c\u4e0e\u6240\u6709\u5176\u4ed6\u6b63\u5219\u64cd\u4f5c\u76f8\u53cd\uff0c\u5bfc\u81f4\u4e86\u4e00\u4e9b\u4e0d\u7b26\u5408\u9884\u671f\u7684\u884c\u4e3a\u3002</p> <p>\u9996\u5148\uff0c\u540e\u884c\u65ad\u8a00\u7684\u7ec4\u5339\u914d\uff0c\u4e0e\u6b63\u5e38\u60c5\u51b5\u4e0b\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <pre><code>/(?&lt;=(\\d+)(\\d+))$/.exec('1053') // [\"\", \"1\", \"053\"]\n/^(\\d+)(\\d+)$/.exec('1053') // [\"1053\", \"105\", \"3\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9700\u8981\u6355\u6349\u4e24\u4e2a\u7ec4\u5339\u914d\u3002\u6ca1\u6709\u201c\u540e\u884c\u65ad\u8a00\u201d\u65f6\uff0c\u7b2c\u4e00\u4e2a\u62ec\u53f7\u662f\u8d2a\u5a6a\u6a21\u5f0f\uff0c\u7b2c\u4e8c\u4e2a\u62ec\u53f7\u53ea\u80fd\u6355\u83b7\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7ed3\u679c\u662f<code>105</code>\u548c<code>3</code>\u3002\u800c\u201c\u540e\u884c\u65ad\u8a00\u201d\u65f6\uff0c\u7531\u4e8e\u6267\u884c\u987a\u5e8f\u662f\u4ece\u53f3\u5230\u5de6\uff0c\u7b2c\u4e8c\u4e2a\u62ec\u53f7\u662f\u8d2a\u5a6a\u6a21\u5f0f\uff0c\u7b2c\u4e00\u4e2a\u62ec\u53f7\u53ea\u80fd\u6355\u83b7\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u7ed3\u679c\u662f<code>1</code>\u548c<code>053</code>\u3002</p> <p>\u5176\u6b21\uff0c\u201c\u540e\u884c\u65ad\u8a00\u201d\u7684\u53cd\u659c\u6760\u5f15\u7528\uff0c\u4e5f\u4e0e\u901a\u5e38\u7684\u987a\u5e8f\u76f8\u53cd\uff0c\u5fc5\u987b\u653e\u5728\u5bf9\u5e94\u7684\u90a3\u4e2a\u62ec\u53f7\u4e4b\u524d\u3002</p> <pre><code>/(?&lt;=(o)d\\1)r/.exec('hodor')  // null\n/(?&lt;=\\1d(o))r/.exec('hodor')  // [\"r\", \"o\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u540e\u884c\u65ad\u8a00\u7684\u53cd\u659c\u6760\u5f15\u7528\uff08<code>\\1</code>\uff09\u653e\u5728\u62ec\u53f7\u7684\u540e\u9762\uff0c\u5c31\u4e0d\u4f1a\u5f97\u5230\u5339\u914d\u7ed3\u679c\uff0c\u5fc5\u987b\u653e\u5728\u524d\u9762\u624d\u53ef\u4ee5\u3002\u56e0\u4e3a\u540e\u884c\u65ad\u8a00\u662f\u5148\u4ece\u5de6\u5230\u53f3\u626b\u63cf\uff0c\u53d1\u73b0\u5339\u914d\u4ee5\u540e\u518d\u56de\u8fc7\u5934\uff0c\u4ece\u53f3\u5230\u5de6\u5b8c\u6210\u53cd\u659c\u6760\u5f15\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#unicode","title":"Unicode \u5c5e\u6027\u7c7b","text":"<p>ES2018 \u5f15\u5165\u4e86 Unicode \u5c5e\u6027\u7c7b\uff0c\u5141\u8bb8\u4f7f\u7528<code>\\p{...}</code>\u548c<code>\\P{...}</code>\uff08<code>\\P</code>\u662f<code>\\p</code>\u7684\u5426\u5b9a\u5f62\u5f0f\uff09\u4ee3\u8868\u4e00\u7c7b Unicode \u5b57\u7b26\uff0c\u5339\u914d\u6ee1\u8db3\u6761\u4ef6\u7684\u6240\u6709\u5b57\u7b26\u3002</p> <pre><code>const regexGreekSymbol = /\\p{Script=Greek}/u;\nregexGreekSymbol.test('\u03c0') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>\\p{Script=Greek}</code>\u8868\u793a\u5339\u914d\u4e00\u4e2a\u5e0c\u814a\u6587\u5b57\u6bcd\uff0c\u6240\u4ee5\u5339\u914d<code>\u03c0</code>\u6210\u529f\u3002</p> <p>Unicode \u5c5e\u6027\u7c7b\u7684\u6807\u51c6\u5f62\u5f0f\uff0c\u9700\u8981\u540c\u65f6\u6307\u5b9a\u5c5e\u6027\u540d\u548c\u5c5e\u6027\u503c\u3002</p> <pre><code>\\p{UnicodePropertyName=UnicodePropertyValue}\n</code></pre> <p>\u4f46\u662f\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u5c5e\u6027\uff0c\u53ef\u4ee5\u53ea\u5199\u5c5e\u6027\u540d\uff0c\u6216\u8005\u53ea\u5199\u5c5e\u6027\u503c\u3002</p> <pre><code>\\p{UnicodePropertyName}\n\\p{UnicodePropertyValue}\n</code></pre> <p><code>\\P{\u2026}</code>\u662f<code>\\p{\u2026}</code>\u7684\u53cd\u5411\u5339\u914d\uff0c\u5373\u5339\u914d\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u5b57\u7b26\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u4e24\u79cd\u7c7b\u53ea\u5bf9 Unicode \u6709\u6548\uff0c\u6240\u4ee5\u4f7f\u7528\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u52a0\u4e0a<code>u</code>\u4fee\u9970\u7b26\u3002\u5982\u679c\u4e0d\u52a0<code>u</code>\u4fee\u9970\u7b26\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528<code>\\p</code>\u548c<code>\\P</code>\u4f1a\u62a5\u9519\u3002</p> <p>\u7531\u4e8e Unicode \u7684\u5404\u79cd\u5c5e\u6027\u975e\u5e38\u591a\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b0\u7684\u7c7b\u7684\u8868\u8fbe\u80fd\u529b\u975e\u5e38\u5f3a\u3002</p> <pre><code>const regex = /^\\p{Decimal_Number}+$/u;\nregex.test('\ud835\udfcf\ud835\udfd0\ud835\udfd1\ud835\udfdc\ud835\udfdd\ud835\udfde\ud835\udfe9\ud835\udfea\ud835\udfeb\ud835\udfec\ud835\udfed\ud835\udfee\ud835\udfef\ud835\udffa\ud835\udffb\ud835\udffc') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027\u7c7b\u6307\u5b9a\u5339\u914d\u6240\u6709\u5341\u8fdb\u5236\u5b57\u7b26\uff0c\u53ef\u4ee5\u770b\u5230\u5404\u79cd\u5b57\u578b\u7684\u5341\u8fdb\u5236\u5b57\u7b26\u90fd\u4f1a\u5339\u914d\u6210\u529f\u3002</p> <p><code>\\p{Number}</code>\u751a\u81f3\u80fd\u5339\u914d\u7f57\u9a6c\u6570\u5b57\u3002</p> <pre><code>// \u5339\u914d\u6240\u6709\u6570\u5b57\nconst regex = /^\\p{Number}+$/u;\nregex.test('\u00b2\u00b3\u00b9\u00bc\u00bd\u00be') // true\nregex.test('\u325b\u325c\u325d') // true\nregex.test('\u2160\u2161\u2162\u2163\u2164\u2165\u2166\u2167\u2168\u2169\u216a\u216b') // true\n</code></pre> <p>\u4e0b\u9762\u662f\u5176\u4ed6\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>// \u5339\u914d\u6240\u6709\u7a7a\u683c\n\\p{White_Space}\n\n// \u5339\u914d\u5404\u79cd\u6587\u5b57\u7684\u6240\u6709\u5b57\u6bcd\uff0c\u7b49\u540c\u4e8e Unicode \u7248\u7684 \\w\n[\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}]\n\n// \u5339\u914d\u5404\u79cd\u6587\u5b57\u7684\u6240\u6709\u975e\u5b57\u6bcd\u7684\u5b57\u7b26\uff0c\u7b49\u540c\u4e8e Unicode \u7248\u7684 \\W\n[^\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}]\n\n// \u5339\u914d Emoji\n/\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F/gu\n\n// \u5339\u914d\u6240\u6709\u7684\u7bad\u5934\u5b57\u7b26\nconst regexArrows = /^\\p{Block=Arrows}+$/u;\nregexArrows.test('\u2190\u2191\u2192\u2193\u2194\u2195\u2196\u2197\u2198\u2199\u21cf\u21d0\u21d1\u21d2\u21d3\u21d4\u21d5\u21d6\u21d7\u21d8\u21d9\u21e7\u21e9') // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#v-unicode","title":"v \u4fee\u9970\u7b26\uff1aUnicode \u5c5e\u6027\u7c7b\u7684\u8fd0\u7b97","text":"<p>\u6709\u65f6\uff0c\u9700\u8981\u5411\u67d0\u4e2a Unicode \u5c5e\u6027\u7c7b\u6dfb\u52a0\u6216\u51cf\u5c11\u5b57\u7b26\uff0c\u5373\u9700\u8981\u5bf9\u5c5e\u6027\u7c7b\u8fdb\u884c\u8fd0\u7b97\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u589e\u52a0\u4e86 Unicode \u5c5e\u6027\u7c7b\u7684\u8fd0\u7b97\u529f\u80fd\u3002</p> <p>\u5b83\u63d0\u4f9b\u4e24\u79cd\u5f62\u5f0f\u7684\u8fd0\u7b97\uff0c\u4e00\u79cd\u662f\u5dee\u96c6\u8fd0\u7b97\uff08A \u96c6\u5408\u51cf\u53bb B \u96c6\u5408\uff09\uff0c\u53e6\u4e00\u79cd\u662f\u4ea4\u96c6\u8fd0\u7b97\u3002</p> <pre><code>// \u5dee\u96c6\u8fd0\u7b97\uff08A \u51cf\u53bb B\uff09\n[A--B]\n\n// \u4ea4\u96c6\u8fd0\u7b97\uff08A \u4e0e B \u7684\u4ea4\u96c6\uff09\n[A&amp;&amp;B]\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u4e2d\uff0cA \u548c B \u8981\u4e48\u662f\u5b57\u7b26\u7c7b\uff08\u4f8b\u5982<code>[a-z]</code>\uff09\uff0c\u8981\u4e48\u662f Unicode \u5c5e\u6027\u7c7b\uff08\u4f8b\u5982<code>\\p{ASCII}</code>\uff09\u3002</p> <p>\u800c\u4e14\uff0c\u8fd9\u79cd\u8fd0\u7b97\u652f\u6301\u65b9\u62ec\u53f7\u4e4b\u4e2d\u5d4c\u5165\u65b9\u62ec\u53f7\uff0c\u5373\u65b9\u62ec\u53f7\u7684\u5d4c\u5957\u3002</p> <pre><code>// \u65b9\u62ec\u53f7\u5d4c\u5957\u7684\u4f8b\u5b50\n[A--[0-9]]\n</code></pre> <p>\u8fd9\u79cd\u8fd0\u7b97\u7684\u524d\u63d0\u662f\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u5fc5\u987b\u4f7f\u7528\u65b0\u5f15\u5165\u7684<code>v</code>\u4fee\u9970\u7b26\u3002\u524d\u9762\u8bf4\u8fc7\uff0cUnicode \u5c5e\u6027\u7c7b\u5fc5\u987b\u642d\u914d<code>u</code>\u4fee\u9970\u7b26\u4f7f\u7528\uff0c\u8fd9\u4e2a<code>v</code>\u4fee\u9970\u7b26\u7b49\u4e8e\u4ee3\u66ff<code>u</code>\uff0c\u4f7f\u7528\u4e86\u5b83\u5c31\u4e0d\u5fc5\u518d\u5199<code>u</code>\u4e86\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>// \u5341\u8fdb\u5236\u5b57\u7b26\u53bb\u9664 ASCII \u7801\u76840\u52309\n[\\p{Decimal_Number}--[0-9]]\n\n// Emoji \u5b57\u7b26\u53bb\u9664 ASCII \u7801\u5b57\u7b26\n[\\p{Emoji}--\\p{ASCII}]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_3","title":"\u5177\u540d\u7ec4\u5339\u914d","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_4","title":"\u7b80\u4ecb","text":"<p>\u6b63\u5219\u8868\u8fbe\u5f0f\u4f7f\u7528\u5706\u62ec\u53f7\u8fdb\u884c\u7ec4\u5339\u914d\u3002</p> <pre><code>const RE_DATE = /(\\d{4})-(\\d{2})-(\\d{2})/;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u9762\u6709\u4e09\u7ec4\u5706\u62ec\u53f7\u3002\u4f7f\u7528<code>exec</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5c06\u8fd9\u4e09\u7ec4\u5339\u914d\u7ed3\u679c\u63d0\u53d6\u51fa\u6765\u3002</p> <pre><code>const RE_DATE = /(\\d{4})-(\\d{2})-(\\d{2})/;\n\nconst matchObj = RE_DATE.exec('1999-12-31');\nconst year = matchObj[1]; // 1999\nconst month = matchObj[2]; // 12\nconst day = matchObj[3]; // 31\n</code></pre> <p>\u7ec4\u5339\u914d\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u6bcf\u4e00\u7ec4\u7684\u5339\u914d\u542b\u4e49\u4e0d\u5bb9\u6613\u770b\u51fa\u6765\uff0c\u800c\u4e14\u53ea\u80fd\u7528\u6570\u5b57\u5e8f\u53f7\uff08\u6bd4\u5982<code>matchObj[1]</code>\uff09\u5f15\u7528\uff0c\u8981\u662f\u7ec4\u7684\u987a\u5e8f\u53d8\u4e86\uff0c\u5f15\u7528\u7684\u65f6\u5019\u5c31\u5fc5\u987b\u4fee\u6539\u5e8f\u53f7\u3002</p> <p>ES2018 \u5f15\u5165\u4e86\u5177\u540d\u7ec4\u5339\u914d\uff08Named Capture Groups\uff09\uff0c\u5141\u8bb8\u4e3a\u6bcf\u4e00\u4e2a\u7ec4\u5339\u914d\u6307\u5b9a\u4e00\u4e2a\u540d\u5b57\uff0c\u65e2\u4fbf\u4e8e\u9605\u8bfb\u4ee3\u7801\uff0c\u53c8\u4fbf\u4e8e\u5f15\u7528\u3002</p> <pre><code>const RE_DATE = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/;\n\nconst matchObj = RE_DATE.exec('1999-12-31');\nconst year = matchObj.groups.year; // \"1999\"\nconst month = matchObj.groups.month; // \"12\"\nconst day = matchObj.groups.day; // \"31\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u201c\u5177\u540d\u7ec4\u5339\u914d\u201d\u5728\u5706\u62ec\u53f7\u5185\u90e8\uff0c\u6a21\u5f0f\u7684\u5934\u90e8\u6dfb\u52a0\u201c\u95ee\u53f7 + \u5c16\u62ec\u53f7 + \u7ec4\u540d\u201d\uff08<code>?&lt;year&gt;</code>\uff09\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5728<code>exec</code>\u65b9\u6cd5\u8fd4\u56de\u7ed3\u679c\u7684<code>groups</code>\u5c5e\u6027\u4e0a\u5f15\u7528\u8be5\u7ec4\u540d\u3002\u540c\u65f6\uff0c\u6570\u5b57\u5e8f\u53f7\uff08<code>matchObj[1]</code>\uff09\u4f9d\u7136\u6709\u6548\u3002</p> <p>\u5177\u540d\u7ec4\u5339\u914d\u7b49\u4e8e\u4e3a\u6bcf\u4e00\u7ec4\u5339\u914d\u52a0\u4e0a\u4e86 ID\uff0c\u4fbf\u4e8e\u63cf\u8ff0\u5339\u914d\u7684\u76ee\u7684\u3002\u5982\u679c\u7ec4\u7684\u987a\u5e8f\u53d8\u4e86\uff0c\u4e5f\u4e0d\u7528\u6539\u53d8\u5339\u914d\u540e\u7684\u5904\u7406\u4ee3\u7801\u3002</p> <p>\u5982\u679c\u5177\u540d\u7ec4\u6ca1\u6709\u5339\u914d\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684<code>groups</code>\u5bf9\u8c61\u5c5e\u6027\u4f1a\u662f<code>undefined</code>\u3002</p> <pre><code>const RE_OPT_A = /^(?&lt;as&gt;a+)?$/;\nconst matchObj = RE_OPT_A.exec('');\n\nmatchObj.groups.as // undefined\n'as' in matchObj.groups // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5177\u540d\u7ec4<code>as</code>\u6ca1\u6709\u627e\u5230\u5339\u914d\uff0c\u90a3\u4e48<code>matchObj.groups.as</code>\u5c5e\u6027\u503c\u5c31\u662f<code>undefined</code>\uff0c\u5e76\u4e14<code>as</code>\u8fd9\u4e2a\u952e\u540d\u5728<code>groups</code>\u662f\u59cb\u7ec8\u5b58\u5728\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_5","title":"\u89e3\u6784\u8d4b\u503c\u548c\u66ff\u6362","text":"<p>\u6709\u4e86\u5177\u540d\u7ec4\u5339\u914d\u4ee5\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u76f4\u63a5\u4ece\u5339\u914d\u7ed3\u679c\u4e0a\u4e3a\u53d8\u91cf\u8d4b\u503c\u3002</p> <pre><code>let {groups: {one, two}} = /^(?&lt;one&gt;.*):(?&lt;two&gt;.*)$/u.exec('foo:bar');\none  // foo\ntwo  // bar\n</code></pre> <p>\u5b57\u7b26\u4e32\u66ff\u6362\u65f6\uff0c\u4f7f\u7528<code>$&lt;\u7ec4\u540d&gt;</code>\u5f15\u7528\u5177\u540d\u7ec4\u3002</p> <pre><code>let re = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/u;\n\n'2015-01-02'.replace(re, '$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;')\n// '02/01/2015'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>replace</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\u3002</p> <p><code>replace</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u53c2\u6570\u5e8f\u5217\u5982\u4e0b\u3002</p> <pre><code>'2015-01-02'.replace(re, (\n   matched, // \u6574\u4e2a\u5339\u914d\u7ed3\u679c 2015-01-02\n   capture1, // \u7b2c\u4e00\u4e2a\u7ec4\u5339\u914d 2015\n   capture2, // \u7b2c\u4e8c\u4e2a\u7ec4\u5339\u914d 01\n   capture3, // \u7b2c\u4e09\u4e2a\u7ec4\u5339\u914d 02\n   position, // \u5339\u914d\u5f00\u59cb\u7684\u4f4d\u7f6e 0\n   S, // \u539f\u5b57\u7b26\u4e32 2015-01-02\n   groups // \u5177\u540d\u7ec4\u6784\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61 {year, month, day}\n ) =&gt; {\n let {day, month, year} = groups;\n return `${day}/${month}/${year}`;\n});\n</code></pre> <p>\u5177\u540d\u7ec4\u5339\u914d\u5728\u539f\u6765\u7684\u57fa\u7840\u4e0a\uff0c\u65b0\u589e\u4e86\u6700\u540e\u4e00\u4e2a\u51fd\u6570\u53c2\u6570\uff1a\u5177\u540d\u7ec4\u6784\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61\u3002\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u76f4\u63a5\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#_6","title":"\u5f15\u7528","text":"<p>\u5982\u679c\u8981\u5728\u6b63\u5219\u8868\u8fbe\u5f0f\u5185\u90e8\u5f15\u7528\u67d0\u4e2a\u201c\u5177\u540d\u7ec4\u5339\u914d\u201d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>\\k&lt;\u7ec4\u540d&gt;</code>\u7684\u5199\u6cd5\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;$/;\nRE_TWICE.test('abc!abc') // true\nRE_TWICE.test('abc!ab') // false\n</code></pre> <p>\u6570\u5b57\u5f15\u7528\uff08<code>\\1</code>\uff09\u4f9d\u7136\u6709\u6548\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\1$/;\nRE_TWICE.test('abc!abc') // true\nRE_TWICE.test('abc!ab') // false\n</code></pre> <p>\u8fd9\u4e24\u79cd\u5f15\u7528\u8bed\u6cd5\u8fd8\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u3002</p> <pre><code>const RE_TWICE = /^(?&lt;word&gt;[a-z]+)!\\k&lt;word&gt;!\\1$/;\nRE_TWICE.test('abc!abc!abc') // true\nRE_TWICE.test('abc!abc!ab') // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#d","title":"d \u4fee\u9970\u7b26\uff1a\u6b63\u5219\u5339\u914d\u7d22\u5f15","text":"<p>\u7ec4\u5339\u914d\u7684\u7ed3\u679c\uff0c\u5728\u539f\u59cb\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u76ee\u524d\u83b7\u53d6\u5e76\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002\u6b63\u5219\u5b9e\u4f8b\u7684<code>exec()</code>\u65b9\u6cd5\u6709\u4e00\u4e2a<code>index</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u83b7\u53d6\u6574\u4e2a\u5339\u914d\u7ed3\u679c\u7684\u5f00\u59cb\u4f4d\u7f6e\u3002\u4f46\u662f\uff0c\u7ec4\u5339\u914d\u7684\u6bcf\u4e2a\u7ec4\u7684\u5f00\u59cb\u4f4d\u7f6e\uff0c\u5f88\u96be\u62ff\u5230\u3002</p> <p>ES2022 \u65b0\u589e\u4e86<code>d</code>\u4fee\u9970\u7b26\uff0c\u8fd9\u4e2a\u4fee\u9970\u7b26\u53ef\u4ee5\u8ba9<code>exec()</code>\u3001<code>match()</code>\u7684\u8fd4\u56de\u7ed3\u679c\u6dfb\u52a0<code>indices</code>\u5c5e\u6027\uff0c\u5728\u8be5\u5c5e\u6027\u4e0a\u9762\u53ef\u4ee5\u62ff\u5230\u5339\u914d\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <pre><code>const text = 'zabbcdef';\nconst re = /ab/d;\nconst result = re.exec(text);\n\nresult.index // 1\nresult.indices // [ [1, 3] ]\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>exec()</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u7ed3\u679c<code>result</code>\uff0c\u5b83\u7684<code>index</code>\u5c5e\u6027\u662f\u6574\u4e2a\u5339\u914d\u7ed3\u679c\uff08<code>ab</code>\uff09\u7684\u5f00\u59cb\u4f4d\u7f6e\u3002\u7531\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f<code>re</code>\u6709<code>d</code>\u4fee\u9970\u7b26\uff0c<code>result</code>\u73b0\u5728\u5c31\u4f1a\u591a\u51fa\u4e00\u4e2a<code>indices</code>\u5c5e\u6027\u3002\u8be5\u5c5e\u6027\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u7684\u6bcf\u4e2a\u6210\u5458\u8fd8\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u5339\u914d\u7ed3\u679c\u5728\u539f\u59cb\u5b57\u7b26\u4e32\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002\u7531\u4e8e\u4e0a\u4f8b\u7684\u6b63\u5219\u8868\u8fbe\u5f0f<code>re</code>\u6ca1\u6709\u5305\u542b\u7ec4\u5339\u914d\uff0c\u6240\u4ee5<code>indices</code>\u6570\u7ec4\u53ea\u6709\u4e00\u4e2a\u6210\u5458\uff0c\u8868\u793a\u6574\u4e2a\u5339\u914d\u7684\u5f00\u59cb\u4f4d\u7f6e\u662f<code>1</code>\uff0c\u7ed3\u675f\u4f4d\u7f6e\u662f<code>3</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u5f00\u59cb\u4f4d\u7f6e\u5305\u542b\u5728\u5339\u914d\u7ed3\u679c\u4e4b\u4e2d\uff0c\u76f8\u5f53\u4e8e\u5339\u914d\u7ed3\u679c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002\u4f46\u662f\uff0c\u7ed3\u675f\u4f4d\u7f6e\u4e0d\u5305\u542b\u5728\u5339\u914d\u7ed3\u679c\u4e4b\u4e2d\uff0c\u662f\u5339\u914d\u7ed3\u679c\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u3002\u6bd4\u5982\uff0c\u4e0a\u4f8b\u5339\u914d\u7ed3\u679c\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26<code>b</code>\u7684\u4f4d\u7f6e\uff0c\u662f\u539f\u59cb\u5b57\u7b26\u4e32\u76842\u53f7\u4f4d\uff0c\u90a3\u4e48\u7ed3\u675f\u4f4d\u7f6e<code>3</code>\u5c31\u662f\u4e0b\u4e00\u4e2a\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002</p> <p>\u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f\u5305\u542b\u7ec4\u5339\u914d\uff0c\u90a3\u4e48<code>indices</code>\u5c5e\u6027\u5bf9\u5e94\u7684\u6570\u7ec4\u5c31\u4f1a\u5305\u542b\u591a\u4e2a\u6210\u5458\uff0c\u63d0\u4f9b\u6bcf\u4e2a\u7ec4\u5339\u914d\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <pre><code>const text = 'zabbcdef';\nconst re = /ab+(cd)/d;\nconst result = re.exec(text);\n\nresult.indices // [ [ 1, 6 ], [ 4, 6 ] ]\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f<code>re</code>\u5305\u542b\u4e00\u4e2a\u7ec4\u5339\u914d<code>(cd)</code>\uff0c\u90a3\u4e48<code>indices</code>\u5c5e\u6027\u6570\u7ec4\u5c31\u6709\u4e24\u4e2a\u6210\u5458\uff0c\u7b2c\u4e00\u4e2a\u6210\u5458\u662f\u6574\u4e2a\u5339\u914d\u7ed3\u679c\uff08<code>abbcd</code>\uff09\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u6210\u5458\u662f\u7ec4\u5339\u914d\uff08<code>cd</code>\uff09\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <p>\u4e0b\u9762\u662f\u591a\u4e2a\u7ec4\u5339\u914d\u7684\u4f8b\u5b50\u3002</p> <pre><code>const text = 'zabbcdef';\nconst re = /ab+(cd(ef))/d;\nconst result = re.exec(text);\n\nresult.indices // [ [1, 8], [4, 8], [6, 8] ]\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f<code>re</code>\u5305\u542b\u4e24\u4e2a\u7ec4\u5339\u914d\uff0c\u6240\u4ee5<code>indices</code>\u5c5e\u6027\u6570\u7ec4\u5c31\u6709\u4e09\u4e2a\u6210\u5458\u3002</p> <p>\u5982\u679c\u6b63\u5219\u8868\u8fbe\u5f0f\u5305\u542b\u5177\u540d\u7ec4\u5339\u914d\uff0c<code>indices</code>\u5c5e\u6027\u6570\u7ec4\u8fd8\u4f1a\u6709\u4e00\u4e2a<code>groups</code>\u5c5e\u6027\u3002\u8be5\u5c5e\u6027\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4ece\u8be5\u5bf9\u8c61\u83b7\u53d6\u5177\u540d\u7ec4\u5339\u914d\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <pre><code>const text = 'zabbcdef';\nconst re = /ab+(?&lt;Z&gt;cd)/d;\nconst result = re.exec(text);\n\nresult.indices.groups // { Z: [ 4, 6 ] }\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>exec()</code>\u65b9\u6cd5\u8fd4\u56de\u7ed3\u679c\u7684<code>indices.groups</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u63d0\u4f9b\u5177\u540d\u7ec4\u5339\u914d<code>Z</code>\u7684\u5f00\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <p>\u5982\u679c\u83b7\u53d6\u7ec4\u5339\u914d\u4e0d\u6210\u529f\uff0c<code>indices</code>\u5c5e\u6027\u6570\u7ec4\u7684\u5bf9\u5e94\u6210\u5458\u5219\u4e3a<code>undefined</code>\uff0c<code>indices.groups</code>\u5c5e\u6027\u5bf9\u8c61\u7684\u5bf9\u5e94\u6210\u5458\u4e5f\u662f<code>undefined</code>\u3002</p> <pre><code>const text = 'zabbcdef';\nconst re = /ab+(?&lt;Z&gt;ce)?/d;\nconst result = re.exec(text);\n\nresult.indices[1] // undefined\nresult.indices.groups['Z'] // undefined\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u7531\u4e8e\u7ec4\u5339\u914d<code>ce</code>\u4e0d\u6210\u529f\uff0c\u6240\u4ee5<code>indices</code>\u5c5e\u6027\u6570\u7ec4\u548c<code>indices.groups</code>\u5c5e\u6027\u5bf9\u8c61\u5bf9\u5e94\u7684\u7ec4\u5339\u914d\u6210\u5458<code>Z</code>\u90fd\u662f<code>undefined</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/06-regex/#stringprototypematchall","title":"String.prototype.matchAll()","text":"<p>\u5982\u679c\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u5728\u5b57\u7b26\u4e32\u91cc\u9762\u6709\u591a\u4e2a\u5339\u914d\uff0c\u73b0\u5728\u4e00\u822c\u4f7f\u7528<code>g</code>\u4fee\u9970\u7b26\u6216<code>y</code>\u4fee\u9970\u7b26\uff0c\u5728\u5faa\u73af\u91cc\u9762\u9010\u4e00\u53d6\u51fa\u3002</p> <pre><code>var regex = /t(e)(st(\\d?))/g;\nvar string = 'test1test2test3';\n\nvar matches = [];\nvar match;\nwhile (match = regex.exec(string)) {\n  matches.push(match);\n}\n\nmatches\n// [\n//   [\"test1\", \"e\", \"st1\", \"1\", index: 0, input: \"test1test2test3\"],\n//   [\"test2\", \"e\", \"st2\", \"2\", index: 5, input: \"test1test2test3\"],\n//   [\"test3\", \"e\", \"st3\", \"3\", index: 10, input: \"test1test2test3\"]\n// ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>while</code>\u5faa\u73af\u53d6\u51fa\u6bcf\u4e00\u8f6e\u7684\u6b63\u5219\u5339\u914d\uff0c\u4e00\u5171\u4e09\u8f6e\u3002</p> <p>ES2020 \u589e\u52a0\u4e86<code>String.prototype.matchAll()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u53d6\u51fa\u6240\u6709\u5339\u914d\u3002\u4e0d\u8fc7\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\uff08Iterator\uff09\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u3002</p> <pre><code>const string = 'test1test2test3';\nconst regex = /t(e)(st(\\d?))/g;\n\nfor (const match of string.matchAll(regex)) {\n  console.log(match);\n}\n// [\"test1\", \"e\", \"st1\", \"1\", index: 0, input: \"test1test2test3\"]\n// [\"test2\", \"e\", \"st2\", \"2\", index: 5, input: \"test1test2test3\"]\n// [\"test3\", \"e\", \"st3\", \"3\", index: 10, input: \"test1test2test3\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>string.matchAll(regex)</code>\u8fd4\u56de\u7684\u662f\u904d\u5386\u5668\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u53d6\u51fa\u3002\u76f8\u5bf9\u4e8e\u8fd4\u56de\u6570\u7ec4\uff0c\u8fd4\u56de\u904d\u5386\u5668\u7684\u597d\u5904\u5728\u4e8e\uff0c\u5982\u679c\u5339\u914d\u7ed3\u679c\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u7ec4\uff0c\u90a3\u4e48\u904d\u5386\u5668\u6bd4\u8f83\u8282\u7701\u8d44\u6e90\u3002</p> <p>\u904d\u5386\u5668\u8f6c\u4e3a\u6570\u7ec4\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u4f7f\u7528<code>...</code>\u8fd0\u7b97\u7b26\u548c<code>Array.from()</code>\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>// \u8f6c\u4e3a\u6570\u7ec4\u7684\u65b9\u6cd5\u4e00\n[...string.matchAll(regex)]\n\n// \u8f6c\u4e3a\u6570\u7ec4\u7684\u65b9\u6cd5\u4e8c\nArray.from(string.matchAll(regex))\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/","title":"07-\u6570\u503c\u7684\u6269\u5c55","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_1","title":"\u4e8c\u8fdb\u5236\u548c\u516b\u8fdb\u5236\u8868\u793a\u6cd5","text":"<p>ES6 \u63d0\u4f9b\u4e86\u4e8c\u8fdb\u5236\u548c\u516b\u8fdb\u5236\u6570\u503c\u7684\u65b0\u7684\u5199\u6cd5\uff0c\u5206\u522b\u7528\u524d\u7f00<code>0b</code>\uff08\u6216<code>0B</code>\uff09\u548c<code>0o</code>\uff08\u6216<code>0O</code>\uff09\u8868\u793a\u3002</p> <pre><code>0b111110111 === 503 // true\n0o767 === 503 // true\n</code></pre> <p>\u4ece ES5 \u5f00\u59cb\uff0c\u5728\u4e25\u683c\u6a21\u5f0f\u4e4b\u4e2d\uff0c\u516b\u8fdb\u5236\u5c31\u4e0d\u518d\u5141\u8bb8\u4f7f\u7528\u524d\u7f00<code>0</code>\u8868\u793a\uff0cES6 \u8fdb\u4e00\u6b65\u660e\u786e\uff0c\u8981\u4f7f\u7528\u524d\u7f00<code>0o</code>\u8868\u793a\u3002</p> <pre><code>// \u975e\u4e25\u683c\u6a21\u5f0f\n(function(){\n  console.log(0o11 === 011);\n})() // true\n\n// \u4e25\u683c\u6a21\u5f0f\n(function(){\n  'use strict';\n  console.log(0o11 === 011);\n})() // Uncaught SyntaxError: Octal literals are not allowed in strict mode.\n</code></pre> <p>\u5982\u679c\u8981\u5c06<code>0b</code>\u548c<code>0o</code>\u524d\u7f00\u7684\u5b57\u7b26\u4e32\u6570\u503c\u8f6c\u4e3a\u5341\u8fdb\u5236\uff0c\u8981\u4f7f\u7528<code>Number</code>\u65b9\u6cd5\u3002</p> <pre><code>Number('0b111')  // 7\nNumber('0o10')  // 8\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_2","title":"\u6570\u503c\u5206\u9694\u7b26","text":"<p>\u6b27\u7f8e\u8bed\u8a00\u4e2d\uff0c\u8f83\u957f\u7684\u6570\u503c\u5141\u8bb8\u6bcf\u4e09\u4f4d\u6dfb\u52a0\u4e00\u4e2a\u5206\u9694\u7b26\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u9017\u53f7\uff09\uff0c\u589e\u52a0\u6570\u503c\u7684\u53ef\u8bfb\u6027\u3002\u6bd4\u5982\uff0c<code>1000</code>\u53ef\u4ee5\u5199\u4f5c<code>1,000</code>\u3002</p> <p>ES2021\uff0c\u5141\u8bb8 JavaScript \u7684\u6570\u503c\u4f7f\u7528\u4e0b\u5212\u7ebf\uff08<code>_</code>\uff09\u4f5c\u4e3a\u5206\u9694\u7b26\u3002</p> <pre><code>let budget = 1_000_000_000_000;\nbudget === 10 ** 12 // true\n</code></pre> <p>\u8fd9\u4e2a\u6570\u503c\u5206\u9694\u7b26\u6ca1\u6709\u6307\u5b9a\u95f4\u9694\u7684\u4f4d\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u6bcf\u4e09\u4f4d\u6dfb\u52a0\u4e00\u4e2a\u5206\u9694\u7b26\uff0c\u4e5f\u53ef\u4ee5\u6bcf\u4e00\u4f4d\u3001\u6bcf\u4e24\u4f4d\u3001\u6bcf\u56db\u4f4d\u6dfb\u52a0\u4e00\u4e2a\u3002</p> <pre><code>123_00 === 12_300 // true\n\n12345_00 === 123_4500 // true\n12345_00 === 1_234_500 // true\n</code></pre> <p>\u5c0f\u6570\u548c\u79d1\u5b66\u8ba1\u6570\u6cd5\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6570\u503c\u5206\u9694\u7b26\u3002</p> <pre><code>// \u5c0f\u6570\n0.000_001\n\n// \u79d1\u5b66\u8ba1\u6570\u6cd5\n1e10_000\n</code></pre> <p>\u6570\u503c\u5206\u9694\u7b26\u6709\u51e0\u4e2a\u4f7f\u7528\u6ce8\u610f\u70b9\u3002</p> <ul> <li>\u4e0d\u80fd\u653e\u5728\u6570\u503c\u7684\u6700\u524d\u9762\uff08leading\uff09\u6216\u6700\u540e\u9762\uff08trailing\uff09\u3002</li> <li>\u4e0d\u80fd\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5206\u9694\u7b26\u8fde\u5728\u4e00\u8d77\u3002</li> <li>\u5c0f\u6570\u70b9\u7684\u524d\u540e\u4e0d\u80fd\u6709\u5206\u9694\u7b26\u3002</li> <li>\u79d1\u5b66\u8ba1\u6570\u6cd5\u91cc\u9762\uff0c\u8868\u793a\u6307\u6570\u7684<code>e</code>\u6216<code>E</code>\u524d\u540e\u4e0d\u80fd\u6709\u5206\u9694\u7b26\u3002</li> </ul> <p>\u4e0b\u9762\u7684\u5199\u6cd5\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u5168\u90e8\u62a5\u9519\n3_.141\n3._141\n1_e12\n1e_12\n123__456\n_1464301\n1464301_\n</code></pre> <p>\u9664\u4e86\u5341\u8fdb\u5236\uff0c\u5176\u4ed6\u8fdb\u5236\u7684\u6570\u503c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5206\u9694\u7b26\u3002</p> <pre><code>// \u4e8c\u8fdb\u5236\n0b1010_0001_1000_0101\n// \u5341\u516d\u8fdb\u5236\n0xA0_B0_C0\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6570\u503c\u5206\u9694\u7b26\u53ef\u4ee5\u6309\u5b57\u8282\u987a\u5e8f\u5206\u9694\u6570\u503c\uff0c\u8fd9\u5728\u64cd\u4f5c\u4e8c\u8fdb\u5236\u4f4d\u65f6\uff0c\u975e\u5e38\u6709\u7528\u3002</p> <p>\u6ce8\u610f\uff0c\u5206\u9694\u7b26\u4e0d\u80fd\u7d27\u8ddf\u7740\u8fdb\u5236\u7684\u524d\u7f00<code>0b</code>\u3001<code>0B</code>\u3001<code>0o</code>\u3001<code>0O</code>\u3001<code>0x</code>\u3001<code>0X</code>\u3002</p> <pre><code>// \u62a5\u9519\n0_b111111000\n0b_111111000\n</code></pre> <p>\u6570\u503c\u5206\u9694\u7b26\u53ea\u662f\u4e00\u79cd\u4e66\u5199\u4fbf\u5229\uff0c\u5bf9\u4e8e JavaScript \u5185\u90e8\u6570\u503c\u7684\u5b58\u50a8\u548c\u8f93\u51fa\uff0c\u5e76\u6ca1\u6709\u5f71\u54cd\u3002</p> <pre><code>let num = 12_345;\n\nnum // 12345\nnum.toString() // 12345\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u53d8\u91cf<code>num</code>\u7684\u503c\u4e3a<code>12_345</code>\uff0c\u4f46\u662f\u5185\u90e8\u5b58\u50a8\u548c\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u90fd\u4e0d\u4f1a\u6709\u6570\u503c\u5206\u9694\u7b26\u3002</p> <p>\u4e0b\u9762\u4e09\u4e2a\u5c06\u5b57\u7b26\u4e32\u8f6c\u6210\u6570\u503c\u7684\u51fd\u6570\uff0c\u4e0d\u652f\u6301\u6570\u503c\u5206\u9694\u7b26\u3002\u4e3b\u8981\u539f\u56e0\u662f\u8bed\u8a00\u7684\u8bbe\u8ba1\u8005\u8ba4\u4e3a\uff0c\u6570\u503c\u5206\u9694\u7b26\u4e3b\u8981\u662f\u4e3a\u4e86\u7f16\u7801\u65f6\u4e66\u5199\u6570\u503c\u7684\u65b9\u4fbf\uff0c\u800c\u4e0d\u662f\u4e3a\u4e86\u5904\u7406\u5916\u90e8\u8f93\u5165\u7684\u6570\u636e\u3002</p> <ul> <li>Number()</li> <li>parseInt()</li> <li>parseFloat()</li> </ul> <pre><code>Number('123_456') // NaN\nparseInt('123_456') // 123\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#numberisfinite-numberisnan","title":"Number.isFinite(), Number.isNaN()","text":"<p>ES6 \u5728<code>Number</code>\u5bf9\u8c61\u4e0a\uff0c\u65b0\u63d0\u4f9b\u4e86<code>Number.isFinite()</code>\u548c<code>Number.isNaN()</code>\u4e24\u4e2a\u65b9\u6cd5\u3002</p> <p><code>Number.isFinite()</code>\u7528\u6765\u68c0\u67e5\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6709\u9650\u7684\uff08finite\uff09\uff0c\u5373\u4e0d\u662f<code>Infinity</code>\u3002</p> <pre><code>Number.isFinite(15); // true\nNumber.isFinite(0.8); // true\nNumber.isFinite(NaN); // false\nNumber.isFinite(Infinity); // false\nNumber.isFinite(-Infinity); // false\nNumber.isFinite('foo'); // false\nNumber.isFinite('15'); // false\nNumber.isFinite(true); // false\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u53c2\u6570\u7c7b\u578b\u4e0d\u662f\u6570\u503c\uff0c<code>Number.isFinite</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <p><code>Number.isNaN()</code>\u7528\u6765\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a<code>NaN</code>\u3002</p> <pre><code>Number.isNaN(NaN) // true\nNumber.isNaN(15) // false\nNumber.isNaN('15') // false\nNumber.isNaN(true) // false\nNumber.isNaN(9/NaN) // true\nNumber.isNaN('true' / 0) // true\nNumber.isNaN('true' / 'true') // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u7c7b\u578b\u4e0d\u662f<code>NaN</code>\uff0c<code>Number.isNaN</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <p>\u5b83\u4eec\u4e0e\u4f20\u7edf\u7684\u5168\u5c40\u65b9\u6cd5<code>isFinite()</code>\u548c<code>isNaN()</code>\u7684\u533a\u522b\u5728\u4e8e\uff0c\u4f20\u7edf\u65b9\u6cd5\u5148\u8c03\u7528<code>Number()</code>\u5c06\u975e\u6570\u503c\u7684\u503c\u8f6c\u4e3a\u6570\u503c\uff0c\u518d\u8fdb\u884c\u5224\u65ad\uff0c\u800c\u8fd9\u4e24\u4e2a\u65b0\u65b9\u6cd5\u53ea\u5bf9\u6570\u503c\u6709\u6548\uff0c<code>Number.isFinite()</code>\u5bf9\u4e8e\u975e\u6570\u503c\u4e00\u5f8b\u8fd4\u56de<code>false</code>, <code>Number.isNaN()</code>\u53ea\u6709\u5bf9\u4e8e<code>NaN</code>\u624d\u8fd4\u56de<code>true</code>\uff0c\u975e<code>NaN</code>\u4e00\u5f8b\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>isFinite(25) // true\nisFinite(\"25\") // true\nNumber.isFinite(25) // true\nNumber.isFinite(\"25\") // false\n\nisNaN(NaN) // true\nisNaN(\"NaN\") // true\nNumber.isNaN(NaN) // true\nNumber.isNaN(\"NaN\") // false\nNumber.isNaN(1) // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#numberparseint-numberparsefloat","title":"Number.parseInt(), Number.parseFloat()","text":"<p>ES6 \u5c06\u5168\u5c40\u65b9\u6cd5<code>parseInt()</code>\u548c<code>parseFloat()</code>\uff0c\u79fb\u690d\u5230<code>Number</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u884c\u4e3a\u5b8c\u5168\u4fdd\u6301\u4e0d\u53d8\u3002</p> <pre><code>// ES5\u7684\u5199\u6cd5\nparseInt('12.34') // 12\nparseFloat('123.45#') // 123.45\n\n// ES6\u7684\u5199\u6cd5\nNumber.parseInt('12.34') // 12\nNumber.parseFloat('123.45#') // 123.45\n</code></pre> <p>\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0c\u662f\u9010\u6b65\u51cf\u5c11\u5168\u5c40\u6027\u65b9\u6cd5\uff0c\u4f7f\u5f97\u8bed\u8a00\u9010\u6b65\u6a21\u5757\u5316\u3002</p> <pre><code>Number.parseInt === parseInt // true\nNumber.parseFloat === parseFloat // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#numberisinteger","title":"Number.isInteger()","text":"<p><code>Number.isInteger()</code>\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6574\u6570\u3002</p> <pre><code>Number.isInteger(25) // true\nNumber.isInteger(25.1) // false\n</code></pre> <p>JavaScript \u5185\u90e8\uff0c\u6574\u6570\u548c\u6d6e\u70b9\u6570\u91c7\u7528\u7684\u662f\u540c\u6837\u7684\u50a8\u5b58\u65b9\u6cd5\uff0c\u6240\u4ee5 25  \u548c 25.0 \u88ab\u89c6\u4e3a\u540c\u4e00\u4e2a\u503c\u3002</p> <pre><code>Number.isInteger(25) // true\nNumber.isInteger(25.0) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u6570\u503c\uff0c<code>Number.isInteger</code>\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>Number.isInteger() // false\nNumber.isInteger(null) // false\nNumber.isInteger('15') // false\nNumber.isInteger(true) // false\n</code></pre> <p>\u6ce8\u610f\uff0c\u7531\u4e8e JavaScript \u91c7\u7528 IEEE 754 \u6807\u51c6\uff0c\u6570\u503c\u5b58\u50a8\u4e3a64\u4f4d\u53cc\u7cbe\u5ea6\u683c\u5f0f\uff0c\u6570\u503c\u7cbe\u5ea6\u6700\u591a\u53ef\u4ee5\u8fbe\u5230 53 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff081 \u4e2a\u9690\u85cf\u4f4d\u4e0e 52 \u4e2a\u6709\u6548\u4f4d\uff09\u3002\u5982\u679c\u6570\u503c\u7684\u7cbe\u5ea6\u8d85\u8fc7\u8fd9\u4e2a\u9650\u5ea6\uff0c\u7b2c54\u4f4d\u53ca\u540e\u9762\u7684\u4f4d\u5c31\u4f1a\u88ab\u4e22\u5f03\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>Number.isInteger</code>\u53ef\u80fd\u4f1a\u8bef\u5224\u3002</p> <pre><code>Number.isInteger(3.0000000000000002) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Number.isInteger</code>\u7684\u53c2\u6570\u660e\u660e\u4e0d\u662f\u6574\u6570\uff0c\u4f46\u662f\u4f1a\u8fd4\u56de<code>true</code>\u3002\u539f\u56e0\u5c31\u662f\u8fd9\u4e2a\u5c0f\u6570\u7684\u7cbe\u5ea6\u8fbe\u5230\u4e86\u5c0f\u6570\u70b9\u540e16\u4e2a\u5341\u8fdb\u5236\u4f4d\uff0c\u8f6c\u6210\u4e8c\u8fdb\u5236\u4f4d\u8d85\u8fc7\u4e8653\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u5bfc\u81f4\u6700\u540e\u7684\u90a3\u4e2a<code>2</code>\u88ab\u4e22\u5f03\u4e86\u3002</p> <p>\u7c7b\u4f3c\u7684\u60c5\u51b5\u8fd8\u6709\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u503c\u7684\u7edd\u5bf9\u503c\u5c0f\u4e8e<code>Number.MIN_VALUE</code>\uff085E-324\uff09\uff0c\u5373\u5c0f\u4e8e JavaScript \u80fd\u591f\u5206\u8fa8\u7684\u6700\u5c0f\u503c\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a 0\u3002\u8fd9\u65f6\uff0c<code>Number.isInteger</code>\u4e5f\u4f1a\u8bef\u5224\u3002</p> <pre><code>Number.isInteger(5E-324) // false\nNumber.isInteger(5E-325) // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>5E-325</code>\u7531\u4e8e\u503c\u592a\u5c0f\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a0\uff0c\u56e0\u6b64\u8fd4\u56de<code>true</code>\u3002</p> <p>\u603b\u4e4b\uff0c\u5982\u679c\u5bf9\u6570\u636e\u7cbe\u5ea6\u7684\u8981\u6c42\u8f83\u9ad8\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528<code>Number.isInteger()</code>\u5224\u65ad\u4e00\u4e2a\u6570\u503c\u662f\u5426\u4e3a\u6574\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#numberepsilon","title":"Number.EPSILON","text":"<p>ES6 \u5728<code>Number</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u65b0\u589e\u4e00\u4e2a\u6781\u5c0f\u7684\u5e38\u91cf<code>Number.EPSILON</code>\u3002\u6839\u636e\u89c4\u683c\uff0c\u5b83\u8868\u793a 1 \u4e0e\u5927\u4e8e 1 \u7684\u6700\u5c0f\u6d6e\u70b9\u6570\u4e4b\u95f4\u7684\u5dee\u3002</p> <p>\u5bf9\u4e8e 64 \u4f4d\u6d6e\u70b9\u6570\u6765\u8bf4\uff0c\u5927\u4e8e 1 \u7684\u6700\u5c0f\u6d6e\u70b9\u6570\u76f8\u5f53\u4e8e\u4e8c\u8fdb\u5236\u7684<code>1.00..001</code>\uff0c\u5c0f\u6570\u70b9\u540e\u9762\u6709\u8fde\u7eed 51 \u4e2a\u96f6\u3002\u8fd9\u4e2a\u503c\u51cf\u53bb 1 \u4e4b\u540e\uff0c\u5c31\u7b49\u4e8e 2 \u7684 -52 \u6b21\u65b9\u3002</p> <pre><code>Number.EPSILON === Math.pow(2, -52)\n// true\nNumber.EPSILON\n// 2.220446049250313e-16\nNumber.EPSILON.toFixed(20)\n// \"0.00000000000000022204\"\n</code></pre> <p><code>Number.EPSILON</code>\u5b9e\u9645\u4e0a\u662f JavaScript \u80fd\u591f\u8868\u793a\u7684\u6700\u5c0f\u7cbe\u5ea6\u3002\u8bef\u5dee\u5982\u679c\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff0c\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u5df2\u7ecf\u6ca1\u6709\u610f\u4e49\u4e86\uff0c\u5373\u4e0d\u5b58\u5728\u8bef\u5dee\u4e86\u3002</p> <p>\u5f15\u5165\u4e00\u4e2a\u8fd9\u4e48\u5c0f\u7684\u91cf\u7684\u76ee\u7684\uff0c\u5728\u4e8e\u4e3a\u6d6e\u70b9\u6570\u8ba1\u7b97\uff0c\u8bbe\u7f6e\u4e00\u4e2a\u8bef\u5dee\u8303\u56f4\u3002\u6211\u4eec\u77e5\u9053\u6d6e\u70b9\u6570\u8ba1\u7b97\u662f\u4e0d\u7cbe\u786e\u7684\u3002</p> <pre><code>0.1 + 0.2\n// 0.30000000000000004\n\n0.1 + 0.2 - 0.3\n// 5.551115123125783e-17\n\n5.551115123125783e-17.toFixed(20)\n// '0.00000000000000005551'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u89e3\u91ca\u4e86\uff0c\u4e3a\u4ec0\u4e48\u6bd4\u8f83<code>0.1 + 0.2</code>\u4e0e<code>0.3</code>\u5f97\u5230\u7684\u7ed3\u679c\u662f<code>false</code>\u3002</p> <pre><code>0.1 + 0.2 === 0.3 // false\n</code></pre> <p><code>Number.EPSILON</code>\u53ef\u4ee5\u7528\u6765\u8bbe\u7f6e\u201c\u80fd\u591f\u63a5\u53d7\u7684\u8bef\u5dee\u8303\u56f4\u201d\u3002\u6bd4\u5982\uff0c\u8bef\u5dee\u8303\u56f4\u8bbe\u4e3a 2 \u7684-50 \u6b21\u65b9\uff08\u5373<code>Number.EPSILON * Math.pow(2, 2)</code>\uff09\uff0c\u5373\u5982\u679c\u4e24\u4e2a\u6d6e\u70b9\u6570\u7684\u5dee\u5c0f\u4e8e\u8fd9\u4e2a\u503c\uff0c\u6211\u4eec\u5c31\u8ba4\u4e3a\u8fd9\u4e24\u4e2a\u6d6e\u70b9\u6570\u76f8\u7b49\u3002</p> <pre><code>5.551115123125783e-17 &lt; Number.EPSILON * Math.pow(2, 2)\n// true\n</code></pre> <p>\u56e0\u6b64\uff0c<code>Number.EPSILON</code>\u7684\u5b9e\u8d28\u662f\u4e00\u4e2a\u53ef\u4ee5\u63a5\u53d7\u7684\u6700\u5c0f\u8bef\u5dee\u8303\u56f4\u3002</p> <pre><code>function withinErrorMargin (left, right) {\n  return Math.abs(left - right) &lt; Number.EPSILON * Math.pow(2, 2);\n}\n\n0.1 + 0.2 === 0.3 // false\nwithinErrorMargin(0.1 + 0.2, 0.3) // true\n\n1.1 + 1.3 === 2.4 // false\nwithinErrorMargin(1.1 + 1.3, 2.4) // true\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e3a\u6d6e\u70b9\u6570\u8fd0\u7b97\uff0c\u90e8\u7f72\u4e86\u4e00\u4e2a\u8bef\u5dee\u68c0\u67e5\u51fd\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#numberissafeinteger","title":"\u5b89\u5168\u6574\u6570\u548c Number.isSafeInteger()","text":"<p>JavaScript \u80fd\u591f\u51c6\u786e\u8868\u793a\u7684\u6574\u6570\u8303\u56f4\u5728<code>-2^53</code>\u5230<code>2^53</code>\u4e4b\u95f4\uff08\u4e0d\u542b\u4e24\u4e2a\u7aef\u70b9\uff09\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u8303\u56f4\uff0c\u65e0\u6cd5\u7cbe\u786e\u8868\u793a\u8fd9\u4e2a\u503c\u3002</p> <pre><code>Math.pow(2, 53) // 9007199254740992\n\n9007199254740992  // 9007199254740992\n9007199254740993  // 9007199254740992\n\nMath.pow(2, 53) === Math.pow(2, 53) + 1\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8d85\u51fa 2 \u7684 53 \u6b21\u65b9\u4e4b\u540e\uff0c\u4e00\u4e2a\u6570\u5c31\u4e0d\u7cbe\u786e\u4e86\u3002</p> <p>ES6 \u5f15\u5165\u4e86<code>Number.MAX_SAFE_INTEGER</code>\u548c<code>Number.MIN_SAFE_INTEGER</code>\u8fd9\u4e24\u4e2a\u5e38\u91cf\uff0c\u7528\u6765\u8868\u793a\u8fd9\u4e2a\u8303\u56f4\u7684\u4e0a\u4e0b\u9650\u3002</p> <pre><code>Number.MAX_SAFE_INTEGER === Math.pow(2, 53) - 1\n// true\nNumber.MAX_SAFE_INTEGER === 9007199254740991\n// true\n\nNumber.MIN_SAFE_INTEGER === -Number.MAX_SAFE_INTEGER\n// true\nNumber.MIN_SAFE_INTEGER === -9007199254740991\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 JavaScript \u80fd\u591f\u7cbe\u786e\u8868\u793a\u7684\u6781\u9650\u3002</p> <p><code>Number.isSafeInteger()</code>\u5219\u662f\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6574\u6570\u662f\u5426\u843d\u5728\u8fd9\u4e2a\u8303\u56f4\u4e4b\u5185\u3002</p> <pre><code>Number.isSafeInteger('a') // false\nNumber.isSafeInteger(null) // false\nNumber.isSafeInteger(NaN) // false\nNumber.isSafeInteger(Infinity) // false\nNumber.isSafeInteger(-Infinity) // false\n\nNumber.isSafeInteger(3) // true\nNumber.isSafeInteger(1.2) // false\nNumber.isSafeInteger(9007199254740990) // true\nNumber.isSafeInteger(9007199254740992) // false\n\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false\n</code></pre> <p>\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8ddf\u5b89\u5168\u6574\u6570\u7684\u4e24\u4e2a\u8fb9\u754c\u503c\u6bd4\u8f83\u4e00\u4e0b\u3002</p> <pre><code>Number.isSafeInteger = function (n) {\n  return (typeof n === 'number' &amp;&amp;\n    Math.round(n) === n &amp;&amp;\n    Number.MIN_SAFE_INTEGER &lt;= n &amp;&amp;\n    n &lt;= Number.MAX_SAFE_INTEGER);\n}\n</code></pre> <p>\u5b9e\u9645\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u3002\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u843d\u5728\u5b89\u5168\u6574\u6570\u7684\u8303\u56f4\u5185\uff0c\u4e0d\u8981\u53ea\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\uff0c\u800c\u8981\u540c\u65f6\u9a8c\u8bc1\u53c2\u4e0e\u8fd0\u7b97\u7684\u6bcf\u4e2a\u503c\u3002</p> <pre><code>Number.isSafeInteger(9007199254740993)\n// false\nNumber.isSafeInteger(990)\n// true\nNumber.isSafeInteger(9007199254740993 - 990)\n// true\n9007199254740993 - 990\n// \u8fd4\u56de\u7ed3\u679c 9007199254740002\n// \u6b63\u786e\u7b54\u6848\u5e94\u8be5\u662f 9007199254740003\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>9007199254740993</code>\u4e0d\u662f\u4e00\u4e2a\u5b89\u5168\u6574\u6570\uff0c\u4f46\u662f<code>Number.isSafeInteger</code>\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u663e\u793a\u8ba1\u7b97\u7ed3\u679c\u662f\u5b89\u5168\u7684\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u8fd9\u4e2a\u6570\u8d85\u51fa\u4e86\u7cbe\u5ea6\u8303\u56f4\uff0c\u5bfc\u81f4\u5728\u8ba1\u7b97\u673a\u5185\u90e8\uff0c\u4ee5<code>9007199254740992</code>\u7684\u5f62\u5f0f\u50a8\u5b58\u3002</p> <pre><code>9007199254740993 === 9007199254740992\n// true\n</code></pre> <p>\u6240\u4ee5\uff0c\u5982\u679c\u53ea\u9a8c\u8bc1\u8fd0\u7b97\u7ed3\u679c\u662f\u5426\u4e3a\u5b89\u5168\u6574\u6570\uff0c\u5f88\u53ef\u80fd\u5f97\u5230\u9519\u8bef\u7ed3\u679c\u3002\u4e0b\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u540c\u65f6\u9a8c\u8bc1\u4e24\u4e2a\u8fd0\u7b97\u6570\u548c\u8fd0\u7b97\u7ed3\u679c\u3002</p> <pre><code>function trusty (left, right, result) {\n  if (\n    Number.isSafeInteger(left) &amp;&amp;\n    Number.isSafeInteger(right) &amp;&amp;\n    Number.isSafeInteger(result)\n  ) {\n    return result;\n  }\n  throw new RangeError('Operation cannot be trusted!');\n}\n\ntrusty(9007199254740993, 990, 9007199254740993 - 990)\n// RangeError: Operation cannot be trusted!\n\ntrusty(1, 2, 3)\n// 3\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#math","title":"Math \u5bf9\u8c61\u7684\u6269\u5c55","text":"<p>ES6 \u5728 Math \u5bf9\u8c61\u4e0a\u65b0\u589e\u4e86 17 \u4e2a\u4e0e\u6570\u5b66\u76f8\u5173\u7684\u65b9\u6cd5\u3002\u6240\u6709\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728 Math \u5bf9\u8c61\u4e0a\u8c03\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathtrunc","title":"Math.trunc()","text":"<p><code>Math.trunc</code>\u65b9\u6cd5\u7528\u4e8e\u53bb\u9664\u4e00\u4e2a\u6570\u7684\u5c0f\u6570\u90e8\u5206\uff0c\u8fd4\u56de\u6574\u6570\u90e8\u5206\u3002</p> <pre><code>Math.trunc(4.1) // 4\nMath.trunc(4.9) // 4\nMath.trunc(-4.1) // -4\nMath.trunc(-4.9) // -4\nMath.trunc(-0.1234) // -0\n</code></pre> <p>\u5bf9\u4e8e\u975e\u6570\u503c\uff0c<code>Math.trunc</code>\u5185\u90e8\u4f7f\u7528<code>Number</code>\u65b9\u6cd5\u5c06\u5176\u5148\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>Math.trunc('123.456') // 123\nMath.trunc(true) //1\nMath.trunc(false) // 0\nMath.trunc(null) // 0\n</code></pre> <p>\u5bf9\u4e8e\u7a7a\u503c\u548c\u65e0\u6cd5\u622a\u53d6\u6574\u6570\u7684\u503c\uff0c\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.trunc(NaN);      // NaN\nMath.trunc('foo');    // NaN\nMath.trunc();         // NaN\nMath.trunc(undefined) // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.trunc = Math.trunc || function(x) {\n  return x &lt; 0 ? Math.ceil(x) : Math.floor(x);\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathsign","title":"Math.sign()","text":"<p><code>Math.sign</code>\u65b9\u6cd5\u7528\u6765\u5224\u65ad\u4e00\u4e2a\u6570\u5230\u5e95\u662f\u6b63\u6570\u3001\u8d1f\u6570\u3001\u8fd8\u662f\u96f6\u3002\u5bf9\u4e8e\u975e\u6570\u503c\uff0c\u4f1a\u5148\u5c06\u5176\u8f6c\u6362\u4e3a\u6570\u503c\u3002</p> <p>\u5b83\u4f1a\u8fd4\u56de\u4e94\u79cd\u503c\u3002</p> <ul> <li>\u53c2\u6570\u4e3a\u6b63\u6570\uff0c\u8fd4\u56de<code>+1</code>\uff1b</li> <li>\u53c2\u6570\u4e3a\u8d1f\u6570\uff0c\u8fd4\u56de<code>-1</code>\uff1b</li> <li>\u53c2\u6570\u4e3a 0\uff0c\u8fd4\u56de<code>0</code>\uff1b</li> <li>\u53c2\u6570\u4e3a-0\uff0c\u8fd4\u56de<code>-0</code>;</li> <li>\u5176\u4ed6\u503c\uff0c\u8fd4\u56de<code>NaN</code>\u3002</li> </ul> <pre><code>Math.sign(-5) // -1\nMath.sign(5) // +1\nMath.sign(0) // +0\nMath.sign(-0) // -0\nMath.sign(NaN) // NaN\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u662f\u975e\u6570\u503c\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u3002\u5bf9\u4e8e\u90a3\u4e9b\u65e0\u6cd5\u8f6c\u4e3a\u6570\u503c\u7684\u503c\uff0c\u4f1a\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.sign('')  // 0\nMath.sign(true)  // +1\nMath.sign(false)  // 0\nMath.sign(null)  // 0\nMath.sign('9')  // +1\nMath.sign('foo')  // NaN\nMath.sign()  // NaN\nMath.sign(undefined)  // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.sign = Math.sign || function(x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x &gt; 0 ? 1 : -1;\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathcbrt","title":"Math.cbrt()","text":"<p><code>Math.cbrt()</code>\u65b9\u6cd5\u7528\u4e8e\u8ba1\u7b97\u4e00\u4e2a\u6570\u7684\u7acb\u65b9\u6839\u3002</p> <pre><code>Math.cbrt(-1) // -1\nMath.cbrt(0)  // 0\nMath.cbrt(1)  // 1\nMath.cbrt(2)  // 1.2599210498948732\n</code></pre> <p>\u5bf9\u4e8e\u975e\u6570\u503c\uff0c<code>Math.cbrt()</code>\u65b9\u6cd5\u5185\u90e8\u4e5f\u662f\u5148\u4f7f\u7528<code>Number()</code>\u65b9\u6cd5\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>Math.cbrt('8') // 2\nMath.cbrt('hello') // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.cbrt = Math.cbrt || function(x) {\n  var y = Math.pow(Math.abs(x), 1/3);\n  return x &lt; 0 ? -y : y;\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathclz32","title":"Math.clz32()","text":"<p><code>Math.clz32()</code>\u65b9\u6cd5\u5c06\u53c2\u6570\u8f6c\u4e3a 32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7684\u5f62\u5f0f\uff0c\u7136\u540e\u8fd4\u56de\u8fd9\u4e2a 32 \u4f4d\u503c\u91cc\u9762\u6709\u591a\u5c11\u4e2a\u524d\u5bfc 0\u3002</p> <pre><code>Math.clz32(0) // 32\nMath.clz32(1) // 31\nMath.clz32(1000) // 22\nMath.clz32(0b01000000000000000000000000000000) // 1\nMath.clz32(0b00100000000000000000000000000000) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c0 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5168\u4e3a 0\uff0c\u6240\u4ee5\u6709 32 \u4e2a\u524d\u5bfc 0\uff1b1 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>0b1</code>\uff0c\u53ea\u5360 1 \u4f4d\uff0c\u6240\u4ee5 32 \u4f4d\u4e4b\u4e2d\u6709 31 \u4e2a\u524d\u5bfc 0\uff1b1000 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>0b1111101000</code>\uff0c\u4e00\u5171\u6709 10 \u4f4d\uff0c\u6240\u4ee5 32 \u4f4d\u4e4b\u4e2d\u6709 22 \u4e2a\u524d\u5bfc 0\u3002</p> <p><code>clz32</code>\u8fd9\u4e2a\u51fd\u6570\u540d\u5c31\u6765\u81ea\u201dcount leading zero bits in 32-bit binary representation of a number\u201c\uff08\u8ba1\u7b97\u4e00\u4e2a\u6570\u7684 32 \u4f4d\u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u524d\u5bfc 0 \u7684\u4e2a\u6570\uff09\u7684\u7f29\u5199\u3002</p> <p>\u5de6\u79fb\u8fd0\u7b97\u7b26\uff08<code>&lt;&lt;</code>\uff09\u4e0e<code>Math.clz32</code>\u65b9\u6cd5\u76f4\u63a5\u76f8\u5173\u3002</p> <pre><code>Math.clz32(0) // 32\nMath.clz32(1) // 31\nMath.clz32(1 &lt;&lt; 1) // 30\nMath.clz32(1 &lt;&lt; 2) // 29\nMath.clz32(1 &lt;&lt; 29) // 2\n</code></pre> <p>\u5bf9\u4e8e\u5c0f\u6570\uff0c<code>Math.clz32</code>\u65b9\u6cd5\u53ea\u8003\u8651\u6574\u6570\u90e8\u5206\u3002</p> <pre><code>Math.clz32(3.2) // 30\nMath.clz32(3.9) // 30\n</code></pre> <p>\u5bf9\u4e8e\u7a7a\u503c\u6216\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c<code>Math.clz32</code>\u65b9\u6cd5\u4f1a\u5c06\u5b83\u4eec\u5148\u8f6c\u4e3a\u6570\u503c\uff0c\u7136\u540e\u518d\u8ba1\u7b97\u3002</p> <pre><code>Math.clz32() // 32\nMath.clz32(NaN) // 32\nMath.clz32(Infinity) // 32\nMath.clz32(null) // 32\nMath.clz32('foo') // 32\nMath.clz32([]) // 32\nMath.clz32({}) // 32\nMath.clz32(true) // 31\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathimul","title":"Math.imul()","text":"<p><code>Math.imul</code>\u65b9\u6cd5\u8fd4\u56de\u4e24\u4e2a\u6570\u4ee5 32 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570\u5f62\u5f0f\u76f8\u4e58\u7684\u7ed3\u679c\uff0c\u8fd4\u56de\u7684\u4e5f\u662f\u4e00\u4e2a 32 \u4f4d\u7684\u5e26\u7b26\u53f7\u6574\u6570\u3002</p> <pre><code>Math.imul(2, 4)   // 8\nMath.imul(-1, 8)  // -8\nMath.imul(-2, -2) // 4\n</code></pre> <p>\u5982\u679c\u53ea\u8003\u8651\u6700\u540e 32 \u4f4d\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c<code>Math.imul(a, b)</code>\u4e0e<code>a * b</code>\u7684\u7ed3\u679c\u662f\u76f8\u540c\u7684\uff0c\u5373\u8be5\u65b9\u6cd5\u7b49\u540c\u4e8e<code>(a * b)|0</code>\u7684\u6548\u679c\uff08\u8d85\u8fc7 32 \u4f4d\u7684\u90e8\u5206\u6ea2\u51fa\uff09\u3002\u4e4b\u6240\u4ee5\u9700\u8981\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u662f\u56e0\u4e3a JavaScript \u6709\u7cbe\u5ea6\u9650\u5236\uff0c\u8d85\u8fc7 2 \u7684 53 \u6b21\u65b9\u7684\u503c\u65e0\u6cd5\u7cbe\u786e\u8868\u793a\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u5f88\u5927\u7684\u6570\u7684\u4e58\u6cd5\uff0c\u4f4e\u4f4d\u6570\u503c\u5f80\u5f80\u90fd\u662f\u4e0d\u7cbe\u786e\u7684\uff0c<code>Math.imul</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6b63\u786e\u7684\u4f4e\u4f4d\u6570\u503c\u3002</p> <pre><code>(0x7fffffff * 0x7fffffff)|0 // 0\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e2a\u4e58\u6cd5\u7b97\u5f0f\uff0c\u8fd4\u56de\u7ed3\u679c\u4e3a 0\u3002\u4f46\u662f\u7531\u4e8e\u8fd9\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u6700\u4f4e\u4f4d\u90fd\u662f 1\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7ed3\u679c\u80af\u5b9a\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u4e3a\u6839\u636e\u4e8c\u8fdb\u5236\u4e58\u6cd5\uff0c\u8ba1\u7b97\u7ed3\u679c\u7684\u4e8c\u8fdb\u5236\u6700\u4f4e\u4f4d\u5e94\u8be5\u4e5f\u662f 1\u3002\u8fd9\u4e2a\u9519\u8bef\u5c31\u662f\u56e0\u4e3a\u5b83\u4eec\u7684\u4e58\u79ef\u8d85\u8fc7\u4e86 2 \u7684 53 \u6b21\u65b9\uff0cJavaScript \u65e0\u6cd5\u4fdd\u5b58\u989d\u5916\u7684\u7cbe\u5ea6\uff0c\u5c31\u628a\u4f4e\u4f4d\u7684\u503c\u90fd\u53d8\u6210\u4e86 0\u3002<code>Math.imul</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6b63\u786e\u7684\u503c 1\u3002</p> <pre><code>Math.imul(0x7fffffff, 0x7fffffff) // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathfround","title":"Math.fround()","text":"<p><code>Math.fround</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u768432\u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u5f62\u5f0f\u3002</p> <p>\u5bf9\u4e8e32\u4f4d\u5355\u7cbe\u5ea6\u683c\u5f0f\u6765\u8bf4\uff0c\u6570\u503c\u7cbe\u5ea6\u662f24\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff081 \u4f4d\u9690\u85cf\u4f4d\u4e0e 23 \u4f4d\u6709\u6548\u4f4d\uff09\uff0c\u6240\u4ee5\u5bf9\u4e8e -2<sup>24</sup> \u81f3 2<sup>24</sup> \u4e4b\u95f4\u7684\u6574\u6570\uff08\u4e0d\u542b\u4e24\u4e2a\u7aef\u70b9\uff09\uff0c\u8fd4\u56de\u7ed3\u679c\u4e0e\u53c2\u6570\u672c\u8eab\u4e00\u81f4\u3002</p> <pre><code>Math.fround(0)   // 0\nMath.fround(1) \u00a0 // 1\nMath.fround(2 ** 24 - 1)   // 16777215\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u7684\u7edd\u5bf9\u503c\u5927\u4e8e 2<sup>24</sup>\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4fbf\u5f00\u59cb\u4e22\u5931\u7cbe\u5ea6\u3002</p> <pre><code>Math.fround(2 ** 24)       // 16777216\nMath.fround(2 ** 24 + 1)   // 16777216\n</code></pre> <p><code>Math.fround</code>\u65b9\u6cd5\u7684\u4e3b\u8981\u4f5c\u7528\uff0c\u662f\u5c0664\u4f4d\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u8f6c\u4e3a32\u4f4d\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u3002\u5982\u679c\u5c0f\u6570\u7684\u7cbe\u5ea6\u8d85\u8fc724\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u8fd4\u56de\u503c\u5c31\u4f1a\u4e0d\u540c\u4e8e\u539f\u503c\uff0c\u5426\u5219\u8fd4\u56de\u503c\u4e0d\u53d8\uff08\u5373\u4e0e64\u4f4d\u53cc\u7cbe\u5ea6\u503c\u4e00\u81f4\uff09\u3002</p> <pre><code>// \u672a\u4e22\u5931\u6709\u6548\u7cbe\u5ea6\nMath.fround(1.125) // 1.125\nMath.fround(7.25)  // 7.25\n\n// \u4e22\u5931\u7cbe\u5ea6\nMath.fround(0.3) \u00a0 // 0.30000001192092896\nMath.fround(0.7) \u00a0 // 0.699999988079071\nMath.fround(1.0000000123) // 1\n</code></pre> <p>\u5bf9\u4e8e <code>NaN</code> \u548c <code>Infinity</code>\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u539f\u503c\u3002\u5bf9\u4e8e\u5176\u5b83\u7c7b\u578b\u7684\u975e\u6570\u503c\uff0c<code>Math.fround</code> \u65b9\u6cd5\u4f1a\u5148\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\uff0c\u518d\u8fd4\u56de\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u3002</p> <pre><code>Math.fround(NaN)      // NaN\nMath.fround(Infinity) // Infinity\n\nMath.fround('5')      // 5\nMath.fround(true)     // 1\nMath.fround(null)     // 0\nMath.fround([])       // 0\nMath.fround({})       // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.fround = Math.fround || function (x) {\n  return new Float32Array([x])[0];\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#mathhypot","title":"Math.hypot()","text":"<p><code>Math.hypot</code>\u65b9\u6cd5\u8fd4\u56de\u6240\u6709\u53c2\u6570\u7684\u5e73\u65b9\u548c\u7684\u5e73\u65b9\u6839\u3002</p> <pre><code>Math.hypot(3, 4);        // 5\nMath.hypot(3, 4, 5);     // 7.0710678118654755\nMath.hypot();            // 0\nMath.hypot(NaN);         // NaN\nMath.hypot(3, 4, 'foo'); // NaN\nMath.hypot(3, 4, '5');   // 7.0710678118654755\nMath.hypot(-3);          // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c3 \u7684\u5e73\u65b9\u52a0\u4e0a 4 \u7684\u5e73\u65b9\uff0c\u7b49\u4e8e 5 \u7684\u5e73\u65b9\u3002</p> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u6570\u503c\uff0c<code>Math.hypot</code>\u65b9\u6cd5\u4f1a\u5c06\u5176\u8f6c\u4e3a\u6570\u503c\u3002\u53ea\u8981\u6709\u4e00\u4e2a\u53c2\u6570\u65e0\u6cd5\u8f6c\u4e3a\u6570\u503c\uff0c\u5c31\u4f1a\u8fd4\u56de NaN\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_3","title":"\u5bf9\u6570\u65b9\u6cd5","text":"<p>ES6 \u65b0\u589e\u4e86 4 \u4e2a\u5bf9\u6570\u76f8\u5173\u65b9\u6cd5\u3002</p> <p>\uff081\uff09 Math.expm1()</p> <p><code>Math.expm1(x)</code>\u8fd4\u56de e<sup>x</sup> - 1\uff0c\u5373<code>Math.exp(x) - 1</code>\u3002</p> <pre><code>Math.expm1(-1) // -0.6321205588285577\nMath.expm1(0)  // 0\nMath.expm1(1)  // 1.718281828459045\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.expm1 = Math.expm1 || function(x) {\n  return Math.exp(x) - 1;\n};\n</code></pre> <p>\uff082\uff09Math.log1p()</p> <p><code>Math.log1p(x)</code>\u65b9\u6cd5\u8fd4\u56de<code>1 + x</code>\u7684\u81ea\u7136\u5bf9\u6570\uff0c\u5373<code>Math.log(1 + x)</code>\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e-1\uff0c\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>Math.log1p(1)  // 0.6931471805599453\nMath.log1p(0)  // 0\nMath.log1p(-1) // -Infinity\nMath.log1p(-2) // NaN\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log1p = Math.log1p || function(x) {\n  return Math.log(1 + x);\n};\n</code></pre> <p>\uff083\uff09Math.log10()</p> <p><code>Math.log10(x)</code>\u8fd4\u56de\u4ee5 10 \u4e3a\u5e95\u7684<code>x</code>\u7684\u5bf9\u6570\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e 0\uff0c\u5219\u8fd4\u56de NaN\u3002</p> <pre><code>Math.log10(2)      // 0.3010299956639812\nMath.log10(1)      // 0\nMath.log10(0)      // -Infinity\nMath.log10(-2)     // NaN\nMath.log10(100000) // 5\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log10 = Math.log10 || function(x) {\n  return Math.log(x) / Math.LN10;\n};\n</code></pre> <p>\uff084\uff09Math.log2()</p> <p><code>Math.log2(x)</code>\u8fd4\u56de\u4ee5 2 \u4e3a\u5e95\u7684<code>x</code>\u7684\u5bf9\u6570\u3002\u5982\u679c<code>x</code>\u5c0f\u4e8e 0\uff0c\u5219\u8fd4\u56de NaN\u3002</p> <pre><code>Math.log2(3)       // 1.584962500721156\nMath.log2(2)       // 1\nMath.log2(1)       // 0\nMath.log2(0)       // -Infinity\nMath.log2(-2)      // NaN\nMath.log2(1024)    // 10\nMath.log2(1 &lt;&lt; 29) // 29\n</code></pre> <p>\u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u65b9\u6cd5\u7684\u73af\u5883\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u3002</p> <pre><code>Math.log2 = Math.log2 || function(x) {\n  return Math.log(x) / Math.LN2;\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_4","title":"\u53cc\u66f2\u51fd\u6570\u65b9\u6cd5","text":"<p>ES6 \u65b0\u589e\u4e86 6 \u4e2a\u53cc\u66f2\u51fd\u6570\u65b9\u6cd5\u3002</p> <ul> <li><code>Math.sinh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u6b63\u5f26\uff08hyperbolic sine\uff09</li> <li><code>Math.cosh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u4f59\u5f26\uff08hyperbolic cosine\uff09</li> <li><code>Math.tanh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cc\u66f2\u6b63\u5207\uff08hyperbolic tangent\uff09</li> <li><code>Math.asinh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u6b63\u5f26\uff08inverse hyperbolic sine\uff09</li> <li><code>Math.acosh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u4f59\u5f26\uff08inverse hyperbolic cosine\uff09</li> <li><code>Math.atanh(x)</code> \u8fd4\u56de<code>x</code>\u7684\u53cd\u53cc\u66f2\u6b63\u5207\uff08inverse hyperbolic tangent\uff09</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#bigint","title":"BigInt \u6570\u636e\u7c7b\u578b","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_5","title":"\u7b80\u4ecb","text":"<p>JavaScript \u6240\u6709\u6570\u5b57\u90fd\u4fdd\u5b58\u6210 64 \u4f4d\u6d6e\u70b9\u6570\uff0c\u8fd9\u7ed9\u6570\u503c\u7684\u8868\u793a\u5e26\u6765\u4e86\u4e24\u5927\u9650\u5236\u3002\u4e00\u662f\u6570\u503c\u7684\u7cbe\u5ea6\u53ea\u80fd\u5230 53 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff08\u76f8\u5f53\u4e8e 16 \u4e2a\u5341\u8fdb\u5236\u4f4d\uff09\uff0c\u5927\u4e8e\u8fd9\u4e2a\u8303\u56f4\u7684\u6574\u6570\uff0cJavaScript \u662f\u65e0\u6cd5\u7cbe\u786e\u8868\u793a\uff0c\u8fd9\u4f7f\u5f97 JavaScript \u4e0d\u9002\u5408\u8fdb\u884c\u79d1\u5b66\u548c\u91d1\u878d\u65b9\u9762\u7684\u7cbe\u786e\u8ba1\u7b97\u3002\u4e8c\u662f\u5927\u4e8e\u6216\u7b49\u4e8e2\u76841024\u6b21\u65b9\u7684\u6570\u503c\uff0cJavaScript \u65e0\u6cd5\u8868\u793a\uff0c\u4f1a\u8fd4\u56de<code>Infinity</code>\u3002</p> <pre><code>// \u8d85\u8fc7 53 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7684\u6570\u503c\uff0c\u65e0\u6cd5\u4fdd\u6301\u7cbe\u5ea6\nMath.pow(2, 53) === Math.pow(2, 53) + 1 // true\n\n// \u8d85\u8fc7 2 \u7684 1024 \u6b21\u65b9\u7684\u6570\u503c\uff0c\u65e0\u6cd5\u8868\u793a\nMath.pow(2, 1024) // Infinity\n</code></pre> <p>ES2020 \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u6570\u636e\u7c7b\u578b BigInt\uff08\u5927\u6574\u6570\uff09\uff0c\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u662f ECMAScript \u7684\u7b2c\u516b\u79cd\u6570\u636e\u7c7b\u578b\u3002BigInt \u53ea\u7528\u6765\u8868\u793a\u6574\u6570\uff0c\u6ca1\u6709\u4f4d\u6570\u7684\u9650\u5236\uff0c\u4efb\u4f55\u4f4d\u6570\u7684\u6574\u6570\u90fd\u53ef\u4ee5\u7cbe\u786e\u8868\u793a\u3002</p> <pre><code>const a = 2172141653n;\nconst b = 15346349309n;\n\n// BigInt \u53ef\u4ee5\u4fdd\u6301\u7cbe\u5ea6\na * b // 33334444555566667777n\n\n// \u666e\u901a\u6574\u6570\u65e0\u6cd5\u4fdd\u6301\u7cbe\u5ea6\nNumber(a) * Number(b) // 33334444555566670000\n</code></pre> <p>\u4e3a\u4e86\u4e0e Number \u7c7b\u578b\u533a\u522b\uff0cBigInt \u7c7b\u578b\u7684\u6570\u636e\u5fc5\u987b\u6dfb\u52a0\u540e\u7f00<code>n</code>\u3002</p> <pre><code>1234 // \u666e\u901a\u6574\u6570\n1234n // BigInt\n\n// BigInt \u7684\u8fd0\u7b97\n1n + 2n // 3n\n</code></pre> <p>BigInt \u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u8fdb\u5236\u8868\u793a\uff0c\u90fd\u8981\u52a0\u4e0a\u540e\u7f00<code>n</code>\u3002</p> <pre><code>0b1101n // \u4e8c\u8fdb\u5236\n0o777n // \u516b\u8fdb\u5236\n0xFFn // \u5341\u516d\u8fdb\u5236\n</code></pre> <p>BigInt \u4e0e\u666e\u901a\u6574\u6570\u662f\u4e24\u79cd\u503c\uff0c\u5b83\u4eec\u4e4b\u95f4\u5e76\u4e0d\u76f8\u7b49\u3002</p> <pre><code>42n === 42 // false\n</code></pre> <p><code>typeof</code>\u8fd0\u7b97\u7b26\u5bf9\u4e8e BigInt \u7c7b\u578b\u7684\u6570\u636e\u8fd4\u56de<code>bigint</code>\u3002</p> <pre><code>typeof 123n // 'bigint'\n</code></pre> <p>BigInt \u53ef\u4ee5\u4f7f\u7528\u8d1f\u53f7\uff08<code>-</code>\uff09\uff0c\u4f46\u662f\u4e0d\u80fd\u4f7f\u7528\u6b63\u53f7\uff08<code>+</code>\uff09\uff0c\u56e0\u4e3a\u4f1a\u4e0e asm.js \u51b2\u7a81\u3002</p> <pre><code>-42n // \u6b63\u786e\n+42n // \u62a5\u9519\n</code></pre> <p>JavaScript \u4ee5\u524d\u4e0d\u80fd\u8ba1\u7b9770\u7684\u9636\u4e58\uff08\u5373<code>70!</code>\uff09\uff0c\u56e0\u4e3a\u8d85\u51fa\u4e86\u53ef\u4ee5\u8868\u793a\u7684\u7cbe\u5ea6\u3002</p> <pre><code>let p = 1;\nfor (let i = 1; i &lt;= 70; i++) {\n  p *= i;\n}\nconsole.log(p); // 1.197857166996989e+100\n</code></pre> <p>\u73b0\u5728\u652f\u6301\u5927\u6574\u6570\u4e86\uff0c\u5c31\u53ef\u4ee5\u7b97\u4e86\uff0c\u6d4f\u89c8\u5668\u7684\u5f00\u53d1\u8005\u5de5\u5177\u8fd0\u884c\u4e0b\u9762\u4ee3\u7801\uff0c\u5c31OK\u3002</p> <pre><code>let p = 1n;\nfor (let i = 1n; i &lt;= 70n; i++) {\n  p *= i;\n}\nconsole.log(p); // 11978571...00000000n\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#bigint_1","title":"BigInt \u51fd\u6570","text":"<p>JavaScript \u539f\u751f\u63d0\u4f9b<code>BigInt</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u5b83\u751f\u6210 BigInt \u7c7b\u578b\u7684\u6570\u503c\u3002\u8f6c\u6362\u89c4\u5219\u57fa\u672c\u4e0e<code>Number()</code>\u4e00\u81f4\uff0c\u5c06\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u8f6c\u4e3a BigInt\u3002</p> <pre><code>BigInt(123) // 123n\nBigInt('123') // 123n\nBigInt(false) // 0n\nBigInt(true) // 1n\n</code></pre> <p><code>BigInt()</code>\u51fd\u6570\u5fc5\u987b\u6709\u53c2\u6570\uff0c\u800c\u4e14\u53c2\u6570\u5fc5\u987b\u53ef\u4ee5\u6b63\u5e38\u8f6c\u4e3a\u6570\u503c\uff0c\u4e0b\u9762\u7684\u7528\u6cd5\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>new BigInt() // TypeError\nBigInt(undefined) //TypeError\nBigInt(null) // TypeError\nBigInt('123n') // SyntaxError\nBigInt('abc') // SyntaxError\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c24\u5176\u503c\u5f97\u6ce8\u610f\u5b57\u7b26\u4e32<code>123n</code>\u65e0\u6cd5\u89e3\u6790\u6210 Number \u7c7b\u578b\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\u3002</p> <p>\u53c2\u6570\u5982\u679c\u662f\u5c0f\u6570\uff0c\u4e5f\u4f1a\u62a5\u9519\u3002</p> <pre><code>BigInt(1.5) // RangeError\nBigInt('1.5') // SyntaxError\n</code></pre> <p>BigInt \u7ee7\u627f\u4e86 Object \u5bf9\u8c61\u7684\u4e24\u4e2a\u5b9e\u4f8b\u65b9\u6cd5\u3002</p> <ul> <li><code>BigInt.prototype.toString()</code></li> <li><code>BigInt.prototype.valueOf()</code></li> </ul> <p>\u5b83\u8fd8\u7ee7\u627f\u4e86 Number \u5bf9\u8c61\u7684\u4e00\u4e2a\u5b9e\u4f8b\u65b9\u6cd5\u3002</p> <ul> <li><code>BigInt.prototype.toLocaleString()</code></li> </ul> <p>\u6b64\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u4e09\u4e2a\u9759\u6001\u65b9\u6cd5\u3002</p> <ul> <li><code>BigInt.asUintN(width, BigInt)</code>\uff1a \u7ed9\u5b9a\u7684 BigInt \u8f6c\u4e3a 0 \u5230 2<sup>width</sup> - 1 \u4e4b\u95f4\u5bf9\u5e94\u7684\u503c\u3002</li> <li><code>BigInt.asIntN(width, BigInt)</code>\uff1a\u7ed9\u5b9a\u7684 BigInt \u8f6c\u4e3a -2<sup>width - 1</sup> \u5230 2<sup>width - 1</sup> - 1 \u4e4b\u95f4\u5bf9\u5e94\u7684\u503c\u3002</li> <li><code>BigInt.parseInt(string[, radix])</code>\uff1a\u8fd1\u4f3c\u4e8e<code>Number.parseInt()</code>\uff0c\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6307\u5b9a\u8fdb\u5236\u7684 BigInt\u3002</li> </ul> <pre><code>const max = 2n ** (64n - 1n) - 1n;\n\nBigInt.asIntN(64, max)\n// 9223372036854775807n\nBigInt.asIntN(64, max + 1n)\n// -9223372036854775808n\nBigInt.asUintN(64, max + 1n)\n// 9223372036854775808n\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>max</code>\u662f64\u4f4d\u5e26\u7b26\u53f7\u7684 BigInt \u6240\u80fd\u8868\u793a\u7684\u6700\u5927\u503c\u3002\u5982\u679c\u5bf9\u8fd9\u4e2a\u503c\u52a0<code>1n</code>\uff0c<code>BigInt.asIntN()</code>\u5c06\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8d1f\u503c\uff0c\u56e0\u4e3a\u8fd9\u65f6\u65b0\u589e\u7684\u4e00\u4f4d\u5c06\u88ab\u89e3\u91ca\u4e3a\u7b26\u53f7\u4f4d\u3002\u800c<code>BigInt.asUintN()</code>\u65b9\u6cd5\u7531\u4e8e\u4e0d\u5b58\u5728\u7b26\u53f7\u4f4d\uff0c\u6240\u4ee5\u53ef\u4ee5\u6b63\u786e\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u5982\u679c<code>BigInt.asIntN()</code>\u548c<code>BigInt.asUintN()</code>\u6307\u5b9a\u7684\u4f4d\u6570\uff0c\u5c0f\u4e8e\u6570\u503c\u672c\u8eab\u7684\u4f4d\u6570\uff0c\u90a3\u4e48\u5934\u90e8\u7684\u4f4d\u5c06\u88ab\u820d\u5f03\u3002</p> <pre><code>const max = 2n ** (64n - 1n) - 1n;\n\nBigInt.asIntN(32, max) // -1n\nBigInt.asUintN(32, max) // 4294967295n\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>max</code>\u662f\u4e00\u4e2a64\u4f4d\u7684 BigInt\uff0c\u5982\u679c\u8f6c\u4e3a32\u4f4d\uff0c\u524d\u9762\u768432\u4f4d\u90fd\u4f1a\u88ab\u820d\u5f03\u3002</p> <p>\u4e0b\u9762\u662f<code>BigInt.parseInt()</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>// Number.parseInt() \u4e0e BigInt.parseInt() \u7684\u5bf9\u6bd4\nNumber.parseInt('9007199254740993', 10)\n// 9007199254740992\nBigInt.parseInt('9007199254740993', 10)\n// 9007199254740993n\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u6709\u6548\u6570\u5b57\u8d85\u51fa\u4e86\u6700\u5927\u9650\u5ea6\uff0c<code>Number.parseInt</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e0d\u7cbe\u786e\u7684\uff0c\u800c<code>BigInt.parseInt</code>\u65b9\u6cd5\u6b63\u786e\u8fd4\u56de\u4e86\u5bf9\u5e94\u7684 BigInt\u3002</p> <p>\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0cBigInt \u65b0\u589e\u4e86\u4e24\u4e2a\u7c7b\u578b<code>BigUint64Array</code>\u548c<code>BigInt64Array</code>\uff0c\u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u8fd4\u56de\u7684\u90fd\u662f64\u4f4d BigInt\u3002<code>DataView</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u65b9\u6cd5<code>DataView.prototype.getBigInt64()</code>\u548c<code>DataView.prototype.getBigUint64()</code>\uff0c\u8fd4\u56de\u7684\u4e5f\u662f BigInt\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_6","title":"\u8f6c\u6362\u89c4\u5219","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>Boolean()</code>\u3001<code>Number()</code>\u548c<code>String()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\uff0c\u5c06 BigInt \u53ef\u4ee5\u8f6c\u4e3a\u5e03\u5c14\u503c\u3001\u6570\u503c\u548c\u5b57\u7b26\u4e32\u7c7b\u578b\u3002</p> <pre><code>Boolean(0n) // false\nBoolean(1n) // true\nNumber(1n)  // 1\nString(1n)  // \"1\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6ce8\u610f\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8f6c\u4e3a\u5b57\u7b26\u4e32\u65f6\u540e\u7f00<code>n</code>\u4f1a\u6d88\u5931\u3002</p> <p>\u53e6\u5916\uff0c\u53d6\u53cd\u8fd0\u7b97\u7b26\uff08<code>!</code>\uff09\u4e5f\u53ef\u4ee5\u5c06 BigInt \u8f6c\u4e3a\u5e03\u5c14\u503c\u3002</p> <pre><code>!0n // true\n!1n // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_7","title":"\u6570\u5b66\u8fd0\u7b97","text":"<p>\u6570\u5b66\u8fd0\u7b97\u65b9\u9762\uff0cBigInt \u7c7b\u578b\u7684<code>+</code>\u3001<code>-</code>\u3001<code>*</code>\u548c<code>**</code>\u8fd9\u56db\u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26\uff0c\u4e0e Number \u7c7b\u578b\u7684\u884c\u4e3a\u4e00\u81f4\u3002\u9664\u6cd5\u8fd0\u7b97<code>/</code>\u4f1a\u820d\u53bb\u5c0f\u6570\u90e8\u5206\uff0c\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\u3002</p> <pre><code>9n / 5n\n// 1n\n</code></pre> <p>\u51e0\u4e4e\u6240\u6709\u7684\u6570\u503c\u8fd0\u7b97\u7b26\u90fd\u53ef\u4ee5\u7528\u5728 BigInt\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u4f8b\u5916\u3002</p> <ul> <li>\u4e0d\u5e26\u7b26\u53f7\u7684\u53f3\u79fb\u4f4d\u8fd0\u7b97\u7b26<code>&gt;&gt;&gt;</code></li> <li>\u4e00\u5143\u7684\u6c42\u6b63\u8fd0\u7b97\u7b26<code>+</code></li> </ul> <p>\u4e0a\u9762\u4e24\u4e2a\u8fd0\u7b97\u7b26\u7528\u5728 BigInt \u4f1a\u62a5\u9519\u3002\u524d\u8005\u662f\u56e0\u4e3a<code>&gt;&gt;&gt;</code>\u8fd0\u7b97\u7b26\u662f\u4e0d\u5e26\u7b26\u53f7\u7684\uff0c\u4f46\u662f BigInt \u603b\u662f\u5e26\u6709\u7b26\u53f7\u7684\uff0c\u5bfc\u81f4\u8be5\u8fd0\u7b97\u65e0\u610f\u4e49\uff0c\u5b8c\u5168\u7b49\u540c\u4e8e\u53f3\u79fb\u8fd0\u7b97\u7b26<code>&gt;&gt;</code>\u3002\u540e\u8005\u662f\u56e0\u4e3a\u4e00\u5143\u8fd0\u7b97\u7b26<code>+</code>\u5728 asm.js \u91cc\u9762\u603b\u662f\u8fd4\u56de Number \u7c7b\u578b\uff0c\u4e3a\u4e86\u4e0d\u7834\u574f asm.js \u5c31\u89c4\u5b9a<code>+1n</code>\u4f1a\u62a5\u9519\u3002</p> <p>BigInt \u4e0d\u80fd\u4e0e\u666e\u901a\u6570\u503c\u8fdb\u884c\u6df7\u5408\u8fd0\u7b97\u3002</p> <pre><code>1n + 1.3 // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62a5\u9519\u662f\u56e0\u4e3a\u65e0\u8bba\u8fd4\u56de\u7684\u662f BigInt \u6216 Number\uff0c\u90fd\u4f1a\u5bfc\u81f4\u4e22\u5931\u7cbe\u5ea6\u4fe1\u606f\u3002\u6bd4\u5982<code>(2n**53n + 1n) + 0.5</code>\u8fd9\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u8fd4\u56de BigInt \u7c7b\u578b\uff0c<code>0.5</code>\u8fd9\u4e2a\u5c0f\u6570\u90e8\u5206\u4f1a\u4e22\u5931\uff1b\u5982\u679c\u8fd4\u56de Number \u7c7b\u578b\uff0c\u6709\u6548\u7cbe\u5ea6\u53ea\u80fd\u4fdd\u6301 53 \u4f4d\uff0c\u5bfc\u81f4\u7cbe\u5ea6\u4e0b\u964d\u3002</p> <p>\u540c\u6837\u7684\u539f\u56e0\uff0c\u5982\u679c\u4e00\u4e2a\u6807\u51c6\u5e93\u51fd\u6570\u7684\u53c2\u6570\u9884\u671f\u662f Number \u7c7b\u578b\uff0c\u4f46\u662f\u5f97\u5230\u7684\u662f\u4e00\u4e2a BigInt\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u9519\u8bef\u7684\u5199\u6cd5\nMath.sqrt(4n) // \u62a5\u9519\n\n// \u6b63\u786e\u7684\u5199\u6cd5\nMath.sqrt(Number(4n)) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Math.sqrt</code>\u7684\u53c2\u6570\u9884\u671f\u662f Number \u7c7b\u578b\uff0c\u5982\u679c\u662f BigInt \u5c31\u4f1a\u62a5\u9519\uff0c\u5fc5\u987b\u5148\u7528<code>Number</code>\u65b9\u6cd5\u8f6c\u4e00\u4e0b\u7c7b\u578b\uff0c\u624d\u80fd\u8fdb\u884c\u8ba1\u7b97\u3002</p> <p>asm.js \u91cc\u9762\uff0c<code>|0</code>\u8ddf\u5728\u4e00\u4e2a\u6570\u503c\u7684\u540e\u9762\u4f1a\u8fd4\u56de\u4e00\u4e2a32\u4f4d\u6574\u6570\u3002\u6839\u636e\u4e0d\u80fd\u4e0e Number \u7c7b\u578b\u6df7\u5408\u8fd0\u7b97\u7684\u89c4\u5219\uff0cBigInt \u5982\u679c\u4e0e<code>|0</code>\u8fdb\u884c\u8fd0\u7b97\u4f1a\u62a5\u9519\u3002</p> <pre><code>1n | 0 // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/07-number/#_8","title":"\u5176\u4ed6\u8fd0\u7b97","text":"<p>BigInt \u5bf9\u5e94\u7684\u5e03\u5c14\u503c\uff0c\u4e0e Number \u7c7b\u578b\u4e00\u81f4\uff0c\u5373<code>0n</code>\u4f1a\u8f6c\u4e3a<code>false</code>\uff0c\u5176\u4ed6\u503c\u8f6c\u4e3a<code>true</code>\u3002</p> <pre><code>if (0n) {\n  console.log('if');\n} else {\n  console.log('else');\n}\n// else\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>0n</code>\u5bf9\u5e94<code>false</code>\uff0c\u6240\u4ee5\u4f1a\u8fdb\u5165<code>else</code>\u5b50\u53e5\u3002</p> <p>\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08\u6bd4\u5982<code>&gt;</code>\uff09\u548c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>==</code>\uff09\u5141\u8bb8 BigInt \u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u6df7\u5408\u8ba1\u7b97\uff0c\u56e0\u4e3a\u8fd9\u6837\u505a\u4e0d\u4f1a\u635f\u5931\u7cbe\u5ea6\u3002</p> <pre><code>0n &lt; 1 // true\n0n &lt; true // true\n0n == 0 // true\n0n == false // true\n0n === 0 // false\n</code></pre> <p>BigInt \u4e0e\u5b57\u7b26\u4e32\u6df7\u5408\u8fd0\u7b97\u65f6\uff0c\u4f1a\u5148\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff0c\u518d\u8fdb\u884c\u8fd0\u7b97\u3002</p> <pre><code>'' + 123n // \"123\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/","title":"08-\u51fd\u6570\u7684\u6269\u5c55","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_1","title":"\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u4e4b\u524d\uff0c\u4e0d\u80fd\u76f4\u63a5\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u53ea\u80fd\u91c7\u7528\u53d8\u901a\u7684\u65b9\u6cd5\u3002</p> <pre><code>function log(x, y) {\n  y = y || 'World';\n  console.log(x, y);\n}\n\nlog('Hello') // Hello World\nlog('Hello', 'China') // Hello China\nlog('Hello', '') // Hello World\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u68c0\u67e5\u51fd\u6570<code>log()</code>\u7684\u53c2\u6570<code>y</code>\u6709\u6ca1\u6709\u8d4b\u503c\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u6307\u5b9a\u9ed8\u8ba4\u503c\u4e3a<code>World</code>\u3002\u8fd9\u79cd\u5199\u6cd5\u7684\u7f3a\u70b9\u5728\u4e8e\uff0c\u5982\u679c\u53c2\u6570<code>y</code>\u8d4b\u503c\u4e86\uff0c\u4f46\u662f\u5bf9\u5e94\u7684\u5e03\u5c14\u503c\u4e3a<code>false</code>\uff0c\u5219\u8be5\u8d4b\u503c\u4e0d\u8d77\u4f5c\u7528\u3002\u5c31\u50cf\u4e0a\u9762\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\uff0c\u53c2\u6570<code>y</code>\u7b49\u4e8e\u7a7a\u5b57\u7b26\uff0c\u7ed3\u679c\u88ab\u6539\u4e3a\u9ed8\u8ba4\u503c\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u901a\u5e38\u9700\u8981\u5148\u5224\u65ad\u4e00\u4e0b\u53c2\u6570<code>y</code>\u662f\u5426\u88ab\u8d4b\u503c\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u518d\u7b49\u4e8e\u9ed8\u8ba4\u503c\u3002</p> <pre><code>if (typeof y === 'undefined') {\n  y = 'World';\n}\n</code></pre> <p>ES6 \u5141\u8bb8\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u5373\u76f4\u63a5\u5199\u5728\u53c2\u6570\u5b9a\u4e49\u7684\u540e\u9762\u3002</p> <pre><code>function log(x, y = 'World') {\n  console.log(x, y);\n}\n\nlog('Hello') // Hello World\nlog('Hello', 'China') // Hello China\nlog('Hello', '') // Hello\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0cES6 \u7684\u5199\u6cd5\u6bd4 ES5 \u7b80\u6d01\u8bb8\u591a\uff0c\u800c\u4e14\u975e\u5e38\u81ea\u7136\u3002\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function Point(x = 0, y = 0) {\n  this.x = x;\n  this.y = y;\n}\n\nconst p = new Point();\np // { x: 0, y: 0 }\n</code></pre> <p>\u9664\u4e86\u7b80\u6d01\uff0cES6 \u7684\u5199\u6cd5\u8fd8\u6709\u4e24\u4e2a\u597d\u5904\uff1a\u9996\u5148\uff0c\u9605\u8bfb\u4ee3\u7801\u7684\u4eba\uff0c\u53ef\u4ee5\u7acb\u523b\u610f\u8bc6\u5230\u54ea\u4e9b\u53c2\u6570\u662f\u53ef\u4ee5\u7701\u7565\u7684\uff0c\u4e0d\u7528\u67e5\u770b\u51fd\u6570\u4f53\u6216\u6587\u6863\uff1b\u5176\u6b21\uff0c\u6709\u5229\u4e8e\u5c06\u6765\u7684\u4ee3\u7801\u4f18\u5316\uff0c\u5373\u4f7f\u672a\u6765\u7684\u7248\u672c\u5728\u5bf9\u5916\u63a5\u53e3\u4e2d\uff0c\u5f7b\u5e95\u62ff\u6389\u8fd9\u4e2a\u53c2\u6570\uff0c\u4e5f\u4e0d\u4f1a\u5bfc\u81f4\u4ee5\u524d\u7684\u4ee3\u7801\u65e0\u6cd5\u8fd0\u884c\u3002</p> <p>\u53c2\u6570\u53d8\u91cf\u662f\u9ed8\u8ba4\u58f0\u660e\u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528<code>let</code>\u6216<code>const</code>\u518d\u6b21\u58f0\u660e\u3002</p> <pre><code>function foo(x = 5) {\n  let x = 1; // error\n  const x = 2; // error\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570\u53d8\u91cf<code>x</code>\u662f\u9ed8\u8ba4\u58f0\u660e\u7684\uff0c\u5728\u51fd\u6570\u4f53\u4e2d\uff0c\u4e0d\u80fd\u7528<code>let</code>\u6216<code>const</code>\u518d\u6b21\u58f0\u660e\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <p>\u4f7f\u7528\u53c2\u6570\u9ed8\u8ba4\u503c\u65f6\uff0c\u51fd\u6570\u4e0d\u80fd\u6709\u540c\u540d\u53c2\u6570\u3002</p> <pre><code>// \u4e0d\u62a5\u9519\nfunction foo(x, x, y) {\n  // ...\n}\n\n// \u62a5\u9519\nfunction foo(x, x, y = 1) {\n  // ...\n}\n// SyntaxError: Duplicate parameter name not allowed in this context\n</code></pre> <p>\u53e6\u5916\uff0c\u4e00\u4e2a\u5bb9\u6613\u5ffd\u7565\u7684\u5730\u65b9\u662f\uff0c\u53c2\u6570\u9ed8\u8ba4\u503c\u4e0d\u662f\u4f20\u503c\u7684\uff0c\u800c\u662f\u6bcf\u6b21\u90fd\u91cd\u65b0\u8ba1\u7b97\u9ed8\u8ba4\u503c\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53c2\u6570\u9ed8\u8ba4\u503c\u662f\u60f0\u6027\u6c42\u503c\u7684\u3002</p> <pre><code>let x = 99;\nfunction foo(p = x + 1) {\n  console.log(p);\n}\n\nfoo() // 100\n\nx = 100;\nfoo() // 101\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>p</code>\u7684\u9ed8\u8ba4\u503c\u662f<code>x + 1</code>\u3002\u8fd9\u65f6\uff0c\u6bcf\u6b21\u8c03\u7528\u51fd\u6570<code>foo()</code>\uff0c\u90fd\u4f1a\u91cd\u65b0\u8ba1\u7b97<code>x + 1</code>\uff0c\u800c\u4e0d\u662f\u9ed8\u8ba4<code>p</code>\u7b49\u4e8e 100\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_3","title":"\u4e0e\u89e3\u6784\u8d4b\u503c\u9ed8\u8ba4\u503c\u7ed3\u5408\u4f7f\u7528","text":"<p>\u53c2\u6570\u9ed8\u8ba4\u503c\u53ef\u4ee5\u4e0e\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\uff0c\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u3002</p> <pre><code>function foo({x, y = 5}) {\n  console.log(x, y);\n}\n\nfoo({}) // undefined 5\nfoo({x: 1}) // 1 5\nfoo({x: 1, y: 2}) // 1 2\nfoo() // TypeError: Cannot read property 'x' of undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ea\u4f7f\u7528\u4e86\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u9ed8\u8ba4\u503c\uff0c\u6ca1\u6709\u4f7f\u7528\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002\u53ea\u6709\u5f53\u51fd\u6570<code>foo()</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u624d\u4f1a\u901a\u8fc7\u89e3\u6784\u8d4b\u503c\u751f\u6210\u3002\u5982\u679c\u51fd\u6570<code>foo()</code>\u8c03\u7528\u65f6\u6ca1\u63d0\u4f9b\u53c2\u6570\uff0c\u53d8\u91cf<code>x</code>\u548c<code>y</code>\u5c31\u4e0d\u4f1a\u751f\u6210\uff0c\u4ece\u800c\u62a5\u9519\u3002\u901a\u8fc7\u63d0\u4f9b\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002</p> <pre><code>function foo({x, y = 5} = {}) {\n  console.log(x, y);\n}\n\nfoo() // undefined 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a\uff0c\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u53c2\u6570\uff0c\u51fd\u6570<code>foo</code>\u7684\u53c2\u6570\u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u89e3\u6784\u8d4b\u503c\u9ed8\u8ba4\u503c\u7684\u4f8b\u5b50\u3002</p> <pre><code>function fetch(url, { body = '', method = 'GET', headers = {} }) {\n  console.log(method);\n}\n\nfetch('http://example.com', {})\n// \"GET\"\n\nfetch('http://example.com')\n// \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u51fd\u6570<code>fetch()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u4e3a\u5b83\u7684\u4e09\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\u8fd9\u79cd\u5199\u6cd5\u4e0d\u80fd\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5982\u679c\u7ed3\u5408\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8fd9\u65f6\uff0c\u5c31\u51fa\u73b0\u4e86\u53cc\u91cd\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function fetch(url, { body = '', method = 'GET', headers = {} } = {}) {\n  console.log(method);\n}\n\nfetch('http://example.com')\n// \"GET\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>fetch</code>\u6ca1\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\u65f6\uff0c\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u5c31\u4f1a\u751f\u6548\uff0c\u7136\u540e\u624d\u662f\u89e3\u6784\u8d4b\u503c\u7684\u9ed8\u8ba4\u503c\u751f\u6548\uff0c\u53d8\u91cf<code>method</code>\u624d\u4f1a\u53d6\u5230\u9ed8\u8ba4\u503c<code>GET</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u751f\u6548\u4ee5\u540e\uff0c\u53c2\u6570\u89e3\u6784\u8d4b\u503c\u4f9d\u7136\u4f1a\u8fdb\u884c\u3002</p> <pre><code>function f({ a, b = 'world' } = { a: 'hello' }) {\n  console.log(b);\n}\n\nf() // world\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u51fd\u6570<code>f()</code>\u8c03\u7528\u65f6\u6ca1\u6709\u53c2\u6570\uff0c\u6240\u4ee5\u53c2\u6570\u9ed8\u8ba4\u503c<code>{ a: 'hello' }</code>\u751f\u6548\uff0c\u7136\u540e\u518d\u5bf9\u8fd9\u4e2a\u9ed8\u8ba4\u503c\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\uff0c\u4ece\u800c\u89e6\u53d1\u53c2\u6570\u53d8\u91cf<code>b</code>\u7684\u9ed8\u8ba4\u503c\u751f\u6548\u3002</p> <p>\u4f5c\u4e3a\u7ec3\u4e60\uff0c\u5927\u5bb6\u53ef\u4ee5\u601d\u8003\u4e00\u4e0b\uff0c\u4e0b\u9762\u4e24\u79cd\u51fd\u6570\u5199\u6cd5\u6709\u4ec0\u4e48\u5dee\u522b\uff1f</p> <pre><code>// \u5199\u6cd5\u4e00\nfunction m1({x = 0, y = 0} = {}) {\n  return [x, y];\n}\n\n// \u5199\u6cd5\u4e8c\nfunction m2({x, y} = { x: 0, y: 0 }) {\n  return [x, y];\n}\n\n// \u51fd\u6570\u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\nm1() // [0, 0]\nm2() // [0, 0]\n\n// x \u548c y \u90fd\u6709\u503c\u7684\u60c5\u51b5\nm1({x: 3, y: 8}) // [3, 8]\nm2({x: 3, y: 8}) // [3, 8]\n\n// x \u6709\u503c\uff0cy \u65e0\u503c\u7684\u60c5\u51b5\nm1({x: 3}) // [3, 0]\nm2({x: 3}) // [3, undefined]\n\n// x \u548c y \u90fd\u65e0\u503c\u7684\u60c5\u51b5\nm1({}) // [0, 0];\nm2({}) // [undefined, undefined]\n\nm1({z: 3}) // [0, 0]\nm2({z: 3}) // [undefined, undefined]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_4","title":"\u53c2\u6570\u9ed8\u8ba4\u503c\u7684\u4f4d\u7f6e","text":"<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5b9a\u4e49\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\uff0c\u5e94\u8be5\u662f\u51fd\u6570\u7684\u5c3e\u53c2\u6570\u3002\u56e0\u4e3a\u8fd9\u6837\u6bd4\u8f83\u5bb9\u6613\u770b\u51fa\u6765\uff0c\u5230\u5e95\u7701\u7565\u4e86\u54ea\u4e9b\u53c2\u6570\u3002\u5982\u679c\u975e\u5c3e\u90e8\u7684\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u53c2\u6570\u662f\u6ca1\u6cd5\u7701\u7565\u7684\u3002</p> <pre><code>// \u4f8b\u4e00\nfunction f(x = 1, y) {\n  return [x, y];\n}\n\nf() // [1, undefined]\nf(2) // [2, undefined]\nf(, 1) // \u62a5\u9519\nf(undefined, 1) // [1, 1]\n\n// \u4f8b\u4e8c\nfunction f(x, y = 5, z) {\n  return [x, y, z];\n}\n\nf() // [undefined, 5, undefined]\nf(1) // [1, 5, undefined]\nf(1, ,2) // \u62a5\u9519\nf(1, undefined, 2) // [1, 5, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6709\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u90fd\u4e0d\u662f\u5c3e\u53c2\u6570\u3002\u8fd9\u65f6\uff0c\u65e0\u6cd5\u53ea\u7701\u7565\u8be5\u53c2\u6570\uff0c\u800c\u4e0d\u7701\u7565\u5b83\u540e\u9762\u7684\u53c2\u6570\uff0c\u9664\u975e\u663e\u5f0f\u8f93\u5165<code>undefined</code>\u3002</p> <p>\u5982\u679c\u4f20\u5165<code>undefined</code>\uff0c\u5c06\u89e6\u53d1\u8be5\u53c2\u6570\u7b49\u4e8e\u9ed8\u8ba4\u503c\uff0c<code>null</code>\u5219\u6ca1\u6709\u8fd9\u4e2a\u6548\u679c\u3002</p> <pre><code>function foo(x = 5, y = 6) {\n  console.log(x, y);\n}\n\nfoo(undefined, null)\n// 5 null\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u53c2\u6570\u5bf9\u5e94<code>undefined</code>\uff0c\u7ed3\u679c\u89e6\u53d1\u4e86\u9ed8\u8ba4\u503c\uff0c<code>y</code>\u53c2\u6570\u7b49\u4e8e<code>null</code>\uff0c\u5c31\u6ca1\u6709\u89e6\u53d1\u9ed8\u8ba4\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#length","title":"\u51fd\u6570\u7684 length \u5c5e\u6027","text":"<p>\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u4ee5\u540e\uff0c\u51fd\u6570\u7684<code>length</code>\u5c5e\u6027\uff0c\u5c06\u8fd4\u56de\u6ca1\u6709\u6307\u5b9a\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e2a\u6570\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u540e\uff0c<code>length</code>\u5c5e\u6027\u5c06\u5931\u771f\u3002</p> <pre><code>(function (a) {}).length // 1\n(function (a = 5) {}).length // 0\n(function (a, b, c = 5) {}).length // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>length</code>\u5c5e\u6027\u7684\u8fd4\u56de\u503c\uff0c\u7b49\u4e8e\u51fd\u6570\u7684\u53c2\u6570\u4e2a\u6570\u51cf\u53bb\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e2a\u6570\u3002\u6bd4\u5982\uff0c\u4e0a\u9762\u6700\u540e\u4e00\u4e2a\u51fd\u6570\uff0c\u5b9a\u4e49\u4e86 3 \u4e2a\u53c2\u6570\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u53c2\u6570<code>c</code>\u6307\u5b9a\u4e86\u9ed8\u8ba4\u503c\uff0c\u56e0\u6b64<code>length</code>\u5c5e\u6027\u7b49\u4e8e<code>3</code>\u51cf\u53bb<code>1</code>\uff0c\u6700\u540e\u5f97\u5230<code>2</code>\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a<code>length</code>\u5c5e\u6027\u7684\u542b\u4e49\u662f\uff0c\u8be5\u51fd\u6570\u9884\u671f\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u3002\u67d0\u4e2a\u53c2\u6570\u6307\u5b9a\u9ed8\u8ba4\u503c\u4ee5\u540e\uff0c\u9884\u671f\u4f20\u5165\u7684\u53c2\u6570\u4e2a\u6570\u5c31\u4e0d\u5305\u62ec\u8fd9\u4e2a\u53c2\u6570\u4e86\u3002\u540c\u7406\uff0c\u540e\u6587\u7684 rest \u53c2\u6570\u4e5f\u4e0d\u4f1a\u8ba1\u5165<code>length</code>\u5c5e\u6027\u3002</p> <pre><code>(function(...args) {}).length // 0\n</code></pre> <p>\u5982\u679c\u8bbe\u7f6e\u4e86\u9ed8\u8ba4\u503c\u7684\u53c2\u6570\u4e0d\u662f\u5c3e\u53c2\u6570\uff0c\u90a3\u4e48<code>length</code>\u5c5e\u6027\u4e5f\u4e0d\u518d\u8ba1\u5165\u540e\u9762\u7684\u53c2\u6570\u4e86\u3002</p> <pre><code>(function (a = 0, b, c) {}).length // 0\n(function (a, b = 1, c) {}).length // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_5","title":"\u4f5c\u7528\u57df","text":"<p>\u4e00\u65e6\u8bbe\u7f6e\u4e86\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\uff0c\u51fd\u6570\u8fdb\u884c\u58f0\u660e\u521d\u59cb\u5316\u65f6\uff0c\u53c2\u6570\u4f1a\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff08context\uff09\u3002\u7b49\u5230\u521d\u59cb\u5316\u7ed3\u675f\uff0c\u8fd9\u4e2a\u4f5c\u7528\u57df\u5c31\u4f1a\u6d88\u5931\u3002\u8fd9\u79cd\u8bed\u6cd5\u884c\u4e3a\uff0c\u5728\u4e0d\u8bbe\u7f6e\u53c2\u6570\u9ed8\u8ba4\u503c\u65f6\uff0c\u662f\u4e0d\u4f1a\u51fa\u73b0\u7684\u3002</p> <pre><code>var x = 1;\n\nfunction f(x, y = x) {\n  console.log(y);\n}\n\nf(2) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>y</code>\u7684\u9ed8\u8ba4\u503c\u7b49\u4e8e\u53d8\u91cf<code>x</code>\u3002\u8c03\u7528\u51fd\u6570<code>f</code>\u65f6\uff0c\u53c2\u6570\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u5728\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u9ed8\u8ba4\u503c\u53d8\u91cf<code>x</code>\u6307\u5411\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\uff0c\u800c\u4e0d\u662f\u5168\u5c40\u53d8\u91cf<code>x</code>\uff0c\u6240\u4ee5\u8f93\u51fa\u662f<code>2</code>\u3002</p> <p>\u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>let x = 1;\n\nfunction f(y = x) {\n  let x = 2;\n  console.log(y);\n}\n\nf() // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u8c03\u7528\u65f6\uff0c\u53c2\u6570<code>y = x</code>\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u53d8\u91cf<code>x</code>\u672c\u8eab\u6ca1\u6709\u5b9a\u4e49\uff0c\u6240\u4ee5\u6307\u5411\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>x</code>\u3002\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u51fd\u6570\u4f53\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf<code>x</code>\u5f71\u54cd\u4e0d\u5230\u9ed8\u8ba4\u503c\u53d8\u91cf<code>x</code>\u3002</p> <p>\u5982\u679c\u6b64\u65f6\uff0c\u5168\u5c40\u53d8\u91cf<code>x</code>\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>function f(y = x) {\n  let x = 2;\n  console.log(y);\n}\n\nf() // ReferenceError: x is not defined\n</code></pre> <p>\u4e0b\u9762\u8fd9\u6837\u5199\uff0c\u4e5f\u4f1a\u62a5\u9519\u3002</p> <pre><code>var x = 1;\n\nfunction foo(x = x) {\n  // ...\n}\n\nfoo() // ReferenceError: Cannot access 'x' before initialization\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>x = x</code>\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u4f5c\u7528\u57df\u3002\u5b9e\u9645\u6267\u884c\u7684\u662f<code>let x = x</code>\uff0c\u7531\u4e8e\u6682\u65f6\u6027\u6b7b\u533a\u7684\u539f\u56e0\uff0c\u8fd9\u884c\u4ee3\u7801\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4e5f\u9075\u5b88\u8fd9\u4e2a\u89c4\u5219\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>let foo = 'outer';\n\nfunction bar(func = () =&gt; foo) {\n  let foo = 'inner';\n  console.log(func());\n}\n\nbar(); // outer\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>bar</code>\u7684\u53c2\u6570<code>func</code>\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u4e3a\u53d8\u91cf<code>foo</code>\u3002\u51fd\u6570\u53c2\u6570\u5f62\u6210\u7684\u5355\u72ec\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u5e76\u6ca1\u6709\u5b9a\u4e49\u53d8\u91cf<code>foo</code>\uff0c\u6240\u4ee5<code>foo</code>\u6307\u5411\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>foo</code>\uff0c\u56e0\u6b64\u8f93\u51fa<code>outer</code>\u3002</p> <p>\u5982\u679c\u5199\u6210\u4e0b\u9762\u8fd9\u6837\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>function bar(func = () =&gt; foo) {\n  let foo = 'inner';\n  console.log(func());\n}\n\nbar() // ReferenceError: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u533f\u540d\u51fd\u6570\u91cc\u9762\u7684<code>foo</code>\u6307\u5411\u51fd\u6570\u5916\u5c42\uff0c\u4f46\u662f\u51fd\u6570\u5916\u5c42\u5e76\u6ca1\u6709\u58f0\u660e\u53d8\u91cf<code>foo</code>\uff0c\u6240\u4ee5\u5c31\u62a5\u9519\u4e86\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u4f8b\u5b50\u3002</p> <pre><code>var x = 1;\nfunction foo(x, y = function() { x = 2; }) {\n  var x = 3;\n  y();\n  console.log(x);\n}\n\nfoo() // 3\nx // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>foo</code>\u7684\u53c2\u6570\u5f62\u6210\u4e00\u4e2a\u5355\u72ec\u4f5c\u7528\u57df\u3002\u8fd9\u4e2a\u4f5c\u7528\u57df\u91cc\u9762\uff0c\u9996\u5148\u58f0\u660e\u4e86\u53d8\u91cf<code>x</code>\uff0c\u7136\u540e\u58f0\u660e\u4e86\u53d8\u91cf<code>y</code>\uff0c<code>y</code>\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u3002\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>x</code>\uff0c\u6307\u5411\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\u3002\u51fd\u6570<code>foo</code>\u5185\u90e8\u53c8\u58f0\u660e\u4e86\u4e00\u4e2a\u5185\u90e8\u53d8\u91cf<code>x</code>\uff0c\u8be5\u53d8\u91cf\u4e0e\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\u7531\u4e8e\u4e0d\u662f\u540c\u4e00\u4e2a\u4f5c\u7528\u57df\uff0c\u6240\u4ee5\u4e0d\u662f\u540c\u4e00\u4e2a\u53d8\u91cf\uff0c\u56e0\u6b64\u6267\u884c<code>y</code>\u540e\uff0c\u5185\u90e8\u53d8\u91cf<code>x</code>\u548c\u5916\u90e8\u5168\u5c40\u53d8\u91cf<code>x</code>\u7684\u503c\u90fd\u6ca1\u53d8\u3002</p> <p>\u5982\u679c\u5c06<code>var x = 3</code>\u7684<code>var</code>\u53bb\u9664\uff0c\u51fd\u6570<code>foo</code>\u7684\u5185\u90e8\u53d8\u91cf<code>x</code>\u5c31\u6307\u5411\u7b2c\u4e00\u4e2a\u53c2\u6570<code>x</code>\uff0c\u4e0e\u533f\u540d\u51fd\u6570\u5185\u90e8\u7684<code>x</code>\u662f\u4e00\u81f4\u7684\uff0c\u6240\u4ee5\u6700\u540e\u8f93\u51fa\u7684\u5c31\u662f<code>2</code>\uff0c\u800c\u5916\u5c42\u7684\u5168\u5c40\u53d8\u91cf<code>x</code>\u4f9d\u7136\u4e0d\u53d7\u5f71\u54cd\u3002</p> <pre><code>var x = 1;\nfunction foo(x, y = function() { x = 2; }) {\n  x = 3;\n  y();\n  console.log(x);\n}\n\nfoo() // 2\nx // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_6","title":"\u5e94\u7528","text":"<p>\u5229\u7528\u53c2\u6570\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e00\u4e2a\u53c2\u6570\u4e0d\u5f97\u7701\u7565\uff0c\u5982\u679c\u7701\u7565\u5c31\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <pre><code>function throwIfMissing() {\n  throw new Error('Missing parameter');\n}\n\nfunction foo(mustBeProvided = throwIfMissing()) {\n  return mustBeProvided;\n}\n\nfoo()\n// Error: Missing parameter\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>foo</code>\u51fd\u6570\uff0c\u5982\u679c\u8c03\u7528\u7684\u65f6\u5019\u6ca1\u6709\u53c2\u6570\uff0c\u5c31\u4f1a\u8c03\u7528\u9ed8\u8ba4\u503c<code>throwIfMissing</code>\u51fd\u6570\uff0c\u4ece\u800c\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\u4ece\u4e0a\u9762\u4ee3\u7801\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c\u53c2\u6570<code>mustBeProvided</code>\u7684\u9ed8\u8ba4\u503c\u7b49\u4e8e<code>throwIfMissing</code>\u51fd\u6570\u7684\u8fd0\u884c\u7ed3\u679c\uff08\u6ce8\u610f\u51fd\u6570\u540d<code>throwIfMissing</code>\u4e4b\u540e\u6709\u4e00\u5bf9\u5706\u62ec\u53f7\uff09\uff0c\u8fd9\u8868\u660e\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u4e0d\u662f\u5728\u5b9a\u4e49\u65f6\u6267\u884c\uff0c\u800c\u662f\u5728\u8fd0\u884c\u65f6\u6267\u884c\u3002\u5982\u679c\u53c2\u6570\u5df2\u7ecf\u8d4b\u503c\uff0c\u9ed8\u8ba4\u503c\u4e2d\u7684\u51fd\u6570\u5c31\u4e0d\u4f1a\u8fd0\u884c\u3002</p> <p>\u53e6\u5916\uff0c\u53ef\u4ee5\u5c06\u53c2\u6570\u9ed8\u8ba4\u503c\u8bbe\u4e3a<code>undefined</code>\uff0c\u8868\u660e\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u4ee5\u7701\u7565\u7684\u3002</p> <pre><code>function foo(optional = undefined) { \u00b7\u00b7\u00b7 }\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#rest","title":"rest \u53c2\u6570","text":"<p>ES6 \u5f15\u5165 rest \u53c2\u6570\uff08\u5f62\u5f0f\u4e3a<code>...\u53d8\u91cf\u540d</code>\uff09\uff0c\u7528\u4e8e\u83b7\u53d6\u51fd\u6570\u7684\u591a\u4f59\u53c2\u6570\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u4f7f\u7528<code>arguments</code>\u5bf9\u8c61\u4e86\u3002rest \u53c2\u6570\u642d\u914d\u7684\u53d8\u91cf\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u53d8\u91cf\u5c06\u591a\u4f59\u7684\u53c2\u6570\u653e\u5165\u6570\u7ec4\u4e2d\u3002</p> <pre><code>function add(...values) {\n  let sum = 0;\n\n  for (var val of values) {\n    sum += val;\n  }\n\n  return sum;\n}\n\nadd(2, 5, 3) // 10\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>add</code>\u51fd\u6570\u662f\u4e00\u4e2a\u6c42\u548c\u51fd\u6570\uff0c\u5229\u7528 rest \u53c2\u6570\uff0c\u53ef\u4ee5\u5411\u8be5\u51fd\u6570\u4f20\u5165\u4efb\u610f\u6570\u76ee\u7684\u53c2\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a rest \u53c2\u6570\u4ee3\u66ff<code>arguments</code>\u53d8\u91cf\u7684\u4f8b\u5b50\u3002</p> <pre><code>// arguments\u53d8\u91cf\u7684\u5199\u6cd5\nfunction sortNumbers() {\n  return Array.from(arguments).sort();\n}\n\n// rest\u53c2\u6570\u7684\u5199\u6cd5\nconst sortNumbers = (...numbers) =&gt; numbers.sort();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4e24\u79cd\u5199\u6cd5\uff0c\u6bd4\u8f83\u540e\u53ef\u4ee5\u53d1\u73b0\uff0crest \u53c2\u6570\u7684\u5199\u6cd5\u66f4\u81ea\u7136\u4e5f\u66f4\u7b80\u6d01\u3002</p> <p><code>arguments</code>\u5bf9\u8c61\u4e0d\u662f\u6570\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u6240\u4ee5\u4e3a\u4e86\u4f7f\u7528\u6570\u7ec4\u7684\u65b9\u6cd5\uff0c\u5fc5\u987b\u4f7f\u7528<code>Array.from</code>\u5148\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002rest \u53c2\u6570\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u5b83\u5c31\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u6570\u7ec4\u7279\u6709\u7684\u65b9\u6cd5\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u5229\u7528 rest \u53c2\u6570\u6539\u5199\u6570\u7ec4<code>push</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>function push(array, ...items) {\n  items.forEach(function(item) {\n    array.push(item);\n    console.log(item);\n  });\n}\n\nvar a = [];\npush(a, 1, 2, 3)\n</code></pre> <p>\u6ce8\u610f\uff0crest \u53c2\u6570\u4e4b\u540e\u4e0d\u80fd\u518d\u6709\u5176\u4ed6\u53c2\u6570\uff08\u5373\u53ea\u80fd\u662f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff09\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nfunction f(a, ...b, c) {\n  // ...\n}\n</code></pre> <p>\u51fd\u6570\u7684<code>length</code>\u5c5e\u6027\uff0c\u4e0d\u5305\u62ec rest \u53c2\u6570\u3002</p> <pre><code>(function(a) {}).length  // 1\n(function(...a) {}).length  // 0\n(function(a, ...b) {}).length  // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_7","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>\u4ece ES5 \u5f00\u59cb\uff0c\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u8bbe\u5b9a\u4e3a\u4e25\u683c\u6a21\u5f0f\u3002</p> <pre><code>function doSomething(a, b) {\n  'use strict';\n  // code\n}\n</code></pre> <p>ES2016 \u505a\u4e86\u4e00\u70b9\u4fee\u6539\uff0c\u89c4\u5b9a\u53ea\u8981\u51fd\u6570\u53c2\u6570\u4f7f\u7528\u4e86\u9ed8\u8ba4\u503c\u3001\u89e3\u6784\u8d4b\u503c\u3001\u6216\u8005\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u90a3\u4e48\u51fd\u6570\u5185\u90e8\u5c31\u4e0d\u80fd\u663e\u5f0f\u8bbe\u5b9a\u4e3a\u4e25\u683c\u6a21\u5f0f\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nfunction doSomething(a, b = a) {\n  'use strict';\n  // code\n}\n\n// \u62a5\u9519\nconst doSomething = function ({a, b}) {\n  'use strict';\n  // code\n};\n\n// \u62a5\u9519\nconst doSomething = (...a) =&gt; {\n  'use strict';\n  // code\n};\n\nconst obj = {\n  // \u62a5\u9519\n  doSomething({a, b}) {\n    'use strict';\n    // code\n  }\n};\n</code></pre> <p>\u8fd9\u6837\u89c4\u5b9a\u7684\u539f\u56e0\u662f\uff0c\u51fd\u6570\u5185\u90e8\u7684\u4e25\u683c\u6a21\u5f0f\uff0c\u540c\u65f6\u9002\u7528\u4e8e\u51fd\u6570\u4f53\u548c\u51fd\u6570\u53c2\u6570\u3002\u4f46\u662f\uff0c\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u5148\u6267\u884c\u51fd\u6570\u53c2\u6570\uff0c\u7136\u540e\u518d\u6267\u884c\u51fd\u6570\u4f53\u3002\u8fd9\u6837\u5c31\u6709\u4e00\u4e2a\u4e0d\u5408\u7406\u7684\u5730\u65b9\uff0c\u53ea\u6709\u4ece\u51fd\u6570\u4f53\u4e4b\u4e2d\uff0c\u624d\u80fd\u77e5\u9053\u53c2\u6570\u662f\u5426\u5e94\u8be5\u4ee5\u4e25\u683c\u6a21\u5f0f\u6267\u884c\uff0c\u4f46\u662f\u53c2\u6570\u5374\u5e94\u8be5\u5148\u4e8e\u51fd\u6570\u4f53\u6267\u884c\u3002</p> <pre><code>// \u62a5\u9519\nfunction doSomething(value = 070) {\n  'use strict';\n  return value;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>value</code>\u7684\u9ed8\u8ba4\u503c\u662f\u516b\u8fdb\u5236\u6570<code>070</code>\uff0c\u4f46\u662f\u4e25\u683c\u6a21\u5f0f\u4e0b\u4e0d\u80fd\u7528\u524d\u7f00<code>0</code>\u8868\u793a\u516b\u8fdb\u5236\uff0c\u6240\u4ee5\u5e94\u8be5\u62a5\u9519\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\uff0cJavaScript \u5f15\u64ce\u4f1a\u5148\u6210\u529f\u6267\u884c<code>value = 070</code>\uff0c\u7136\u540e\u8fdb\u5165\u51fd\u6570\u4f53\u5185\u90e8\uff0c\u53d1\u73b0\u9700\u8981\u7528\u4e25\u683c\u6a21\u5f0f\u6267\u884c\uff0c\u8fd9\u65f6\u624d\u4f1a\u62a5\u9519\u3002</p> <p>\u867d\u7136\u53ef\u4ee5\u5148\u89e3\u6790\u51fd\u6570\u4f53\u4ee3\u7801\uff0c\u518d\u6267\u884c\u53c2\u6570\u4ee3\u7801\uff0c\u4f46\u662f\u8fd9\u6837\u65e0\u7591\u5c31\u589e\u52a0\u4e86\u590d\u6742\u6027\u3002\u56e0\u6b64\uff0c\u6807\u51c6\u7d22\u6027\u7981\u6b62\u4e86\u8fd9\u79cd\u7528\u6cd5\uff0c\u53ea\u8981\u53c2\u6570\u4f7f\u7528\u4e86\u9ed8\u8ba4\u503c\u3001\u89e3\u6784\u8d4b\u503c\u3001\u6216\u8005\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c31\u4e0d\u80fd\u663e\u5f0f\u6307\u5b9a\u4e25\u683c\u6a21\u5f0f\u3002</p> <p>\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u89c4\u907f\u8fd9\u79cd\u9650\u5236\u3002\u7b2c\u4e00\u79cd\u662f\u8bbe\u5b9a\u5168\u5c40\u6027\u7684\u4e25\u683c\u6a21\u5f0f\uff0c\u8fd9\u662f\u5408\u6cd5\u7684\u3002</p> <pre><code>'use strict';\n\nfunction doSomething(a, b = a) {\n  // code\n}\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u662f\u628a\u51fd\u6570\u5305\u5728\u4e00\u4e2a\u65e0\u53c2\u6570\u7684\u7acb\u5373\u6267\u884c\u51fd\u6570\u91cc\u9762\u3002</p> <pre><code>const doSomething = (function () {\n  'use strict';\n  return function(value = 42) {\n    return value;\n  };\n}());\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#name","title":"name \u5c5e\u6027","text":"<p>\u51fd\u6570\u7684<code>name</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u8be5\u51fd\u6570\u7684\u51fd\u6570\u540d\u3002</p> <pre><code>function foo() {}\nfoo.name // \"foo\"\n</code></pre> <p>\u8fd9\u4e2a\u5c5e\u6027\u65e9\u5c31\u88ab\u6d4f\u89c8\u5668\u5e7f\u6cdb\u652f\u6301\uff0c\u4f46\u662f\u76f4\u5230 ES6\uff0c\u624d\u5c06\u5176\u5199\u5165\u4e86\u6807\u51c6\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cES6 \u5bf9\u8fd9\u4e2a\u5c5e\u6027\u7684\u884c\u4e3a\u505a\u51fa\u4e86\u4e00\u4e9b\u4fee\u6539\u3002\u5982\u679c\u5c06\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0cES5 \u7684<code>name</code>\u5c5e\u6027\uff0c\u4f1a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\uff0c\u800c ES6 \u7684<code>name</code>\u5c5e\u6027\u4f1a\u8fd4\u56de\u5b9e\u9645\u7684\u51fd\u6570\u540d\u3002</p> <pre><code>var f = function () {};\n\n// ES5\nf.name // \"\"\n\n// ES6\nf.name // \"f\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>f</code>\u7b49\u4e8e\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0cES5 \u548c ES6 \u7684<code>name</code>\u5c5e\u6027\u8fd4\u56de\u7684\u503c\u4e0d\u4e00\u6837\u3002</p> <p>\u5982\u679c\u5c06\u4e00\u4e2a\u5177\u540d\u51fd\u6570\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u5219 ES5 \u548c ES6 \u7684<code>name</code>\u5c5e\u6027\u90fd\u8fd4\u56de\u8fd9\u4e2a\u5177\u540d\u51fd\u6570\u539f\u672c\u7684\u540d\u5b57\u3002</p> <pre><code>const bar = function baz() {};\n\n// ES5\nbar.name // \"baz\"\n\n// ES6\nbar.name // \"baz\"\n</code></pre> <p><code>Function</code>\u6784\u9020\u51fd\u6570\u8fd4\u56de\u7684\u51fd\u6570\u5b9e\u4f8b\uff0c<code>name</code>\u5c5e\u6027\u7684\u503c\u4e3a<code>anonymous</code>\u3002</p> <pre><code>(new Function).name // \"anonymous\"\n</code></pre> <p><code>bind</code>\u8fd4\u56de\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u503c\u4f1a\u52a0\u4e0a<code>bound</code>\u524d\u7f00\u3002</p> <pre><code>function foo() {};\nfoo.bind({}).name // \"bound foo\"\n\n(function(){}).bind({}).name // \"bound \"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_8","title":"\u7bad\u5934\u51fd\u6570","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_9","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u5141\u8bb8\u4f7f\u7528\u201c\u7bad\u5934\u201d\uff08<code>=&gt;</code>\uff09\u5b9a\u4e49\u51fd\u6570\u3002</p> <pre><code>var f = v =&gt; v;\n\n// \u7b49\u540c\u4e8e\nvar f = function (v) {\n  return v;\n};\n</code></pre> <p>\u5982\u679c\u7bad\u5934\u51fd\u6570\u4e0d\u9700\u8981\u53c2\u6570\u6216\u9700\u8981\u591a\u4e2a\u53c2\u6570\uff0c\u5c31\u4f7f\u7528\u4e00\u4e2a\u5706\u62ec\u53f7\u4ee3\u8868\u53c2\u6570\u90e8\u5206\u3002</p> <pre><code>var f = () =&gt; 5;\n// \u7b49\u540c\u4e8e\nvar f = function () { return 5 };\n\nvar sum = (num1, num2) =&gt; num1 + num2;\n// \u7b49\u540c\u4e8e\nvar sum = function(num1, num2) {\n  return num1 + num2;\n};\n</code></pre> <p>\u5982\u679c\u7bad\u5934\u51fd\u6570\u7684\u4ee3\u7801\u5757\u90e8\u5206\u591a\u4e8e\u4e00\u6761\u8bed\u53e5\uff0c\u5c31\u8981\u4f7f\u7528\u5927\u62ec\u53f7\u5c06\u5b83\u4eec\u62ec\u8d77\u6765\uff0c\u5e76\u4e14\u4f7f\u7528<code>return</code>\u8bed\u53e5\u8fd4\u56de\u3002</p> <pre><code>var sum = (num1, num2) =&gt; { return num1 + num2; }\n</code></pre> <p>\u7531\u4e8e\u5927\u62ec\u53f7\u88ab\u89e3\u91ca\u4e3a\u4ee3\u7801\u5757\uff0c\u6240\u4ee5\u5982\u679c\u7bad\u5934\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5fc5\u987b\u5728\u5bf9\u8c61\u5916\u9762\u52a0\u4e0a\u62ec\u53f7\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlet getTempItem = id =&gt; { id: id, name: \"Temp\" };\n\n// \u4e0d\u62a5\u9519\nlet getTempItem = id =&gt; ({ id: id, name: \"Temp\" });\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u867d\u7136\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u4f1a\u5f97\u5230\u9519\u8bef\u7684\u7ed3\u679c\u3002</p> <pre><code>let foo = () =&gt; { a: 1 };\nfoo() // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u59cb\u610f\u56fe\u662f\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61<code>{ a: 1 }</code>\uff0c\u4f46\u662f\u7531\u4e8e\u5f15\u64ce\u8ba4\u4e3a\u5927\u62ec\u53f7\u662f\u4ee3\u7801\u5757\uff0c\u6240\u4ee5\u6267\u884c\u4e86\u4e00\u884c\u8bed\u53e5<code>a: 1</code>\u3002\u8fd9\u65f6\uff0c<code>a</code>\u53ef\u4ee5\u88ab\u89e3\u91ca\u4e3a\u8bed\u53e5\u7684\u6807\u7b7e\uff0c\u56e0\u6b64\u5b9e\u9645\u6267\u884c\u7684\u8bed\u53e5\u662f<code>1;</code>\uff0c\u7136\u540e\u51fd\u6570\u5c31\u7ed3\u675f\u4e86\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <p>\u5982\u679c\u7bad\u5934\u51fd\u6570\u53ea\u6709\u4e00\u884c\u8bed\u53e5\uff0c\u4e14\u4e0d\u9700\u8981\u8fd4\u56de\u503c\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\uff0c\u5c31\u4e0d\u7528\u5199\u5927\u62ec\u53f7\u4e86\u3002</p> <pre><code>let fn = () =&gt; void doesNotReturn();\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u4e0e\u53d8\u91cf\u89e3\u6784\u7ed3\u5408\u4f7f\u7528\u3002</p> <pre><code>const full = ({ first, last }) =&gt; first + ' ' + last;\n\n// \u7b49\u540c\u4e8e\nfunction full(person) {\n  return person.first + ' ' + person.last;\n}\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u4f7f\u5f97\u8868\u8fbe\u66f4\u52a0\u7b80\u6d01\u3002</p> <pre><code>const isEven = n =&gt; n % 2 === 0;\nconst square = n =&gt; n * n;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ea\u7528\u4e86\u4e24\u884c\uff0c\u5c31\u5b9a\u4e49\u4e86\u4e24\u4e2a\u7b80\u5355\u7684\u5de5\u5177\u51fd\u6570\u3002\u5982\u679c\u4e0d\u7528\u7bad\u5934\u51fd\u6570\uff0c\u53ef\u80fd\u5c31\u8981\u5360\u7528\u591a\u884c\uff0c\u800c\u4e14\u8fd8\u4e0d\u5982\u73b0\u5728\u8fd9\u6837\u5199\u9192\u76ee\u3002</p> <p>\u7bad\u5934\u51fd\u6570\u7684\u4e00\u4e2a\u7528\u5904\u662f\u7b80\u5316\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>// \u666e\u901a\u51fd\u6570\u5199\u6cd5\n[1,2,3].map(function (x) {\n  return x * x;\n});\n\n// \u7bad\u5934\u51fd\u6570\u5199\u6cd5\n[1,2,3].map(x =&gt; x * x);\n</code></pre> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f</p> <pre><code>// \u666e\u901a\u51fd\u6570\u5199\u6cd5\nvar result = values.sort(function (a, b) {\n  return a - b;\n});\n\n// \u7bad\u5934\u51fd\u6570\u5199\u6cd5\nvar result = values.sort((a, b) =&gt; a - b);\n</code></pre> <p>\u4e0b\u9762\u662f rest \u53c2\u6570\u4e0e\u7bad\u5934\u51fd\u6570\u7ed3\u5408\u7684\u4f8b\u5b50\u3002</p> <pre><code>const numbers = (...nums) =&gt; nums;\n\nnumbers(1, 2, 3, 4, 5)\n// [1,2,3,4,5]\n\nconst headAndTail = (head, ...tail) =&gt; [head, tail];\n\nheadAndTail(1, 2, 3, 4, 5)\n// [1,[2,3,4,5]]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_10","title":"\u4f7f\u7528\u6ce8\u610f\u70b9","text":"<p>\u7bad\u5934\u51fd\u6570\u6709\u51e0\u4e2a\u4f7f\u7528\u6ce8\u610f\u70b9\u3002</p> <p>\uff081\uff09\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\u5bf9\u8c61\uff08\u8be6\u89c1\u4e0b\u6587\uff09\u3002</p> <p>\uff082\uff09\u4e0d\u53ef\u4ee5\u5f53\u4f5c\u6784\u9020\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u53ef\u4ee5\u5bf9\u7bad\u5934\u51fd\u6570\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\uff083\uff09\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>arguments</code>\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u5728\u51fd\u6570\u4f53\u5185\u4e0d\u5b58\u5728\u3002\u5982\u679c\u8981\u7528\uff0c\u53ef\u4ee5\u7528 rest \u53c2\u6570\u4ee3\u66ff\u3002</p> <p>\uff084\uff09\u4e0d\u53ef\u4ee5\u4f7f\u7528<code>yield</code>\u547d\u4ee4\uff0c\u56e0\u6b64\u7bad\u5934\u51fd\u6570\u4e0d\u80fd\u7528\u4f5c Generator \u51fd\u6570\u3002</p> <p>\u4e0a\u9762\u56db\u70b9\u4e2d\uff0c\u6700\u91cd\u8981\u7684\u662f\u7b2c\u4e00\u70b9\u3002\u5bf9\u4e8e\u666e\u901a\u51fd\u6570\u6765\u8bf4\uff0c\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u51fd\u6570\u8fd0\u884c\u65f6\u6240\u5728\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u8fd9\u4e00\u70b9\u5bf9\u7bad\u5934\u51fd\u6570\u4e0d\u6210\u7acb\u3002\u5b83\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\u5bf9\u8c61\uff0c\u5185\u90e8\u7684<code>this</code>\u5c31\u662f\u5b9a\u4e49\u65f6\u4e0a\u5c42\u4f5c\u7528\u57df\u4e2d\u7684<code>this</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u662f\u56fa\u5b9a\u7684\uff0c\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u666e\u901a\u51fd\u6570\u7684<code>this</code>\u6307\u5411\u662f\u53ef\u53d8\u7684\u3002</p> <pre><code>function foo() {\n  setTimeout(() =&gt; {\n    console.log('id:', this.id);\n  }, 100);\n}\n\nvar id = 21;\n\nfoo.call({ id: 42 });\n// id: 42\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>setTimeout()</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u4e2a\u7bad\u5934\u51fd\u6570\u7684\u5b9a\u4e49\u751f\u6548\u662f\u5728<code>foo</code>\u51fd\u6570\u751f\u6210\u65f6\uff0c\u800c\u5b83\u7684\u771f\u6b63\u6267\u884c\u8981\u7b49\u5230 100 \u6beb\u79d2\u540e\u3002\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u6267\u884c\u65f6<code>this</code>\u5e94\u8be5\u6307\u5411\u5168\u5c40\u5bf9\u8c61<code>window</code>\uff0c\u8fd9\u65f6\u5e94\u8be5\u8f93\u51fa<code>21</code>\u3002\u4f46\u662f\uff0c\u7bad\u5934\u51fd\u6570\u5bfc\u81f4<code>this</code>\u603b\u662f\u6307\u5411\u51fd\u6570\u5b9a\u4e49\u751f\u6548\u65f6\u6240\u5728\u7684\u5bf9\u8c61\uff08\u672c\u4f8b\u662f<code>{id: 42}</code>\uff09\uff0c\u6240\u4ee5\u6253\u5370\u51fa\u6765\u7684\u662f<code>42</code>\u3002</p> <p>\u4e0b\u9762\u4f8b\u5b50\u662f\u56de\u8c03\u51fd\u6570\u5206\u522b\u4e3a\u7bad\u5934\u51fd\u6570\u548c\u666e\u901a\u51fd\u6570\uff0c\u5bf9\u6bd4\u5b83\u4eec\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u3002</p> <pre><code>function Timer() {\n  this.s1 = 0;\n  this.s2 = 0;\n  // \u7bad\u5934\u51fd\u6570\n  setInterval(() =&gt; this.s1++, 1000);\n  // \u666e\u901a\u51fd\u6570\n  setInterval(function () {\n    this.s2++;\n  }, 1000);\n}\n\nvar timer = new Timer();\n\nsetTimeout(() =&gt; console.log('s1: ', timer.s1), 3100);\nsetTimeout(() =&gt; console.log('s2: ', timer.s2), 3100);\n// s1: 3\n// s2: 0\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Timer</code>\u51fd\u6570\u5185\u90e8\u8bbe\u7f6e\u4e86\u4e24\u4e2a\u5b9a\u65f6\u5668\uff0c\u5206\u522b\u4f7f\u7528\u4e86\u7bad\u5934\u51fd\u6570\u548c\u666e\u901a\u51fd\u6570\u3002\u524d\u8005\u7684<code>this</code>\u7ed1\u5b9a\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\uff08\u5373<code>Timer</code>\u51fd\u6570\uff09\uff0c\u540e\u8005\u7684<code>this</code>\u6307\u5411\u8fd0\u884c\u65f6\u6240\u5728\u7684\u4f5c\u7528\u57df\uff08\u5373\u5168\u5c40\u5bf9\u8c61\uff09\u3002\u6240\u4ee5\uff0c3100 \u6beb\u79d2\u4e4b\u540e\uff0c<code>timer.s1</code>\u88ab\u66f4\u65b0\u4e86 3 \u6b21\uff0c\u800c<code>timer.s2</code>\u4e00\u6b21\u90fd\u6ca1\u66f4\u65b0\u3002</p> <p>\u7bad\u5934\u51fd\u6570\u5b9e\u9645\u4e0a\u53ef\u4ee5\u8ba9<code>this</code>\u6307\u5411\u56fa\u5b9a\u5316\uff0c\u7ed1\u5b9a<code>this</code>\u4f7f\u5f97\u5b83\u4e0d\u518d\u53ef\u53d8\uff0c\u8fd9\u79cd\u7279\u6027\u5f88\u6709\u5229\u4e8e\u5c01\u88c5\u56de\u8c03\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0cDOM \u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\u5c01\u88c5\u5728\u4e00\u4e2a\u5bf9\u8c61\u91cc\u9762\u3002</p> <pre><code>var handler = {\n  id: '123456',\n\n  init: function() {\n    document.addEventListener('click',\n      event =&gt; this.doSomething(event.type), false);\n  },\n\n  doSomething: function(type) {\n    console.log('Handling ' + type  + ' for ' + this.id);\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>init()</code>\u65b9\u6cd5\u4e2d\uff0c\u4f7f\u7528\u4e86\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u5bfc\u81f4\u8fd9\u4e2a\u7bad\u5934\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\uff0c\u603b\u662f\u6307\u5411<code>handler</code>\u5bf9\u8c61\u3002\u5982\u679c\u56de\u8c03\u51fd\u6570\u662f\u666e\u901a\u51fd\u6570\uff0c\u90a3\u4e48\u8fd0\u884c<code>this.doSomething()</code>\u8fd9\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6b64\u65f6<code>this</code>\u6307\u5411<code>document</code>\u5bf9\u8c61\u3002</p> <p>\u603b\u4e4b\uff0c\u7bad\u5934\u51fd\u6570\u6839\u672c\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u5bfc\u81f4\u5185\u90e8\u7684<code>this</code>\u5c31\u662f\u5916\u5c42\u4ee3\u7801\u5757\u7684<code>this</code>\u3002\u6b63\u662f\u56e0\u4e3a\u5b83\u6ca1\u6709<code>this</code>\uff0c\u6240\u4ee5\u4e5f\u5c31\u4e0d\u80fd\u7528\u4f5c\u6784\u9020\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f Babel \u8f6c\u7bad\u5934\u51fd\u6570\u4ea7\u751f\u7684 ES5 \u4ee3\u7801\uff0c\u5c31\u80fd\u6e05\u695a\u5730\u8bf4\u660e<code>this</code>\u7684\u6307\u5411\u3002</p> <pre><code>// ES6\nfunction foo() {\n  setTimeout(() =&gt; {\n    console.log('id:', this.id);\n  }, 100);\n}\n\n// ES5\nfunction foo() {\n  var _this = this;\n\n  setTimeout(function () {\n    console.log('id:', _this.id);\n  }, 100);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8f6c\u6362\u540e\u7684 ES5 \u7248\u672c\u6e05\u695a\u5730\u8bf4\u660e\u4e86\uff0c\u7bad\u5934\u51fd\u6570\u91cc\u9762\u6839\u672c\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u800c\u662f\u5f15\u7528\u5916\u5c42\u7684<code>this</code>\u3002</p> <p>\u8bf7\u95ee\u4e0b\u9762\u7684\u4ee3\u7801\u4e4b\u4e2d\uff0c<code>this</code>\u7684\u6307\u5411\u6709\u51e0\u4e2a\uff1f</p> <pre><code>function foo() {\n  return () =&gt; {\n    return () =&gt; {\n      return () =&gt; {\n        console.log('id:', this.id);\n      };\n    };\n  };\n}\n\nvar f = foo.call({id: 1});\n\nvar t1 = f.call({id: 2})()(); // id: 1\nvar t2 = f().call({id: 3})(); // id: 1\nvar t3 = f()().call({id: 4}); // id: 1\n</code></pre> <p>\u7b54\u6848\u662f<code>this</code>\u7684\u6307\u5411\u53ea\u6709\u4e00\u4e2a\uff0c\u5c31\u662f\u51fd\u6570<code>foo</code>\u7684<code>this</code>\uff0c\u8fd9\u662f\u56e0\u4e3a\u6240\u6709\u7684\u5185\u5c42\u51fd\u6570\u90fd\u662f\u7bad\u5934\u51fd\u6570\uff0c\u90fd\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u5b83\u4eec\u7684<code>this</code>\u5176\u5b9e\u90fd\u662f\u6700\u5916\u5c42<code>foo</code>\u51fd\u6570\u7684<code>this</code>\u3002\u6240\u4ee5\u4e0d\u7ba1\u600e\u4e48\u5d4c\u5957\uff0c<code>t1</code>\u3001<code>t2</code>\u3001<code>t3</code>\u90fd\u8f93\u51fa\u540c\u6837\u7684\u7ed3\u679c\u3002\u5982\u679c\u8fd9\u4e2a\u4f8b\u5b50\u7684\u6240\u6709\u5185\u5c42\u51fd\u6570\u90fd\u5199\u6210\u666e\u901a\u51fd\u6570\uff0c\u90a3\u4e48\u6bcf\u4e2a\u51fd\u6570\u7684<code>this</code>\u90fd\u6307\u5411\u8fd0\u884c\u65f6\u6240\u5728\u7684\u4e0d\u540c\u5bf9\u8c61\u3002</p> <p>\u9664\u4e86<code>this</code>\uff0c\u4ee5\u4e0b\u4e09\u4e2a\u53d8\u91cf\u5728\u7bad\u5934\u51fd\u6570\u4e4b\u4e2d\u4e5f\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u6307\u5411\u5916\u5c42\u51fd\u6570\u7684\u5bf9\u5e94\u53d8\u91cf\uff1a<code>arguments</code>\u3001<code>super</code>\u3001<code>new.target</code>\u3002</p> <pre><code>function foo() {\n  setTimeout(() =&gt; {\n    console.log('args:', arguments);\n  }, 100);\n}\n\nfoo(2, 4, 6, 8)\n// args: [2, 4, 6, 8]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684\u53d8\u91cf<code>arguments</code>\uff0c\u5176\u5b9e\u662f\u51fd\u6570<code>foo</code>\u7684<code>arguments</code>\u53d8\u91cf\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u6240\u4ee5\u5f53\u7136\u4e5f\u5c31\u4e0d\u80fd\u7528<code>call()</code>\u3001<code>apply()</code>\u3001<code>bind()</code>\u8fd9\u4e9b\u65b9\u6cd5\u53bb\u6539\u53d8<code>this</code>\u7684\u6307\u5411\u3002</p> <pre><code>(function() {\n  return [\n    (() =&gt; this.x).bind({ x: 'inner' })()\n  ];\n}).call({ x: 'outer' });\n// ['outer']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u6ca1\u6709\u81ea\u5df1\u7684<code>this</code>\uff0c\u6240\u4ee5<code>bind</code>\u65b9\u6cd5\u65e0\u6548\uff0c\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5916\u90e8\u7684<code>this</code>\u3002</p> <p>\u957f\u671f\u4ee5\u6765\uff0cJavaScript \u8bed\u8a00\u7684<code>this</code>\u5bf9\u8c61\u4e00\u76f4\u662f\u4e00\u4e2a\u4ee4\u4eba\u5934\u75db\u7684\u95ee\u9898\uff0c\u5728\u5bf9\u8c61\u65b9\u6cd5\u4e2d\u4f7f\u7528<code>this</code>\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002\u7bad\u5934\u51fd\u6570\u201d\u7ed1\u5b9a\u201d<code>this</code>\uff0c\u5f88\u5927\u7a0b\u5ea6\u4e0a\u89e3\u51b3\u4e86\u8fd9\u4e2a\u56f0\u6270\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_11","title":"\u4e0d\u9002\u7528\u573a\u5408","text":"<p>\u7531\u4e8e\u7bad\u5934\u51fd\u6570\u4f7f\u5f97<code>this</code>\u4ece\u201c\u52a8\u6001\u201d\u53d8\u6210\u201c\u9759\u6001\u201d\uff0c\u4e0b\u9762\u4e24\u4e2a\u573a\u5408\u4e0d\u5e94\u8be5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <p>\u7b2c\u4e00\u4e2a\u573a\u5408\u662f\u5b9a\u4e49\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4e14\u8be5\u65b9\u6cd5\u5185\u90e8\u5305\u62ec<code>this</code>\u3002</p> <pre><code>const cat = {\n  lives: 9,\n  jumps: () =&gt; {\n    this.lives--;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>cat.jumps()</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u8fd9\u662f\u9519\u8bef\u7684\u3002\u8c03\u7528<code>cat.jumps()</code>\u65f6\uff0c\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u8be5\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411<code>cat</code>\uff1b\u5982\u679c\u5199\u6210\u4e0a\u9762\u90a3\u6837\u7684\u7bad\u5934\u51fd\u6570\uff0c\u4f7f\u5f97<code>this</code>\u6307\u5411\u5168\u5c40\u5bf9\u8c61\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002\u8fd9\u662f\u56e0\u4e3a\u5bf9\u8c61\u4e0d\u6784\u6210\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u5bfc\u81f4<code>jumps</code>\u7bad\u5934\u51fd\u6570\u5b9a\u4e49\u65f6\u7684\u4f5c\u7528\u57df\u5c31\u662f\u5168\u5c40\u4f5c\u7528\u57df\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>globalThis.s = 21;\n\nconst obj = {\n  s: 42,\n  m: () =&gt; console.log(this.s)\n};\n\nobj.m() // 21\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>obj.m()</code>\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5b9a\u4e49\u3002JavaScript \u5f15\u64ce\u7684\u5904\u7406\u65b9\u6cd5\u662f\uff0c\u5148\u5728\u5168\u5c40\u7a7a\u95f4\u751f\u6210\u8fd9\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u7136\u540e\u8d4b\u503c\u7ed9<code>obj.m</code>\uff0c\u8fd9\u5bfc\u81f4\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5168\u5c40\u5bf9\u8c61\uff0c\u6240\u4ee5<code>obj.m()</code>\u8f93\u51fa\u7684\u662f\u5168\u5c40\u7a7a\u95f4\u7684<code>21</code>\uff0c\u800c\u4e0d\u662f\u5bf9\u8c61\u5185\u90e8\u7684<code>42</code>\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u5b9e\u9645\u4e0a\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>globalThis.s = 21;\nglobalThis.m = () =&gt; console.log(this.s);\n\nconst obj = {\n  s: 42,\n  m: globalThis.m\n};\n\nobj.m() // 21\n</code></pre> <p>\u7531\u4e8e\u4e0a\u9762\u8fd9\u4e2a\u539f\u56e0\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u5efa\u8bae\u4f7f\u7528\u4f20\u7edf\u7684\u5199\u6cd5\u5b9a\u4e49\uff0c\u4e0d\u8981\u7528\u7bad\u5934\u51fd\u6570\u5b9a\u4e49\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u573a\u5408\u662f\u9700\u8981\u52a8\u6001<code>this</code>\u7684\u65f6\u5019\uff0c\u4e5f\u4e0d\u5e94\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <pre><code>var button = document.getElementById('press');\nbutton.addEventListener('click', () =&gt; {\n  this.classList.toggle('on');\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd0\u884c\u65f6\uff0c\u70b9\u51fb\u6309\u94ae\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>button</code>\u7684\u76d1\u542c\u51fd\u6570\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u5bfc\u81f4\u91cc\u9762\u7684<code>this</code>\u5c31\u662f\u5168\u5c40\u5bf9\u8c61\u3002\u5982\u679c\u6539\u6210\u666e\u901a\u51fd\u6570\uff0c<code>this</code>\u5c31\u4f1a\u52a8\u6001\u6307\u5411\u88ab\u70b9\u51fb\u7684\u6309\u94ae\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u5982\u679c\u51fd\u6570\u4f53\u5f88\u590d\u6742\uff0c\u6709\u8bb8\u591a\u884c\uff0c\u6216\u8005\u51fd\u6570\u5185\u90e8\u6709\u5927\u91cf\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u4e0d\u5355\u7eaf\u662f\u4e3a\u4e86\u8ba1\u7b97\u503c\uff0c\u8fd9\u65f6\u4e5f\u4e0d\u5e94\u8be5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\uff0c\u800c\u662f\u8981\u4f7f\u7528\u666e\u901a\u51fd\u6570\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_12","title":"\u5d4c\u5957\u7684\u7bad\u5934\u51fd\u6570","text":"<p>\u7bad\u5934\u51fd\u6570\u5185\u90e8\uff0c\u8fd8\u53ef\u4ee5\u518d\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e2a ES5 \u8bed\u6cd5\u7684\u591a\u91cd\u5d4c\u5957\u51fd\u6570\u3002</p> <pre><code>function insert(value) {\n  return {into: function (array) {\n    return {after: function (afterValue) {\n      array.splice(array.indexOf(afterValue) + 1, 0, value);\n      return array;\n    }};\n  }};\n}\n\ninsert(2).into([1, 3]).after(1); //[1, 2, 3]\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u6539\u5199\u3002</p> <pre><code>let insert = (value) =&gt; ({into: (array) =&gt; ({after: (afterValue) =&gt; {\n  array.splice(array.indexOf(afterValue) + 1, 0, value);\n  return array;\n}})});\n\ninsert(2).into([1, 3]).after(1); //[1, 2, 3]\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u90e8\u7f72\u7ba1\u9053\u673a\u5236\uff08pipeline\uff09\u7684\u4f8b\u5b50\uff0c\u5373\u524d\u4e00\u4e2a\u51fd\u6570\u7684\u8f93\u51fa\u662f\u540e\u4e00\u4e2a\u51fd\u6570\u7684\u8f93\u5165\u3002</p> <pre><code>const pipeline = (...funcs) =&gt;\n  val =&gt; funcs.reduce((a, b) =&gt; b(a), val);\n\nconst plus1 = a =&gt; a + 1;\nconst mult2 = a =&gt; a * 2;\nconst addThenMult = pipeline(plus1, mult2);\n\naddThenMult(5)\n// 12\n</code></pre> <p>\u5982\u679c\u89c9\u5f97\u4e0a\u9762\u7684\u5199\u6cd5\u53ef\u8bfb\u6027\u6bd4\u8f83\u5dee\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const plus1 = a =&gt; a + 1;\nconst mult2 = a =&gt; a * 2;\n\nmult2(plus1(5))\n// 12\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u8fd8\u6709\u4e00\u4e2a\u529f\u80fd\uff0c\u5c31\u662f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u6539\u5199 \u03bb \u6f14\u7b97\u3002</p> <pre><code>// \u03bb\u6f14\u7b97\u7684\u5199\u6cd5\nfix = \u03bbf.(\u03bbx.f(\u03bbv.x(x)(v)))(\u03bbx.f(\u03bbv.x(x)(v)))\n\n// ES6\u7684\u5199\u6cd5\nvar fix = f =&gt; (x =&gt; f(v =&gt; x(x)(v)))\n               (x =&gt; f(v =&gt; x(x)(v)));\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\uff0c\u51e0\u4e4e\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002\u7531\u4e8e \u03bb \u6f14\u7b97\u5bf9\u4e8e\u8ba1\u7b97\u673a\u79d1\u5b66\u975e\u5e38\u91cd\u8981\uff0c\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7528 ES6 \u4f5c\u4e3a\u66ff\u4ee3\u5de5\u5177\uff0c\u63a2\u7d22\u8ba1\u7b97\u673a\u79d1\u5b66\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_13","title":"\u5c3e\u8c03\u7528\u4f18\u5316","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_14","title":"\u4ec0\u4e48\u662f\u5c3e\u8c03\u7528\uff1f","text":"<p>\u5c3e\u8c03\u7528\uff08Tail Call\uff09\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\uff0c\u672c\u8eab\u975e\u5e38\u7b80\u5355\uff0c\u4e00\u53e5\u8bdd\u5c31\u80fd\u8bf4\u6e05\u695a\uff0c\u5c31\u662f\u6307\u67d0\u4e2a\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\u662f\u8c03\u7528\u53e6\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>function f(x){\n  return g(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u7684\u6700\u540e\u4e00\u6b65\u662f\u8c03\u7528\u51fd\u6570<code>g</code>\uff0c\u8fd9\u5c31\u53eb\u5c3e\u8c03\u7528\u3002</p> <p>\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff0c\u90fd\u4e0d\u5c5e\u4e8e\u5c3e\u8c03\u7528\u3002</p> <pre><code>// \u60c5\u51b5\u4e00\nfunction f(x){\n  let y = g(x);\n  return y;\n}\n\n// \u60c5\u51b5\u4e8c\nfunction f(x){\n  return g(x) + 1;\n}\n\n// \u60c5\u51b5\u4e09\nfunction f(x){\n  g(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u60c5\u51b5\u4e00\u662f\u8c03\u7528\u51fd\u6570<code>g</code>\u4e4b\u540e\uff0c\u8fd8\u6709\u8d4b\u503c\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e0d\u5c5e\u4e8e\u5c3e\u8c03\u7528\uff0c\u5373\u4f7f\u8bed\u4e49\u5b8c\u5168\u4e00\u6837\u3002\u60c5\u51b5\u4e8c\u4e5f\u5c5e\u4e8e\u8c03\u7528\u540e\u8fd8\u6709\u64cd\u4f5c\uff0c\u5373\u4f7f\u5199\u5728\u4e00\u884c\u5185\u3002\u60c5\u51b5\u4e09\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>function f(x){\n  g(x);\n  return undefined;\n}\n</code></pre> <p>\u5c3e\u8c03\u7528\u4e0d\u4e00\u5b9a\u51fa\u73b0\u5728\u51fd\u6570\u5c3e\u90e8\uff0c\u53ea\u8981\u662f\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\u5373\u53ef\u3002</p> <pre><code>function f(x) {\n  if (x &gt; 0) {\n    return m(x)\n  }\n  return n(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>m</code>\u548c<code>n</code>\u90fd\u5c5e\u4e8e\u5c3e\u8c03\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u51fd\u6570<code>f</code>\u7684\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_15","title":"\u5c3e\u8c03\u7528\u4f18\u5316","text":"<p>\u5c3e\u8c03\u7528\u4e4b\u6240\u4ee5\u4e0e\u5176\u4ed6\u8c03\u7528\u4e0d\u540c\uff0c\u5c31\u5728\u4e8e\u5b83\u7684\u7279\u6b8a\u7684\u8c03\u7528\u4f4d\u7f6e\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u51fd\u6570\u8c03\u7528\u4f1a\u5728\u5185\u5b58\u5f62\u6210\u4e00\u4e2a\u201c\u8c03\u7528\u8bb0\u5f55\u201d\uff0c\u53c8\u79f0\u201c\u8c03\u7528\u5e27\u201d\uff08call frame\uff09\uff0c\u4fdd\u5b58\u8c03\u7528\u4f4d\u7f6e\u548c\u5185\u90e8\u53d8\u91cf\u7b49\u4fe1\u606f\u3002\u5982\u679c\u5728\u51fd\u6570<code>A</code>\u7684\u5185\u90e8\u8c03\u7528\u51fd\u6570<code>B</code>\uff0c\u90a3\u4e48\u5728<code>A</code>\u7684\u8c03\u7528\u5e27\u4e0a\u65b9\uff0c\u8fd8\u4f1a\u5f62\u6210\u4e00\u4e2a<code>B</code>\u7684\u8c03\u7528\u5e27\u3002\u7b49\u5230<code>B</code>\u8fd0\u884c\u7ed3\u675f\uff0c\u5c06\u7ed3\u679c\u8fd4\u56de\u5230<code>A</code>\uff0c<code>B</code>\u7684\u8c03\u7528\u5e27\u624d\u4f1a\u6d88\u5931\u3002\u5982\u679c\u51fd\u6570<code>B</code>\u5185\u90e8\u8fd8\u8c03\u7528\u51fd\u6570<code>C</code>\uff0c\u90a3\u5c31\u8fd8\u6709\u4e00\u4e2a<code>C</code>\u7684\u8c03\u7528\u5e27\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u6240\u6709\u7684\u8c03\u7528\u5e27\uff0c\u5c31\u5f62\u6210\u4e00\u4e2a\u201c\u8c03\u7528\u6808\u201d\uff08call stack\uff09\u3002</p> <p>\u5c3e\u8c03\u7528\u7531\u4e8e\u662f\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u4fdd\u7559\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u56e0\u4e3a\u8c03\u7528\u4f4d\u7f6e\u3001\u5185\u90e8\u53d8\u91cf\u7b49\u4fe1\u606f\u90fd\u4e0d\u4f1a\u518d\u7528\u5230\u4e86\uff0c\u53ea\u8981\u76f4\u63a5\u7528\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u53d6\u4ee3\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>function f() {\n  let m = 1;\n  let n = 2;\n  return g(m + n);\n}\nf();\n\n// \u7b49\u540c\u4e8e\nfunction f() {\n  return g(3);\n}\nf();\n\n// \u7b49\u540c\u4e8e\ng(3);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u51fd\u6570<code>g</code>\u4e0d\u662f\u5c3e\u8c03\u7528\uff0c\u51fd\u6570<code>f</code>\u5c31\u9700\u8981\u4fdd\u5b58\u5185\u90e8\u53d8\u91cf<code>m</code>\u548c<code>n</code>\u7684\u503c\u3001<code>g</code>\u7684\u8c03\u7528\u4f4d\u7f6e\u7b49\u4fe1\u606f\u3002\u4f46\u7531\u4e8e\u8c03\u7528<code>g</code>\u4e4b\u540e\uff0c\u51fd\u6570<code>f</code>\u5c31\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u6267\u884c\u5230\u6700\u540e\u4e00\u6b65\uff0c\u5b8c\u5168\u53ef\u4ee5\u5220\u9664<code>f(x)</code>\u7684\u8c03\u7528\u5e27\uff0c\u53ea\u4fdd\u7559<code>g(3)</code>\u7684\u8c03\u7528\u5e27\u3002</p> <p>\u8fd9\u5c31\u53eb\u505a\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\uff08Tail call optimization\uff09\uff0c\u5373\u53ea\u4fdd\u7559\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u3002\u5982\u679c\u6240\u6709\u51fd\u6570\u90fd\u662f\u5c3e\u8c03\u7528\uff0c\u90a3\u4e48\u5b8c\u5168\u53ef\u4ee5\u505a\u5230\u6bcf\u6b21\u6267\u884c\u65f6\uff0c\u8c03\u7528\u5e27\u53ea\u6709\u4e00\u9879\uff0c\u8fd9\u5c06\u5927\u5927\u8282\u7701\u5185\u5b58\u3002\u8fd9\u5c31\u662f\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u7684\u610f\u4e49\u3002</p> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u4e0d\u518d\u7528\u5230\u5916\u5c42\u51fd\u6570\u7684\u5185\u90e8\u53d8\u91cf\uff0c\u5185\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\u624d\u4f1a\u53d6\u4ee3\u5916\u5c42\u51fd\u6570\u7684\u8c03\u7528\u5e27\uff0c\u5426\u5219\u5c31\u65e0\u6cd5\u8fdb\u884c\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u3002</p> <pre><code>function addOne(a){\n  var one = 1;\n  function inner(b){\n    return b + one;\n  }\n  return inner(a);\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\u4e0d\u4f1a\u8fdb\u884c\u5c3e\u8c03\u7528\u4f18\u5316\uff0c\u56e0\u4e3a\u5185\u5c42\u51fd\u6570<code>inner</code>\u7528\u5230\u4e86\u5916\u5c42\u51fd\u6570<code>addOne</code>\u7684\u5185\u90e8\u53d8\u91cf<code>one</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u76ee\u524d\u53ea\u6709 Safari \u6d4f\u89c8\u5668\u652f\u6301\u5c3e\u8c03\u7528\u4f18\u5316\uff0cChrome \u548c Firefox \u90fd\u4e0d\u652f\u6301\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_16","title":"\u5c3e\u9012\u5f52","text":"<p>\u51fd\u6570\u8c03\u7528\u81ea\u8eab\uff0c\u79f0\u4e3a\u9012\u5f52\u3002\u5982\u679c\u5c3e\u8c03\u7528\u81ea\u8eab\uff0c\u5c31\u79f0\u4e3a\u5c3e\u9012\u5f52\u3002</p> <p>\u9012\u5f52\u975e\u5e38\u8017\u8d39\u5185\u5b58\uff0c\u56e0\u4e3a\u9700\u8981\u540c\u65f6\u4fdd\u5b58\u6210\u5343\u4e0a\u767e\u4e2a\u8c03\u7528\u5e27\uff0c\u5f88\u5bb9\u6613\u53d1\u751f\u201c\u6808\u6ea2\u51fa\u201d\u9519\u8bef\uff08stack overflow\uff09\u3002\u4f46\u5bf9\u4e8e\u5c3e\u9012\u5f52\u6765\u8bf4\uff0c\u7531\u4e8e\u53ea\u5b58\u5728\u4e00\u4e2a\u8c03\u7528\u5e27\uff0c\u6240\u4ee5\u6c38\u8fdc\u4e0d\u4f1a\u53d1\u751f\u201c\u6808\u6ea2\u51fa\u201d\u9519\u8bef\u3002</p> <pre><code>function factorial(n) {\n  if (n === 1) return 1;\n  return n * factorial(n - 1);\n}\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u9636\u4e58\u51fd\u6570\uff0c\u8ba1\u7b97<code>n</code>\u7684\u9636\u4e58\uff0c\u6700\u591a\u9700\u8981\u4fdd\u5b58<code>n</code>\u4e2a\u8c03\u7528\u8bb0\u5f55\uff0c\u590d\u6742\u5ea6 O(n) \u3002</p> <p>\u5982\u679c\u6539\u5199\u6210\u5c3e\u9012\u5f52\uff0c\u53ea\u4fdd\u7559\u4e00\u4e2a\u8c03\u7528\u8bb0\u5f55\uff0c\u590d\u6742\u5ea6 O(1) \u3002</p> <pre><code>function factorial(n, total) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5, 1) // 120\n</code></pre> <p>\u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u8457\u540d\u7684\u4f8b\u5b50\uff0c\u5c31\u662f\u8ba1\u7b97 Fibonacci \u6570\u5217\uff0c\u4e5f\u80fd\u5145\u5206\u8bf4\u660e\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u91cd\u8981\u6027\u3002</p> <p>\u975e\u5c3e\u9012\u5f52\u7684 Fibonacci \u6570\u5217\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>function Fibonacci (n) {\n  if ( n &lt;= 1 ) {return 1};\n\n  return Fibonacci(n - 1) + Fibonacci(n - 2);\n}\n\nFibonacci(10) // 89\nFibonacci(100) // \u8d85\u65f6\nFibonacci(500) // \u8d85\u65f6\n</code></pre> <p>\u5c3e\u9012\u5f52\u4f18\u5316\u8fc7\u7684 Fibonacci \u6570\u5217\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {\n  if( n &lt;= 1 ) {return ac2};\n\n  return Fibonacci2 (n - 1, ac2, ac1 + ac2);\n}\n\nFibonacci2(100) // 573147844013817200000\nFibonacci2(1000) // 7.0330367711422765e+208\nFibonacci2(10000) // Infinity\n</code></pre> <p>\u7531\u6b64\u53ef\u89c1\uff0c\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u5bf9\u9012\u5f52\u64cd\u4f5c\u610f\u4e49\u91cd\u5927\uff0c\u6240\u4ee5\u4e00\u4e9b\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u5c06\u5176\u5199\u5165\u4e86\u8bed\u8a00\u89c4\u683c\u3002ES6 \u4ea6\u662f\u5982\u6b64\uff0c\u7b2c\u4e00\u6b21\u660e\u786e\u89c4\u5b9a\uff0c\u6240\u6709 ECMAScript \u7684\u5b9e\u73b0\uff0c\u90fd\u5fc5\u987b\u90e8\u7f72\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cES6 \u4e2d\u53ea\u8981\u4f7f\u7528\u5c3e\u9012\u5f52\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u6808\u6ea2\u51fa\uff08\u6216\u8005\u5c42\u5c42\u9012\u5f52\u9020\u6210\u7684\u8d85\u65f6\uff09\uff0c\u76f8\u5bf9\u8282\u7701\u5185\u5b58\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_17","title":"\u9012\u5f52\u51fd\u6570\u7684\u6539\u5199","text":"<p>\u5c3e\u9012\u5f52\u7684\u5b9e\u73b0\uff0c\u5f80\u5f80\u9700\u8981\u6539\u5199\u9012\u5f52\u51fd\u6570\uff0c\u786e\u4fdd\u6700\u540e\u4e00\u6b65\u53ea\u8c03\u7528\u81ea\u8eab\u3002\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u628a\u6240\u6709\u7528\u5230\u7684\u5185\u90e8\u53d8\u91cf\u6539\u5199\u6210\u51fd\u6570\u7684\u53c2\u6570\u3002\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u9636\u4e58\u51fd\u6570 factorial \u9700\u8981\u7528\u5230\u4e00\u4e2a\u4e2d\u95f4\u53d8\u91cf<code>total</code>\uff0c\u90a3\u5c31\u628a\u8fd9\u4e2a\u4e2d\u95f4\u53d8\u91cf\u6539\u5199\u6210\u51fd\u6570\u7684\u53c2\u6570\u3002\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u5c31\u662f\u4e0d\u592a\u76f4\u89c2\uff0c\u7b2c\u4e00\u773c\u5f88\u96be\u770b\u51fa\u6765\uff0c\u4e3a\u4ec0\u4e48\u8ba1\u7b97<code>5</code>\u7684\u9636\u4e58\uff0c\u9700\u8981\u4f20\u5165\u4e24\u4e2a\u53c2\u6570<code>5</code>\u548c<code>1</code>\uff1f</p> <p>\u4e24\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u65b9\u6cd5\u4e00\u662f\u5728\u5c3e\u9012\u5f52\u51fd\u6570\u4e4b\u5916\uff0c\u518d\u63d0\u4f9b\u4e00\u4e2a\u6b63\u5e38\u5f62\u5f0f\u7684\u51fd\u6570\u3002</p> <pre><code>function tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nfunction factorial(n) {\n  return tailFactorial(n, 1);\n}\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u4e00\u4e2a\u6b63\u5e38\u5f62\u5f0f\u7684\u9636\u4e58\u51fd\u6570<code>factorial</code>\uff0c\u8c03\u7528\u5c3e\u9012\u5f52\u51fd\u6570<code>tailFactorial</code>\uff0c\u770b\u8d77\u6765\u5c31\u6b63\u5e38\u591a\u4e86\u3002</p> <p>\u51fd\u6570\u5f0f\u7f16\u7a0b\u6709\u4e00\u4e2a\u6982\u5ff5\uff0c\u53eb\u505a\u67ef\u91cc\u5316\uff08currying\uff09\uff0c\u610f\u601d\u662f\u5c06\u591a\u53c2\u6570\u7684\u51fd\u6570\u8f6c\u6362\u6210\u5355\u53c2\u6570\u7684\u5f62\u5f0f\u3002\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u4f7f\u7528\u67ef\u91cc\u5316\u3002</p> <pre><code>function currying(fn, n) {\n  return function (m) {\n    return fn.call(this, m, n);\n  };\n}\n\nfunction tailFactorial(n, total) {\n  if (n === 1) return total;\n  return tailFactorial(n - 1, n * total);\n}\n\nconst factorial = currying(tailFactorial, 1);\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u67ef\u91cc\u5316\uff0c\u5c06\u5c3e\u9012\u5f52\u51fd\u6570<code>tailFactorial</code>\u53d8\u4e3a\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u7684<code>factorial</code>\u3002</p> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5c31\u7b80\u5355\u591a\u4e86\uff0c\u5c31\u662f\u91c7\u7528 ES6 \u7684\u51fd\u6570\u9ed8\u8ba4\u503c\u3002</p> <pre><code>function factorial(n, total = 1) {\n  if (n === 1) return total;\n  return factorial(n - 1, n * total);\n}\n\nfactorial(5) // 120\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>total</code>\u6709\u9ed8\u8ba4\u503c<code>1</code>\uff0c\u6240\u4ee5\u8c03\u7528\u65f6\u4e0d\u7528\u63d0\u4f9b\u8fd9\u4e2a\u503c\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u9012\u5f52\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u5faa\u73af\u64cd\u4f5c\u3002\u7eaf\u7cb9\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u6ca1\u6709\u5faa\u73af\u64cd\u4f5c\u547d\u4ee4\uff0c\u6240\u6709\u7684\u5faa\u73af\u90fd\u7528\u9012\u5f52\u5b9e\u73b0\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5c3e\u9012\u5f52\u5bf9\u8fd9\u4e9b\u8bed\u8a00\u6781\u5176\u91cd\u8981\u3002\u5bf9\u4e8e\u5176\u4ed6\u652f\u6301\u201c\u5c3e\u8c03\u7528\u4f18\u5316\u201d\u7684\u8bed\u8a00\uff08\u6bd4\u5982 Lua\uff0cES6\uff09\uff0c\u53ea\u9700\u8981\u77e5\u9053\u5faa\u73af\u53ef\u4ee5\u7528\u9012\u5f52\u4ee3\u66ff\uff0c\u800c\u4e00\u65e6\u4f7f\u7528\u9012\u5f52\uff0c\u5c31\u6700\u597d\u4f7f\u7528\u5c3e\u9012\u5f52\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_18","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>ES6 \u7684\u5c3e\u8c03\u7528\u4f18\u5316\u53ea\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u5f00\u542f\uff0c\u6b63\u5e38\u6a21\u5f0f\u662f\u65e0\u6548\u7684\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5728\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u51fd\u6570\u5185\u90e8\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u53ef\u4ee5\u8ddf\u8e2a\u51fd\u6570\u7684\u8c03\u7528\u6808\u3002</p> <ul> <li><code>func.arguments</code>\uff1a\u8fd4\u56de\u8c03\u7528\u65f6\u51fd\u6570\u7684\u53c2\u6570\u3002</li> <li><code>func.caller</code>\uff1a\u8fd4\u56de\u8c03\u7528\u5f53\u524d\u51fd\u6570\u7684\u90a3\u4e2a\u51fd\u6570\u3002</li> </ul> <p>\u5c3e\u8c03\u7528\u4f18\u5316\u53d1\u751f\u65f6\uff0c\u51fd\u6570\u7684\u8c03\u7528\u6808\u4f1a\u6539\u5199\uff0c\u56e0\u6b64\u4e0a\u9762\u4e24\u4e2a\u53d8\u91cf\u5c31\u4f1a\u5931\u771f\u3002\u4e25\u683c\u6a21\u5f0f\u7981\u7528\u8fd9\u4e24\u4e2a\u53d8\u91cf\uff0c\u6240\u4ee5\u5c3e\u8c03\u7528\u6a21\u5f0f\u4ec5\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u751f\u6548\u3002</p> <pre><code>function restricted() {\n  'use strict';\n  restricted.caller;    // \u62a5\u9519\n  restricted.arguments; // \u62a5\u9519\n}\nrestricted();\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_19","title":"\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0","text":"<p>\u5c3e\u9012\u5f52\u4f18\u5316\u53ea\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u751f\u6548\uff0c\u90a3\u4e48\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u6216\u8005\u90a3\u4e9b\u4e0d\u652f\u6301\u8be5\u529f\u80fd\u7684\u73af\u5883\u4e2d\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u4e5f\u4f7f\u7528\u5c3e\u9012\u5f52\u4f18\u5316\u5462\uff1f\u56de\u7b54\u662f\u53ef\u4ee5\u7684\uff0c\u5c31\u662f\u81ea\u5df1\u5b9e\u73b0\u5c3e\u9012\u5f52\u4f18\u5316\u3002</p> <p>\u5b83\u7684\u539f\u7406\u975e\u5e38\u7b80\u5355\u3002\u5c3e\u9012\u5f52\u4e4b\u6240\u4ee5\u9700\u8981\u4f18\u5316\uff0c\u539f\u56e0\u662f\u8c03\u7528\u6808\u592a\u591a\uff0c\u9020\u6210\u6ea2\u51fa\uff0c\u90a3\u4e48\u53ea\u8981\u51cf\u5c11\u8c03\u7528\u6808\uff0c\u5c31\u4e0d\u4f1a\u6ea2\u51fa\u3002\u600e\u4e48\u505a\u53ef\u4ee5\u51cf\u5c11\u8c03\u7528\u6808\u5462\uff1f\u5c31\u662f\u91c7\u7528\u201c\u5faa\u73af\u201d\u6362\u6389\u201c\u9012\u5f52\u201d\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u6b63\u5e38\u7684\u9012\u5f52\u51fd\u6570\u3002</p> <pre><code>function sum(x, y) {\n  if (y &gt; 0) {\n    return sum(x + 1, y - 1);\n  } else {\n    return x;\n  }\n}\n\nsum(1, 100000)\n// Uncaught RangeError: Maximum call stack size exceeded(\u2026)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sum</code>\u662f\u4e00\u4e2a\u9012\u5f52\u51fd\u6570\uff0c\u53c2\u6570<code>x</code>\u662f\u9700\u8981\u7d2f\u52a0\u7684\u503c\uff0c\u53c2\u6570<code>y</code>\u63a7\u5236\u9012\u5f52\u6b21\u6570\u3002\u4e00\u65e6\u6307\u5b9a<code>sum</code>\u9012\u5f52 100000 \u6b21\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u63d0\u793a\u8d85\u51fa\u8c03\u7528\u6808\u7684\u6700\u5927\u6b21\u6570\u3002</p> <p>\u8e66\u5e8a\u51fd\u6570\uff08trampoline\uff09\u53ef\u4ee5\u5c06\u9012\u5f52\u6267\u884c\u8f6c\u4e3a\u5faa\u73af\u6267\u884c\u3002</p> <pre><code>function trampoline(f) {\n  while (f &amp;&amp; f instanceof Function) {\n    f = f();\n  }\n  return f;\n}\n</code></pre> <p>\u4e0a\u9762\u5c31\u662f\u8e66\u5e8a\u51fd\u6570\u7684\u4e00\u4e2a\u5b9e\u73b0\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570<code>f</code>\u4f5c\u4e3a\u53c2\u6570\u3002\u53ea\u8981<code>f</code>\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u7ee7\u7eed\u6267\u884c\u3002\u6ce8\u610f\uff0c\u8fd9\u91cc\u662f\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u7136\u540e\u6267\u884c\u8be5\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u51fd\u6570\u91cc\u9762\u8c03\u7528\u51fd\u6570\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u9012\u5f52\u6267\u884c\uff0c\u4ece\u800c\u5c31\u6d88\u9664\u4e86\u8c03\u7528\u6808\u8fc7\u5927\u7684\u95ee\u9898\u3002</p> <p>\u7136\u540e\uff0c\u8981\u505a\u7684\u5c31\u662f\u5c06\u539f\u6765\u7684\u9012\u5f52\u51fd\u6570\uff0c\u6539\u5199\u4e3a\u6bcf\u4e00\u6b65\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>function sum(x, y) {\n  if (y &gt; 0) {\n    return sum.bind(null, x + 1, y - 1);\n  } else {\n    return x;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sum</code>\u51fd\u6570\u7684\u6bcf\u6b21\u6267\u884c\uff0c\u90fd\u4f1a\u8fd4\u56de\u81ea\u8eab\u7684\u53e6\u4e00\u4e2a\u7248\u672c\u3002</p> <p>\u73b0\u5728\uff0c\u4f7f\u7528\u8e66\u5e8a\u51fd\u6570\u6267\u884c<code>sum</code>\uff0c\u5c31\u4e0d\u4f1a\u53d1\u751f\u8c03\u7528\u6808\u6ea2\u51fa\u3002</p> <pre><code>trampoline(sum(1, 100000))\n// 100001\n</code></pre> <p>\u8e66\u5e8a\u51fd\u6570\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u5c3e\u9012\u5f52\u4f18\u5316\uff0c\u4e0b\u9762\u7684\u5b9e\u73b0\u624d\u662f\u3002</p> <pre><code>function tco(f) {\n  var value;\n  var active = false;\n  var accumulated = [];\n\n  return function accumulator() {\n    accumulated.push(arguments);\n    if (!active) {\n      active = true;\n      while (accumulated.length) {\n        value = f.apply(this, accumulated.shift());\n      }\n      active = false;\n      return value;\n    }\n  };\n}\n\nvar sum = tco(function(x, y) {\n  if (y &gt; 0) {\n    return sum(x + 1, y - 1)\n  }\n  else {\n    return x\n  }\n});\n\nsum(1, 100000)\n// 100001\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>tco</code>\u51fd\u6570\u662f\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u5b9e\u73b0\uff0c\u5b83\u7684\u5965\u5999\u5c31\u5728\u4e8e\u72b6\u6001\u53d8\u91cf<code>active</code>\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e0d\u6fc0\u6d3b\u7684\u3002\u4e00\u65e6\u8fdb\u5165\u5c3e\u9012\u5f52\u4f18\u5316\u7684\u8fc7\u7a0b\uff0c\u8fd9\u4e2a\u53d8\u91cf\u5c31\u6fc0\u6d3b\u4e86\u3002\u7136\u540e\uff0c\u6bcf\u4e00\u8f6e\u9012\u5f52<code>sum</code>\u8fd4\u56de\u7684\u90fd\u662f<code>undefined</code>\uff0c\u6240\u4ee5\u5c31\u907f\u514d\u4e86\u9012\u5f52\u6267\u884c\uff1b\u800c<code>accumulated</code>\u6570\u7ec4\u5b58\u653e\u6bcf\u4e00\u8f6e<code>sum</code>\u6267\u884c\u7684\u53c2\u6570\uff0c\u603b\u662f\u6709\u503c\u7684\uff0c\u8fd9\u5c31\u4fdd\u8bc1\u4e86<code>accumulator</code>\u51fd\u6570\u5185\u90e8\u7684<code>while</code>\u5faa\u73af\u603b\u662f\u4f1a\u6267\u884c\u3002\u8fd9\u6837\u5c31\u5f88\u5de7\u5999\u5730\u5c06\u201c\u9012\u5f52\u201d\u6539\u6210\u4e86\u201c\u5faa\u73af\u201d\uff0c\u800c\u540e\u4e00\u8f6e\u7684\u53c2\u6570\u4f1a\u53d6\u4ee3\u524d\u4e00\u8f6e\u7684\u53c2\u6570\uff0c\u4fdd\u8bc1\u4e86\u8c03\u7528\u6808\u53ea\u6709\u4e00\u5c42\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#_20","title":"\u51fd\u6570\u53c2\u6570\u7684\u5c3e\u9017\u53f7","text":"<p>ES2017 \u5141\u8bb8\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u6709\u5c3e\u9017\u53f7\uff08trailing comma\uff09\u3002</p> <p>\u6b64\u524d\uff0c\u51fd\u6570\u5b9a\u4e49\u548c\u8c03\u7528\u65f6\uff0c\u90fd\u4e0d\u5141\u8bb8\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u540e\u9762\u51fa\u73b0\u9017\u53f7\u3002</p> <pre><code>function clownsEverywhere(\n  param1,\n  param2\n) { /* ... */ }\n\nclownsEverywhere(\n  'foo',\n  'bar'\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5728<code>param2</code>\u6216<code>bar</code>\u540e\u9762\u52a0\u4e00\u4e2a\u9017\u53f7\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u50cf\u4e0a\u9762\u8fd9\u6837\uff0c\u5c06\u53c2\u6570\u5199\u6210\u591a\u884c\uff08\u5373\u6bcf\u4e2a\u53c2\u6570\u5360\u636e\u4e00\u884c\uff09\uff0c\u4ee5\u540e\u4fee\u6539\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u60f3\u4e3a\u51fd\u6570<code>clownsEverywhere</code>\u6dfb\u52a0\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u6216\u8005\u8c03\u6574\u53c2\u6570\u7684\u6b21\u5e8f\uff0c\u5c31\u52bf\u5fc5\u8981\u5728\u539f\u6765\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u540e\u9762\u6dfb\u52a0\u4e00\u4e2a\u9017\u53f7\u3002\u8fd9\u5bf9\u4e8e\u7248\u672c\u7ba1\u7406\u7cfb\u7edf\u6765\u8bf4\uff0c\u5c31\u4f1a\u663e\u793a\u6dfb\u52a0\u9017\u53f7\u7684\u90a3\u4e00\u884c\u4e5f\u53d1\u751f\u4e86\u53d8\u52a8\u3002\u8fd9\u770b\u4e0a\u53bb\u6709\u70b9\u5197\u4f59\uff0c\u56e0\u6b64\u65b0\u7684\u8bed\u6cd5\u5141\u8bb8\u5b9a\u4e49\u548c\u8c03\u7528\u65f6\uff0c\u5c3e\u90e8\u76f4\u63a5\u6709\u4e00\u4e2a\u9017\u53f7\u3002</p> <pre><code>function clownsEverywhere(\n  param1,\n  param2,\n) { /* ... */ }\n\nclownsEverywhere(\n  'foo',\n  'bar',\n);\n</code></pre> <p>\u8fd9\u6837\u7684\u89c4\u5b9a\u4e5f\u4f7f\u5f97\uff0c\u51fd\u6570\u53c2\u6570\u4e0e\u6570\u7ec4\u548c\u5bf9\u8c61\u7684\u5c3e\u9017\u53f7\u89c4\u5219\uff0c\u4fdd\u6301\u4e00\u81f4\u4e86\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#functionprototypetostring","title":"Function.prototype.toString()","text":"<p>ES2019 \u5bf9\u51fd\u6570\u5b9e\u4f8b\u7684<code>toString()</code>\u65b9\u6cd5\u505a\u51fa\u4e86\u4fee\u6539\u3002</p> <p><code>toString()</code>\u65b9\u6cd5\u8fd4\u56de\u51fd\u6570\u4ee3\u7801\u672c\u8eab\uff0c\u4ee5\u524d\u4f1a\u7701\u7565\u6ce8\u91ca\u548c\u7a7a\u683c\u3002</p> <pre><code>function /* foo comment */ foo () {}\n\nfoo.toString()\n// function foo() {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>foo</code>\u7684\u539f\u59cb\u4ee3\u7801\u5305\u542b\u6ce8\u91ca\uff0c\u51fd\u6570\u540d<code>foo</code>\u548c\u5706\u62ec\u53f7\u4e4b\u95f4\u6709\u7a7a\u683c\uff0c\u4f46\u662f<code>toString()</code>\u65b9\u6cd5\u90fd\u628a\u5b83\u4eec\u7701\u7565\u4e86\u3002</p> <p>\u4fee\u6539\u540e\u7684<code>toString()</code>\u65b9\u6cd5\uff0c\u660e\u786e\u8981\u6c42\u8fd4\u56de\u4e00\u6a21\u4e00\u6837\u7684\u539f\u59cb\u4ee3\u7801\u3002</p> <pre><code>function /* foo comment */ foo () {}\n\nfoo.toString()\n// \"function /* foo comment */ foo () {}\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/08-function/#catch","title":"catch \u547d\u4ee4\u7684\u53c2\u6570\u7701\u7565","text":"<p>JavaScript \u8bed\u8a00\u7684<code>try...catch</code>\u7ed3\u6784\uff0c\u4ee5\u524d\u660e\u786e\u8981\u6c42<code>catch</code>\u547d\u4ee4\u540e\u9762\u5fc5\u987b\u8ddf\u53c2\u6570\uff0c\u63a5\u53d7<code>try</code>\u4ee3\u7801\u5757\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u3002</p> <pre><code>try {\n  // ...\n} catch (err) {\n  // \u5904\u7406\u9519\u8bef\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>catch</code>\u547d\u4ee4\u540e\u9762\u5e26\u6709\u53c2\u6570<code>err</code>\u3002</p> <p>\u5f88\u591a\u65f6\u5019\uff0c<code>catch</code>\u4ee3\u7801\u5757\u53ef\u80fd\u7528\u4e0d\u5230\u8fd9\u4e2a\u53c2\u6570\u3002\u4f46\u662f\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bed\u6cd5\u6b63\u786e\uff0c\u8fd8\u662f\u5fc5\u987b\u5199\u3002ES2019 \u505a\u51fa\u4e86\u6539\u53d8\uff0c\u5141\u8bb8<code>catch</code>\u8bed\u53e5\u7701\u7565\u53c2\u6570\u3002</p> <pre><code>try {\n  // ...\n} catch {\n  // ...\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/","title":"09-\u6570\u7ec4\u7684\u6269\u5c55","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#_1","title":"\u6269\u5c55\u8fd0\u7b97\u7b26","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#_2","title":"\u542b\u4e49","text":"<p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08spread\uff09\u662f\u4e09\u4e2a\u70b9\uff08<code>...</code>\uff09\u3002\u5b83\u597d\u6bd4 rest \u53c2\u6570\u7684\u9006\u8fd0\u7b97\uff0c\u5c06\u4e00\u4e2a\u6570\u7ec4\u8f6c\u4e3a\u7528\u9017\u53f7\u5206\u9694\u7684\u53c2\u6570\u5e8f\u5217\u3002</p> <pre><code>console.log(...[1, 2, 3])\n// 1 2 3\n\nconsole.log(1, ...[2, 3, 4], 5)\n// 1 2 3 4 5\n\n[...document.querySelectorAll('div')]\n// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]\n</code></pre> <p>\u8be5\u8fd0\u7b97\u7b26\u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u3002</p> <pre><code>function push(array, ...items) {\n  array.push(...items);\n}\n\nfunction add(x, y) {\n  return x + y;\n}\n\nconst numbers = [4, 38];\nadd(...numbers) // 42\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>array.push(...items)</code>\u548c<code>add(...numbers)</code>\u8fd9\u4e24\u884c\uff0c\u90fd\u662f\u51fd\u6570\u7684\u8c03\u7528\uff0c\u5b83\u4eec\u90fd\u4f7f\u7528\u4e86\u6269\u5c55\u8fd0\u7b97\u7b26\u3002\u8be5\u8fd0\u7b97\u7b26\u5c06\u4e00\u4e2a\u6570\u7ec4\uff0c\u53d8\u4e3a\u53c2\u6570\u5e8f\u5217\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u4e0e\u6b63\u5e38\u7684\u51fd\u6570\u53c2\u6570\u53ef\u4ee5\u7ed3\u5408\u4f7f\u7528\uff0c\u975e\u5e38\u7075\u6d3b\u3002</p> <pre><code>function f(v, w, x, y, z) { }\nconst args = [0, 1];\nf(-1, ...args, 2, ...[3]);\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u8fd8\u53ef\u4ee5\u653e\u7f6e\u8868\u8fbe\u5f0f\u3002</p> <pre><code>const arr = [\n  ...(x &gt; 0 ? ['a'] : []),\n  'b',\n];\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff0c\u5219\u4e0d\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>[...[], 1]\n// [1]\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u624d\u53ef\u4ee5\u653e\u5728\u5706\u62ec\u53f7\u4e2d\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>(...[1, 2])\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log((...[1, 2]))\n// Uncaught SyntaxError: Unexpected number\n\nconsole.log(...[1, 2])\n// 1 2\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u60c5\u51b5\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u90fd\u653e\u5728\u5706\u62ec\u53f7\u91cc\u9762\uff0c\u4f46\u662f\u524d\u4e24\u79cd\u60c5\u51b5\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6269\u5c55\u8fd0\u7b97\u7b26\u6240\u5728\u7684\u62ec\u53f7\u4e0d\u662f\u51fd\u6570\u8c03\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#apply","title":"\u66ff\u4ee3\u51fd\u6570\u7684 apply() \u65b9\u6cd5","text":"<p>\u7531\u4e8e\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c55\u5f00\u6570\u7ec4\uff0c\u6240\u4ee5\u4e0d\u518d\u9700\u8981<code>apply()</code>\u65b9\u6cd5\u5c06\u6570\u7ec4\u8f6c\u4e3a\u51fd\u6570\u7684\u53c2\u6570\u4e86\u3002</p> <pre><code>// ES5 \u7684\u5199\u6cd5\nfunction f(x, y, z) {\n  // ...\n}\nvar args = [0, 1, 2];\nf.apply(null, args);\n\n// ES6 \u7684\u5199\u6cd5\nfunction f(x, y, z) {\n  // ...\n}\nlet args = [0, 1, 2];\nf(...args);\n</code></pre> <p>\u4e0b\u9762\u662f\u6269\u5c55\u8fd0\u7b97\u7b26\u53d6\u4ee3<code>apply()</code>\u65b9\u6cd5\u7684\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\uff0c\u5e94\u7528<code>Math.max()</code>\u65b9\u6cd5\uff0c\u7b80\u5316\u6c42\u51fa\u4e00\u4e2a\u6570\u7ec4\u6700\u5927\u5143\u7d20\u7684\u5199\u6cd5\u3002</p> <pre><code>// ES5 \u7684\u5199\u6cd5\nMath.max.apply(null, [14, 3, 77])\n\n// ES6 \u7684\u5199\u6cd5\nMath.max(...[14, 3, 77])\n\n// \u7b49\u540c\u4e8e\nMath.max(14, 3, 77);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e JavaScript \u4e0d\u63d0\u4f9b\u6c42\u6570\u7ec4\u6700\u5927\u5143\u7d20\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u53ea\u80fd\u5957\u7528<code>Math.max()</code>\u51fd\u6570\uff0c\u5c06\u6570\u7ec4\u8f6c\u4e3a\u4e00\u4e2a\u53c2\u6570\u5e8f\u5217\uff0c\u7136\u540e\u6c42\u6700\u5927\u503c\u3002\u6709\u4e86\u6269\u5c55\u8fd0\u7b97\u7b26\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528<code>Math.max()</code>\u4e86\u3002</p> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u901a\u8fc7<code>push()</code>\u51fd\u6570\uff0c\u5c06\u4e00\u4e2a\u6570\u7ec4\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u6570\u7ec4\u7684\u5c3e\u90e8\u3002</p> <pre><code>// ES5 \u7684\u5199\u6cd5\nvar arr1 = [0, 1, 2];\nvar arr2 = [3, 4, 5];\nArray.prototype.push.apply(arr1, arr2);\n\n// ES6 \u7684\u5199\u6cd5\nlet arr1 = [0, 1, 2];\nlet arr2 = [3, 4, 5];\narr1.push(...arr2);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684 ES5 \u5199\u6cd5\u4e2d\uff0c<code>push()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4e0d\u80fd\u662f\u6570\u7ec4\uff0c\u6240\u4ee5\u53ea\u597d\u901a\u8fc7<code>apply()</code>\u65b9\u6cd5\u53d8\u901a\u4f7f\u7528<code>push()</code>\u65b9\u6cd5\u3002\u6709\u4e86\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c06\u6570\u7ec4\u4f20\u5165<code>push()</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// ES5\nnew (Date.bind.apply(Date, [null, 2015, 1, 1]))\n\n// ES6\nnew Date(...[2015, 1, 1]);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#_3","title":"\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u5e94\u7528","text":"<p>\uff081\uff09\u590d\u5236\u6570\u7ec4</p> <p>\u6570\u7ec4\u662f\u590d\u5408\u7684\u6570\u636e\u7c7b\u578b\uff0c\u76f4\u63a5\u590d\u5236\u7684\u8bdd\uff0c\u53ea\u662f\u590d\u5236\u4e86\u6307\u5411\u5e95\u5c42\u6570\u636e\u7ed3\u6784\u7684\u6307\u9488\uff0c\u800c\u4e0d\u662f\u514b\u9686\u4e00\u4e2a\u5168\u65b0\u7684\u6570\u7ec4\u3002</p> <pre><code>const a1 = [1, 2];\nconst a2 = a1;\n\na2[0] = 2;\na1 // [2, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a2</code>\u5e76\u4e0d\u662f<code>a1</code>\u7684\u514b\u9686\uff0c\u800c\u662f\u6307\u5411\u540c\u4e00\u4efd\u6570\u636e\u7684\u53e6\u4e00\u4e2a\u6307\u9488\u3002\u4fee\u6539<code>a2</code>\uff0c\u4f1a\u76f4\u63a5\u5bfc\u81f4<code>a1</code>\u7684\u53d8\u5316\u3002</p> <p>ES5 \u53ea\u80fd\u7528\u53d8\u901a\u65b9\u6cd5\u6765\u590d\u5236\u6570\u7ec4\u3002</p> <pre><code>const a1 = [1, 2];\nconst a2 = a1.concat();\n\na2[0] = 2;\na1 // [1, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a1</code>\u4f1a\u8fd4\u56de\u539f\u6570\u7ec4\u7684\u514b\u9686\uff0c\u518d\u4fee\u6539<code>a2</code>\u5c31\u4e0d\u4f1a\u5bf9<code>a1</code>\u4ea7\u751f\u5f71\u54cd\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u63d0\u4f9b\u4e86\u590d\u5236\u6570\u7ec4\u7684\u7b80\u4fbf\u5199\u6cd5\u3002</p> <pre><code>const a1 = [1, 2];\n// \u5199\u6cd5\u4e00\nconst a2 = [...a1];\n// \u5199\u6cd5\u4e8c\nconst [...a2] = a1;\n</code></pre> <p>\u4e0a\u9762\u7684\u4e24\u79cd\u5199\u6cd5\uff0c<code>a2</code>\u90fd\u662f<code>a1</code>\u7684\u514b\u9686\u3002</p> <p>\uff082\uff09\u5408\u5e76\u6570\u7ec4</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u63d0\u4f9b\u4e86\u6570\u7ec4\u5408\u5e76\u7684\u65b0\u5199\u6cd5\u3002</p> <pre><code>const arr1 = ['a', 'b'];\nconst arr2 = ['c'];\nconst arr3 = ['d', 'e'];\n\n// ES5 \u7684\u5408\u5e76\u6570\u7ec4\narr1.concat(arr2, arr3);\n// [ 'a', 'b', 'c', 'd', 'e' ]\n\n// ES6 \u7684\u5408\u5e76\u6570\u7ec4\n[...arr1, ...arr2, ...arr3]\n// [ 'a', 'b', 'c', 'd', 'e' ]\n</code></pre> <p>\u4e0d\u8fc7\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u6d45\u62f7\u8d1d\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u6ce8\u610f\u3002</p> <pre><code>const a1 = [{ foo: 1 }];\nconst a2 = [{ bar: 2 }];\n\nconst a3 = a1.concat(a2);\nconst a4 = [...a1, ...a2];\n\na3[0] === a1[0] // true\na4[0] === a1[0] // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a3</code>\u548c<code>a4</code>\u662f\u7528\u4e24\u79cd\u4e0d\u540c\u65b9\u6cd5\u5408\u5e76\u800c\u6210\u7684\u65b0\u6570\u7ec4\uff0c\u4f46\u662f\u5b83\u4eec\u7684\u6210\u5458\u90fd\u662f\u5bf9\u539f\u6570\u7ec4\u6210\u5458\u7684\u5f15\u7528\uff0c\u8fd9\u5c31\u662f\u6d45\u62f7\u8d1d\u3002\u5982\u679c\u4fee\u6539\u4e86\u5f15\u7528\u6307\u5411\u7684\u503c\uff0c\u4f1a\u540c\u6b65\u53cd\u6620\u5230\u65b0\u6570\u7ec4\u3002</p> <p>\uff083\uff09\u4e0e\u89e3\u6784\u8d4b\u503c\u7ed3\u5408</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u4e0e\u89e3\u6784\u8d4b\u503c\u7ed3\u5408\u8d77\u6765\uff0c\u7528\u4e8e\u751f\u6210\u6570\u7ec4\u3002</p> <pre><code>// ES5\na = list[0], rest = list.slice(1)\n\n// ES6\n[a, ...rest] = list\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <pre><code>const [first, ...rest] = [1, 2, 3, 4, 5];\nfirst // 1\nrest  // [2, 3, 4, 5]\n\nconst [first, ...rest] = [];\nfirst // undefined\nrest  // []\n\nconst [first, ...rest] = [\"foo\"];\nfirst  // \"foo\"\nrest   // []\n</code></pre> <p>\u5982\u679c\u5c06\u6269\u5c55\u8fd0\u7b97\u7b26\u7528\u4e8e\u6570\u7ec4\u8d4b\u503c\uff0c\u53ea\u80fd\u653e\u5728\u53c2\u6570\u7684\u6700\u540e\u4e00\u4f4d\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>const [...butLast, last] = [1, 2, 3, 4, 5];\n// \u62a5\u9519\n\nconst [first, ...middle, last] = [1, 2, 3, 4, 5];\n// \u62a5\u9519\n</code></pre> <p>\uff084\uff09\u5b57\u7b26\u4e32</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u8fd8\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>[...'hello']\n// [ \"h\", \"e\", \"l\", \"l\", \"o\" ]\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\uff0c\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u597d\u5904\uff0c\u90a3\u5c31\u662f\u80fd\u591f\u6b63\u786e\u8bc6\u522b\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\u3002</p> <pre><code>'x\\uD83D\\uDE80y'.length // 4\n[...'x\\uD83D\\uDE80y'].length // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u4e00\u79cd\u5199\u6cd5\uff0cJavaScript \u4f1a\u5c06\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\uff0c\u8bc6\u522b\u4e3a 2 \u4e2a\u5b57\u7b26\uff0c\u91c7\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u6b63\u786e\u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u51fd\u6570\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002</p> <pre><code>function length(str) {\n  return [...str].length;\n}\n\nlength('x\\uD83D\\uDE80y') // 3\n</code></pre> <p>\u51e1\u662f\u6d89\u53ca\u5230\u64cd\u4f5c\u56db\u4e2a\u5b57\u8282\u7684 Unicode \u5b57\u7b26\u7684\u51fd\u6570\uff0c\u90fd\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u6700\u597d\u90fd\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u6539\u5199\u3002</p> <pre><code>let str = 'x\\uD83D\\uDE80y';\n\nstr.split('').reverse().join('')\n// 'y\\uDE80\\uD83Dx'\n\n[...str].reverse().join('')\n// 'y\\uD83D\\uDE80x'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5b57\u7b26\u4e32\u7684<code>reverse()</code>\u64cd\u4f5c\u5c31\u4e0d\u6b63\u786e\u3002</p> <p>\uff085\uff09\u5b9e\u73b0\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61</p> <p>\u4efb\u4f55\u5b9a\u4e49\u4e86\u904d\u5386\u5668\uff08Iterator\uff09\u63a5\u53e3\u7684\u5bf9\u8c61\uff08\u53c2\u9605 Iterator \u4e00\u7ae0\uff09\uff0c\u90fd\u53ef\u4ee5\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let nodeList = document.querySelectorAll('div');\nlet array = [...nodeList];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>querySelectorAll()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a<code>NodeList</code>\u5bf9\u8c61\u3002\u5b83\u4e0d\u662f\u6570\u7ec4\uff0c\u800c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u8fd9\u65f6\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c06\u5176\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u539f\u56e0\u5c31\u5728\u4e8e<code>NodeList</code>\u5bf9\u8c61\u5b9e\u73b0\u4e86 Iterator\u3002</p> <pre><code>Number.prototype[Symbol.iterator] = function*() {\n  let i = 0;\n  let num = this.valueOf();\n  while (i &lt; num) {\n    yield i++;\n  }\n}\n\nconsole.log([...5]) // [0, 1, 2, 3, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u5b9a\u4e49\u4e86<code>Number</code>\u5bf9\u8c61\u7684\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c06<code>5</code>\u81ea\u52a8\u8f6c\u6210<code>Number</code>\u5b9e\u4f8b\u4ee5\u540e\uff0c\u5c31\u4f1a\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u4f1a\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u7ed3\u679c\u3002</p> <p>\u5bf9\u4e8e\u90a3\u4e9b\u6ca1\u6709\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u65e0\u6cd5\u5c06\u5176\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = {\n  '0': 'a',\n  '1': 'b',\n  '2': 'c',\n  length: 3\n};\n\n// TypeError: Cannot spread non-iterable object.\nlet arr = [...arrayLike];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>arrayLike</code>\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u6ca1\u6709\u90e8\u7f72 Iterator \u63a5\u53e3\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c\u53ef\u4ee5\u6539\u4e3a\u4f7f\u7528<code>Array.from</code>\u65b9\u6cd5\u5c06<code>arrayLike</code>\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <p>\uff086\uff09Map \u548c Set \u7ed3\u6784\uff0cGenerator \u51fd\u6570</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u5185\u90e8\u8c03\u7528\u7684\u662f\u6570\u636e\u7ed3\u6784\u7684 Iterator \u63a5\u53e3\uff0c\u56e0\u6b64\u53ea\u8981\u5177\u6709 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u6bd4\u5982 Map \u7ed3\u6784\u3002</p> <pre><code>let map = new Map([\n  [1, 'one'],\n  [2, 'two'],\n  [3, 'three'],\n]);\n\nlet arr = [...map.keys()]; // [1, 2, 3]\n</code></pre> <p>Generator \u51fd\u6570\u8fd0\u884c\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\u3002</p> <pre><code>const go = function*(){\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...go()] // [1, 2, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>go</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u6267\u884c\u540e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u5bf9\u8fd9\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u6267\u884c\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c31\u4f1a\u5c06\u5185\u90e8\u904d\u5386\u5f97\u5230\u7684\u503c\uff0c\u8f6c\u4e3a\u4e00\u4e2a\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u5bf9\u6ca1\u6709 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>const obj = {a: 1, b: 2};\nlet arr = [...obj]; // TypeError: Cannot spread non-iterable object\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#arrayfrom","title":"Array.from()","text":"<p><code>Array.from()</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u4e24\u7c7b\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff1a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff08array-like object\uff09\u548c\u53ef\u904d\u5386\uff08iterable\uff09\u7684\u5bf9\u8c61\uff08\u5305\u62ec ES6 \u65b0\u589e\u7684\u6570\u636e\u7ed3\u6784 Set \u548c Map\uff09\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c<code>Array.from()</code>\u5c06\u5b83\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = {\n    '0': 'a',\n    '1': 'b',\n    '2': 'c',\n    length: 3\n};\n\n// ES5 \u7684\u5199\u6cd5\nvar arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']\n\n// ES6 \u7684\u5199\u6cd5\nlet arr2 = Array.from(arrayLike); // ['a', 'b', 'c']\n</code></pre> <p>\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u5e38\u89c1\u7684\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u662f DOM \u64cd\u4f5c\u8fd4\u56de\u7684 NodeList \u96c6\u5408\uff0c\u4ee5\u53ca\u51fd\u6570\u5185\u90e8\u7684<code>arguments</code>\u5bf9\u8c61\u3002<code>Array.from()</code>\u90fd\u53ef\u4ee5\u5c06\u5b83\u4eec\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>// NodeList \u5bf9\u8c61\nlet ps = document.querySelectorAll('p');\nArray.from(ps).filter(p =&gt; {\n  return p.textContent.length &gt; 100;\n});\n\n// arguments \u5bf9\u8c61\nfunction foo() {\n  var args = Array.from(arguments);\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>querySelectorAll()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u518d\u4f7f\u7528<code>filter()</code>\u65b9\u6cd5\u3002</p> <p>\u53ea\u8981\u662f\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\uff0c<code>Array.from()</code>\u90fd\u80fd\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>Array.from('hello')\n// ['h', 'e', 'l', 'l', 'o']\n\nlet namesSet = new Set(['a', 'b'])\nArray.from(namesSet) // ['a', 'b']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32\u548c Set \u7ed3\u6784\u90fd\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u56e0\u6b64\u53ef\u4ee5\u88ab<code>Array.from()</code>\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u53c2\u6570\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\uff0c<code>Array.from()</code>\u4f1a\u8fd4\u56de\u4e00\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u65b0\u6570\u7ec4\u3002</p> <pre><code>Array.from([1, 2, 3])\n// [1, 2, 3]\n</code></pre> <p>\u503c\u5f97\u63d0\u9192\u7684\u662f\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u4e5f\u53ef\u4ee5\u5c06\u67d0\u4e9b\u6570\u636e\u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>// arguments\u5bf9\u8c61\nfunction foo() {\n  const args = [...arguments];\n}\n\n// NodeList\u5bf9\u8c61\n[...document.querySelectorAll('div')]\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u80cc\u540e\u8c03\u7528\u7684\u662f\u904d\u5386\u5668\u63a5\u53e3\uff08<code>Symbol.iterator</code>\uff09\uff0c\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u6ca1\u6709\u90e8\u7f72\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u65e0\u6cd5\u8f6c\u6362\u3002<code>Array.from()</code>\u65b9\u6cd5\u8fd8\u652f\u6301\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u6240\u8c13\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u672c\u8d28\u7279\u5f81\u53ea\u6709\u4e00\u70b9\uff0c\u5373\u5fc5\u987b\u6709<code>length</code>\u5c5e\u6027\u3002\u56e0\u6b64\uff0c\u4efb\u4f55\u6709<code>length</code>\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7<code>Array.from()</code>\u65b9\u6cd5\u8f6c\u4e3a\u6570\u7ec4\uff0c\u800c\u6b64\u65f6\u6269\u5c55\u8fd0\u7b97\u7b26\u5c31\u65e0\u6cd5\u8f6c\u6362\u3002</p> <pre><code>Array.from({ length: 3 });\n// [ undefined, undefined, undefined ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array.from()</code>\u8fd4\u56de\u4e86\u4e00\u4e2a\u5177\u6709\u4e09\u4e2a\u6210\u5458\u7684\u6570\u7ec4\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u503c\u90fd\u662f<code>undefined</code>\u3002\u6269\u5c55\u8fd0\u7b97\u7b26\u8f6c\u6362\u4e0d\u4e86\u8fd9\u4e2a\u5bf9\u8c61\u3002</p> <p>\u5bf9\u4e8e\u8fd8\u6ca1\u6709\u90e8\u7f72\u8be5\u65b9\u6cd5\u7684\u6d4f\u89c8\u5668\uff0c\u53ef\u4ee5\u7528<code>Array.prototype.slice()</code>\u65b9\u6cd5\u66ff\u4ee3\u3002</p> <pre><code>const toArray = (() =&gt;\n  Array.from ? Array.from : obj =&gt; [].slice.call(obj)\n)();\n</code></pre> <p><code>Array.from()</code>\u8fd8\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u6570\u7ec4\u7684<code>map()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u5bf9\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u5904\u7406\uff0c\u5c06\u5904\u7406\u540e\u7684\u503c\u653e\u5165\u8fd4\u56de\u7684\u6570\u7ec4\u3002</p> <pre><code>Array.from(arrayLike, x =&gt; x * x);\n// \u7b49\u540c\u4e8e\nArray.from(arrayLike).map(x =&gt; x * x);\n\nArray.from([1, 2, 3], (x) =&gt; x * x)\n// [1, 4, 9]\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u53d6\u51fa\u4e00\u7ec4 DOM \u8282\u70b9\u7684\u6587\u672c\u5185\u5bb9\u3002</p> <pre><code>let spans = document.querySelectorAll('span.name');\n\n// map()\nlet names1 = Array.prototype.map.call(spans, s =&gt; s.textContent);\n\n// Array.from()\nlet names2 = Array.from(spans, s =&gt; s.textContent)\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u6570\u7ec4\u4e2d\u5e03\u5c14\u503c\u4e3a<code>false</code>\u7684\u6210\u5458\u8f6c\u4e3a<code>0</code>\u3002</p> <pre><code>Array.from([1, , 2, , 3], (n) =&gt; n || 0)\n// [1, 0, 2, 0, 3]\n</code></pre> <p>\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u8fd4\u56de\u5404\u79cd\u6570\u636e\u7684\u7c7b\u578b\u3002</p> <pre><code>function typesOf () {\n  return Array.from(arguments, value =&gt; typeof value)\n}\ntypesOf(null, [], NaN)\n// ['object', 'object', 'number']\n</code></pre> <p>\u5982\u679c<code>map()</code>\u51fd\u6570\u91cc\u9762\u7528\u5230\u4e86<code>this</code>\u5173\u952e\u5b57\uff0c\u8fd8\u53ef\u4ee5\u4f20\u5165<code>Array.from()</code>\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a<code>this</code>\u3002</p> <p><code>Array.from()</code>\u53ef\u4ee5\u5c06\u5404\u79cd\u503c\u8f6c\u4e3a\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u5e76\u4e14\u8fd8\u63d0\u4f9b<code>map</code>\u529f\u80fd\u3002\u8fd9\u5b9e\u9645\u4e0a\u610f\u5473\u7740\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u539f\u59cb\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f60\u5c31\u53ef\u4ee5\u5148\u5bf9\u5b83\u7684\u503c\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u8f6c\u6210\u89c4\u8303\u7684\u6570\u7ec4\u7ed3\u6784\uff0c\u8fdb\u800c\u5c31\u53ef\u4ee5\u4f7f\u7528\u6570\u91cf\u4f17\u591a\u7684\u6570\u7ec4\u65b9\u6cd5\u3002</p> <pre><code>Array.from({ length: 2 }, () =&gt; 'jack')\n// ['jack', 'jack']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array.from()</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8fd0\u884c\u7684\u6b21\u6570\u3002\u8fd9\u79cd\u7279\u6027\u53ef\u4ee5\u8ba9\u8be5\u65b9\u6cd5\u7684\u7528\u6cd5\u53d8\u5f97\u975e\u5e38\u7075\u6d3b\u3002</p> <p><code>Array.from()</code>\u7684\u53e6\u4e00\u4e2a\u5e94\u7528\u662f\uff0c\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u7ec4\uff0c\u7136\u540e\u8fd4\u56de\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002\u56e0\u4e3a\u5b83\u80fd\u6b63\u786e\u5904\u7406\u5404\u79cd Unicode \u5b57\u7b26\uff0c\u53ef\u4ee5\u907f\u514d JavaScript \u5c06\u5927\u4e8e<code>\\uFFFF</code>\u7684 Unicode \u5b57\u7b26\uff0c\u7b97\u4f5c\u4e24\u4e2a\u5b57\u7b26\u7684 bug\u3002</p> <pre><code>function countSymbols(string) {\n  return Array.from(string).length;\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#arrayof","title":"Array.of()","text":"<p><code>Array.of()</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u4e00\u7ec4\u503c\uff0c\u8f6c\u6362\u4e3a\u6570\u7ec4\u3002</p> <pre><code>Array.of(3, 11, 8) // [3,11,8]\nArray.of(3) // [3]\nArray.of(3).length // 1\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u662f\u5f25\u8865\u6570\u7ec4\u6784\u9020\u51fd\u6570<code>Array()</code>\u7684\u4e0d\u8db3\u3002\u56e0\u4e3a\u53c2\u6570\u4e2a\u6570\u7684\u4e0d\u540c\uff0c\u4f1a\u5bfc\u81f4<code>Array()</code>\u7684\u884c\u4e3a\u6709\u5dee\u5f02\u3002</p> <pre><code>Array() // []\nArray(3) // [, , ,]\nArray(3, 11, 8) // [3, 11, 8]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array()</code>\u65b9\u6cd5\u6ca1\u6709\u53c2\u6570\u3001\u4e00\u4e2a\u53c2\u6570\u3001\u4e09\u4e2a\u53c2\u6570\u65f6\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u90fd\u4e0d\u4e00\u6837\u3002\u53ea\u6709\u5f53\u53c2\u6570\u4e2a\u6570\u4e0d\u5c11\u4e8e 2 \u4e2a\u65f6\uff0c<code>Array()</code>\u624d\u4f1a\u8fd4\u56de\u7531\u53c2\u6570\u7ec4\u6210\u7684\u65b0\u6570\u7ec4\u3002\u53c2\u6570\u53ea\u6709\u4e00\u4e2a\u6b63\u6574\u6570\u65f6\uff0c\u5b9e\u9645\u4e0a\u662f\u6307\u5b9a\u6570\u7ec4\u7684\u957f\u5ea6\u3002</p> <p><code>Array.of()</code>\u57fa\u672c\u4e0a\u53ef\u4ee5\u7528\u6765\u66ff\u4ee3<code>Array()</code>\u6216<code>new Array()</code>\uff0c\u5e76\u4e14\u4e0d\u5b58\u5728\u7531\u4e8e\u53c2\u6570\u4e0d\u540c\u800c\u5bfc\u81f4\u7684\u91cd\u8f7d\u3002\u5b83\u7684\u884c\u4e3a\u975e\u5e38\u7edf\u4e00\u3002</p> <pre><code>Array.of() // []\nArray.of(undefined) // [undefined]\nArray.of(1) // [1]\nArray.of(1, 2) // [1, 2]\n</code></pre> <p><code>Array.of()</code>\u603b\u662f\u8fd4\u56de\u53c2\u6570\u503c\u7ec4\u6210\u7684\u6570\u7ec4\u3002\u5982\u679c\u6ca1\u6709\u53c2\u6570\uff0c\u5c31\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002</p> <p><code>Array.of()</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u6a21\u62df\u5b9e\u73b0\u3002</p> <pre><code>function ArrayOf(){\n  return [].slice.call(arguments);\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#copywithin","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1acopyWithin()","text":"<p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>copyWithin()</code>\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u6570\u7ec4\u5185\u90e8\uff0c\u5c06\u6307\u5b9a\u4f4d\u7f6e\u7684\u6210\u5458\u590d\u5236\u5230\u5176\u4ed6\u4f4d\u7f6e\uff08\u4f1a\u8986\u76d6\u539f\u6709\u6210\u5458\uff09\uff0c\u7136\u540e\u8fd4\u56de\u5f53\u524d\u6570\u7ec4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u4f1a\u4fee\u6539\u5f53\u524d\u6570\u7ec4\u3002</p> <pre><code>Array.prototype.copyWithin(target, start = 0, end = this.length)\n</code></pre> <p>\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002</p> <ul> <li>target\uff08\u5fc5\u9700\uff09\uff1a\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u66ff\u6362\u6570\u636e\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u5012\u6570\u3002</li> <li>start\uff08\u53ef\u9009\uff09\uff1a\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u8bfb\u53d6\u6570\u636e\uff0c\u9ed8\u8ba4\u4e3a 0\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u4ece\u672b\u5c3e\u5f00\u59cb\u8ba1\u7b97\u3002</li> <li>end\uff08\u53ef\u9009\uff09\uff1a\u5230\u8be5\u4f4d\u7f6e\u524d\u505c\u6b62\u8bfb\u53d6\u6570\u636e\uff0c\u9ed8\u8ba4\u7b49\u4e8e\u6570\u7ec4\u957f\u5ea6\u3002\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u4ece\u672b\u5c3e\u5f00\u59cb\u8ba1\u7b97\u3002</li> </ul> <p>\u8fd9\u4e09\u4e2a\u53c2\u6570\u90fd\u5e94\u8be5\u662f\u6570\u503c\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>[1, 2, 3, 4, 5].copyWithin(0, 3)\n// [4, 5, 3, 4, 5]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\u5c06\u4ece 3 \u53f7\u4f4d\u76f4\u5230\u6570\u7ec4\u7ed3\u675f\u7684\u6210\u5458\uff084 \u548c 5\uff09\uff0c\u590d\u5236\u5230\u4ece 0 \u53f7\u4f4d\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u7ed3\u679c\u8986\u76d6\u4e86\u539f\u6765\u7684 1 \u548c 2\u3002</p> <p>\u4e0b\u9762\u662f\u66f4\u591a\u4f8b\u5b50\u3002</p> <pre><code>// \u5c063\u53f7\u4f4d\u590d\u5236\u52300\u53f7\u4f4d\n[1, 2, 3, 4, 5].copyWithin(0, 3, 4)\n// [4, 2, 3, 4, 5]\n\n// -2\u76f8\u5f53\u4e8e3\u53f7\u4f4d\uff0c-1\u76f8\u5f53\u4e8e4\u53f7\u4f4d\n[1, 2, 3, 4, 5].copyWithin(0, -2, -1)\n// [4, 2, 3, 4, 5]\n\n// \u5c063\u53f7\u4f4d\u590d\u5236\u52300\u53f7\u4f4d\n[].copyWithin.call({length: 5, 3: 1}, 0, 3)\n// {0: 1, 3: 1, length: 5}\n\n// \u5c062\u53f7\u4f4d\u5230\u6570\u7ec4\u7ed3\u675f\uff0c\u590d\u5236\u52300\u53f7\u4f4d\nlet i32a = new Int32Array([1, 2, 3, 4, 5]);\ni32a.copyWithin(0, 2);\n// Int32Array [3, 4, 5, 4, 5]\n\n// \u5bf9\u4e8e\u6ca1\u6709\u90e8\u7f72 TypedArray \u7684 copyWithin \u65b9\u6cd5\u7684\u5e73\u53f0\n// \u9700\u8981\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\n[].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4);\n// Int32Array [4, 2, 3, 4, 5]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#findfindindexfindlastfindlastindex","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1afind()\uff0cfindIndex()\uff0cfindLast()\uff0cfindLastIndex()","text":"<p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>find()</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u627e\u51fa\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570\u7ec4\u6210\u5458\u3002\u5b83\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6240\u6709\u6570\u7ec4\u6210\u5458\u4f9d\u6b21\u6267\u884c\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u76f4\u5230\u627e\u51fa\u7b2c\u4e00\u4e2a\u8fd4\u56de\u503c\u4e3a<code>true</code>\u7684\u6210\u5458\uff0c\u7136\u540e\u8fd4\u56de\u8be5\u6210\u5458\u3002\u5982\u679c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6210\u5458\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>[1, 4, -5, 10].find((n) =&gt; n &lt; 0)\n// -5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u627e\u51fa\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u5c0f\u4e8e 0 \u7684\u6210\u5458\u3002</p> <pre><code>[1, 5, 10, 15].find(function(value, index, arr) {\n  return value &gt; 9;\n}) // 10\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>find()</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u5f53\u524d\u7684\u503c\u3001\u5f53\u524d\u7684\u4f4d\u7f6e\u548c\u539f\u6570\u7ec4\u3002</p> <p>\u6570\u7ec4\u5b9e\u4f8b\u7684<code>findIndex()</code>\u65b9\u6cd5\u7684\u7528\u6cd5\u4e0e<code>find()</code>\u65b9\u6cd5\u975e\u5e38\u7c7b\u4f3c\uff0c\u8fd4\u56de\u7b2c\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6570\u7ec4\u6210\u5458\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u6240\u6709\u6210\u5458\u90fd\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u5219\u8fd4\u56de<code>-1</code>\u3002</p> <pre><code>[1, 5, 10, 15].findIndex(function(value, index, arr) {\n  return value &gt; 9;\n}) // 2\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\u7684<code>this</code>\u5bf9\u8c61\u3002</p> <pre><code>function f(v){\n  return v &gt; this.age;\n}\nlet person = {name: 'John', age: 20};\n[10, 12, 26, 15].find(f, person);    // 26\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c<code>find()</code>\u51fd\u6570\u63a5\u6536\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>person</code>\u5bf9\u8c61\uff0c\u56de\u8c03\u51fd\u6570\u4e2d\u7684<code>this</code>\u5bf9\u8c61\u6307\u5411<code>person</code>\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u90fd\u53ef\u4ee5\u53d1\u73b0<code>NaN</code>\uff0c\u5f25\u8865\u4e86\u6570\u7ec4\u7684<code>indexOf()</code>\u65b9\u6cd5\u7684\u4e0d\u8db3\u3002</p> <pre><code>[NaN].indexOf(NaN)\n// -1\n\n[NaN].findIndex(y =&gt; Object.is(NaN, y))\n// 0\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>indexOf()</code>\u65b9\u6cd5\u65e0\u6cd5\u8bc6\u522b\u6570\u7ec4\u7684<code>NaN</code>\u6210\u5458\uff0c\u4f46\u662f<code>findIndex()</code>\u65b9\u6cd5\u53ef\u4ee5\u501f\u52a9<code>Object.is()</code>\u65b9\u6cd5\u505a\u5230\u3002</p> <p><code>find()</code>\u548c<code>findIndex()</code>\u90fd\u662f\u4ece\u6570\u7ec4\u76840\u53f7\u4f4d\uff0c\u4f9d\u6b21\u5411\u540e\u68c0\u67e5\u3002ES2022 \u65b0\u589e\u4e86\u4e24\u4e2a\u65b9\u6cd5<code>findLast()</code>\u548c<code>findLastIndex()</code>\uff0c\u4ece\u6570\u7ec4\u7684\u6700\u540e\u4e00\u4e2a\u6210\u5458\u5f00\u59cb\uff0c\u4f9d\u6b21\u5411\u524d\u68c0\u67e5\uff0c\u5176\u4ed6\u90fd\u4fdd\u6301\u4e0d\u53d8\u3002</p> <pre><code>const array = [\n  { value: 1 },\n  { value: 2 },\n  { value: 3 },\n  { value: 4 }\n];\n\narray.findLast(n =&gt; n.value % 2 === 1); // { value: 3 }\narray.findLastIndex(n =&gt; n.value % 2 === 1); // 2\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>findLast()</code>\u548c<code>findLastIndex()</code>\u4ece\u6570\u7ec4\u7ed3\u5c3e\u5f00\u59cb\uff0c\u5bfb\u627e\u7b2c\u4e00\u4e2a<code>value</code>\u5c5e\u6027\u4e3a\u5947\u6570\u7684\u6210\u5458\u3002\u7ed3\u679c\uff0c\u8be5\u6210\u5458\u662f<code>{ value: 3 }</code>\uff0c\u4f4d\u7f6e\u662f2\u53f7\u4f4d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#fill","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1afill()","text":"<p><code>fill</code>\u65b9\u6cd5\u4f7f\u7528\u7ed9\u5b9a\u503c\uff0c\u586b\u5145\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>['a', 'b', 'c'].fill(7)\n// [7, 7, 7]\n\nnew Array(3).fill(7)\n// [7, 7, 7]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0c<code>fill</code>\u65b9\u6cd5\u7528\u4e8e\u7a7a\u6570\u7ec4\u7684\u521d\u59cb\u5316\u975e\u5e38\u65b9\u4fbf\u3002\u6570\u7ec4\u4e2d\u5df2\u6709\u7684\u5143\u7d20\uff0c\u4f1a\u88ab\u5168\u90e8\u62b9\u53bb\u3002</p> <p><code>fill</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u586b\u5145\u7684\u8d77\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <pre><code>['a', 'b', 'c'].fill(7, 1, 2)\n// ['a', 7, 'c']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>fill</code>\u65b9\u6cd5\u4ece 1 \u53f7\u4f4d\u5f00\u59cb\uff0c\u5411\u539f\u6570\u7ec4\u586b\u5145 7\uff0c\u5230 2 \u53f7\u4f4d\u4e4b\u524d\u7ed3\u675f\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u586b\u5145\u7684\u7c7b\u578b\u4e3a\u5bf9\u8c61\uff0c\u90a3\u4e48\u88ab\u8d4b\u503c\u7684\u662f\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u6df1\u62f7\u8d1d\u5bf9\u8c61\u3002</p> <pre><code>let arr = new Array(3).fill({name: \"Mike\"});\narr[0].name = \"Ben\";\narr\n// [{name: \"Ben\"}, {name: \"Ben\"}, {name: \"Ben\"}]\n\nlet arr = new Array(3).fill([]);\narr[0].push(5);\narr\n// [[5], [5], [5]]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#entrieskeys-values","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aentries()\uff0ckeys() \u548c values()","text":"<p>ES6 \u63d0\u4f9b\u4e09\u4e2a\u65b0\u7684\u65b9\u6cd5\u2014\u2014<code>entries()</code>\uff0c<code>keys()</code>\u548c<code>values()</code>\u2014\u2014\u7528\u4e8e\u904d\u5386\u6570\u7ec4\u3002\u5b83\u4eec\u90fd\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff08\u8be6\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\uff0c\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u8fdb\u884c\u904d\u5386\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f<code>keys()</code>\u662f\u5bf9\u952e\u540d\u7684\u904d\u5386\u3001<code>values()</code>\u662f\u5bf9\u952e\u503c\u7684\u904d\u5386\uff0c<code>entries()</code>\u662f\u5bf9\u952e\u503c\u5bf9\u7684\u904d\u5386\u3002</p> <pre><code>for (let index of ['a', 'b'].keys()) {\n  console.log(index);\n}\n// 0\n// 1\n\nfor (let elem of ['a', 'b'].values()) {\n  console.log(elem);\n}\n// 'a'\n// 'b'\n\nfor (let [index, elem] of ['a', 'b'].entries()) {\n  console.log(index, elem);\n}\n// 0 \"a\"\n// 1 \"b\"\n</code></pre> <p>\u5982\u679c\u4e0d\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u53ef\u4ee5\u624b\u52a8\u8c03\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u8fdb\u884c\u904d\u5386\u3002</p> <pre><code>let letter = ['a', 'b', 'c'];\nlet entries = letter.entries();\nconsole.log(entries.next().value); // [0, 'a']\nconsole.log(entries.next().value); // [1, 'b']\nconsole.log(entries.next().value); // [2, 'c']\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#includes","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aincludes()","text":"<p><code>Array.prototype.includes</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u6570\u7ec4\u662f\u5426\u5305\u542b\u7ed9\u5b9a\u7684\u503c\uff0c\u4e0e\u5b57\u7b26\u4e32\u7684<code>includes</code>\u65b9\u6cd5\u7c7b\u4f3c\u3002ES2016 \u5f15\u5165\u4e86\u8be5\u65b9\u6cd5\u3002</p> <pre><code>[1, 2, 3].includes(2)     // true\n[1, 2, 3].includes(4)     // false\n[1, 2, NaN].includes(NaN) // true\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u641c\u7d22\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a<code>0</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u8d1f\u6570\uff0c\u5219\u8868\u793a\u5012\u6570\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u8fd9\u65f6\u5b83\u5927\u4e8e\u6570\u7ec4\u957f\u5ea6\uff08\u6bd4\u5982\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a<code>-4</code>\uff0c\u4f46\u6570\u7ec4\u957f\u5ea6\u4e3a<code>3</code>\uff09\uff0c\u5219\u4f1a\u91cd\u7f6e\u4e3a\u4ece<code>0</code>\u5f00\u59cb\u3002</p> <pre><code>[1, 2, 3].includes(3, 3);  // false\n[1, 2, 3].includes(3, -1); // true\n</code></pre> <p>\u6ca1\u6709\u8be5\u65b9\u6cd5\u4e4b\u524d\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u6570\u7ec4\u7684<code>indexOf</code>\u65b9\u6cd5\uff0c\u68c0\u67e5\u662f\u5426\u5305\u542b\u67d0\u4e2a\u503c\u3002</p> <pre><code>if (arr.indexOf(el) !== -1) {\n  // ...\n}\n</code></pre> <p><code>indexOf</code>\u65b9\u6cd5\u6709\u4e24\u4e2a\u7f3a\u70b9\uff0c\u4e00\u662f\u4e0d\u591f\u8bed\u4e49\u5316\uff0c\u5b83\u7684\u542b\u4e49\u662f\u627e\u5230\u53c2\u6570\u503c\u7684\u7b2c\u4e00\u4e2a\u51fa\u73b0\u4f4d\u7f6e\uff0c\u6240\u4ee5\u8981\u53bb\u6bd4\u8f83\u662f\u5426\u4e0d\u7b49\u4e8e<code>-1</code>\uff0c\u8868\u8fbe\u8d77\u6765\u4e0d\u591f\u76f4\u89c2\u3002\u4e8c\u662f\uff0c\u5b83\u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\u8fdb\u884c\u5224\u65ad\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5bf9<code>NaN</code>\u7684\u8bef\u5224\u3002</p> <pre><code>[NaN].indexOf(NaN)\n// -1\n</code></pre> <p><code>includes</code>\u4f7f\u7528\u7684\u662f\u4e0d\u4e00\u6837\u7684\u5224\u65ad\u7b97\u6cd5\uff0c\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>[NaN].includes(NaN)\n// true\n</code></pre> <p>\u4e0b\u9762\u4ee3\u7801\u7528\u6765\u68c0\u67e5\u5f53\u524d\u73af\u5883\u662f\u5426\u652f\u6301\u8be5\u65b9\u6cd5\uff0c\u5982\u679c\u4e0d\u652f\u6301\uff0c\u90e8\u7f72\u4e00\u4e2a\u7b80\u6613\u7684\u66ff\u4ee3\u7248\u672c\u3002</p> <pre><code>const contains = (() =&gt;\n  Array.prototype.includes\n    ? (arr, value) =&gt; arr.includes(value)\n    : (arr, value) =&gt; arr.some(el =&gt; el === value)\n)();\ncontains(['foo', 'bar'], 'baz'); // =&gt; false\n</code></pre> <p>\u53e6\u5916\uff0cMap \u548c Set \u6570\u636e\u7ed3\u6784\u6709\u4e00\u4e2a<code>has</code>\u65b9\u6cd5\uff0c\u9700\u8981\u6ce8\u610f\u4e0e<code>includes</code>\u533a\u5206\u3002</p> <ul> <li>Map \u7ed3\u6784\u7684<code>has</code>\u65b9\u6cd5\uff0c\u662f\u7528\u6765\u67e5\u627e\u952e\u540d\u7684\uff0c\u6bd4\u5982<code>Map.prototype.has(key)</code>\u3001<code>WeakMap.prototype.has(key)</code>\u3001<code>Reflect.has(target, propertyKey)</code>\u3002</li> <li>Set \u7ed3\u6784\u7684<code>has</code>\u65b9\u6cd5\uff0c\u662f\u7528\u6765\u67e5\u627e\u503c\u7684\uff0c\u6bd4\u5982<code>Set.prototype.has(value)</code>\u3001<code>WeakSet.prototype.has(value)</code>\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#flatflatmap","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aflat()\uff0cflatMap()","text":"<p>\u6570\u7ec4\u7684\u6210\u5458\u6709\u65f6\u8fd8\u662f\u6570\u7ec4\uff0c<code>Array.prototype.flat()</code>\u7528\u4e8e\u5c06\u5d4c\u5957\u7684\u6570\u7ec4\u201c\u62c9\u5e73\u201d\uff0c\u53d8\u6210\u4e00\u7ef4\u7684\u6570\u7ec4\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u5bf9\u539f\u6570\u636e\u6ca1\u6709\u5f71\u54cd\u3002</p> <pre><code>[1, 2, [3, 4]].flat()\n// [1, 2, 3, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u6570\u7ec4\u7684\u6210\u5458\u91cc\u9762\u6709\u4e00\u4e2a\u6570\u7ec4\uff0c<code>flat()</code>\u65b9\u6cd5\u5c06\u5b50\u6570\u7ec4\u7684\u6210\u5458\u53d6\u51fa\u6765\uff0c\u6dfb\u52a0\u5728\u539f\u6765\u7684\u4f4d\u7f6e\u3002</p> <p><code>flat()</code>\u9ed8\u8ba4\u53ea\u4f1a\u201c\u62c9\u5e73\u201d\u4e00\u5c42\uff0c\u5982\u679c\u60f3\u8981\u201c\u62c9\u5e73\u201d\u591a\u5c42\u7684\u5d4c\u5957\u6570\u7ec4\uff0c\u53ef\u4ee5\u5c06<code>flat()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5199\u6210\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u60f3\u8981\u62c9\u5e73\u7684\u5c42\u6570\uff0c\u9ed8\u8ba4\u4e3a1\u3002</p> <pre><code>[1, 2, [3, [4, 5]]].flat()\n// [1, 2, 3, [4, 5]]\n\n[1, 2, [3, [4, 5]]].flat(2)\n// [1, 2, 3, 4, 5]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>flat()</code>\u7684\u53c2\u6570\u4e3a2\uff0c\u8868\u793a\u8981\u201c\u62c9\u5e73\u201d\u4e24\u5c42\u7684\u5d4c\u5957\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u4e0d\u7ba1\u6709\u591a\u5c11\u5c42\u5d4c\u5957\uff0c\u90fd\u8981\u8f6c\u6210\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u7528<code>Infinity</code>\u5173\u952e\u5b57\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>[1, [2, [3]]].flat(Infinity)\n// [1, 2, 3]\n</code></pre> <p>\u5982\u679c\u539f\u6570\u7ec4\u6709\u7a7a\u4f4d\uff0c<code>flat()</code>\u65b9\u6cd5\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\u3002</p> <pre><code>[1, 2, , 4, 5].flat()\n// [1, 2, 4, 5]\n</code></pre> <p><code>flatMap()</code>\u65b9\u6cd5\u5bf9\u539f\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u4e00\u4e2a\u51fd\u6570\uff08\u76f8\u5f53\u4e8e\u6267\u884c<code>Array.prototype.map()</code>\uff09\uff0c\u7136\u540e\u5bf9\u8fd4\u56de\u503c\u7ec4\u6210\u7684\u6570\u7ec4\u6267\u884c<code>flat()</code>\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u4e0d\u6539\u53d8\u539f\u6570\u7ec4\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e [[2, 4], [3, 6], [4, 8]].flat()\n[2, 3, 4].flatMap((x) =&gt; [x, x * 2])\n// [2, 4, 3, 6, 4, 8]\n</code></pre> <p><code>flatMap()</code>\u53ea\u80fd\u5c55\u5f00\u4e00\u5c42\u6570\u7ec4\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e [[[2]], [[4]], [[6]], [[8]]].flat()\n[1, 2, 3, 4].flatMap(x =&gt; [[x * 2]])\n// [[2], [4], [6], [8]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u904d\u5386\u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u53cc\u5c42\u7684\u6570\u7ec4\uff0c\u4f46\u662f\u9ed8\u8ba4\u53ea\u80fd\u5c55\u5f00\u4e00\u5c42\uff0c\u56e0\u6b64<code>flatMap()</code>\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a\u5d4c\u5957\u6570\u7ec4\u3002</p> <p><code>flatMap()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u904d\u5386\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u5f53\u524d\u6570\u7ec4\u6210\u5458\u3001\u5f53\u524d\u6570\u7ec4\u6210\u5458\u7684\u4f4d\u7f6e\uff08\u4ece\u96f6\u5f00\u59cb\uff09\u3001\u539f\u6570\u7ec4\u3002</p> <pre><code>arr.flatMap(function callback(currentValue[, index[, array]]) {\n  // ...\n}[, thisArg])\n</code></pre> <p><code>flatMap()</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a\u904d\u5386\u51fd\u6570\u91cc\u9762\u7684<code>this</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#at","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1aat()","text":"<p>\u957f\u4e45\u4ee5\u6765\uff0cJavaScript \u4e0d\u652f\u6301\u6570\u7ec4\u7684\u8d1f\u7d22\u5f15\uff0c\u5982\u679c\u8981\u5f15\u7528\u6570\u7ec4\u7684\u6700\u540e\u4e00\u4e2a\u6210\u5458\uff0c\u4e0d\u80fd\u5199\u6210<code>arr[-1]</code>\uff0c\u53ea\u80fd\u4f7f\u7528<code>arr[arr.length - 1]</code>\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u65b9\u62ec\u53f7\u8fd0\u7b97\u7b26<code>[]</code>\u5728 JavaScript \u8bed\u8a00\u91cc\u9762\uff0c\u4e0d\u4ec5\u7528\u4e8e\u6570\u7ec4\uff0c\u8fd8\u7528\u4e8e\u5bf9\u8c61\u3002\u5bf9\u4e8e\u5bf9\u8c61\u6765\u8bf4\uff0c\u65b9\u62ec\u53f7\u91cc\u9762\u5c31\u662f\u952e\u540d\uff0c\u6bd4\u5982<code>obj[1]</code>\u5f15\u7528\u7684\u662f\u952e\u540d\u4e3a\u5b57\u7b26\u4e32<code>1</code>\u7684\u952e\uff0c\u540c\u7406<code>obj[-1]</code>\u5f15\u7528\u7684\u662f\u952e\u540d\u4e3a\u5b57\u7b26\u4e32<code>-1</code>\u7684\u952e\u3002\u7531\u4e8e JavaScript \u7684\u6570\u7ec4\u662f\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u65b9\u62ec\u53f7\u91cc\u9762\u7684\u8d1f\u6570\u65e0\u6cd5\u518d\u6709\u5176\u4ed6\u8bed\u4e49\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u53ef\u80fd\u6dfb\u52a0\u65b0\u8bed\u6cd5\u6765\u652f\u6301\u8d1f\u7d22\u5f15\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES2022 \u4e3a\u6570\u7ec4\u5b9e\u4f8b\u589e\u52a0\u4e86<code>at()</code>\u65b9\u6cd5\uff0c\u63a5\u53d7\u4e00\u4e2a\u6574\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u5bf9\u5e94\u4f4d\u7f6e\u7684\u6210\u5458\uff0c\u5e76\u652f\u6301\u8d1f\u7d22\u5f15\u3002\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4ec5\u53ef\u7528\u4e8e\u6570\u7ec4\uff0c\u4e5f\u53ef\u7528\u4e8e\u5b57\u7b26\u4e32\u548c\u7c7b\u578b\u6570\u7ec4\uff08TypedArray\uff09\u3002</p> <pre><code>const arr = [5, 12, 8, 130, 44];\narr.at(2) // 8\narr.at(-2) // 130\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4f4d\u7f6e\u8d85\u51fa\u4e86\u6570\u7ec4\u8303\u56f4\uff0c<code>at()</code>\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>const sentence = 'This is a sample sentence';\n\nsentence.at(0); // 'T'\nsentence.at(-1); // 'e'\n\nsentence.at(-100) // undefined\nsentence.at(100) // undefined\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#toreversedtosortedtosplicedwith","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1atoReversed()\uff0ctoSorted()\uff0ctoSpliced()\uff0cwith()","text":"<p>\u5f88\u591a\u6570\u7ec4\u7684\u4f20\u7edf\u65b9\u6cd5\u4f1a\u6539\u53d8\u539f\u6570\u7ec4\uff0c\u6bd4\u5982<code>push()</code>\u3001<code>pop()</code>\u3001<code>shift()</code>\u3001<code>unshift()</code>\u7b49\u7b49\u3002\u6570\u7ec4\u53ea\u8981\u8c03\u7528\u4e86\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u5b83\u7684\u503c\u5c31\u53d8\u4e86\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5141\u8bb8\u5bf9\u6570\u7ec4\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u4e0d\u6539\u53d8\u539f\u6570\u7ec4\uff0c\u800c\u8fd4\u56de\u4e00\u4e2a\u539f\u6570\u7ec4\u7684\u62f7\u8d1d\u3002</p> <p>\u8fd9\u6837\u7684\u65b9\u6cd5\u4e00\u5171\u6709\u56db\u4e2a\u3002</p> <ul> <li><code>Array.prototype.toReversed() -&gt; Array</code></li> <li><code>Array.prototype.toSorted(compareFn) -&gt; Array</code></li> <li><code>Array.prototype.toSpliced(start, deleteCount, ...items) -&gt; Array</code></li> <li><code>Array.prototype.with(index, value) -&gt; Array</code></li> </ul> <p>\u5b83\u4eec\u5206\u522b\u5bf9\u5e94\u6570\u7ec4\u7684\u539f\u6709\u65b9\u6cd5\u3002</p> <ul> <li><code>toReversed()</code>\u5bf9\u5e94<code>reverse()</code>\uff0c\u7528\u6765\u98a0\u5012\u6570\u7ec4\u6210\u5458\u7684\u4f4d\u7f6e\u3002</li> <li><code>toSorted()</code>\u5bf9\u5e94<code>sort()</code>\uff0c\u7528\u6765\u5bf9\u6570\u7ec4\u6210\u5458\u6392\u5e8f\u3002</li> <li><code>toSpliced()</code>\u5bf9\u5e94<code>splice()</code>\uff0c\u7528\u6765\u5728\u6307\u5b9a\u4f4d\u7f6e\uff0c\u5220\u9664\u6307\u5b9a\u6570\u91cf\u7684\u6210\u5458\uff0c\u5e76\u63d2\u5165\u65b0\u6210\u5458\u3002</li> <li><code>with(index, value)</code>\u5bf9\u5e94<code>splice(index, 1, value)</code>\uff0c\u7528\u6765\u5c06\u6307\u5b9a\u4f4d\u7f6e\u7684\u6210\u5458\u66ff\u6362\u4e3a\u65b0\u7684\u503c\u3002</li> </ul> <p>\u4e0a\u9762\u662f\u8fd9\u56db\u4e2a\u65b0\u65b9\u6cd5\u5bf9\u5e94\u7684\u539f\u6709\u65b9\u6cd5\uff0c\u542b\u4e49\u548c\u7528\u6cd5\u5b8c\u5168\u4e00\u6837\uff0c\u552f\u4e00\u4e0d\u540c\u7684\u662f\u4e0d\u4f1a\u6539\u53d8\u539f\u6570\u7ec4\uff0c\u800c\u662f\u8fd4\u56de\u539f\u6570\u7ec4\u64cd\u4f5c\u540e\u7684\u62f7\u8d1d\u3002</p> <p>\u4e0b\u9762\u662f\u793a\u4f8b\u3002</p> <pre><code>const sequence = [1, 2, 3];\nsequence.toReversed() // [3, 2, 1]\nsequence // [1, 2, 3]\n\nconst outOfOrder = [3, 1, 2];\noutOfOrder.toSorted() // [1, 2, 3]\noutOfOrder // [3, 1, 2]\n\nconst array = [1, 2, 3, 4];\narray.toSpliced(1, 2, 5, 6, 7) // [1, 5, 6, 7, 4]\narray // [1, 2, 3, 4]\n\nconst correctionNeeded = [1, 1, 3];\ncorrectionNeeded.with(1, 2) // [1, 2, 3]\ncorrectionNeeded // [1, 1, 3]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#groupgrouptomap","title":"\u5b9e\u4f8b\u65b9\u6cd5\uff1agroup()\uff0cgroupToMap()","text":"<p>\u6570\u7ec4\u6210\u5458\u5206\u7ec4\u662f\u4e00\u4e2a\u5e38\u89c1\u9700\u6c42\uff0c\u6bd4\u5982 SQL \u6709<code>GROUP BY</code>\u5b50\u53e5\u548c\u51fd\u6570\u5f0f\u7f16\u7a0b\u6709 MapReduce \u65b9\u6cd5\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u4e3a JavaScript \u65b0\u589e\u4e86\u6570\u7ec4\u5b9e\u4f8b\u65b9\u6cd5<code>group()</code>\u548c<code>groupToMap()</code>\uff0c\u5b83\u4eec\u53ef\u4ee5\u6839\u636e\u5206\u7ec4\u51fd\u6570\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u5c06\u6570\u7ec4\u6210\u5458\u5206\u7ec4\u3002</p> <p><code>group()</code>\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5206\u7ec4\u51fd\u6570\uff0c\u539f\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u4f1a\u4f9d\u6b21\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u786e\u5b9a\u81ea\u5df1\u662f\u54ea\u4e00\u4e2a\u7ec4\u3002</p> <pre><code>const array = [1, 2, 3, 4, 5];\n\narray.group((num, index, array) =&gt; {\n  return num % 2 === 0 ? 'even': 'odd';\n});\n// { odd: [1, 3, 5], even: [2, 4] }\n</code></pre> <p><code>group()</code>\u7684\u5206\u7ec4\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u662f\u6570\u7ec4\u7684\u5f53\u524d\u6210\u5458\u3001\u8be5\u6210\u5458\u7684\u4f4d\u7f6e\u5e8f\u53f7\u3001\u539f\u6570\u7ec4\uff08\u4e0a\u4f8b\u662f<code>num</code>\u3001<code>index</code>\u548c<code>array</code>\uff09\u3002\u5206\u7ec4\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5e94\u8be5\u662f\u5b57\u7b26\u4e32\uff08\u6216\u8005\u53ef\u4ee5\u81ea\u52a8\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff09\uff0c\u4ee5\u4f5c\u4e3a\u5206\u7ec4\u540e\u7684\u7ec4\u540d\u3002</p> <p><code>group()</code>\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684\u952e\u540d\u5c31\u662f\u6bcf\u4e00\u7ec4\u7684\u7ec4\u540d\uff0c\u5373\u5206\u7ec4\u51fd\u6570\u8fd4\u56de\u7684\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u4e0a\u4f8b\u662f<code>even</code>\u548c<code>odd</code>\uff09\uff1b\u8be5\u5bf9\u8c61\u7684\u952e\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u62ec\u6240\u6709\u4ea7\u751f\u5f53\u524d\u952e\u540d\u7684\u539f\u6570\u7ec4\u6210\u5458\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>[6.1, 4.2, 6.3].group(Math.floor)\n// { '4': [4.2], '6': [6.1, 6.3] }\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>Math.floor</code>\u4f5c\u4e3a\u5206\u7ec4\u51fd\u6570\uff0c\u5bf9\u539f\u6570\u7ec4\u8fdb\u884c\u5206\u7ec4\u3002\u5b83\u7684\u8fd4\u56de\u503c\u539f\u672c\u662f\u6570\u503c\uff0c\u8fd9\u65f6\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff0c\u4f5c\u4e3a\u5206\u7ec4\u7684\u7ec4\u540d\u3002\u539f\u6570\u7ec4\u7684\u6210\u5458\u6839\u636e\u5206\u7ec4\u51fd\u6570\u7684\u8fd0\u884c\u7ed3\u679c\uff0c\u8fdb\u5165\u5bf9\u5e94\u7684\u7ec4\u3002</p> <p><code>group()</code>\u8fd8\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8be5\u5bf9\u8c61\u4f1a\u7ed1\u5b9a\u5206\u7ec4\u51fd\u6570\uff08\u7b2c\u4e00\u4e2a\u53c2\u6570\uff09\u91cc\u9762\u7684<code>this</code>\uff0c\u4e0d\u8fc7\u5982\u679c\u5206\u7ec4\u51fd\u6570\u662f\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\uff0c\u8be5\u5bf9\u8c61\u65e0\u6548\uff0c\u56e0\u4e3a\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u662f\u56fa\u5316\u7684\u3002</p> <p><code>groupToMap()</code>\u7684\u4f5c\u7528\u548c\u7528\u6cd5\u4e0e<code>group()</code>\u5b8c\u5168\u4e00\u81f4\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u8fd4\u56de\u503c\u662f\u4e00\u4e2a Map \u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u5bf9\u8c61\u3002Map \u7ed3\u6784\u7684\u952e\u540d\u53ef\u4ee5\u662f\u5404\u79cd\u503c\uff0c\u6240\u4ee5\u4e0d\u7ba1\u5206\u7ec4\u51fd\u6570\u8fd4\u56de\u4ec0\u4e48\u503c\uff0c\u90fd\u4f1a\u76f4\u63a5\u4f5c\u4e3a\u7ec4\u540d\uff08Map \u7ed3\u6784\u7684\u952e\u540d\uff09\uff0c\u4e0d\u4f1a\u5f3a\u5236\u8f6c\u4e3a\u5b57\u7b26\u4e32\u3002\u8fd9\u5bf9\u4e8e\u5206\u7ec4\u51fd\u6570\u8fd4\u56de\u503c\u662f\u5bf9\u8c61\u7684\u60c5\u51b5\uff0c\u5c24\u5176\u6709\u7528\u3002</p> <pre><code>const array = [1, 2, 3, 4, 5];\n\nconst odd  = { odd: true };\nconst even = { even: true };\narray.groupToMap((num, index, array) =&gt; {\n  return num % 2 === 0 ? even: odd;\n});\n//  Map { {odd: true}: [1, 3, 5], {even: true}: [2, 4] }\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Map \u7ed3\u6784\uff0c\u5b83\u7684\u952e\u540d\u5c31\u662f\u5206\u7ec4\u51fd\u6570\u8fd4\u56de\u7684\u4e24\u4e2a\u5bf9\u8c61<code>odd</code>\u548c<code>even</code>\u3002</p> <p>\u603b\u4e4b\uff0c\u6309\u7167\u5b57\u7b26\u4e32\u5206\u7ec4\u5c31\u4f7f\u7528<code>group()</code>\uff0c\u6309\u7167\u5bf9\u8c61\u5206\u7ec4\u5c31\u4f7f\u7528<code>groupToMap()</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#_4","title":"\u6570\u7ec4\u7684\u7a7a\u4f4d","text":"<p>\u6570\u7ec4\u7684\u7a7a\u4f4d\u6307\u7684\u662f\uff0c\u6570\u7ec4\u7684\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u4efb\u4f55\u503c\uff0c\u6bd4\u5982<code>Array()</code>\u6784\u9020\u51fd\u6570\u8fd4\u56de\u7684\u6570\u7ec4\u90fd\u662f\u7a7a\u4f4d\u3002</p> <pre><code>Array(3) // [, , ,]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Array(3)</code>\u8fd4\u56de\u4e00\u4e2a\u5177\u6709 3 \u4e2a\u7a7a\u4f4d\u7684\u6570\u7ec4\u3002</p> <p>\u6ce8\u610f\uff0c\u7a7a\u4f4d\u4e0d\u662f<code>undefined</code>\uff0c\u67d0\u4e00\u4e2a\u4f4d\u7f6e\u7684\u503c\u7b49\u4e8e<code>undefined</code>\uff0c\u4f9d\u7136\u662f\u6709\u503c\u7684\u3002\u7a7a\u4f4d\u662f\u6ca1\u6709\u4efb\u4f55\u503c\uff0c<code>in</code>\u8fd0\u7b97\u7b26\u53ef\u4ee5\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002</p> <pre><code>0 in [undefined, undefined, undefined] // true\n0 in [, , ,] // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u7b2c\u4e00\u4e2a\u6570\u7ec4\u7684 0 \u53f7\u4f4d\u7f6e\u662f\u6709\u503c\u7684\uff0c\u7b2c\u4e8c\u4e2a\u6570\u7ec4\u7684 0 \u53f7\u4f4d\u7f6e\u6ca1\u6709\u503c\u3002</p> <p>ES5 \u5bf9\u7a7a\u4f4d\u7684\u5904\u7406\uff0c\u5df2\u7ecf\u5f88\u4e0d\u4e00\u81f4\u4e86\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4f1a\u5ffd\u7565\u7a7a\u4f4d\u3002</p> <ul> <li><code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>, <code>every()</code> \u548c<code>some()</code>\u90fd\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\u3002</li> <li><code>map()</code>\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\uff0c\u4f46\u4f1a\u4fdd\u7559\u8fd9\u4e2a\u503c</li> <li><code>join()</code>\u548c<code>toString()</code>\u4f1a\u5c06\u7a7a\u4f4d\u89c6\u4e3a<code>undefined</code>\uff0c\u800c<code>undefined</code>\u548c<code>null</code>\u4f1a\u88ab\u5904\u7406\u6210\u7a7a\u5b57\u7b26\u4e32\u3002</li> </ul> <pre><code>// forEach\u65b9\u6cd5\n[,'a'].forEach((x,i) =&gt; console.log(i)); // 1\n\n// filter\u65b9\u6cd5\n['a',,'b'].filter(x =&gt; true) // ['a','b']\n\n// every\u65b9\u6cd5\n[,'a'].every(x =&gt; x==='a') // true\n\n// reduce\u65b9\u6cd5\n[1,,2].reduce((x,y) =&gt; x+y) // 3\n\n// some\u65b9\u6cd5\n[,'a'].some(x =&gt; x !== 'a') // false\n\n// map\u65b9\u6cd5\n[,'a'].map(x =&gt; 1) // [,1]\n\n// join\u65b9\u6cd5\n[,'a',undefined,null].join('#') // \"#a##\"\n\n// toString\u65b9\u6cd5\n[,'a',undefined,null].toString() // \",a,,\"\n</code></pre> <p>ES6 \u5219\u662f\u660e\u786e\u5c06\u7a7a\u4f4d\u8f6c\u4e3a<code>undefined</code>\u3002</p> <p><code>Array.from()</code>\u65b9\u6cd5\u4f1a\u5c06\u6570\u7ec4\u7684\u7a7a\u4f4d\uff0c\u8f6c\u4e3a<code>undefined</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u4f1a\u5ffd\u7565\u7a7a\u4f4d\u3002</p> <pre><code>Array.from(['a',,'b'])\n// [ \"a\", undefined, \"b\" ]\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u4e5f\u4f1a\u5c06\u7a7a\u4f4d\u8f6c\u4e3a<code>undefined</code>\u3002</p> <pre><code>[...['a',,'b']]\n// [ \"a\", undefined, \"b\" ]\n</code></pre> <p><code>copyWithin()</code>\u4f1a\u8fde\u7a7a\u4f4d\u4e00\u8d77\u62f7\u8d1d\u3002</p> <pre><code>[,'a','b',,].copyWithin(2,0) // [,\"a\",,\"a\"]\n</code></pre> <p><code>fill()</code>\u4f1a\u5c06\u7a7a\u4f4d\u89c6\u4e3a\u6b63\u5e38\u7684\u6570\u7ec4\u4f4d\u7f6e\u3002</p> <pre><code>new Array(3).fill('a') // [\"a\",\"a\",\"a\"]\n</code></pre> <p><code>for...of</code>\u5faa\u73af\u4e5f\u4f1a\u904d\u5386\u7a7a\u4f4d\u3002</p> <pre><code>let arr = [, ,];\nfor (let i of arr) {\n  console.log(1);\n}\n// 1\n// 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>arr</code>\u6709\u4e24\u4e2a\u7a7a\u4f4d\uff0c<code>for...of</code>\u5e76\u6ca1\u6709\u5ffd\u7565\u5b83\u4eec\u3002\u5982\u679c\u6539\u6210<code>map()</code>\u65b9\u6cd5\u904d\u5386\uff0c\u7a7a\u4f4d\u662f\u4f1a\u8df3\u8fc7\u7684\u3002</p> <p><code>entries()</code>\u3001<code>keys()</code>\u3001<code>values()</code>\u3001<code>find()</code>\u548c<code>findIndex()</code>\u4f1a\u5c06\u7a7a\u4f4d\u5904\u7406\u6210<code>undefined</code>\u3002</p> <pre><code>// entries()\n[...[,'a'].entries()] // [[0,undefined], [1,\"a\"]]\n\n// keys()\n[...[,'a'].keys()] // [0,1]\n\n// values()\n[...[,'a'].values()] // [undefined,\"a\"]\n\n// find()\n[,'a'].find(x =&gt; true) // undefined\n\n// findIndex()\n[,'a'].findIndex(x =&gt; true) // 0\n</code></pre> <p>\u7531\u4e8e\u7a7a\u4f4d\u7684\u5904\u7406\u89c4\u5219\u975e\u5e38\u4e0d\u7edf\u4e00\uff0c\u6240\u4ee5\u5efa\u8bae\u907f\u514d\u51fa\u73b0\u7a7a\u4f4d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/09-array/#arrayprototypesort","title":"Array.prototype.sort() \u7684\u6392\u5e8f\u7a33\u5b9a\u6027","text":"<p>\u6392\u5e8f\u7a33\u5b9a\u6027\uff08stable sorting\uff09\u662f\u6392\u5e8f\u7b97\u6cd5\u7684\u91cd\u8981\u5c5e\u6027\uff0c\u6307\u7684\u662f\u6392\u5e8f\u5173\u952e\u5b57\u76f8\u540c\u7684\u9879\u76ee\uff0c\u6392\u5e8f\u524d\u540e\u7684\u987a\u5e8f\u4e0d\u53d8\u3002</p> <pre><code>const arr = [\n  'peach',\n  'straw',\n  'apple',\n  'spork'\n];\n\nconst stableSorting = (s1, s2) =&gt; {\n  if (s1[0] &lt; s2[0]) return -1;\n  return 1;\n};\n\narr.sort(stableSorting)\n//\u00a0[\"apple\", \"peach\", \"straw\", \"spork\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u6570\u7ec4<code>arr</code>\u6309\u7167\u9996\u5b57\u6bcd\u8fdb\u884c\u6392\u5e8f\u3002\u6392\u5e8f\u7ed3\u679c\u4e2d\uff0c<code>straw</code>\u5728<code>spork</code>\u7684\u524d\u9762\uff0c\u8ddf\u539f\u59cb\u987a\u5e8f\u4e00\u81f4\uff0c\u6240\u4ee5\u6392\u5e8f\u7b97\u6cd5<code>stableSorting</code>\u662f\u7a33\u5b9a\u6392\u5e8f\u3002</p> <pre><code>const unstableSorting = (s1, s2) =&gt; {\n  if (s1[0] &lt;= s2[0]) return -1;\n  return 1;\n};\n\narr.sort(unstableSorting)\n// [\"apple\", \"peach\", \"spork\", \"straw\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6392\u5e8f\u7ed3\u679c\u662f<code>spork</code>\u5728<code>straw</code>\u524d\u9762\uff0c\u8ddf\u539f\u59cb\u987a\u5e8f\u76f8\u53cd\uff0c\u6240\u4ee5\u6392\u5e8f\u7b97\u6cd5<code>unstableSorting</code>\u662f\u4e0d\u7a33\u5b9a\u7684\u3002</p> <p>\u5e38\u89c1\u7684\u6392\u5e8f\u7b97\u6cd5\u4e4b\u4e2d\uff0c\u63d2\u5165\u6392\u5e8f\u3001\u5408\u5e76\u6392\u5e8f\u3001\u5192\u6ce1\u6392\u5e8f\u7b49\u90fd\u662f\u7a33\u5b9a\u7684\uff0c\u5806\u6392\u5e8f\u3001\u5feb\u901f\u6392\u5e8f\u7b49\u662f\u4e0d\u7a33\u5b9a\u7684\u3002\u4e0d\u7a33\u5b9a\u6392\u5e8f\u7684\u4e3b\u8981\u7f3a\u70b9\u662f\uff0c\u591a\u91cd\u6392\u5e8f\u65f6\u53ef\u80fd\u4f1a\u4ea7\u751f\u95ee\u9898\u3002\u5047\u8bbe\u6709\u4e00\u4e2a\u59d3\u548c\u540d\u7684\u5217\u8868\uff0c\u8981\u6c42\u6309\u7167\u201c\u59d3\u6c0f\u4e3a\u4e3b\u8981\u5173\u952e\u5b57\uff0c\u540d\u5b57\u4e3a\u6b21\u8981\u5173\u952e\u5b57\u201d\u8fdb\u884c\u6392\u5e8f\u3002\u5f00\u53d1\u8005\u53ef\u80fd\u4f1a\u5148\u6309\u540d\u5b57\u6392\u5e8f\uff0c\u518d\u6309\u59d3\u6c0f\u8fdb\u884c\u6392\u5e8f\u3002\u5982\u679c\u6392\u5e8f\u7b97\u6cd5\u662f\u7a33\u5b9a\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8fbe\u5230\u201c\u5148\u59d3\u6c0f\uff0c\u540e\u540d\u5b57\u201d\u7684\u6392\u5e8f\u6548\u679c\u3002\u5982\u679c\u662f\u4e0d\u7a33\u5b9a\u7684\uff0c\u5c31\u4e0d\u884c\u3002</p> <p>\u65e9\u5148\u7684 ECMAScript \u6ca1\u6709\u89c4\u5b9a\uff0c<code>Array.prototype.sort()</code>\u7684\u9ed8\u8ba4\u6392\u5e8f\u7b97\u6cd5\u662f\u5426\u7a33\u5b9a\uff0c\u7559\u7ed9\u6d4f\u89c8\u5668\u81ea\u5df1\u51b3\u5b9a\uff0c\u8fd9\u5bfc\u81f4\u67d0\u4e9b\u5b9e\u73b0\u662f\u4e0d\u7a33\u5b9a\u7684\u3002ES2019 \u660e\u786e\u89c4\u5b9a\uff0c<code>Array.prototype.sort()</code>\u7684\u9ed8\u8ba4\u6392\u5e8f\u7b97\u6cd5\u5fc5\u987b\u7a33\u5b9a\u3002\u8fd9\u4e2a\u89c4\u5b9a\u5df2\u7ecf\u505a\u5230\u4e86\uff0c\u73b0\u5728 JavaScript \u5404\u4e2a\u4e3b\u8981\u5b9e\u73b0\u7684\u9ed8\u8ba4\u6392\u5e8f\u7b97\u6cd5\u90fd\u662f\u7a33\u5b9a\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/","title":"10-\u5bf9\u8c61\u7684\u6269\u5c55","text":"<p>\u5bf9\u8c61\uff08object\uff09\u662f JavaScript \u6700\u91cd\u8981\u7684\u6570\u636e\u7ed3\u6784\u3002ES6 \u5bf9\u5b83\u8fdb\u884c\u4e86\u91cd\u5927\u5347\u7ea7\uff0c\u672c\u7ae0\u4ecb\u7ecd\u6570\u636e\u7ed3\u6784\u672c\u8eab\u7684\u6539\u53d8\uff0c\u4e0b\u4e00\u7ae0\u4ecb\u7ecd<code>Object</code>\u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_1","title":"\u5c5e\u6027\u7684\u7b80\u6d01\u8868\u793a\u6cd5","text":"<p>ES6 \u5141\u8bb8\u5728\u5927\u62ec\u53f7\u91cc\u9762\uff0c\u76f4\u63a5\u5199\u5165\u53d8\u91cf\u548c\u51fd\u6570\uff0c\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u8fd9\u6837\u7684\u4e66\u5199\u66f4\u52a0\u7b80\u6d01\u3002</p> <pre><code>const foo = 'bar';\nconst baz = {foo};\nbaz // {foo: \"bar\"}\n\n// \u7b49\u540c\u4e8e\nconst baz = {foo: foo};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>foo</code>\u76f4\u63a5\u5199\u5728\u5927\u62ec\u53f7\u91cc\u9762\u3002\u8fd9\u65f6\uff0c\u5c5e\u6027\u540d\u5c31\u662f\u53d8\u91cf\u540d, \u5c5e\u6027\u503c\u5c31\u662f\u53d8\u91cf\u503c\u3002\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function f(x, y) {\n  return {x, y};\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction f(x, y) {\n  return {x: x, y: y};\n}\n\nf(1, 2) // Object {x: 1, y: 2}\n</code></pre> <p>\u9664\u4e86\u5c5e\u6027\u7b80\u5199\uff0c\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7b80\u5199\u3002</p> <pre><code>const o = {\n  method() {\n    return \"Hello!\";\n  }\n};\n\n// \u7b49\u540c\u4e8e\n\nconst o = {\n  method: function() {\n    return \"Hello!\";\n  }\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\u3002</p> <pre><code>let birth = '2000/01/01';\n\nconst Person = {\n\n  name: '\u5f20\u4e09',\n\n  //\u7b49\u540c\u4e8ebirth: birth\n  birth,\n\n  // \u7b49\u540c\u4e8ehello: function ()...\n  hello() { console.log('\u6211\u7684\u540d\u5b57\u662f', this.name); }\n\n};\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u7528\u4e8e\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5c06\u4f1a\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>function getPoint() {\n  const x = 1;\n  const y = 10;\n  return {x, y};\n}\n\ngetPoint()\n// {x:1, y:10}\n</code></pre> <p>CommonJS \u6a21\u5757\u8f93\u51fa\u4e00\u7ec4\u53d8\u91cf\uff0c\u5c31\u975e\u5e38\u5408\u9002\u4f7f\u7528\u7b80\u6d01\u5199\u6cd5\u3002</p> <pre><code>let ms = {};\n\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\n\nfunction setItem (key, value) {\n  ms[key] = value;\n}\n\nfunction clear () {\n  ms = {};\n}\n\nmodule.exports = { getItem, setItem, clear };\n// \u7b49\u540c\u4e8e\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  clear: clear\n};\n</code></pre> <p>\u5c5e\u6027\u7684\u8d4b\u503c\u5668\uff08setter\uff09\u548c\u53d6\u503c\u5668\uff08getter\uff09\uff0c\u4e8b\u5b9e\u4e0a\u4e5f\u662f\u91c7\u7528\u8fd9\u79cd\u5199\u6cd5\u3002</p> <pre><code>const cart = {\n  _wheels: 4,\n\n  get wheels () {\n    return this._wheels;\n  },\n\n  set wheels (value) {\n    if (value &lt; this._wheels) {\n      throw new Error('\u6570\u503c\u592a\u5c0f\u4e86\uff01');\n    }\n    this._wheels = value;\n  }\n}\n</code></pre> <p>\u7b80\u6d01\u5199\u6cd5\u5728\u6253\u5370\u5bf9\u8c61\u65f6\u4e5f\u5f88\u6709\u7528\u3002</p> <pre><code>let user = {\n  name: 'test'\n};\n\nlet foo = {\n  bar: 'baz'\n};\n\nconsole.log(user, foo)\n// {name: \"test\"} {bar: \"baz\"}\nconsole.log({user, foo})\n// {user: {name: \"test\"}, foo: {bar: \"baz\"}}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log</code>\u76f4\u63a5\u8f93\u51fa<code>user</code>\u548c<code>foo</code>\u4e24\u4e2a\u5bf9\u8c61\u65f6\uff0c\u5c31\u662f\u4e24\u7ec4\u952e\u503c\u5bf9\uff0c\u53ef\u80fd\u4f1a\u6df7\u6dc6\u3002\u628a\u5b83\u4eec\u653e\u5728\u5927\u62ec\u53f7\u91cc\u9762\u8f93\u51fa\uff0c\u5c31\u53d8\u6210\u4e86\u5bf9\u8c61\u7684\u7b80\u6d01\u8868\u793a\u6cd5\uff0c\u6bcf\u7ec4\u952e\u503c\u5bf9\u524d\u9762\u4f1a\u6253\u5370\u5bf9\u8c61\u540d\uff0c\u8fd9\u6837\u5c31\u6bd4\u8f83\u6e05\u6670\u4e86\u3002</p> <p>\u6ce8\u610f\uff0c\u7b80\u5199\u7684\u5bf9\u8c61\u65b9\u6cd5\u4e0d\u80fd\u7528\u4f5c\u6784\u9020\u51fd\u6570\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>const obj = {\n  f() {\n    this.foo = 'bar';\n  }\n};\n\nnew obj.f() // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>f</code>\u662f\u4e00\u4e2a\u7b80\u5199\u7684\u5bf9\u8c61\u65b9\u6cd5\uff0c\u6240\u4ee5<code>obj.f</code>\u4e0d\u80fd\u5f53\u4f5c\u6784\u9020\u51fd\u6570\u4f7f\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_2","title":"\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f","text":"<p>JavaScript \u5b9a\u4e49\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\nobj.foo = true;\n\n// \u65b9\u6cd5\u4e8c\nobj['a' + 'bc'] = 123;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u65b9\u6cd5\u4e00\u662f\u76f4\u63a5\u7528\u6807\u8bc6\u7b26\u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u65b9\u6cd5\u4e8c\u662f\u7528\u8868\u8fbe\u5f0f\u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u8fd9\u65f6\u8981\u5c06\u8868\u8fbe\u5f0f\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u5185\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u4f7f\u7528\u5b57\u9762\u91cf\u65b9\u5f0f\u5b9a\u4e49\u5bf9\u8c61\uff08\u4f7f\u7528\u5927\u62ec\u53f7\uff09\uff0c\u5728 ES5 \u4e2d\u53ea\u80fd\u4f7f\u7528\u65b9\u6cd5\u4e00\uff08\u6807\u8bc6\u7b26\uff09\u5b9a\u4e49\u5c5e\u6027\u3002</p> <pre><code>var obj = {\n  foo: true,\n  abc: 123\n};\n</code></pre> <p>ES6 \u5141\u8bb8\u5b57\u9762\u91cf\u5b9a\u4e49\u5bf9\u8c61\u65f6\uff0c\u7528\u65b9\u6cd5\u4e8c\uff08\u8868\u8fbe\u5f0f\uff09\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5373\u628a\u8868\u8fbe\u5f0f\u653e\u5728\u65b9\u62ec\u53f7\u5185\u3002</p> <pre><code>let propKey = 'foo';\n\nlet obj = {\n  [propKey]: true,\n  ['a' + 'bc']: 123\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let lastWord = 'last word';\n\nconst a = {\n  'first word': 'hello',\n  [lastWord]: 'world'\n};\n\na['first word'] // \"hello\"\na[lastWord] // \"world\"\na['last word'] // \"world\"\n</code></pre> <p>\u8868\u8fbe\u5f0f\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4e49\u65b9\u6cd5\u540d\u3002</p> <pre><code>let obj = {\n  ['h' + 'ello']() {\n    return 'hi';\n  }\n};\n\nobj.hello() // hi\n</code></pre> <p>\u6ce8\u610f\uff0c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u4e0e\u7b80\u6d01\u8868\u793a\u6cd5\uff0c\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst foo = 'bar';\nconst bar = 'abc';\nconst baz = { [foo] };\n\n// \u6b63\u786e\nconst foo = 'bar';\nconst baz = { [foo]: 'abc'};\n</code></pre> <p>\u6ce8\u610f\uff0c\u5c5e\u6027\u540d\u8868\u8fbe\u5f0f\u5982\u679c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u5c06\u5bf9\u8c61\u8f6c\u4e3a\u5b57\u7b26\u4e32<code>[object Object]</code>\uff0c\u8fd9\u4e00\u70b9\u8981\u7279\u522b\u5c0f\u5fc3\u3002</p> <pre><code>const keyA = {a: 1};\nconst keyB = {b: 2};\n\nconst myObject = {\n  [keyA]: 'valueA',\n  [keyB]: 'valueB'\n};\n\nmyObject // Object {[object Object]: \"valueB\"}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>[keyA]</code>\u548c<code>[keyB]</code>\u5f97\u5230\u7684\u90fd\u662f<code>[object Object]</code>\uff0c\u6240\u4ee5<code>[keyB]</code>\u4f1a\u628a<code>[keyA]</code>\u8986\u76d6\u6389\uff0c\u800c<code>myObject</code>\u6700\u540e\u53ea\u6709\u4e00\u4e2a<code>[object Object]</code>\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#name","title":"\u65b9\u6cd5\u7684 name \u5c5e\u6027","text":"<p>\u51fd\u6570\u7684<code>name</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u51fd\u6570\u540d\u3002\u5bf9\u8c61\u65b9\u6cd5\u4e5f\u662f\u51fd\u6570\uff0c\u56e0\u6b64\u4e5f\u6709<code>name</code>\u5c5e\u6027\u3002</p> <pre><code>const person = {\n  sayName() {\n \u00a0 \u00a0console.log('hello!');\n  },\n};\n\nperson.sayName.name   // \"sayName\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u65b9\u6cd5\u7684<code>name</code>\u5c5e\u6027\u8fd4\u56de\u51fd\u6570\u540d\uff08\u5373\u65b9\u6cd5\u540d\uff09\u3002</p> <p>\u5982\u679c\u5bf9\u8c61\u7684\u65b9\u6cd5\u4f7f\u7528\u4e86\u53d6\u503c\u51fd\u6570\uff08<code>getter</code>\uff09\u548c\u5b58\u503c\u51fd\u6570\uff08<code>setter</code>\uff09\uff0c\u5219<code>name</code>\u5c5e\u6027\u4e0d\u662f\u5728\u8be5\u65b9\u6cd5\u4e0a\u9762\uff0c\u800c\u662f\u8be5\u65b9\u6cd5\u7684\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u7684<code>get</code>\u548c<code>set</code>\u5c5e\u6027\u4e0a\u9762\uff0c\u8fd4\u56de\u503c\u662f\u65b9\u6cd5\u540d\u524d\u52a0\u4e0a<code>get</code>\u548c<code>set</code>\u3002</p> <pre><code>const obj = {\n  get foo() {},\n  set foo(x) {}\n};\n\nobj.foo.name\n// TypeError: Cannot read property 'name' of undefined\n\nconst descriptor = Object.getOwnPropertyDescriptor(obj, 'foo');\n\ndescriptor.get.name // \"get foo\"\ndescriptor.set.name // \"set foo\"\n</code></pre> <p>\u6709\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a<code>bind</code>\u65b9\u6cd5\u521b\u9020\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u8fd4\u56de<code>bound</code>\u52a0\u4e0a\u539f\u51fd\u6570\u7684\u540d\u5b57\uff1b<code>Function</code>\u6784\u9020\u51fd\u6570\u521b\u9020\u7684\u51fd\u6570\uff0c<code>name</code>\u5c5e\u6027\u8fd4\u56de<code>anonymous</code>\u3002</p> <pre><code>(new Function()).name // \"anonymous\"\n\nvar doSomething = function() {\n  // ...\n};\ndoSomething.bind().name // \"bound doSomething\"\n</code></pre> <p>\u5982\u679c\u5bf9\u8c61\u7684\u65b9\u6cd5\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u90a3\u4e48<code>name</code>\u5c5e\u6027\u8fd4\u56de\u7684\u662f\u8fd9\u4e2a Symbol \u503c\u7684\u63cf\u8ff0\u3002</p> <pre><code>const key1 = Symbol('description');\nconst key2 = Symbol();\nlet obj = {\n  [key1]() {},\n  [key2]() {},\n};\nobj[key1].name // \"[description]\"\nobj[key2].name // \"\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>key1</code>\u5bf9\u5e94\u7684 Symbol \u503c\u6709\u63cf\u8ff0\uff0c<code>key2</code>\u6ca1\u6709\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_3","title":"\u5c5e\u6027\u7684\u53ef\u679a\u4e3e\u6027\u548c\u904d\u5386","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_4","title":"\u53ef\u679a\u4e3e\u6027","text":"<p>\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u4e00\u4e2a\u63cf\u8ff0\u5bf9\u8c61\uff08Descriptor\uff09\uff0c\u7528\u6765\u63a7\u5236\u8be5\u5c5e\u6027\u7684\u884c\u4e3a\u3002<code>Object.getOwnPropertyDescriptor</code>\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <pre><code>let obj = { foo: 123 };\nObject.getOwnPropertyDescriptor(obj, 'foo')\n//  {\n//    value: 123,\n//    writable: true,\n//    enumerable: true,\n//    configurable: true\n//  }\n</code></pre> <p>\u63cf\u8ff0\u5bf9\u8c61\u7684<code>enumerable</code>\u5c5e\u6027\uff0c\u79f0\u4e3a\u201c\u53ef\u679a\u4e3e\u6027\u201d\uff0c\u5982\u679c\u8be5\u5c5e\u6027\u4e3a<code>false</code>\uff0c\u5c31\u8868\u793a\u67d0\u4e9b\u64cd\u4f5c\u4f1a\u5ffd\u7565\u5f53\u524d\u5c5e\u6027\u3002</p> <p>\u76ee\u524d\uff0c\u6709\u56db\u4e2a\u64cd\u4f5c\u4f1a\u5ffd\u7565<code>enumerable</code>\u4e3a<code>false</code>\u7684\u5c5e\u6027\u3002</p> <ul> <li><code>for...in</code>\u5faa\u73af\uff1a\u53ea\u904d\u5386\u5bf9\u8c61\u81ea\u8eab\u7684\u548c\u7ee7\u627f\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> <li><code>Object.keys()</code>\uff1a\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u7684\u952e\u540d\u3002</li> <li><code>JSON.stringify()</code>\uff1a\u53ea\u4e32\u884c\u5316\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> <li><code>Object.assign()</code>\uff1a \u5ffd\u7565<code>enumerable</code>\u4e3a<code>false</code>\u7684\u5c5e\u6027\uff0c\u53ea\u62f7\u8d1d\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\u3002</li> </ul> <p>\u8fd9\u56db\u4e2a\u64cd\u4f5c\u4e4b\u4e2d\uff0c\u524d\u4e09\u4e2a\u662f ES5 \u5c31\u6709\u7684\uff0c\u6700\u540e\u4e00\u4e2a<code>Object.assign()</code>\u662f ES6 \u65b0\u589e\u7684\u3002\u5176\u4e2d\uff0c\u53ea\u6709<code>for...in</code>\u4f1a\u8fd4\u56de\u7ee7\u627f\u7684\u5c5e\u6027\uff0c\u5176\u4ed6\u4e09\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u5ffd\u7565\u7ee7\u627f\u7684\u5c5e\u6027\uff0c\u53ea\u5904\u7406\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u3002\u5b9e\u9645\u4e0a\uff0c\u5f15\u5165\u201c\u53ef\u679a\u4e3e\u201d\uff08<code>enumerable</code>\uff09\u8fd9\u4e2a\u6982\u5ff5\u7684\u6700\u521d\u76ee\u7684\uff0c\u5c31\u662f\u8ba9\u67d0\u4e9b\u5c5e\u6027\u53ef\u4ee5\u89c4\u907f\u6389<code>for...in</code>\u64cd\u4f5c\uff0c\u4e0d\u7136\u6240\u6709\u5185\u90e8\u5c5e\u6027\u548c\u65b9\u6cd5\u90fd\u4f1a\u88ab\u904d\u5386\u5230\u3002\u6bd4\u5982\uff0c\u5bf9\u8c61\u539f\u578b\u7684<code>toString</code>\u65b9\u6cd5\uff0c\u4ee5\u53ca\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027\uff0c\u5c31\u901a\u8fc7\u201c\u53ef\u679a\u4e3e\u6027\u201d\uff0c\u4ece\u800c\u907f\u514d\u88ab<code>for...in</code>\u904d\u5386\u5230\u3002</p> <pre><code>Object.getOwnPropertyDescriptor(Object.prototype, 'toString').enumerable\n// false\n\nObject.getOwnPropertyDescriptor([], 'length').enumerable\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>toString</code>\u548c<code>length</code>\u5c5e\u6027\u7684<code>enumerable</code>\u90fd\u662f<code>false</code>\uff0c\u56e0\u6b64<code>for...in</code>\u4e0d\u4f1a\u904d\u5386\u5230\u8fd9\u4e24\u4e2a\u7ee7\u627f\u81ea\u539f\u578b\u7684\u5c5e\u6027\u3002</p> <p>\u53e6\u5916\uff0cES6 \u89c4\u5b9a\uff0c\u6240\u6709 Class \u7684\u539f\u578b\u7684\u65b9\u6cd5\u90fd\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\u3002</p> <pre><code>Object.getOwnPropertyDescriptor(class {foo() {}}.prototype, 'foo').enumerable\n// false\n</code></pre> <p>\u603b\u7684\u6765\u8bf4\uff0c\u64cd\u4f5c\u4e2d\u5f15\u5165\u7ee7\u627f\u7684\u5c5e\u6027\u4f1a\u8ba9\u95ee\u9898\u590d\u6742\u5316\uff0c\u5927\u591a\u6570\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u3002\u6240\u4ee5\uff0c\u5c3d\u91cf\u4e0d\u8981\u7528<code>for...in</code>\u5faa\u73af\uff0c\u800c\u7528<code>Object.keys()</code>\u4ee3\u66ff\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_5","title":"\u5c5e\u6027\u7684\u904d\u5386","text":"<p>ES6 \u4e00\u5171\u6709 5 \u79cd\u65b9\u6cd5\u53ef\u4ee5\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\uff081\uff09for...in</p> <p><code>for...in</code>\u5faa\u73af\u904d\u5386\u5bf9\u8c61\u81ea\u8eab\u7684\u548c\u7ee7\u627f\u7684\u53ef\u679a\u4e3e\u5c5e\u6027\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff09\u3002</p> <p>\uff082\uff09Object.keys(obj)</p> <p><code>Object.keys</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u62ec\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u679a\u4e3e\u5c5e\u6027\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff09\u7684\u952e\u540d\u3002</p> <p>\uff083\uff09Object.getOwnPropertyNames(obj)</p> <p><code>Object.getOwnPropertyNames</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u5c5e\u6027\uff08\u4e0d\u542b Symbol \u5c5e\u6027\uff0c\u4f46\u662f\u5305\u62ec\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027\uff09\u7684\u952e\u540d\u3002</p> <p>\uff084\uff09Object.getOwnPropertySymbols(obj)</p> <p><code>Object.getOwnPropertySymbols</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709 Symbol \u5c5e\u6027\u7684\u952e\u540d\u3002</p> <p>\uff085\uff09Reflect.ownKeys(obj)</p> <p><code>Reflect.ownKeys</code>\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u952e\u540d\uff0c\u4e0d\u7ba1\u952e\u540d\u662f Symbol \u6216\u5b57\u7b26\u4e32\uff0c\u4e5f\u4e0d\u7ba1\u662f\u5426\u53ef\u679a\u4e3e\u3002</p> <p>\u4ee5\u4e0a\u7684 5 \u79cd\u65b9\u6cd5\u904d\u5386\u5bf9\u8c61\u7684\u952e\u540d\uff0c\u90fd\u9075\u5b88\u540c\u6837\u7684\u5c5e\u6027\u904d\u5386\u7684\u6b21\u5e8f\u89c4\u5219\u3002</p> <ul> <li>\u9996\u5148\u904d\u5386\u6240\u6709\u6570\u503c\u952e\uff0c\u6309\u7167\u6570\u503c\u5347\u5e8f\u6392\u5217\u3002</li> <li>\u5176\u6b21\u904d\u5386\u6240\u6709\u5b57\u7b26\u4e32\u952e\uff0c\u6309\u7167\u52a0\u5165\u65f6\u95f4\u5347\u5e8f\u6392\u5217\u3002</li> <li>\u6700\u540e\u904d\u5386\u6240\u6709 Symbol \u952e\uff0c\u6309\u7167\u52a0\u5165\u65f6\u95f4\u5347\u5e8f\u6392\u5217\u3002</li> </ul> <pre><code>Reflect.ownKeys({ [Symbol()]:0, b:0, 10:0, 2:0, a:0 })\n// ['2', '10', 'b', 'a', Symbol()]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Reflect.ownKeys</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u53c2\u6570\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u3002\u8fd9\u4e2a\u6570\u7ec4\u7684\u5c5e\u6027\u6b21\u5e8f\u662f\u8fd9\u6837\u7684\uff0c\u9996\u5148\u662f\u6570\u503c\u5c5e\u6027<code>2</code>\u548c<code>10</code>\uff0c\u5176\u6b21\u662f\u5b57\u7b26\u4e32\u5c5e\u6027<code>b</code>\u548c<code>a</code>\uff0c\u6700\u540e\u662f Symbol \u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#super","title":"super \u5173\u952e\u5b57","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c<code>this</code>\u5173\u952e\u5b57\u603b\u662f\u6307\u5411\u51fd\u6570\u6240\u5728\u7684\u5f53\u524d\u5bf9\u8c61\uff0cES6 \u53c8\u65b0\u589e\u4e86\u53e6\u4e00\u4e2a\u7c7b\u4f3c\u7684\u5173\u952e\u5b57<code>super</code>\uff0c\u6307\u5411\u5f53\u524d\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>const proto = {\n  foo: 'hello'\n};\n\nconst obj = {\n  foo: 'world',\n  find() {\n    return super.foo;\n  }\n};\n\nObject.setPrototypeOf(obj, proto);\nobj.find() // \"hello\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj.find()</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u901a\u8fc7<code>super.foo</code>\u5f15\u7528\u4e86\u539f\u578b\u5bf9\u8c61<code>proto</code>\u7684<code>foo</code>\u5c5e\u6027\u3002</p> <p>\u6ce8\u610f\uff0c<code>super</code>\u5173\u952e\u5b57\u8868\u793a\u539f\u578b\u5bf9\u8c61\u65f6\uff0c\u53ea\u80fd\u7528\u5728\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u7528\u5728\u5176\u4ed6\u5730\u65b9\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst obj = {\n  foo: super.foo\n}\n\n// \u62a5\u9519\nconst obj = {\n  foo: () =&gt; super.foo\n}\n\n// \u62a5\u9519\nconst obj = {\n  foo: function () {\n    return super.foo\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd<code>super</code>\u7684\u7528\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5bf9\u4e8e JavaScript \u5f15\u64ce\u6765\u8bf4\uff0c\u8fd9\u91cc\u7684<code>super</code>\u90fd\u6ca1\u6709\u7528\u5728\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e4b\u4e2d\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u662f<code>super</code>\u7528\u5728\u5c5e\u6027\u91cc\u9762\uff0c\u7b2c\u4e8c\u79cd\u548c\u7b2c\u4e09\u79cd\u5199\u6cd5\u662f<code>super</code>\u7528\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u7136\u540e\u8d4b\u503c\u7ed9<code>foo</code>\u5c5e\u6027\u3002\u76ee\u524d\uff0c\u53ea\u6709\u5bf9\u8c61\u65b9\u6cd5\u7684\u7b80\u5199\u6cd5\u53ef\u4ee5\u8ba9 JavaScript \u5f15\u64ce\u786e\u8ba4\uff0c\u5b9a\u4e49\u7684\u662f\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <p>JavaScript \u5f15\u64ce\u5185\u90e8\uff0c<code>super.foo</code>\u7b49\u540c\u4e8e<code>Object.getPrototypeOf(this).foo</code>\uff08\u5c5e\u6027\uff09\u6216<code>Object.getPrototypeOf(this).foo.call(this)</code>\uff08\u65b9\u6cd5\uff09\u3002</p> <pre><code>const proto = {\n  x: 'hello',\n  foo() {\n    console.log(this.x);\n  },\n};\n\nconst obj = {\n  x: 'world',\n  foo() {\n    super.foo();\n  }\n}\n\nObject.setPrototypeOf(obj, proto);\n\nobj.foo() // \"world\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.foo</code>\u6307\u5411\u539f\u578b\u5bf9\u8c61<code>proto</code>\u7684<code>foo</code>\u65b9\u6cd5\uff0c\u4f46\u662f\u7ed1\u5b9a\u7684<code>this</code>\u5374\u8fd8\u662f\u5f53\u524d\u5bf9\u8c61<code>obj</code>\uff0c\u56e0\u6b64\u8f93\u51fa\u7684\u5c31\u662f<code>world</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_6","title":"\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26","text":"<p>\u300a\u6570\u7ec4\u7684\u6269\u5c55\u300b\u4e00\u7ae0\u4e2d\uff0c\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3002ES2018 \u5c06\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u5f15\u5165\u4e86\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_7","title":"\u89e3\u6784\u8d4b\u503c","text":"<p>\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\u7528\u4e8e\u4ece\u4e00\u4e2a\u5bf9\u8c61\u53d6\u503c\uff0c\u76f8\u5f53\u4e8e\u5c06\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u53ef\u904d\u5386\u7684\uff08enumerable\uff09\u3001\u4f46\u5c1a\u672a\u88ab\u8bfb\u53d6\u7684\u5c5e\u6027\uff0c\u5206\u914d\u5230\u6307\u5b9a\u7684\u5bf9\u8c61\u4e0a\u9762\u3002\u6240\u6709\u7684\u952e\u548c\u5b83\u4eec\u7684\u503c\uff0c\u90fd\u4f1a\u62f7\u8d1d\u5230\u65b0\u5bf9\u8c61\u4e0a\u9762\u3002</p> <pre><code>let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };\nx // 1\ny // 2\nz // { a: 3, b: 4 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>z</code>\u662f\u89e3\u6784\u8d4b\u503c\u6240\u5728\u7684\u5bf9\u8c61\u3002\u5b83\u83b7\u53d6\u7b49\u53f7\u53f3\u8fb9\u7684\u6240\u6709\u5c1a\u672a\u8bfb\u53d6\u7684\u952e\uff08<code>a</code>\u548c<code>b</code>\uff09\uff0c\u5c06\u5b83\u4eec\u8fde\u540c\u503c\u4e00\u8d77\u62f7\u8d1d\u8fc7\u6765\u3002</p> <p>\u7531\u4e8e\u89e3\u6784\u8d4b\u503c\u8981\u6c42\u7b49\u53f7\u53f3\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u7b49\u53f7\u53f3\u8fb9\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>let { ...z } = null; // \u8fd0\u884c\u65f6\u9519\u8bef\nlet { ...z } = undefined; // \u8fd0\u884c\u65f6\u9519\u8bef\n</code></pre> <p>\u89e3\u6784\u8d4b\u503c\u5fc5\u987b\u662f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { ...x, y, z } = someObject; // \u53e5\u6cd5\u9519\u8bef\nlet { x, ...y, ...z } = someObject; // \u53e5\u6cd5\u9519\u8bef\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u89e3\u6784\u8d4b\u503c\u4e0d\u662f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u89e3\u6784\u8d4b\u503c\u7684\u62f7\u8d1d\u662f\u6d45\u62f7\u8d1d\uff0c\u5373\u5982\u679c\u4e00\u4e2a\u952e\u7684\u503c\u662f\u590d\u5408\u7c7b\u578b\u7684\u503c\uff08\u6570\u7ec4\u3001\u5bf9\u8c61\u3001\u51fd\u6570\uff09\u3001\u90a3\u4e48\u89e3\u6784\u8d4b\u503c\u62f7\u8d1d\u7684\u662f\u8fd9\u4e2a\u503c\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u8fd9\u4e2a\u503c\u7684\u526f\u672c\u3002</p> <pre><code>let obj = { a: { b: 1 } };\nlet { ...x } = obj;\nobj.a.b = 2;\nx.a.b // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u662f\u89e3\u6784\u8d4b\u503c\u6240\u5728\u7684\u5bf9\u8c61\uff0c\u62f7\u8d1d\u4e86\u5bf9\u8c61<code>obj</code>\u7684<code>a</code>\u5c5e\u6027\u3002<code>a</code>\u5c5e\u6027\u5f15\u7528\u4e86\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4fee\u6539\u8fd9\u4e2a\u5bf9\u8c61\u7684\u503c\uff0c\u4f1a\u5f71\u54cd\u5230\u89e3\u6784\u8d4b\u503c\u5bf9\u5b83\u7684\u5f15\u7528\u3002</p> <p>\u53e6\u5916\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u4e0d\u80fd\u590d\u5236\u7ee7\u627f\u81ea\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>let o1 = { a: 1 };\nlet o2 = { b: 2 };\no2.__proto__ = o1;\nlet { ...o3 } = o2;\no3 // { b: 2 }\no3.a // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>o3</code>\u590d\u5236\u4e86<code>o2</code>\uff0c\u4f46\u662f\u53ea\u590d\u5236\u4e86<code>o2</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u6ca1\u6709\u590d\u5236\u5b83\u7684\u539f\u578b\u5bf9\u8c61<code>o1</code>\u7684\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const o = Object.create({ x: 1, y: 2 });\no.z = 3;\n\nlet { x, ...newObj } = o;\nlet { y, z } = newObj;\nx // 1\ny // undefined\nz // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>x</code>\u662f\u5355\u7eaf\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bfb\u53d6\u5bf9\u8c61<code>o</code>\u7ee7\u627f\u7684\u5c5e\u6027\uff1b\u53d8\u91cf<code>y</code>\u548c<code>z</code>\u662f\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u53ea\u80fd\u8bfb\u53d6\u5bf9\u8c61<code>o</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u6240\u4ee5\u53d8\u91cf<code>z</code>\u53ef\u4ee5\u8d4b\u503c\u6210\u529f\uff0c\u53d8\u91cf<code>y</code>\u53d6\u4e0d\u5230\u503c\u3002ES6 \u89c4\u5b9a\uff0c\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\u4e4b\u4e2d\uff0c\u5982\u679c\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u5fc5\u987b\u662f\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c\u800c\u4e0d\u80fd\u662f\u4e00\u4e2a\u89e3\u6784\u8d4b\u503c\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u4e0a\u9762\u4ee3\u7801\u5f15\u5165\u4e86\u4e2d\u95f4\u53d8\u91cf<code>newObj</code>\uff0c\u5982\u679c\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u4f1a\u62a5\u9519\u3002</p> <pre><code>let { x, ...{ y, z } } = o;\n// SyntaxError: ... must be followed by an identifier in declaration contexts\n</code></pre> <p>\u89e3\u6784\u8d4b\u503c\u7684\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u6269\u5c55\u67d0\u4e2a\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5f15\u5165\u5176\u4ed6\u64cd\u4f5c\u3002</p> <pre><code>function baseFunction({ a, b }) {\n  // ...\n}\nfunction wrapperFunction({ x, y, ...restConfig }) {\n  // \u4f7f\u7528 x \u548c y \u53c2\u6570\u8fdb\u884c\u64cd\u4f5c\n  // \u5176\u4f59\u53c2\u6570\u4f20\u7ed9\u539f\u59cb\u51fd\u6570\n  return baseFunction(restConfig);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u59cb\u51fd\u6570<code>baseFunction</code>\u63a5\u53d7<code>a</code>\u548c<code>b</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u51fd\u6570<code>wrapperFunction</code>\u5728<code>baseFunction</code>\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u6269\u5c55\uff0c\u80fd\u591f\u63a5\u53d7\u591a\u4f59\u7684\u53c2\u6570\uff0c\u5e76\u4e14\u4fdd\u7559\u539f\u59cb\u51fd\u6570\u7684\u884c\u4e3a\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#_8","title":"\u6269\u5c55\u8fd0\u7b97\u7b26","text":"<p>\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u7528\u4e8e\u53d6\u51fa\u53c2\u6570\u5bf9\u8c61\u7684\u6240\u6709\u53ef\u904d\u5386\u5c5e\u6027\uff0c\u62f7\u8d1d\u5230\u5f53\u524d\u5bf9\u8c61\u4e4b\u4e2d\u3002</p> <pre><code>let z = { a: 3, b: 4 };\nlet n = { ...z };\nn // { a: 3, b: 4 }\n</code></pre> <p>\u7531\u4e8e\u6570\u7ec4\u662f\u7279\u6b8a\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6570\u7ec4\u3002</p> <pre><code>let foo = { ...['a', 'b', 'c'] };\nfoo\n// {0: \"a\", 1: \"b\", 2: \"c\"}\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u5219\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>{...{}, a: 1}\n// { a: 1 }\n</code></pre> <p>\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u4e0d\u662f\u5bf9\u8c61\uff0c\u5219\u4f1a\u81ea\u52a8\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u7b49\u540c\u4e8e {...Object(1)}\n{...1} // {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u6574\u6570<code>1</code>\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u6570\u503c\u7684\u5305\u88c5\u5bf9\u8c61<code>Number{1}</code>\u3002\u7531\u4e8e\u8be5\u5bf9\u8c61\u6ca1\u6709\u81ea\u8eab\u5c5e\u6027\uff0c\u6240\u4ee5\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u90fd\u662f\u7c7b\u4f3c\u7684\u9053\u7406\u3002</p> <pre><code>// \u7b49\u540c\u4e8e {...Object(true)}\n{...true} // {}\n\n// \u7b49\u540c\u4e8e {...Object(undefined)}\n{...undefined} // {}\n\n// \u7b49\u540c\u4e8e {...Object(null)}\n{...null} // {}\n</code></pre> <p>\u4f46\u662f\uff0c\u5982\u679c\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u662f\u5b57\u7b26\u4e32\uff0c\u5b83\u4f1a\u81ea\u52a8\u8f6c\u6210\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u4e0d\u662f\u7a7a\u5bf9\u8c61\u3002</p> <pre><code>{...'hello'}\n// {0: \"h\", 1: \"e\", 2: \"l\", 3: \"l\", 4: \"o\"}\n</code></pre> <p>\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u53ea\u4f1a\u8fd4\u56de\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\u3001\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\uff0c\u8fd9\u4e00\u70b9\u8981\u7279\u522b\u5c0f\u5fc3\uff0c\u5c24\u5176\u662f\u7528\u4e8e\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u65f6\u3002</p> <pre><code>class C {\n  p = 12;\n  m() {}\n}\n\nlet c = new C();\nlet clone = { ...c };\n\nclone.p; // ok\nclone.m(); // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>c</code>\u662f<code>C</code>\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u5bf9\u5176\u8fdb\u884c\u6269\u5c55\u8fd0\u7b97\u65f6\uff0c\u53ea\u4f1a\u8fd4\u56de<code>c</code>\u81ea\u8eab\u7684\u5c5e\u6027<code>c.p</code>\uff0c\u800c\u4e0d\u4f1a\u8fd4\u56de<code>c</code>\u7684\u65b9\u6cd5<code>c.m()</code>\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u65b9\u6cd5\u5b9a\u4e49\u5728<code>C</code>\u7684\u539f\u578b\u5bf9\u8c61\u4e0a\uff08\u8be6\u89c1 Class \u7684\u7ae0\u8282\uff09\u3002</p> <p>\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u7b49\u540c\u4e8e\u4f7f\u7528<code>Object.assign()</code>\u65b9\u6cd5\u3002</p> <pre><code>let aClone = { ...a };\n// \u7b49\u540c\u4e8e\nlet aClone = Object.assign({}, a);\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u53ea\u662f\u62f7\u8d1d\u4e86\u5bf9\u8c61\u5b9e\u4f8b\u7684\u5c5e\u6027\uff0c\u5982\u679c\u60f3\u5b8c\u6574\u514b\u9686\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd8\u62f7\u8d1d\u5bf9\u8c61\u539f\u578b\u7684\u5c5e\u6027\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nconst clone1 = {\n  __proto__: Object.getPrototypeOf(obj),\n  ...obj\n};\n\n// \u5199\u6cd5\u4e8c\nconst clone2 = Object.assign(\n  Object.create(Object.getPrototypeOf(obj)),\n  obj\n);\n\n// \u5199\u6cd5\u4e09\nconst clone3 = Object.create(\n  Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj)\n)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5199\u6cd5\u4e00\u7684<code>__proto__</code>\u5c5e\u6027\u5728\u975e\u6d4f\u89c8\u5668\u7684\u73af\u5883\u4e0d\u4e00\u5b9a\u90e8\u7f72\uff0c\u56e0\u6b64\u63a8\u8350\u4f7f\u7528\u5199\u6cd5\u4e8c\u548c\u5199\u6cd5\u4e09\u3002</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u53ef\u4ee5\u7528\u4e8e\u5408\u5e76\u4e24\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>let ab = { ...a, ...b };\n// \u7b49\u540c\u4e8e\nlet ab = Object.assign({}, a, b);\n</code></pre> <p>\u5982\u679c\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u653e\u5728\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\uff0c\u5219\u6269\u5c55\u8fd0\u7b97\u7b26\u5185\u90e8\u7684\u540c\u540d\u5c5e\u6027\u4f1a\u88ab\u8986\u76d6\u6389\u3002</p> <pre><code>let aWithOverrides = { ...a, x: 1, y: 2 };\n// \u7b49\u540c\u4e8e\nlet aWithOverrides = { ...a, ...{ x: 1, y: 2 } };\n// \u7b49\u540c\u4e8e\nlet x = 1, y = 2, aWithOverrides = { ...a, x, y };\n// \u7b49\u540c\u4e8e\nlet aWithOverrides = Object.assign({}, a, { x: 1, y: 2 });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u5bf9\u8c61\u7684<code>x</code>\u5c5e\u6027\u548c<code>y</code>\u5c5e\u6027\uff0c\u62f7\u8d1d\u5230\u65b0\u5bf9\u8c61\u540e\u4f1a\u88ab\u8986\u76d6\u6389\u3002</p> <p>\u8fd9\u7528\u6765\u4fee\u6539\u73b0\u6709\u5bf9\u8c61\u90e8\u5206\u7684\u5c5e\u6027\u5c31\u5f88\u65b9\u4fbf\u4e86\u3002</p> <pre><code>let newVersion = {\n  ...previousVersion,\n  name: 'New Name' // Override the name property\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>newVersion</code>\u5bf9\u8c61\u81ea\u5b9a\u4e49\u4e86<code>name</code>\u5c5e\u6027\uff0c\u5176\u4ed6\u5c5e\u6027\u5168\u90e8\u590d\u5236\u81ea<code>previousVersion</code>\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u628a\u81ea\u5b9a\u4e49\u5c5e\u6027\u653e\u5728\u6269\u5c55\u8fd0\u7b97\u7b26\u524d\u9762\uff0c\u5c31\u53d8\u6210\u4e86\u8bbe\u7f6e\u65b0\u5bf9\u8c61\u7684\u9ed8\u8ba4\u5c5e\u6027\u503c\u3002</p> <pre><code>let aWithDefaults = { x: 1, y: 2, ...a };\n// \u7b49\u540c\u4e8e\nlet aWithDefaults = Object.assign({}, { x: 1, y: 2 }, a);\n// \u7b49\u540c\u4e8e\nlet aWithDefaults = Object.assign({ x: 1, y: 2 }, a);\n</code></pre> <p>\u4e0e\u6570\u7ec4\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u4e00\u6837\uff0c\u5bf9\u8c61\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u540e\u9762\u53ef\u4ee5\u8ddf\u8868\u8fbe\u5f0f\u3002</p> <pre><code>const obj = {\n  ...(x &gt; 1 ? {a: 1} : {}),\n  b: 2,\n};\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u53c2\u6570\u5bf9\u8c61\u4e4b\u4e2d\uff0c\u5982\u679c\u6709\u53d6\u503c\u51fd\u6570<code>get</code>\uff0c\u8fd9\u4e2a\u51fd\u6570\u662f\u4f1a\u6267\u884c\u7684\u3002</p> <pre><code>let a = {\n  get x() {\n    throw new Error('not throw yet');\n  }\n}\n\nlet aWithXGetter = { ...a }; // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u53d6\u503c\u51fd\u6570<code>get</code>\u5728\u6269\u5c55<code>a</code>\u5bf9\u8c61\u65f6\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#aggregateerror","title":"AggregateError \u9519\u8bef\u5bf9\u8c61","text":"<p>ES2021 \u6807\u51c6\u4e4b\u4e2d\uff0c\u4e3a\u4e86\u914d\u5408\u65b0\u589e\u7684<code>Promise.any()</code>\u65b9\u6cd5\uff08\u8be6\u89c1\u300aPromise \u5bf9\u8c61\u300b\u4e00\u7ae0\uff09\uff0c\u8fd8\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u9519\u8bef\u5bf9\u8c61<code>AggregateError</code>\uff0c\u4e5f\u653e\u5728\u8fd9\u4e00\u7ae0\u4ecb\u7ecd\u3002</p> <p>AggregateError \u5728\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u91cc\u9762\uff0c\u5c01\u88c5\u4e86\u591a\u4e2a\u9519\u8bef\u3002\u5982\u679c\u67d0\u4e2a\u5355\u4e00\u64cd\u4f5c\uff0c\u540c\u65f6\u5f15\u53d1\u4e86\u591a\u4e2a\u9519\u8bef\uff0c\u9700\u8981\u540c\u65f6\u629b\u51fa\u8fd9\u4e9b\u9519\u8bef\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u629b\u51fa\u4e00\u4e2a AggregateError \u9519\u8bef\u5bf9\u8c61\uff0c\u628a\u5404\u79cd\u9519\u8bef\u90fd\u653e\u5728\u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\u3002</p> <p>AggregateError \u672c\u8eab\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 AggregateError \u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <pre><code>AggregateError(errors[, message])\n</code></pre> <p><code>AggregateError()</code>\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u3002</p> <ul> <li>errors\uff1a\u6570\u7ec4\uff0c\u5b83\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u3002\u8be5\u53c2\u6570\u662f\u5fc5\u987b\u7684\u3002</li> <li>message\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a AggregateError \u629b\u51fa\u65f6\u7684\u63d0\u793a\u4fe1\u606f\u3002\u8be5\u53c2\u6570\u662f\u53ef\u9009\u7684\u3002</li> </ul> <pre><code>const error = new AggregateError([\n  new Error('ERROR_11112'),\n  new TypeError('First name must be a string'),\n  new RangeError('Transaction value must be at least 1'),\n  new URIError('User profile link must be https'),\n], 'Transaction cannot be processed')\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>AggregateError()</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u6570\u7ec4\u91cc\u9762\uff0c\u4e00\u5171\u6709\u56db\u4e2a\u9519\u8bef\u5b9e\u4f8b\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5b57\u7b26\u4e32\u5219\u662f\u8fd9\u56db\u4e2a\u9519\u8bef\u7684\u4e00\u4e2a\u6574\u4f53\u7684\u63d0\u793a\u3002</p> <p><code>AggregateError</code>\u7684\u5b9e\u4f8b\u5bf9\u8c61\u6709\u4e09\u4e2a\u5c5e\u6027\u3002</p> <ul> <li>name\uff1a\u9519\u8bef\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a\u201cAggregateError\u201d\u3002</li> <li>message\uff1a\u9519\u8bef\u7684\u63d0\u793a\u4fe1\u606f\u3002</li> <li>errors\uff1a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\u3002</p> <pre><code>try {\n  throw new AggregateError([\n    new Error(\"some error\"),\n  ], 'Hello');\n} catch (e) {\n  console.log(e instanceof AggregateError); // true\n  console.log(e.message);                   // \"Hello\"\n  console.log(e.name);                      // \"AggregateError\"\n  console.log(e.errors);                    // [ Error: \"some error\" ]\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/10-object/#error-cause","title":"Error \u5bf9\u8c61\u7684 cause \u5c5e\u6027","text":"<p>Error \u5bf9\u8c61\u7528\u6765\u8868\u793a\u4ee3\u7801\u8fd0\u884c\u65f6\u7684\u5f02\u5e38\u60c5\u51b5\uff0c\u4f46\u662f\u4ece\u8fd9\u4e2a\u5bf9\u8c61\u62ff\u5230\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u6709\u65f6\u5f88\u96be\u89e3\u8bfb\uff0c\u4e5f\u4e0d\u591f\u5145\u5206\u3002ES2022 \u4e3a Error \u5bf9\u8c61\u6dfb\u52a0\u4e86\u4e00\u4e2a<code>cause</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u5728\u751f\u6210\u9519\u8bef\u65f6\uff0c\u6dfb\u52a0\u62a5\u9519\u539f\u56e0\u7684\u63cf\u8ff0\u3002</p> <p>\u5b83\u7684\u7528\u6cd5\u662f<code>new Error()</code>\u751f\u6210 Error \u5b9e\u4f8b\u65f6\uff0c\u7ed9\u51fa\u4e00\u4e2a\u63cf\u8ff0\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u53ef\u4ee5\u8bbe\u7f6e<code>cause</code>\u5c5e\u6027\u3002</p> <pre><code>const actual = new Error('an error!', { cause: 'Error cause' });\nactual.cause; // 'Error cause'\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u751f\u6210 Error \u5b9e\u4f8b\u65f6\uff0c\u4f7f\u7528\u63cf\u8ff0\u5bf9\u8c61\u7ed9\u51fa<code>cause</code>\u5c5e\u6027\uff0c\u5199\u5165\u62a5\u9519\u7684\u539f\u56e0\u3002\u7136\u540e\uff0c\u5c31\u53ef\u4ee5\u4ece\u5b9e\u4f8b\u5bf9\u8c61\u4e0a\u8bfb\u53d6\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <p><code>casue</code>\u5c5e\u6027\u53ef\u4ee5\u653e\u7f6e\u4efb\u610f\u5185\u5bb9\uff0c\u4e0d\u5fc5\u4e00\u5b9a\u662f\u5b57\u7b26\u4e32\u3002</p> <pre><code>try {\n  maybeWorks();\n} catch (err) {\n  throw new Error('maybeWorks failed!', { cause: err });\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>cause</code>\u5c5e\u6027\u653e\u7f6e\u7684\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/","title":"11-\u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5","text":"<p>\u672c\u7ae0\u4ecb\u7ecd Object \u5bf9\u8c61\u7684\u65b0\u589e\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectis","title":"Object.is()","text":"<p>ES5 \u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u76f8\u7b49\uff0c\u53ea\u6709\u4e24\u4e2a\u8fd0\u7b97\u7b26\uff1a\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>==</code>\uff09\u548c\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\u3002\u5b83\u4eec\u90fd\u6709\u7f3a\u70b9\uff0c\u524d\u8005\u4f1a\u81ea\u52a8\u8f6c\u6362\u6570\u636e\u7c7b\u578b\uff0c\u540e\u8005\u7684<code>NaN</code>\u4e0d\u7b49\u4e8e\u81ea\u8eab\uff0c\u4ee5\u53ca<code>+0</code>\u7b49\u4e8e<code>-0</code>\u3002JavaScript \u7f3a\u4e4f\u4e00\u79cd\u8fd0\u7b97\uff0c\u5728\u6240\u6709\u73af\u5883\u4e2d\uff0c\u53ea\u8981\u4e24\u4e2a\u503c\u662f\u4e00\u6837\u7684\uff0c\u5b83\u4eec\u5c31\u5e94\u8be5\u76f8\u7b49\u3002</p> <p>ES6 \u63d0\u51fa\u201cSame-value equality\u201d\uff08\u540c\u503c\u76f8\u7b49\uff09\u7b97\u6cd5\uff0c\u7528\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002<code>Object.is</code>\u5c31\u662f\u90e8\u7f72\u8fd9\u4e2a\u7b97\u6cd5\u7684\u65b0\u65b9\u6cd5\u3002\u5b83\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a\u503c\u662f\u5426\u4e25\u683c\u76f8\u7b49\uff0c\u4e0e\u4e25\u683c\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08===\uff09\u7684\u884c\u4e3a\u57fa\u672c\u4e00\u81f4\u3002</p> <pre><code>Object.is('foo', 'foo')\n// true\nObject.is({}, {})\n// false\n</code></pre> <p>\u4e0d\u540c\u4e4b\u5904\u53ea\u6709\u4e24\u4e2a\uff1a\u4e00\u662f<code>+0</code>\u4e0d\u7b49\u4e8e<code>-0</code>\uff0c\u4e8c\u662f<code>NaN</code>\u7b49\u4e8e\u81ea\u8eab\u3002</p> <pre><code>+0 === -0 //true\nNaN === NaN // false\n\nObject.is(+0, -0) // false\nObject.is(NaN, NaN) // true\n</code></pre> <p>ES5 \u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u90e8\u7f72<code>Object.is</code>\u3002</p> <pre><code>Object.defineProperty(Object, 'is', {\n  value: function(x, y) {\n    if (x === y) {\n      // \u9488\u5bf9+0 \u4e0d\u7b49\u4e8e -0\u7684\u60c5\u51b5\n      return x !== 0 || 1 / x === 1 / y;\n    }\n    // \u9488\u5bf9NaN\u7684\u60c5\u51b5\n    return x !== x &amp;&amp; y !== y;\n  },\n  configurable: true,\n  enumerable: false,\n  writable: true\n});\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectassign","title":"Object.assign()","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p><code>Object.assign()</code>\u65b9\u6cd5\u7528\u4e8e\u5bf9\u8c61\u7684\u5408\u5e76\uff0c\u5c06\u6e90\u5bf9\u8c61\uff08source\uff09\u7684\u6240\u6709\u53ef\u679a\u4e3e\u5c5e\u6027\uff0c\u590d\u5236\u5230\u76ee\u6807\u5bf9\u8c61\uff08target\uff09\u3002</p> <pre><code>const target = { a: 1 };\n\nconst source1 = { b: 2 };\nconst source2 = { c: 3 };\n\nObject.assign(target, source1, source2);\ntarget // {a:1, b:2, c:3}\n</code></pre> <p><code>Object.assign()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u540e\u9762\u7684\u53c2\u6570\u90fd\u662f\u6e90\u5bf9\u8c61\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0e\u6e90\u5bf9\u8c61\u6709\u540c\u540d\u5c5e\u6027\uff0c\u6216\u591a\u4e2a\u6e90\u5bf9\u8c61\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5219\u540e\u9762\u7684\u5c5e\u6027\u4f1a\u8986\u76d6\u524d\u9762\u7684\u5c5e\u6027\u3002</p> <pre><code>const target = { a: 1, b: 1 };\n\nconst source1 = { b: 2, c: 2 };\nconst source2 = { c: 3 };\n\nObject.assign(target, source1, source2);\ntarget // {a:1, b:2, c:3}\n</code></pre> <p>\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\uff0c<code>Object.assign()</code>\u4f1a\u76f4\u63a5\u8fd4\u56de\u8be5\u53c2\u6570\u3002</p> <pre><code>const obj = {a: 1};\nObject.assign(obj) === obj // true\n</code></pre> <p>\u5982\u679c\u8be5\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u5219\u4f1a\u5148\u8f6c\u6210\u5bf9\u8c61\uff0c\u7136\u540e\u8fd4\u56de\u3002</p> <pre><code>typeof Object.assign(2) // \"object\"\n</code></pre> <p>\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u6210\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u5b83\u4eec\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.assign(undefined) // \u62a5\u9519\nObject.assign(null) // \u62a5\u9519\n</code></pre> <p>\u5982\u679c\u975e\u5bf9\u8c61\u53c2\u6570\u51fa\u73b0\u5728\u6e90\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff08\u5373\u975e\u9996\u53c2\u6570\uff09\uff0c\u90a3\u4e48\u5904\u7406\u89c4\u5219\u6709\u6240\u4e0d\u540c\u3002\u9996\u5148\uff0c\u8fd9\u4e9b\u53c2\u6570\u90fd\u4f1a\u8f6c\u6210\u5bf9\u8c61\uff0c\u5982\u679c\u65e0\u6cd5\u8f6c\u6210\u5bf9\u8c61\uff0c\u5c31\u4f1a\u8df3\u8fc7\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c<code>undefined</code>\u548c<code>null</code>\u4e0d\u5728\u9996\u53c2\u6570\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>let obj = {a: 1};\nObject.assign(obj, undefined) === obj // true\nObject.assign(obj, null) === obj // true\n</code></pre> <p>\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff08\u5373\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff09\u4e0d\u5728\u9996\u53c2\u6570\uff0c\u4e5f\u4e0d\u4f1a\u62a5\u9519\u3002\u4f46\u662f\uff0c\u9664\u4e86\u5b57\u7b26\u4e32\u4f1a\u4ee5\u6570\u7ec4\u5f62\u5f0f\uff0c\u62f7\u8d1d\u5165\u76ee\u6807\u5bf9\u8c61\uff0c\u5176\u4ed6\u503c\u90fd\u4e0d\u4f1a\u4ea7\u751f\u6548\u679c\u3002</p> <pre><code>const v1 = 'abc';\nconst v2 = true;\nconst v3 = 10;\n\nconst obj = Object.assign({}, v1, v2, v3);\nconsole.log(obj); // { \"0\": \"a\", \"1\": \"b\", \"2\": \"c\" }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>v1</code>\u3001<code>v2</code>\u3001<code>v3</code>\u5206\u522b\u662f\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u548c\u6570\u503c\uff0c\u7ed3\u679c\u53ea\u6709\u5b57\u7b26\u4e32\u5408\u5165\u76ee\u6807\u5bf9\u8c61\uff08\u4ee5\u5b57\u7b26\u6570\u7ec4\u7684\u5f62\u5f0f\uff09\uff0c\u6570\u503c\u548c\u5e03\u5c14\u503c\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002\u8fd9\u662f\u56e0\u4e3a\u53ea\u6709\u5b57\u7b26\u4e32\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u4f1a\u4ea7\u751f\u53ef\u679a\u4e3e\u5c5e\u6027\u3002</p> <pre><code>Object(true) // {[[PrimitiveValue]]: true}\nObject(10)  //  {[[PrimitiveValue]]: 10}\nObject('abc') // {0: \"a\", 1: \"b\", 2: \"c\", length: 3, [[PrimitiveValue]]: \"abc\"}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5e03\u5c14\u503c\u3001\u6570\u503c\u3001\u5b57\u7b26\u4e32\u5206\u522b\u8f6c\u6210\u5bf9\u5e94\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u53ef\u4ee5\u770b\u5230\u5b83\u4eec\u7684\u539f\u59cb\u503c\u90fd\u5728\u5305\u88c5\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027<code>[[PrimitiveValue]]</code>\u4e0a\u9762\uff0c\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e0d\u4f1a\u88ab<code>Object.assign()</code>\u62f7\u8d1d\u7684\u3002\u53ea\u6709\u5b57\u7b26\u4e32\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u4f1a\u4ea7\u751f\u53ef\u679a\u4e3e\u7684\u5b9e\u4e49\u5c5e\u6027\uff0c\u90a3\u4e9b\u5c5e\u6027\u5219\u4f1a\u88ab\u62f7\u8d1d\u3002</p> <p><code>Object.assign()</code>\u62f7\u8d1d\u7684\u5c5e\u6027\u662f\u6709\u9650\u5236\u7684\uff0c\u53ea\u62f7\u8d1d\u6e90\u5bf9\u8c61\u7684\u81ea\u8eab\u5c5e\u6027\uff08\u4e0d\u62f7\u8d1d\u7ee7\u627f\u5c5e\u6027\uff09\uff0c\u4e5f\u4e0d\u62f7\u8d1d\u4e0d\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\uff08<code>enumerable: false</code>\uff09\u3002</p> <pre><code>Object.assign({b: 'c'},\n  Object.defineProperty({}, 'invisible', {\n    enumerable: false,\n    value: 'hello'\n  })\n)\n// { b: 'c' }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.assign()</code>\u8981\u62f7\u8d1d\u7684\u5bf9\u8c61\u53ea\u6709\u4e00\u4e2a\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027<code>invisible</code>\uff0c\u8fd9\u4e2a\u5c5e\u6027\u5e76\u6ca1\u6709\u88ab\u62f7\u8d1d\u8fdb\u53bb\u3002</p> <p>\u5c5e\u6027\u540d\u4e3a Symbol \u503c\u7684\u5c5e\u6027\uff0c\u4e5f\u4f1a\u88ab<code>Object.assign()</code>\u62f7\u8d1d\u3002</p> <pre><code>Object.assign({ a: 'b' }, { [Symbol('c')]: 'd' })\n// { a: 'b', Symbol(c): 'd' }\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#_2","title":"\u6ce8\u610f\u70b9","text":"<p>\uff081\uff09\u6d45\u62f7\u8d1d</p> <p><code>Object.assign()</code>\u65b9\u6cd5\u5b9e\u884c\u7684\u662f\u6d45\u62f7\u8d1d\uff0c\u800c\u4e0d\u662f\u6df1\u62f7\u8d1d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6e90\u5bf9\u8c61\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\u662f\u5bf9\u8c61\uff0c\u90a3\u4e48\u76ee\u6807\u5bf9\u8c61\u62f7\u8d1d\u5f97\u5230\u7684\u662f\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002</p> <pre><code>const obj1 = {a: {b: 1}};\nconst obj2 = Object.assign({}, obj1);\n\nobj1.a.b = 2;\nobj2.a.b // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6e90\u5bf9\u8c61<code>obj1</code>\u7684<code>a</code>\u5c5e\u6027\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c<code>Object.assign()</code>\u62f7\u8d1d\u5f97\u5230\u7684\u662f\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4efb\u4f55\u53d8\u5316\uff0c\u90fd\u4f1a\u53cd\u6620\u5230\u76ee\u6807\u5bf9\u8c61\u4e0a\u9762\u3002</p> <p>\uff082\uff09\u540c\u540d\u5c5e\u6027\u7684\u66ff\u6362</p> <p>\u5bf9\u4e8e\u8fd9\u79cd\u5d4c\u5957\u7684\u5bf9\u8c61\uff0c\u4e00\u65e6\u9047\u5230\u540c\u540d\u5c5e\u6027\uff0c<code>Object.assign()</code>\u7684\u5904\u7406\u65b9\u6cd5\u662f\u66ff\u6362\uff0c\u800c\u4e0d\u662f\u6dfb\u52a0\u3002</p> <pre><code>const target = { a: { b: 'c', d: 'e' } }\nconst source = { a: { b: 'hello' } }\nObject.assign(target, source)\n// { a: { b: 'hello' } }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>target</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u88ab<code>source</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u6574\u4e2a\u66ff\u6362\u6389\u4e86\uff0c\u800c\u4e0d\u4f1a\u5f97\u5230<code>{ a: { b: 'hello', d: 'e' } }</code>\u7684\u7ed3\u679c\u3002\u8fd9\u901a\u5e38\u4e0d\u662f\u5f00\u53d1\u8005\u60f3\u8981\u7684\uff0c\u9700\u8981\u7279\u522b\u5c0f\u5fc3\u3002</p> <p>\u4e00\u4e9b\u51fd\u6570\u5e93\u63d0\u4f9b<code>Object.assign()</code>\u7684\u5b9a\u5236\u7248\u672c\uff08\u6bd4\u5982 Lodash \u7684<code>_.defaultsDeep()</code>\u65b9\u6cd5\uff09\uff0c\u53ef\u4ee5\u5f97\u5230\u6df1\u62f7\u8d1d\u7684\u5408\u5e76\u3002</p> <p>\uff083\uff09\u6570\u7ec4\u7684\u5904\u7406</p> <p><code>Object.assign()</code>\u53ef\u4ee5\u7528\u6765\u5904\u7406\u6570\u7ec4\uff0c\u4f46\u662f\u4f1a\u628a\u6570\u7ec4\u89c6\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>Object.assign([1, 2, 3], [4, 5])\n// [4, 5, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.assign()</code>\u628a\u6570\u7ec4\u89c6\u4e3a\u5c5e\u6027\u540d\u4e3a 0\u30011\u30012 \u7684\u5bf9\u8c61\uff0c\u56e0\u6b64\u6e90\u6570\u7ec4\u7684 0 \u53f7\u5c5e\u6027<code>4</code>\u8986\u76d6\u4e86\u76ee\u6807\u6570\u7ec4\u7684 0 \u53f7\u5c5e\u6027<code>1</code>\u3002</p> <p>\uff084\uff09\u53d6\u503c\u51fd\u6570\u7684\u5904\u7406</p> <p><code>Object.assign()</code>\u53ea\u80fd\u8fdb\u884c\u503c\u7684\u590d\u5236\uff0c\u5982\u679c\u8981\u590d\u5236\u7684\u503c\u662f\u4e00\u4e2a\u53d6\u503c\u51fd\u6570\uff0c\u90a3\u4e48\u5c06\u6c42\u503c\u540e\u518d\u590d\u5236\u3002</p> <pre><code>const source = {\n  get foo() { return 1 }\n};\nconst target = {};\n\nObject.assign(target, source)\n// { foo: 1 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>source</code>\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u53d6\u503c\u51fd\u6570\uff0c<code>Object.assign()</code>\u4e0d\u4f1a\u590d\u5236\u8fd9\u4e2a\u53d6\u503c\u51fd\u6570\uff0c\u53ea\u4f1a\u62ff\u5230\u503c\u4ee5\u540e\uff0c\u5c06\u8fd9\u4e2a\u503c\u590d\u5236\u8fc7\u53bb\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#_3","title":"\u5e38\u89c1\u7528\u9014","text":"<p><code>Object.assign()</code>\u65b9\u6cd5\u6709\u5f88\u591a\u7528\u5904\u3002</p> <p>\uff081\uff09\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027</p> <pre><code>class Point {\n  constructor(x, y) {\n    Object.assign(this, {x, y});\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u65b9\u6cd5\u901a\u8fc7<code>Object.assign()</code>\u65b9\u6cd5\uff0c\u5c06<code>x</code>\u5c5e\u6027\u548c<code>y</code>\u5c5e\u6027\u6dfb\u52a0\u5230<code>Point</code>\u7c7b\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002</p> <p>\uff082\uff09\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b9\u6cd5</p> <pre><code>Object.assign(SomeClass.prototype, {\n  someMethod(arg1, arg2) {\n    \u00b7\u00b7\u00b7\n  },\n  anotherMethod() {\n    \u00b7\u00b7\u00b7\n  }\n});\n\n// \u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\nSomeClass.prototype.someMethod = function (arg1, arg2) {\n  \u00b7\u00b7\u00b7\n};\nSomeClass.prototype.anotherMethod = function () {\n  \u00b7\u00b7\u00b7\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u4e86\u5bf9\u8c61\u5c5e\u6027\u7684\u7b80\u6d01\u8868\u793a\u6cd5\uff0c\u76f4\u63a5\u5c06\u4e24\u4e2a\u51fd\u6570\u653e\u5728\u5927\u62ec\u53f7\u4e2d\uff0c\u518d\u4f7f\u7528<code>assign()</code>\u65b9\u6cd5\u6dfb\u52a0\u5230<code>SomeClass.prototype</code>\u4e4b\u4e2d\u3002</p> <p>\uff083\uff09\u514b\u9686\u5bf9\u8c61</p> <pre><code>function clone(origin) {\n  return Object.assign({}, origin);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u539f\u59cb\u5bf9\u8c61\u62f7\u8d1d\u5230\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u5c31\u5f97\u5230\u4e86\u539f\u59cb\u5bf9\u8c61\u7684\u514b\u9686\u3002</p> <p>\u4e0d\u8fc7\uff0c\u91c7\u7528\u8fd9\u79cd\u65b9\u6cd5\u514b\u9686\uff0c\u53ea\u80fd\u514b\u9686\u539f\u59cb\u5bf9\u8c61\u81ea\u8eab\u7684\u503c\uff0c\u4e0d\u80fd\u514b\u9686\u5b83\u7ee7\u627f\u7684\u503c\u3002\u5982\u679c\u60f3\u8981\u4fdd\u6301\u7ee7\u627f\u94fe\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>function clone(origin) {\n  let originProto = Object.getPrototypeOf(origin);\n  return Object.assign(Object.create(originProto), origin);\n}\n</code></pre> <p>\uff084\uff09\u5408\u5e76\u591a\u4e2a\u5bf9\u8c61</p> <p>\u5c06\u591a\u4e2a\u5bf9\u8c61\u5408\u5e76\u5230\u67d0\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>const merge =\n  (target, ...sources) =&gt; Object.assign(target, ...sources);\n</code></pre> <p>\u5982\u679c\u5e0c\u671b\u5408\u5e76\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u53ef\u4ee5\u6539\u5199\u4e0a\u9762\u51fd\u6570\uff0c\u5bf9\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u5408\u5e76\u3002</p> <pre><code>const merge =\n  (...sources) =&gt; Object.assign({}, ...sources);\n</code></pre> <p>\uff085\uff09\u4e3a\u5c5e\u6027\u6307\u5b9a\u9ed8\u8ba4\u503c</p> <pre><code>const DEFAULTS = {\n  logLevel: 0,\n  outputFormat: 'html'\n};\n\nfunction processContent(options) {\n  options = Object.assign({}, DEFAULTS, options);\n  console.log(options);\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u662f\u9ed8\u8ba4\u503c\uff0c<code>options</code>\u5bf9\u8c61\u662f\u7528\u6237\u63d0\u4f9b\u7684\u53c2\u6570\u3002<code>Object.assign()</code>\u65b9\u6cd5\u5c06<code>DEFAULTS</code>\u548c<code>options</code>\u5408\u5e76\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u5982\u679c\u4e24\u8005\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5219<code>options</code>\u7684\u5c5e\u6027\u503c\u4f1a\u8986\u76d6<code>DEFAULTS</code>\u7684\u5c5e\u6027\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u7531\u4e8e\u5b58\u5728\u6d45\u62f7\u8d1d\u7684\u95ee\u9898\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u548c<code>options</code>\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u7684\u503c\uff0c\u6700\u597d\u90fd\u662f\u7b80\u5355\u7c7b\u578b\uff0c\u4e0d\u8981\u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002\u5426\u5219\uff0c<code>DEFAULTS</code>\u5bf9\u8c61\u7684\u8be5\u5c5e\u6027\u5f88\u53ef\u80fd\u4e0d\u8d77\u4f5c\u7528\u3002</p> <pre><code>const DEFAULTS = {\n  url: {\n    host: 'example.com',\n    port: 7070\n  },\n};\n\nprocessContent({ url: {port: 8000} })\n// {\n//   url: {port: 8000}\n// }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u539f\u610f\u662f\u5c06<code>url.port</code>\u6539\u6210 8000\uff0c<code>url.host</code>\u4e0d\u53d8\u3002\u5b9e\u9645\u7ed3\u679c\u5374\u662f<code>options.url</code>\u8986\u76d6\u6389<code>DEFAULTS.url</code>\uff0c\u6240\u4ee5<code>url.host</code>\u5c31\u4e0d\u5b58\u5728\u4e86\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectgetownpropertydescriptors","title":"Object.getOwnPropertyDescriptors()","text":"<p>ES5 \u7684<code>Object.getOwnPropertyDescriptor()</code>\u65b9\u6cd5\u4f1a\u8fd4\u56de\u67d0\u4e2a\u5bf9\u8c61\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\uff08descriptor\uff09\u3002ES2017 \u5f15\u5165\u4e86<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u6307\u5b9a\u5bf9\u8c61\u6240\u6709\u81ea\u8eab\u5c5e\u6027\uff08\u975e\u7ee7\u627f\u5c5e\u6027\uff09\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <pre><code>const obj = {\n  foo: 123,\n  get bar() { return 'abc' }\n};\n\nObject.getOwnPropertyDescriptors(obj)\n// { foo:\n//    { value: 123,\n//      writable: true,\n//      enumerable: true,\n//      configurable: true },\n//   bar:\n//    { get: [Function: get bar],\n//      set: undefined,\n//      enumerable: true,\n//      configurable: true } }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u6709\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u90fd\u662f\u8be5\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5bf9\u5e94\u7684\u5c5e\u6027\u503c\u5c31\u662f\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <p>\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0\u975e\u5e38\u5bb9\u6613\u3002</p> <pre><code>function getOwnPropertyDescriptors(obj) {\n  const result = {};\n  for (let key of Reflect.ownKeys(obj)) {\n    result[key] = Object.getOwnPropertyDescriptor(obj, key);\n  }\n  return result;\n}\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u5f15\u5165\u76ee\u7684\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u89e3\u51b3<code>Object.assign()</code>\u65e0\u6cd5\u6b63\u786e\u62f7\u8d1d<code>get</code>\u5c5e\u6027\u548c<code>set</code>\u5c5e\u6027\u7684\u95ee\u9898\u3002</p> <pre><code>const source = {\n  set foo(value) {\n    console.log(value);\n  }\n};\n\nconst target1 = {};\nObject.assign(target1, source);\n\nObject.getOwnPropertyDescriptor(target1, 'foo')\n// { value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>source</code>\u5bf9\u8c61\u7684<code>foo</code>\u5c5e\u6027\u7684\u503c\u662f\u4e00\u4e2a\u8d4b\u503c\u51fd\u6570\uff0c<code>Object.assign</code>\u65b9\u6cd5\u5c06\u8fd9\u4e2a\u5c5e\u6027\u62f7\u8d1d\u7ed9<code>target1</code>\u5bf9\u8c61\uff0c\u7ed3\u679c\u8be5\u5c5e\u6027\u7684\u503c\u53d8\u6210\u4e86<code>undefined</code>\u3002\u8fd9\u662f\u56e0\u4e3a<code>Object.assign</code>\u65b9\u6cd5\u603b\u662f\u62f7\u8d1d\u4e00\u4e2a\u5c5e\u6027\u7684\u503c\uff0c\u800c\u4e0d\u4f1a\u62f7\u8d1d\u5b83\u80cc\u540e\u7684\u8d4b\u503c\u65b9\u6cd5\u6216\u53d6\u503c\u65b9\u6cd5\u3002</p> <p>\u8fd9\u65f6\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u914d\u5408<code>Object.defineProperties()</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6b63\u786e\u62f7\u8d1d\u3002</p> <pre><code>const source = {\n  set foo(value) {\n    console.log(value);\n  }\n};\n\nconst target2 = {};\nObject.defineProperties(target2, Object.getOwnPropertyDescriptors(source));\nObject.getOwnPropertyDescriptor(target2, 'foo')\n// { get: undefined,\n//   set: [Function: set foo],\n//   enumerable: true,\n//   configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u5bf9\u8c61\u5408\u5e76\u7684\u903b\u8f91\u53ef\u4ee5\u5199\u6210\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>const shallowMerge = (target, source) =&gt; Object.defineProperties(\n  target,\n  Object.getOwnPropertyDescriptors(source)\n);\n</code></pre> <p><code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u7684\u53e6\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u914d\u5408<code>Object.create()</code>\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61\u5c5e\u6027\u514b\u9686\u5230\u4e00\u4e2a\u65b0\u5bf9\u8c61\u3002\u8fd9\u5c5e\u4e8e\u6d45\u62f7\u8d1d\u3002</p> <pre><code>const clone = Object.create(Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj));\n\n// \u6216\u8005\n\nconst shallowClone = (obj) =&gt; Object.create(\n  Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj)\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f1a\u514b\u9686\u5bf9\u8c61<code>obj</code>\u3002</p> <p>\u53e6\u5916\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u5bf9\u8c61\u7ee7\u627f\u53e6\u4e00\u4e2a\u5bf9\u8c61\u3002\u4ee5\u524d\uff0c\u7ee7\u627f\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5e38\u5e38\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const obj = {\n  __proto__: prot,\n  foo: 123,\n};\n</code></pre> <p>ES6 \u89c4\u5b9a<code>__proto__</code>\u53ea\u6709\u6d4f\u89c8\u5668\u8981\u90e8\u7f72\uff0c\u5176\u4ed6\u73af\u5883\u4e0d\u7528\u90e8\u7f72\u3002\u5982\u679c\u53bb\u9664<code>__proto__</code>\uff0c\u4e0a\u9762\u4ee3\u7801\u5c31\u8981\u6539\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const obj = Object.create(prot);\nobj.foo = 123;\n\n// \u6216\u8005\n\nconst obj = Object.assign(\n  Object.create(prot),\n  {\n    foo: 123,\n  }\n);\n</code></pre> <p>\u6709\u4e86<code>Object.getOwnPropertyDescriptors()</code>\uff0c\u6211\u4eec\u5c31\u6709\u4e86\u53e6\u4e00\u79cd\u5199\u6cd5\u3002</p> <pre><code>const obj = Object.create(\n  prot,\n  Object.getOwnPropertyDescriptors({\n    foo: 123,\n  })\n);\n</code></pre> <p><code>Object.getOwnPropertyDescriptors()</code>\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0 Mixin\uff08\u6df7\u5165\uff09\u6a21\u5f0f\u3002</p> <pre><code>let mix = (object) =&gt; ({\n  with: (...mixins) =&gt; mixins.reduce(\n    (c, mixin) =&gt; Object.create(\n      c, Object.getOwnPropertyDescriptors(mixin)\n    ), object)\n});\n\n// multiple mixins example\nlet a = {a: 'a'};\nlet b = {b: 'b'};\nlet c = {c: 'c'};\nlet d = mix(c).with(a, b);\n\nd.c // \"c\"\nd.b // \"b\"\nd.a // \"a\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61<code>d</code>\uff0c\u4ee3\u8868\u4e86\u5bf9\u8c61<code>a</code>\u548c<code>b</code>\u88ab\u6df7\u5165\u4e86\u5bf9\u8c61<code>c</code>\u7684\u64cd\u4f5c\u3002</p> <p>\u51fa\u4e8e\u5b8c\u6574\u6027\u7684\u8003\u8651\uff0c<code>Object.getOwnPropertyDescriptors()</code>\u8fdb\u5165\u6807\u51c6\u4ee5\u540e\uff0c\u4ee5\u540e\u8fd8\u4f1a\u65b0\u589e<code>Reflect.getOwnPropertyDescriptors()</code>\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#__proto__objectsetprototypeofobjectgetprototypeof","title":"<code>__proto__</code>\u5c5e\u6027\uff0cObject.setPrototypeOf()\uff0cObject.getPrototypeOf()","text":"<p>JavaScript \u8bed\u8a00\u7684\u5bf9\u8c61\u7ee7\u627f\u662f\u901a\u8fc7\u539f\u578b\u94fe\u5b9e\u73b0\u7684\u3002ES6 \u63d0\u4f9b\u4e86\u66f4\u591a\u539f\u578b\u5bf9\u8c61\u7684\u64cd\u4f5c\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#__proto__","title":"<code>__proto__</code>\u5c5e\u6027","text":"<p><code>__proto__</code>\u5c5e\u6027\uff08\u524d\u540e\u5404\u4e24\u4e2a\u4e0b\u5212\u7ebf\uff09\uff0c\u7528\u6765\u8bfb\u53d6\u6216\u8bbe\u7f6e\u5f53\u524d\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\uff08prototype\uff09\u3002\u76ee\u524d\uff0c\u6240\u6709\u6d4f\u89c8\u5668\uff08\u5305\u62ec IE11\uff09\u90fd\u90e8\u7f72\u4e86\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <pre><code>// es5 \u7684\u5199\u6cd5\nconst obj = {\n  method: function() { ... }\n};\nobj.__proto__ = someOtherObj;\n\n// es6 \u7684\u5199\u6cd5\nvar obj = Object.create(someOtherObj);\nobj.method = function() { ... };\n</code></pre> <p>\u8be5\u5c5e\u6027\u6ca1\u6709\u5199\u5165 ES6 \u7684\u6b63\u6587\uff0c\u800c\u662f\u5199\u5165\u4e86\u9644\u5f55\uff0c\u539f\u56e0\u662f<code>__proto__</code>\u524d\u540e\u7684\u53cc\u4e0b\u5212\u7ebf\uff0c\u8bf4\u660e\u5b83\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u6b63\u5f0f\u7684\u5bf9\u5916\u7684 API\uff0c\u53ea\u662f\u7531\u4e8e\u6d4f\u89c8\u5668\u5e7f\u6cdb\u652f\u6301\uff0c\u624d\u88ab\u52a0\u5165\u4e86 ES6\u3002\u6807\u51c6\u660e\u786e\u89c4\u5b9a\uff0c\u53ea\u6709\u6d4f\u89c8\u5668\u5fc5\u987b\u90e8\u7f72\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5176\u4ed6\u8fd0\u884c\u73af\u5883\u4e0d\u4e00\u5b9a\u9700\u8981\u90e8\u7f72\uff0c\u800c\u4e14\u65b0\u7684\u4ee3\u7801\u6700\u597d\u8ba4\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e0d\u5b58\u5728\u7684\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u4ece\u8bed\u4e49\u7684\u89d2\u5ea6\uff0c\u8fd8\u662f\u4ece\u517c\u5bb9\u6027\u7684\u89d2\u5ea6\uff0c\u90fd\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u662f\u4f7f\u7528\u4e0b\u9762\u7684<code>Object.setPrototypeOf()</code>\uff08\u5199\u64cd\u4f5c\uff09\u3001<code>Object.getPrototypeOf()</code>\uff08\u8bfb\u64cd\u4f5c\uff09\u3001<code>Object.create()</code>\uff08\u751f\u6210\u64cd\u4f5c\uff09\u4ee3\u66ff\u3002</p> <p>\u5b9e\u73b0\u4e0a\uff0c<code>__proto__</code>\u8c03\u7528\u7684\u662f<code>Object.prototype.__proto__</code>\uff0c\u5177\u4f53\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>Object.defineProperty(Object.prototype, '__proto__', {\n  get() {\n    let _thisObj = Object(this);\n    return Object.getPrototypeOf(_thisObj);\n  },\n  set(proto) {\n    if (this === undefined || this === null) {\n      throw new TypeError();\n    }\n    if (!isObject(this)) {\n      return undefined;\n    }\n    if (!isObject(proto)) {\n      return undefined;\n    }\n    let status = Reflect.setPrototypeOf(this, proto);\n    if (!status) {\n      throw new TypeError();\n    }\n  },\n});\n\nfunction isObject(value) {\n  return Object(value) === value;\n}\n</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u672c\u8eab\u90e8\u7f72\u4e86<code>__proto__</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u7684\u503c\u5c31\u662f\u5bf9\u8c61\u7684\u539f\u578b\u3002</p> <pre><code>Object.getPrototypeOf({ __proto__: null })\n// null\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectsetprototypeof","title":"Object.setPrototypeOf()","text":"<p><code>Object.setPrototypeOf</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u4e0e<code>__proto__</code>\u76f8\u540c\uff0c\u7528\u6765\u8bbe\u7f6e\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\uff08prototype\uff09\uff0c\u8fd4\u56de\u53c2\u6570\u5bf9\u8c61\u672c\u8eab\u3002\u5b83\u662f ES6 \u6b63\u5f0f\u63a8\u8350\u7684\u8bbe\u7f6e\u539f\u578b\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <pre><code>// \u683c\u5f0f\nObject.setPrototypeOf(object, prototype)\n\n// \u7528\u6cd5\nconst o = Object.setPrototypeOf({}, null);\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u51fd\u6570\u3002</p> <pre><code>function setPrototypeOf(obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let proto = {};\nlet obj = { x: 10 };\nObject.setPrototypeOf(obj, proto);\n\nproto.y = 20;\nproto.z = 40;\n\nobj.x // 10\nobj.y // 20\nobj.z // 40\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06<code>proto</code>\u5bf9\u8c61\u8bbe\u4e3a<code>obj</code>\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u6240\u4ee5\u4ece<code>obj</code>\u5bf9\u8c61\u53ef\u4ee5\u8bfb\u53d6<code>proto</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u81ea\u52a8\u8f6c\u4e3a\u5bf9\u8c61\u3002\u4f46\u662f\u7531\u4e8e\u8fd4\u56de\u7684\u8fd8\u662f\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002</p> <pre><code>Object.setPrototypeOf(1, {}) === 1 // true\nObject.setPrototypeOf('foo', {}) === 'foo' // true\nObject.setPrototypeOf(true, {}) === true // true\n</code></pre> <p>\u7531\u4e8e<code>undefined</code>\u548c<code>null</code>\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(undefined, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n\nObject.setPrototypeOf(null, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectgetprototypeof","title":"Object.getPrototypeOf()","text":"<p>\u8be5\u65b9\u6cd5\u4e0e<code>Object.setPrototypeOf</code>\u65b9\u6cd5\u914d\u5957\uff0c\u7528\u4e8e\u8bfb\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>Object.getPrototypeOf(obj);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function Rectangle() {\n  // ...\n}\n\nconst rec = new Rectangle();\n\nObject.getPrototypeOf(rec) === Rectangle.prototype\n// true\n\nObject.setPrototypeOf(rec, Object.prototype);\nObject.getPrototypeOf(rec) === Rectangle.prototype\n// false\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u7b49\u540c\u4e8e Object.getPrototypeOf(Number(1))\nObject.getPrototypeOf(1)\n// Number {[[PrimitiveValue]]: 0}\n\n// \u7b49\u540c\u4e8e Object.getPrototypeOf(String('foo'))\nObject.getPrototypeOf('foo')\n// String {length: 0, [[PrimitiveValue]]: \"\"}\n\n// \u7b49\u540c\u4e8e Object.getPrototypeOf(Boolean(true))\nObject.getPrototypeOf(true)\n// Boolean {[[PrimitiveValue]]: false}\n\nObject.getPrototypeOf(1) === Number.prototype // true\nObject.getPrototypeOf('foo') === String.prototype // true\nObject.getPrototypeOf(true) === Boolean.prototype // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u5b83\u4eec\u65e0\u6cd5\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.getPrototypeOf(null)\n// TypeError: Cannot convert undefined or null to object\n\nObject.getPrototypeOf(undefined)\n// TypeError: Cannot convert undefined or null to object\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectkeysobjectvaluesobjectentries","title":"Object.keys()\uff0cObject.values()\uff0cObject.entries()","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectkeys","title":"Object.keys()","text":"<p>ES5 \u5f15\u5165\u4e86<code>Object.keys</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u540d\u3002</p> <pre><code>var obj = { foo: 'bar', baz: 42 };\nObject.keys(obj)\n// [\"foo\", \"baz\"]\n</code></pre> <p>ES2017 \u5f15\u5165\u4e86\u8ddf<code>Object.keys</code>\u914d\u5957\u7684<code>Object.values</code>\u548c<code>Object.entries</code>\uff0c\u4f5c\u4e3a\u904d\u5386\u4e00\u4e2a\u5bf9\u8c61\u7684\u8865\u5145\u624b\u6bb5\uff0c\u4f9b<code>for...of</code>\u5faa\u73af\u4f7f\u7528\u3002</p> <pre><code>let {keys, values, entries} = Object;\nlet obj = { a: 1, b: 2, c: 3 };\n\nfor (let key of keys(obj)) {\n  console.log(key); // 'a', 'b', 'c'\n}\n\nfor (let value of values(obj)) {\n  console.log(value); // 1, 2, 3\n}\n\nfor (let [key, value] of entries(obj)) {\n  console.log([key, value]); // ['a', 1], ['b', 2], ['c', 3]\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectvalues","title":"Object.values()","text":"<p><code>Object.values</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u503c\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nObject.values(obj)\n// [\"bar\", 42]\n</code></pre> <p>\u8fd4\u56de\u6570\u7ec4\u7684\u6210\u5458\u987a\u5e8f\uff0c\u4e0e\u672c\u7ae0\u7684\u300a\u5c5e\u6027\u7684\u904d\u5386\u300b\u90e8\u5206\u4ecb\u7ecd\u7684\u6392\u5217\u89c4\u5219\u4e00\u81f4\u3002</p> <pre><code>const obj = { 100: 'a', 2: 'b', 7: 'c' };\nObject.values(obj)\n// [\"b\", \"c\", \"a\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027\u540d\u4e3a\u6570\u503c\u7684\u5c5e\u6027\uff0c\u662f\u6309\u7167\u6570\u503c\u5927\u5c0f\uff0c\u4ece\u5c0f\u5230\u5927\u904d\u5386\u7684\uff0c\u56e0\u6b64\u8fd4\u56de\u7684\u987a\u5e8f\u662f<code>b</code>\u3001<code>c</code>\u3001<code>a</code>\u3002</p> <p><code>Object.values</code>\u53ea\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u904d\u5386\u5c5e\u6027\u3002</p> <pre><code>const obj = Object.create({}, {p: {value: 42}});\nObject.values(obj) // []\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Object.create</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6dfb\u52a0\u7684\u5bf9\u8c61\u5c5e\u6027\uff08\u5c5e\u6027<code>p</code>\uff09\uff0c\u5982\u679c\u4e0d\u663e\u5f0f\u58f0\u660e\uff0c\u9ed8\u8ba4\u662f\u4e0d\u53ef\u904d\u5386\u7684\uff0c\u56e0\u4e3a<code>p</code>\u7684\u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61\u7684<code>enumerable</code>\u9ed8\u8ba4\u662f<code>false</code>\uff0c<code>Object.values</code>\u4e0d\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u5c5e\u6027\u3002\u53ea\u8981\u628a<code>enumerable</code>\u6539\u6210<code>true</code>\uff0c<code>Object.values</code>\u5c31\u4f1a\u8fd4\u56de\u5c5e\u6027<code>p</code>\u7684\u503c\u3002</p> <pre><code>const obj = Object.create({}, {p:\n  {\n \u00a0 \u00a0value: 42,\n \u00a0 \u00a0enumerable: true\n \u00a0}\n});\nObject.values(obj) // [42]\n</code></pre> <p><code>Object.values</code>\u4f1a\u8fc7\u6ee4\u5c5e\u6027\u540d\u4e3a Symbol \u503c\u7684\u5c5e\u6027\u3002</p> <pre><code>Object.values({ [Symbol()]: 123, foo: 'abc' });\n// ['abc']\n</code></pre> <p>\u5982\u679c<code>Object.values</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f1a\u8fd4\u56de\u5404\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>Object.values('foo')\n// ['f', 'o', 'o']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32\u4f1a\u5148\u8f6c\u6210\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002\u5b57\u7b26\u4e32\u7684\u6bcf\u4e2a\u5b57\u7b26\uff0c\u5c31\u662f\u8be5\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u56e0\u6b64\uff0c<code>Object.values</code>\u8fd4\u56de\u6bcf\u4e2a\u5c5e\u6027\u7684\u952e\u503c\uff0c\u5c31\u662f\u5404\u4e2a\u5b57\u7b26\u7ec4\u6210\u7684\u4e00\u4e2a\u6570\u7ec4\u3002</p> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.values</code>\u4f1a\u5148\u5c06\u5176\u8f6c\u4e3a\u5bf9\u8c61\u3002\u7531\u4e8e\u6570\u503c\u548c\u5e03\u5c14\u503c\u7684\u5305\u88c5\u5bf9\u8c61\uff0c\u90fd\u4e0d\u4f1a\u4e3a\u5b9e\u4f8b\u6dfb\u52a0\u975e\u7ee7\u627f\u7684\u5c5e\u6027\u3002\u6240\u4ee5\uff0c<code>Object.values</code>\u4f1a\u8fd4\u56de\u7a7a\u6570\u7ec4\u3002</p> <pre><code>Object.values(42) // []\nObject.values(true) // []\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectentries","title":"Object.entries()","text":"<p><code>Object.entries()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u53c2\u6570\u5bf9\u8c61\u81ea\u8eab\u7684\uff08\u4e0d\u542b\u7ee7\u627f\u7684\uff09\u6240\u6709\u53ef\u904d\u5386\uff08enumerable\uff09\u5c5e\u6027\u7684\u952e\u503c\u5bf9\u6570\u7ec4\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nObject.entries(obj)\n// [ [\"foo\", \"bar\"], [\"baz\", 42] ]\n</code></pre> <p>\u9664\u4e86\u8fd4\u56de\u503c\u4e0d\u4e00\u6837\uff0c\u8be5\u65b9\u6cd5\u7684\u884c\u4e3a\u4e0e<code>Object.values</code>\u57fa\u672c\u4e00\u81f4\u3002</p> <p>\u5982\u679c\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u8be5\u5c5e\u6027\u4f1a\u88ab\u5ffd\u7565\u3002</p> <pre><code>Object.entries({ [Symbol()]: 123, foo: 'abc' });\n// [ [ 'foo', 'abc' ] ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u5bf9\u8c61\u6709\u4e24\u4e2a\u5c5e\u6027\uff0c<code>Object.entries</code>\u53ea\u8f93\u51fa\u5c5e\u6027\u540d\u975e Symbol \u503c\u7684\u5c5e\u6027\u3002\u5c06\u6765\u53ef\u80fd\u4f1a\u6709<code>Reflect.ownEntries()</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u5bf9\u8c61\u81ea\u8eab\u7684\u6240\u6709\u5c5e\u6027\u3002</p> <p><code>Object.entries</code>\u7684\u57fa\u672c\u7528\u9014\u662f\u904d\u5386\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>let obj = { one: 1, two: 2 };\nfor (let [k, v] of Object.entries(obj)) {\n  console.log(\n    `${JSON.stringify(k)}: ${JSON.stringify(v)}`\n  );\n}\n// \"one\": 1\n// \"two\": 2\n</code></pre> <p><code>Object.entries</code>\u65b9\u6cd5\u7684\u53e6\u4e00\u4e2a\u7528\u5904\u662f\uff0c\u5c06\u5bf9\u8c61\u8f6c\u4e3a\u771f\u6b63\u7684<code>Map</code>\u7ed3\u6784\u3002</p> <pre><code>const obj = { foo: 'bar', baz: 42 };\nconst map = new Map(Object.entries(obj));\nmap // Map { foo: \"bar\", baz: 42 }\n</code></pre> <p>\u81ea\u5df1\u5b9e\u73b0<code>Object.entries</code>\u65b9\u6cd5\uff0c\u975e\u5e38\u7b80\u5355\u3002</p> <pre><code>// Generator\u51fd\u6570\u7684\u7248\u672c\nfunction* entries(obj) {\n  for (let key of Object.keys(obj)) {\n    yield [key, obj[key]];\n  }\n}\n\n// \u975eGenerator\u51fd\u6570\u7684\u7248\u672c\nfunction entries(obj) {\n  let arr = [];\n  for (let key of Object.keys(obj)) {\n    arr.push([key, obj[key]]);\n  }\n  return arr;\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objectfromentries","title":"Object.fromEntries()","text":"<p><code>Object.fromEntries()</code>\u65b9\u6cd5\u662f<code>Object.entries()</code>\u7684\u9006\u64cd\u4f5c\uff0c\u7528\u4e8e\u5c06\u4e00\u4e2a\u952e\u503c\u5bf9\u6570\u7ec4\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>Object.fromEntries([\n  ['foo', 'bar'],\n  ['baz', 42]\n])\n// { foo: \"bar\", baz: 42 }\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u662f\u5c06\u952e\u503c\u5bf9\u7684\u6570\u636e\u7ed3\u6784\u8fd8\u539f\u4e3a\u5bf9\u8c61\uff0c\u56e0\u6b64\u7279\u522b\u9002\u5408\u5c06 Map \u7ed3\u6784\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>// \u4f8b\u4e00\nconst entries = new Map([\n  ['foo', 'bar'],\n  ['baz', 42]\n]);\n\nObject.fromEntries(entries)\n// { foo: \"bar\", baz: 42 }\n\n// \u4f8b\u4e8c\nconst map = new Map().set('foo', true).set('bar', false);\nObject.fromEntries(map)\n// { foo: true, bar: false }\n</code></pre> <p>\u8be5\u65b9\u6cd5\u7684\u4e00\u4e2a\u7528\u5904\u662f\u914d\u5408<code>URLSearchParams</code>\u5bf9\u8c61\uff0c\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>Object.fromEntries(new URLSearchParams('foo=bar&amp;baz=qux'))\n// { foo: \"bar\", baz: \"qux\" }\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/11-object-methods/#objecthasown","title":"Object.hasOwn()","text":"<p>JavaScript \u5bf9\u8c61\u7684\u5c5e\u6027\u5206\u6210\u4e24\u79cd\uff1a\u81ea\u8eab\u7684\u5c5e\u6027\u548c\u7ee7\u627f\u7684\u5c5e\u6027\u3002\u5bf9\u8c61\u5b9e\u4f8b\u6709\u4e00\u4e2a<code>hasOwnProperty()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5224\u65ad\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u4e3a\u539f\u751f\u5c5e\u6027\u3002ES2022 \u5728<code>Object</code>\u5bf9\u8c61\u4e0a\u9762\u65b0\u589e\u4e86\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5<code>Object.hasOwn()</code>\uff0c\u4e5f\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u4e3a\u81ea\u8eab\u7684\u5c5e\u6027\u3002</p> <p><code>Object.hasOwn()</code>\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u6240\u8981\u5224\u65ad\u7684\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5c5e\u6027\u540d\u3002</p> <pre><code>const foo = Object.create({ a: 123 });\nfoo.b = 456;\n\nObject.hasOwn(foo, 'a') // false\nObject.hasOwn(foo, 'b') // true\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5bf9\u8c61<code>foo</code>\u7684\u5c5e\u6027<code>a</code>\u662f\u7ee7\u627f\u5c5e\u6027\uff0c\u5c5e\u6027<code>b</code>\u662f\u539f\u751f\u5c5e\u6027\u3002<code>Object.hasOwn()</code>\u5bf9\u5c5e\u6027<code>a</code>\u8fd4\u56de<code>false</code>\uff0c\u5bf9\u5c5e\u6027<code>b</code>\u8fd4\u56de<code>true</code>\u3002</p> <p><code>Object.hasOwn()</code>\u7684\u4e00\u4e2a\u597d\u5904\u662f\uff0c\u5bf9\u4e8e\u4e0d\u7ee7\u627f<code>Object.prototype</code>\u7684\u5bf9\u8c61\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c<code>hasOwnProperty()</code>\u662f\u4f1a\u62a5\u9519\u7684\u3002</p> <pre><code>const obj = Object.create(null);\n\nobj.hasOwnProperty('foo') // \u62a5\u9519\nObject.hasOwn(obj, 'foo') // false\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>Object.create(null)</code>\u8fd4\u56de\u7684\u5bf9\u8c61<code>obj</code>\u662f\u6ca1\u6709\u539f\u578b\u7684\uff0c\u4e0d\u7ee7\u627f\u4efb\u4f55\u5c5e\u6027\uff0c\u8fd9\u5bfc\u81f4\u8c03\u7528<code>obj.hasOwnProperty()</code>\u4f1a\u62a5\u9519\uff0c\u4f46\u662f<code>Object.hasOwn()</code>\u5c31\u80fd\u6b63\u786e\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/","title":"12-\u8fd0\u7b97\u7b26\u7684\u6269\u5c55","text":"<p>\u672c\u7ae0\u4ecb\u7ecd ES6 \u540e\u7eed\u6807\u51c6\u6dfb\u52a0\u7684\u4e00\u4e9b\u8fd0\u7b97\u7b26\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/#_1","title":"\u6307\u6570\u8fd0\u7b97\u7b26","text":"<p>ES2016 \u65b0\u589e\u4e86\u4e00\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\uff08<code>**</code>\uff09\u3002</p> <pre><code>2 ** 2 // 4\n2 ** 3 // 8\n</code></pre> <p>\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u7684\u4e00\u4e2a\u7279\u70b9\u662f\u53f3\u7ed3\u5408\uff0c\u800c\u4e0d\u662f\u5e38\u89c1\u7684\u5de6\u7ed3\u5408\u3002\u591a\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\u8fde\u7528\u65f6\uff0c\u662f\u4ece\u6700\u53f3\u8fb9\u5f00\u59cb\u8ba1\u7b97\u7684\u3002</p> <pre><code>// \u76f8\u5f53\u4e8e 2 ** (3 ** 2)\n2 ** 3 ** 2\n// 512\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u8ba1\u7b97\u7684\u662f\u7b2c\u4e8c\u4e2a\u6307\u6570\u8fd0\u7b97\u7b26\uff0c\u800c\u4e0d\u662f\u7b2c\u4e00\u4e2a\u3002</p> <p>\u6307\u6570\u8fd0\u7b97\u7b26\u53ef\u4ee5\u4e0e\u7b49\u53f7\u7ed3\u5408\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\uff08<code>**=</code>\uff09\u3002</p> <pre><code>let a = 1.5;\na **= 2;\n// \u7b49\u540c\u4e8e a = a * a;\n\nlet b = 4;\nb **= 3;\n// \u7b49\u540c\u4e8e b = b * b * b;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/#_2","title":"\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26","text":"<p>\u7f16\u7a0b\u5b9e\u52a1\u4e2d\uff0c\u5982\u679c\u8bfb\u53d6\u5bf9\u8c61\u5185\u90e8\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u5f80\u5f80\u9700\u8981\u5224\u65ad\u4e00\u4e0b\uff0c\u5c5e\u6027\u7684\u4e0a\u5c42\u5bf9\u8c61\u662f\u5426\u5b58\u5728\u3002\u6bd4\u5982\uff0c\u8bfb\u53d6<code>message.body.user.firstName</code>\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5b89\u5168\u7684\u5199\u6cd5\u662f\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>// \u9519\u8bef\u7684\u5199\u6cd5\nconst  firstName = message.body.user.firstName || 'default';\n\n// \u6b63\u786e\u7684\u5199\u6cd5\nconst firstName = (message\n  &amp;&amp; message.body\n  &amp;&amp; message.body.user\n  &amp;&amp; message.body.user.firstName) || 'default';\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>firstName</code>\u5c5e\u6027\u5728\u5bf9\u8c61\u7684\u7b2c\u56db\u5c42\uff0c\u6240\u4ee5\u9700\u8981\u5224\u65ad\u56db\u6b21\uff0c\u6bcf\u4e00\u5c42\u662f\u5426\u6709\u503c\u3002</p> <p>\u4e09\u5143\u8fd0\u7b97\u7b26<code>?:</code>\u4e5f\u5e38\u7528\u4e8e\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5b58\u5728\u3002</p> <pre><code>const fooInput = myForm.querySelector('input[name=foo]')\nconst fooValue = fooInput ? fooInput.value : undefined\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u5fc5\u987b\u5148\u5224\u65ad<code>fooInput</code>\u662f\u5426\u5b58\u5728\uff0c\u624d\u80fd\u8bfb\u53d6<code>fooInput.value</code>\u3002</p> <p>\u8fd9\u6837\u7684\u5c42\u5c42\u5224\u65ad\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u6b64 ES2020 \u5f15\u5165\u4e86\u201c\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26\u201d\uff08optional chaining operator\uff09<code>?.</code>\uff0c\u7b80\u5316\u4e0a\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const firstName = message?.body?.user?.firstName || 'default';\nconst fooValue = myForm.querySelector('input[name=foo]')?.value\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u4e86<code>?.</code>\u8fd0\u7b97\u7b26\uff0c\u76f4\u63a5\u5728\u94fe\u5f0f\u8c03\u7528\u7684\u65f6\u5019\u5224\u65ad\uff0c\u5de6\u4fa7\u7684\u5bf9\u8c61\u662f\u5426\u4e3a<code>null</code>\u6216<code>undefined</code>\u3002\u5982\u679c\u662f\u7684\uff0c\u5c31\u4e0d\u518d\u5f80\u4e0b\u8fd0\u7b97\uff0c\u800c\u662f\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u4e0b\u9762\u662f\u5224\u65ad\u5bf9\u8c61\u65b9\u6cd5\u662f\u5426\u5b58\u5728\uff0c\u5982\u679c\u5b58\u5728\u5c31\u7acb\u5373\u6267\u884c\u7684\u4f8b\u5b50\u3002</p> <pre><code>iterator.return?.()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>iterator.return</code>\u5982\u679c\u6709\u5b9a\u4e49\uff0c\u5c31\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5426\u5219<code>iterator.return</code>\u76f4\u63a5\u8fd4\u56de<code>undefined</code>\uff0c\u4e0d\u518d\u6267\u884c<code>?.</code>\u540e\u9762\u7684\u90e8\u5206\u3002</p> <p>\u5bf9\u4e8e\u90a3\u4e9b\u53ef\u80fd\u6ca1\u6709\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u5c24\u5176\u6709\u7528\u3002</p> <pre><code>if (myForm.checkValidity?.() === false) {\n  // \u8868\u5355\u6821\u9a8c\u5931\u8d25\n  return;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8001\u5f0f\u6d4f\u89c8\u5668\u7684\u8868\u5355\u5bf9\u8c61\u53ef\u80fd\u6ca1\u6709<code>checkValidity()</code>\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8fd9\u65f6<code>?.</code>\u8fd0\u7b97\u7b26\u5c31\u4f1a\u8fd4\u56de<code>undefined</code>\uff0c\u5224\u65ad\u8bed\u53e5\u5c31\u53d8\u6210\u4e86<code>undefined === false</code>\uff0c\u6240\u4ee5\u5c31\u4f1a\u8df3\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <p>\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26<code>?.</code>\u6709\u4e09\u79cd\u5199\u6cd5\u3002</p> <ul> <li><code>obj?.prop</code> // \u5bf9\u8c61\u5c5e\u6027\u662f\u5426\u5b58\u5728</li> <li><code>obj?.[expr]</code> // \u540c\u4e0a</li> <li><code>func?.(...args)</code> // \u51fd\u6570\u6216\u5bf9\u8c61\u65b9\u6cd5\u662f\u5426\u5b58\u5728</li> </ul> <p>\u4e0b\u9762\u662f<code>obj?.[expr]</code>\u7528\u6cd5\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let hex = \"#C0FFEE\".match(/#([A-Z]+)/i)?.[1];\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u5b57\u7b26\u4e32\u7684<code>match()</code>\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709\u53d1\u73b0\u5339\u914d\u4f1a\u8fd4\u56de<code>null</code>\uff0c\u5982\u679c\u53d1\u73b0\u5339\u914d\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c<code>?.</code>\u8fd0\u7b97\u7b26\u8d77\u5230\u4e86\u5224\u65ad\u4f5c\u7528\u3002</p> <p>\u4e0b\u9762\u662f<code>?.</code>\u8fd0\u7b97\u7b26\u5e38\u89c1\u5f62\u5f0f\uff0c\u4ee5\u53ca\u4e0d\u4f7f\u7528\u8be5\u8fd0\u7b97\u7b26\u65f6\u7684\u7b49\u4ef7\u5f62\u5f0f\u3002</p> <pre><code>a?.b\n// \u7b49\u540c\u4e8e\na == null ? undefined : a.b\n\na?.[x]\n// \u7b49\u540c\u4e8e\na == null ? undefined : a[x]\n\na?.b()\n// \u7b49\u540c\u4e8e\na == null ? undefined : a.b()\n\na?.()\n// \u7b49\u540c\u4e8e\na == null ? undefined : a()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7279\u522b\u6ce8\u610f\u540e\u4e24\u79cd\u5f62\u5f0f\uff0c\u5982\u679c<code>a?.b()</code>\u548c<code>a?.()</code>\u3002\u5982\u679c<code>a?.b()</code>\u91cc\u9762\u7684<code>a.b</code>\u6709\u503c\uff0c\u4f46\u4e0d\u662f\u51fd\u6570\uff0c\u4e0d\u53ef\u8c03\u7528\uff0c\u90a3\u4e48<code>a?.b()</code>\u662f\u4f1a\u62a5\u9519\u7684\u3002<code>a?.()</code>\u4e5f\u662f\u5982\u6b64\uff0c\u5982\u679c<code>a</code>\u4e0d\u662f<code>null</code>\u6216<code>undefined</code>\uff0c\u4f46\u4e5f\u4e0d\u662f\u51fd\u6570\uff0c\u90a3\u4e48<code>a?.()</code>\u4f1a\u62a5\u9519\u3002</p> <p>\u4f7f\u7528\u8fd9\u4e2a\u8fd0\u7b97\u7b26\uff0c\u6709\u51e0\u4e2a\u6ce8\u610f\u70b9\u3002</p> <p>\uff081\uff09\u77ed\u8def\u673a\u5236</p> <p>\u672c\u8d28\u4e0a\uff0c<code>?.</code>\u8fd0\u7b97\u7b26\u76f8\u5f53\u4e8e\u4e00\u79cd\u77ed\u8def\u673a\u5236\uff0c\u53ea\u8981\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u4e0d\u518d\u5f80\u4e0b\u6267\u884c\u3002</p> <pre><code>a?.[++x]\n// \u7b49\u540c\u4e8e\na == null ? undefined : a[++x]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>a</code>\u662f<code>undefined</code>\u6216<code>null</code>\uff0c\u90a3\u4e48<code>x</code>\u4e0d\u4f1a\u8fdb\u884c\u9012\u589e\u8fd0\u7b97\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26\u4e00\u65e6\u4e3a\u771f\uff0c\u53f3\u4fa7\u7684\u8868\u8fbe\u5f0f\u5c31\u4e0d\u518d\u6c42\u503c\u3002</p> <p>\uff082\uff09\u62ec\u53f7\u7684\u5f71\u54cd</p> <p>\u5982\u679c\u5c5e\u6027\u94fe\u6709\u5706\u62ec\u53f7\uff0c\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26\u5bf9\u5706\u62ec\u53f7\u5916\u90e8\u6ca1\u6709\u5f71\u54cd\uff0c\u53ea\u5bf9\u5706\u62ec\u53f7\u5185\u90e8\u6709\u5f71\u54cd\u3002</p> <pre><code>(a?.b).c\n// \u7b49\u4ef7\u4e8e\n(a == null ? undefined : a.b).c\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>?.</code>\u5bf9\u5706\u62ec\u53f7\u5916\u90e8\u6ca1\u6709\u5f71\u54cd\uff0c\u4e0d\u7ba1<code>a</code>\u5bf9\u8c61\u662f\u5426\u5b58\u5728\uff0c\u5706\u62ec\u53f7\u540e\u9762\u7684<code>.c</code>\u603b\u662f\u4f1a\u6267\u884c\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u4f7f\u7528<code>?.</code>\u8fd0\u7b97\u7b26\u7684\u573a\u5408\uff0c\u4e0d\u5e94\u8be5\u4f7f\u7528\u5706\u62ec\u53f7\u3002</p> <p>\uff083\uff09\u62a5\u9519\u573a\u5408</p> <p>\u4ee5\u4e0b\u5199\u6cd5\u662f\u7981\u6b62\u7684\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u6784\u9020\u51fd\u6570\nnew a?.()\nnew a?.b()\n\n// \u94fe\u5224\u65ad\u8fd0\u7b97\u7b26\u7684\u53f3\u4fa7\u6709\u6a21\u677f\u5b57\u7b26\u4e32\na?.`{b}`\na?.b`{c}`\n\n// \u94fe\u5224\u65ad\u8fd0\u7b97\u7b26\u7684\u5de6\u4fa7\u662f super\nsuper?.()\nsuper?.foo\n\n// \u94fe\u8fd0\u7b97\u7b26\u7528\u4e8e\u8d4b\u503c\u8fd0\u7b97\u7b26\u5de6\u4fa7\na?.b = c\n</code></pre> <p>\uff084\uff09\u53f3\u4fa7\u4e0d\u5f97\u4e3a\u5341\u8fdb\u5236\u6570\u503c</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u517c\u5bb9\u4ee5\u524d\u7684\u4ee3\u7801\uff0c\u5141\u8bb8<code>foo?.3:0</code>\u88ab\u89e3\u6790\u6210<code>foo ? .3 : 0</code>\uff0c\u56e0\u6b64\u89c4\u5b9a\u5982\u679c<code>?.</code>\u540e\u9762\u7d27\u8ddf\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\uff0c\u90a3\u4e48<code>?.</code>\u4e0d\u518d\u88ab\u770b\u6210\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u8fd0\u7b97\u7b26\uff0c\u800c\u4f1a\u6309\u7167\u4e09\u5143\u8fd0\u7b97\u7b26\u8fdb\u884c\u5904\u7406\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u90a3\u4e2a\u5c0f\u6570\u70b9\u4f1a\u5f52\u5c5e\u4e8e\u540e\u9762\u7684\u5341\u8fdb\u5236\u6570\u5b57\uff0c\u5f62\u6210\u4e00\u4e2a\u5c0f\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/#null","title":"Null \u5224\u65ad\u8fd0\u7b97\u7b26","text":"<p>\u8bfb\u53d6\u5bf9\u8c61\u5c5e\u6027\u7684\u65f6\u5019\uff0c\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u7684\u503c\u662f<code>null</code>\u6216<code>undefined</code>\uff0c\u6709\u65f6\u5019\u9700\u8981\u4e3a\u5b83\u4eec\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002\u5e38\u89c1\u505a\u6cd5\u662f\u901a\u8fc7<code>||</code>\u8fd0\u7b97\u7b26\u6307\u5b9a\u9ed8\u8ba4\u503c\u3002</p> <pre><code>const headerText = response.settings.headerText || 'Hello, world!';\nconst animationDuration = response.settings.animationDuration || 300;\nconst showSplashScreen = response.settings.showSplashScreen || true;\n</code></pre> <p>\u4e0a\u9762\u7684\u4e09\u884c\u4ee3\u7801\u90fd\u901a\u8fc7<code>||</code>\u8fd0\u7b97\u7b26\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u4f46\u662f\u8fd9\u6837\u5199\u662f\u9519\u7684\u3002\u5f00\u53d1\u8005\u7684\u539f\u610f\u662f\uff0c\u53ea\u8981\u5c5e\u6027\u7684\u503c\u4e3a<code>null</code>\u6216<code>undefined</code>\uff0c\u9ed8\u8ba4\u503c\u5c31\u4f1a\u751f\u6548\uff0c\u4f46\u662f\u5c5e\u6027\u7684\u503c\u5982\u679c\u4e3a\u7a7a\u5b57\u7b26\u4e32\u6216<code>false</code>\u6216<code>0</code>\uff0c\u9ed8\u8ba4\u503c\u4e5f\u4f1a\u751f\u6548\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0cES2020 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684 Null \u5224\u65ad\u8fd0\u7b97\u7b26<code>??</code>\u3002\u5b83\u7684\u884c\u4e3a\u7c7b\u4f3c<code>||</code>\uff0c\u4f46\u662f\u53ea\u6709\u8fd0\u7b97\u7b26\u5de6\u4fa7\u7684\u503c\u4e3a<code>null</code>\u6216<code>undefined</code>\u65f6\uff0c\u624d\u4f1a\u8fd4\u56de\u53f3\u4fa7\u7684\u503c\u3002</p> <pre><code>const headerText = response.settings.headerText ?? 'Hello, world!';\nconst animationDuration = response.settings.animationDuration ?? 300;\nconst showSplashScreen = response.settings.showSplashScreen ?? true;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9ed8\u8ba4\u503c\u53ea\u6709\u5728\u5de6\u4fa7\u5c5e\u6027\u503c\u4e3a<code>null</code>\u6216<code>undefined</code>\u65f6\uff0c\u624d\u4f1a\u751f\u6548\u3002</p> <p>\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u7684\u4e00\u4e2a\u76ee\u7684\uff0c\u5c31\u662f\u8ddf\u94fe\u5224\u65ad\u8fd0\u7b97\u7b26<code>?.</code>\u914d\u5408\u4f7f\u7528\uff0c\u4e3a<code>null</code>\u6216<code>undefined</code>\u7684\u503c\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002</p> <pre><code>const animationDuration = response.settings?.animationDuration ?? 300;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>response.settings</code>\u662f<code>null</code>\u6216<code>undefined</code>\uff0c\u6216\u8005<code>response.settings.animationDuration</code>\u662f<code>null</code>\u6216<code>undefined</code>\uff0c\u5c31\u4f1a\u8fd4\u56de\u9ed8\u8ba4\u503c300\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e00\u884c\u4ee3\u7801\u5305\u62ec\u4e86\u4e24\u7ea7\u5c5e\u6027\u7684\u5224\u65ad\u3002</p> <p>\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u5f88\u9002\u5408\u5224\u65ad\u51fd\u6570\u53c2\u6570\u662f\u5426\u8d4b\u503c\u3002</p> <pre><code>function Component(props) {\n  const enable = props.enabled ?? true;\n  // \u2026\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5224\u65ad<code>props</code>\u53c2\u6570\u7684<code>enabled</code>\u5c5e\u6027\u662f\u5426\u8d4b\u503c\uff0c\u57fa\u672c\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>function Component(props) {\n  const {\n    enabled: enable = true,\n  } = props;\n  // \u2026\n}\n</code></pre> <p><code>??</code>\u672c\u8d28\u4e0a\u662f\u903b\u8f91\u8fd0\u7b97\uff0c\u5b83\u4e0e\u5176\u4ed6\u4e24\u4e2a\u903b\u8f91\u8fd0\u7b97\u7b26<code>&amp;&amp;</code>\u548c<code>||</code>\u6709\u4e00\u4e2a\u4f18\u5148\u7ea7\u95ee\u9898\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u4f18\u5148\u7ea7\u5230\u5e95\u5b70\u9ad8\u5b70\u4f4e\u3002\u4f18\u5148\u7ea7\u7684\u4e0d\u540c\uff0c\u5f80\u5f80\u4f1a\u5bfc\u81f4\u903b\u8f91\u8fd0\u7b97\u7684\u7ed3\u679c\u4e0d\u540c\u3002</p> <p>\u73b0\u5728\u7684\u89c4\u5219\u662f\uff0c\u5982\u679c\u591a\u4e2a\u903b\u8f91\u8fd0\u7b97\u7b26\u4e00\u8d77\u4f7f\u7528\uff0c\u5fc5\u987b\u7528\u62ec\u53f7\u8868\u660e\u4f18\u5148\u7ea7\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nlhs &amp;&amp; middle ?? rhs\nlhs ?? middle &amp;&amp; rhs\nlhs || middle ?? rhs\nlhs ?? middle || rhs\n</code></pre> <p>\u4e0a\u9762\u56db\u4e2a\u8868\u8fbe\u5f0f\u90fd\u4f1a\u62a5\u9519\uff0c\u5fc5\u987b\u52a0\u5165\u8868\u660e\u4f18\u5148\u7ea7\u7684\u62ec\u53f7\u3002</p> <pre><code>(lhs &amp;&amp; middle) ?? rhs;\nlhs &amp;&amp; (middle ?? rhs);\n\n(lhs ?? middle) &amp;&amp; rhs;\nlhs ?? (middle &amp;&amp; rhs);\n\n(lhs || middle) ?? rhs;\nlhs || (middle ?? rhs);\n\n(lhs ?? middle) || rhs;\nlhs ?? (middle || rhs);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/#_3","title":"\u903b\u8f91\u8d4b\u503c\u8fd0\u7b97\u7b26","text":"<p>ES2021 \u5f15\u5165\u4e86\u4e09\u4e2a\u65b0\u7684\u903b\u8f91\u8d4b\u503c\u8fd0\u7b97\u7b26\uff08logical assignment operators\uff09\uff0c\u5c06\u903b\u8f91\u8fd0\u7b97\u7b26\u4e0e\u8d4b\u503c\u8fd0\u7b97\u7b26\u8fdb\u884c\u7ed3\u5408\u3002</p> <pre><code>// \u6216\u8d4b\u503c\u8fd0\u7b97\u7b26\nx ||= y\n// \u7b49\u540c\u4e8e\nx || (x = y)\n\n// \u4e0e\u8d4b\u503c\u8fd0\u7b97\u7b26\nx &amp;&amp;= y\n// \u7b49\u540c\u4e8e\nx &amp;&amp; (x = y)\n\n// Null \u8d4b\u503c\u8fd0\u7b97\u7b26\nx ??= y\n// \u7b49\u540c\u4e8e\nx ?? (x = y)\n</code></pre> <p>\u8fd9\u4e09\u4e2a\u8fd0\u7b97\u7b26<code>||=</code>\u3001<code>&amp;&amp;=</code>\u3001<code>??=</code>\u76f8\u5f53\u4e8e\u5148\u8fdb\u884c\u903b\u8f91\u8fd0\u7b97\uff0c\u7136\u540e\u6839\u636e\u8fd0\u7b97\u7ed3\u679c\uff0c\u518d\u89c6\u60c5\u51b5\u8fdb\u884c\u8d4b\u503c\u8fd0\u7b97\u3002</p> <p>\u5b83\u4eec\u7684\u4e00\u4e2a\u7528\u9014\u662f\uff0c\u4e3a\u53d8\u91cf\u6216\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002</p> <pre><code>// \u8001\u7684\u5199\u6cd5\nuser.id = user.id || 1;\n\n// \u65b0\u7684\u5199\u6cd5\nuser.id ||= 1;\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>user.id</code>\u5c5e\u6027\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u8bbe\u4e3a<code>1</code>\uff0c\u65b0\u7684\u5199\u6cd5\u6bd4\u8001\u7684\u5199\u6cd5\u66f4\u7d27\u51d1\u4e00\u4e9b\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function example(opts) {\n  opts.foo = opts.foo ?? 'bar';\n  opts.baz ?? (opts.baz = 'qux');\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u53c2\u6570\u5bf9\u8c61<code>opts</code>\u5982\u679c\u4e0d\u5b58\u5728\u5c5e\u6027<code>foo</code>\u548c\u5c5e\u6027<code>baz</code>\uff0c\u5219\u4e3a\u8fd9\u4e24\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\u6709\u4e86\u201cNull \u8d4b\u503c\u8fd0\u7b97\u7b26\u201d\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u7edf\u4e00\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>function example(opts) {\n  opts.foo ??= 'bar';\n  opts.baz ??= 'qux';\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/12-operator/#_4","title":"<code>#!</code>\u547d\u4ee4","text":"<p>Unix \u7684\u547d\u4ee4\u884c\u811a\u672c\u90fd\u652f\u6301<code>#!</code>\u547d\u4ee4\uff0c\u53c8\u79f0\u4e3a Shebang \u6216 Hashbang\u3002\u8fd9\u4e2a\u547d\u4ee4\u653e\u5728\u811a\u672c\u7684\u7b2c\u4e00\u884c\uff0c\u7528\u6765\u6307\u5b9a\u811a\u672c\u7684\u6267\u884c\u5668\u3002</p> <p>\u6bd4\u5982 Bash \u811a\u672c\u7684\u7b2c\u4e00\u884c\u3002</p> <pre><code>#!/bin/sh\n</code></pre> <p>Python \u811a\u672c\u7684\u7b2c\u4e00\u884c\u3002</p> <pre><code>#!/usr/bin/env python\n</code></pre> <p>ES2023 \u4e3a JavaScript \u811a\u672c\u5f15\u5165\u4e86<code>#!</code>\u547d\u4ee4\uff0c\u5199\u5728\u811a\u672c\u6587\u4ef6\u6216\u8005\u6a21\u5757\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u3002</p> <pre><code>// \u5199\u5728\u811a\u672c\u6587\u4ef6\u7b2c\u4e00\u884c\n#!/usr/bin/env node\n'use strict';\nconsole.log(1);\n\n// \u5199\u5728\u6a21\u5757\u6587\u4ef6\u7b2c\u4e00\u884c\n#!/usr/bin/env node\nexport {};\nconsole.log(1);\n</code></pre> <p>\u6709\u4e86\u8fd9\u4e00\u884c\u4ee5\u540e\uff0cUnix \u547d\u4ee4\u884c\u5c31\u53ef\u4ee5\u76f4\u63a5\u6267\u884c\u811a\u672c\u3002</p> <pre><code># \u4ee5\u524d\u6267\u884c\u811a\u672c\u7684\u65b9\u5f0f\n$ node hello.js\n\n# hashbang \u7684\u65b9\u5f0f\n$ ./hello.js\n</code></pre> <p>\u5bf9\u4e8e JavaScript \u5f15\u64ce\u6765\u8bf4\uff0c\u4f1a\u628a<code>#!</code>\u7406\u89e3\u6210\u6ce8\u91ca\uff0c\u5ffd\u7565\u6389\u8fd9\u4e00\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/","title":"13-Symbol","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#_1","title":"\u6982\u8ff0","text":"<p>ES5 \u7684\u5bf9\u8c61\u5c5e\u6027\u540d\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u5bb9\u6613\u9020\u6210\u5c5e\u6027\u540d\u7684\u51b2\u7a81\u3002\u6bd4\u5982\uff0c\u4f60\u4f7f\u7528\u4e86\u4e00\u4e2a\u4ed6\u4eba\u63d0\u4f9b\u7684\u5bf9\u8c61\uff0c\u4f46\u53c8\u60f3\u4e3a\u8fd9\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u65b9\u6cd5\uff08mixin \u6a21\u5f0f\uff09\uff0c\u65b0\u65b9\u6cd5\u7684\u540d\u5b57\u5c31\u6709\u53ef\u80fd\u4e0e\u73b0\u6709\u65b9\u6cd5\u4ea7\u751f\u51b2\u7a81\u3002\u5982\u679c\u6709\u4e00\u79cd\u673a\u5236\uff0c\u4fdd\u8bc1\u6bcf\u4e2a\u5c5e\u6027\u7684\u540d\u5b57\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\u5c31\u597d\u4e86\uff0c\u8fd9\u6837\u5c31\u4ece\u6839\u672c\u4e0a\u9632\u6b62\u5c5e\u6027\u540d\u7684\u51b2\u7a81\u3002\u8fd9\u5c31\u662f ES6 \u5f15\u5165<code>Symbol</code>\u7684\u539f\u56e0\u3002</p> <p>ES6 \u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684\u539f\u59cb\u6570\u636e\u7c7b\u578b<code>Symbol</code>\uff0c\u8868\u793a\u72ec\u4e00\u65e0\u4e8c\u7684\u503c\u3002\u5b83\u5c5e\u4e8e JavaScript \u8bed\u8a00\u7684\u539f\u751f\u6570\u636e\u7c7b\u578b\u4e4b\u4e00\uff0c\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u662f\uff1a<code>undefined</code>\u3001<code>null</code>\u3001\u5e03\u5c14\u503c\uff08Boolean\uff09\u3001\u5b57\u7b26\u4e32\uff08String\uff09\u3001\u6570\u503c\uff08Number\uff09\u3001\u5927\u6574\u6570\uff08BigInt\uff09\u3001\u5bf9\u8c61\uff08Object\uff09\u3002</p> <p>Symbol \u503c\u901a\u8fc7<code>Symbol()</code>\u51fd\u6570\u751f\u6210\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u73b0\u5728\u53ef\u4ee5\u6709\u4e24\u79cd\u7c7b\u578b\uff0c\u4e00\u79cd\u662f\u539f\u6765\u5c31\u6709\u7684\u5b57\u7b26\u4e32\uff0c\u53e6\u4e00\u79cd\u5c31\u662f\u65b0\u589e\u7684 Symbol \u7c7b\u578b\u3002\u51e1\u662f\u5c5e\u6027\u540d\u5c5e\u4e8e Symbol \u7c7b\u578b\uff0c\u5c31\u90fd\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u4f1a\u4e0e\u5176\u4ed6\u5c5e\u6027\u540d\u4ea7\u751f\u51b2\u7a81\u3002</p> <pre><code>let s = Symbol();\n\ntypeof s\n// \"symbol\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>s</code>\u5c31\u662f\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u503c\u3002<code>typeof</code>\u8fd0\u7b97\u7b26\u7684\u7ed3\u679c\uff0c\u8868\u660e\u53d8\u91cf<code>s</code>\u662f Symbol \u6570\u636e\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u5b57\u7b26\u4e32\u4e4b\u7c7b\u7684\u5176\u4ed6\u7c7b\u578b\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol()</code>\u51fd\u6570\u524d\u4e0d\u80fd\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u56e0\u4e3a\u751f\u6210\u7684 Symbol \u662f\u4e00\u4e2a\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u4e0d\u662f\u5bf9\u8c61\uff0c\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528<code>new</code>\u547d\u4ee4\u6765\u8c03\u7528\u3002\u53e6\u5916\uff0c\u7531\u4e8e Symbol \u503c\u4e0d\u662f\u5bf9\u8c61\uff0c\u6240\u4ee5\u4e5f\u4e0d\u80fd\u6dfb\u52a0\u5c5e\u6027\u3002\u57fa\u672c\u4e0a\uff0c\u5b83\u662f\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u5b57\u7b26\u4e32\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p><code>Symbol()</code>\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u8868\u793a\u5bf9 Symbol \u5b9e\u4f8b\u7684\u63cf\u8ff0\u3002\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u5728\u63a7\u5236\u53f0\u663e\u793a\uff0c\u6216\u8005\u8f6c\u4e3a\u5b57\u7b26\u4e32\u65f6\uff0c\u6bd4\u8f83\u5bb9\u6613\u533a\u5206\u3002</p> <pre><code>let s1 = Symbol('foo');\nlet s2 = Symbol('bar');\n\ns1 // Symbol(foo)\ns2 // Symbol(bar)\n\ns1.toString() // \"Symbol(foo)\"\ns2.toString() // \"Symbol(bar)\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u662f\u4e24\u4e2a Symbol \u503c\u3002\u5982\u679c\u4e0d\u52a0\u53c2\u6570\uff0c\u5b83\u4eec\u5728\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u90fd\u662f<code>Symbol()</code>\uff0c\u4e0d\u5229\u4e8e\u533a\u5206\u3002\u6709\u4e86\u53c2\u6570\u4ee5\u540e\uff0c\u5c31\u7b49\u4e8e\u4e3a\u5b83\u4eec\u52a0\u4e0a\u4e86\u63cf\u8ff0\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u80fd\u591f\u5206\u6e05\uff0c\u5230\u5e95\u662f\u54ea\u4e00\u4e2a\u503c\u3002</p> <p>\u5982\u679c Symbol \u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u4f1a\u8c03\u7528\u8be5\u5bf9\u8c61\u7684<code>toString()</code>\u65b9\u6cd5\uff0c\u5c06\u5176\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u624d\u751f\u6210\u4e00\u4e2a Symbol \u503c\u3002</p> <pre><code>const obj = {\n  toString() {\n    return 'abc';\n  }\n};\nconst sym = Symbol(obj);\nsym // Symbol(abc)\n</code></pre> <p>\u6ce8\u610f\uff0c<code>Symbol()</code>\u51fd\u6570\u7684\u53c2\u6570\u53ea\u662f\u8868\u793a\u5bf9\u5f53\u524d Symbol \u503c\u7684\u63cf\u8ff0\uff0c\u56e0\u6b64\u76f8\u540c\u53c2\u6570\u7684<code>Symbol</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <pre><code>// \u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol();\nlet s2 = Symbol();\n\ns1 === s2 // false\n\n// \u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol('foo');\nlet s2 = Symbol('foo');\n\ns1 === s2 // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u90fd\u662f<code>Symbol()</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u800c\u4e14\u53c2\u6570\u76f8\u540c\uff0c\u4f46\u662f\u5b83\u4eec\u662f\u4e0d\u76f8\u7b49\u7684\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u8c03\u7528100\u6b21<code>Symbol()</code>\uff0c\u4f1a\u5f97\u5230100\u4e2a\u4e92\u4e0d\u76f8\u7b49\u7684\u503c\u3002</p> <p>Symbol \u503c\u4e0d\u80fd\u4e0e\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u8fdb\u884c\u8fd0\u7b97\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>let sym = Symbol('My symbol');\n\n\"your symbol is \" + sym\n// TypeError: can't convert symbol to string\n`your symbol is ${sym}`\n// TypeError: can't convert symbol to string\n</code></pre> <p>\u4f46\u662f\uff0cSymbol \u503c\u53ef\u4ee5\u663e\u5f0f\u8f6c\u4e3a\u5b57\u7b26\u4e32\u3002</p> <pre><code>let sym = Symbol('My symbol');\n\nString(sym) // 'Symbol(My symbol)'\nsym.toString() // 'Symbol(My symbol)'\n</code></pre> <p>\u53e6\u5916\uff0cSymbol \u503c\u4e5f\u53ef\u4ee5\u8f6c\u4e3a\u5e03\u5c14\u503c\uff0c\u4f46\u662f\u4e0d\u80fd\u8f6c\u4e3a\u6570\u503c\u3002</p> <pre><code>let sym = Symbol();\nBoolean(sym) // true\n!sym  // false\n\nif (sym) {\n  // ...\n}\n\nNumber(sym) // TypeError\nsym + 2 // TypeError\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolprototypedescription","title":"Symbol.prototype.description","text":"<p>\u524d\u9762\u8bf4\u8fc7\uff0c<code>Symbol()</code>\u51fd\u6570\u521b\u5efa Symbol \u503c\u65f6\uff0c\u53ef\u4ee5\u7528\u53c2\u6570\u6dfb\u52a0\u4e00\u4e2a\u63cf\u8ff0\u3002</p> <pre><code>const sym = Symbol('foo');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sym</code>\u8fd9\u4e2a\u503c\u7684\u63cf\u8ff0\u5c31\u662f\u5b57\u7b26\u4e32<code>foo</code>\u3002</p> <p>\u4f46\u662f\uff0c\u8bfb\u53d6\u8fd9\u4e2a\u63cf\u8ff0\u9700\u8981\u5c06 Symbol \u663e\u5f0f\u8f6c\u4e3a\u5b57\u7b26\u4e32\uff0c\u5373\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const sym = Symbol('foo');\n\nString(sym) // \"Symbol(foo)\"\nsym.toString() // \"Symbol(foo)\"\n</code></pre> <p>\u4e0a\u9762\u7684\u7528\u6cd5\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002ES2019 \u63d0\u4f9b\u4e86\u4e00\u4e2a Symbol \u503c\u7684\u5b9e\u4f8b\u5c5e\u6027<code>description</code>\uff0c\u76f4\u63a5\u8fd4\u56de Symbol \u503c\u7684\u63cf\u8ff0\u3002</p> <pre><code>const sym = Symbol('foo');\n\nsym.description // \"foo\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbol","title":"\u4f5c\u4e3a\u5c5e\u6027\u540d\u7684 Symbol","text":"<p>\u7531\u4e8e\u6bcf\u4e00\u4e2a Symbol \u503c\u90fd\u662f\u4e0d\u76f8\u7b49\u7684\uff0c\u8fd9\u610f\u5473\u7740\u53ea\u8981 Symbol \u503c\u4f5c\u4e3a\u6807\u8bc6\u7b26\uff0c\u7528\u4e8e\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\uff0c\u5c31\u80fd\u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u540c\u540d\u7684\u5c5e\u6027\u3002\u8fd9\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u8c61\u7531\u591a\u4e2a\u6a21\u5757\u6784\u6210\u7684\u60c5\u51b5\u975e\u5e38\u6709\u7528\uff0c\u80fd\u9632\u6b62\u67d0\u4e00\u4e2a\u952e\u88ab\u4e0d\u5c0f\u5fc3\u6539\u5199\u6216\u8986\u76d6\u3002</p> <pre><code>let mySymbol = Symbol();\n\n// \u7b2c\u4e00\u79cd\u5199\u6cd5\nlet a = {};\na[mySymbol] = 'Hello!';\n\n// \u7b2c\u4e8c\u79cd\u5199\u6cd5\nlet a = {\n  [mySymbol]: 'Hello!'\n};\n\n// \u7b2c\u4e09\u79cd\u5199\u6cd5\nlet a = {};\nObject.defineProperty(a, mySymbol, { value: 'Hello!' });\n\n// \u4ee5\u4e0a\u5199\u6cd5\u90fd\u5f97\u5230\u540c\u6837\u7ed3\u679c\na[mySymbol] // \"Hello!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u65b9\u62ec\u53f7\u7ed3\u6784\u548c<code>Object.defineProperty()</code>\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u6307\u5b9a\u4e3a\u4e00\u4e2a Symbol \u503c\u3002</p> <p>\u6ce8\u610f\uff0cSymbol \u503c\u4f5c\u4e3a\u5bf9\u8c61\u5c5e\u6027\u540d\u65f6\uff0c\u4e0d\u80fd\u7528\u70b9\u8fd0\u7b97\u7b26\u3002</p> <pre><code>const mySymbol = Symbol();\nconst a = {};\n\na.mySymbol = 'Hello!';\na[mySymbol] // undefined\na['mySymbol'] // \"Hello!\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u56e0\u4e3a\u70b9\u8fd0\u7b97\u7b26\u540e\u9762\u603b\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8bfb\u53d6<code>mySymbol</code>\u4f5c\u4e3a\u6807\u8bc6\u540d\u6240\u6307\u4ee3\u7684\u90a3\u4e2a\u503c\uff0c\u5bfc\u81f4<code>a</code>\u7684\u5c5e\u6027\u540d\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a Symbol \u503c\u3002</p> <p>\u540c\u7406\uff0c\u5728\u5bf9\u8c61\u7684\u5185\u90e8\uff0c\u4f7f\u7528 Symbol \u503c\u5b9a\u4e49\u5c5e\u6027\u65f6\uff0cSymbol \u503c\u5fc5\u987b\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u4e2d\u3002</p> <pre><code>let s = Symbol();\n\nlet obj = {\n  [s]: function (arg) { ... }\n};\n\nobj[s](123);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>s</code>\u4e0d\u653e\u5728\u65b9\u62ec\u53f7\u4e2d\uff0c\u8be5\u5c5e\u6027\u7684\u952e\u540d\u5c31\u662f\u5b57\u7b26\u4e32<code>s</code>\uff0c\u800c\u4e0d\u662f<code>s</code>\u6240\u4ee3\u8868\u7684\u90a3\u4e2a Symbol \u503c\u3002</p> <p>\u91c7\u7528\u589e\u5f3a\u7684\u5bf9\u8c61\u5199\u6cd5\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>obj</code>\u5bf9\u8c61\u53ef\u4ee5\u5199\u5f97\u66f4\u7b80\u6d01\u4e00\u4e9b\u3002</p> <pre><code>let obj = {\n  [s](arg) { ... }\n};\n</code></pre> <p>Symbol \u7c7b\u578b\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4e49\u4e00\u7ec4\u5e38\u91cf\uff0c\u4fdd\u8bc1\u8fd9\u7ec4\u5e38\u91cf\u7684\u503c\u90fd\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <pre><code>const log = {};\n\nlog.levels = {\n  DEBUG: Symbol('debug'),\n  INFO: Symbol('info'),\n  WARN: Symbol('warn')\n};\nconsole.log(log.levels.DEBUG, 'debug message');\nconsole.log(log.levels.INFO, 'info message');\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const COLOR_RED    = Symbol();\nconst COLOR_GREEN  = Symbol();\n\nfunction getComplement(color) {\n  switch (color) {\n    case COLOR_RED:\n      return COLOR_GREEN;\n    case COLOR_GREEN:\n      return COLOR_RED;\n    default:\n      throw new Error('Undefined color');\n    }\n}\n</code></pre> <p>\u5e38\u91cf\u4f7f\u7528 Symbol \u503c\u6700\u5927\u7684\u597d\u5904\uff0c\u5c31\u662f\u5176\u4ed6\u4efb\u4f55\u503c\u90fd\u4e0d\u53ef\u80fd\u6709\u76f8\u540c\u7684\u503c\u4e86\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u8bc1\u4e0a\u9762\u7684<code>switch</code>\u8bed\u53e5\u4f1a\u6309\u8bbe\u8ba1\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002</p> <p>\u8fd8\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff0cSymbol \u503c\u4f5c\u4e3a\u5c5e\u6027\u540d\u65f6\uff0c\u8be5\u5c5e\u6027\u8fd8\u662f\u516c\u5f00\u5c5e\u6027\uff0c\u4e0d\u662f\u79c1\u6709\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#_2","title":"\u5b9e\u4f8b\uff1a\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32","text":"<p>\u9b54\u672f\u5b57\u7b26\u4e32\u6307\u7684\u662f\uff0c\u5728\u4ee3\u7801\u4e4b\u4e2d\u591a\u6b21\u51fa\u73b0\u3001\u4e0e\u4ee3\u7801\u5f62\u6210\u5f3a\u8026\u5408\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u5b57\u7b26\u4e32\u6216\u8005\u6570\u503c\u3002\u98ce\u683c\u826f\u597d\u7684\u4ee3\u7801\uff0c\u5e94\u8be5\u5c3d\u91cf\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32\uff0c\u6539\u7531\u542b\u4e49\u6e05\u6670\u7684\u53d8\u91cf\u4ee3\u66ff\u3002</p> <pre><code>function getArea(shape, options) {\n  let area = 0;\n\n  switch (shape) {\n    case 'Triangle': // \u9b54\u672f\u5b57\u7b26\u4e32\n      area = .5 * options.width * options.height;\n      break;\n    /* ... more code ... */\n  }\n\n  return area;\n}\n\ngetArea('Triangle', { width: 100, height: 100 }); // \u9b54\u672f\u5b57\u7b26\u4e32\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32<code>Triangle</code>\u5c31\u662f\u4e00\u4e2a\u9b54\u672f\u5b57\u7b26\u4e32\u3002\u5b83\u591a\u6b21\u51fa\u73b0\uff0c\u4e0e\u4ee3\u7801\u5f62\u6210\u201c\u5f3a\u8026\u5408\u201d\uff0c\u4e0d\u5229\u4e8e\u5c06\u6765\u7684\u4fee\u6539\u548c\u7ef4\u62a4\u3002</p> <p>\u5e38\u7528\u7684\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u628a\u5b83\u5199\u6210\u4e00\u4e2a\u53d8\u91cf\u3002</p> <pre><code>const shapeType = {\n  triangle: 'Triangle'\n};\n\nfunction getArea(shape, options) {\n  let area = 0;\n  switch (shape) {\n    case shapeType.triangle:\n      area = .5 * options.width * options.height;\n      break;\n  }\n  return area;\n}\n\ngetArea(shapeType.triangle, { width: 100, height: 100 });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u628a<code>Triangle</code>\u5199\u6210<code>shapeType</code>\u5bf9\u8c61\u7684<code>triangle</code>\u5c5e\u6027\uff0c\u8fd9\u6837\u5c31\u6d88\u9664\u4e86\u5f3a\u8026\u5408\u3002</p> <p>\u5982\u679c\u4ed4\u7ec6\u5206\u6790\uff0c\u53ef\u4ee5\u53d1\u73b0<code>shapeType.triangle</code>\u7b49\u4e8e\u54ea\u4e2a\u503c\u5e76\u4e0d\u91cd\u8981\uff0c\u53ea\u8981\u786e\u4fdd\u4e0d\u4f1a\u8ddf\u5176\u4ed6<code>shapeType</code>\u5c5e\u6027\u7684\u503c\u51b2\u7a81\u5373\u53ef\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u5c31\u5f88\u9002\u5408\u6539\u7528 Symbol \u503c\u3002</p> <pre><code>const shapeType = {\n  triangle: Symbol()\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9664\u4e86\u5c06<code>shapeType.triangle</code>\u7684\u503c\u8bbe\u4e3a\u4e00\u4e2a Symbol\uff0c\u5176\u4ed6\u5730\u65b9\u90fd\u4e0d\u7528\u4fee\u6539\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#_3","title":"\u5c5e\u6027\u540d\u7684\u904d\u5386","text":"<p>Symbol \u503c\u4f5c\u4e3a\u5c5e\u6027\u540d\uff0c\u904d\u5386\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u8be5\u5c5e\u6027\u4e0d\u4f1a\u51fa\u73b0\u5728<code>for...in</code>\u3001<code>for...of</code>\u5faa\u73af\u4e2d\uff0c\u4e5f\u4e0d\u4f1a\u88ab<code>Object.keys()</code>\u3001<code>Object.getOwnPropertyNames()</code>\u3001<code>JSON.stringify()</code>\u8fd4\u56de\u3002</p> <p>\u4f46\u662f\uff0c\u5b83\u4e5f\u4e0d\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u6709\u4e00\u4e2a<code>Object.getOwnPropertySymbols()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u5bf9\u8c61\u7684\u6240\u6709 Symbol \u5c5e\u6027\u540d\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6210\u5458\u662f\u5f53\u524d\u5bf9\u8c61\u7684\u6240\u6709\u7528\u4f5c\u5c5e\u6027\u540d\u7684 Symbol \u503c\u3002</p> <pre><code>const obj = {};\nlet a = Symbol('a');\nlet b = Symbol('b');\n\nobj[a] = 'Hello';\nobj[b] = 'World';\n\nconst objectSymbols = Object.getOwnPropertySymbols(obj);\n\nobjectSymbols\n// [Symbol(a), Symbol(b)]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f<code>Object.getOwnPropertySymbols()</code>\u65b9\u6cd5\u7684\u793a\u4f8b\uff0c\u53ef\u4ee5\u83b7\u53d6\u6240\u6709 Symbol \u5c5e\u6027\u540d\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c<code>Object.getOwnPropertySymbols()</code>\u65b9\u6cd5\u4e0e<code>for...in</code>\u5faa\u73af\u3001<code>Object.getOwnPropertyNames</code>\u65b9\u6cd5\u8fdb\u884c\u5bf9\u6bd4\u7684\u4f8b\u5b50\u3002</p> <pre><code>const obj = {};\nconst foo = Symbol('foo');\n\nobj[foo] = 'bar';\n\nfor (let i in obj) {\n  console.log(i); // \u65e0\u8f93\u51fa\n}\n\nObject.getOwnPropertyNames(obj) // []\nObject.getOwnPropertySymbols(obj) // [Symbol(foo)]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528<code>for...in</code>\u5faa\u73af\u548c<code>Object.getOwnPropertyNames()</code>\u65b9\u6cd5\u90fd\u5f97\u4e0d\u5230 Symbol \u952e\u540d\uff0c\u9700\u8981\u4f7f\u7528<code>Object.getOwnPropertySymbols()</code>\u65b9\u6cd5\u3002</p> <p>\u53e6\u4e00\u4e2a\u65b0\u7684 API\uff0c<code>Reflect.ownKeys()</code>\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6240\u6709\u7c7b\u578b\u7684\u952e\u540d\uff0c\u5305\u62ec\u5e38\u89c4\u952e\u540d\u548c Symbol \u952e\u540d\u3002</p> <pre><code>let obj = {\n  [Symbol('my_key')]: 1,\n  enum: 2,\n  nonEnum: 3\n};\n\nReflect.ownKeys(obj)\n//  [\"enum\", \"nonEnum\", Symbol(my_key)]\n</code></pre> <p>\u7531\u4e8e\u4ee5 Symbol \u503c\u4f5c\u4e3a\u952e\u540d\uff0c\u4e0d\u4f1a\u88ab\u5e38\u89c4\u65b9\u6cd5\u904d\u5386\u5f97\u5230\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u7279\u6027\uff0c\u4e3a\u5bf9\u8c61\u5b9a\u4e49\u4e00\u4e9b\u975e\u79c1\u6709\u7684\u3001\u4f46\u53c8\u5e0c\u671b\u53ea\u7528\u4e8e\u5185\u90e8\u7684\u65b9\u6cd5\u3002</p> <pre><code>let size = Symbol('size');\n\nclass Collection {\n  constructor() {\n    this[size] = 0;\n  }\n\n  add(item) {\n    this[this[size]] = item;\n    this[size]++;\n  }\n\n  static sizeOf(instance) {\n    return instance[size];\n  }\n}\n\nlet x = new Collection();\nCollection.sizeOf(x) // 0\n\nx.add('foo');\nCollection.sizeOf(x) // 1\n\nObject.keys(x) // ['0']\nObject.getOwnPropertyNames(x) // ['0']\nObject.getOwnPropertySymbols(x) // [Symbol(size)]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>x</code>\u7684<code>size</code>\u5c5e\u6027\u662f\u4e00\u4e2a Symbol \u503c\uff0c\u6240\u4ee5<code>Object.keys(x)</code>\u3001<code>Object.getOwnPropertyNames(x)</code>\u90fd\u65e0\u6cd5\u83b7\u53d6\u5b83\u3002\u8fd9\u5c31\u9020\u6210\u4e86\u4e00\u79cd\u975e\u79c1\u6709\u7684\u5185\u90e8\u65b9\u6cd5\u7684\u6548\u679c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolforsymbolkeyfor","title":"Symbol.for()\uff0cSymbol.keyFor()","text":"<p>\u6709\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u91cd\u65b0\u4f7f\u7528\u540c\u4e00\u4e2a Symbol \u503c\uff0c<code>Symbol.for()</code>\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002\u5b83\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u641c\u7d22\u6709\u6ca1\u6709\u4ee5\u8be5\u53c2\u6570\u4f5c\u4e3a\u540d\u79f0\u7684 Symbol \u503c\u3002\u5982\u679c\u6709\uff0c\u5c31\u8fd4\u56de\u8fd9\u4e2a Symbol \u503c\uff0c\u5426\u5219\u5c31\u65b0\u5efa\u4e00\u4e2a\u4ee5\u8be5\u5b57\u7b26\u4e32\u4e3a\u540d\u79f0\u7684 Symbol \u503c\uff0c\u5e76\u5c06\u5176\u6ce8\u518c\u5230\u5168\u5c40\u3002</p> <pre><code>let s1 = Symbol.for('foo');\nlet s2 = Symbol.for('foo');\n\ns1 === s2 // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>s1</code>\u548c<code>s2</code>\u90fd\u662f Symbol \u503c\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u662f\u7531\u540c\u6837\u53c2\u6570\u7684<code>Symbol.for</code>\u65b9\u6cd5\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u662f\u540c\u4e00\u4e2a\u503c\u3002</p> <p><code>Symbol.for()</code>\u4e0e<code>Symbol()</code>\u8fd9\u4e24\u79cd\u5199\u6cd5\uff0c\u90fd\u4f1a\u751f\u6210\u65b0\u7684 Symbol\u3002\u5b83\u4eec\u7684\u533a\u522b\u662f\uff0c\u524d\u8005\u4f1a\u88ab\u767b\u8bb0\u5728\u5168\u5c40\u73af\u5883\u4e2d\u4f9b\u641c\u7d22\uff0c\u540e\u8005\u4e0d\u4f1a\u3002<code>Symbol.for()</code>\u4e0d\u4f1a\u6bcf\u6b21\u8c03\u7528\u5c31\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Symbol \u7c7b\u578b\u7684\u503c\uff0c\u800c\u662f\u4f1a\u5148\u68c0\u67e5\u7ed9\u5b9a\u7684<code>key</code>\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u624d\u4f1a\u65b0\u5efa\u4e00\u4e2a\u503c\u3002\u6bd4\u5982\uff0c\u5982\u679c\u4f60\u8c03\u7528<code>Symbol.for(\"cat\")</code>30 \u6b21\uff0c\u6bcf\u6b21\u90fd\u4f1a\u8fd4\u56de\u540c\u4e00\u4e2a Symbol \u503c\uff0c\u4f46\u662f\u8c03\u7528<code>Symbol(\"cat\")</code>30 \u6b21\uff0c\u4f1a\u8fd4\u56de 30 \u4e2a\u4e0d\u540c\u7684 Symbol \u503c\u3002</p> <pre><code>Symbol.for(\"bar\") === Symbol.for(\"bar\")\n// true\n\nSymbol(\"bar\") === Symbol(\"bar\")\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>Symbol()</code>\u5199\u6cd5\u6ca1\u6709\u767b\u8bb0\u673a\u5236\uff0c\u6240\u4ee5\u6bcf\u6b21\u8c03\u7528\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u4e0d\u540c\u7684\u503c\u3002</p> <p><code>Symbol.keyFor()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5df2\u767b\u8bb0\u7684 Symbol \u7c7b\u578b\u503c\u7684<code>key</code>\u3002</p> <pre><code>let s1 = Symbol.for(\"foo\");\nSymbol.keyFor(s1) // \"foo\"\n\nlet s2 = Symbol(\"foo\");\nSymbol.keyFor(s2) // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>s2</code>\u5c5e\u4e8e\u672a\u767b\u8bb0\u7684 Symbol \u503c\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol.for()</code>\u4e3a Symbol \u503c\u767b\u8bb0\u7684\u540d\u5b57\uff0c\u662f\u5168\u5c40\u73af\u5883\u7684\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u5728\u5168\u5c40\u73af\u5883\u8fd0\u884c\u3002</p> <pre><code>function foo() {\n  return Symbol.for('bar');\n}\n\nconst x = foo();\nconst y = Symbol.for('bar');\nconsole.log(x === y); // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Symbol.for('bar')</code>\u662f\u51fd\u6570\u5185\u90e8\u8fd0\u884c\u7684\uff0c\u4f46\u662f\u751f\u6210\u7684 Symbol \u503c\u662f\u767b\u8bb0\u5728\u5168\u5c40\u73af\u5883\u7684\u3002\u6240\u4ee5\uff0c\u7b2c\u4e8c\u6b21\u8fd0\u884c<code>Symbol.for('bar')</code>\u53ef\u4ee5\u53d6\u5230\u8fd9\u4e2a Symbol \u503c\u3002</p> <p><code>Symbol.for()</code>\u7684\u8fd9\u4e2a\u5168\u5c40\u767b\u8bb0\u7279\u6027\uff0c\u53ef\u4ee5\u7528\u5728\u4e0d\u540c\u7684 iframe \u6216 service worker \u4e2d\u53d6\u5230\u540c\u4e00\u4e2a\u503c\u3002</p> <pre><code>iframe = document.createElement('iframe');\niframe.src = String(window.location);\ndocument.body.appendChild(iframe);\n\niframe.contentWindow.Symbol.for('foo') === Symbol.for('foo')\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0ciframe \u7a97\u53e3\u751f\u6210\u7684 Symbol \u503c\uff0c\u53ef\u4ee5\u5728\u4e3b\u9875\u9762\u5f97\u5230\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#singleton","title":"\u5b9e\u4f8b\uff1a\u6a21\u5757\u7684 Singleton \u6a21\u5f0f","text":"<p>Singleton \u6a21\u5f0f\u6307\u7684\u662f\u8c03\u7528\u4e00\u4e2a\u7c7b\uff0c\u4efb\u4f55\u65f6\u5019\u8fd4\u56de\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u5bf9\u4e8e Node \u6765\u8bf4\uff0c\u6a21\u5757\u6587\u4ef6\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2a\u7c7b\u3002\u600e\u4e48\u4fdd\u8bc1\u6bcf\u6b21\u6267\u884c\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6\uff0c\u8fd4\u56de\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u5462\uff1f</p> <p>\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u53ef\u4ee5\u628a\u5b9e\u4f8b\u653e\u5230\u9876\u5c42\u5bf9\u8c61<code>global</code>\u3002</p> <pre><code>// mod.js\nfunction A() {\n  this.foo = 'hello';\n}\n\nif (!global._foo) {\n  global._foo = new A();\n}\n\nmodule.exports = global._foo;\n</code></pre> <p>\u7136\u540e\uff0c\u52a0\u8f7d\u4e0a\u9762\u7684<code>mod.js</code>\u3002</p> <pre><code>const a = require('./mod.js');\nconsole.log(a.foo);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>a</code>\u4efb\u4f55\u65f6\u5019\u52a0\u8f7d\u7684\u90fd\u662f<code>A</code>\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5168\u5c40\u53d8\u91cf<code>global._foo</code>\u662f\u53ef\u5199\u7684\uff0c\u4efb\u4f55\u6587\u4ef6\u90fd\u53ef\u4ee5\u4fee\u6539\u3002</p> <pre><code>global._foo = { foo: 'world' };\n\nconst a = require('./mod.js');\nconsole.log(a.foo);\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u4f1a\u4f7f\u5f97\u52a0\u8f7d<code>mod.js</code>\u7684\u811a\u672c\u90fd\u5931\u771f\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\u51fa\u73b0\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 Symbol\u3002</p> <pre><code>// mod.js\nconst FOO_KEY = Symbol.for('foo');\n\nfunction A() {\n  this.foo = 'hello';\n}\n\nif (!global[FOO_KEY]) {\n  global[FOO_KEY] = new A();\n}\n\nmodule.exports = global[FOO_KEY];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u4fdd\u8bc1<code>global[FOO_KEY]</code>\u4e0d\u4f1a\u88ab\u65e0\u610f\u95f4\u8986\u76d6\uff0c\u4f46\u8fd8\u662f\u53ef\u4ee5\u88ab\u6539\u5199\u3002</p> <pre><code>global[Symbol.for('foo')] = { foo: 'world' };\n\nconst a = require('./mod.js');\n</code></pre> <p>\u5982\u679c\u952e\u540d\u4f7f\u7528<code>Symbol</code>\u65b9\u6cd5\u751f\u6210\uff0c\u90a3\u4e48\u5916\u90e8\u5c06\u65e0\u6cd5\u5f15\u7528\u8fd9\u4e2a\u503c\uff0c\u5f53\u7136\u4e5f\u5c31\u65e0\u6cd5\u6539\u5199\u3002</p> <pre><code>// mod.js\nconst FOO_KEY = Symbol('foo');\n\n// \u540e\u9762\u4ee3\u7801\u76f8\u540c \u2026\u2026\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u5bfc\u81f4\u5176\u4ed6\u811a\u672c\u90fd\u65e0\u6cd5\u5f15\u7528<code>FOO_KEY</code>\u3002\u4f46\u8fd9\u6837\u4e5f\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u5982\u679c\u591a\u6b21\u6267\u884c\u8fd9\u4e2a\u811a\u672c\uff0c\u6bcf\u6b21\u5f97\u5230\u7684<code>FOO_KEY</code>\u90fd\u662f\u4e0d\u4e00\u6837\u7684\u3002\u867d\u7136 Node \u4f1a\u5c06\u811a\u672c\u7684\u6267\u884c\u7ed3\u679c\u7f13\u5b58\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e0d\u4f1a\u591a\u6b21\u6267\u884c\u540c\u4e00\u4e2a\u811a\u672c\uff0c\u4f46\u662f\u7528\u6237\u53ef\u4ee5\u624b\u52a8\u6e05\u9664\u7f13\u5b58\uff0c\u6240\u4ee5\u4e5f\u4e0d\u662f\u7edd\u5bf9\u53ef\u9760\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbol_1","title":"\u5185\u7f6e\u7684 Symbol \u503c","text":"<p>\u9664\u4e86\u5b9a\u4e49\u81ea\u5df1\u4f7f\u7528\u7684 Symbol \u503c\u4ee5\u5916\uff0cES6 \u8fd8\u63d0\u4f9b\u4e86 11 \u4e2a\u5185\u7f6e\u7684 Symbol \u503c\uff0c\u6307\u5411\u8bed\u8a00\u5185\u90e8\u4f7f\u7528\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolhasinstance","title":"Symbol.hasInstance","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.hasInstance</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u5185\u90e8\u65b9\u6cd5\u3002\u5f53\u5176\u4ed6\u5bf9\u8c61\u4f7f\u7528<code>instanceof</code>\u8fd0\u7b97\u7b26\uff0c\u5224\u65ad\u662f\u5426\u4e3a\u8be5\u5bf9\u8c61\u7684\u5b9e\u4f8b\u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u6bd4\u5982\uff0c<code>foo instanceof Foo</code>\u5728\u8bed\u8a00\u5185\u90e8\uff0c\u5b9e\u9645\u8c03\u7528\u7684\u662f<code>Foo[Symbol.hasInstance](foo)</code>\u3002</p> <pre><code>class MyClass {\n  [Symbol.hasInstance](foo) {\n    return foo instanceof Array;\n  }\n}\n\n[1, 2, 3] instanceof new MyClass() // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>MyClass</code>\u662f\u4e00\u4e2a\u7c7b\uff0c<code>new MyClass()</code>\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b\u3002\u8be5\u5b9e\u4f8b\u7684<code>Symbol.hasInstance</code>\u65b9\u6cd5\uff0c\u4f1a\u5728\u8fdb\u884c<code>instanceof</code>\u8fd0\u7b97\u65f6\u81ea\u52a8\u8c03\u7528\uff0c\u5224\u65ad\u5de6\u4fa7\u7684\u8fd0\u7b97\u5b50\u662f\u5426\u4e3a<code>Array</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class Even {\n  static [Symbol.hasInstance](obj) {\n    return Number(obj) % 2 === 0;\n  }\n}\n\n// \u7b49\u540c\u4e8e\nconst Even = {\n  [Symbol.hasInstance](obj) {\n    return Number(obj) % 2 === 0;\n  }\n};\n\n1 instanceof Even // false\n2 instanceof Even // true\n12345 instanceof Even // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolisconcatspreadable","title":"Symbol.isConcatSpreadable","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u7b49\u4e8e\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u5bf9\u8c61\u7528\u4e8e<code>Array.prototype.concat()</code>\u65f6\uff0c\u662f\u5426\u53ef\u4ee5\u5c55\u5f00\u3002</p> <pre><code>let arr1 = ['c', 'd'];\n['a', 'b'].concat(arr1, 'e') // ['a', 'b', 'c', 'd', 'e']\narr1[Symbol.isConcatSpreadable] // undefined\n\nlet arr2 = ['c', 'd'];\narr2[Symbol.isConcatSpreadable] = false;\n['a', 'b'].concat(arr2, 'e') // ['a', 'b', ['c','d'], 'e']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u6570\u7ec4\u7684\u9ed8\u8ba4\u884c\u4e3a\u662f\u53ef\u4ee5\u5c55\u5f00\uff0c<code>Symbol.isConcatSpreadable</code>\u9ed8\u8ba4\u7b49\u4e8e<code>undefined</code>\u3002\u8be5\u5c5e\u6027\u7b49\u4e8e<code>true</code>\u65f6\uff0c\u4e5f\u6709\u5c55\u5f00\u7684\u6548\u679c\u3002</p> <p>\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u6b63\u597d\u76f8\u53cd\uff0c\u9ed8\u8ba4\u4e0d\u5c55\u5f00\u3002\u5b83\u7684<code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u8bbe\u4e3a<code>true</code>\uff0c\u624d\u53ef\u4ee5\u5c55\u5f00\u3002</p> <pre><code>let obj = {length: 2, 0: 'c', 1: 'd'};\n['a', 'b'].concat(obj, 'e') // ['a', 'b', obj, 'e']\n\nobj[Symbol.isConcatSpreadable] = true;\n['a', 'b'].concat(obj, 'e') // ['a', 'b', 'c', 'd', 'e']\n</code></pre> <p><code>Symbol.isConcatSpreadable</code>\u5c5e\u6027\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u91cc\u9762\u3002</p> <pre><code>class A1 extends Array {\n  constructor(args) {\n    super(args);\n    this[Symbol.isConcatSpreadable] = true;\n  }\n}\nclass A2 extends Array {\n  constructor(args) {\n    super(args);\n  }\n  get [Symbol.isConcatSpreadable] () {\n    return false;\n  }\n}\nlet a1 = new A1();\na1[0] = 3;\na1[1] = 4;\nlet a2 = new A2();\na2[0] = 5;\na2[1] = 6;\n[1, 2].concat(a1).concat(a2)\n// [1, 2, 3, 4, [5, 6]]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7c7b<code>A1</code>\u662f\u53ef\u5c55\u5f00\u7684\uff0c\u7c7b<code>A2</code>\u662f\u4e0d\u53ef\u5c55\u5f00\u7684\uff0c\u6240\u4ee5\u4f7f\u7528<code>concat</code>\u65f6\u6709\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <p>\u6ce8\u610f\uff0c<code>Symbol.isConcatSpreadable</code>\u7684\u4f4d\u7f6e\u5dee\u5f02\uff0c<code>A1</code>\u662f\u5b9a\u4e49\u5728\u5b9e\u4f8b\u4e0a\uff0c<code>A2</code>\u662f\u5b9a\u4e49\u5728\u7c7b\u672c\u8eab\uff0c\u6548\u679c\u76f8\u540c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolspecies","title":"Symbol.species","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.species</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u3002\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\uff0c\u4f1a\u4f7f\u7528\u8be5\u5c5e\u6027\u3002</p> <pre><code>class MyArray extends Array {\n}\n\nconst a = new MyArray(1, 2, 3);\nconst b = a.map(x =&gt; x);\nconst c = a.filter(x =&gt; x &gt; 1);\n\nb instanceof MyArray // true\nc instanceof MyArray // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>MyArray</code>\u7ee7\u627f\u4e86\u7236\u7c7b<code>Array</code>\uff0c<code>a</code>\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\uff0c<code>b</code>\u548c<code>c</code>\u662f<code>a</code>\u7684\u884d\u751f\u5bf9\u8c61\u3002\u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\uff0c<code>b</code>\u548c<code>c</code>\u90fd\u662f\u8c03\u7528\u6570\u7ec4\u65b9\u6cd5\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u662f\u6570\u7ec4\uff08<code>Array</code>\u7684\u5b9e\u4f8b\uff09\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u4eec\u4e5f\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\u3002</p> <p><code>Symbol.species</code>\u5c5e\u6027\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u63d0\u4f9b\u7684\u3002\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a<code>MyArray</code>\u8bbe\u7f6e<code>Symbol.species</code>\u5c5e\u6027\u3002</p> <pre><code>class MyArray extends Array {\n  static get [Symbol.species]() { return Array; }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u5b9a\u4e49\u4e86<code>Symbol.species</code>\u5c5e\u6027\uff0c\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\u5c31\u4f1a\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fd4\u56de\u7684\u51fd\u6570\uff0c\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u3002\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u8bf4\u660e\uff0c\u5b9a\u4e49<code>Symbol.species</code>\u5c5e\u6027\u8981\u91c7\u7528<code>get</code>\u53d6\u503c\u5668\u3002\u9ed8\u8ba4\u7684<code>Symbol.species</code>\u5c5e\u6027\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>static get [Symbol.species]() {\n  return this;\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u518d\u6765\u770b\u524d\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>class MyArray extends Array {\n  static get [Symbol.species]() { return Array; }\n}\n\nconst a = new MyArray();\nconst b = a.map(x =&gt; x);\n\nb instanceof MyArray // false\nb instanceof Array // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a.map(x =&gt; x)</code>\u751f\u6210\u7684\u884d\u751f\u5bf9\u8c61\uff0c\u5c31\u4e0d\u662f<code>MyArray</code>\u7684\u5b9e\u4f8b\uff0c\u800c\u76f4\u63a5\u5c31\u662f<code>Array</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class T1 extends Promise {\n}\n\nclass T2 extends Promise {\n  static get [Symbol.species]() {\n    return Promise;\n  }\n}\n\nnew T1(r =&gt; r()).then(v =&gt; v) instanceof T1 // true\nnew T2(r =&gt; r()).then(v =&gt; v) instanceof T2 // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>T2</code>\u5b9a\u4e49\u4e86<code>Symbol.species</code>\u5c5e\u6027\uff0c<code>T1</code>\u6ca1\u6709\u3002\u7ed3\u679c\u5c31\u5bfc\u81f4\u4e86\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\uff08<code>then</code>\u65b9\u6cd5\uff09\uff0c<code>T1</code>\u8c03\u7528\u7684\u662f\u81ea\u8eab\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u800c<code>T2</code>\u8c03\u7528\u7684\u662f<code>Promise</code>\u7684\u6784\u9020\u65b9\u6cd5\u3002</p> <p>\u603b\u4e4b\uff0c<code>Symbol.species</code>\u7684\u4f5c\u7528\u5728\u4e8e\uff0c\u5b9e\u4f8b\u5bf9\u8c61\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u518d\u6b21\u8c03\u7528\u81ea\u8eab\u7684\u6784\u9020\u51fd\u6570\u65f6\uff0c\u4f1a\u8c03\u7528\u8be5\u5c5e\u6027\u6307\u5b9a\u7684\u6784\u9020\u51fd\u6570\u3002\u5b83\u4e3b\u8981\u7684\u7528\u9014\u662f\uff0c\u6709\u4e9b\u7c7b\u5e93\u662f\u5728\u57fa\u7c7b\u7684\u57fa\u7840\u4e0a\u4fee\u6539\u7684\uff0c\u90a3\u4e48\u5b50\u7c7b\u4f7f\u7528\u7ee7\u627f\u7684\u65b9\u6cd5\u65f6\uff0c\u4f5c\u8005\u53ef\u80fd\u5e0c\u671b\u8fd4\u56de\u57fa\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolmatch","title":"Symbol.match","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.match</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u51fd\u6570\u3002\u5f53\u6267\u884c<code>str.match(myObject)</code>\u65f6\uff0c\u5982\u679c\u8be5\u5c5e\u6027\u5b58\u5728\uff0c\u4f1a\u8c03\u7528\u5b83\uff0c\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.match(regexp)\n// \u7b49\u540c\u4e8e\nregexp[Symbol.match](this)\n\nclass MyMatcher {\n  [Symbol.match](string) {\n    return 'hello world'.indexOf(string);\n  }\n}\n\n'e'.match(new MyMatcher()) // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolreplace","title":"Symbol.replace","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.replace</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.replace</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.replace(searchValue, replaceValue)\n// \u7b49\u540c\u4e8e\nsearchValue[Symbol.replace](this, replaceValue)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const x = {};\nx[Symbol.replace] = (...s) =&gt; console.log(s);\n\n'Hello'.replace(x, 'World') // [\"Hello\", \"World\"]\n</code></pre> <p><code>Symbol.replace</code>\u65b9\u6cd5\u4f1a\u6536\u5230\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>replace</code>\u65b9\u6cd5\u6b63\u5728\u4f5c\u7528\u7684\u5bf9\u8c61\uff0c\u4e0a\u9762\u4f8b\u5b50\u662f<code>Hello</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u540e\u7684\u503c\uff0c\u4e0a\u9762\u4f8b\u5b50\u662f<code>World</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolsearch","title":"Symbol.search","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.search</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.search</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.search(regexp)\n// \u7b49\u540c\u4e8e\nregexp[Symbol.search](this)\n\nclass MySearch {\n  constructor(value) {\n    this.value = value;\n  }\n  [Symbol.search](string) {\n    return string.indexOf(this.value);\n  }\n}\n'foobar'.search(new MySearch('foo')) // 0\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolsplit","title":"Symbol.split","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.split</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5f53\u8be5\u5bf9\u8c61\u88ab<code>String.prototype.split</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4f1a\u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>String.prototype.split(separator, limit)\n// \u7b49\u540c\u4e8e\nseparator[Symbol.split](this, limit)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class MySplitter {\n  constructor(value) {\n    this.value = value;\n  }\n  [Symbol.split](string) {\n    let index = string.indexOf(this.value);\n    if (index === -1) {\n      return string;\n    }\n    return [\n      string.substr(0, index),\n      string.substr(index + this.value.length)\n    ];\n  }\n}\n\n'foobar'.split(new MySplitter('foo'))\n// ['', 'bar']\n\n'foobar'.split(new MySplitter('bar'))\n// ['foo', '']\n\n'foobar'.split(new MySplitter('baz'))\n// 'foobar'\n</code></pre> <p>\u4e0a\u9762\u65b9\u6cd5\u4f7f\u7528<code>Symbol.split</code>\u65b9\u6cd5\uff0c\u91cd\u65b0\u5b9a\u4e49\u4e86\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684<code>split</code>\u65b9\u6cd5\u7684\u884c\u4e3a\uff0c</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symboliterator","title":"Symbol.iterator","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u6307\u5411\u8be5\u5bf9\u8c61\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u65b9\u6cd5\u3002</p> <pre><code>const myIterable = {};\nmyIterable[Symbol.iterator] = function* () {\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...myIterable] // [1, 2, 3]\n</code></pre> <p>\u5bf9\u8c61\u8fdb\u884c<code>for...of</code>\u5faa\u73af\u65f6\uff0c\u4f1a\u8c03\u7528<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u9ed8\u8ba4\u904d\u5386\u5668\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\u300aIterator \u548c for...of \u5faa\u73af\u300b\u4e00\u7ae0\u3002</p> <pre><code>class Collection {\n  *[Symbol.iterator]() {\n    let i = 0;\n    while(this[i] !== undefined) {\n      yield this[i];\n      ++i;\n    }\n  }\n}\n\nlet myCollection = new Collection();\nmyCollection[0] = 1;\nmyCollection[1] = 2;\n\nfor(let value of myCollection) {\n  console.log(value);\n}\n// 1\n// 2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symboltoprimitive","title":"Symbol.toPrimitive","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.toPrimitive</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\u3002\u8be5\u5bf9\u8c61\u88ab\u8f6c\u4e3a\u539f\u59cb\u7c7b\u578b\u7684\u503c\u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u5bf9\u5e94\u7684\u539f\u59cb\u7c7b\u578b\u503c\u3002</p> <p><code>Symbol.toPrimitive</code>\u88ab\u8c03\u7528\u65f6\uff0c\u4f1a\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u8868\u793a\u5f53\u524d\u8fd0\u7b97\u7684\u6a21\u5f0f\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u6a21\u5f0f\u3002</p> <ul> <li>Number\uff1a\u8be5\u573a\u5408\u9700\u8981\u8f6c\u6210\u6570\u503c</li> <li>String\uff1a\u8be5\u573a\u5408\u9700\u8981\u8f6c\u6210\u5b57\u7b26\u4e32</li> <li>Default\uff1a\u8be5\u573a\u5408\u53ef\u4ee5\u8f6c\u6210\u6570\u503c\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u6210\u5b57\u7b26\u4e32</li> </ul> <pre><code>let obj = {\n  [Symbol.toPrimitive](hint) {\n    switch (hint) {\n      case 'number':\n        return 123;\n      case 'string':\n        return 'str';\n      case 'default':\n        return 'default';\n      default:\n        throw new Error();\n     }\n   }\n};\n\n2 * obj // 246\n3 + obj // '3default'\nobj == 'default' // true\nString(obj) // 'str'\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symboltostringtag","title":"Symbol.toStringTag","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.toStringTag</code>\u5c5e\u6027\uff0c\u7528\u6765\u8bbe\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u8bbe\u4e3a\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u65e0\u6548\uff0c\u4f46\u4e0d\u62a5\u9519\uff09\u3002\u5728\u76ee\u6807\u5bf9\u8c61\u4e0a\u9762\u8c03\u7528<code>Object.prototype.toString()</code>\u65b9\u6cd5\u65f6\uff0c\u5982\u679c<code>Symbol.toStringTag</code>\u5c5e\u6027\u5b58\u5728\uff0c\u8be5\u5c5e\u6027\u8bbe\u5b9a\u7684\u5b57\u7b26\u4e32\u4f1a\u51fa\u73b0\u5728<code>toString()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u4e4b\u4e2d\uff0c\u8868\u793a\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u5b9a\u5236<code>[object Object]</code>\u6216<code>[object Array]</code>\u4e2d<code>object</code>\u540e\u9762\u7684\u90a3\u4e2a\u5927\u5199\u5b57\u7b26\u4e32\u3002</p> <pre><code>// \u4f8b\u4e00\n({[Symbol.toStringTag]: 'Foo'}.toString())\n// \"[object Foo]\"\n\n// \u4f8b\u4e8c\nclass Collection {\n  get [Symbol.toStringTag]() {\n    return 'xxx';\n  }\n}\nlet x = new Collection();\nObject.prototype.toString.call(x) // \"[object xxx]\"\n</code></pre> <p>ES6 \u65b0\u589e\u5185\u7f6e\u5bf9\u8c61\u7684<code>Symbol.toStringTag</code>\u5c5e\u6027\u503c\u5982\u4e0b\u3002</p> <ul> <li><code>JSON[Symbol.toStringTag]</code>\uff1a'JSON'</li> <li><code>Math[Symbol.toStringTag]</code>\uff1a'Math'</li> <li>Module \u5bf9\u8c61<code>M[Symbol.toStringTag]</code>\uff1a'Module'</li> <li><code>ArrayBuffer.prototype[Symbol.toStringTag]</code>\uff1a'ArrayBuffer'</li> <li><code>DataView.prototype[Symbol.toStringTag]</code>\uff1a'DataView'</li> <li><code>Map.prototype[Symbol.toStringTag]</code>\uff1a'Map'</li> <li><code>Promise.prototype[Symbol.toStringTag]</code>\uff1a'Promise'</li> <li><code>Set.prototype[Symbol.toStringTag]</code>\uff1a'Set'</li> <li><code>%TypedArray%.prototype[Symbol.toStringTag]</code>\uff1a'Uint8Array'\u7b49</li> <li><code>WeakMap.prototype[Symbol.toStringTag]</code>\uff1a'WeakMap'</li> <li><code>WeakSet.prototype[Symbol.toStringTag]</code>\uff1a'WeakSet'</li> <li><code>%MapIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'Map Iterator'</li> <li><code>%SetIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'Set Iterator'</li> <li><code>%StringIteratorPrototype%[Symbol.toStringTag]</code>\uff1a'String Iterator'</li> <li><code>Symbol.prototype[Symbol.toStringTag]</code>\uff1a'Symbol'</li> <li><code>Generator.prototype[Symbol.toStringTag]</code>\uff1a'Generator'</li> <li><code>GeneratorFunction.prototype[Symbol.toStringTag]</code>\uff1a'GeneratorFunction'</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/13-symbol/#symbolunscopables","title":"Symbol.unscopables","text":"<p>\u5bf9\u8c61\u7684<code>Symbol.unscopables</code>\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u6307\u5b9a\u4e86\u4f7f\u7528<code>with</code>\u5173\u952e\u5b57\u65f6\uff0c\u54ea\u4e9b\u5c5e\u6027\u4f1a\u88ab<code>with</code>\u73af\u5883\u6392\u9664\u3002</p> <pre><code>Array.prototype[Symbol.unscopables]\n// {\n//   copyWithin: true,\n//   entries: true,\n//   fill: true,\n//   find: true,\n// \u00a0 findIndex: true,\n//   includes: true,\n//   keys: true\n// }\n\nObject.keys(Array.prototype[Symbol.unscopables])\n// ['copyWithin', 'entries', 'fill', 'find', 'findIndex', 'includes', 'keys']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u6570\u7ec4\u6709 7 \u4e2a\u5c5e\u6027\uff0c\u4f1a\u88ab<code>with</code>\u547d\u4ee4\u6392\u9664\u3002</p> <pre><code>// \u6ca1\u6709 unscopables \u65f6\nclass MyClass {\n  foo() { return 1; }\n}\n\nvar foo = function () { return 2; };\n\nwith (MyClass.prototype) {\n  foo(); // 1\n}\n\n// \u6709 unscopables \u65f6\nclass MyClass {\n  foo() { return 1; }\n  get [Symbol.unscopables]() {\n    return { foo: true };\n  }\n}\n\nvar foo = function () { return 2; };\n\nwith (MyClass.prototype) {\n  foo(); // 2\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u6307\u5b9a<code>Symbol.unscopables</code>\u5c5e\u6027\uff0c\u4f7f\u5f97<code>with</code>\u8bed\u6cd5\u5757\u4e0d\u4f1a\u5728\u5f53\u524d\u4f5c\u7528\u57df\u5bfb\u627e<code>foo</code>\u5c5e\u6027\uff0c\u5373<code>foo</code>\u5c06\u6307\u5411\u5916\u5c42\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/","title":"14-Set \u548c Map \u6570\u636e\u7ed3\u6784","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#set","title":"Set","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u63d0\u4f9b\u4e86\u65b0\u7684\u6570\u636e\u7ed3\u6784 Set\u3002\u5b83\u7c7b\u4f3c\u4e8e\u6570\u7ec4\uff0c\u4f46\u662f\u6210\u5458\u7684\u503c\u90fd\u662f\u552f\u4e00\u7684\uff0c\u6ca1\u6709\u91cd\u590d\u7684\u503c\u3002</p> <p><code>Set</code>\u672c\u8eab\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 Set \u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>const s = new Set();\n\n[2, 3, 5, 4, 5, 2, 2].forEach(x =&gt; s.add(x));\n\nfor (let i of s) {\n  console.log(i);\n}\n// 2 3 5 4\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7<code>add()</code>\u65b9\u6cd5\u5411 Set \u7ed3\u6784\u52a0\u5165\u6210\u5458\uff0c\u7ed3\u679c\u8868\u660e Set \u7ed3\u6784\u4e0d\u4f1a\u6dfb\u52a0\u91cd\u590d\u7684\u503c\u3002</p> <p><code>Set</code>\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\uff08\u6216\u8005\u5177\u6709 iterable \u63a5\u53e3\u7684\u5176\u4ed6\u6570\u636e\u7ed3\u6784\uff09\u4f5c\u4e3a\u53c2\u6570\uff0c\u7528\u6765\u521d\u59cb\u5316\u3002</p> <pre><code>// \u4f8b\u4e00\nconst set = new Set([1, 2, 3, 4, 4]);\n[...set]\n// [1, 2, 3, 4]\n\n// \u4f8b\u4e8c\nconst items = new Set([1, 2, 3, 4, 5, 5, 5, 5]);\nitems.size // 5\n\n// \u4f8b\u4e09\nconst set = new Set(document.querySelectorAll('div'));\nset.size // 56\n\n// \u7c7b\u4f3c\u4e8e\nconst set = new Set();\ndocument\n .querySelectorAll('div')\n .forEach(div =&gt; set.add(div));\nset.size // 56\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4f8b\u4e00\u548c\u4f8b\u4e8c\u90fd\u662f<code>Set</code>\u51fd\u6570\u63a5\u53d7\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f8b\u4e09\u662f\u63a5\u53d7\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002</p> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u5c55\u793a\u4e86\u4e00\u79cd\u53bb\u9664\u6570\u7ec4\u91cd\u590d\u6210\u5458\u7684\u65b9\u6cd5\u3002</p> <pre><code>// \u53bb\u9664\u6570\u7ec4\u7684\u91cd\u590d\u6210\u5458\n[...new Set(array)]\n</code></pre> <p>\u4e0a\u9762\u7684\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7528\u4e8e\uff0c\u53bb\u9664\u5b57\u7b26\u4e32\u91cc\u9762\u7684\u91cd\u590d\u5b57\u7b26\u3002</p> <pre><code>[...new Set('ababbc')].join('')\n// \"abc\"\n</code></pre> <p>\u5411 Set \u52a0\u5165\u503c\u7684\u65f6\u5019\uff0c\u4e0d\u4f1a\u53d1\u751f\u7c7b\u578b\u8f6c\u6362\uff0c\u6240\u4ee5<code>5</code>\u548c<code>\"5\"</code>\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u503c\u3002Set \u5185\u90e8\u5224\u65ad\u4e24\u4e2a\u503c\u662f\u5426\u4e0d\u540c\uff0c\u4f7f\u7528\u7684\u7b97\u6cd5\u53eb\u505a\u201cSame-value-zero equality\u201d\uff0c\u5b83\u7c7b\u4f3c\u4e8e\u7cbe\u786e\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>===</code>\uff09\uff0c\u4e3b\u8981\u7684\u533a\u522b\u662f\u5411 Set \u52a0\u5165\u503c\u65f6\u8ba4\u4e3a<code>NaN</code>\u7b49\u4e8e\u81ea\u8eab\uff0c\u800c\u7cbe\u786e\u76f8\u7b49\u8fd0\u7b97\u7b26\u8ba4\u4e3a<code>NaN</code>\u4e0d\u7b49\u4e8e\u81ea\u8eab\u3002</p> <pre><code>let set = new Set();\nlet a = NaN;\nlet b = NaN;\nset.add(a);\nset.add(b);\nset // Set {NaN}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5411 Set \u5b9e\u4f8b\u6dfb\u52a0\u4e86\u4e24\u6b21<code>NaN</code>\uff0c\u4f46\u662f\u53ea\u4f1a\u52a0\u5165\u4e00\u4e2a\u3002\u8fd9\u8868\u660e\uff0c\u5728 Set \u5185\u90e8\uff0c\u4e24\u4e2a<code>NaN</code>\u662f\u76f8\u7b49\u7684\u3002</p> <p>\u53e6\u5916\uff0c\u4e24\u4e2a\u5bf9\u8c61\u603b\u662f\u4e0d\u76f8\u7b49\u7684\u3002</p> <pre><code>let set = new Set();\n\nset.add({});\nset.size // 1\n\nset.add({});\nset.size // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u7531\u4e8e\u4e24\u4e2a\u7a7a\u5bf9\u8c61\u4e0d\u76f8\u7b49\uff0c\u6240\u4ee5\u5b83\u4eec\u88ab\u89c6\u4e3a\u4e24\u4e2a\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#set_1","title":"Set \u5b9e\u4f8b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5","text":"<p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u6709\u4ee5\u4e0b\u5c5e\u6027\u3002</p> <ul> <li><code>Set.prototype.constructor</code>\uff1a\u6784\u9020\u51fd\u6570\uff0c\u9ed8\u8ba4\u5c31\u662f<code>Set</code>\u51fd\u6570\u3002</li> <li><code>Set.prototype.size</code>\uff1a\u8fd4\u56de<code>Set</code>\u5b9e\u4f8b\u7684\u6210\u5458\u603b\u6570\u3002</li> </ul> <p>Set \u5b9e\u4f8b\u7684\u65b9\u6cd5\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u64cd\u4f5c\u65b9\u6cd5\uff08\u7528\u4e8e\u64cd\u4f5c\u6570\u636e\uff09\u548c\u904d\u5386\u65b9\u6cd5\uff08\u7528\u4e8e\u904d\u5386\u6210\u5458\uff09\u3002\u4e0b\u9762\u5148\u4ecb\u7ecd\u56db\u4e2a\u64cd\u4f5c\u65b9\u6cd5\u3002</p> <ul> <li><code>Set.prototype.add(value)</code>\uff1a\u6dfb\u52a0\u67d0\u4e2a\u503c\uff0c\u8fd4\u56de Set \u7ed3\u6784\u672c\u8eab\u3002</li> <li><code>Set.prototype.delete(value)</code>\uff1a\u5220\u9664\u67d0\u4e2a\u503c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5220\u9664\u662f\u5426\u6210\u529f\u3002</li> <li><code>Set.prototype.has(value)</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u503c\u662f\u5426\u4e3a<code>Set</code>\u7684\u6210\u5458\u3002</li> <li><code>Set.prototype.clear()</code>\uff1a\u6e05\u9664\u6240\u6709\u6210\u5458\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\u7684\u5b9e\u4f8b\u5982\u4e0b\u3002</p> <pre><code>s.add(1).add(2).add(2);\n// \u6ce8\u610f2\u88ab\u52a0\u5165\u4e86\u4e24\u6b21\n\ns.size // 2\n\ns.has(1) // true\ns.has(2) // true\ns.has(3) // false\n\ns.delete(2) // true\ns.has(2) // false\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5bf9\u6bd4\uff0c\u5224\u65ad\u662f\u5426\u5305\u62ec\u4e00\u4e2a\u952e\uff0c<code>Object</code>\u7ed3\u6784\u548c<code>Set</code>\u7ed3\u6784\u5199\u6cd5\u7684\u4e0d\u540c\u3002</p> <pre><code>// \u5bf9\u8c61\u7684\u5199\u6cd5\nconst properties = {\n  'width': 1,\n  'height': 1\n};\n\nif (properties[someName]) {\n  // do something\n}\n\n// Set\u7684\u5199\u6cd5\nconst properties = new Set();\n\nproperties.add('width');\nproperties.add('height');\n\nif (properties.has(someName)) {\n  // do something\n}\n</code></pre> <p><code>Array.from()</code>\u65b9\u6cd5\u53ef\u4ee5\u5c06 Set \u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>const items = new Set([1, 2, 3, 4, 5]);\nconst array = Array.from(items);\n</code></pre> <p>\u8fd9\u5c31\u63d0\u4f9b\u4e86\u53bb\u9664\u6570\u7ec4\u91cd\u590d\u6210\u5458\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u3002</p> <pre><code>function dedupe(array) {\n  return Array.from(new Set(array));\n}\n\ndedupe([1, 1, 2, 3]) // [1, 2, 3]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_2","title":"\u904d\u5386\u64cd\u4f5c","text":"<p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u6709\u56db\u4e2a\u904d\u5386\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7528\u4e8e\u904d\u5386\u6210\u5458\u3002</p> <ul> <li><code>Set.prototype.keys()</code>\uff1a\u8fd4\u56de\u952e\u540d\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.values()</code>\uff1a\u8fd4\u56de\u952e\u503c\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.entries()</code>\uff1a\u8fd4\u56de\u952e\u503c\u5bf9\u7684\u904d\u5386\u5668</li> <li><code>Set.prototype.forEach()</code>\uff1a\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u904d\u5386\u6bcf\u4e2a\u6210\u5458</li> </ul> <p>\u9700\u8981\u7279\u522b\u6307\u51fa\u7684\u662f\uff0c<code>Set</code>\u7684\u904d\u5386\u987a\u5e8f\u5c31\u662f\u63d2\u5165\u987a\u5e8f\u3002\u8fd9\u4e2a\u7279\u6027\u6709\u65f6\u975e\u5e38\u6709\u7528\uff0c\u6bd4\u5982\u4f7f\u7528 Set \u4fdd\u5b58\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u5217\u8868\uff0c\u8c03\u7528\u65f6\u5c31\u80fd\u4fdd\u8bc1\u6309\u7167\u6dfb\u52a0\u987a\u5e8f\u8c03\u7528\u3002</p> <p>\uff081\uff09<code>keys()</code>\uff0c<code>values()</code>\uff0c<code>entries()</code></p> <p><code>keys</code>\u65b9\u6cd5\u3001<code>values</code>\u65b9\u6cd5\u3001<code>entries</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u90fd\u662f\u904d\u5386\u5668\u5bf9\u8c61\uff08\u8be6\u89c1\u300aIterator \u5bf9\u8c61\u300b\u4e00\u7ae0\uff09\u3002\u7531\u4e8e Set \u7ed3\u6784\u6ca1\u6709\u952e\u540d\uff0c\u53ea\u6709\u952e\u503c\uff08\u6216\u8005\u8bf4\u952e\u540d\u548c\u952e\u503c\u662f\u540c\u4e00\u4e2a\u503c\uff09\uff0c\u6240\u4ee5<code>keys</code>\u65b9\u6cd5\u548c<code>values</code>\u65b9\u6cd5\u7684\u884c\u4e3a\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\n\nfor (let item of set.keys()) {\n  console.log(item);\n}\n// red\n// green\n// blue\n\nfor (let item of set.values()) {\n  console.log(item);\n}\n// red\n// green\n// blue\n\nfor (let item of set.entries()) {\n  console.log(item);\n}\n// [\"red\", \"red\"]\n// [\"green\", \"green\"]\n// [\"blue\", \"blue\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>entries</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u904d\u5386\u5668\uff0c\u540c\u65f6\u5305\u62ec\u952e\u540d\u548c\u952e\u503c\uff0c\u6240\u4ee5\u6bcf\u6b21\u8f93\u51fa\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u7684\u4e24\u4e2a\u6210\u5458\u5b8c\u5168\u76f8\u7b49\u3002</p> <p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u9ed8\u8ba4\u53ef\u904d\u5386\uff0c\u5b83\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\u5c31\u662f\u5b83\u7684<code>values</code>\u65b9\u6cd5\u3002</p> <pre><code>Set.prototype[Symbol.iterator] === Set.prototype.values\n// true\n</code></pre> <p>\u8fd9\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u7701\u7565<code>values</code>\u65b9\u6cd5\uff0c\u76f4\u63a5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386 Set\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\n\nfor (let x of set) {\n  console.log(x);\n}\n// red\n// green\n// blue\n</code></pre> <p>\uff082\uff09<code>forEach()</code></p> <p>Set \u7ed3\u6784\u7684\u5b9e\u4f8b\u4e0e\u6570\u7ec4\u4e00\u6837\uff0c\u4e5f\u62e5\u6709<code>forEach</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u5bf9\u6bcf\u4e2a\u6210\u5458\u6267\u884c\u67d0\u79cd\u64cd\u4f5c\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <pre><code>let set = new Set([1, 4, 9]);\nset.forEach((value, key) =&gt; console.log(key + ' : ' + value))\n// 1 : 1\n// 4 : 4\n// 9 : 9\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c<code>forEach</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5c31\u662f\u4e00\u4e2a\u5904\u7406\u51fd\u6570\u3002\u8be5\u51fd\u6570\u7684\u53c2\u6570\u4e0e\u6570\u7ec4\u7684<code>forEach</code>\u4e00\u81f4\uff0c\u4f9d\u6b21\u4e3a\u952e\u503c\u3001\u952e\u540d\u3001\u96c6\u5408\u672c\u8eab\uff08\u4e0a\u4f8b\u7701\u7565\u4e86\u8be5\u53c2\u6570\uff09\u3002\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0cSet \u7ed3\u6784\u7684\u952e\u540d\u5c31\u662f\u952e\u503c\uff08\u4e24\u8005\u662f\u540c\u4e00\u4e2a\u503c\uff09\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u503c\u6c38\u8fdc\u90fd\u662f\u4e00\u6837\u7684\u3002</p> <p>\u53e6\u5916\uff0c<code>forEach</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u6709\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u7ed1\u5b9a\u5904\u7406\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u5bf9\u8c61\u3002</p> <p>\uff083\uff09\u904d\u5386\u7684\u5e94\u7528</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u5185\u90e8\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u7528\u4e8e Set \u7ed3\u6784\u3002</p> <pre><code>let set = new Set(['red', 'green', 'blue']);\nlet arr = [...set];\n// ['red', 'green', 'blue']\n</code></pre> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\u548c Set \u7ed3\u6784\u76f8\u7ed3\u5408\uff0c\u5c31\u53ef\u4ee5\u53bb\u9664\u6570\u7ec4\u7684\u91cd\u590d\u6210\u5458\u3002</p> <pre><code>let arr = [3, 5, 2, 2, 5, 5];\nlet unique = [...new Set(arr)];\n// [3, 5, 2]\n</code></pre> <p>\u800c\u4e14\uff0c\u6570\u7ec4\u7684<code>map</code>\u548c<code>filter</code>\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u95f4\u63a5\u7528\u4e8e Set \u4e86\u3002</p> <pre><code>let set = new Set([1, 2, 3]);\nset = new Set([...set].map(x =&gt; x * 2));\n// \u8fd4\u56deSet\u7ed3\u6784\uff1a{2, 4, 6}\n\nlet set = new Set([1, 2, 3, 4, 5]);\nset = new Set([...set].filter(x =&gt; (x % 2) == 0));\n// \u8fd4\u56deSet\u7ed3\u6784\uff1a{2, 4}\n</code></pre> <p>\u56e0\u6b64\u4f7f\u7528 Set \u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5b9e\u73b0\u5e76\u96c6\uff08Union\uff09\u3001\u4ea4\u96c6\uff08Intersect\uff09\u548c\u5dee\u96c6\uff08Difference\uff09\u3002</p> <pre><code>let a = new Set([1, 2, 3]);\nlet b = new Set([4, 3, 2]);\n\n// \u5e76\u96c6\nlet union = new Set([...a, ...b]);\n// Set {1, 2, 3, 4}\n\n// \u4ea4\u96c6\nlet intersect = new Set([...a].filter(x =&gt; b.has(x)));\n// set {2, 3}\n\n// \uff08a \u76f8\u5bf9\u4e8e b \u7684\uff09\u5dee\u96c6\nlet difference = new Set([...a].filter(x =&gt; !b.has(x)));\n// Set {1}\n</code></pre> <p>\u5982\u679c\u60f3\u5728\u904d\u5386\u64cd\u4f5c\u4e2d\uff0c\u540c\u6b65\u6539\u53d8\u539f\u6765\u7684 Set \u7ed3\u6784\uff0c\u76ee\u524d\u6ca1\u6709\u76f4\u63a5\u7684\u65b9\u6cd5\uff0c\u4f46\u6709\u4e24\u79cd\u53d8\u901a\u65b9\u6cd5\u3002\u4e00\u79cd\u662f\u5229\u7528\u539f Set \u7ed3\u6784\u6620\u5c04\u51fa\u4e00\u4e2a\u65b0\u7684\u7ed3\u6784\uff0c\u7136\u540e\u8d4b\u503c\u7ed9\u539f\u6765\u7684 Set \u7ed3\u6784\uff1b\u53e6\u4e00\u79cd\u662f\u5229\u7528<code>Array.from</code>\u65b9\u6cd5\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\nlet set = new Set([1, 2, 3]);\nset = new Set([...set].map(val =&gt; val * 2));\n// set\u7684\u503c\u662f2, 4, 6\n\n// \u65b9\u6cd5\u4e8c\nlet set = new Set([1, 2, 3]);\nset = new Set(Array.from(set, val =&gt; val * 2));\n// set\u7684\u503c\u662f2, 4, 6\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\uff0c\u76f4\u63a5\u5728\u904d\u5386\u64cd\u4f5c\u4e2d\u6539\u53d8\u539f\u6765\u7684 Set \u7ed3\u6784\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakset","title":"WeakSet","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_3","title":"\u542b\u4e49","text":"<p>WeakSet \u7ed3\u6784\u4e0e Set \u7c7b\u4f3c\uff0c\u4e5f\u662f\u4e0d\u91cd\u590d\u7684\u503c\u7684\u96c6\u5408\u3002\u4f46\u662f\uff0c\u5b83\u4e0e Set \u6709\u4e24\u4e2a\u533a\u522b\u3002</p> <p>\u9996\u5148\uff0cWeakSet \u7684\u6210\u5458\u53ea\u80fd\u662f\u5bf9\u8c61\u548c Symbol \u503c\uff0c\u800c\u4e0d\u80fd\u662f\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u3002</p> <pre><code>const ws = new WeakSet();\nws.add(1) // \u62a5\u9519\nws.add(Symbol()) // \u4e0d\u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bd5\u56fe\u5411 WeakSet \u6dfb\u52a0\u4e00\u4e2a\u6570\u503c\u548c<code>Symbol</code>\u503c\uff0c\u7ed3\u679c\u524d\u8005\u62a5\u9519\u4e86\uff0c\u56e0\u4e3a WeakSet \u53ea\u80fd\u653e\u7f6e\u5bf9\u8c61\u548c Symbol \u503c\u3002</p> <p>\u5176\u6b21\uff0cWeakSet \u4e2d\u7684\u5bf9\u8c61\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u5373\u5783\u573e\u56de\u6536\u673a\u5236\u4e0d\u8003\u8651 WeakSet \u5bf9\u8be5\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5176\u4ed6\u5bf9\u8c61\u90fd\u4e0d\u518d\u5f15\u7528\u8be5\u5bf9\u8c61\uff0c\u90a3\u4e48\u5783\u573e\u56de\u6536\u673a\u5236\u4f1a\u81ea\u52a8\u56de\u6536\u8be5\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\uff0c\u4e0d\u8003\u8651\u8be5\u5bf9\u8c61\u8fd8\u5b58\u5728\u4e8e WeakSet \u4e4b\u4e2d\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5783\u573e\u56de\u6536\u673a\u5236\u6839\u636e\u5bf9\u8c61\u7684\u53ef\u8fbe\u6027\uff08reachability\uff09\u6765\u5224\u65ad\u56de\u6536\uff0c\u5982\u679c\u5bf9\u8c61\u8fd8\u80fd\u88ab\u8bbf\u95ee\u5230\uff0c\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4e0d\u4f1a\u91ca\u653e\u8fd9\u5757\u5185\u5b58\u3002\u7ed3\u675f\u4f7f\u7528\u8be5\u503c\u4e4b\u540e\uff0c\u6709\u65f6\u4f1a\u5fd8\u8bb0\u53d6\u6d88\u5f15\u7528\uff0c\u5bfc\u81f4\u5185\u5b58\u65e0\u6cd5\u91ca\u653e\uff0c\u8fdb\u800c\u53ef\u80fd\u4f1a\u5f15\u53d1\u5185\u5b58\u6cc4\u6f0f\u3002WeakSet \u91cc\u9762\u7684\u5f15\u7528\uff0c\u90fd\u4e0d\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u6240\u4ee5\u5c31\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u6b64\uff0cWeakSet \u9002\u5408\u4e34\u65f6\u5b58\u653e\u4e00\u7ec4\u5bf9\u8c61\uff0c\u4ee5\u53ca\u5b58\u653e\u8ddf\u5bf9\u8c61\u7ed1\u5b9a\u7684\u4fe1\u606f\u3002\u53ea\u8981\u8fd9\u4e9b\u5bf9\u8c61\u5728\u5916\u90e8\u6d88\u5931\uff0c\u5b83\u5728 WeakSet \u91cc\u9762\u7684\u5f15\u7528\u5c31\u4f1a\u81ea\u52a8\u6d88\u5931\u3002</p> <p>\u7531\u4e8e\u4e0a\u9762\u8fd9\u4e2a\u7279\u70b9\uff0cWeakSet \u7684\u6210\u5458\u662f\u4e0d\u9002\u5408\u5f15\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u4f1a\u968f\u65f6\u6d88\u5931\u3002\u53e6\u5916\uff0c\u7531\u4e8e WeakSet \u5185\u90e8\u6709\u591a\u5c11\u4e2a\u6210\u5458\uff0c\u53d6\u51b3\u4e8e\u5783\u573e\u56de\u6536\u673a\u5236\u6709\u6ca1\u6709\u8fd0\u884c\uff0c\u8fd0\u884c\u524d\u540e\u5f88\u53ef\u80fd\u6210\u5458\u4e2a\u6570\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u800c\u5783\u573e\u56de\u6536\u673a\u5236\u4f55\u65f6\u8fd0\u884c\u662f\u4e0d\u53ef\u9884\u6d4b\u7684\uff0c\u56e0\u6b64 ES6 \u89c4\u5b9a WeakSet \u4e0d\u53ef\u904d\u5386\u3002</p> <p>\u8fd9\u4e9b\u7279\u70b9\u540c\u6837\u9002\u7528\u4e8e\u672c\u7ae0\u540e\u9762\u8981\u4ecb\u7ecd\u7684 WeakMap \u7ed3\u6784\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_4","title":"\u8bed\u6cd5","text":"<p>WeakSet \u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u521b\u5efa WeakSet \u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>const ws = new WeakSet();\n</code></pre> <p>\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0cWeakSet \u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u6216\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u3002\uff08\u5b9e\u9645\u4e0a\uff0c\u4efb\u4f55\u5177\u6709 Iterable \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a WeakSet \u7684\u53c2\u6570\u3002\uff09\u8be5\u6570\u7ec4\u7684\u6240\u6709\u6210\u5458\uff0c\u90fd\u4f1a\u81ea\u52a8\u6210\u4e3a WeakSet \u5b9e\u4f8b\u5bf9\u8c61\u7684\u6210\u5458\u3002</p> <pre><code>const a = [[1, 2], [3, 4]];\nconst ws = new WeakSet(a);\n// WeakSet {[1, 2], [3, 4]}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u6709\u4e24\u4e2a\u6210\u5458\uff0c\u4e5f\u90fd\u662f\u6570\u7ec4\u3002\u5c06<code>a</code>\u4f5c\u4e3a WeakSet \u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\uff0c<code>a</code>\u7684\u6210\u5458\u4f1a\u81ea\u52a8\u6210\u4e3a WeakSet \u7684\u6210\u5458\u3002</p> <p>\u6ce8\u610f\uff0c\u662f<code>a</code>\u6570\u7ec4\u7684\u6210\u5458\u6210\u4e3a WeakSet \u7684\u6210\u5458\uff0c\u800c\u4e0d\u662f<code>a</code>\u6570\u7ec4\u672c\u8eab\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6570\u7ec4\u7684\u6210\u5458\u53ea\u80fd\u662f\u5bf9\u8c61\u3002</p> <pre><code>const b = [3, 4];\nconst ws = new WeakSet(b);\n// Uncaught TypeError: Invalid value used in weak set(\u2026)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>b</code>\u7684\u6210\u5458\u4e0d\u662f\u5bf9\u8c61\uff0c\u52a0\u5165 WeakSet \u5c31\u4f1a\u62a5\u9519\u3002</p> <p>WeakSet \u7ed3\u6784\u6709\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u6cd5\u3002</p> <ul> <li>WeakSet.prototype.add(value)\uff1a\u5411 WeakSet \u5b9e\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u65b0\u6210\u5458\uff0c\u8fd4\u56de WeakSet \u7ed3\u6784\u672c\u8eab\u3002</li> <li>WeakSet.prototype.delete(value)\uff1a\u6e05\u9664 WeakSet \u5b9e\u4f8b\u7684\u6307\u5b9a\u6210\u5458\uff0c\u6e05\u9664\u6210\u529f\u8fd4\u56de<code>true</code>\uff0c\u5982\u679c\u5728 WeakSet \u4e2d\u627e\u4e0d\u5230\u8be5\u6210\u5458\u6216\u8be5\u6210\u5458\u4e0d\u662f\u5bf9\u8c61\uff0c\u8fd4\u56de<code>false</code>\u3002</li> <li>WeakSet.prototype.has(value)\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u503c\u662f\u5426\u5728 WeakSet \u5b9e\u4f8b\u4e4b\u4e2d\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const ws = new WeakSet();\nconst obj = {};\nconst foo = {};\n\nws.add(window);\nws.add(obj);\n\nws.has(window); // true\nws.has(foo); // false\n\nws.delete(window); // true\nws.has(window); // false\n</code></pre> <p>WeakSet \u6ca1\u6709<code>size</code>\u5c5e\u6027\uff0c\u6ca1\u6709\u529e\u6cd5\u904d\u5386\u5b83\u7684\u6210\u5458\u3002</p> <pre><code>ws.size // undefined\nws.forEach // undefined\n\nws.forEach(function(item){ console.log('WeakSet has ' + item)})\n// TypeError: undefined is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bd5\u56fe\u83b7\u53d6<code>size</code>\u548c<code>forEach</code>\u5c5e\u6027\uff0c\u7ed3\u679c\u90fd\u4e0d\u80fd\u6210\u529f\u3002</p> <p>WeakSet \u4e0d\u80fd\u904d\u5386\uff0c\u662f\u56e0\u4e3a\u6210\u5458\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u968f\u65f6\u53ef\u80fd\u6d88\u5931\uff0c\u904d\u5386\u673a\u5236\u65e0\u6cd5\u4fdd\u8bc1\u6210\u5458\u7684\u5b58\u5728\uff0c\u5f88\u53ef\u80fd\u521a\u521a\u904d\u5386\u7ed3\u675f\uff0c\u6210\u5458\u5c31\u53d6\u4e0d\u5230\u4e86\u3002WeakSet \u7684\u4e00\u4e2a\u7528\u5904\uff0c\u662f\u50a8\u5b58 DOM \u8282\u70b9\uff0c\u800c\u4e0d\u7528\u62c5\u5fc3\u8fd9\u4e9b\u8282\u70b9\u4ece\u6587\u6863\u79fb\u9664\u65f6\uff0c\u4f1a\u5f15\u53d1\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u4e0b\u9762\u662f WeakSet \u7684\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const foos = new WeakSet()\nclass Foo {\n  constructor() {\n    foos.add(this)\n  }\n  method () {\n    if (!foos.has(this)) {\n      throw new TypeError('Foo.prototype.method \u53ea\u80fd\u5728Foo\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\uff01');\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4fdd\u8bc1\u4e86<code>Foo</code>\u7684\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728<code>Foo</code>\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\u3002\u8fd9\u91cc\u4f7f\u7528 WeakSet \u7684\u597d\u5904\u662f\uff0c<code>foos</code>\u5bf9\u5b9e\u4f8b\u7684\u5f15\u7528\uff0c\u4e0d\u4f1a\u88ab\u8ba1\u5165\u5185\u5b58\u56de\u6536\u673a\u5236\uff0c\u6240\u4ee5\u5220\u9664\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u4e0d\u7528\u8003\u8651<code>foos</code>\uff0c\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#map","title":"Map","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_5","title":"\u542b\u4e49\u548c\u57fa\u672c\u7528\u6cd5","text":"<p>JavaScript \u7684\u5bf9\u8c61\uff08Object\uff09\uff0c\u672c\u8d28\u4e0a\u662f\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff08Hash \u7ed3\u6784\uff09\uff0c\u4f46\u662f\u4f20\u7edf\u4e0a\u53ea\u80fd\u7528\u5b57\u7b26\u4e32\u5f53\u4f5c\u952e\u3002\u8fd9\u7ed9\u5b83\u7684\u4f7f\u7528\u5e26\u6765\u4e86\u5f88\u5927\u7684\u9650\u5236\u3002</p> <pre><code>const data = {};\nconst element = document.getElementById('myDiv');\n\ndata[element] = 'metadata';\ndata['[object HTMLDivElement]'] // \"metadata\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u539f\u610f\u662f\u5c06\u4e00\u4e2a DOM \u8282\u70b9\u4f5c\u4e3a\u5bf9\u8c61<code>data</code>\u7684\u952e\uff0c\u4f46\u662f\u7531\u4e8e\u5bf9\u8c61\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u4f5c\u4e3a\u952e\u540d\uff0c\u6240\u4ee5<code>element</code>\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5b57\u7b26\u4e32<code>[object HTMLDivElement]</code>\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES6 \u63d0\u4f9b\u4e86 Map \u6570\u636e\u7ed3\u6784\u3002\u5b83\u7c7b\u4f3c\u4e8e\u5bf9\u8c61\uff0c\u4e5f\u662f\u952e\u503c\u5bf9\u7684\u96c6\u5408\uff0c\u4f46\u662f\u201c\u952e\u201d\u7684\u8303\u56f4\u4e0d\u9650\u4e8e\u5b57\u7b26\u4e32\uff0c\u5404\u79cd\u7c7b\u578b\u7684\u503c\uff08\u5305\u62ec\u5bf9\u8c61\uff09\u90fd\u53ef\u4ee5\u5f53\u4f5c\u952e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cObject \u7ed3\u6784\u63d0\u4f9b\u4e86\u201c\u5b57\u7b26\u4e32\u2014\u503c\u201d\u7684\u5bf9\u5e94\uff0cMap \u7ed3\u6784\u63d0\u4f9b\u4e86\u201c\u503c\u2014\u503c\u201d\u7684\u5bf9\u5e94\uff0c\u662f\u4e00\u79cd\u66f4\u5b8c\u5584\u7684 Hash \u7ed3\u6784\u5b9e\u73b0\u3002\u5982\u679c\u4f60\u9700\u8981\u201c\u952e\u503c\u5bf9\u201d\u7684\u6570\u636e\u7ed3\u6784\uff0cMap \u6bd4 Object \u66f4\u5408\u9002\u3002</p> <pre><code>const m = new Map();\nconst o = {p: 'Hello World'};\n\nm.set(o, 'content')\nm.get(o) // \"content\"\n\nm.has(o) // true\nm.delete(o) // true\nm.has(o) // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528 Map \u7ed3\u6784\u7684<code>set</code>\u65b9\u6cd5\uff0c\u5c06\u5bf9\u8c61<code>o</code>\u5f53\u4f5c<code>m</code>\u7684\u4e00\u4e2a\u952e\uff0c\u7136\u540e\u53c8\u4f7f\u7528<code>get</code>\u65b9\u6cd5\u8bfb\u53d6\u8fd9\u4e2a\u952e\uff0c\u63a5\u7740\u4f7f\u7528<code>delete</code>\u65b9\u6cd5\u5220\u9664\u4e86\u8fd9\u4e2a\u952e\u3002</p> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u5411 Map \u6dfb\u52a0\u6210\u5458\u3002\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0cMap \u4e5f\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002\u8be5\u6570\u7ec4\u7684\u6210\u5458\u662f\u4e00\u4e2a\u4e2a\u8868\u793a\u952e\u503c\u5bf9\u7684\u6570\u7ec4\u3002</p> <pre><code>const map = new Map([\n  ['name', '\u5f20\u4e09'],\n  ['title', 'Author']\n]);\n\nmap.size // 2\nmap.has('name') // true\nmap.get('name') // \"\u5f20\u4e09\"\nmap.has('title') // true\nmap.get('title') // \"Author\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u65b0\u5efa Map \u5b9e\u4f8b\u65f6\uff0c\u5c31\u6307\u5b9a\u4e86\u4e24\u4e2a\u952e<code>name</code>\u548c<code>title</code>\u3002</p> <p><code>Map</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f\u4e0b\u9762\u7684\u7b97\u6cd5\u3002</p> <pre><code>const items = [\n  ['name', '\u5f20\u4e09'],\n  ['title', 'Author']\n];\n\nconst map = new Map();\n\nitems.forEach(\n  ([key, value]) =&gt; map.set(key, value)\n);\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c\u4e0d\u4ec5\u4ec5\u662f\u6570\u7ec4\uff0c\u4efb\u4f55\u5177\u6709 Iterator \u63a5\u53e3\u3001\u4e14\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a\u53cc\u5143\u7d20\u7684\u6570\u7ec4\u7684\u6570\u636e\u7ed3\u6784\uff08\u8be6\u89c1\u300aIterator\u300b\u4e00\u7ae0\uff09\u90fd\u53ef\u4ee5\u5f53\u4f5c<code>Map</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c<code>Set</code>\u548c<code>Map</code>\u90fd\u53ef\u4ee5\u7528\u6765\u751f\u6210\u65b0\u7684 Map\u3002</p> <pre><code>const set = new Set([\n  ['foo', 1],\n  ['bar', 2]\n]);\nconst m1 = new Map(set);\nm1.get('foo') // 1\n\nconst m2 = new Map([['baz', 3]]);\nconst m3 = new Map(m2);\nm3.get('baz') // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u4f7f\u7528 Set \u5bf9\u8c61\u548c Map \u5bf9\u8c61\uff0c\u5f53\u4f5c<code>Map</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\uff0c\u7ed3\u679c\u90fd\u751f\u6210\u4e86\u65b0\u7684 Map \u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u5bf9\u540c\u4e00\u4e2a\u952e\u591a\u6b21\u8d4b\u503c\uff0c\u540e\u9762\u7684\u503c\u5c06\u8986\u76d6\u524d\u9762\u7684\u503c\u3002</p> <pre><code>const map = new Map();\n\nmap\n.set(1, 'aaa')\n.set(1, 'bbb');\n\nmap.get(1) // \"bbb\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u952e<code>1</code>\u8fde\u7eed\u8d4b\u503c\u4e24\u6b21\uff0c\u540e\u4e00\u6b21\u7684\u503c\u8986\u76d6\u524d\u4e00\u6b21\u7684\u503c\u3002</p> <p>\u5982\u679c\u8bfb\u53d6\u4e00\u4e2a\u672a\u77e5\u7684\u952e\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>new Map().get('asfddfsasadf')\n// undefined\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u5bf9\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff0cMap \u7ed3\u6784\u624d\u5c06\u5176\u89c6\u4e3a\u540c\u4e00\u4e2a\u952e\u3002\u8fd9\u4e00\u70b9\u8981\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>const map = new Map();\n\nmap.set(['a'], 555);\nmap.get(['a']) // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>set</code>\u548c<code>get</code>\u65b9\u6cd5\uff0c\u8868\u9762\u662f\u9488\u5bf9\u540c\u4e00\u4e2a\u952e\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6570\u7ec4\u5b9e\u4f8b\uff0c\u5185\u5b58\u5730\u5740\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u56e0\u6b64<code>get</code>\u65b9\u6cd5\u65e0\u6cd5\u8bfb\u53d6\u8be5\u952e\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u540c\u7406\uff0c\u540c\u6837\u7684\u503c\u7684\u4e24\u4e2a\u5b9e\u4f8b\uff0c\u5728 Map \u7ed3\u6784\u4e2d\u88ab\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002</p> <pre><code>const map = new Map();\n\nconst k1 = ['a'];\nconst k2 = ['a'];\n\nmap\n.set(k1, 111)\n.set(k2, 222);\n\nmap.get(k1) // 111\nmap.get(k2) // 222\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>k1</code>\u548c<code>k2</code>\u7684\u503c\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u5b83\u4eec\u5728 Map \u7ed3\u6784\u4e2d\u88ab\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002</p> <p>\u7531\u4e0a\u53ef\u77e5\uff0cMap \u7684\u952e\u5b9e\u9645\u4e0a\u662f\u8ddf\u5185\u5b58\u5730\u5740\u7ed1\u5b9a\u7684\uff0c\u53ea\u8981\u5185\u5b58\u5730\u5740\u4e0d\u4e00\u6837\uff0c\u5c31\u89c6\u4e3a\u4e24\u4e2a\u952e\u3002\u8fd9\u5c31\u89e3\u51b3\u4e86\u540c\u540d\u5c5e\u6027\u78b0\u649e\uff08clash\uff09\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6269\u5c55\u522b\u4eba\u7684\u5e93\u7684\u65f6\u5019\uff0c\u5982\u679c\u4f7f\u7528\u5bf9\u8c61\u4f5c\u4e3a\u952e\u540d\uff0c\u5c31\u4e0d\u7528\u62c5\u5fc3\u81ea\u5df1\u7684\u5c5e\u6027\u4e0e\u539f\u4f5c\u8005\u7684\u5c5e\u6027\u540c\u540d\u3002</p> <p>\u5982\u679c Map \u7684\u952e\u662f\u4e00\u4e2a\u7b80\u5355\u7c7b\u578b\u7684\u503c\uff08\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\uff09\uff0c\u5219\u53ea\u8981\u4e24\u4e2a\u503c\u4e25\u683c\u76f8\u7b49\uff0cMap \u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u952e\uff0c\u6bd4\u5982<code>0</code>\u548c<code>-0</code>\u5c31\u662f\u4e00\u4e2a\u952e\uff0c\u5e03\u5c14\u503c<code>true</code>\u548c\u5b57\u7b26\u4e32<code>true</code>\u5219\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u952e\u3002\u53e6\u5916\uff0c<code>undefined</code>\u548c<code>null</code>\u4e5f\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u952e\u3002\u867d\u7136<code>NaN</code>\u4e0d\u4e25\u683c\u76f8\u7b49\u4e8e\u81ea\u8eab\uff0c\u4f46 Map \u5c06\u5176\u89c6\u4e3a\u540c\u4e00\u4e2a\u952e\u3002</p> <pre><code>let map = new Map();\n\nmap.set(-0, 123);\nmap.get(+0) // 123\n\nmap.set(true, 1);\nmap.set('true', 2);\nmap.get(true) // 1\n\nmap.set(undefined, 3);\nmap.set(null, 4);\nmap.get(undefined) // 3\n\nmap.set(NaN, 123);\nmap.get(NaN) // 123\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_6","title":"\u5b9e\u4f8b\u7684\u5c5e\u6027\u548c\u64cd\u4f5c\u65b9\u6cd5","text":"<p>Map \u7ed3\u6784\u7684\u5b9e\u4f8b\u6709\u4ee5\u4e0b\u5c5e\u6027\u548c\u64cd\u4f5c\u65b9\u6cd5\u3002</p> <p>\uff081\uff09size \u5c5e\u6027</p> <p><code>size</code>\u5c5e\u6027\u8fd4\u56de Map \u7ed3\u6784\u7684\u6210\u5458\u603b\u6570\u3002</p> <pre><code>const map = new Map();\nmap.set('foo', true);\nmap.set('bar', false);\n\nmap.size // 2\n</code></pre> <p>\uff082\uff09Map.prototype.set(key, value)</p> <p><code>set</code>\u65b9\u6cd5\u8bbe\u7f6e\u952e\u540d<code>key</code>\u5bf9\u5e94\u7684\u952e\u503c\u4e3a<code>value</code>\uff0c\u7136\u540e\u8fd4\u56de\u6574\u4e2a Map \u7ed3\u6784\u3002\u5982\u679c<code>key</code>\u5df2\u7ecf\u6709\u503c\uff0c\u5219\u952e\u503c\u4f1a\u88ab\u66f4\u65b0\uff0c\u5426\u5219\u5c31\u65b0\u751f\u6210\u8be5\u952e\u3002</p> <pre><code>const m = new Map();\n\nm.set('edition', 6)        // \u952e\u662f\u5b57\u7b26\u4e32\nm.set(262, 'standard')     // \u952e\u662f\u6570\u503c\nm.set(undefined, 'nah')    // \u952e\u662f undefined\n</code></pre> <p><code>set</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u5f53\u524d\u7684<code>Map</code>\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\u3002</p> <pre><code>let map = new Map()\n  .set(1, 'a')\n  .set(2, 'b')\n  .set(3, 'c');\n</code></pre> <p>\uff083\uff09Map.prototype.get(key)</p> <p><code>get</code>\u65b9\u6cd5\u8bfb\u53d6<code>key</code>\u5bf9\u5e94\u7684\u952e\u503c\uff0c\u5982\u679c\u627e\u4e0d\u5230<code>key</code>\uff0c\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>const m = new Map();\n\nconst hello = function() {console.log('hello');};\nm.set(hello, 'Hello ES6!') // \u952e\u662f\u51fd\u6570\n\nm.get(hello)  // Hello ES6!\n</code></pre> <p>\uff084\uff09Map.prototype.has(key)</p> <p><code>has</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u67d0\u4e2a\u952e\u662f\u5426\u5728\u5f53\u524d Map \u5bf9\u8c61\u4e4b\u4e2d\u3002</p> <pre><code>const m = new Map();\n\nm.set('edition', 6);\nm.set(262, 'standard');\nm.set(undefined, 'nah');\n\nm.has('edition')     // true\nm.has('years')       // false\nm.has(262)           // true\nm.has(undefined)     // true\n</code></pre> <p>\uff085\uff09Map.prototype.delete(key)</p> <p><code>delete()</code>\u65b9\u6cd5\u5220\u9664\u67d0\u4e2a\u952e\uff0c\u8fd4\u56de<code>true</code>\u3002\u5982\u679c\u5220\u9664\u5931\u8d25\uff0c\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>const m = new Map();\nm.set(undefined, 'nah');\nm.has(undefined)     // true\n\nm.delete(undefined)\nm.has(undefined)       // false\n</code></pre> <p>\uff086\uff09Map.prototype.clear()</p> <p><code>clear()</code>\u65b9\u6cd5\u6e05\u9664\u6240\u6709\u6210\u5458\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <pre><code>let map = new Map();\nmap.set('foo', true);\nmap.set('bar', false);\n\nmap.size // 2\nmap.clear()\nmap.size // 0\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_7","title":"\u904d\u5386\u65b9\u6cd5","text":"<p>Map \u7ed3\u6784\u539f\u751f\u63d0\u4f9b\u4e09\u4e2a\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\u548c\u4e00\u4e2a\u904d\u5386\u65b9\u6cd5\u3002</p> <ul> <li><code>Map.prototype.keys()</code>\uff1a\u8fd4\u56de\u952e\u540d\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.values()</code>\uff1a\u8fd4\u56de\u952e\u503c\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.entries()</code>\uff1a\u8fd4\u56de\u6240\u6709\u6210\u5458\u7684\u904d\u5386\u5668\u3002</li> <li><code>Map.prototype.forEach()</code>\uff1a\u904d\u5386 Map \u7684\u6240\u6709\u6210\u5458\u3002</li> </ul> <p>\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0cMap \u7684\u904d\u5386\u987a\u5e8f\u5c31\u662f\u63d2\u5165\u987a\u5e8f\u3002</p> <pre><code>const map = new Map([\n  ['F', 'no'],\n  ['T',  'yes'],\n]);\n\nfor (let key of map.keys()) {\n  console.log(key);\n}\n// \"F\"\n// \"T\"\n\nfor (let value of map.values()) {\n  console.log(value);\n}\n// \"no\"\n// \"yes\"\n\nfor (let item of map.entries()) {\n  console.log(item[0], item[1]);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n\n// \u6216\u8005\nfor (let [key, value] of map.entries()) {\n  console.log(key, value);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n\n// \u7b49\u540c\u4e8e\u4f7f\u7528map.entries()\nfor (let [key, value] of map) {\n  console.log(key, value);\n}\n// \"F\" \"no\"\n// \"T\" \"yes\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6700\u540e\u7684\u90a3\u4e2a\u4f8b\u5b50\uff0c\u8868\u793a Map \u7ed3\u6784\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u63a5\u53e3\uff08<code>Symbol.iterator</code>\u5c5e\u6027\uff09\uff0c\u5c31\u662f<code>entries</code>\u65b9\u6cd5\u3002</p> <pre><code>map[Symbol.iterator] === map.entries\n// true\n</code></pre> <p>Map \u7ed3\u6784\u8f6c\u4e3a\u6570\u7ec4\u7ed3\u6784\uff0c\u6bd4\u8f83\u5feb\u901f\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3002</p> <pre><code>const map = new Map([\n  [1, 'one'],\n  [2, 'two'],\n  [3, 'three'],\n]);\n\n[...map.keys()]\n// [1, 2, 3]\n\n[...map.values()]\n// ['one', 'two', 'three']\n\n[...map.entries()]\n// [[1,'one'], [2, 'two'], [3, 'three']]\n\n[...map]\n// [[1,'one'], [2, 'two'], [3, 'three']]\n</code></pre> <p>\u7ed3\u5408\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\u3001<code>filter</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5b9e\u73b0 Map \u7684\u904d\u5386\u548c\u8fc7\u6ee4\uff08Map \u672c\u8eab\u6ca1\u6709<code>map</code>\u548c<code>filter</code>\u65b9\u6cd5\uff09\u3002</p> <pre><code>const map0 = new Map()\n  .set(1, 'a')\n  .set(2, 'b')\n  .set(3, 'c');\n\nconst map1 = new Map(\n  [...map0].filter(([k, v]) =&gt; k &lt; 3)\n);\n// \u4ea7\u751f Map \u7ed3\u6784 {1 =&gt; 'a', 2 =&gt; 'b'}\n\nconst map2 = new Map(\n  [...map0].map(([k, v]) =&gt; [k * 2, '_' + v])\n    );\n// \u4ea7\u751f Map \u7ed3\u6784 {2 =&gt; '_a', 4 =&gt; '_b', 6 =&gt; '_c'}\n</code></pre> <p>\u6b64\u5916\uff0cMap \u8fd8\u6709\u4e00\u4e2a<code>forEach</code>\u65b9\u6cd5\uff0c\u4e0e\u6570\u7ec4\u7684<code>forEach</code>\u65b9\u6cd5\u7c7b\u4f3c\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u904d\u5386\u3002</p> <pre><code>map.forEach(function(value, key, map) {\n  console.log(\"Key: %s, Value: %s\", key, value);\n});\n</code></pre> <p><code>forEach</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u7ed1\u5b9a<code>this</code>\u3002</p> <pre><code>const reporter = {\n  report: function(key, value) {\n    console.log(\"Key: %s, Value: %s\", key, value);\n  }\n};\n\nmap.forEach(function(value, key, map) {\n  this.report(key, value);\n}, reporter);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>forEach</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u7684<code>this</code>\uff0c\u5c31\u6307\u5411<code>reporter</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_8","title":"\u4e0e\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u7684\u4e92\u76f8\u8f6c\u6362","text":"<p>\uff081\uff09Map \u8f6c\u4e3a\u6570\u7ec4</p> <p>\u524d\u9762\u5df2\u7ecf\u63d0\u8fc7\uff0cMap \u8f6c\u4e3a\u6570\u7ec4\u6700\u65b9\u4fbf\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3002</p> <pre><code>const myMap = new Map()\n  .set(true, 7)\n  .set({foo: 3}, ['abc']);\n[...myMap]\n// [ [ true, 7 ], [ { foo: 3 }, [ 'abc' ] ] ]\n</code></pre> <p>\uff082\uff09\u6570\u7ec4 \u8f6c\u4e3a Map</p> <p>\u5c06\u6570\u7ec4\u4f20\u5165 Map \u6784\u9020\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u8f6c\u4e3a Map\u3002</p> <pre><code>new Map([\n  [true, 7],\n  [{foo: 3}, ['abc']]\n])\n// Map {\n//   true =&gt; 7,\n//   Object {foo: 3} =&gt; ['abc']\n// }\n</code></pre> <p>\uff083\uff09Map \u8f6c\u4e3a\u5bf9\u8c61</p> <p>\u5982\u679c\u6240\u6709 Map \u7684\u952e\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5b83\u53ef\u4ee5\u65e0\u635f\u5730\u8f6c\u4e3a\u5bf9\u8c61\u3002</p> <pre><code>function strMapToObj(strMap) {\n  let obj = Object.create(null);\n  for (let [k,v] of strMap) {\n    obj[k] = v;\n  }\n  return obj;\n}\n\nconst myMap = new Map()\n  .set('yes', true)\n  .set('no', false);\nstrMapToObj(myMap)\n// { yes: true, no: false }\n</code></pre> <p>\u5982\u679c\u6709\u975e\u5b57\u7b26\u4e32\u7684\u952e\u540d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u952e\u540d\u4f1a\u88ab\u8f6c\u6210\u5b57\u7b26\u4e32\uff0c\u518d\u4f5c\u4e3a\u5bf9\u8c61\u7684\u952e\u540d\u3002</p> <p>\uff084\uff09\u5bf9\u8c61\u8f6c\u4e3a Map</p> <p>\u5bf9\u8c61\u8f6c\u4e3a Map \u53ef\u4ee5\u901a\u8fc7<code>Object.entries()</code>\u3002</p> <pre><code>let obj = {\"a\":1, \"b\":2};\nlet map = new Map(Object.entries(obj));\n</code></pre> <p>\u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u8f6c\u6362\u51fd\u6570\u3002</p> <pre><code>function objToStrMap(obj) {\n  let strMap = new Map();\n  for (let k of Object.keys(obj)) {\n    strMap.set(k, obj[k]);\n  }\n  return strMap;\n}\n\nobjToStrMap({yes: true, no: false})\n// Map {\"yes\" =&gt; true, \"no\" =&gt; false}\n</code></pre> <p>\uff085\uff09Map \u8f6c\u4e3a JSON</p> <p>Map \u8f6c\u4e3a JSON \u8981\u533a\u5206\u4e24\u79cd\u60c5\u51b5\u3002\u4e00\u79cd\u60c5\u51b5\u662f\uff0cMap \u7684\u952e\u540d\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u53ef\u4ee5\u9009\u62e9\u8f6c\u4e3a\u5bf9\u8c61 JSON\u3002</p> <pre><code>function strMapToJson(strMap) {\n  return JSON.stringify(strMapToObj(strMap));\n}\n\nlet myMap = new Map().set('yes', true).set('no', false);\nstrMapToJson(myMap)\n// '{\"yes\":true,\"no\":false}'\n</code></pre> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\uff0cMap \u7684\u952e\u540d\u6709\u975e\u5b57\u7b26\u4e32\uff0c\u8fd9\u65f6\u53ef\u4ee5\u9009\u62e9\u8f6c\u4e3a\u6570\u7ec4 JSON\u3002</p> <pre><code>function mapToArrayJson(map) {\n  return JSON.stringify([...map]);\n}\n\nlet myMap = new Map().set(true, 7).set({foo: 3}, ['abc']);\nmapToArrayJson(myMap)\n// '[[true,7],[{\"foo\":3},[\"abc\"]]]'\n</code></pre> <p>\uff086\uff09JSON \u8f6c\u4e3a Map</p> <p>JSON \u8f6c\u4e3a Map\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u952e\u540d\u90fd\u662f\u5b57\u7b26\u4e32\u3002</p> <pre><code>function jsonToStrMap(jsonStr) {\n  return objToStrMap(JSON.parse(jsonStr));\n}\n\njsonToStrMap('{\"yes\": true, \"no\": false}')\n// Map {'yes' =&gt; true, 'no' =&gt; false}\n</code></pre> <p>\u4f46\u662f\uff0c\u6709\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u6574\u4e2a JSON \u5c31\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u4e14\u6bcf\u4e2a\u6570\u7ec4\u6210\u5458\u672c\u8eab\uff0c\u53c8\u662f\u4e00\u4e2a\u6709\u4e24\u4e2a\u6210\u5458\u7684\u6570\u7ec4\u3002\u8fd9\u65f6\uff0c\u5b83\u53ef\u4ee5\u4e00\u4e00\u5bf9\u5e94\u5730\u8f6c\u4e3a Map\u3002\u8fd9\u5f80\u5f80\u662f Map \u8f6c\u4e3a\u6570\u7ec4 JSON \u7684\u9006\u64cd\u4f5c\u3002</p> <pre><code>function jsonToMap(jsonStr) {\n  return new Map(JSON.parse(jsonStr));\n}\n\njsonToMap('[[true,7],[{\"foo\":3},[\"abc\"]]]')\n// Map {true =&gt; 7, Object {foo: 3} =&gt; ['abc']}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakmap","title":"WeakMap","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#_9","title":"\u542b\u4e49","text":"<p><code>WeakMap</code>\u7ed3\u6784\u4e0e<code>Map</code>\u7ed3\u6784\u7c7b\u4f3c\uff0c\u4e5f\u662f\u7528\u4e8e\u751f\u6210\u952e\u503c\u5bf9\u7684\u96c6\u5408\u3002</p> <pre><code>// WeakMap \u53ef\u4ee5\u4f7f\u7528 set \u65b9\u6cd5\u6dfb\u52a0\u6210\u5458\nconst wm1 = new WeakMap();\nconst key = {foo: 1};\nwm1.set(key, 2);\nwm1.get(key) // 2\n\n// WeakMap \u4e5f\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\uff0c\n// \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\nconst k1 = [1, 2, 3];\nconst k2 = [4, 5, 6];\nconst wm2 = new WeakMap([[k1, 'foo'], [k2, 'bar']]);\nwm2.get(k2) // \"bar\"\n</code></pre> <p><code>WeakMap</code>\u4e0e<code>Map</code>\u7684\u533a\u522b\u6709\u4e24\u70b9\u3002</p> <p>\u9996\u5148\uff0c<code>WeakMap</code>\u53ea\u63a5\u53d7\u5bf9\u8c61\uff08<code>null</code>\u9664\u5916\uff09\u548c Symbol \u503c\u4f5c\u4e3a\u952e\u540d\uff0c\u4e0d\u63a5\u53d7\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u4f5c\u4e3a\u952e\u540d\u3002</p> <pre><code>const map = new WeakMap();\nmap.set(1, 2) // \u62a5\u9519\nmap.set(null, 2) // \u62a5\u9519\nmap.set(Symbol(), 2) // \u4e0d\u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u5c06\u6570\u503c<code>1</code>\u548c<code>null</code>\u4f5c\u4e3a WeakMap \u7684\u952e\u540d\uff0c\u90fd\u4f1a\u62a5\u9519\uff0c\u5c06 Symbol \u503c\u4f5c\u4e3a\u952e\u540d\u4e0d\u4f1a\u62a5\u9519\u3002</p> <p>\u5176\u6b21\uff0c<code>WeakMap</code>\u7684\u952e\u540d\u6240\u6307\u5411\u7684\u5bf9\u8c61\uff0c\u4e0d\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p><code>WeakMap</code>\u7684\u8bbe\u8ba1\u76ee\u7684\u5728\u4e8e\uff0c\u6709\u65f6\u6211\u4eec\u60f3\u5728\u67d0\u4e2a\u5bf9\u8c61\u4e0a\u9762\u5b58\u653e\u4e00\u4e9b\u6570\u636e\uff0c\u4f46\u662f\u8fd9\u4f1a\u5f62\u6210\u5bf9\u4e8e\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const e1 = document.getElementById('foo');\nconst e2 = document.getElementById('bar');\nconst arr = [\n  [e1, 'foo \u5143\u7d20'],\n  [e2, 'bar \u5143\u7d20'],\n];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>e1</code>\u548c<code>e2</code>\u662f\u4e24\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u901a\u8fc7<code>arr</code>\u6570\u7ec4\u5bf9\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u6dfb\u52a0\u4e00\u4e9b\u6587\u5b57\u8bf4\u660e\u3002\u8fd9\u5c31\u5f62\u6210\u4e86<code>arr</code>\u5bf9<code>e1</code>\u548c<code>e2</code>\u7684\u5f15\u7528\u3002</p> <p>\u4e00\u65e6\u4e0d\u518d\u9700\u8981\u8fd9\u4e24\u4e2a\u5bf9\u8c61\uff0c\u6211\u4eec\u5c31\u5fc5\u987b\u624b\u52a8\u5220\u9664\u8fd9\u4e2a\u5f15\u7528\uff0c\u5426\u5219\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4e0d\u4f1a\u91ca\u653e<code>e1</code>\u548c<code>e2</code>\u5360\u7528\u7684\u5185\u5b58\u3002</p> <pre><code>// \u4e0d\u9700\u8981 e1 \u548c e2 \u7684\u65f6\u5019\n// \u5fc5\u987b\u624b\u52a8\u5220\u9664\u5f15\u7528\narr [0] = null;\narr [1] = null;\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u7684\u5199\u6cd5\u663e\u7136\u5f88\u4e0d\u65b9\u4fbf\u3002\u4e00\u65e6\u5fd8\u4e86\u5199\uff0c\u5c31\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u9732\u3002</p> <p>WeakMap \u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u8bde\u751f\u7684\uff0c\u5b83\u7684\u952e\u540d\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u90fd\u662f\u5f31\u5f15\u7528\uff0c\u5373\u5783\u573e\u56de\u6536\u673a\u5236\u4e0d\u5c06\u8be5\u5f15\u7528\u8003\u8651\u5728\u5185\u3002\u56e0\u6b64\uff0c\u53ea\u8981\u6240\u5f15\u7528\u7684\u5bf9\u8c61\u7684\u5176\u4ed6\u5f15\u7528\u90fd\u88ab\u6e05\u9664\uff0c\u5783\u573e\u56de\u6536\u673a\u5236\u5c31\u4f1a\u91ca\u653e\u8be5\u5bf9\u8c61\u6240\u5360\u7528\u7684\u5185\u5b58\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u4e0d\u518d\u9700\u8981\uff0cWeakMap \u91cc\u9762\u7684\u952e\u540d\u5bf9\u8c61\u548c\u6240\u5bf9\u5e94\u7684\u952e\u503c\u5bf9\u4f1a\u81ea\u52a8\u6d88\u5931\uff0c\u4e0d\u7528\u624b\u52a8\u5220\u9664\u5f15\u7528\u3002</p> <p>\u57fa\u672c\u4e0a\uff0c\u5982\u679c\u4f60\u8981\u5f80\u5bf9\u8c61\u4e0a\u6dfb\u52a0\u6570\u636e\uff0c\u53c8\u4e0d\u60f3\u5e72\u6270\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 WeakMap\u3002\u4e00\u4e2a\u5178\u578b\u5e94\u7528\u573a\u666f\u662f\uff0c\u5728\u7f51\u9875\u7684 DOM \u5143\u7d20\u4e0a\u6dfb\u52a0\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528<code>WeakMap</code>\u7ed3\u6784\u3002\u5f53\u8be5 DOM \u5143\u7d20\u88ab\u6e05\u9664\uff0c\u5176\u6240\u5bf9\u5e94\u7684<code>WeakMap</code>\u8bb0\u5f55\u5c31\u4f1a\u81ea\u52a8\u88ab\u79fb\u9664\u3002</p> <pre><code>const wm = new WeakMap();\n\nconst element = document.getElementById('example');\n\nwm.set(element, 'some information');\nwm.get(element) // \"some information\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u65b0\u5efa\u4e00\u4e2a WeakMap \u5b9e\u4f8b\u3002\u7136\u540e\uff0c\u5c06\u4e00\u4e2a DOM \u8282\u70b9\u4f5c\u4e3a\u952e\u540d\u5b58\u5165\u8be5\u5b9e\u4f8b\uff0c\u5e76\u5c06\u4e00\u4e9b\u9644\u52a0\u4fe1\u606f\u4f5c\u4e3a\u952e\u503c\uff0c\u4e00\u8d77\u5b58\u653e\u5728 WeakMap \u91cc\u9762\u3002\u8fd9\u65f6\uff0cWeakMap \u91cc\u9762\u5bf9<code>element</code>\u7684\u5f15\u7528\u5c31\u662f\u5f31\u5f15\u7528\uff0c\u4e0d\u4f1a\u88ab\u8ba1\u5165\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0a\u9762\u7684 DOM \u8282\u70b9\u5bf9\u8c61\u9664\u4e86 WeakMap \u7684\u5f31\u5f15\u7528\u5916\uff0c\u5176\u4ed6\u4f4d\u7f6e\u5bf9\u8be5\u5bf9\u8c61\u7684\u5f15\u7528\u4e00\u65e6\u6d88\u9664\uff0c\u8be5\u5bf9\u8c61\u5360\u7528\u7684\u5185\u5b58\u5c31\u4f1a\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u91ca\u653e\u3002WeakMap \u4fdd\u5b58\u7684\u8fd9\u4e2a\u952e\u503c\u5bf9\uff0c\u4e5f\u4f1a\u81ea\u52a8\u6d88\u5931\u3002</p> <p>\u603b\u4e4b\uff0c<code>WeakMap</code>\u7684\u4e13\u7528\u573a\u5408\u5c31\u662f\uff0c\u5b83\u7684\u952e\u6240\u5bf9\u5e94\u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u6d88\u5931\u3002<code>WeakMap</code>\u7ed3\u6784\u6709\u52a9\u4e8e\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\u3002</p> <p>\u6ce8\u610f\uff0cWeakMap \u5f31\u5f15\u7528\u7684\u53ea\u662f\u952e\u540d\uff0c\u800c\u4e0d\u662f\u952e\u503c\u3002\u952e\u503c\u4f9d\u7136\u662f\u6b63\u5e38\u5f15\u7528\u3002</p> <pre><code>const wm = new WeakMap();\nlet key = {};\nlet obj = {foo: 1};\n\nwm.set(key, obj);\nobj = null;\nwm.get(key)\n// Object {foo: 1}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u952e\u503c<code>obj</code>\u662f\u6b63\u5e38\u5f15\u7528\u3002\u6240\u4ee5\uff0c\u5373\u4f7f\u5728 WeakMap \u5916\u90e8\u6d88\u9664\u4e86<code>obj</code>\u7684\u5f15\u7528\uff0cWeakMap \u5185\u90e8\u7684\u5f15\u7528\u4f9d\u7136\u5b58\u5728\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakmap_1","title":"WeakMap \u7684\u8bed\u6cd5","text":"<p>WeakMap \u4e0e Map \u5728 API \u4e0a\u7684\u533a\u522b\u4e3b\u8981\u662f\u4e24\u4e2a\uff0c\u4e00\u662f\u6ca1\u6709\u904d\u5386\u64cd\u4f5c\uff08\u5373\u6ca1\u6709<code>keys()</code>\u3001<code>values()</code>\u548c<code>entries()</code>\u65b9\u6cd5\uff09\uff0c\u4e5f\u6ca1\u6709<code>size</code>\u5c5e\u6027\u3002\u56e0\u4e3a\u6ca1\u6709\u529e\u6cd5\u5217\u51fa\u6240\u6709\u952e\u540d\uff0c\u67d0\u4e2a\u952e\u540d\u662f\u5426\u5b58\u5728\u5b8c\u5168\u4e0d\u53ef\u9884\u6d4b\uff0c\u8ddf\u5783\u573e\u56de\u6536\u673a\u5236\u662f\u5426\u8fd0\u884c\u76f8\u5173\u3002\u8fd9\u4e00\u523b\u53ef\u4ee5\u53d6\u5230\u952e\u540d\uff0c\u4e0b\u4e00\u523b\u5783\u573e\u56de\u6536\u673a\u5236\u7a81\u7136\u8fd0\u884c\u4e86\uff0c\u8fd9\u4e2a\u952e\u540d\u5c31\u6ca1\u4e86\uff0c\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u4e0d\u786e\u5b9a\u6027\uff0c\u5c31\u7edf\u4e00\u89c4\u5b9a\u4e0d\u80fd\u53d6\u5230\u952e\u540d\u3002\u4e8c\u662f\u65e0\u6cd5\u6e05\u7a7a\uff0c\u5373\u4e0d\u652f\u6301<code>clear</code>\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c<code>WeakMap</code>\u53ea\u6709\u56db\u4e2a\u65b9\u6cd5\u53ef\u7528\uff1a<code>get()</code>\u3001<code>set()</code>\u3001<code>has()</code>\u3001<code>delete()</code>\u3002</p> <pre><code>const wm = new WeakMap();\n\n// size\u3001forEach\u3001clear \u65b9\u6cd5\u90fd\u4e0d\u5b58\u5728\nwm.size // undefined\nwm.forEach // undefined\nwm.clear // undefined\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakmap_2","title":"WeakMap \u7684\u793a\u4f8b","text":"<p>WeakMap \u7684\u4f8b\u5b50\u5f88\u96be\u6f14\u793a\uff0c\u56e0\u4e3a\u65e0\u6cd5\u89c2\u5bdf\u5b83\u91cc\u9762\u7684\u5f15\u7528\u4f1a\u81ea\u52a8\u6d88\u5931\u3002\u6b64\u65f6\uff0c\u5176\u4ed6\u5f15\u7528\u90fd\u89e3\u9664\u4e86\uff0c\u5df2\u7ecf\u6ca1\u6709\u5f15\u7528\u6307\u5411 WeakMap \u7684\u952e\u540d\u4e86\uff0c\u5bfc\u81f4\u65e0\u6cd5\u8bc1\u5b9e\u90a3\u4e2a\u952e\u540d\u662f\u4e0d\u662f\u5b58\u5728\u3002</p> <p>\u8d3a\u5e08\u4fca\u8001\u5e08\u63d0\u793a\uff0c\u5982\u679c\u5f15\u7528\u6240\u6307\u5411\u7684\u503c\u5360\u7528\u7279\u522b\u591a\u7684\u5185\u5b58\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 Node \u7684<code>process.memoryUsage</code>\u65b9\u6cd5\u770b\u51fa\u6765\u3002\u6839\u636e\u8fd9\u4e2a\u601d\u8def\uff0c\u7f51\u53cbvtxf\u8865\u5145\u4e86\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <p>\u9996\u5148\uff0c\u6253\u5f00 Node \u547d\u4ee4\u884c\u3002</p> <pre><code>$ node --expose-gc\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>--expose-gc</code>\u53c2\u6570\u8868\u793a\u5141\u8bb8\u624b\u52a8\u6267\u884c\u5783\u573e\u56de\u6536\u673a\u5236\u3002</p> <p>\u7136\u540e\uff0c\u6267\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>// \u624b\u52a8\u6267\u884c\u4e00\u6b21\u5783\u573e\u56de\u6536\uff0c\u4fdd\u8bc1\u83b7\u53d6\u7684\u5185\u5b58\u4f7f\u7528\u72b6\u6001\u51c6\u786e\n&gt; global.gc();\nundefined\n\n// \u67e5\u770b\u5185\u5b58\u5360\u7528\u7684\u521d\u59cb\u72b6\u6001\uff0cheapUsed \u4e3a 4M \u5de6\u53f3\n&gt; process.memoryUsage();\n{ rss: 21106688,\n  heapTotal: 7376896,\n  heapUsed: 4153936,\n  external: 9059 }\n\n&gt; let wm = new WeakMap();\nundefined\n\n// \u65b0\u5efa\u4e00\u4e2a\u53d8\u91cf key\uff0c\u6307\u5411\u4e00\u4e2a 5*1024*1024 \u7684\u6570\u7ec4\n&gt; let key = new Array(5 * 1024 * 1024);\nundefined\n\n// \u8bbe\u7f6e WeakMap \u5b9e\u4f8b\u7684\u952e\u540d\uff0c\u4e5f\u6307\u5411 key \u6570\u7ec4\n// \u8fd9\u65f6\uff0ckey \u6570\u7ec4\u5b9e\u9645\u88ab\u5f15\u7528\u4e86\u4e24\u6b21\uff0c\n// \u53d8\u91cf key \u5f15\u7528\u4e00\u6b21\uff0cWeakMap \u7684\u952e\u540d\u5f15\u7528\u4e86\u7b2c\u4e8c\u6b21\n// \u4f46\u662f\uff0cWeakMap \u662f\u5f31\u5f15\u7528\uff0c\u5bf9\u4e8e\u5f15\u64ce\u6765\u8bf4\uff0c\u5f15\u7528\u8ba1\u6570\u8fd8\u662f1\n&gt; wm.set(key, 1);\nWeakMap {}\n\n&gt; global.gc();\nundefined\n\n// \u8fd9\u65f6\u5185\u5b58\u5360\u7528 heapUsed \u589e\u52a0\u5230 45M \u4e86\n&gt; process.memoryUsage();\n{ rss: 67538944,\n  heapTotal: 7376896,\n  heapUsed: 45782816,\n  external: 8945 }\n\n// \u6e05\u9664\u53d8\u91cf key \u5bf9\u6570\u7ec4\u7684\u5f15\u7528\uff0c\n// \u4f46\u6ca1\u6709\u624b\u52a8\u6e05\u9664 WeakMap \u5b9e\u4f8b\u7684\u952e\u540d\u5bf9\u6570\u7ec4\u7684\u5f15\u7528\n&gt; key = null;\nnull\n\n// \u518d\u6b21\u6267\u884c\u5783\u573e\u56de\u6536\n&gt; global.gc();\nundefined\n\n// \u5185\u5b58\u5360\u7528 heapUsed \u53d8\u56de 4M \u5de6\u53f3\uff0c\n// \u53ef\u4ee5\u770b\u5230 WeakMap \u7684\u952e\u540d\u5f15\u7528\u6ca1\u6709\u963b\u6b62 gc \u5bf9\u5185\u5b58\u7684\u56de\u6536\n&gt; process.memoryUsage();\n{ rss: 20639744,\n  heapTotal: 8425472,\n  heapUsed: 3979792,\n  external: 8956 }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u5916\u90e8\u7684\u5f15\u7528\u6d88\u5931\uff0cWeakMap \u5185\u90e8\u7684\u5f15\u7528\uff0c\u5c31\u4f1a\u81ea\u52a8\u88ab\u5783\u573e\u56de\u6536\u6e05\u9664\u3002\u7531\u6b64\u53ef\u89c1\uff0c\u6709\u4e86 WeakMap \u7684\u5e2e\u52a9\uff0c\u89e3\u51b3\u5185\u5b58\u6cc4\u6f0f\u5c31\u4f1a\u7b80\u5355\u5f88\u591a\u3002</p> <p>Chrome \u6d4f\u89c8\u5668\u7684 Dev Tools \u7684 Memory \u9762\u677f\uff0c\u6709\u4e00\u4e2a\u5783\u573e\u6876\u7684\u6309\u94ae\uff0c\u53ef\u4ee5\u5f3a\u5236\u5783\u573e\u56de\u6536\uff08garbage collect\uff09\u3002\u8fd9\u4e2a\u6309\u94ae\u4e5f\u80fd\u7528\u6765\u89c2\u5bdf WeakMap \u91cc\u9762\u7684\u5f15\u7528\u662f\u5426\u6d88\u5931\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakmap_3","title":"WeakMap \u7684\u7528\u9014","text":"<p>\u524d\u6587\u8bf4\u8fc7\uff0cWeakMap \u5e94\u7528\u7684\u5178\u578b\u573a\u5408\u5c31\u662f DOM \u8282\u70b9\u4f5c\u4e3a\u952e\u540d\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>let myWeakmap = new WeakMap();\n\nmyWeakmap.set(\n  document.getElementById('logo'),\n  {timesClicked: 0})\n;\n\ndocument.getElementById('logo').addEventListener('click', function() {\n  let logoData = myWeakmap.get(document.getElementById('logo'));\n  logoData.timesClicked++;\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>document.getElementById('logo')</code>\u662f\u4e00\u4e2a DOM \u8282\u70b9\uff0c\u6bcf\u5f53\u53d1\u751f<code>click</code>\u4e8b\u4ef6\uff0c\u5c31\u66f4\u65b0\u4e00\u4e0b\u72b6\u6001\u3002\u6211\u4eec\u5c06\u8fd9\u4e2a\u72b6\u6001\u4f5c\u4e3a\u952e\u503c\u653e\u5728 WeakMap \u91cc\uff0c\u5bf9\u5e94\u7684\u952e\u540d\u5c31\u662f\u8fd9\u4e2a\u8282\u70b9\u5bf9\u8c61\u3002\u4e00\u65e6\u8fd9\u4e2a DOM \u8282\u70b9\u5220\u9664\uff0c\u8be5\u72b6\u6001\u5c31\u4f1a\u81ea\u52a8\u6d88\u5931\uff0c\u4e0d\u5b58\u5728\u5185\u5b58\u6cc4\u6f0f\u98ce\u9669\u3002</p> <p>WeakMap \u7684\u53e6\u4e00\u4e2a\u7528\u5904\u662f\u90e8\u7f72\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>const _counter = new WeakMap();\nconst _action = new WeakMap();\n\nclass Countdown {\n  constructor(counter, action) {\n    _counter.set(this, counter);\n    _action.set(this, action);\n  }\n  dec() {\n    let counter = _counter.get(this);\n    if (counter &lt; 1) return;\n    counter--;\n    _counter.set(this, counter);\n    if (counter === 0) {\n      _action.get(this)();\n    }\n  }\n}\n\nconst c = new Countdown(2, () =&gt; console.log('DONE'));\n\nc.dec()\nc.dec()\n// DONE\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Countdown</code>\u7c7b\u7684\u4e24\u4e2a\u5185\u90e8\u5c5e\u6027<code>_counter</code>\u548c<code>_action</code>\uff0c\u662f\u5b9e\u4f8b\u7684\u5f31\u5f15\u7528\uff0c\u6240\u4ee5\u5982\u679c\u5220\u9664\u5b9e\u4f8b\uff0c\u5b83\u4eec\u4e5f\u5c31\u968f\u4e4b\u6d88\u5931\uff0c\u4e0d\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#weakref","title":"WeakRef","text":"<p>WeakSet \u548c WeakMap \u662f\u57fa\u4e8e\u5f31\u5f15\u7528\u7684\u6570\u636e\u7ed3\u6784\uff0cES2021 \u66f4\u8fdb\u4e00\u6b65\uff0c\u63d0\u4f9b\u4e86 WeakRef \u5bf9\u8c61\uff0c\u7528\u4e8e\u76f4\u63a5\u521b\u5efa\u5bf9\u8c61\u7684\u5f31\u5f15\u7528\u3002</p> <pre><code>let target = {};\nlet wr = new WeakRef(target);\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>target</code>\u662f\u539f\u59cb\u5bf9\u8c61\uff0c\u6784\u9020\u51fd\u6570<code>WeakRef()</code>\u521b\u5efa\u4e86\u4e00\u4e2a\u57fa\u4e8e<code>target</code>\u7684\u65b0\u5bf9\u8c61<code>wr</code>\u3002\u8fd9\u91cc\uff0c<code>wr</code>\u5c31\u662f\u4e00\u4e2a WeakRef \u7684\u5b9e\u4f8b\uff0c\u5c5e\u4e8e\u5bf9<code>target</code>\u7684\u5f31\u5f15\u7528\uff0c\u5783\u573e\u56de\u6536\u673a\u5236\u4e0d\u4f1a\u8ba1\u5165\u8fd9\u4e2a\u5f15\u7528\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>wr</code>\u7684\u5f15\u7528\u4e0d\u4f1a\u59a8\u788d\u539f\u59cb\u5bf9\u8c61<code>target</code>\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\u3002</p> <p>WeakRef \u5b9e\u4f8b\u5bf9\u8c61\u6709\u4e00\u4e2a<code>deref()</code>\u65b9\u6cd5\uff0c\u5982\u679c\u539f\u59cb\u5bf9\u8c61\u5b58\u5728\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u539f\u59cb\u5bf9\u8c61\uff1b\u5982\u679c\u539f\u59cb\u5bf9\u8c61\u5df2\u7ecf\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>let target = {};\nlet wr = new WeakRef(target);\n\nlet obj = wr.deref();\nif (obj) { // target \u672a\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>deref()</code>\u65b9\u6cd5\u53ef\u4ee5\u5224\u65ad\u539f\u59cb\u5bf9\u8c61\u662f\u5426\u5df2\u88ab\u6e05\u9664\u3002</p> <p>\u5f31\u5f15\u7528\u5bf9\u8c61\u7684\u4e00\u5927\u7528\u5904\uff0c\u5c31\u662f\u4f5c\u4e3a\u7f13\u5b58\uff0c\u672a\u88ab\u6e05\u9664\u65f6\u53ef\u4ee5\u4ece\u7f13\u5b58\u53d6\u503c\uff0c\u4e00\u65e6\u6e05\u9664\u7f13\u5b58\u5c31\u81ea\u52a8\u5931\u6548\u3002</p> <pre><code>function makeWeakCached(f) {\n  const cache = new Map();\n  return key =&gt; {\n    const ref = cache.get(key);\n    if (ref) {\n      const cached = ref.deref();\n      if (cached !== undefined) return cached;\n    }\n\n    const fresh = f(key);\n    cache.set(key, new WeakRef(fresh));\n    return fresh;\n  };\n}\n\nconst getImageCached = makeWeakCached(getImage);\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>makeWeakCached()</code>\u7528\u4e8e\u5efa\u7acb\u4e00\u4e2a\u7f13\u5b58\uff0c\u7f13\u5b58\u91cc\u9762\u4fdd\u5b58\u5bf9\u539f\u59cb\u6587\u4ef6\u7684\u5f31\u5f15\u7528\u3002</p> <p>\u6ce8\u610f\uff0c\u6807\u51c6\u89c4\u5b9a\uff0c\u4e00\u65e6\u4f7f\u7528<code>WeakRef()</code>\u521b\u5efa\u4e86\u539f\u59cb\u5bf9\u8c61\u7684\u5f31\u5f15\u7528\uff0c\u90a3\u4e48\u5728\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\uff08event loop\uff09\uff0c\u539f\u59cb\u5bf9\u8c61\u80af\u5b9a\u4e0d\u4f1a\u88ab\u6e05\u9664\uff0c\u53ea\u4f1a\u5728\u540e\u9762\u7684\u4e8b\u4ef6\u5faa\u73af\u624d\u4f1a\u88ab\u6e05\u9664\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/14-set-map/#finalizationregistry","title":"FinalizationRegistry","text":"<p>ES2021 \u5f15\u5165\u4e86\u6e05\u7406\u5668\u6ce8\u518c\u8868\u529f\u80fd FinalizationRegistry\uff0c\u7528\u6765\u6307\u5b9a\u76ee\u6807\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\u4ee5\u540e\uff0c\u6240\u8981\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u9996\u5148\uff0c\u65b0\u5efa\u4e00\u4e2a\u6ce8\u518c\u8868\u5b9e\u4f8b\u3002</p> <pre><code>const registry = new FinalizationRegistry(heldValue =&gt; {\n  // ....\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>FinalizationRegistry()</code>\u662f\u7cfb\u7edf\u63d0\u4f9b\u7684\u6784\u9020\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u6e05\u7406\u5668\u6ce8\u518c\u8868\u5b9e\u4f8b\uff0c\u91cc\u9762\u767b\u8bb0\u4e86\u6240\u8981\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\u3002\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a<code>FinalizationRegistry()</code>\u7684\u53c2\u6570\u4f20\u5165\uff0c\u5b83\u672c\u8eab\u6709\u4e00\u4e2a\u53c2\u6570<code>heldValue</code>\u3002</p> <p>\u7136\u540e\uff0c\u6ce8\u518c\u8868\u5b9e\u4f8b\u7684<code>register()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u6ce8\u518c\u6240\u8981\u89c2\u5bdf\u7684\u76ee\u6807\u5bf9\u8c61\u3002</p> <pre><code>registry.register(theObject, \"some value\");\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>theObject</code>\u5c31\u662f\u6240\u8981\u89c2\u5bdf\u7684\u76ee\u6807\u5bf9\u8c61\uff0c\u4e00\u65e6\u8be5\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\uff0c\u6ce8\u518c\u8868\u5c31\u4f1a\u5728\u6e05\u9664\u5b8c\u6210\u540e\uff0c\u8c03\u7528\u65e9\u524d\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u5c06<code>some value</code>\u4f5c\u4e3a\u53c2\u6570\uff08\u524d\u9762\u7684<code>heldValue</code>\uff09\u4f20\u5165\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u6ce8\u518c\u8868\u4e0d\u5bf9\u76ee\u6807\u5bf9\u8c61<code>theObject</code>\u6784\u6210\u5f3a\u5f15\u7528\uff0c\u5c5e\u4e8e\u5f31\u5f15\u7528\u3002\u56e0\u4e3a\u5f3a\u5f15\u7528\u7684\u8bdd\uff0c\u539f\u59cb\u5bf9\u8c61\u5c31\u4e0d\u4f1a\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\uff0c\u8fd9\u5c31\u5931\u53bb\u4f7f\u7528\u6ce8\u518c\u8868\u7684\u610f\u4e49\u4e86\u3002</p> <p>\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570<code>heldValue</code>\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\u7684\u503c\uff0c\u5b57\u7b26\u4e32\u3001\u6570\u503c\u3001\u5e03\u5c14\u503c\u3001\u5bf9\u8c61\uff0c\u751a\u81f3\u53ef\u4ee5\u662f<code>undefined</code>\u3002</p> <p>\u6700\u540e\uff0c\u5982\u679c\u4ee5\u540e\u8fd8\u60f3\u53d6\u6d88\u5df2\u7ecf\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5219\u8981\u5411<code>register()</code>\u4f20\u5165\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u4f5c\u4e3a\u6807\u8bb0\u503c\u3002\u8fd9\u4e2a\u6807\u8bb0\u503c\u5fc5\u987b\u662f\u5bf9\u8c61\uff0c\u4e00\u822c\u90fd\u7528\u539f\u59cb\u5bf9\u8c61\u3002\u63a5\u7740\uff0c\u518d\u4f7f\u7528\u6ce8\u518c\u8868\u5b9e\u4f8b\u5bf9\u8c61\u7684<code>unregister()</code>\u65b9\u6cd5\u53d6\u6d88\u6ce8\u518c\u3002</p> <pre><code>registry.register(theObject, \"some value\", theObject);\n// ...\u5176\u4ed6\u64cd\u4f5c...\nregistry.unregister(theObject);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>register()</code>\u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u5c31\u662f\u6807\u8bb0\u503c<code>theObject</code>\u3002\u53d6\u6d88\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u8981\u4f7f\u7528<code>unregister()</code>\u65b9\u6cd5\uff0c\u5e76\u5c06\u6807\u8bb0\u503c\u4f5c\u4e3a\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\u3002\u8fd9\u91cc<code>register()</code>\u65b9\u6cd5\u5bf9\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684\u5f15\u7528\uff0c\u4e5f\u5c5e\u4e8e\u5f31\u5f15\u7528\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u5219\u56de\u8c03\u51fd\u6570\u65e0\u6cd5\u53d6\u6d88\u3002</p> <p>\u7531\u4e8e\u56de\u8c03\u51fd\u6570\u88ab\u8c03\u7528\u4ee5\u540e\uff0c\u5c31\u4e0d\u518d\u5b58\u5728\u4e8e\u6ce8\u518c\u8868\u4e4b\u4e2d\u4e86\uff0c\u6240\u4ee5\u6267\u884c<code>unregister()</code>\u5e94\u8be5\u662f\u5728\u56de\u8c03\u51fd\u6570\u8fd8\u6ca1\u88ab\u8c03\u7528\u4e4b\u524d\u3002</p> <p>\u4e0b\u9762\u4f7f\u7528<code>FinalizationRegistry</code>\uff0c\u5bf9\u524d\u4e00\u8282\u7684\u7f13\u5b58\u51fd\u6570\u8fdb\u884c\u589e\u5f3a\u3002</p> <pre><code>function makeWeakCached(f) {\n  const cache = new Map();\n  const cleanup = new FinalizationRegistry(key =&gt; {\n    const ref = cache.get(key);\n    if (ref &amp;&amp; !ref.deref()) cache.delete(key);\n  });\n\n  return key =&gt; {\n    const ref = cache.get(key);\n    if (ref) {\n      const cached = ref.deref();\n      if (cached !== undefined) return cached;\n    }\n\n    const fresh = f(key);\n    cache.set(key, new WeakRef(fresh));\n    cleanup.register(fresh, key);\n    return fresh;\n  };\n}\n\nconst getImageCached = makeWeakCached(getImage);\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e0e\u524d\u4e00\u8282\u7684\u4f8b\u5b50\u76f8\u6bd4\uff0c\u5c31\u662f\u589e\u52a0\u4e00\u4e2a\u6e05\u7406\u5668\u6ce8\u518c\u8868\uff0c\u4e00\u65e6\u7f13\u5b58\u7684\u539f\u59cb\u5bf9\u8c61\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\uff0c\u4f1a\u81ea\u52a8\u6267\u884c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u8be5\u56de\u8c03\u51fd\u6570\u4f1a\u6e05\u9664\u7f13\u5b58\u91cc\u9762\u5df2\u7ecf\u5931\u6548\u7684\u952e\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class Thingy {\n  #file;\n  #cleanup = file =&gt; {\n    console.error(\n      `The \\`release\\` method was never called for the \\`Thingy\\` for the file \"${file.name}\"`\n    );\n  };\n  #registry = new FinalizationRegistry(this.#cleanup);\n\n  constructor(filename) {\n    this.#file = File.open(filename);\n    this.#registry.register(this, this.#file, this.#file);\n  }\n\n  release() {\n    if (this.#file) {\n      this.#registry.unregister(this.#file);\n      File.close(this.#file);\n      this.#file = null;\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5982\u679c\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c<code>Thingy</code>\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u6ca1\u6709\u8c03\u7528<code>release()</code>\u65b9\u6cd5\uff0c\u5c31\u88ab\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u9664\u4e86\uff0c\u90a3\u4e48\u6e05\u7406\u5668\u5c31\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570<code>#cleanup()</code>\uff0c\u8f93\u51fa\u4e00\u6761\u9519\u8bef\u4fe1\u606f\u3002</p> <p>\u7531\u4e8e\u65e0\u6cd5\u77e5\u9053\u6e05\u7406\u5668\u4f55\u65f6\u4f1a\u6267\u884c\uff0c\u6240\u4ee5\u6700\u597d\u907f\u514d\u4f7f\u7528\u5b83\u3002\u53e6\u5916\uff0c\u5982\u679c\u6d4f\u89c8\u5668\u7a97\u53e3\u5173\u95ed\u6216\u8005\u8fdb\u7a0b\u610f\u5916\u9000\u51fa\uff0c\u6e05\u7406\u5668\u5219\u4e0d\u4f1a\u8fd0\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/","title":"15-Proxy","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#_1","title":"\u6982\u8ff0","text":"<p>Proxy \u7528\u4e8e\u4fee\u6539\u67d0\u4e9b\u64cd\u4f5c\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u7b49\u540c\u4e8e\u5728\u8bed\u8a00\u5c42\u9762\u505a\u51fa\u4fee\u6539\uff0c\u6240\u4ee5\u5c5e\u4e8e\u4e00\u79cd\u201c\u5143\u7f16\u7a0b\u201d\uff08meta programming\uff09\uff0c\u5373\u5bf9\u7f16\u7a0b\u8bed\u8a00\u8fdb\u884c\u7f16\u7a0b\u3002</p> <p>Proxy \u53ef\u4ee5\u7406\u89e3\u6210\uff0c\u5728\u76ee\u6807\u5bf9\u8c61\u4e4b\u524d\u67b6\u8bbe\u4e00\u5c42\u201c\u62e6\u622a\u201d\uff0c\u5916\u754c\u5bf9\u8be5\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u90fd\u5fc5\u987b\u5148\u901a\u8fc7\u8fd9\u5c42\u62e6\u622a\uff0c\u56e0\u6b64\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u5bf9\u5916\u754c\u7684\u8bbf\u95ee\u8fdb\u884c\u8fc7\u6ee4\u548c\u6539\u5199\u3002Proxy \u8fd9\u4e2a\u8bcd\u7684\u539f\u610f\u662f\u4ee3\u7406\uff0c\u7528\u5728\u8fd9\u91cc\u8868\u793a\u7531\u5b83\u6765\u201c\u4ee3\u7406\u201d\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8bd1\u4e3a\u201c\u4ee3\u7406\u5668\u201d\u3002</p> <pre><code>var obj = new Proxy({}, {\n  get: function (target, propKey, receiver) {\n    console.log(`getting ${propKey}!`);\n    return Reflect.get(target, propKey, receiver);\n  },\n  set: function (target, propKey, value, receiver) {\n    console.log(`setting ${propKey}!`);\n    return Reflect.set(target, propKey, value, receiver);\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u67b6\u8bbe\u4e86\u4e00\u5c42\u62e6\u622a\uff0c\u91cd\u5b9a\u4e49\u4e86\u5c5e\u6027\u7684\u8bfb\u53d6\uff08<code>get</code>\uff09\u548c\u8bbe\u7f6e\uff08<code>set</code>\uff09\u884c\u4e3a\u3002\u8fd9\u91cc\u6682\u65f6\u5148\u4e0d\u89e3\u91ca\u5177\u4f53\u7684\u8bed\u6cd5\uff0c\u53ea\u770b\u8fd0\u884c\u7ed3\u679c\u3002\u5bf9\u8bbe\u7f6e\u4e86\u62e6\u622a\u884c\u4e3a\u7684\u5bf9\u8c61<code>obj</code>\uff0c\u53bb\u8bfb\u5199\u5b83\u7684\u5c5e\u6027\uff0c\u5c31\u4f1a\u5f97\u5230\u4e0b\u9762\u7684\u7ed3\u679c\u3002</p> <pre><code>obj.count = 1\n//  setting count!\n++obj.count\n//  getting count!\n//  setting count!\n//  2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0cProxy \u5b9e\u9645\u4e0a\u91cd\u8f7d\uff08overload\uff09\u4e86\u70b9\u8fd0\u7b97\u7b26\uff0c\u5373\u7528\u81ea\u5df1\u7684\u5b9a\u4e49\u8986\u76d6\u4e86\u8bed\u8a00\u7684\u539f\u59cb\u5b9a\u4e49\u3002</p> <p>ES6 \u539f\u751f\u63d0\u4f9b Proxy \u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210 Proxy \u5b9e\u4f8b\u3002</p> <pre><code>var proxy = new Proxy(target, handler);\n</code></pre> <p>Proxy \u5bf9\u8c61\u7684\u6240\u6709\u7528\u6cd5\uff0c\u90fd\u662f\u4e0a\u9762\u8fd9\u79cd\u5f62\u5f0f\uff0c\u4e0d\u540c\u7684\u53ea\u662f<code>handler</code>\u53c2\u6570\u7684\u5199\u6cd5\u3002\u5176\u4e2d\uff0c<code>new Proxy()</code>\u8868\u793a\u751f\u6210\u4e00\u4e2a<code>Proxy</code>\u5b9e\u4f8b\uff0c<code>target</code>\u53c2\u6570\u8868\u793a\u6240\u8981\u62e6\u622a\u7684\u76ee\u6807\u5bf9\u8c61\uff0c<code>handler</code>\u53c2\u6570\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u5b9a\u5236\u62e6\u622a\u884c\u4e3a\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u62e6\u622a\u8bfb\u53d6\u5c5e\u6027\u884c\u4e3a\u7684\u4f8b\u5b50\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  get: function(target, propKey) {\n    return 35;\n  }\n});\n\nproxy.time // 35\nproxy.name // 35\nproxy.title // 35\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\uff0c<code>Proxy</code>\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6240\u8981\u4ee3\u7406\u7684\u76ee\u6807\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff09\uff0c\u5373\u5982\u679c\u6ca1\u6709<code>Proxy</code>\u7684\u4ecb\u5165\uff0c\u64cd\u4f5c\u539f\u6765\u8981\u8bbf\u95ee\u7684\u5c31\u662f\u8fd9\u4e2a\u5bf9\u8c61\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u88ab\u4ee3\u7406\u7684\u64cd\u4f5c\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5c06\u62e6\u622a\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002\u6bd4\u5982\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u914d\u7f6e\u5bf9\u8c61\u6709\u4e00\u4e2a<code>get</code>\u65b9\u6cd5\uff0c\u7528\u6765\u62e6\u622a\u5bf9\u76ee\u6807\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002<code>get</code>\u65b9\u6cd5\u7684\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u548c\u6240\u8981\u8bbf\u95ee\u7684\u5c5e\u6027\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u7531\u4e8e\u62e6\u622a\u51fd\u6570\u603b\u662f\u8fd4\u56de<code>35</code>\uff0c\u6240\u4ee5\u8bbf\u95ee\u4efb\u4f55\u5c5e\u6027\u90fd\u5f97\u5230<code>35</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u8981\u4f7f\u5f97<code>Proxy</code>\u8d77\u4f5c\u7528\uff0c\u5fc5\u987b\u9488\u5bf9<code>Proxy</code>\u5b9e\u4f8b\uff08\u4e0a\u4f8b\u662f<code>proxy</code>\u5bf9\u8c61\uff09\u8fdb\u884c\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f\u9488\u5bf9\u76ee\u6807\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f\u7a7a\u5bf9\u8c61\uff09\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u5982\u679c<code>handler</code>\u6ca1\u6709\u8bbe\u7f6e\u4efb\u4f55\u62e6\u622a\uff0c\u90a3\u5c31\u7b49\u540c\u4e8e\u76f4\u63a5\u901a\u5411\u539f\u5bf9\u8c61\u3002</p> <pre><code>var target = {};\nvar handler = {};\nvar proxy = new Proxy(target, handler);\nproxy.a = 'b';\ntarget.a // \"b\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>handler</code>\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u6ca1\u6709\u4efb\u4f55\u62e6\u622a\u6548\u679c\uff0c\u8bbf\u95ee<code>proxy</code>\u5c31\u7b49\u540c\u4e8e\u8bbf\u95ee<code>target</code>\u3002</p> <p>\u4e00\u4e2a\u6280\u5de7\u662f\u5c06 Proxy \u5bf9\u8c61\uff0c\u8bbe\u7f6e\u5230<code>object.proxy</code>\u5c5e\u6027\uff0c\u4ece\u800c\u53ef\u4ee5\u5728<code>object</code>\u5bf9\u8c61\u4e0a\u8c03\u7528\u3002</p> <pre><code>var object = { proxy: new Proxy(target, handler) };\n</code></pre> <p>Proxy \u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5176\u4ed6\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  get: function(target, propKey) {\n    return 35;\n  }\n});\n\nlet obj = Object.create(proxy);\nobj.time // 35\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy</code>\u5bf9\u8c61\u662f<code>obj</code>\u5bf9\u8c61\u7684\u539f\u578b\uff0c<code>obj</code>\u5bf9\u8c61\u672c\u8eab\u5e76\u6ca1\u6709<code>time</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u6839\u636e\u539f\u578b\u94fe\uff0c\u4f1a\u5728<code>proxy</code>\u5bf9\u8c61\u4e0a\u8bfb\u53d6\u8be5\u5c5e\u6027\uff0c\u5bfc\u81f4\u88ab\u62e6\u622a\u3002</p> <p>\u540c\u4e00\u4e2a\u62e6\u622a\u5668\u51fd\u6570\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u62e6\u622a\u591a\u4e2a\u64cd\u4f5c\u3002</p> <pre><code>var handler = {\n  get: function(target, name) {\n    if (name === 'prototype') {\n      return Object.prototype;\n    }\n    return 'Hello, ' + name;\n  },\n\n  apply: function(target, thisBinding, args) {\n    return args[0];\n  },\n\n  construct: function(target, args) {\n    return {value: args[1]};\n  }\n};\n\nvar fproxy = new Proxy(function(x, y) {\n  return x + y;\n}, handler);\n\nfproxy(1, 2) // 1\nnew fproxy(1, 2) // {value: 2}\nfproxy.prototype === Object.prototype // true\nfproxy.foo === \"Hello, foo\" // true\n</code></pre> <p>\u5bf9\u4e8e\u53ef\u4ee5\u8bbe\u7f6e\u3001\u4f46\u6ca1\u6709\u8bbe\u7f6e\u62e6\u622a\u7684\u64cd\u4f5c\uff0c\u5219\u76f4\u63a5\u843d\u5728\u76ee\u6807\u5bf9\u8c61\u4e0a\uff0c\u6309\u7167\u539f\u5148\u7684\u65b9\u5f0f\u4ea7\u751f\u7ed3\u679c\u3002</p> <p>\u4e0b\u9762\u662f Proxy \u652f\u6301\u7684\u62e6\u622a\u64cd\u4f5c\u4e00\u89c8\uff0c\u4e00\u5171 13 \u79cd\u3002</p> <ul> <li>get(target, propKey, receiver)\uff1a\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bfb\u53d6\uff0c\u6bd4\u5982<code>proxy.foo</code>\u548c<code>proxy['foo']</code>\u3002</li> <li>set(target, propKey, value, receiver)\uff1a\u62e6\u622a\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbe\u7f6e\uff0c\u6bd4\u5982<code>proxy.foo = v</code>\u6216<code>proxy['foo'] = v</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>has(target, propKey)\uff1a\u62e6\u622a<code>propKey in proxy</code>\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>deleteProperty(target, propKey)\uff1a\u62e6\u622a<code>delete proxy[propKey]</code>\u7684\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>ownKeys(target)\uff1a\u62e6\u622a<code>Object.getOwnPropertyNames(proxy)</code>\u3001<code>Object.getOwnPropertySymbols(proxy)</code>\u3001<code>Object.keys(proxy)</code>\u3001<code>for...in</code>\u5faa\u73af\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\u3002\u8be5\u65b9\u6cd5\u8fd4\u56de\u76ee\u6807\u5bf9\u8c61\u6240\u6709\u81ea\u8eab\u7684\u5c5e\u6027\u7684\u5c5e\u6027\u540d\uff0c\u800c<code>Object.keys()</code>\u7684\u8fd4\u56de\u7ed3\u679c\u4ec5\u5305\u62ec\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u53ef\u904d\u5386\u5c5e\u6027\u3002</li> <li>getOwnPropertyDescriptor(target, propKey)\uff1a\u62e6\u622a<code>Object.getOwnPropertyDescriptor(proxy, propKey)</code>\uff0c\u8fd4\u56de\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</li> <li>defineProperty(target, propKey, propDesc)\uff1a\u62e6\u622a<code>Object.defineProperty(proxy, propKey, propDesc\uff09</code>\u3001<code>Object.defineProperties(proxy, propDescs)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>preventExtensions(target)\uff1a\u62e6\u622a<code>Object.preventExtensions(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>getPrototypeOf(target)\uff1a\u62e6\u622a<code>Object.getPrototypeOf(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u3002</li> <li>isExtensible(target)\uff1a\u62e6\u622a<code>Object.isExtensible(proxy)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</li> <li>setPrototypeOf(target, proto)\uff1a\u62e6\u622a<code>Object.setPrototypeOf(proxy, proto)</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u662f\u51fd\u6570\uff0c\u90a3\u4e48\u8fd8\u6709\u4e24\u79cd\u989d\u5916\u64cd\u4f5c\u53ef\u4ee5\u62e6\u622a\u3002</li> <li>apply(target, object, args)\uff1a\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982<code>proxy(...args)</code>\u3001<code>proxy.call(object, ...args)</code>\u3001<code>proxy.apply(...)</code>\u3002</li> <li>construct(target, args)\uff1a\u62e6\u622a Proxy \u5b9e\u4f8b\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u8c03\u7528\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982<code>new proxy(...args)</code>\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#proxy","title":"Proxy \u5b9e\u4f8b\u7684\u65b9\u6cd5","text":"<p>\u4e0b\u9762\u662f\u4e0a\u9762\u8fd9\u4e9b\u62e6\u622a\u65b9\u6cd5\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#get","title":"get()","text":"<p><code>get</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a\u67d0\u4e2a\u5c5e\u6027\u7684\u8bfb\u53d6\u64cd\u4f5c\uff0c\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u76ee\u6807\u5bf9\u8c61\u3001\u5c5e\u6027\u540d\u548c proxy \u5b9e\u4f8b\u672c\u8eab\uff08\u4e25\u683c\u5730\u8bf4\uff0c\u662f\u64cd\u4f5c\u884c\u4e3a\u6240\u9488\u5bf9\u7684\u5bf9\u8c61\uff09\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u53ef\u9009\u3002</p> <p><code>get</code>\u65b9\u6cd5\u7684\u7528\u6cd5\uff0c\u4e0a\u6587\u5df2\u7ecf\u6709\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u62e6\u622a\u8bfb\u53d6\u64cd\u4f5c\u7684\u4f8b\u5b50\u3002</p> <pre><code>var person = {\n  name: \"\u5f20\u4e09\"\n};\n\nvar proxy = new Proxy(person, {\n  get: function(target, propKey) {\n    if (propKey in target) {\n      return target[propKey];\n    } else {\n      throw new ReferenceError(\"Prop name \\\"\" + propKey + \"\\\" does not exist.\");\n    }\n  }\n});\n\nproxy.name // \"\u5f20\u4e09\"\nproxy.age // \u629b\u51fa\u4e00\u4e2a\u9519\u8bef\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5982\u679c\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u62e6\u622a\u51fd\u6570\uff0c\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u53ea\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</p> <p><code>get</code>\u65b9\u6cd5\u53ef\u4ee5\u7ee7\u627f\u3002</p> <pre><code>let proto = new Proxy({}, {\n  get(target, propertyKey, receiver) {\n    console.log('GET ' + propertyKey);\n    return target[propertyKey];\n  }\n});\n\nlet obj = Object.create(proto);\nobj.foo // \"GET foo\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u62e6\u622a\u64cd\u4f5c\u5b9a\u4e49\u5728<code>Prototype</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u6240\u4ee5\u5982\u679c\u8bfb\u53d6<code>obj</code>\u5bf9\u8c61\u7ee7\u627f\u7684\u5c5e\u6027\u65f6\uff0c\u62e6\u622a\u4f1a\u751f\u6548\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>get</code>\u62e6\u622a\uff0c\u5b9e\u73b0\u6570\u7ec4\u8bfb\u53d6\u8d1f\u6570\u7684\u7d22\u5f15\u3002</p> <pre><code>function createArray(...elements) {\n  let handler = {\n    get(target, propKey, receiver) {\n      let index = Number(propKey);\n      if (index &lt; 0) {\n        propKey = String(target.length + index);\n      }\n      return Reflect.get(target, propKey, receiver);\n    }\n  };\n\n  let target = [];\n  target.push(...elements);\n  return new Proxy(target, handler);\n}\n\nlet arr = createArray('a', 'b', 'c');\narr[-1] // c\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4\u7684\u4f4d\u7f6e\u53c2\u6570\u662f<code>-1</code>\uff0c\u5c31\u4f1a\u8f93\u51fa\u6570\u7ec4\u7684\u5012\u6570\u7b2c\u4e00\u4e2a\u6210\u5458\u3002</p> <p>\u5229\u7528 Proxy\uff0c\u53ef\u4ee5\u5c06\u8bfb\u53d6\u5c5e\u6027\u7684\u64cd\u4f5c\uff08<code>get</code>\uff09\uff0c\u8f6c\u53d8\u4e3a\u6267\u884c\u67d0\u4e2a\u51fd\u6570\uff0c\u4ece\u800c\u5b9e\u73b0\u5c5e\u6027\u7684\u94fe\u5f0f\u64cd\u4f5c\u3002</p> <pre><code>var pipe = function (value) {\n  var funcStack = [];\n  var oproxy = new Proxy({} , {\n    get : function (pipeObject, fnName) {\n      if (fnName === 'get') {\n        return funcStack.reduce(function (val, fn) {\n          return fn(val);\n        },value);\n      }\n      funcStack.push(window[fnName]);\n      return oproxy;\n    }\n  });\n\n  return oproxy;\n}\n\nvar double = n =&gt; n * 2;\nvar pow    = n =&gt; n * n;\nvar reverseInt = n =&gt; n.toString().split(\"\").reverse().join(\"\") | 0;\n\npipe(3).double.pow.reverseInt.get; // 63\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bbe\u7f6e Proxy \u4ee5\u540e\uff0c\u8fbe\u5230\u4e86\u5c06\u51fd\u6570\u540d\u94fe\u5f0f\u4f7f\u7528\u7684\u6548\u679c\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5219\u662f\u5229\u7528<code>get</code>\u62e6\u622a\uff0c\u5b9e\u73b0\u4e00\u4e2a\u751f\u6210\u5404\u79cd DOM \u8282\u70b9\u7684\u901a\u7528\u51fd\u6570<code>dom</code>\u3002</p> <pre><code>const dom = new Proxy({}, {\n  get(target, property) {\n    return function(attrs = {}, ...children) {\n      const el = document.createElement(property);\n      for (let prop of Object.keys(attrs)) {\n        el.setAttribute(prop, attrs[prop]);\n      }\n      for (let child of children) {\n        if (typeof child === 'string') {\n          child = document.createTextNode(child);\n        }\n        el.appendChild(child);\n      }\n      return el;\n    }\n  }\n});\n\nconst el = dom.div({},\n  'Hello, my name is ',\n  dom.a({href: '//example.com'}, 'Mark'),\n  '. I like:',\n  dom.ul({},\n    dom.li({}, 'The web'),\n    dom.li({}, 'Food'),\n    dom.li({}, '\u2026actually that\\'s it')\n  )\n);\n\ndocument.body.appendChild(el);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>get</code>\u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684\u4f8b\u5b50\uff0c\u5b83\u603b\u662f\u6307\u5411\u539f\u59cb\u7684\u8bfb\u64cd\u4f5c\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5c31\u662f Proxy \u5b9e\u4f8b\u3002</p> <pre><code>const proxy = new Proxy({}, {\n  get: function(target, key, receiver) {\n    return receiver;\n  }\n});\nproxy.getReceiver === proxy // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy</code>\u5bf9\u8c61\u7684<code>getReceiver</code>\u5c5e\u6027\u4f1a\u88ab<code>get()</code>\u62e6\u622a\uff0c\u5f97\u5230\u7684\u8fd4\u56de\u503c\u5c31\u662f<code>proxy</code>\u5bf9\u8c61\u3002</p> <pre><code>const proxy = new Proxy({}, {\n  get: function(target, key, receiver) {\n    return receiver;\n  }\n});\n\nconst d = Object.create(proxy);\nd.a === d // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>d</code>\u5bf9\u8c61\u672c\u8eab\u6ca1\u6709<code>a</code>\u5c5e\u6027\uff0c\u6240\u4ee5\u8bfb\u53d6<code>d.a</code>\u7684\u65f6\u5019\uff0c\u4f1a\u53bb<code>d</code>\u7684\u539f\u578b<code>proxy</code>\u5bf9\u8c61\u627e\u3002\u8fd9\u65f6\uff0c<code>receiver</code>\u5c31\u6307\u5411<code>d</code>\uff0c\u4ee3\u8868\u539f\u59cb\u7684\u8bfb\u64cd\u4f5c\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u5c5e\u6027\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\u4e14\u4e0d\u53ef\u5199\uff08writable\uff09\uff0c\u5219 Proxy \u4e0d\u80fd\u4fee\u6539\u8be5\u5c5e\u6027\uff0c\u5426\u5219\u901a\u8fc7 Proxy \u5bf9\u8c61\u8bbf\u95ee\u8be5\u5c5e\u6027\u4f1a\u62a5\u9519\u3002</p> <pre><code>const target = Object.defineProperties({}, {\n  foo: {\n    value: 123,\n    writable: false,\n    configurable: false\n  },\n});\n\nconst handler = {\n  get(target, propKey) {\n    return 'abc';\n  }\n};\n\nconst proxy = new Proxy(target, handler);\n\nproxy.foo\n// TypeError: Invariant check failed\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#set","title":"set()","text":"<p><code>set</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a\u67d0\u4e2a\u5c5e\u6027\u7684\u8d4b\u503c\u64cd\u4f5c\uff0c\u53ef\u4ee5\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u4f9d\u6b21\u4e3a\u76ee\u6807\u5bf9\u8c61\u3001\u5c5e\u6027\u540d\u3001\u5c5e\u6027\u503c\u548c Proxy \u5b9e\u4f8b\u672c\u8eab\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u53ef\u9009\u3002</p> <p>\u5047\u5b9a<code>Person</code>\u5bf9\u8c61\u6709\u4e00\u4e2a<code>age</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u5e94\u8be5\u662f\u4e00\u4e2a\u4e0d\u5927\u4e8e 200 \u7684\u6574\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528<code>Proxy</code>\u4fdd\u8bc1<code>age</code>\u7684\u5c5e\u6027\u503c\u7b26\u5408\u8981\u6c42\u3002</p> <pre><code>let validator = {\n  set: function(obj, prop, value) {\n    if (prop === 'age') {\n      if (!Number.isInteger(value)) {\n        throw new TypeError('The age is not an integer');\n      }\n      if (value &gt; 200) {\n        throw new RangeError('The age seems invalid');\n      }\n    }\n\n    // \u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684 age \u5c5e\u6027\u4ee5\u53ca\u5176\u4ed6\u5c5e\u6027\uff0c\u76f4\u63a5\u4fdd\u5b58\n    obj[prop] = value;\n    return true;\n  }\n};\n\nlet person = new Proxy({}, validator);\n\nperson.age = 100;\n\nperson.age // 100\nperson.age = 'young' // \u62a5\u9519\nperson.age = 300 // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u8bbe\u7f6e\u4e86\u5b58\u503c\u51fd\u6570<code>set</code>\uff0c\u4efb\u4f55\u4e0d\u7b26\u5408\u8981\u6c42\u7684<code>age</code>\u5c5e\u6027\u8d4b\u503c\uff0c\u90fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u8fd9\u662f\u6570\u636e\u9a8c\u8bc1\u7684\u4e00\u79cd\u5b9e\u73b0\u65b9\u6cd5\u3002\u5229\u7528<code>set</code>\u65b9\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u6570\u636e\u7ed1\u5b9a\uff0c\u5373\u6bcf\u5f53\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u66f4\u65b0 DOM\u3002</p> <p>\u6709\u65f6\uff0c\u6211\u4eec\u4f1a\u5728\u5bf9\u8c61\u4e0a\u9762\u8bbe\u7f6e\u5185\u90e8\u5c5e\u6027\uff0c\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4f7f\u7528\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u8868\u793a\u8fd9\u4e9b\u5c5e\u6027\u4e0d\u5e94\u8be5\u88ab\u5916\u90e8\u4f7f\u7528\u3002\u7ed3\u5408<code>get</code>\u548c<code>set</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u505a\u5230\u9632\u6b62\u8fd9\u4e9b\u5185\u90e8\u5c5e\u6027\u88ab\u5916\u90e8\u8bfb\u5199\u3002</p> <pre><code>const handler = {\n  get (target, key) {\n    invariant(key, 'get');\n    return target[key];\n  },\n  set (target, key, value) {\n    invariant(key, 'set');\n    target[key] = value;\n    return true;\n  }\n};\nfunction invariant (key, action) {\n  if (key[0] === '_') {\n    throw new Error(`Invalid attempt to ${action} private \"${key}\" property`);\n  }\n}\nconst target = {};\nconst proxy = new Proxy(target, handler);\nproxy._prop\n// Error: Invalid attempt to get private \"_prop\" property\nproxy._prop = 'c'\n// Error: Invalid attempt to set private \"_prop\" property\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u8bfb\u5199\u7684\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f\u4e0b\u5212\u7ebf\uff0c\u4e00\u5f8b\u629b\u9519\uff0c\u4ece\u800c\u8fbe\u5230\u7981\u6b62\u8bfb\u5199\u5185\u90e8\u5c5e\u6027\u7684\u76ee\u7684\u3002</p> <p>\u4e0b\u9762\u662f<code>set</code>\u65b9\u6cd5\u7b2c\u56db\u4e2a\u53c2\u6570\u7684\u4f8b\u5b50\u3002</p> <pre><code>const handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n    return true;\n  }\n};\nconst proxy = new Proxy({}, handler);\nproxy.foo = 'bar';\nproxy.foo === proxy // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>set</code>\u65b9\u6cd5\u7684\u7b2c\u56db\u4e2a\u53c2\u6570<code>receiver</code>\uff0c\u6307\u7684\u662f\u539f\u59cb\u7684\u64cd\u4f5c\u884c\u4e3a\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u662f<code>proxy</code>\u5b9e\u4f8b\u672c\u8eab\uff0c\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n    return true;\n  }\n};\nconst proxy = new Proxy({}, handler);\nconst myObj = {};\nObject.setPrototypeOf(myObj, proxy);\n\nmyObj.foo = 'bar';\nmyObj.foo === myObj // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8bbe\u7f6e<code>myObj.foo</code>\u5c5e\u6027\u7684\u503c\u65f6\uff0c<code>myObj</code>\u5e76\u6ca1\u6709<code>foo</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u5f15\u64ce\u4f1a\u5230<code>myObj</code>\u7684\u539f\u578b\u94fe\u53bb\u627e<code>foo</code>\u5c5e\u6027\u3002<code>myObj</code>\u7684\u539f\u578b\u5bf9\u8c61<code>proxy</code>\u662f\u4e00\u4e2a Proxy \u5b9e\u4f8b\uff0c\u8bbe\u7f6e\u5b83\u7684<code>foo</code>\u5c5e\u6027\u4f1a\u89e6\u53d1<code>set</code>\u65b9\u6cd5\u3002\u8fd9\u65f6\uff0c\u7b2c\u56db\u4e2a\u53c2\u6570<code>receiver</code>\u5c31\u6307\u5411\u539f\u59cb\u8d4b\u503c\u884c\u4e3a\u6240\u5728\u7684\u5bf9\u8c61<code>myObj</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u67d0\u4e2a\u5c5e\u6027\u4e0d\u53ef\u5199\uff0c\u90a3\u4e48<code>set</code>\u65b9\u6cd5\u5c06\u4e0d\u8d77\u4f5c\u7528\u3002</p> <pre><code>const obj = {};\nObject.defineProperty(obj, 'foo', {\n  value: 'bar',\n  writable: false\n});\n\nconst handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = 'baz';\n    return true;\n  }\n};\n\nconst proxy = new Proxy(obj, handler);\nproxy.foo = 'baz';\nproxy.foo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj.foo</code>\u5c5e\u6027\u4e0d\u53ef\u5199\uff0cProxy \u5bf9\u8fd9\u4e2a\u5c5e\u6027\u7684<code>set</code>\u4ee3\u7406\u5c06\u4e0d\u4f1a\u751f\u6548\u3002</p> <p>\u6ce8\u610f\uff0c<code>set</code>\u4ee3\u7406\u5e94\u5f53\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>set</code>\u4ee3\u7406\u5982\u679c\u6ca1\u6709\u8fd4\u56de<code>true</code>\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>'use strict';\nconst handler = {\n  set: function(obj, prop, value, receiver) {\n    obj[prop] = receiver;\n    // \u65e0\u8bba\u6709\u6ca1\u6709\u4e0b\u9762\u8fd9\u4e00\u884c\uff0c\u90fd\u4f1a\u62a5\u9519\n    return false;\n  }\n};\nconst proxy = new Proxy({}, handler);\nproxy.foo = 'bar';\n// TypeError: 'set' on proxy: trap returned falsish for property 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c<code>set</code>\u4ee3\u7406\u8fd4\u56de<code>false</code>\u6216\u8005<code>undefined</code>\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#apply","title":"apply()","text":"<p><code>apply</code>\u65b9\u6cd5\u62e6\u622a\u51fd\u6570\u7684\u8c03\u7528\u3001<code>call</code>\u548c<code>apply</code>\u64cd\u4f5c\u3002</p> <p><code>apply</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u3001\u76ee\u6807\u5bf9\u8c61\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff08<code>this</code>\uff09\u548c\u76ee\u6807\u5bf9\u8c61\u7684\u53c2\u6570\u6570\u7ec4\u3002</p> <pre><code>var handler = {\n  apply (target, ctx, args) {\n    return Reflect.apply(...arguments);\n  }\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var target = function () { return 'I am the target'; };\nvar handler = {\n  apply: function () {\n    return 'I am the proxy';\n  }\n};\n\nvar p = new Proxy(target, handler);\n\np()\n// \"I am the proxy\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>p</code>\u662f Proxy \u7684\u5b9e\u4f8b\uff0c\u5f53\u5b83\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u65f6\uff08<code>p()</code>\uff09\uff0c\u5c31\u4f1a\u88ab<code>apply</code>\u65b9\u6cd5\u62e6\u622a\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var twice = {\n  apply (target, ctx, args) {\n    return Reflect.apply(...arguments) * 2;\n  }\n};\nfunction sum (left, right) {\n  return left + right;\n};\nvar proxy = new Proxy(sum, twice);\nproxy(1, 2) // 6\nproxy.call(null, 5, 6) // 22\nproxy.apply(null, [7, 8]) // 30\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6bcf\u5f53\u6267\u884c<code>proxy</code>\u51fd\u6570\uff08\u76f4\u63a5\u8c03\u7528\u6216<code>call</code>\u548c<code>apply</code>\u8c03\u7528\uff09\uff0c\u5c31\u4f1a\u88ab<code>apply</code>\u65b9\u6cd5\u62e6\u622a\u3002</p> <p>\u53e6\u5916\uff0c\u76f4\u63a5\u8c03\u7528<code>Reflect.apply</code>\u65b9\u6cd5\uff0c\u4e5f\u4f1a\u88ab\u62e6\u622a\u3002</p> <pre><code>Reflect.apply(proxy, null, [9, 10]) // 38\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#has","title":"has()","text":"<p><code>has()</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a<code>HasProperty</code>\u64cd\u4f5c\uff0c\u5373\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5177\u6709\u67d0\u4e2a\u5c5e\u6027\u65f6\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u751f\u6548\u3002\u5178\u578b\u7684\u64cd\u4f5c\u5c31\u662f<code>in</code>\u8fd0\u7b97\u7b26\u3002</p> <p><code>has()</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u76ee\u6807\u5bf9\u8c61\u3001\u9700\u67e5\u8be2\u7684\u5c5e\u6027\u540d\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>has()</code>\u65b9\u6cd5\u9690\u85cf\u67d0\u4e9b\u5c5e\u6027\uff0c\u4e0d\u88ab<code>in</code>\u8fd0\u7b97\u7b26\u53d1\u73b0\u3002</p> <pre><code>var handler = {\n  has (target, key) {\n    if (key[0] === '_') {\n      return false;\n    }\n    return key in target;\n  }\n};\nvar target = { _prop: 'foo', prop: 'foo' };\nvar proxy = new Proxy(target, handler);\n'_prop' in proxy // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u539f\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f\u4e0b\u5212\u7ebf\uff0c<code>proxy.has()</code>\u5c31\u4f1a\u8fd4\u56de<code>false</code>\uff0c\u4ece\u800c\u4e0d\u4f1a\u88ab<code>in</code>\u8fd0\u7b97\u7b26\u53d1\u73b0\u3002</p> <p>\u5982\u679c\u539f\u5bf9\u8c61\u4e0d\u53ef\u914d\u7f6e\u6216\u8005\u7981\u6b62\u6269\u5c55\uff0c\u8fd9\u65f6<code>has()</code>\u62e6\u622a\u4f1a\u62a5\u9519\u3002</p> <pre><code>var obj = { a: 10 };\nObject.preventExtensions(obj);\n\nvar p = new Proxy(obj, {\n  has: function(target, prop) {\n    return false;\n  }\n});\n\n'a' in p // TypeError is thrown\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u7981\u6b62\u6269\u5c55\uff0c\u7ed3\u679c\u4f7f\u7528<code>has</code>\u62e6\u622a\u5c31\u4f1a\u62a5\u9519\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u4e0d\u53ef\u914d\u7f6e\uff08\u6216\u8005\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff09\uff0c\u5219<code>has()</code>\u65b9\u6cd5\u5c31\u4e0d\u5f97\u201c\u9690\u85cf\u201d\uff08\u5373\u8fd4\u56de<code>false</code>\uff09\u76ee\u6807\u5bf9\u8c61\u7684\u8be5\u5c5e\u6027\u3002</p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c<code>has()</code>\u65b9\u6cd5\u62e6\u622a\u7684\u662f<code>HasProperty</code>\u64cd\u4f5c\uff0c\u800c\u4e0d\u662f<code>HasOwnProperty</code>\u64cd\u4f5c\uff0c\u5373<code>has()</code>\u65b9\u6cd5\u4e0d\u5224\u65ad\u4e00\u4e2a\u5c5e\u6027\u662f\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u8fd8\u662f\u7ee7\u627f\u7684\u5c5e\u6027\u3002</p> <p>\u53e6\u5916\uff0c\u867d\u7136<code>for...in</code>\u5faa\u73af\u4e5f\u7528\u5230\u4e86<code>in</code>\u8fd0\u7b97\u7b26\uff0c\u4f46\u662f<code>has()</code>\u62e6\u622a\u5bf9<code>for...in</code>\u5faa\u73af\u4e0d\u751f\u6548\u3002</p> <pre><code>let stu1 = {name: '\u5f20\u4e09', score: 59};\nlet stu2 = {name: '\u674e\u56db', score: 99};\n\nlet handler = {\n  has(target, prop) {\n    if (prop === 'score' &amp;&amp; target[prop] &lt; 60) {\n      console.log(`${target.name} \u4e0d\u53ca\u683c`);\n      return false;\n    }\n    return prop in target;\n  }\n}\n\nlet oproxy1 = new Proxy(stu1, handler);\nlet oproxy2 = new Proxy(stu2, handler);\n\n'score' in oproxy1\n// \u5f20\u4e09 \u4e0d\u53ca\u683c\n// false\n\n'score' in oproxy2\n// true\n\nfor (let a in oproxy1) {\n  console.log(oproxy1[a]);\n}\n// \u5f20\u4e09\n// 59\n\nfor (let b in oproxy2) {\n  console.log(oproxy2[b]);\n}\n// \u674e\u56db\n// 99\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>has()</code>\u62e6\u622a\u53ea\u5bf9<code>in</code>\u8fd0\u7b97\u7b26\u751f\u6548\uff0c\u5bf9<code>for...in</code>\u5faa\u73af\u4e0d\u751f\u6548\uff0c\u5bfc\u81f4\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u5c5e\u6027\u6ca1\u6709\u88ab<code>for...in</code>\u5faa\u73af\u6240\u6392\u9664\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#construct","title":"construct()","text":"<p><code>construct()</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a<code>new</code>\u547d\u4ee4\uff0c\u4e0b\u9762\u662f\u62e6\u622a\u5bf9\u8c61\u7684\u5199\u6cd5\u3002</p> <pre><code>const handler = {\n  construct (target, args, newTarget) {\n    return new target(...args);\n  }\n};\n</code></pre> <p><code>construct()</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002</p> <ul> <li><code>target</code>\uff1a\u76ee\u6807\u5bf9\u8c61\u3002</li> <li><code>args</code>\uff1a\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u6570\u7ec4\u3002</li> <li><code>newTarget</code>\uff1a\u521b\u9020\u5b9e\u4f8b\u5bf9\u8c61\u65f6\uff0c<code>new</code>\u547d\u4ee4\u4f5c\u7528\u7684\u6784\u9020\u51fd\u6570\uff08\u4e0b\u9762\u4f8b\u5b50\u7684<code>p</code>\uff09\u3002</li> </ul> <pre><code>const p = new Proxy(function () {}, {\n  construct: function(target, args) {\n    console.log('called: ' + args.join(', '));\n    return { value: args[0] * 10 };\n  }\n});\n\n(new p(1)).value\n// \"called: 1\"\n// 10\n</code></pre> <p><code>construct()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5fc5\u987b\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>const p = new Proxy(function() {}, {\n  construct: function(target, argumentsList) {\n    return 1;\n  }\n});\n\nnew p() // \u62a5\u9519\n// Uncaught TypeError: 'construct' on proxy: trap returned non-object ('1')\n</code></pre> <p>\u53e6\u5916\uff0c\u7531\u4e8e<code>construct()</code>\u62e6\u622a\u7684\u662f\u6784\u9020\u51fd\u6570\uff0c\u6240\u4ee5\u5b83\u7684\u76ee\u6807\u5bf9\u8c61\u5fc5\u987b\u662f\u51fd\u6570\uff0c\u5426\u5219\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>const p = new Proxy({}, {\n  construct: function(target, argumentsList) {\n    return {};\n  }\n});\n\nnew p() // \u62a5\u9519\n// Uncaught TypeError: p is not a constructor\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u62e6\u622a\u7684\u76ee\u6807\u5bf9\u8c61\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08<code>new Proxy()</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff09\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c<code>construct()</code>\u65b9\u6cd5\u4e2d\u7684<code>this</code>\u6307\u5411\u7684\u662f<code>handler</code>\uff0c\u800c\u4e0d\u662f\u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <pre><code>const handler = {\n  construct: function(target, args) {\n    console.log(this === handler);\n    return new target(...args);\n  }\n}\n\nlet p = new Proxy(function () {}, handler);\nnew p() // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#deleteproperty","title":"deleteProperty()","text":"<p><code>deleteProperty</code>\u65b9\u6cd5\u7528\u4e8e\u62e6\u622a<code>delete</code>\u64cd\u4f5c\uff0c\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u629b\u51fa\u9519\u8bef\u6216\u8005\u8fd4\u56de<code>false</code>\uff0c\u5f53\u524d\u5c5e\u6027\u5c31\u65e0\u6cd5\u88ab<code>delete</code>\u547d\u4ee4\u5220\u9664\u3002</p> <pre><code>var handler = {\n  deleteProperty (target, key) {\n    invariant(key, 'delete');\n    delete target[key];\n    return true;\n  }\n};\nfunction invariant (key, action) {\n  if (key[0] === '_') {\n    throw new Error(`Invalid attempt to ${action} private \"${key}\" property`);\n  }\n}\n\nvar target = { _prop: 'foo' };\nvar proxy = new Proxy(target, handler);\ndelete proxy._prop\n// Error: Invalid attempt to delete private \"_prop\" property\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>deleteProperty</code>\u65b9\u6cd5\u62e6\u622a\u4e86<code>delete</code>\u64cd\u4f5c\u7b26\uff0c\u5220\u9664\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u7684\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\u7684\u5c5e\u6027\uff0c\u4e0d\u80fd\u88ab<code>deleteProperty</code>\u65b9\u6cd5\u5220\u9664\uff0c\u5426\u5219\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#defineproperty","title":"defineProperty()","text":"<p><code>defineProperty()</code>\u65b9\u6cd5\u62e6\u622a\u4e86<code>Object.defineProperty()</code>\u64cd\u4f5c\u3002</p> <pre><code>var handler = {\n  defineProperty (target, key, descriptor) {\n    return false;\n  }\n};\nvar target = {};\nvar proxy = new Proxy(target, handler);\nproxy.foo = 'bar' // \u4e0d\u4f1a\u751f\u6548\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>defineProperty()</code>\u65b9\u6cd5\u5185\u90e8\u6ca1\u6709\u4efb\u4f55\u64cd\u4f5c\uff0c\u53ea\u8fd4\u56de<code>false</code>\uff0c\u5bfc\u81f4\u6dfb\u52a0\u65b0\u5c5e\u6027\u603b\u662f\u65e0\u6548\u3002\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684<code>false</code>\u53ea\u662f\u7528\u6765\u63d0\u793a\u64cd\u4f5c\u5931\u8d25\uff0c\u672c\u8eab\u5e76\u4e0d\u80fd\u963b\u6b62\u6dfb\u52a0\u65b0\u5c5e\u6027\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c\u5219<code>defineProperty()</code>\u4e0d\u80fd\u589e\u52a0\u76ee\u6807\u5bf9\u8c61\u4e0a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u7684\u67d0\u4e2a\u5c5e\u6027\u4e0d\u53ef\u5199\uff08writable\uff09\u6216\u4e0d\u53ef\u914d\u7f6e\uff08configurable\uff09\uff0c\u5219<code>defineProperty()</code>\u65b9\u6cd5\u4e0d\u5f97\u6539\u53d8\u8fd9\u4e24\u4e2a\u8bbe\u7f6e\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#getownpropertydescriptor","title":"getOwnPropertyDescriptor()","text":"<p><code>getOwnPropertyDescriptor()</code>\u65b9\u6cd5\u62e6\u622a<code>Object.getOwnPropertyDescriptor()</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61\u6216\u8005<code>undefined</code>\u3002</p> <pre><code>var handler = {\n  getOwnPropertyDescriptor (target, key) {\n    if (key[0] === '_') {\n      return;\n    }\n    return Object.getOwnPropertyDescriptor(target, key);\n  }\n};\nvar target = { _foo: 'bar', baz: 'tar' };\nvar proxy = new Proxy(target, handler);\nObject.getOwnPropertyDescriptor(proxy, 'wat')\n// undefined\nObject.getOwnPropertyDescriptor(proxy, '_foo')\n// undefined\nObject.getOwnPropertyDescriptor(proxy, 'baz')\n// { value: 'tar', writable: true, enumerable: true, configurable: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>handler.getOwnPropertyDescriptor()</code>\u65b9\u6cd5\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u540d\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#getprototypeof","title":"getPrototypeOf()","text":"<p><code>getPrototypeOf()</code>\u65b9\u6cd5\u4e3b\u8981\u7528\u6765\u62e6\u622a\u83b7\u53d6\u5bf9\u8c61\u539f\u578b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u62e6\u622a\u4e0b\u9762\u8fd9\u4e9b\u64cd\u4f5c\u3002</p> <ul> <li><code>Object.prototype.__proto__</code></li> <li><code>Object.prototype.isPrototypeOf()</code></li> <li><code>Object.getPrototypeOf()</code></li> <li><code>Reflect.getPrototypeOf()</code></li> <li><code>instanceof</code></li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var proto = {};\nvar p = new Proxy({}, {\n  getPrototypeOf(target) {\n    return proto;\n  }\n});\nObject.getPrototypeOf(p) === proto // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getPrototypeOf()</code>\u65b9\u6cd5\u62e6\u622a<code>Object.getPrototypeOf()</code>\uff0c\u8fd4\u56de<code>proto</code>\u5bf9\u8c61\u3002</p> <p>\u6ce8\u610f\uff0c<code>getPrototypeOf()</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u662f\u5bf9\u8c61\u6216\u8005<code>null</code>\uff0c\u5426\u5219\u62a5\u9519\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c <code>getPrototypeOf()</code>\u65b9\u6cd5\u5fc5\u987b\u8fd4\u56de\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#isextensible","title":"isExtensible()","text":"<p><code>isExtensible()</code>\u65b9\u6cd5\u62e6\u622a<code>Object.isExtensible()</code>\u64cd\u4f5c\u3002</p> <pre><code>var p = new Proxy({}, {\n  isExtensible: function(target) {\n    console.log(\"called\");\n    return true;\n  }\n});\n\nObject.isExtensible(p)\n// \"called\"\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bbe\u7f6e\u4e86<code>isExtensible()</code>\u65b9\u6cd5\uff0c\u5728\u8c03\u7528<code>Object.isExtensible</code>\u65f6\u4f1a\u8f93\u51fa<code>called</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u53ea\u80fd\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u5426\u5219\u8fd4\u56de\u503c\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u4e2a\u5f3a\u9650\u5236\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u4e0e\u76ee\u6807\u5bf9\u8c61\u7684<code>isExtensible</code>\u5c5e\u6027\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>Object.isExtensible(proxy) === Object.isExtensible(target)\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var p = new Proxy({}, {\n  isExtensible: function(target) {\n    return false;\n  }\n});\n\nObject.isExtensible(p)\n// Uncaught TypeError: 'isExtensible' on proxy: trap result does not reflect extensibility of proxy target (which is 'true')\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#ownkeys","title":"ownKeys()","text":"<p><code>ownKeys()</code>\u65b9\u6cd5\u7528\u6765\u62e6\u622a\u5bf9\u8c61\u81ea\u8eab\u5c5e\u6027\u7684\u8bfb\u53d6\u64cd\u4f5c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u62e6\u622a\u4ee5\u4e0b\u64cd\u4f5c\u3002</p> <ul> <li><code>Object.getOwnPropertyNames()</code></li> <li><code>Object.getOwnPropertySymbols()</code></li> <li><code>Object.keys()</code></li> <li><code>for...in</code>\u5faa\u73af</li> </ul> <p>\u4e0b\u9762\u662f\u62e6\u622a<code>Object.keys()</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>let target = {\n  a: 1,\n  b: 2,\n  c: 3\n};\n\nlet handler = {\n  ownKeys(target) {\n    return ['a'];\n  }\n};\n\nlet proxy = new Proxy(target, handler);\n\nObject.keys(proxy)\n// [ 'a' ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62e6\u622a\u4e86\u5bf9\u4e8e<code>target</code>\u5bf9\u8c61\u7684<code>Object.keys()</code>\u64cd\u4f5c\uff0c\u53ea\u8fd4\u56de<code>a</code>\u3001<code>b</code>\u3001<code>c</code>\u4e09\u4e2a\u5c5e\u6027\u4e4b\u4e2d\u7684<code>a</code>\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u62e6\u622a\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u4e0b\u5212\u7ebf\u7684\u5c5e\u6027\u540d\u3002</p> <pre><code>let target = {\n  _bar: 'foo',\n  _prop: 'bar',\n  prop: 'baz'\n};\n\nlet handler = {\n  ownKeys (target) {\n    return Reflect.ownKeys(target).filter(key =&gt; key[0] !== '_');\n  }\n};\n\nlet proxy = new Proxy(target, handler);\nfor (let key of Object.keys(proxy)) {\n  console.log(target[key]);\n}\n// \"baz\"\n</code></pre> <p>\u6ce8\u610f\uff0c\u4f7f\u7528<code>Object.keys()</code>\u65b9\u6cd5\u65f6\uff0c\u6709\u4e09\u7c7b\u5c5e\u6027\u4f1a\u88ab<code>ownKeys()</code>\u65b9\u6cd5\u81ea\u52a8\u8fc7\u6ee4\uff0c\u4e0d\u4f1a\u8fd4\u56de\u3002</p> <ul> <li>\u76ee\u6807\u5bf9\u8c61\u4e0a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027</li> <li>\u5c5e\u6027\u540d\u4e3a Symbol \u503c</li> <li>\u4e0d\u53ef\u904d\u5386\uff08<code>enumerable</code>\uff09\u7684\u5c5e\u6027</li> </ul> <pre><code>let target = {\n  a: 1,\n  b: 2,\n  c: 3,\n  [Symbol.for('secret')]: '4',\n};\n\nObject.defineProperty(target, 'key', {\n  enumerable: false,\n  configurable: true,\n  writable: true,\n  value: 'static'\n});\n\nlet handler = {\n  ownKeys(target) {\n    return ['a', 'd', Symbol.for('secret'), 'key'];\n  }\n};\n\nlet proxy = new Proxy(target, handler);\n\nObject.keys(proxy)\n// ['a']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownKeys()</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u663e\u5f0f\u8fd4\u56de\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\uff08<code>d</code>\uff09\u3001Symbol \u503c\uff08<code>Symbol.for('secret')</code>\uff09\u3001\u4e0d\u53ef\u904d\u5386\u7684\u5c5e\u6027\uff08<code>key</code>\uff09\uff0c\u7ed3\u679c\u90fd\u88ab\u81ea\u52a8\u8fc7\u6ee4\u6389\u3002</p> <p><code>ownKeys()</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u62e6\u622a<code>Object.getOwnPropertyNames()</code>\u3002</p> <pre><code>var p = new Proxy({}, {\n  ownKeys: function(target) {\n    return ['a', 'b', 'c'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// [ 'a', 'b', 'c' ]\n</code></pre> <p><code>for...in</code>\u5faa\u73af\u4e5f\u53d7\u5230<code>ownKeys()</code>\u65b9\u6cd5\u7684\u62e6\u622a\u3002</p> <pre><code>const obj = { hello: 'world' };\nconst proxy = new Proxy(obj, {\n  ownKeys: function () {\n    return ['a', 'b'];\n  }\n});\n\nfor (let key in proxy) {\n  console.log(key); // \u6ca1\u6709\u4efb\u4f55\u8f93\u51fa\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownkeys()</code>\u6307\u5b9a\u53ea\u8fd4\u56de<code>a</code>\u548c<code>b</code>\u5c5e\u6027\uff0c\u7531\u4e8e<code>obj</code>\u6ca1\u6709\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u56e0\u6b64<code>for...in</code>\u5faa\u73af\u4e0d\u4f1a\u6709\u4efb\u4f55\u8f93\u51fa\u3002</p> <p><code>ownKeys()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u6210\u5458\uff0c\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216 Symbol \u503c\u3002\u5982\u679c\u6709\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u8fd4\u56de\u7684\u6839\u672c\u4e0d\u662f\u6570\u7ec4\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>var obj = {};\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return [123, true, undefined, null, {}, []];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 123 is not a valid property name\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ownKeys()</code>\u65b9\u6cd5\u867d\u7136\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f46\u662f\u6bcf\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u90fd\u4e0d\u662f\u5b57\u7b26\u4e32\u6216 Symbol \u503c\uff0c\u56e0\u6b64\u5c31\u62a5\u9519\u4e86\u3002</p> <p>\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u81ea\u8eab\u5305\u542b\u4e0d\u53ef\u914d\u7f6e\u7684\u5c5e\u6027\uff0c\u5219\u8be5\u5c5e\u6027\u5fc5\u987b\u88ab<code>ownKeys()</code>\u65b9\u6cd5\u8fd4\u56de\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>var obj = {};\nObject.defineProperty(obj, 'a', {\n  configurable: false,\n  enumerable: true,\n  value: 10 }\n);\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return ['b'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 'ownKeys' on proxy: trap result did not include 'a'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u7684<code>a</code>\u5c5e\u6027\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\uff0c\u8fd9\u65f6<code>ownKeys()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5fc5\u987b\u5305\u542b<code>a</code>\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <p>\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff08non-extensible\uff09\uff0c\u8fd9\u65f6<code>ownKeys()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5fc5\u987b\u5305\u542b\u539f\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\uff0c\u4e14\u4e0d\u80fd\u5305\u542b\u591a\u4f59\u7684\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <pre><code>var obj = {\n  a: 1\n};\n\nObject.preventExtensions(obj);\n\nvar p = new Proxy(obj, {\n  ownKeys: function(target) {\n    return ['a', 'b'];\n  }\n});\n\nObject.getOwnPropertyNames(p)\n// Uncaught TypeError: 'ownKeys' on proxy: trap returned extra keys but proxy target is non-extensible\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>obj</code>\u5bf9\u8c61\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff0c\u8fd9\u65f6<code>ownKeys()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u7ec4\u4e4b\u4e2d\uff0c\u5305\u542b\u4e86<code>obj</code>\u5bf9\u8c61\u7684\u591a\u4f59\u5c5e\u6027<code>b</code>\uff0c\u6240\u4ee5\u5bfc\u81f4\u4e86\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#preventextensions","title":"preventExtensions()","text":"<p><code>preventExtensions()</code>\u65b9\u6cd5\u62e6\u622a<code>Object.preventExtensions()</code>\u3002\u8be5\u65b9\u6cd5\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u5426\u5219\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u4e2a\u9650\u5236\uff0c\u53ea\u6709\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\u65f6\uff08\u5373<code>Object.isExtensible(proxy)</code>\u4e3a<code>false</code>\uff09\uff0c<code>proxy.preventExtensions</code>\u624d\u80fd\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  preventExtensions: function(target) {\n    return true;\n  }\n});\n\nObject.preventExtensions(proxy)\n// Uncaught TypeError: 'preventExtensions' on proxy: trap returned truish but the proxy target is extensible\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>proxy.preventExtensions()</code>\u65b9\u6cd5\u8fd4\u56de<code>true</code>\uff0c\u4f46\u8fd9\u65f6<code>Object.isExtensible(proxy)</code>\u4f1a\u8fd4\u56de<code>true</code>\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u901a\u5e38\u8981\u5728<code>proxy.preventExtensions()</code>\u65b9\u6cd5\u91cc\u9762\uff0c\u8c03\u7528\u4e00\u6b21<code>Object.preventExtensions()</code>\u3002</p> <pre><code>var proxy = new Proxy({}, {\n  preventExtensions: function(target) {\n    console.log('called');\n    Object.preventExtensions(target);\n    return true;\n  }\n});\n\nObject.preventExtensions(proxy)\n// \"called\"\n// Proxy {}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#setprototypeof","title":"setPrototypeOf()","text":"<p><code>setPrototypeOf()</code>\u65b9\u6cd5\u4e3b\u8981\u7528\u6765\u62e6\u622a<code>Object.setPrototypeOf()</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var handler = {\n  setPrototypeOf (target, proto) {\n    throw new Error('Changing the prototype is forbidden');\n  }\n};\nvar proto = {};\nvar target = function () {};\nvar proxy = new Proxy(target, handler);\nObject.setPrototypeOf(proxy, proto);\n// Error: Changing the prototype is forbidden\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981\u4fee\u6539<code>target</code>\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u8be5\u65b9\u6cd5\u53ea\u80fd\u8fd4\u56de\u5e03\u5c14\u503c\uff0c\u5426\u5219\u4f1a\u88ab\u81ea\u52a8\u8f6c\u4e3a\u5e03\u5c14\u503c\u3002\u53e6\u5916\uff0c\u5982\u679c\u76ee\u6807\u5bf9\u8c61\u4e0d\u53ef\u6269\u5c55\uff08non-extensible\uff09\uff0c<code>setPrototypeOf()</code>\u65b9\u6cd5\u4e0d\u5f97\u6539\u53d8\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#proxyrevocable","title":"Proxy.revocable()","text":"<p><code>Proxy.revocable()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u53ef\u53d6\u6d88\u7684 Proxy \u5b9e\u4f8b\u3002</p> <pre><code>let target = {};\nlet handler = {};\n\nlet {proxy, revoke} = Proxy.revocable(target, handler);\n\nproxy.foo = 123;\nproxy.foo // 123\n\nrevoke();\nproxy.foo // TypeError: Revoked\n</code></pre> <p><code>Proxy.revocable()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684<code>proxy</code>\u5c5e\u6027\u662f<code>Proxy</code>\u5b9e\u4f8b\uff0c<code>revoke</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u53d6\u6d88<code>Proxy</code>\u5b9e\u4f8b\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f53\u6267\u884c<code>revoke</code>\u51fd\u6570\u4e4b\u540e\uff0c\u518d\u8bbf\u95ee<code>Proxy</code>\u5b9e\u4f8b\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p><code>Proxy.revocable()</code>\u7684\u4e00\u4e2a\u4f7f\u7528\u573a\u666f\u662f\uff0c\u76ee\u6807\u5bf9\u8c61\u4e0d\u5141\u8bb8\u76f4\u63a5\u8bbf\u95ee\uff0c\u5fc5\u987b\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\uff0c\u4e00\u65e6\u8bbf\u95ee\u7ed3\u675f\uff0c\u5c31\u6536\u56de\u4ee3\u7406\u6743\uff0c\u4e0d\u5141\u8bb8\u518d\u6b21\u8bbf\u95ee\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#this","title":"this \u95ee\u9898","text":"<p>\u867d\u7136 Proxy \u53ef\u4ee5\u4ee3\u7406\u9488\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u8bbf\u95ee\uff0c\u4f46\u5b83\u4e0d\u662f\u76ee\u6807\u5bf9\u8c61\u7684\u900f\u660e\u4ee3\u7406\uff0c\u5373\u4e0d\u505a\u4efb\u4f55\u62e6\u622a\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u4e0e\u76ee\u6807\u5bf9\u8c61\u7684\u884c\u4e3a\u4e00\u81f4\u3002\u4e3b\u8981\u539f\u56e0\u5c31\u662f\u5728 Proxy \u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\uff0c\u76ee\u6807\u5bf9\u8c61\u5185\u90e8\u7684<code>this</code>\u5173\u952e\u5b57\u4f1a\u6307\u5411 Proxy \u4ee3\u7406\u3002</p> <pre><code>const target = {\n  m: function () {\n    console.log(this === proxy);\n  }\n};\nconst handler = {};\n\nconst proxy = new Proxy(target, handler);\n\ntarget.m() // false\nproxy.m()  // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u65e6<code>proxy</code>\u4ee3\u7406<code>target</code>\uff0c<code>target.m()</code>\u5185\u90e8\u7684<code>this</code>\u5c31\u662f\u6307\u5411<code>proxy</code>\uff0c\u800c\u4e0d\u662f<code>target</code>\u3002\u6240\u4ee5\uff0c\u867d\u7136<code>proxy</code>\u6ca1\u6709\u505a\u4efb\u4f55\u62e6\u622a\uff0c<code>target.m()</code>\u548c<code>proxy.m()</code>\u8fd4\u56de\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u7531\u4e8e<code>this</code>\u6307\u5411\u7684\u53d8\u5316\uff0c\u5bfc\u81f4 Proxy \u65e0\u6cd5\u4ee3\u7406\u76ee\u6807\u5bf9\u8c61\u3002</p> <pre><code>const _name = new WeakMap();\n\nclass Person {\n  constructor(name) {\n    _name.set(this, name);\n  }\n  get name() {\n    return _name.get(this);\n  }\n}\n\nconst jane = new Person('Jane');\njane.name // 'Jane'\n\nconst proxy = new Proxy(jane, {});\nproxy.name // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u76ee\u6807\u5bf9\u8c61<code>jane</code>\u7684<code>name</code>\u5c5e\u6027\uff0c\u5b9e\u9645\u4fdd\u5b58\u5728\u5916\u90e8<code>WeakMap</code>\u5bf9\u8c61<code>_name</code>\u4e0a\u9762\uff0c\u901a\u8fc7<code>this</code>\u952e\u533a\u5206\u3002\u7531\u4e8e\u901a\u8fc7<code>proxy.name</code>\u8bbf\u95ee\u65f6\uff0c<code>this</code>\u6307\u5411<code>proxy</code>\uff0c\u5bfc\u81f4\u65e0\u6cd5\u53d6\u5230\u503c\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u6b64\u5916\uff0c\u6709\u4e9b\u539f\u751f\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027\uff0c\u53ea\u6709\u901a\u8fc7\u6b63\u786e\u7684<code>this</code>\u624d\u80fd\u62ff\u5230\uff0c\u6240\u4ee5 Proxy \u4e5f\u65e0\u6cd5\u4ee3\u7406\u8fd9\u4e9b\u539f\u751f\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>const target = new Date();\nconst handler = {};\nconst proxy = new Proxy(target, handler);\n\nproxy.getDate();\n// TypeError: this is not a Date object.\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getDate()</code>\u65b9\u6cd5\u53ea\u80fd\u5728<code>Date</code>\u5bf9\u8c61\u5b9e\u4f8b\u4e0a\u9762\u62ff\u5230\uff0c\u5982\u679c<code>this</code>\u4e0d\u662f<code>Date</code>\u5bf9\u8c61\u5b9e\u4f8b\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c<code>this</code>\u7ed1\u5b9a\u539f\u59cb\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>const target = new Date('2015-01-01');\nconst handler = {\n  get(target, prop) {\n    if (prop === 'getDate') {\n      return target.getDate.bind(target);\n    }\n    return Reflect.get(target, prop);\n  }\n};\nconst proxy = new Proxy(target, handler);\n\nproxy.getDate() // 1\n</code></pre> <p>\u53e6\u5916\uff0cProxy \u62e6\u622a\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\uff0c\u6307\u5411\u7684\u662f<code>handler</code>\u5bf9\u8c61\u3002</p> <pre><code>const handler = {\n  get: function (target, key, receiver) {\n    console.log(this === handler);\n    return 'Hello, ' + key;\n  },\n  set: function (target, key, value) {\n    console.log(this === handler);\n    target[key] = value;\n    return true;\n  }\n};\n\nconst proxy = new Proxy({}, handler);\n\nproxy.foo\n// true\n// Hello, foo\n\nproxy.foo = 1\n// true\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>get()</code>\u548c<code>set()</code>\u62e6\u622a\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\uff0c\u6307\u5411\u7684\u90fd\u662f<code>handler</code>\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/15-proxy/#web","title":"\u5b9e\u4f8b\uff1aWeb \u670d\u52a1\u7684\u5ba2\u6237\u7aef","text":"<p>Proxy \u5bf9\u8c61\u53ef\u4ee5\u62e6\u622a\u76ee\u6807\u5bf9\u8c61\u7684\u4efb\u610f\u5c5e\u6027\uff0c\u8fd9\u4f7f\u5f97\u5b83\u5f88\u5408\u9002\u7528\u6765\u5199 Web \u670d\u52a1\u7684\u5ba2\u6237\u7aef\u3002</p> <pre><code>const service = createWebService('http://example.com/data');\n\nservice.employees().then(json =&gt; {\n  const employees = JSON.parse(json);\n  // \u00b7\u00b7\u00b7\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u65b0\u5efa\u4e86\u4e00\u4e2a Web \u670d\u52a1\u7684\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u8fd4\u56de\u5404\u79cd\u6570\u636e\u3002Proxy \u53ef\u4ee5\u62e6\u622a\u8fd9\u4e2a\u5bf9\u8c61\u7684\u4efb\u610f\u5c5e\u6027\uff0c\u6240\u4ee5\u4e0d\u7528\u4e3a\u6bcf\u4e00\u79cd\u6570\u636e\u5199\u4e00\u4e2a\u9002\u914d\u65b9\u6cd5\uff0c\u53ea\u8981\u5199\u4e00\u4e2a Proxy \u62e6\u622a\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>function createWebService(baseUrl) {\n  return new Proxy({}, {\n    get(target, propKey, receiver) {\n      return () =&gt; httpGet(baseUrl + '/' + propKey);\n    }\n  });\n}\n</code></pre> <p>\u540c\u7406\uff0cProxy \u4e5f\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u6570\u636e\u5e93\u7684 ORM \u5c42\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/","title":"16-Reflect","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#_1","title":"\u6982\u8ff0","text":"<p><code>Reflect</code>\u5bf9\u8c61\u4e0e<code>Proxy</code>\u5bf9\u8c61\u4e00\u6837\uff0c\u4e5f\u662f ES6 \u4e3a\u4e86\u64cd\u4f5c\u5bf9\u8c61\u800c\u63d0\u4f9b\u7684\u65b0 API\u3002<code>Reflect</code>\u5bf9\u8c61\u7684\u8bbe\u8ba1\u76ee\u7684\u6709\u8fd9\u6837\u51e0\u4e2a\u3002</p> <p>\uff081\uff09 \u5c06<code>Object</code>\u5bf9\u8c61\u7684\u4e00\u4e9b\u660e\u663e\u5c5e\u4e8e\u8bed\u8a00\u5185\u90e8\u7684\u65b9\u6cd5\uff08\u6bd4\u5982<code>Object.defineProperty</code>\uff09\uff0c\u653e\u5230<code>Reflect</code>\u5bf9\u8c61\u4e0a\u3002\u73b0\u9636\u6bb5\uff0c\u67d0\u4e9b\u65b9\u6cd5\u540c\u65f6\u5728<code>Object</code>\u548c<code>Reflect</code>\u5bf9\u8c61\u4e0a\u90e8\u7f72\uff0c\u672a\u6765\u7684\u65b0\u65b9\u6cd5\u5c06\u53ea\u90e8\u7f72\u5728<code>Reflect</code>\u5bf9\u8c61\u4e0a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ece<code>Reflect</code>\u5bf9\u8c61\u4e0a\u53ef\u4ee5\u62ff\u5230\u8bed\u8a00\u5185\u90e8\u7684\u65b9\u6cd5\u3002</p> <p>\uff082\uff09 \u4fee\u6539\u67d0\u4e9b<code>Object</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u8ba9\u5176\u53d8\u5f97\u66f4\u5408\u7406\u3002\u6bd4\u5982\uff0c<code>Object.defineProperty(obj, name, desc)</code>\u5728\u65e0\u6cd5\u5b9a\u4e49\u5c5e\u6027\u65f6\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u800c<code>Reflect.defineProperty(obj, name, desc)</code>\u5219\u4f1a\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>// \u8001\u5199\u6cd5\ntry {\n  Object.defineProperty(target, property, attributes);\n  // success\n} catch (e) {\n  // failure\n}\n\n// \u65b0\u5199\u6cd5\nif (Reflect.defineProperty(target, property, attributes)) {\n  // success\n} else {\n  // failure\n}\n</code></pre> <p>\uff083\uff09 \u8ba9<code>Object</code>\u64cd\u4f5c\u90fd\u53d8\u6210\u51fd\u6570\u884c\u4e3a\u3002\u67d0\u4e9b<code>Object</code>\u64cd\u4f5c\u662f\u547d\u4ee4\u5f0f\uff0c\u6bd4\u5982<code>name in obj</code>\u548c<code>delete obj[name]</code>\uff0c\u800c<code>Reflect.has(obj, name)</code>\u548c<code>Reflect.deleteProperty(obj, name)</code>\u8ba9\u5b83\u4eec\u53d8\u6210\u4e86\u51fd\u6570\u884c\u4e3a\u3002</p> <pre><code>// \u8001\u5199\u6cd5\n'assign' in Object // true\n\n// \u65b0\u5199\u6cd5\nReflect.has(Object, 'assign') // true\n</code></pre> <p>\uff084\uff09<code>Reflect</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e0e<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e00\u4e00\u5bf9\u5e94\uff0c\u53ea\u8981\u662f<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u5c31\u80fd\u5728<code>Reflect</code>\u5bf9\u8c61\u4e0a\u627e\u5230\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002\u8fd9\u5c31\u8ba9<code>Proxy</code>\u5bf9\u8c61\u53ef\u4ee5\u65b9\u4fbf\u5730\u8c03\u7528\u5bf9\u5e94\u7684<code>Reflect</code>\u65b9\u6cd5\uff0c\u5b8c\u6210\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f5c\u4e3a\u4fee\u6539\u884c\u4e3a\u7684\u57fa\u7840\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1<code>Proxy</code>\u600e\u4e48\u4fee\u6539\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f60\u603b\u53ef\u4ee5\u5728<code>Reflect</code>\u4e0a\u83b7\u53d6\u9ed8\u8ba4\u884c\u4e3a\u3002</p> <pre><code>Proxy(target, {\n  set: function(target, name, value, receiver) {\n    var success = Reflect.set(target, name, value, receiver);\n    if (success) {\n      console.log('property ' + name + ' on ' + target + ' set to ' + value);\n    }\n    return success;\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy</code>\u65b9\u6cd5\u62e6\u622a<code>target</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u8d4b\u503c\u884c\u4e3a\u3002\u5b83\u91c7\u7528<code>Reflect.set</code>\u65b9\u6cd5\u5c06\u503c\u8d4b\u503c\u7ed9\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u786e\u4fdd\u5b8c\u6210\u539f\u6709\u7684\u884c\u4e3a\uff0c\u7136\u540e\u518d\u90e8\u7f72\u989d\u5916\u7684\u529f\u80fd\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var loggedObj = new Proxy(obj, {\n  get(target, name) {\n    console.log('get', target, name);\n    return Reflect.get(target, name);\n  },\n  deleteProperty(target, name) {\n    console.log('delete' + name);\n    return Reflect.deleteProperty(target, name);\n  },\n  has(target, name) {\n    console.log('has' + name);\n    return Reflect.has(target, name);\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6bcf\u4e00\u4e2a<code>Proxy</code>\u5bf9\u8c61\u7684\u62e6\u622a\u64cd\u4f5c\uff08<code>get</code>\u3001<code>delete</code>\u3001<code>has</code>\uff09\uff0c\u5185\u90e8\u90fd\u8c03\u7528\u5bf9\u5e94\u7684<code>Reflect</code>\u65b9\u6cd5\uff0c\u4fdd\u8bc1\u539f\u751f\u884c\u4e3a\u80fd\u591f\u6b63\u5e38\u6267\u884c\u3002\u6dfb\u52a0\u7684\u5de5\u4f5c\uff0c\u5c31\u662f\u5c06\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u8f93\u51fa\u4e00\u884c\u65e5\u5fd7\u3002</p> <p>\u6709\u4e86<code>Reflect</code>\u5bf9\u8c61\u4ee5\u540e\uff0c\u5f88\u591a\u64cd\u4f5c\u4f1a\u66f4\u6613\u8bfb\u3002</p> <pre><code>// \u8001\u5199\u6cd5\nFunction.prototype.apply.call(Math.floor, undefined, [1.75]) // 1\n\n// \u65b0\u5199\u6cd5\nReflect.apply(Math.floor, undefined, [1.75]) // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#_2","title":"\u9759\u6001\u65b9\u6cd5","text":"<p><code>Reflect</code>\u5bf9\u8c61\u4e00\u5171\u6709 13 \u4e2a\u9759\u6001\u65b9\u6cd5\u3002</p> <ul> <li>Reflect.apply(target, thisArg, args)</li> <li>Reflect.construct(target, args)</li> <li>Reflect.get(target, name, receiver)</li> <li>Reflect.set(target, name, value, receiver)</li> <li>Reflect.defineProperty(target, name, desc)</li> <li>Reflect.deleteProperty(target, name)</li> <li>Reflect.has(target, name)</li> <li>Reflect.ownKeys(target)</li> <li>Reflect.isExtensible(target)</li> <li>Reflect.preventExtensions(target)</li> <li>Reflect.getOwnPropertyDescriptor(target, name)</li> <li>Reflect.getPrototypeOf(target)</li> <li>Reflect.setPrototypeOf(target, prototype)</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4f5c\u7528\uff0c\u5927\u90e8\u5206\u4e0e<code>Object</code>\u5bf9\u8c61\u7684\u540c\u540d\u65b9\u6cd5\u7684\u4f5c\u7528\u90fd\u662f\u76f8\u540c\u7684\uff0c\u800c\u4e14\u5b83\u4e0e<code>Proxy</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002\u4e0b\u9762\u662f\u5bf9\u5b83\u4eec\u7684\u89e3\u91ca\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectgettarget-name-receiver","title":"Reflect.get(target, name, receiver)","text":"<p><code>Reflect.get</code>\u65b9\u6cd5\u67e5\u627e\u5e76\u8fd4\u56de<code>target</code>\u5bf9\u8c61\u7684<code>name</code>\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u5c5e\u6027\uff0c\u5219\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  get baz() {\n    return this.foo + this.bar;\n  },\n}\n\nReflect.get(myObject, 'foo') // 1\nReflect.get(myObject, 'bar') // 2\nReflect.get(myObject, 'baz') // 3\n</code></pre> <p>\u5982\u679c<code>name</code>\u5c5e\u6027\u90e8\u7f72\u4e86\u8bfb\u53d6\u51fd\u6570\uff08getter\uff09\uff0c\u5219\u8bfb\u53d6\u51fd\u6570\u7684<code>this</code>\u7ed1\u5b9a<code>receiver</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  get baz() {\n    return this.foo + this.bar;\n  },\n};\n\nvar myReceiverObject = {\n  foo: 4,\n  bar: 4,\n};\n\nReflect.get(myObject, 'baz', myReceiverObject) // 8\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Reflect.get</code>\u65b9\u6cd5\u4f1a\u62a5\u9519\u3002</p> <pre><code>Reflect.get(1, 'foo') // \u62a5\u9519\nReflect.get(false, 'foo') // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectsettarget-name-value-receiver","title":"Reflect.set(target, name, value, receiver)","text":"<p><code>Reflect.set</code>\u65b9\u6cd5\u8bbe\u7f6e<code>target</code>\u5bf9\u8c61\u7684<code>name</code>\u5c5e\u6027\u7b49\u4e8e<code>value</code>\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  set bar(value) {\n    return this.foo = value;\n  },\n}\n\nmyObject.foo // 1\n\nReflect.set(myObject, 'foo', 2);\nmyObject.foo // 2\n\nReflect.set(myObject, 'bar', 3)\nmyObject.foo // 3\n</code></pre> <p>\u5982\u679c<code>name</code>\u5c5e\u6027\u8bbe\u7f6e\u4e86\u8d4b\u503c\u51fd\u6570\uff0c\u5219\u8d4b\u503c\u51fd\u6570\u7684<code>this</code>\u7ed1\u5b9a<code>receiver</code>\u3002</p> <pre><code>var myObject = {\n  foo: 4,\n  set bar(value) {\n    return this.foo = value;\n  },\n};\n\nvar myReceiverObject = {\n  foo: 0,\n};\n\nReflect.set(myObject, 'bar', 1, myReceiverObject);\nmyObject.foo // 4\nmyReceiverObject.foo // 1\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c <code>Proxy</code>\u5bf9\u8c61\u548c <code>Reflect</code>\u5bf9\u8c61\u8054\u5408\u4f7f\u7528\uff0c\u524d\u8005\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\uff0c\u540e\u8005\u5b8c\u6210\u8d4b\u503c\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u800c\u4e14\u4f20\u5165\u4e86<code>receiver</code>\uff0c\u90a3\u4e48<code>Reflect.set</code>\u4f1a\u89e6\u53d1<code>Proxy.defineProperty</code>\u62e6\u622a\u3002</p> <pre><code>let p = {\n  a: 'a'\n};\n\nlet handler = {\n  set(target, key, value, receiver) {\n    console.log('set');\n    Reflect.set(target, key, value, receiver)\n  },\n  defineProperty(target, key, attribute) {\n    console.log('defineProperty');\n    Reflect.defineProperty(target, key, attribute);\n  }\n};\n\nlet obj = new Proxy(p, handler);\nobj.a = 'A';\n// set\n// defineProperty\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy.set</code>\u62e6\u622a\u91cc\u9762\u4f7f\u7528\u4e86<code>Reflect.set</code>\uff0c\u800c\u4e14\u4f20\u5165\u4e86<code>receiver</code>\uff0c\u5bfc\u81f4\u89e6\u53d1<code>Proxy.defineProperty</code>\u62e6\u622a\u3002\u8fd9\u662f\u56e0\u4e3a<code>Proxy.set</code>\u7684<code>receiver</code>\u53c2\u6570\u603b\u662f\u6307\u5411\u5f53\u524d\u7684 <code>Proxy</code>\u5b9e\u4f8b\uff08\u5373\u4e0a\u4f8b\u7684<code>obj</code>\uff09\uff0c\u800c<code>Reflect.set</code>\u4e00\u65e6\u4f20\u5165<code>receiver</code>\uff0c\u5c31\u4f1a\u5c06\u5c5e\u6027\u8d4b\u503c\u5230<code>receiver</code>\u4e0a\u9762\uff08\u5373<code>obj</code>\uff09\uff0c\u5bfc\u81f4\u89e6\u53d1<code>defineProperty</code>\u62e6\u622a\u3002\u5982\u679c<code>Reflect.set</code>\u6ca1\u6709\u4f20\u5165<code>receiver</code>\uff0c\u90a3\u4e48\u5c31\u4e0d\u4f1a\u89e6\u53d1<code>defineProperty</code>\u62e6\u622a\u3002</p> <pre><code>let p = {\n  a: 'a'\n};\n\nlet handler = {\n  set(target, key, value, receiver) {\n    console.log('set');\n    Reflect.set(target, key, value)\n  },\n  defineProperty(target, key, attribute) {\n    console.log('defineProperty');\n    Reflect.defineProperty(target, key, attribute);\n  }\n};\n\nlet obj = new Proxy(p, handler);\nobj.a = 'A';\n// set\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Reflect.set</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Reflect.set(1, 'foo', {}) // \u62a5\u9519\nReflect.set(false, 'foo', {}) // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflecthasobj-name","title":"Reflect.has(obj, name)","text":"<p><code>Reflect.has</code>\u65b9\u6cd5\u5bf9\u5e94<code>name in obj</code>\u91cc\u9762\u7684<code>in</code>\u8fd0\u7b97\u7b26\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n};\n\n// \u65e7\u5199\u6cd5\n'foo' in myObject // true\n\n// \u65b0\u5199\u6cd5\nReflect.has(myObject, 'foo') // true\n</code></pre> <p>\u5982\u679c<code>Reflect.has()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectdeletepropertyobj-name","title":"Reflect.deleteProperty(obj, name)","text":"<p><code>Reflect.deleteProperty</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>delete obj[name]</code>\uff0c\u7528\u4e8e\u5220\u9664\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <pre><code>const myObj = { foo: 'bar' };\n\n// \u65e7\u5199\u6cd5\ndelete myObj.foo;\n\n// \u65b0\u5199\u6cd5\nReflect.deleteProperty(myObj, 'foo');\n</code></pre> <p>\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u5982\u679c\u5220\u9664\u6210\u529f\uff0c\u6216\u8005\u88ab\u5220\u9664\u7684\u5c5e\u6027\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de<code>true</code>\uff1b\u5220\u9664\u5931\u8d25\uff0c\u88ab\u5220\u9664\u7684\u5c5e\u6027\u4f9d\u7136\u5b58\u5728\uff0c\u8fd4\u56de<code>false</code>\u3002</p> <p>\u5982\u679c<code>Reflect.deleteProperty()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectconstructtarget-args","title":"Reflect.construct(target, args)","text":"<p><code>Reflect.construct</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>new target(...args)</code>\uff0c\u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u4e0d\u4f7f\u7528<code>new</code>\uff0c\u6765\u8c03\u7528\u6784\u9020\u51fd\u6570\u7684\u65b9\u6cd5\u3002</p> <pre><code>function Greeting(name) {\n  this.name = name;\n}\n\n// new \u7684\u5199\u6cd5\nconst instance = new Greeting('\u5f20\u4e09');\n\n// Reflect.construct \u7684\u5199\u6cd5\nconst instance = Reflect.construct(Greeting, ['\u5f20\u4e09']);\n</code></pre> <p>\u5982\u679c<code>Reflect.construct()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u51fd\u6570\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectgetprototypeofobj","title":"Reflect.getPrototypeOf(obj)","text":"<p><code>Reflect.getPrototypeOf</code>\u65b9\u6cd5\u7528\u4e8e\u8bfb\u53d6\u5bf9\u8c61\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u5bf9\u5e94<code>Object.getPrototypeOf(obj)</code>\u3002</p> <pre><code>const myObj = new FancyThing();\n\n// \u65e7\u5199\u6cd5\nObject.getPrototypeOf(myObj) === FancyThing.prototype;\n\n// \u65b0\u5199\u6cd5\nReflect.getPrototypeOf(myObj) === FancyThing.prototype;\n</code></pre> <p><code>Reflect.getPrototypeOf</code>\u548c<code>Object.getPrototypeOf</code>\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.getPrototypeOf</code>\u4f1a\u5c06\u8fd9\u4e2a\u53c2\u6570\u8f6c\u4e3a\u5bf9\u8c61\uff0c\u7136\u540e\u518d\u8fd0\u884c\uff0c\u800c<code>Reflect.getPrototypeOf</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.getPrototypeOf(1) // Number {[[PrimitiveValue]]: 0}\nReflect.getPrototypeOf(1) // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectsetprototypeofobj-newproto","title":"Reflect.setPrototypeOf(obj, newProto)","text":"<p><code>Reflect.setPrototypeOf</code>\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\uff08prototype\uff09\uff0c\u5bf9\u5e94<code>Object.setPrototypeOf(obj, newProto)</code>\u65b9\u6cd5\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u8bbe\u7f6e\u6210\u529f\u3002</p> <pre><code>const myObj = {};\n\n// \u65e7\u5199\u6cd5\nObject.setPrototypeOf(myObj, Array.prototype);\n\n// \u65b0\u5199\u6cd5\nReflect.setPrototypeOf(myObj, Array.prototype);\n\nmyObj.length // 0\n</code></pre> <p>\u5982\u679c\u65e0\u6cd5\u8bbe\u7f6e\u76ee\u6807\u5bf9\u8c61\u7684\u539f\u578b\uff08\u6bd4\u5982\uff0c\u76ee\u6807\u5bf9\u8c61\u7981\u6b62\u6269\u5c55\uff09\uff0c<code>Reflect.setPrototypeOf</code>\u65b9\u6cd5\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>Reflect.setPrototypeOf({}, null)\n// true\nReflect.setPrototypeOf(Object.freeze({}), null)\n// false\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.setPrototypeOf</code>\u4f1a\u8fd4\u56de\u7b2c\u4e00\u4e2a\u53c2\u6570\u672c\u8eab\uff0c\u800c<code>Reflect.setPrototypeOf</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(1, {})\n// 1\n\nReflect.setPrototypeOf(1, {})\n// TypeError: Reflect.setPrototypeOf called on non-object\n</code></pre> <p>\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>undefined</code>\u6216<code>null</code>\uff0c<code>Object.setPrototypeOf</code>\u548c<code>Reflect.setPrototypeOf</code>\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.setPrototypeOf(null, {})\n// TypeError: Object.setPrototypeOf called on null or undefined\n\nReflect.setPrototypeOf(null, {})\n// TypeError: Reflect.setPrototypeOf called on non-object\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectapplyfunc-thisarg-args","title":"Reflect.apply(func, thisArg, args)","text":"<p><code>Reflect.apply</code>\u65b9\u6cd5\u7b49\u540c\u4e8e<code>Function.prototype.apply.call(func, thisArg, args)</code>\uff0c\u7528\u4e8e\u7ed1\u5b9a<code>this</code>\u5bf9\u8c61\u540e\u6267\u884c\u7ed9\u5b9a\u51fd\u6570\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u8981\u7ed1\u5b9a\u4e00\u4e2a\u51fd\u6570\u7684<code>this</code>\u5bf9\u8c61\uff0c\u53ef\u4ee5\u8fd9\u6837\u5199<code>fn.apply(obj, args)</code>\uff0c\u4f46\u662f\u5982\u679c\u51fd\u6570\u5b9a\u4e49\u4e86\u81ea\u5df1\u7684<code>apply</code>\u65b9\u6cd5\uff0c\u5c31\u53ea\u80fd\u5199\u6210<code>Function.prototype.apply.call(fn, obj, args)</code>\uff0c\u91c7\u7528<code>Reflect</code>\u5bf9\u8c61\u53ef\u4ee5\u7b80\u5316\u8fd9\u79cd\u64cd\u4f5c\u3002</p> <pre><code>const ages = [11, 33, 12, 54, 18, 96];\n\n// \u65e7\u5199\u6cd5\nconst youngest = Math.min.apply(Math, ages);\nconst oldest = Math.max.apply(Math, ages);\nconst type = Object.prototype.toString.call(youngest);\n\n// \u65b0\u5199\u6cd5\nconst youngest = Reflect.apply(Math.min, Math, ages);\nconst oldest = Reflect.apply(Math.max, Math, ages);\nconst type = Reflect.apply(Object.prototype.toString, youngest, []);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectdefinepropertytarget-propertykey-attributes","title":"Reflect.defineProperty(target, propertyKey, attributes)","text":"<p><code>Reflect.defineProperty</code>\u65b9\u6cd5\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.defineProperty</code>\uff0c\u7528\u6765\u4e3a\u5bf9\u8c61\u5b9a\u4e49\u5c5e\u6027\u3002\u672a\u6765\uff0c\u540e\u8005\u4f1a\u88ab\u9010\u6e10\u5e9f\u9664\uff0c\u8bf7\u4ece\u73b0\u5728\u5f00\u59cb\u5c31\u4f7f\u7528<code>Reflect.defineProperty</code>\u4ee3\u66ff\u5b83\u3002</p> <pre><code>function MyDate() {\n  /*\u2026*/\n}\n\n// \u65e7\u5199\u6cd5\nObject.defineProperty(MyDate, 'now', {\n  value: () =&gt; Date.now()\n});\n\n// \u65b0\u5199\u6cd5\nReflect.defineProperty(MyDate, 'now', {\n  value: () =&gt; Date.now()\n});\n</code></pre> <p>\u5982\u679c<code>Reflect.defineProperty</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u6bd4\u5982<code>Reflect.defineProperty(1, 'foo')</code>\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u4e0e<code>Proxy.defineProperty</code>\u914d\u5408\u4f7f\u7528\u3002</p> <pre><code>const p = new Proxy({}, {\n  defineProperty(target, prop, descriptor) {\n    console.log(descriptor);\n    return Reflect.defineProperty(target, prop, descriptor);\n  }\n});\n\np.foo = 'bar';\n// {value: \"bar\", writable: true, enumerable: true, configurable: true}\n\np.foo // \"bar\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Proxy.defineProperty</code>\u5bf9\u5c5e\u6027\u8d4b\u503c\u8bbe\u7f6e\u4e86\u62e6\u622a\uff0c\u7136\u540e\u4f7f\u7528<code>Reflect.defineProperty</code>\u5b8c\u6210\u4e86\u8d4b\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectgetownpropertydescriptortarget-propertykey","title":"Reflect.getOwnPropertyDescriptor(target, propertyKey)","text":"<p><code>Reflect.getOwnPropertyDescriptor</code>\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.getOwnPropertyDescriptor</code>\uff0c\u7528\u4e8e\u5f97\u5230\u6307\u5b9a\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\uff0c\u5c06\u6765\u4f1a\u66ff\u4ee3\u6389\u540e\u8005\u3002</p> <pre><code>var myObject = {};\nObject.defineProperty(myObject, 'hidden', {\n  value: true,\n  enumerable: false,\n});\n\n// \u65e7\u5199\u6cd5\nvar theDescriptor = Object.getOwnPropertyDescriptor(myObject, 'hidden');\n\n// \u65b0\u5199\u6cd5\nvar theDescriptor = Reflect.getOwnPropertyDescriptor(myObject, 'hidden');\n</code></pre> <p><code>Reflect.getOwnPropertyDescriptor</code>\u548c<code>Object.getOwnPropertyDescriptor</code>\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.getOwnPropertyDescriptor(1, 'foo')</code>\u4e0d\u62a5\u9519\uff0c\u8fd4\u56de<code>undefined</code>\uff0c\u800c<code>Reflect.getOwnPropertyDescriptor(1, 'foo')</code>\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u8868\u793a\u53c2\u6570\u975e\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectisextensible-target","title":"Reflect.isExtensible (target)","text":"<p><code>Reflect.isExtensible</code>\u65b9\u6cd5\u5bf9\u5e94<code>Object.isExtensible</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u5f53\u524d\u5bf9\u8c61\u662f\u5426\u53ef\u6269\u5c55\u3002</p> <pre><code>const myObject = {};\n\n// \u65e7\u5199\u6cd5\nObject.isExtensible(myObject) // true\n\n// \u65b0\u5199\u6cd5\nReflect.isExtensible(myObject) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.isExtensible</code>\u4f1a\u8fd4\u56de<code>false</code>\uff0c\u56e0\u4e3a\u975e\u5bf9\u8c61\u672c\u6765\u5c31\u662f\u4e0d\u53ef\u6269\u5c55\u7684\uff0c\u800c<code>Reflect.isExtensible</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>Object.isExtensible(1) // false\nReflect.isExtensible(1) // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectpreventextensionstarget","title":"Reflect.preventExtensions(target)","text":"<p><code>Reflect.preventExtensions</code>\u5bf9\u5e94<code>Object.preventExtensions</code>\u65b9\u6cd5\uff0c\u7528\u4e8e\u8ba9\u4e00\u4e2a\u5bf9\u8c61\u53d8\u4e3a\u4e0d\u53ef\u6269\u5c55\u3002\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u64cd\u4f5c\u6210\u529f\u3002</p> <pre><code>var myObject = {};\n\n// \u65e7\u5199\u6cd5\nObject.preventExtensions(myObject) // Object {}\n\n// \u65b0\u5199\u6cd5\nReflect.preventExtensions(myObject) // true\n</code></pre> <p>\u5982\u679c\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c<code>Object.preventExtensions</code>\u5728 ES5 \u73af\u5883\u62a5\u9519\uff0c\u5728 ES6 \u73af\u5883\u8fd4\u56de\u4f20\u5165\u7684\u53c2\u6570\uff0c\u800c<code>Reflect.preventExtensions</code>\u4f1a\u62a5\u9519\u3002</p> <pre><code>// ES5 \u73af\u5883\nObject.preventExtensions(1) // \u62a5\u9519\n\n// ES6 \u73af\u5883\nObject.preventExtensions(1) // 1\n\n// \u65b0\u5199\u6cd5\nReflect.preventExtensions(1) // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#reflectownkeys-target","title":"Reflect.ownKeys (target)","text":"<p><code>Reflect.ownKeys</code>\u65b9\u6cd5\u7528\u4e8e\u8fd4\u56de\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\uff0c\u57fa\u672c\u7b49\u540c\u4e8e<code>Object.getOwnPropertyNames</code>\u4e0e<code>Object.getOwnPropertySymbols</code>\u4e4b\u548c\u3002</p> <pre><code>var myObject = {\n  foo: 1,\n  bar: 2,\n  [Symbol.for('baz')]: 3,\n  [Symbol.for('bing')]: 4,\n};\n\n// \u65e7\u5199\u6cd5\nObject.getOwnPropertyNames(myObject)\n// ['foo', 'bar']\n\nObject.getOwnPropertySymbols(myObject)\n//[Symbol(baz), Symbol(bing)]\n\n// \u65b0\u5199\u6cd5\nReflect.ownKeys(myObject)\n// ['foo', 'bar', Symbol(baz), Symbol(bing)]\n</code></pre> <p>\u5982\u679c<code>Reflect.ownKeys()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u662f\u5bf9\u8c61\uff0c\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/16-reflect/#proxy","title":"\u5b9e\u4f8b\uff1a\u4f7f\u7528 Proxy \u5b9e\u73b0\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>\u89c2\u5bdf\u8005\u6a21\u5f0f\uff08Observer mode\uff09\u6307\u7684\u662f\u51fd\u6570\u81ea\u52a8\u89c2\u5bdf\u6570\u636e\u5bf9\u8c61\uff0c\u4e00\u65e6\u5bf9\u8c61\u6709\u53d8\u5316\uff0c\u51fd\u6570\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <pre><code>const person = observable({\n  name: '\u5f20\u4e09',\n  age: 20\n});\n\nfunction print() {\n  console.log(`${person.name}, ${person.age}`)\n}\n\nobserve(print);\nperson.name = '\u674e\u56db';\n// \u8f93\u51fa\n// \u674e\u56db, 20\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u636e\u5bf9\u8c61<code>person</code>\u662f\u89c2\u5bdf\u76ee\u6807\uff0c\u51fd\u6570<code>print</code>\u662f\u89c2\u5bdf\u8005\u3002\u4e00\u65e6\u6570\u636e\u5bf9\u8c61\u53d1\u751f\u53d8\u5316\uff0c<code>print</code>\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <p>\u4e0b\u9762\uff0c\u4f7f\u7528 Proxy \u5199\u4e00\u4e2a\u89c2\u5bdf\u8005\u6a21\u5f0f\u7684\u6700\u7b80\u5355\u5b9e\u73b0\uff0c\u5373\u5b9e\u73b0<code>observable</code>\u548c<code>observe</code>\u8fd9\u4e24\u4e2a\u51fd\u6570\u3002\u601d\u8def\u662f<code>observable</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u539f\u59cb\u5bf9\u8c61\u7684 Proxy \u4ee3\u7406\uff0c\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\uff0c\u89e6\u53d1\u5145\u5f53\u89c2\u5bdf\u8005\u7684\u5404\u4e2a\u51fd\u6570\u3002</p> <pre><code>const queuedObservers = new Set();\n\nconst observe = fn =&gt; queuedObservers.add(fn);\nconst observable = obj =&gt; new Proxy(obj, {set});\n\nfunction set(target, key, value, receiver) {\n  const result = Reflect.set(target, key, value, receiver);\n  queuedObservers.forEach(observer =&gt; observer());\n  return result;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>Set</code>\u96c6\u5408\uff0c\u6240\u6709\u89c2\u5bdf\u8005\u51fd\u6570\u90fd\u653e\u8fdb\u8fd9\u4e2a\u96c6\u5408\u3002\u7136\u540e\uff0c<code>observable</code>\u51fd\u6570\u8fd4\u56de\u539f\u59cb\u5bf9\u8c61\u7684\u4ee3\u7406\uff0c\u62e6\u622a\u8d4b\u503c\u64cd\u4f5c\u3002\u62e6\u622a\u51fd\u6570<code>set</code>\u4e4b\u4e2d\uff0c\u4f1a\u81ea\u52a8\u6267\u884c\u6240\u6709\u89c2\u5bdf\u8005\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/","title":"17-Promise \u5bf9\u8c61","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promise","title":"Promise \u7684\u542b\u4e49","text":"<p>Promise \u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u6bd4\u4f20\u7edf\u7684\u89e3\u51b3\u65b9\u6848\u2014\u2014\u56de\u8c03\u51fd\u6570\u548c\u4e8b\u4ef6\u2014\u2014\u66f4\u5408\u7406\u548c\u66f4\u5f3a\u5927\u3002\u5b83\u7531\u793e\u533a\u6700\u65e9\u63d0\u51fa\u548c\u5b9e\u73b0\uff0cES6 \u5c06\u5176\u5199\u8fdb\u4e86\u8bed\u8a00\u6807\u51c6\uff0c\u7edf\u4e00\u4e86\u7528\u6cd5\uff0c\u539f\u751f\u63d0\u4f9b\u4e86<code>Promise</code>\u5bf9\u8c61\u3002</p> <p>\u6240\u8c13<code>Promise</code>\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u4e00\u4e2a\u5bb9\u5668\uff0c\u91cc\u9762\u4fdd\u5b58\u7740\u67d0\u4e2a\u672a\u6765\u624d\u4f1a\u7ed3\u675f\u7684\u4e8b\u4ef6\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff09\u7684\u7ed3\u679c\u3002\u4ece\u8bed\u6cd5\u4e0a\u8bf4\uff0cPromise \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4ece\u5b83\u53ef\u4ee5\u83b7\u53d6\u5f02\u6b65\u64cd\u4f5c\u7684\u6d88\u606f\u3002Promise \u63d0\u4f9b\u7edf\u4e00\u7684 API\uff0c\u5404\u79cd\u5f02\u6b65\u64cd\u4f5c\u90fd\u53ef\u4ee5\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002</p> <p><code>Promise</code>\u5bf9\u8c61\u6709\u4ee5\u4e0b\u4e24\u4e2a\u7279\u70b9\u3002</p> <p>\uff081\uff09\u5bf9\u8c61\u7684\u72b6\u6001\u4e0d\u53d7\u5916\u754c\u5f71\u54cd\u3002<code>Promise</code>\u5bf9\u8c61\u4ee3\u8868\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u6709\u4e09\u79cd\u72b6\u6001\uff1a<code>pending</code>\uff08\u8fdb\u884c\u4e2d\uff09\u3001<code>fulfilled</code>\uff08\u5df2\u6210\u529f\uff09\u548c<code>rejected</code>\uff08\u5df2\u5931\u8d25\uff09\u3002\u53ea\u6709\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u51b3\u5b9a\u5f53\u524d\u662f\u54ea\u4e00\u79cd\u72b6\u6001\uff0c\u4efb\u4f55\u5176\u4ed6\u64cd\u4f5c\u90fd\u65e0\u6cd5\u6539\u53d8\u8fd9\u4e2a\u72b6\u6001\u3002\u8fd9\u4e5f\u662f<code>Promise</code>\u8fd9\u4e2a\u540d\u5b57\u7684\u7531\u6765\uff0c\u5b83\u7684\u82f1\u8bed\u610f\u601d\u5c31\u662f\u201c\u627f\u8bfa\u201d\uff0c\u8868\u793a\u5176\u4ed6\u624b\u6bb5\u65e0\u6cd5\u6539\u53d8\u3002</p> <p>\uff082\uff09\u4e00\u65e6\u72b6\u6001\u6539\u53d8\uff0c\u5c31\u4e0d\u4f1a\u518d\u53d8\uff0c\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7ed3\u679c\u3002<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u6539\u53d8\uff0c\u53ea\u6709\u4e24\u79cd\u53ef\u80fd\uff1a\u4ece<code>pending</code>\u53d8\u4e3a<code>fulfilled</code>\u548c\u4ece<code>pending</code>\u53d8\u4e3a<code>rejected</code>\u3002\u53ea\u8981\u8fd9\u4e24\u79cd\u60c5\u51b5\u53d1\u751f\uff0c\u72b6\u6001\u5c31\u51dd\u56fa\u4e86\uff0c\u4e0d\u4f1a\u518d\u53d8\u4e86\uff0c\u4f1a\u4e00\u76f4\u4fdd\u6301\u8fd9\u4e2a\u7ed3\u679c\uff0c\u8fd9\u65f6\u5c31\u79f0\u4e3a resolved\uff08\u5df2\u5b9a\u578b\uff09\u3002\u5982\u679c\u6539\u53d8\u5df2\u7ecf\u53d1\u751f\u4e86\uff0c\u4f60\u518d\u5bf9<code>Promise</code>\u5bf9\u8c61\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\uff0c\u4e5f\u4f1a\u7acb\u5373\u5f97\u5230\u8fd9\u4e2a\u7ed3\u679c\u3002\u8fd9\u4e0e\u4e8b\u4ef6\uff08Event\uff09\u5b8c\u5168\u4e0d\u540c\uff0c\u4e8b\u4ef6\u7684\u7279\u70b9\u662f\uff0c\u5982\u679c\u4f60\u9519\u8fc7\u4e86\u5b83\uff0c\u518d\u53bb\u76d1\u542c\uff0c\u662f\u5f97\u4e0d\u5230\u7ed3\u679c\u7684\u3002</p> <p>\u6ce8\u610f\uff0c\u4e3a\u4e86\u884c\u6587\u65b9\u4fbf\uff0c\u672c\u7ae0\u540e\u9762\u7684<code>resolved</code>\u7edf\u4e00\u53ea\u6307<code>fulfilled</code>\u72b6\u6001\uff0c\u4e0d\u5305\u542b<code>rejected</code>\u72b6\u6001\u3002</p> <p>\u6709\u4e86<code>Promise</code>\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u5c06\u5f02\u6b65\u64cd\u4f5c\u4ee5\u540c\u6b65\u64cd\u4f5c\u7684\u6d41\u7a0b\u8868\u8fbe\u51fa\u6765\uff0c\u907f\u514d\u4e86\u5c42\u5c42\u5d4c\u5957\u7684\u56de\u8c03\u51fd\u6570\u3002\u6b64\u5916\uff0c<code>Promise</code>\u5bf9\u8c61\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u4f7f\u5f97\u63a7\u5236\u5f02\u6b65\u64cd\u4f5c\u66f4\u52a0\u5bb9\u6613\u3002</p> <p><code>Promise</code>\u4e5f\u6709\u4e00\u4e9b\u7f3a\u70b9\u3002\u9996\u5148\uff0c\u65e0\u6cd5\u53d6\u6d88<code>Promise</code>\uff0c\u4e00\u65e6\u65b0\u5efa\u5b83\u5c31\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u65e0\u6cd5\u4e2d\u9014\u53d6\u6d88\u3002\u5176\u6b21\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u56de\u8c03\u51fd\u6570\uff0c<code>Promise</code>\u5185\u90e8\u629b\u51fa\u7684\u9519\u8bef\uff0c\u4e0d\u4f1a\u53cd\u5e94\u5230\u5916\u90e8\u3002\u7b2c\u4e09\uff0c\u5f53\u5904\u4e8e<code>pending</code>\u72b6\u6001\u65f6\uff0c\u65e0\u6cd5\u5f97\u77e5\u76ee\u524d\u8fdb\u5c55\u5230\u54ea\u4e00\u4e2a\u9636\u6bb5\uff08\u521a\u521a\u5f00\u59cb\u8fd8\u662f\u5373\u5c06\u5b8c\u6210\uff09\u3002</p> <p>\u5982\u679c\u67d0\u4e9b\u4e8b\u4ef6\u4e0d\u65ad\u5730\u53cd\u590d\u53d1\u751f\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u4f7f\u7528 Stream \u6a21\u5f0f\u662f\u6bd4\u90e8\u7f72<code>Promise</code>\u66f4\u597d\u7684\u9009\u62e9\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>ES6 \u89c4\u5b9a\uff0c<code>Promise</code>\u5bf9\u8c61\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210<code>Promise</code>\u5b9e\u4f8b\u3002</p> <p>\u4e0b\u9762\u4ee3\u7801\u521b\u9020\u4e86\u4e00\u4e2a<code>Promise</code>\u5b9e\u4f8b\u3002</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  // ... some code\n\n  if (/* \u5f02\u6b65\u64cd\u4f5c\u6210\u529f */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n</code></pre> <p><code>Promise</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f<code>resolve</code>\u548c<code>reject</code>\u3002\u5b83\u4eec\u662f\u4e24\u4e2a\u51fd\u6570\uff0c\u7531 JavaScript \u5f15\u64ce\u63d0\u4f9b\uff0c\u4e0d\u7528\u81ea\u5df1\u90e8\u7f72\u3002</p> <p><code>resolve</code>\u51fd\u6570\u7684\u4f5c\u7528\u662f\uff0c\u5c06<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u4ece\u201c\u672a\u5b8c\u6210\u201d\u53d8\u4e3a\u201c\u6210\u529f\u201d\uff08\u5373\u4ece pending \u53d8\u4e3a resolved\uff09\uff0c\u5728\u5f02\u6b65\u64cd\u4f5c\u6210\u529f\u65f6\u8c03\u7528\uff0c\u5e76\u5c06\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\uff0c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u51fa\u53bb\uff1b<code>reject</code>\u51fd\u6570\u7684\u4f5c\u7528\u662f\uff0c\u5c06<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u4ece\u201c\u672a\u5b8c\u6210\u201d\u53d8\u4e3a\u201c\u5931\u8d25\u201d\uff08\u5373\u4ece pending \u53d8\u4e3a rejected\uff09\uff0c\u5728\u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\u65f6\u8c03\u7528\uff0c\u5e76\u5c06\u5f02\u6b65\u64cd\u4f5c\u62a5\u51fa\u7684\u9519\u8bef\uff0c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u51fa\u53bb\u3002</p> <p><code>Promise</code>\u5b9e\u4f8b\u751f\u6210\u4ee5\u540e\uff0c\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u5206\u522b\u6307\u5b9a<code>resolved</code>\u72b6\u6001\u548c<code>rejected</code>\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>promise.then(function(value) {\n  // success\n}, function(error) {\n  // failure\n});\n</code></pre> <p><code>then</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u662f<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u4e3a<code>resolved</code>\u65f6\u8c03\u7528\uff0c\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u662f<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u4e3a<code>rejected</code>\u65f6\u8c03\u7528\u3002\u8fd9\u4e24\u4e2a\u51fd\u6570\u90fd\u662f\u53ef\u9009\u7684\uff0c\u4e0d\u4e00\u5b9a\u8981\u63d0\u4f9b\u3002\u5b83\u4eec\u90fd\u63a5\u53d7<code>Promise</code>\u5bf9\u8c61\u4f20\u51fa\u7684\u503c\u4f5c\u4e3a\u53c2\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u7684\u7b80\u5355\u4f8b\u5b50\u3002</p> <pre><code>function timeout(ms) {\n  return new Promise((resolve, reject) =&gt; {\n    setTimeout(resolve, ms, 'done');\n  });\n}\n\ntimeout(100).then((value) =&gt; {\n  console.log(value);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>timeout</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5b9e\u4f8b\uff0c\u8868\u793a\u4e00\u6bb5\u65f6\u95f4\u4ee5\u540e\u624d\u4f1a\u53d1\u751f\u7684\u7ed3\u679c\u3002\u8fc7\u4e86\u6307\u5b9a\u7684\u65f6\u95f4\uff08<code>ms</code>\u53c2\u6570\uff09\u4ee5\u540e\uff0c<code>Promise</code>\u5b9e\u4f8b\u7684\u72b6\u6001\u53d8\u4e3a<code>resolved</code>\uff0c\u5c31\u4f1a\u89e6\u53d1<code>then</code>\u65b9\u6cd5\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>Promise \u65b0\u5efa\u540e\u5c31\u4f1a\u7acb\u5373\u6267\u884c\u3002</p> <pre><code>let promise = new Promise(function(resolve, reject) {\n  console.log('Promise');\n  resolve();\n});\n\npromise.then(function() {\n  console.log('resolved.');\n});\n\nconsole.log('Hi!');\n\n// Promise\n// Hi!\n// resolved\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cPromise \u65b0\u5efa\u540e\u7acb\u5373\u6267\u884c\uff0c\u6240\u4ee5\u9996\u5148\u8f93\u51fa\u7684\u662f<code>Promise</code>\u3002\u7136\u540e\uff0c<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5c06\u5728\u5f53\u524d\u811a\u672c\u6240\u6709\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\u624d\u4f1a\u6267\u884c\uff0c\u6240\u4ee5<code>resolved</code>\u6700\u540e\u8f93\u51fa\u3002</p> <p>\u4e0b\u9762\u662f\u5f02\u6b65\u52a0\u8f7d\u56fe\u7247\u7684\u4f8b\u5b50\u3002</p> <pre><code>function loadImageAsync(url) {\n  return new Promise(function(resolve, reject) {\n    const image = new Image();\n\n    image.onload = function() {\n      resolve(image);\n    };\n\n    image.onerror = function() {\n      reject(new Error('Could not load image at ' + url));\n    };\n\n    image.src = url;\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528<code>Promise</code>\u5305\u88c5\u4e86\u4e00\u4e2a\u56fe\u7247\u52a0\u8f7d\u7684\u5f02\u6b65\u64cd\u4f5c\u3002\u5982\u679c\u52a0\u8f7d\u6210\u529f\uff0c\u5c31\u8c03\u7528<code>resolve</code>\u65b9\u6cd5\uff0c\u5426\u5219\u5c31\u8c03\u7528<code>reject</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7528<code>Promise</code>\u5bf9\u8c61\u5b9e\u73b0\u7684 Ajax \u64cd\u4f5c\u7684\u4f8b\u5b50\u3002</p> <pre><code>const getJSON = function(url) {\n  const promise = new Promise(function(resolve, reject){\n    const handler = function() {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send();\n\n  });\n\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(function(json) {\n  console.log('Contents: ' + json);\n}, function(error) {\n  console.error('\u51fa\u9519\u4e86', error);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getJSON</code>\u662f\u5bf9 XMLHttpRequest \u5bf9\u8c61\u7684\u5c01\u88c5\uff0c\u7528\u4e8e\u53d1\u51fa\u4e00\u4e2a\u9488\u5bf9 JSON \u6570\u636e\u7684 HTTP \u8bf7\u6c42\uff0c\u5e76\u4e14\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728<code>getJSON</code>\u5185\u90e8\uff0c<code>resolve</code>\u51fd\u6570\u548c<code>reject</code>\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u90fd\u5e26\u6709\u53c2\u6570\u3002</p> <p>\u5982\u679c\u8c03\u7528<code>resolve</code>\u51fd\u6570\u548c<code>reject</code>\u51fd\u6570\u65f6\u5e26\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u53c2\u6570\u4f1a\u88ab\u4f20\u9012\u7ed9\u56de\u8c03\u51fd\u6570\u3002<code>reject</code>\u51fd\u6570\u7684\u53c2\u6570\u901a\u5e38\u662f<code>Error</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\uff0c\u8868\u793a\u629b\u51fa\u7684\u9519\u8bef\uff1b<code>resolve</code>\u51fd\u6570\u7684\u53c2\u6570\u9664\u4e86\u6b63\u5e38\u7684\u503c\u4ee5\u5916\uff0c\u8fd8\u53ef\u80fd\u662f\u53e6\u4e00\u4e2a Promise \u5b9e\u4f8b\uff0c\u6bd4\u5982\u50cf\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const p1 = new Promise(function (resolve, reject) {\n  // ...\n});\n\nconst p2 = new Promise(function (resolve, reject) {\n  // ...\n  resolve(p1);\n})\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u548c<code>p2</code>\u90fd\u662f Promise \u7684\u5b9e\u4f8b\uff0c\u4f46\u662f<code>p2</code>\u7684<code>resolve</code>\u65b9\u6cd5\u5c06<code>p1</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u5373\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u8fd4\u56de\u53e6\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u65f6<code>p1</code>\u7684\u72b6\u6001\u5c31\u4f1a\u4f20\u9012\u7ed9<code>p2</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>p1</code>\u7684\u72b6\u6001\u51b3\u5b9a\u4e86<code>p2</code>\u7684\u72b6\u6001\u3002\u5982\u679c<code>p1</code>\u7684\u72b6\u6001\u662f<code>pending</code>\uff0c\u90a3\u4e48<code>p2</code>\u7684\u56de\u8c03\u51fd\u6570\u5c31\u4f1a\u7b49\u5f85<code>p1</code>\u7684\u72b6\u6001\u6539\u53d8\uff1b\u5982\u679c<code>p1</code>\u7684\u72b6\u6001\u5df2\u7ecf\u662f<code>resolved</code>\u6216\u8005<code>rejected</code>\uff0c\u90a3\u4e48<code>p2</code>\u7684\u56de\u8c03\u51fd\u6570\u5c06\u4f1a\u7acb\u523b\u6267\u884c\u3002</p> <pre><code>const p1 = new Promise(function (resolve, reject) {\n  setTimeout(() =&gt; reject(new Error('fail')), 3000)\n})\n\nconst p2 = new Promise(function (resolve, reject) {\n  setTimeout(() =&gt; resolve(p1), 1000)\n})\n\np2\n  .then(result =&gt; console.log(result))\n  .catch(error =&gt; console.log(error))\n// Error: fail\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u662f\u4e00\u4e2a Promise\uff0c3 \u79d2\u4e4b\u540e\u53d8\u4e3a<code>rejected</code>\u3002<code>p2</code>\u7684\u72b6\u6001\u5728 1 \u79d2\u4e4b\u540e\u6539\u53d8\uff0c<code>resolve</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f<code>p1</code>\u3002\u7531\u4e8e<code>p2</code>\u8fd4\u56de\u7684\u662f\u53e6\u4e00\u4e2a Promise\uff0c\u5bfc\u81f4<code>p2</code>\u81ea\u5df1\u7684\u72b6\u6001\u65e0\u6548\u4e86\uff0c\u7531<code>p1</code>\u7684\u72b6\u6001\u51b3\u5b9a<code>p2</code>\u7684\u72b6\u6001\u3002\u6240\u4ee5\uff0c\u540e\u9762\u7684<code>then</code>\u8bed\u53e5\u90fd\u53d8\u6210\u9488\u5bf9\u540e\u8005\uff08<code>p1</code>\uff09\u3002\u53c8\u8fc7\u4e86 2 \u79d2\uff0c<code>p1</code>\u53d8\u4e3a<code>rejected</code>\uff0c\u5bfc\u81f4\u89e6\u53d1<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u8c03\u7528<code>resolve</code>\u6216<code>reject</code>\u5e76\u4e0d\u4f1a\u7ec8\u7ed3 Promise \u7684\u53c2\u6570\u51fd\u6570\u7684\u6267\u884c\u3002</p> <pre><code>new Promise((resolve, reject) =&gt; {\n  resolve(1);\n  console.log(2);\n}).then(r =&gt; {\n  console.log(r);\n});\n// 2\n// 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>resolve(1)</code>\u4ee5\u540e\uff0c\u540e\u9762\u7684<code>console.log(2)</code>\u8fd8\u662f\u4f1a\u6267\u884c\uff0c\u5e76\u4e14\u4f1a\u9996\u5148\u6253\u5370\u51fa\u6765\u3002\u8fd9\u662f\u56e0\u4e3a\u7acb\u5373 resolved \u7684 Promise \u662f\u5728\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\u6267\u884c\uff0c\u603b\u662f\u665a\u4e8e\u672c\u8f6e\u5faa\u73af\u7684\u540c\u6b65\u4efb\u52a1\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8c03\u7528<code>resolve</code>\u6216<code>reject</code>\u4ee5\u540e\uff0cPromise \u7684\u4f7f\u547d\u5c31\u5b8c\u6210\u4e86\uff0c\u540e\u7ee7\u64cd\u4f5c\u5e94\u8be5\u653e\u5230<code>then</code>\u65b9\u6cd5\u91cc\u9762\uff0c\u800c\u4e0d\u5e94\u8be5\u76f4\u63a5\u5199\u5728<code>resolve</code>\u6216<code>reject</code>\u7684\u540e\u9762\u3002\u6240\u4ee5\uff0c\u6700\u597d\u5728\u5b83\u4eec\u524d\u9762\u52a0\u4e0a<code>return</code>\u8bed\u53e5\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u6709\u610f\u5916\u3002</p> <pre><code>new Promise((resolve, reject) =&gt; {\n  return resolve(1);\n  // \u540e\u9762\u7684\u8bed\u53e5\u4e0d\u4f1a\u6267\u884c\n  console.log(2);\n})\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseprototypethen","title":"Promise.prototype.then()","text":"<p>Promise \u5b9e\u4f8b\u5177\u6709<code>then</code>\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c<code>then</code>\u65b9\u6cd5\u662f\u5b9a\u4e49\u5728\u539f\u578b\u5bf9\u8c61<code>Promise.prototype</code>\u4e0a\u7684\u3002\u5b83\u7684\u4f5c\u7528\u662f\u4e3a Promise \u5b9e\u4f8b\u6dfb\u52a0\u72b6\u6001\u6539\u53d8\u65f6\u7684\u56de\u8c03\u51fd\u6570\u3002\u524d\u9762\u8bf4\u8fc7\uff0c<code>then</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>resolved</code>\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f<code>rejected</code>\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u4eec\u90fd\u662f\u53ef\u9009\u7684\u3002</p> <p><code>then</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7684<code>Promise</code>\u5b9e\u4f8b\uff08\u6ce8\u610f\uff0c\u4e0d\u662f\u539f\u6765\u90a3\u4e2a<code>Promise</code>\u5b9e\u4f8b\uff09\u3002\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\uff0c\u5373<code>then</code>\u65b9\u6cd5\u540e\u9762\u518d\u8c03\u7528\u53e6\u4e00\u4e2a<code>then</code>\u65b9\u6cd5\u3002</p> <pre><code>getJSON(\"/posts.json\").then(function(json) {\n  return json.post;\n}).then(function(post) {\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4f7f\u7528<code>then</code>\u65b9\u6cd5\uff0c\u4f9d\u6b21\u6307\u5b9a\u4e86\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u3002\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u5b8c\u6210\u4ee5\u540e\uff0c\u4f1a\u5c06\u8fd4\u56de\u7ed3\u679c\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f20\u5165\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u91c7\u7528\u94fe\u5f0f\u7684<code>then</code>\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u7ec4\u6309\u7167\u6b21\u5e8f\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u65f6\uff0c\u524d\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6709\u53ef\u80fd\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\uff08\u5373\u6709\u5f02\u6b65\u64cd\u4f5c\uff09\uff0c\u8fd9\u65f6\u540e\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u4f1a\u7b49\u5f85\u8be5<code>Promise</code>\u5bf9\u8c61\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u624d\u4f1a\u88ab\u8c03\u7528\u3002</p> <pre><code>getJSON(\"/post/1.json\").then(function(post) {\n  return getJSON(post.commentURL);\n}).then(function (comments) {\n  console.log(\"resolved: \", comments);\n}, function (err){\n  console.log(\"rejected: \", err);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd4\u56de\u7684\u662f\u53e6\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u8fd9\u65f6\uff0c\u7b2c\u4e8c\u4e2a<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u4f1a\u7b49\u5f85\u8fd9\u4e2a\u65b0\u7684<code>Promise</code>\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u53d8\u5316\u3002\u5982\u679c\u53d8\u4e3a<code>resolved</code>\uff0c\u5c31\u8c03\u7528\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u72b6\u6001\u53d8\u4e3a<code>rejected</code>\uff0c\u5c31\u8c03\u7528\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u5982\u679c\u91c7\u7528\u7bad\u5934\u51fd\u6570\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5199\u5f97\u66f4\u7b80\u6d01\u3002</p> <pre><code>getJSON(\"/post/1.json\").then(\n  post =&gt; getJSON(post.commentURL)\n).then(\n  comments =&gt; console.log(\"resolved: \", comments),\n  err =&gt; console.log(\"rejected: \", err)\n);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseprototypecatch","title":"Promise.prototype.catch()","text":"<p><code>Promise.prototype.catch()</code>\u65b9\u6cd5\u662f<code>.then(null, rejection)</code>\u6216<code>.then(undefined, rejection)</code>\u7684\u522b\u540d\uff0c\u7528\u4e8e\u6307\u5b9a\u53d1\u751f\u9519\u8bef\u65f6\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>getJSON('/posts.json').then(function(posts) {\n  // ...\n}).catch(function(error) {\n  // \u5904\u7406 getJSON \u548c \u524d\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u8fd0\u884c\u65f6\u53d1\u751f\u7684\u9519\u8bef\n  console.log('\u53d1\u751f\u9519\u8bef\uff01', error);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getJSON()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5982\u679c\u8be5\u5bf9\u8c61\u72b6\u6001\u53d8\u4e3a<code>resolved</code>\uff0c\u5219\u4f1a\u8c03\u7528<code>then()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff1b\u5982\u679c\u5f02\u6b65\u64cd\u4f5c\u629b\u51fa\u9519\u8bef\uff0c\u72b6\u6001\u5c31\u4f1a\u53d8\u4e3a<code>rejected</code>\uff0c\u5c31\u4f1a\u8c03\u7528<code>catch()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5904\u7406\u8fd9\u4e2a\u9519\u8bef\u3002\u53e6\u5916\uff0c<code>then()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u8fd0\u884c\u4e2d\u629b\u51fa\u9519\u8bef\uff0c\u4e5f\u4f1a\u88ab<code>catch()</code>\u65b9\u6cd5\u6355\u83b7\u3002</p> <pre><code>p.then((val) =&gt; console.log('fulfilled:', val))\n  .catch((err) =&gt; console.log('rejected', err));\n\n// \u7b49\u540c\u4e8e\np.then((val) =&gt; console.log('fulfilled:', val))\n  .then(null, (err) =&gt; console.log(\"rejected:\", err));\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  throw new Error('test');\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n// Error: test\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>promise</code>\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u5c31\u88ab<code>catch()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u6355\u83b7\u3002\u6ce8\u610f\uff0c\u4e0a\u9762\u7684\u5199\u6cd5\u4e0e\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nconst promise = new Promise(function(resolve, reject) {\n  try {\n    throw new Error('test');\n  } catch(e) {\n    reject(e);\n  }\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n\n// \u5199\u6cd5\u4e8c\nconst promise = new Promise(function(resolve, reject) {\n  reject(new Error('test'));\n});\npromise.catch(function(error) {\n  console.log(error);\n});\n</code></pre> <p>\u6bd4\u8f83\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u53d1\u73b0<code>reject()</code>\u65b9\u6cd5\u7684\u4f5c\u7528\uff0c\u7b49\u540c\u4e8e\u629b\u51fa\u9519\u8bef\u3002</p> <p>\u5982\u679c Promise \u72b6\u6001\u5df2\u7ecf\u53d8\u6210<code>resolved</code>\uff0c\u518d\u629b\u51fa\u9519\u8bef\u662f\u65e0\u6548\u7684\u3002</p> <pre><code>const promise = new Promise(function(resolve, reject) {\n  resolve('ok');\n  throw new Error('test');\n});\npromise\n  .then(function(value) { console.log(value) })\n  .catch(function(error) { console.log(error) });\n// ok\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cPromise \u5728<code>resolve</code>\u8bed\u53e5\u540e\u9762\uff0c\u518d\u629b\u51fa\u9519\u8bef\uff0c\u4e0d\u4f1a\u88ab\u6355\u83b7\uff0c\u7b49\u4e8e\u6ca1\u6709\u629b\u51fa\u3002\u56e0\u4e3a Promise \u7684\u72b6\u6001\u4e00\u65e6\u6539\u53d8\uff0c\u5c31\u6c38\u4e45\u4fdd\u6301\u8be5\u72b6\u6001\uff0c\u4e0d\u4f1a\u518d\u53d8\u4e86\u3002</p> <p>Promise \u5bf9\u8c61\u7684\u9519\u8bef\u5177\u6709\u201c\u5192\u6ce1\u201d\u6027\u8d28\uff0c\u4f1a\u4e00\u76f4\u5411\u540e\u4f20\u9012\uff0c\u76f4\u5230\u88ab\u6355\u83b7\u4e3a\u6b62\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u9519\u8bef\u603b\u662f\u4f1a\u88ab\u4e0b\u4e00\u4e2a<code>catch</code>\u8bed\u53e5\u6355\u83b7\u3002</p> <pre><code>getJSON('/post/1.json').then(function(post) {\n  return getJSON(post.commentURL);\n}).then(function(comments) {\n  // some code\n}).catch(function(error) {\n  // \u5904\u7406\u524d\u9762\u4e09\u4e2aPromise\u4ea7\u751f\u7684\u9519\u8bef\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u5171\u6709\u4e09\u4e2a Promise \u5bf9\u8c61\uff1a\u4e00\u4e2a\u7531<code>getJSON()</code>\u4ea7\u751f\uff0c\u4e24\u4e2a\u7531<code>then()</code>\u4ea7\u751f\u3002\u5b83\u4eec\u4e4b\u4e2d\u4efb\u4f55\u4e00\u4e2a\u629b\u51fa\u7684\u9519\u8bef\uff0c\u90fd\u4f1a\u88ab\u6700\u540e\u4e00\u4e2a<code>catch()</code>\u6355\u83b7\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u8981\u5728<code>then()</code>\u65b9\u6cd5\u91cc\u9762\u5b9a\u4e49 Reject \u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff08\u5373<code>then</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff09\uff0c\u603b\u662f\u4f7f\u7528<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>// bad\npromise\n  .then(function(data) {\n    // success\n  }, function(err) {\n    // error\n  });\n\n// good\npromise\n  .then(function(data) { //cb\n    // success\n  })\n  .catch(function(err) {\n    // error\n  });\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u8981\u597d\u4e8e\u7b2c\u4e00\u79cd\u5199\u6cd5\uff0c\u7406\u7531\u662f\u7b2c\u4e8c\u79cd\u5199\u6cd5\u53ef\u4ee5\u6355\u83b7\u524d\u9762<code>then</code>\u65b9\u6cd5\u6267\u884c\u4e2d\u7684\u9519\u8bef\uff0c\u4e5f\u66f4\u63a5\u8fd1\u540c\u6b65\u7684\u5199\u6cd5\uff08<code>try/catch</code>\uff09\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u603b\u662f\u4f7f\u7528<code>catch()</code>\u65b9\u6cd5\uff0c\u800c\u4e0d\u4f7f\u7528<code>then()</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002</p> <p>\u8ddf\u4f20\u7edf\u7684<code>try/catch</code>\u4ee3\u7801\u5757\u4e0d\u540c\u7684\u662f\uff0c\u5982\u679c\u6ca1\u6709\u4f7f\u7528<code>catch()</code>\u65b9\u6cd5\u6307\u5b9a\u9519\u8bef\u5904\u7406\u7684\u56de\u8c03\u51fd\u6570\uff0cPromise \u5bf9\u8c61\u629b\u51fa\u7684\u9519\u8bef\u4e0d\u4f1a\u4f20\u9012\u5230\u5916\u5c42\u4ee3\u7801\uff0c\u5373\u4e0d\u4f1a\u6709\u4efb\u4f55\u53cd\u5e94\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing().then(function() {\n  console.log('everything is great');\n});\n\nsetTimeout(() =&gt; { console.log(123) }, 2000);\n// Uncaught (in promise) ReferenceError: x is not defined\n// 123\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>someAsyncThing()</code>\u51fd\u6570\u4ea7\u751f\u7684 Promise \u5bf9\u8c61\uff0c\u5185\u90e8\u6709\u8bed\u6cd5\u9519\u8bef\u3002\u6d4f\u89c8\u5668\u8fd0\u884c\u5230\u8fd9\u4e00\u884c\uff0c\u4f1a\u6253\u5370\u51fa\u9519\u8bef\u63d0\u793a<code>ReferenceError: x is not defined</code>\uff0c\u4f46\u662f\u4e0d\u4f1a\u9000\u51fa\u8fdb\u7a0b\u3001\u7ec8\u6b62\u811a\u672c\u6267\u884c\uff0c2 \u79d2\u4e4b\u540e\u8fd8\u662f\u4f1a\u8f93\u51fa<code>123</code>\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cPromise \u5185\u90e8\u7684\u9519\u8bef\u4e0d\u4f1a\u5f71\u54cd\u5230 Promise \u5916\u90e8\u7684\u4ee3\u7801\uff0c\u901a\u4fd7\u7684\u8bf4\u6cd5\u5c31\u662f\u201cPromise \u4f1a\u5403\u6389\u9519\u8bef\u201d\u3002</p> <p>\u8fd9\u4e2a\u811a\u672c\u653e\u5728\u670d\u52a1\u5668\u6267\u884c\uff0c\u9000\u51fa\u7801\u5c31\u662f<code>0</code>\uff08\u5373\u8868\u793a\u6267\u884c\u6210\u529f\uff09\u3002\u4e0d\u8fc7\uff0cNode.js \u6709\u4e00\u4e2a<code>unhandledRejection</code>\u4e8b\u4ef6\uff0c\u4e13\u95e8\u76d1\u542c\u672a\u6355\u83b7\u7684<code>reject</code>\u9519\u8bef\uff0c\u4e0a\u9762\u7684\u811a\u672c\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u76d1\u542c\u51fd\u6570\u91cc\u9762\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>process.on('unhandledRejection', function (err, p) {\n  throw err;\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>unhandledRejection</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u662f\u9519\u8bef\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u662f\u62a5\u9519\u7684 Promise \u5b9e\u4f8b\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u4e86\u89e3\u53d1\u751f\u9519\u8bef\u7684\u73af\u5883\u4fe1\u606f\u3002</p> <p>\u6ce8\u610f\uff0cNode \u6709\u8ba1\u5212\u5728\u672a\u6765\u5e9f\u9664<code>unhandledRejection</code>\u4e8b\u4ef6\u3002\u5982\u679c Promise \u5185\u90e8\u6709\u672a\u6355\u83b7\u7684\u9519\u8bef\uff0c\u4f1a\u76f4\u63a5\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u5e76\u4e14\u8fdb\u7a0b\u7684\u9000\u51fa\u7801\u4e0d\u4e3a 0\u3002</p> <p>\u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const promise = new Promise(function (resolve, reject) {\n  resolve('ok');\n  setTimeout(function () { throw new Error('test') }, 0)\n});\npromise.then(function (value) { console.log(value) });\n// ok\n// Uncaught Error: test\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cPromise \u6307\u5b9a\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u518d\u629b\u51fa\u9519\u8bef\u3002\u5230\u4e86\u90a3\u4e2a\u65f6\u5019\uff0cPromise \u7684\u8fd0\u884c\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u8fd9\u4e2a\u9519\u8bef\u662f\u5728 Promise \u51fd\u6570\u4f53\u5916\u629b\u51fa\u7684\uff0c\u4f1a\u5192\u6ce1\u5230\u6700\u5916\u5c42\uff0c\u6210\u4e86\u672a\u6355\u83b7\u7684\u9519\u8bef\u3002</p> <p>\u4e00\u822c\u603b\u662f\u5efa\u8bae\uff0cPromise \u5bf9\u8c61\u540e\u9762\u8981\u8ddf<code>catch()</code>\u65b9\u6cd5\uff0c\u8fd9\u6837\u53ef\u4ee5\u5904\u7406 Promise \u5185\u90e8\u53d1\u751f\u7684\u9519\u8bef\u3002<code>catch()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u8fd8\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u56e0\u6b64\u540e\u9762\u8fd8\u53ef\u4ee5\u63a5\u7740\u8c03\u7528<code>then()</code>\u65b9\u6cd5\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing()\n.catch(function(error) {\n  console.log('oh no', error);\n})\n.then(function() {\n  console.log('carry on');\n});\n// oh no [ReferenceError: x is not defined]\n// carry on\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8fd0\u884c\u5b8c<code>catch()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u4f1a\u63a5\u7740\u8fd0\u884c\u540e\u9762\u90a3\u4e2a<code>then()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\u5982\u679c\u6ca1\u6709\u62a5\u9519\uff0c\u5219\u4f1a\u8df3\u8fc7<code>catch()</code>\u65b9\u6cd5\u3002</p> <pre><code>Promise.resolve()\n.catch(function(error) {\n  console.log('oh no', error);\n})\n.then(function() {\n  console.log('carry on');\n});\n// carry on\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u56e0\u4e3a\u6ca1\u6709\u62a5\u9519\uff0c\u8df3\u8fc7\u4e86<code>catch()</code>\u65b9\u6cd5\uff0c\u76f4\u63a5\u6267\u884c\u540e\u9762\u7684<code>then()</code>\u65b9\u6cd5\u3002\u6b64\u65f6\uff0c\u8981\u662f<code>then()</code>\u65b9\u6cd5\u91cc\u9762\u62a5\u9519\uff0c\u5c31\u4e0e\u524d\u9762\u7684<code>catch()</code>\u65e0\u5173\u4e86\u3002</p> <p><code>catch()</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u8fd8\u80fd\u518d\u629b\u51fa\u9519\u8bef\u3002</p> <pre><code>const someAsyncThing = function() {\n  return new Promise(function(resolve, reject) {\n    // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ax\u6ca1\u6709\u58f0\u660e\n    resolve(x + 2);\n  });\n};\n\nsomeAsyncThing().then(function() {\n  return someOtherAsyncThing();\n}).catch(function(error) {\n  console.log('oh no', error);\n  // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a y \u6ca1\u6709\u58f0\u660e\n  y + 2;\n}).then(function() {\n  console.log('carry on');\n});\n// oh no [ReferenceError: x is not defined]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>catch()</code>\u65b9\u6cd5\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u56e0\u4e3a\u540e\u9762\u6ca1\u6709\u522b\u7684<code>catch()</code>\u65b9\u6cd5\u4e86\uff0c\u5bfc\u81f4\u8fd9\u4e2a\u9519\u8bef\u4e0d\u4f1a\u88ab\u6355\u83b7\uff0c\u4e5f\u4e0d\u4f1a\u4f20\u9012\u5230\u5916\u5c42\u3002\u5982\u679c\u6539\u5199\u4e00\u4e0b\uff0c\u7ed3\u679c\u5c31\u4e0d\u4e00\u6837\u4e86\u3002</p> <pre><code>someAsyncThing().then(function() {\n  return someOtherAsyncThing();\n}).catch(function(error) {\n  console.log('oh no', error);\n  // \u4e0b\u9762\u4e00\u884c\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3ay\u6ca1\u6709\u58f0\u660e\n  y + 2;\n}).catch(function(error) {\n  console.log('carry on', error);\n});\n// oh no [ReferenceError: x is not defined]\n// carry on [ReferenceError: y is not defined]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>catch()</code>\u65b9\u6cd5\u7528\u6765\u6355\u83b7\u524d\u4e00\u4e2a<code>catch()</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseprototypefinally","title":"Promise.prototype.finally()","text":"<p><code>finally()</code>\u65b9\u6cd5\u7528\u4e8e\u6307\u5b9a\u4e0d\u7ba1 Promise \u5bf9\u8c61\u6700\u540e\u72b6\u6001\u5982\u4f55\uff0c\u90fd\u4f1a\u6267\u884c\u7684\u64cd\u4f5c\u3002\u8be5\u65b9\u6cd5\u662f ES2018 \u5f15\u5165\u6807\u51c6\u7684\u3002</p> <pre><code>promise\n.then(result =&gt; {\u00b7\u00b7\u00b7})\n.catch(error =&gt; {\u00b7\u00b7\u00b7})\n.finally(() =&gt; {\u00b7\u00b7\u00b7});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u7ba1<code>promise</code>\u6700\u540e\u7684\u72b6\u6001\uff0c\u5728\u6267\u884c\u5b8c<code>then</code>\u6216<code>catch</code>\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u4ee5\u540e\uff0c\u90fd\u4f1a\u6267\u884c<code>finally</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u670d\u52a1\u5668\u4f7f\u7528 Promise \u5904\u7406\u8bf7\u6c42\uff0c\u7136\u540e\u4f7f\u7528<code>finally</code>\u65b9\u6cd5\u5173\u6389\u670d\u52a1\u5668\u3002</p> <pre><code>server.listen(port)\n  .then(function () {\n    // ...\n  })\n  .finally(server.stop);\n</code></pre> <p><code>finally</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\uff0c\u8fd9\u610f\u5473\u7740\u6ca1\u6709\u529e\u6cd5\u77e5\u9053\uff0c\u524d\u9762\u7684 Promise \u72b6\u6001\u5230\u5e95\u662f<code>fulfilled</code>\u8fd8\u662f<code>rejected</code>\u3002\u8fd9\u8868\u660e\uff0c<code>finally</code>\u65b9\u6cd5\u91cc\u9762\u7684\u64cd\u4f5c\uff0c\u5e94\u8be5\u662f\u4e0e\u72b6\u6001\u65e0\u5173\u7684\uff0c\u4e0d\u4f9d\u8d56\u4e8e Promise \u7684\u6267\u884c\u7ed3\u679c\u3002</p> <p><code>finally</code>\u672c\u8d28\u4e0a\u662f<code>then</code>\u65b9\u6cd5\u7684\u7279\u4f8b\u3002</p> <pre><code>promise\n.finally(() =&gt; {\n  // \u8bed\u53e5\n});\n\n// \u7b49\u540c\u4e8e\npromise\n.then(\n  result =&gt; {\n    // \u8bed\u53e5\n    return result;\n  },\n  error =&gt; {\n    // \u8bed\u53e5\n    throw error;\n  }\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u4f7f\u7528<code>finally</code>\u65b9\u6cd5\uff0c\u540c\u6837\u7684\u8bed\u53e5\u9700\u8981\u4e3a\u6210\u529f\u548c\u5931\u8d25\u4e24\u79cd\u60c5\u51b5\u5404\u5199\u4e00\u6b21\u3002\u6709\u4e86<code>finally</code>\u65b9\u6cd5\uff0c\u5219\u53ea\u9700\u8981\u5199\u4e00\u6b21\u3002</p> <p>\u5b83\u7684\u5b9e\u73b0\u4e5f\u5f88\u7b80\u5355\u3002</p> <pre><code>Promise.prototype.finally = function (callback) {\n  let P = this.constructor;\n  return this.then(\n    value  =&gt; P.resolve(callback()).then(() =&gt; value),\n    reason =&gt; P.resolve(callback()).then(() =&gt; { throw reason })\n  );\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e0d\u7ba1\u524d\u9762\u7684 Promise \u662f<code>fulfilled</code>\u8fd8\u662f<code>rejected</code>\uff0c\u90fd\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570<code>callback</code>\u3002</p> <p>\u4ece\u4e0a\u9762\u7684\u5b9e\u73b0\u8fd8\u53ef\u4ee5\u770b\u5230\uff0c<code>finally</code>\u65b9\u6cd5\u603b\u662f\u4f1a\u8fd4\u56de\u539f\u6765\u7684\u503c\u3002</p> <pre><code>// resolve \u7684\u503c\u662f undefined\nPromise.resolve(2).then(() =&gt; {}, () =&gt; {})\n\n// resolve \u7684\u503c\u662f 2\nPromise.resolve(2).finally(() =&gt; {})\n\n// reject \u7684\u503c\u662f undefined\nPromise.reject(3).then(() =&gt; {}, () =&gt; {})\n\n// reject \u7684\u503c\u662f 3\nPromise.reject(3).finally(() =&gt; {})\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseall","title":"Promise.all()","text":"<p><code>Promise.all()</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u591a\u4e2a Promise \u5b9e\u4f8b\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\u3002</p> <pre><code>const p = Promise.all([p1, p2, p3]);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.all()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u90fd\u662f Promise \u5b9e\u4f8b\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u4f1a\u5148\u8c03\u7528\u4e0b\u9762\u8bb2\u5230\u7684<code>Promise.resolve</code>\u65b9\u6cd5\uff0c\u5c06\u53c2\u6570\u8f6c\u4e3a Promise \u5b9e\u4f8b\uff0c\u518d\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u53e6\u5916\uff0c<code>Promise.all()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u53ef\u4ee5\u4e0d\u662f\u6570\u7ec4\uff0c\u4f46\u5fc5\u987b\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u4e14\u8fd4\u56de\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f Promise \u5b9e\u4f8b\u3002</p> <p><code>p</code>\u7684\u72b6\u6001\u7531<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u51b3\u5b9a\uff0c\u5206\u6210\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>\uff081\uff09\u53ea\u6709<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u7684\u72b6\u6001\u90fd\u53d8\u6210<code>fulfilled</code>\uff0c<code>p</code>\u7684\u72b6\u6001\u624d\u4f1a\u53d8\u6210<code>fulfilled</code>\uff0c\u6b64\u65f6<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u7684\u8fd4\u56de\u503c\u7ec4\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\uff082\uff09\u53ea\u8981<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u4e4b\u4e2d\u6709\u4e00\u4e2a\u88ab<code>rejected</code>\uff0c<code>p</code>\u7684\u72b6\u6001\u5c31\u53d8\u6210<code>rejected</code>\uff0c\u6b64\u65f6\u7b2c\u4e00\u4e2a\u88ab<code>reject</code>\u7684\u5b9e\u4f8b\u7684\u8fd4\u56de\u503c\uff0c\u4f1a\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u3002</p> <pre><code>// \u751f\u6210\u4e00\u4e2aPromise\u5bf9\u8c61\u7684\u6570\u7ec4\nconst promises = [2, 3, 5, 7, 11, 13].map(function (id) {\n  return getJSON('/post/' + id + \".json\");\n});\n\nPromise.all(promises).then(function (posts) {\n  // ...\n}).catch(function(reason){\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>promises</code>\u662f\u5305\u542b 6 \u4e2a Promise \u5b9e\u4f8b\u7684\u6570\u7ec4\uff0c\u53ea\u6709\u8fd9 6 \u4e2a\u5b9e\u4f8b\u7684\u72b6\u6001\u90fd\u53d8\u6210<code>fulfilled</code>\uff0c\u6216\u8005\u5176\u4e2d\u6709\u4e00\u4e2a\u53d8\u4e3a<code>rejected</code>\uff0c\u624d\u4f1a\u8c03\u7528<code>Promise.all</code>\u65b9\u6cd5\u540e\u9762\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const databasePromise = connectDatabase();\n\nconst booksPromise = databasePromise\n  .then(findAllBooks);\n\nconst userPromise = databasePromise\n  .then(getCurrentUser);\n\nPromise.all([\n  booksPromise,\n  userPromise\n])\n.then(([books, user]) =&gt; pickTopRecommendations(books, user));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>booksPromise</code>\u548c<code>userPromise</code>\u662f\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u53ea\u6709\u7b49\u5230\u5b83\u4eec\u7684\u7ed3\u679c\u90fd\u8fd4\u56de\u4e86\uff0c\u624d\u4f1a\u89e6\u53d1<code>pickTopRecommendations</code>\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u4f5c\u4e3a\u53c2\u6570\u7684 Promise \u5b9e\u4f8b\uff0c\u81ea\u5df1\u5b9a\u4e49\u4e86<code>catch</code>\u65b9\u6cd5\uff0c\u90a3\u4e48\u5b83\u4e00\u65e6\u88ab<code>rejected</code>\uff0c\u5e76\u4e0d\u4f1a\u89e6\u53d1<code>Promise.all()</code>\u7684<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>const p1 = new Promise((resolve, reject) =&gt; {\n  resolve('hello');\n})\n.then(result =&gt; result)\n.catch(e =&gt; e);\n\nconst p2 = new Promise((resolve, reject) =&gt; {\n  throw new Error('\u62a5\u9519\u4e86');\n})\n.then(result =&gt; result)\n.catch(e =&gt; e);\n\nPromise.all([p1, p2])\n.then(result =&gt; console.log(result))\n.catch(e =&gt; console.log(e));\n// [\"hello\", Error: \u62a5\u9519\u4e86]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u4f1a<code>resolved</code>\uff0c<code>p2</code>\u9996\u5148\u4f1a<code>rejected</code>\uff0c\u4f46\u662f<code>p2</code>\u6709\u81ea\u5df1\u7684<code>catch</code>\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\uff0c<code>p2</code>\u6307\u5411\u7684\u5b9e\u9645\u4e0a\u662f\u8fd9\u4e2a\u5b9e\u4f8b\u3002\u8be5\u5b9e\u4f8b\u6267\u884c\u5b8c<code>catch</code>\u65b9\u6cd5\u540e\uff0c\u4e5f\u4f1a\u53d8\u6210<code>resolved</code>\uff0c\u5bfc\u81f4<code>Promise.all()</code>\u65b9\u6cd5\u53c2\u6570\u91cc\u9762\u7684\u4e24\u4e2a\u5b9e\u4f8b\u90fd\u4f1a<code>resolved</code>\uff0c\u56e0\u6b64\u4f1a\u8c03\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u800c\u4e0d\u4f1a\u8c03\u7528<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u5982\u679c<code>p2</code>\u6ca1\u6709\u81ea\u5df1\u7684<code>catch</code>\u65b9\u6cd5\uff0c\u5c31\u4f1a\u8c03\u7528<code>Promise.all()</code>\u7684<code>catch</code>\u65b9\u6cd5\u3002</p> <pre><code>const p1 = new Promise((resolve, reject) =&gt; {\n  resolve('hello');\n})\n.then(result =&gt; result);\n\nconst p2 = new Promise((resolve, reject) =&gt; {\n  throw new Error('\u62a5\u9519\u4e86');\n})\n.then(result =&gt; result);\n\nPromise.all([p1, p2])\n.then(result =&gt; console.log(result))\n.catch(e =&gt; console.log(e));\n// Error: \u62a5\u9519\u4e86\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiserace","title":"Promise.race()","text":"<p><code>Promise.race()</code>\u65b9\u6cd5\u540c\u6837\u662f\u5c06\u591a\u4e2a Promise \u5b9e\u4f8b\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\u3002</p> <pre><code>const p = Promise.race([p1, p2, p3]);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981<code>p1</code>\u3001<code>p2</code>\u3001<code>p3</code>\u4e4b\u4e2d\u6709\u4e00\u4e2a\u5b9e\u4f8b\u7387\u5148\u6539\u53d8\u72b6\u6001\uff0c<code>p</code>\u7684\u72b6\u6001\u5c31\u8ddf\u7740\u6539\u53d8\u3002\u90a3\u4e2a\u7387\u5148\u6539\u53d8\u7684 Promise \u5b9e\u4f8b\u7684\u8fd4\u56de\u503c\uff0c\u5c31\u4f20\u9012\u7ed9<code>p</code>\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p><code>Promise.race()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4e0e<code>Promise.all()</code>\u65b9\u6cd5\u4e00\u6837\uff0c\u5982\u679c\u4e0d\u662f Promise \u5b9e\u4f8b\uff0c\u5c31\u4f1a\u5148\u8c03\u7528\u4e0b\u9762\u8bb2\u5230\u7684<code>Promise.resolve()</code>\u65b9\u6cd5\uff0c\u5c06\u53c2\u6570\u8f6c\u4e3a Promise \u5b9e\u4f8b\uff0c\u518d\u8fdb\u4e00\u6b65\u5904\u7406\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u83b7\u5f97\u7ed3\u679c\uff0c\u5c31\u5c06 Promise \u7684\u72b6\u6001\u53d8\u4e3a<code>reject</code>\uff0c\u5426\u5219\u53d8\u4e3a<code>resolve</code>\u3002</p> <pre><code>const p = Promise.race([\n  fetch('/resource-that-may-take-a-while'),\n  new Promise(function (resolve, reject) {\n    setTimeout(() =&gt; reject(new Error('request timeout')), 5000)\n  })\n]);\n\np\n.then(console.log)\n.catch(console.error);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c 5 \u79d2\u4e4b\u5185<code>fetch</code>\u65b9\u6cd5\u65e0\u6cd5\u8fd4\u56de\u7ed3\u679c\uff0c\u53d8\u91cf<code>p</code>\u7684\u72b6\u6001\u5c31\u4f1a\u53d8\u4e3a<code>rejected</code>\uff0c\u4ece\u800c\u89e6\u53d1<code>catch</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseallsettled","title":"Promise.allSettled()","text":"<p>\u6709\u65f6\u5019\uff0c\u6211\u4eec\u5e0c\u671b\u7b49\u5230\u4e00\u7ec4\u5f02\u6b65\u64cd\u4f5c\u90fd\u7ed3\u675f\u4e86\uff0c\u4e0d\u7ba1\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u662f\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff0c\u518d\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\u4f46\u662f\uff0c\u73b0\u6709\u7684 Promise \u65b9\u6cd5\u5f88\u96be\u5b9e\u73b0\u8fd9\u4e2a\u8981\u6c42\u3002</p> <p><code>Promise.all()</code>\u65b9\u6cd5\u53ea\u9002\u5408\u6240\u6709\u5f02\u6b65\u64cd\u4f5c\u90fd\u6210\u529f\u7684\u60c5\u51b5\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u64cd\u4f5c\u5931\u8d25\uff0c\u5c31\u65e0\u6cd5\u6ee1\u8db3\u8981\u6c42\u3002</p> <pre><code>const urls = [url_1, url_2, url_3];\nconst requests = urls.map(x =&gt; fetch(x));\n\ntry {\n  await Promise.all(requests);\n  console.log('\u6240\u6709\u8bf7\u6c42\u90fd\u6210\u529f\u3002');\n} catch {\n  console.log('\u81f3\u5c11\u4e00\u4e2a\u8bf7\u6c42\u5931\u8d25\uff0c\u5176\u4ed6\u8bf7\u6c42\u53ef\u80fd\u8fd8\u6ca1\u7ed3\u675f\u3002');\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>Promise.all()</code>\u53ef\u4ee5\u786e\u5b9a\u6240\u6709\u8bf7\u6c42\u90fd\u6210\u529f\u4e86\uff0c\u4f46\u662f\u53ea\u8981\u6709\u4e00\u4e2a\u8bf7\u6c42\u5931\u8d25\uff0c\u5b83\u5c31\u4f1a\u62a5\u9519\uff0c\u800c\u4e0d\u7ba1\u53e6\u5916\u7684\u8bf7\u6c42\u662f\u5426\u7ed3\u675f\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES2020 \u5f15\u5165\u4e86<code>Promise.allSettled()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u786e\u5b9a\u4e00\u7ec4\u5f02\u6b65\u64cd\u4f5c\u662f\u5426\u90fd\u7ed3\u675f\u4e86\uff08\u4e0d\u7ba1\u6210\u529f\u6216\u5931\u8d25\uff09\u3002\u6240\u4ee5\uff0c\u5b83\u7684\u540d\u5b57\u53eb\u505a\u201dSettled\u201c\uff0c\u5305\u542b\u4e86\u201dfulfilled\u201c\u548c\u201drejected\u201c\u4e24\u79cd\u60c5\u51b5\u3002</p> <p><code>Promise.allSettled()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\u3002\u53ea\u6709\u7b49\u5230\u53c2\u6570\u6570\u7ec4\u7684\u6240\u6709 Promise \u5bf9\u8c61\u90fd\u53d1\u751f\u72b6\u6001\u53d8\u66f4\uff08\u4e0d\u7ba1\u662f<code>fulfilled</code>\u8fd8\u662f<code>rejected</code>\uff09\uff0c\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u624d\u4f1a\u53d1\u751f\u72b6\u6001\u53d8\u66f4\u3002</p> <pre><code>const promises = [\n  fetch('/api-1'),\n  fetch('/api-2'),\n  fetch('/api-3'),\n];\n\nawait Promise.allSettled(promises);\nremoveLoadingIndicator();\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6570\u7ec4<code>promises</code>\u5305\u542b\u4e86\u4e09\u4e2a\u8bf7\u6c42\uff0c\u53ea\u6709\u7b49\u5230\u8fd9\u4e09\u4e2a\u8bf7\u6c42\u90fd\u7ed3\u675f\u4e86\uff08\u4e0d\u7ba1\u8bf7\u6c42\u6210\u529f\u8fd8\u662f\u5931\u8d25\uff09\uff0c<code>removeLoadingIndicator()</code>\u624d\u4f1a\u6267\u884c\u3002</p> <p>\u8be5\u65b9\u6cd5\u8fd4\u56de\u7684\u65b0\u7684 Promise \u5b9e\u4f8b\uff0c\u4e00\u65e6\u53d1\u751f\u72b6\u6001\u53d8\u66f4\uff0c\u72b6\u6001\u603b\u662f<code>fulfilled</code>\uff0c\u4e0d\u4f1a\u53d8\u6210<code>rejected</code>\u3002\u72b6\u6001\u53d8\u6210<code>fulfilled</code>\u540e\uff0c\u5b83\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u63a5\u6536\u5230\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u8be5\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u5bf9\u5e94\u524d\u9762\u6570\u7ec4\u7684\u6bcf\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>const resolved = Promise.resolve(42);\nconst rejected = Promise.reject(-1);\n\nconst allSettledPromise = Promise.allSettled([resolved, rejected]);\n\nallSettledPromise.then(function (results) {\n  console.log(results);\n});\n// [\n//    { status: 'fulfilled', value: 42 },\n//    { status: 'rejected', reason: -1 }\n// ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.allSettled()</code>\u7684\u8fd4\u56de\u503c<code>allSettledPromise</code>\uff0c\u72b6\u6001\u53ea\u53ef\u80fd\u53d8\u6210<code>fulfilled</code>\u3002\u5b83\u7684\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u7684\u53c2\u6570\u662f\u6570\u7ec4<code>results</code>\u3002\u8be5\u6570\u7ec4\u7684\u6bcf\u4e2a\u6210\u5458\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u5e94\u4f20\u5165<code>Promise.allSettled()</code>\u7684\u6570\u7ec4\u91cc\u9762\u7684\u4e24\u4e2a Promise \u5bf9\u8c61\u3002</p> <p><code>results</code>\u7684\u6bcf\u4e2a\u6210\u5458\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u7684\u683c\u5f0f\u662f\u56fa\u5b9a\u7684\uff0c\u5bf9\u5e94\u5f02\u6b65\u64cd\u4f5c\u7684\u7ed3\u679c\u3002</p> <pre><code>// \u5f02\u6b65\u64cd\u4f5c\u6210\u529f\u65f6\n{status: 'fulfilled', value: value}\n\n// \u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\u65f6\n{status: 'rejected', reason: reason}\n</code></pre> <p>\u6210\u5458\u5bf9\u8c61\u7684<code>status</code>\u5c5e\u6027\u7684\u503c\u53ea\u53ef\u80fd\u662f\u5b57\u7b26\u4e32<code>fulfilled</code>\u6216\u5b57\u7b26\u4e32<code>rejected</code>\uff0c\u7528\u6765\u533a\u5206\u5f02\u6b65\u64cd\u4f5c\u662f\u6210\u529f\u8fd8\u662f\u5931\u8d25\u3002\u5982\u679c\u662f\u6210\u529f\uff08<code>fulfilled</code>\uff09\uff0c\u5bf9\u8c61\u4f1a\u6709<code>value</code>\u5c5e\u6027\uff0c\u5982\u679c\u662f\u5931\u8d25\uff08<code>rejected</code>\uff09\uff0c\u4f1a\u6709<code>reason</code>\u5c5e\u6027\uff0c\u5bf9\u5e94\u4e24\u79cd\u72b6\u6001\u65f6\u524d\u9762\u5f02\u6b65\u64cd\u4f5c\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u4e0b\u9762\u662f\u8fd4\u56de\u503c\u7684\u7528\u6cd5\u4f8b\u5b50\u3002</p> <pre><code>const promises = [ fetch('index.html'), fetch('https://does-not-exist/') ];\nconst results = await Promise.allSettled(promises);\n\n// \u8fc7\u6ee4\u51fa\u6210\u529f\u7684\u8bf7\u6c42\nconst successfulPromises = results.filter(p =&gt; p.status === 'fulfilled');\n\n// \u8fc7\u6ee4\u51fa\u5931\u8d25\u7684\u8bf7\u6c42\uff0c\u5e76\u8f93\u51fa\u539f\u56e0\nconst errors = results\n  .filter(p =&gt; p.status === 'rejected')\n  .map(p =&gt; p.reason);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseany","title":"Promise.any()","text":"<p>ES2021 \u5f15\u5165\u4e86<code>Promise.any()</code>\u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u63a5\u53d7\u4e00\u7ec4 Promise \u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\u8fd4\u56de\u3002</p> <pre><code>Promise.any([\n  fetch('https://v8.dev/').then(() =&gt; 'home'),\n  fetch('https://v8.dev/blog').then(() =&gt; 'blog'),\n  fetch('https://v8.dev/docs').then(() =&gt; 'docs')\n]).then((first) =&gt; {  // \u53ea\u8981\u6709\u4e00\u4e2a fetch() \u8bf7\u6c42\u6210\u529f\n  console.log(first);\n}).catch((error) =&gt; { // \u6240\u6709\u4e09\u4e2a fetch() \u5168\u90e8\u8bf7\u6c42\u5931\u8d25\n  console.log(error);\n});\n</code></pre> <p>\u53ea\u8981\u53c2\u6570\u5b9e\u4f8b\u6709\u4e00\u4e2a\u53d8\u6210<code>fulfilled</code>\u72b6\u6001\uff0c\u5305\u88c5\u5b9e\u4f8b\u5c31\u4f1a\u53d8\u6210<code>fulfilled</code>\u72b6\u6001\uff1b\u5982\u679c\u6240\u6709\u53c2\u6570\u5b9e\u4f8b\u90fd\u53d8\u6210<code>rejected</code>\u72b6\u6001\uff0c\u5305\u88c5\u5b9e\u4f8b\u5c31\u4f1a\u53d8\u6210<code>rejected</code>\u72b6\u6001\u3002</p> <p><code>Promise.any()</code>\u8ddf<code>Promise.race()</code>\u65b9\u6cd5\u5f88\u50cf\uff0c\u53ea\u6709\u4e00\u70b9\u4e0d\u540c\uff0c\u5c31\u662f<code>Promise.any()</code>\u4e0d\u4f1a\u56e0\u4e3a\u67d0\u4e2a Promise \u53d8\u6210<code>rejected</code>\u72b6\u6001\u800c\u7ed3\u675f\uff0c\u5fc5\u987b\u7b49\u5230\u6240\u6709\u53c2\u6570 Promise \u53d8\u6210<code>rejected</code>\u72b6\u6001\u624d\u4f1a\u7ed3\u675f\u3002</p> <p>\u4e0b\u9762\u662f<code>Promise()</code>\u4e0e<code>await</code>\u547d\u4ee4\u7ed3\u5408\u4f7f\u7528\u7684\u4f8b\u5b50\u3002</p> <pre><code>const promises = [\n  fetch('/endpoint-a').then(() =&gt; 'a'),\n  fetch('/endpoint-b').then(() =&gt; 'b'),\n  fetch('/endpoint-c').then(() =&gt; 'c'),\n];\n\ntry {\n  const first = await Promise.any(promises);\n  console.log(first);\n} catch (error) {\n  console.log(error);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.any()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u6570\u7ec4\u5305\u542b\u4e09\u4e2a Promise \u64cd\u4f5c\u3002\u5176\u4e2d\u53ea\u8981\u6709\u4e00\u4e2a\u53d8\u6210<code>fulfilled</code>\uff0c<code>Promise.any()</code>\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u5c31\u53d8\u6210<code>fulfilled</code>\u3002\u5982\u679c\u6240\u6709\u4e09\u4e2a\u64cd\u4f5c\u90fd\u53d8\u6210<code>rejected</code>\uff0c\u90a3\u4e48<code>await</code>\u547d\u4ee4\u5c31\u4f1a\u629b\u51fa\u9519\u8bef\u3002</p> <p><code>Promise.any()</code>\u629b\u51fa\u7684\u9519\u8bef\u662f\u4e00\u4e2a AggregateError \u5b9e\u4f8b\uff08\u8be6\u89c1\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\uff0c\u8fd9\u4e2a AggregateError \u5b9e\u4f8b\u5bf9\u8c61\u7684<code>errors</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e86\u6240\u6709\u6210\u5458\u7684\u9519\u8bef\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var resolved = Promise.resolve(42);\nvar rejected = Promise.reject(-1);\nvar alsoRejected = Promise.reject(Infinity);\n\nPromise.any([resolved, rejected, alsoRejected]).then(function (result) {\n  console.log(result); // 42\n});\n\nPromise.any([rejected, alsoRejected]).catch(function (results) {\n  console.log(results instanceof AggregateError); // true\n  console.log(results.errors); // [-1, Infinity]\n});\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promiseresolve","title":"Promise.resolve()","text":"<p>\u6709\u65f6\u9700\u8981\u5c06\u73b0\u6709\u5bf9\u8c61\u8f6c\u4e3a Promise \u5bf9\u8c61\uff0c<code>Promise.resolve()</code>\u65b9\u6cd5\u5c31\u8d77\u5230\u8fd9\u4e2a\u4f5c\u7528\u3002</p> <pre><code>const jsPromise = Promise.resolve($.ajax('/whatever.json'));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06 jQuery \u751f\u6210\u7684<code>deferred</code>\u5bf9\u8c61\uff0c\u8f6c\u4e3a\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\u3002</p> <p><code>Promise.resolve()</code>\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.resolve('foo')\n// \u7b49\u4ef7\u4e8e\nnew Promise(resolve =&gt; resolve('foo'))\n</code></pre> <p><code>Promise.resolve()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u5206\u6210\u56db\u79cd\u60c5\u51b5\u3002</p> <p>\uff081\uff09\u53c2\u6570\u662f\u4e00\u4e2a Promise \u5b9e\u4f8b</p> <p>\u5982\u679c\u53c2\u6570\u662f Promise \u5b9e\u4f8b\uff0c\u90a3\u4e48<code>Promise.resolve</code>\u5c06\u4e0d\u505a\u4efb\u4f55\u4fee\u6539\u3001\u539f\u5c01\u4e0d\u52a8\u5730\u8fd4\u56de\u8fd9\u4e2a\u5b9e\u4f8b\u3002</p> <p>\uff082\uff09\u53c2\u6570\u662f\u4e00\u4e2a<code>thenable</code>\u5bf9\u8c61</p> <p><code>thenable</code>\u5bf9\u8c61\u6307\u7684\u662f\u5177\u6709<code>then</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>let thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n</code></pre> <p><code>Promise.resolve()</code>\u65b9\u6cd5\u4f1a\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u8f6c\u4e3a Promise \u5bf9\u8c61\uff0c\u7136\u540e\u5c31\u7acb\u5373\u6267\u884c<code>thenable</code>\u5bf9\u8c61\u7684<code>then()</code>\u65b9\u6cd5\u3002</p> <pre><code>let thenable = {\n  then: function(resolve, reject) {\n    resolve(42);\n  }\n};\n\nlet p1 = Promise.resolve(thenable);\np1.then(function (value) {\n  console.log(value);  // 42\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>thenable</code>\u5bf9\u8c61\u7684<code>then()</code>\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u5bf9\u8c61<code>p1</code>\u7684\u72b6\u6001\u5c31\u53d8\u4e3a<code>resolved</code>\uff0c\u4ece\u800c\u7acb\u5373\u6267\u884c\u6700\u540e\u90a3\u4e2a<code>then()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8f93\u51fa42\u3002</p> <p>\uff083\uff09\u53c2\u6570\u4e0d\u662f\u5177\u6709<code>then()</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u6216\u6839\u672c\u5c31\u4e0d\u662f\u5bf9\u8c61</p> <p>\u5982\u679c\u53c2\u6570\u662f\u4e00\u4e2a\u539f\u59cb\u503c\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u4e0d\u5177\u6709<code>then()</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5219<code>Promise.resolve()</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\uff0c\u72b6\u6001\u4e3a<code>resolved</code>\u3002</p> <pre><code>const p = Promise.resolve('Hello');\n\np.then(function (s) {\n  console.log(s)\n});\n// Hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a\u65b0\u7684 Promise \u5bf9\u8c61\u7684\u5b9e\u4f8b<code>p</code>\u3002\u7531\u4e8e\u5b57\u7b26\u4e32<code>Hello</code>\u4e0d\u5c5e\u4e8e\u5f02\u6b65\u64cd\u4f5c\uff08\u5224\u65ad\u65b9\u6cd5\u662f\u5b57\u7b26\u4e32\u5bf9\u8c61\u4e0d\u5177\u6709 then \u65b9\u6cd5\uff09\uff0c\u8fd4\u56de Promise \u5b9e\u4f8b\u7684\u72b6\u6001\u4ece\u4e00\u751f\u6210\u5c31\u662f<code>resolved</code>\uff0c\u6240\u4ee5\u56de\u8c03\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\u3002<code>Promise.resolve()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4f1a\u540c\u65f6\u4f20\u7ed9\u56de\u8c03\u51fd\u6570\u3002</p> <p>\uff084\uff09\u4e0d\u5e26\u6709\u4efb\u4f55\u53c2\u6570</p> <p><code>Promise.resolve()</code>\u65b9\u6cd5\u5141\u8bb8\u8c03\u7528\u65f6\u4e0d\u5e26\u53c2\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a<code>resolved</code>\u72b6\u6001\u7684 Promise \u5bf9\u8c61\u3002</p> <p>\u6240\u4ee5\uff0c\u5982\u679c\u5e0c\u671b\u5f97\u5230\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u6bd4\u8f83\u65b9\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u8c03\u7528<code>Promise.resolve()</code>\u65b9\u6cd5\u3002</p> <pre><code>const p = Promise.resolve();\n\np.then(function () {\n  // ...\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u53d8\u91cf<code>p</code>\u5c31\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7acb\u5373<code>resolve()</code>\u7684 Promise \u5bf9\u8c61\uff0c\u662f\u5728\u672c\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\uff08event loop\uff09\u7684\u7ed3\u675f\u65f6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u7684\u5f00\u59cb\u65f6\u3002</p> <pre><code>setTimeout(function () {\n  console.log('three');\n}, 0);\n\nPromise.resolve().then(function () {\n  console.log('two');\n});\n\nconsole.log('one');\n\n// one\n// two\n// three\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>setTimeout(fn, 0)</code>\u5728\u4e0b\u4e00\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u5f00\u59cb\u65f6\u6267\u884c\uff0c<code>Promise.resolve()</code>\u5728\u672c\u8f6e\u201c\u4e8b\u4ef6\u5faa\u73af\u201d\u7ed3\u675f\u65f6\u6267\u884c\uff0c<code>console.log('one')</code>\u5219\u662f\u7acb\u5373\u6267\u884c\uff0c\u56e0\u6b64\u6700\u5148\u8f93\u51fa\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promisereject","title":"Promise.reject()","text":"<p><code>Promise.reject(reason)</code>\u65b9\u6cd5\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise \u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u7684\u72b6\u6001\u4e3a<code>rejected</code>\u3002</p> <pre><code>const p = Promise.reject('\u51fa\u9519\u4e86');\n// \u7b49\u540c\u4e8e\nconst p = new Promise((resolve, reject) =&gt; reject('\u51fa\u9519\u4e86'))\n\np.then(null, function (s) {\n  console.log(s)\n});\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a Promise \u5bf9\u8c61\u7684\u5b9e\u4f8b<code>p</code>\uff0c\u72b6\u6001\u4e3a<code>rejected</code>\uff0c\u56de\u8c03\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\u3002</p> <p><code>Promise.reject()</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u4f1a\u539f\u5c01\u4e0d\u52a8\u5730\u4f5c\u4e3a<code>reject</code>\u7684\u7406\u7531\uff0c\u53d8\u6210\u540e\u7eed\u65b9\u6cd5\u7684\u53c2\u6570\u3002</p> <pre><code>Promise.reject('\u51fa\u9519\u4e86')\n.catch(e =&gt; {\n  console.log(e === '\u51fa\u9519\u4e86')\n})\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Promise.reject()</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u540e\u9762<code>catch()</code>\u65b9\u6cd5\u7684\u53c2\u6570<code>e</code>\u5c31\u662f\u8fd9\u4e2a\u5b57\u7b26\u4e32\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#_2","title":"\u5e94\u7528","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#_3","title":"\u52a0\u8f7d\u56fe\u7247","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5c06\u56fe\u7247\u7684\u52a0\u8f7d\u5199\u6210\u4e00\u4e2a<code>Promise</code>\uff0c\u4e00\u65e6\u52a0\u8f7d\u5b8c\u6210\uff0c<code>Promise</code>\u7684\u72b6\u6001\u5c31\u53d1\u751f\u53d8\u5316\u3002</p> <pre><code>const preloadImage = function (path) {\n  return new Promise(function (resolve, reject) {\n    const image = new Image();\n    image.onload  = resolve;\n    image.onerror = reject;\n    image.src = path;\n  });\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#generator-promise","title":"Generator \u51fd\u6570\u4e0e Promise \u7684\u7ed3\u5408","text":"<p>\u4f7f\u7528 Generator \u51fd\u6570\u7ba1\u7406\u6d41\u7a0b\uff0c\u9047\u5230\u5f02\u6b65\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u901a\u5e38\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002</p> <pre><code>function getFoo () {\n  return new Promise(function (resolve, reject){\n    resolve('foo');\n  });\n}\n\nconst g = function* () {\n  try {\n    const foo = yield getFoo();\n    console.log(foo);\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nfunction run (generator) {\n  const it = generator();\n\n  function go(result) {\n    if (result.done) return result.value;\n\n    return result.value.then(function (value) {\n      return go(it.next(value));\n    }, function (error) {\n      return go(it.throw(error));\n    });\n  }\n\n  go(it.next());\n}\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684 Generator \u51fd\u6570<code>g</code>\u4e4b\u4e2d\uff0c\u6709\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c<code>getFoo</code>\uff0c\u5b83\u8fd4\u56de\u7684\u5c31\u662f\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002\u51fd\u6570<code>run</code>\u7528\u6765\u5904\u7406\u8fd9\u4e2a<code>Promise</code>\u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u4e0b\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/17-promise/#promisetry","title":"Promise.try()","text":"<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u4e00\u79cd\u60c5\u51b5\uff1a\u4e0d\u77e5\u9053\u6216\u8005\u4e0d\u60f3\u533a\u5206\uff0c\u51fd\u6570<code>f</code>\u662f\u540c\u6b65\u51fd\u6570\u8fd8\u662f\u5f02\u6b65\u64cd\u4f5c\uff0c\u4f46\u662f\u60f3\u7528 Promise \u6765\u5904\u7406\u5b83\u3002\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u7ba1<code>f</code>\u662f\u5426\u5305\u542b\u5f02\u6b65\u64cd\u4f5c\uff0c\u90fd\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u4e0b\u4e00\u6b65\u6d41\u7a0b\uff0c\u7528<code>catch</code>\u65b9\u6cd5\u5904\u7406<code>f</code>\u629b\u51fa\u7684\u9519\u8bef\u3002\u4e00\u822c\u5c31\u4f1a\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.resolve().then(f)\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5c31\u662f\u5982\u679c<code>f</code>\u662f\u540c\u6b65\u51fd\u6570\uff0c\u90a3\u4e48\u5b83\u4f1a\u5728\u672c\u8f6e\u4e8b\u4ef6\u5faa\u73af\u7684\u672b\u5c3e\u6267\u884c\u3002</p> <pre><code>const f = () =&gt; console.log('now');\nPromise.resolve().then(f);\nconsole.log('next');\n// next\n// now\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u662f\u540c\u6b65\u7684\uff0c\u4f46\u662f\u7528 Promise \u5305\u88c5\u4e86\u4ee5\u540e\uff0c\u5c31\u53d8\u6210\u5f02\u6b65\u6267\u884c\u4e86\u3002</p> <p>\u90a3\u4e48\u6709\u6ca1\u6709\u4e00\u79cd\u65b9\u6cd5\uff0c\u8ba9\u540c\u6b65\u51fd\u6570\u540c\u6b65\u6267\u884c\uff0c\u5f02\u6b65\u51fd\u6570\u5f02\u6b65\u6267\u884c\uff0c\u5e76\u4e14\u8ba9\u5b83\u4eec\u5177\u6709\u7edf\u4e00\u7684 API \u5462\uff1f\u56de\u7b54\u662f\u53ef\u4ee5\u7684\uff0c\u5e76\u4e14\u8fd8\u6709\u4e24\u79cd\u5199\u6cd5\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u662f\u7528<code>async</code>\u51fd\u6570\u6765\u5199\u3002</p> <pre><code>const f = () =&gt; console.log('now');\n(async () =&gt; f())();\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u884c\u662f\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\uff0c\u4f1a\u7acb\u5373\u6267\u884c\u91cc\u9762\u7684<code>async</code>\u51fd\u6570\uff0c\u56e0\u6b64\u5982\u679c<code>f</code>\u662f\u540c\u6b65\u7684\uff0c\u5c31\u4f1a\u5f97\u5230\u540c\u6b65\u7684\u7ed3\u679c\uff1b\u5982\u679c<code>f</code>\u662f\u5f02\u6b65\u7684\uff0c\u5c31\u53ef\u4ee5\u7528<code>then</code>\u6307\u5b9a\u4e0b\u4e00\u6b65\uff0c\u5c31\u50cf\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>(async () =&gt; f())()\n.then(...)\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>async () =&gt; f()</code>\u4f1a\u5403\u6389<code>f()</code>\u629b\u51fa\u7684\u9519\u8bef\u3002\u6240\u4ee5\uff0c\u5982\u679c\u60f3\u6355\u83b7\u9519\u8bef\uff0c\u8981\u4f7f\u7528<code>promise.catch</code>\u65b9\u6cd5\u3002</p> <pre><code>(async () =&gt; f())()\n.then(...)\n.catch(...)\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u5199\u6cd5\u662f\u4f7f\u7528<code>new Promise()</code>\u3002</p> <pre><code>const f = () =&gt; console.log('now');\n(\n  () =&gt; new Promise(\n    resolve =&gt; resolve(f())\n  )\n)();\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u662f\u4f7f\u7528\u7acb\u5373\u6267\u884c\u7684\u533f\u540d\u51fd\u6570\uff0c\u6267\u884c<code>new Promise()</code>\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u540c\u6b65\u51fd\u6570\u4e5f\u662f\u540c\u6b65\u6267\u884c\u7684\u3002</p> <p>\u9274\u4e8e\u8fd9\u662f\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u63d0\u4f9b<code>Promise.try</code>\u65b9\u6cd5\u66ff\u4ee3\u4e0a\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const f = () =&gt; console.log('now');\nPromise.try(f);\nconsole.log('next');\n// now\n// next\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c<code>Promise.try</code>\u5b58\u5728\u5df2\u4e45\uff0cPromise \u5e93<code>Bluebird</code>\u3001<code>Q</code>\u548c<code>when</code>\uff0c\u65e9\u5c31\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e<code>Promise.try</code>\u4e3a\u6240\u6709\u64cd\u4f5c\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u5904\u7406\u673a\u5236\uff0c\u6240\u4ee5\u5982\u679c\u60f3\u7528<code>then</code>\u65b9\u6cd5\u7ba1\u7406\u6d41\u7a0b\uff0c\u6700\u597d\u90fd\u7528<code>Promise.try</code>\u5305\u88c5\u4e00\u4e0b\u3002\u8fd9\u6837\u6709\u8bb8\u591a\u597d\u5904\uff0c\u5176\u4e2d\u4e00\u70b9\u5c31\u662f\u53ef\u4ee5\u66f4\u597d\u5730\u7ba1\u7406\u5f02\u5e38\u3002</p> <pre><code>function getUsername(userId) {\n  return database.users.get({id: userId})\n  .then(function(user) {\n    return user.name;\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>database.users.get()</code>\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5982\u679c\u629b\u51fa\u5f02\u6b65\u9519\u8bef\uff0c\u53ef\u4ee5\u7528<code>catch</code>\u65b9\u6cd5\u6355\u83b7\uff0c\u5c31\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002</p> <pre><code>database.users.get({id: userId})\n.then(...)\n.catch(...)\n</code></pre> <p>\u4f46\u662f<code>database.users.get()</code>\u53ef\u80fd\u8fd8\u4f1a\u629b\u51fa\u540c\u6b65\u9519\u8bef\uff08\u6bd4\u5982\u6570\u636e\u5e93\u8fde\u63a5\u9519\u8bef\uff0c\u5177\u4f53\u8981\u770b\u5b9e\u73b0\u65b9\u6cd5\uff09\uff0c\u8fd9\u65f6\u4f60\u5c31\u4e0d\u5f97\u4e0d\u7528<code>try...catch</code>\u53bb\u6355\u83b7\u3002</p> <pre><code>try {\n  database.users.get({id: userId})\n  .then(...)\n  .catch(...)\n} catch (e) {\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u8fd9\u6837\u7684\u5199\u6cd5\u5c31\u5f88\u7b28\u62d9\u4e86\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u7edf\u4e00\u7528<code>promise.catch()</code>\u6355\u83b7\u6240\u6709\u540c\u6b65\u548c\u5f02\u6b65\u7684\u9519\u8bef\u3002</p> <pre><code>Promise.try(() =&gt; database.users.get({id: userId}))\n  .then(...)\n  .catch(...)\n</code></pre> <p>\u4e8b\u5b9e\u4e0a\uff0c<code>Promise.try</code>\u5c31\u662f\u6a21\u62df<code>try</code>\u4ee3\u7801\u5757\uff0c\u5c31\u50cf<code>promise.catch</code>\u6a21\u62df\u7684\u662f<code>catch</code>\u4ee3\u7801\u5757\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/","title":"18-Iterator \u548c for...of \u5faa\u73af","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#iterator","title":"Iterator\uff08\u904d\u5386\u5668\uff09\u7684\u6982\u5ff5","text":"<p>JavaScript \u539f\u6709\u7684\u8868\u793a\u201c\u96c6\u5408\u201d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e3b\u8981\u662f\u6570\u7ec4\uff08<code>Array</code>\uff09\u548c\u5bf9\u8c61\uff08<code>Object</code>\uff09\uff0cES6 \u53c8\u6dfb\u52a0\u4e86<code>Map</code>\u548c<code>Set</code>\u3002\u8fd9\u6837\u5c31\u6709\u4e86\u56db\u79cd\u6570\u636e\u96c6\u5408\uff0c\u7528\u6237\u8fd8\u53ef\u4ee5\u7ec4\u5408\u4f7f\u7528\u5b83\u4eec\uff0c\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6bd4\u5982\u6570\u7ec4\u7684\u6210\u5458\u662f<code>Map</code>\uff0c<code>Map</code>\u7684\u6210\u5458\u662f\u5bf9\u8c61\u3002\u8fd9\u6837\u5c31\u9700\u8981\u4e00\u79cd\u7edf\u4e00\u7684\u63a5\u53e3\u673a\u5236\uff0c\u6765\u5904\u7406\u6240\u6709\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u904d\u5386\u5668\uff08Iterator\uff09\u5c31\u662f\u8fd9\u6837\u4e00\u79cd\u673a\u5236\u3002\u5b83\u662f\u4e00\u79cd\u63a5\u53e3\uff0c\u4e3a\u5404\u79cd\u4e0d\u540c\u7684\u6570\u636e\u7ed3\u6784\u63d0\u4f9b\u7edf\u4e00\u7684\u8bbf\u95ee\u673a\u5236\u3002\u4efb\u4f55\u6570\u636e\u7ed3\u6784\u53ea\u8981\u90e8\u7f72 Iterator \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u904d\u5386\u64cd\u4f5c\uff08\u5373\u4f9d\u6b21\u5904\u7406\u8be5\u6570\u636e\u7ed3\u6784\u7684\u6240\u6709\u6210\u5458\uff09\u3002</p> <p>Iterator \u7684\u4f5c\u7528\u6709\u4e09\u4e2a\uff1a\u4e00\u662f\u4e3a\u5404\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u3001\u7b80\u4fbf\u7684\u8bbf\u95ee\u63a5\u53e3\uff1b\u4e8c\u662f\u4f7f\u5f97\u6570\u636e\u7ed3\u6784\u7684\u6210\u5458\u80fd\u591f\u6309\u67d0\u79cd\u6b21\u5e8f\u6392\u5217\uff1b\u4e09\u662f ES6 \u521b\u9020\u4e86\u4e00\u79cd\u65b0\u7684\u904d\u5386\u547d\u4ee4<code>for...of</code>\u5faa\u73af\uff0cIterator \u63a5\u53e3\u4e3b\u8981\u4f9b<code>for...of</code>\u6d88\u8d39\u3002</p> <p>Iterator \u7684\u904d\u5386\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\u3002</p> <p>\uff081\uff09\u521b\u5efa\u4e00\u4e2a\u6307\u9488\u5bf9\u8c61\uff0c\u6307\u5411\u5f53\u524d\u6570\u636e\u7ed3\u6784\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u904d\u5386\u5668\u5bf9\u8c61\u672c\u8d28\u4e0a\uff0c\u5c31\u662f\u4e00\u4e2a\u6307\u9488\u5bf9\u8c61\u3002</p> <p>\uff082\uff09\u7b2c\u4e00\u6b21\u8c03\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06\u6307\u9488\u6307\u5411\u6570\u636e\u7ed3\u6784\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u3002</p> <p>\uff083\uff09\u7b2c\u4e8c\u6b21\u8c03\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u6307\u9488\u5c31\u6307\u5411\u6570\u636e\u7ed3\u6784\u7684\u7b2c\u4e8c\u4e2a\u6210\u5458\u3002</p> <p>\uff084\uff09\u4e0d\u65ad\u8c03\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u76f4\u5230\u5b83\u6307\u5411\u6570\u636e\u7ed3\u6784\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002</p> <p>\u6bcf\u4e00\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u90fd\u4f1a\u8fd4\u56de\u6570\u636e\u7ed3\u6784\u7684\u5f53\u524d\u6210\u5458\u7684\u4fe1\u606f\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u8fd4\u56de\u4e00\u4e2a\u5305\u542b<code>value</code>\u548c<code>done</code>\u4e24\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61\u3002\u5176\u4e2d\uff0c<code>value</code>\u5c5e\u6027\u662f\u5f53\u524d\u6210\u5458\u7684\u503c\uff0c<code>done</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u904d\u5386\u662f\u5426\u7ed3\u675f\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u6a21\u62df<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u503c\u7684\u4f8b\u5b50\u3002</p> <pre><code>var it = makeIterator(['a', 'b']);\n\nit.next() // { value: \"a\", done: false }\nit.next() // { value: \"b\", done: false }\nit.next() // { value: undefined, done: true }\n\nfunction makeIterator(array) {\n  var nextIndex = 0;\n  return {\n    next: function() {\n      return nextIndex &lt; array.length ?\n        {value: array[nextIndex++], done: false} :\n        {value: undefined, done: true};\n    }\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>makeIterator</code>\u51fd\u6570\uff0c\u5b83\u662f\u4e00\u4e2a\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff0c\u4f5c\u7528\u5c31\u662f\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002\u5bf9\u6570\u7ec4<code>['a', 'b']</code>\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u5c31\u4f1a\u8fd4\u56de\u8be5\u6570\u7ec4\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff08\u5373\u6307\u9488\u5bf9\u8c61\uff09<code>it</code>\u3002</p> <p>\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u7528\u6765\u79fb\u52a8\u6307\u9488\u3002\u5f00\u59cb\u65f6\uff0c\u6307\u9488\u6307\u5411\u6570\u7ec4\u7684\u5f00\u59cb\u4f4d\u7f6e\u3002\u7136\u540e\uff0c\u6bcf\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u6307\u9488\u5c31\u4f1a\u6307\u5411\u6570\u7ec4\u7684\u4e0b\u4e00\u4e2a\u6210\u5458\u3002\u7b2c\u4e00\u6b21\u8c03\u7528\uff0c\u6307\u5411<code>a</code>\uff1b\u7b2c\u4e8c\u6b21\u8c03\u7528\uff0c\u6307\u5411<code>b</code>\u3002</p> <p><code>next</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u6570\u636e\u6210\u5458\u7684\u4fe1\u606f\u3002\u8fd9\u4e2a\u5bf9\u8c61\u5177\u6709<code>value</code>\u548c<code>done</code>\u4e24\u4e2a\u5c5e\u6027\uff0c<code>value</code>\u5c5e\u6027\u8fd4\u56de\u5f53\u524d\u4f4d\u7f6e\u7684\u6210\u5458\uff0c<code>done</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u904d\u5386\u662f\u5426\u7ed3\u675f\uff0c\u5373\u662f\u5426\u8fd8\u6709\u5fc5\u8981\u518d\u4e00\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u603b\u4e4b\uff0c\u8c03\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u904d\u5386\u4e8b\u5148\u7ed9\u5b9a\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <p>\u5bf9\u4e8e\u904d\u5386\u5668\u5bf9\u8c61\u6765\u8bf4\uff0c<code>done: false</code>\u548c<code>value: undefined</code>\u5c5e\u6027\u90fd\u662f\u53ef\u4ee5\u7701\u7565\u7684\uff0c\u56e0\u6b64\u4e0a\u9762\u7684<code>makeIterator</code>\u51fd\u6570\u53ef\u4ee5\u7b80\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>function makeIterator(array) {\n  var nextIndex = 0;\n  return {\n    next: function() {\n      return nextIndex &lt; array.length ?\n        {value: array[nextIndex++]} :\n        {done: true};\n    }\n  };\n}\n</code></pre> <p>\u7531\u4e8e Iterator \u53ea\u662f\u628a\u63a5\u53e3\u89c4\u683c\u52a0\u5230\u6570\u636e\u7ed3\u6784\u4e4b\u4e0a\uff0c\u6240\u4ee5\uff0c\u904d\u5386\u5668\u4e0e\u5b83\u6240\u904d\u5386\u7684\u90a3\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5b9e\u9645\u4e0a\u662f\u5206\u5f00\u7684\uff0c\u5b8c\u5168\u53ef\u4ee5\u5199\u51fa\u6ca1\u6709\u5bf9\u5e94\u6570\u636e\u7ed3\u6784\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u6216\u8005\u8bf4\u7528\u904d\u5386\u5668\u5bf9\u8c61\u6a21\u62df\u51fa\u6570\u636e\u7ed3\u6784\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u65e0\u9650\u8fd0\u884c\u7684\u904d\u5386\u5668\u5bf9\u8c61\u7684\u4f8b\u5b50\u3002</p> <pre><code>var it = idMaker();\n\nit.next().value // 0\nit.next().value // 1\nit.next().value // 2\n// ...\n\nfunction idMaker() {\n  var index = 0;\n\n  return {\n    next: function() {\n      return {value: index++, done: false};\n    }\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u904d\u5386\u5668\u751f\u6210\u51fd\u6570<code>idMaker</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff08\u5373\u6307\u9488\u5bf9\u8c61\uff09\u3002\u4f46\u662f\u5e76\u6ca1\u6709\u5bf9\u5e94\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6216\u8005\u8bf4\uff0c\u904d\u5386\u5668\u5bf9\u8c61\u81ea\u5df1\u63cf\u8ff0\u4e86\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u51fa\u6765\u3002</p> <p>\u5982\u679c\u4f7f\u7528 TypeScript \u7684\u5199\u6cd5\uff0c\u904d\u5386\u5668\u63a5\u53e3\uff08Iterable\uff09\u3001\u6307\u9488\u5bf9\u8c61\uff08Iterator\uff09\u548c<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u503c\u7684\u89c4\u683c\u53ef\u4ee5\u63cf\u8ff0\u5982\u4e0b\u3002</p> <pre><code>interface Iterable {\n  [Symbol.iterator]() : Iterator,\n}\n\ninterface Iterator {\n  next(value?: any) : IterationResult,\n}\n\ninterface IterationResult {\n  value: any,\n  done: boolean,\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#iterator_1","title":"\u9ed8\u8ba4 Iterator \u63a5\u53e3","text":"<p>Iterator \u63a5\u53e3\u7684\u76ee\u7684\uff0c\u5c31\u662f\u4e3a\u6240\u6709\u6570\u636e\u7ed3\u6784\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u7edf\u4e00\u7684\u8bbf\u95ee\u673a\u5236\uff0c\u5373<code>for...of</code>\u5faa\u73af\uff08\u8be6\u89c1\u4e0b\u6587\uff09\u3002\u5f53\u4f7f\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\u67d0\u79cd\u6570\u636e\u7ed3\u6784\u65f6\uff0c\u8be5\u5faa\u73af\u4f1a\u81ea\u52a8\u53bb\u5bfb\u627e Iterator \u63a5\u53e3\u3002</p> <p>\u4e00\u79cd\u6570\u636e\u7ed3\u6784\u53ea\u8981\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\uff0c\u6211\u4eec\u5c31\u79f0\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u662f\u201c\u53ef\u904d\u5386\u7684\u201d\uff08iterable\uff09\u3002</p> <p>ES6 \u89c4\u5b9a\uff0c\u9ed8\u8ba4\u7684 Iterator \u63a5\u53e3\u90e8\u7f72\u5728\u6570\u636e\u7ed3\u6784\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u6216\u8005\u8bf4\uff0c\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53ea\u8981\u5177\u6709<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u662f\u201c\u53ef\u904d\u5386\u7684\u201d\uff08iterable\uff09\u3002<code>Symbol.iterator</code>\u5c5e\u6027\u672c\u8eab\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u662f\u5f53\u524d\u6570\u636e\u7ed3\u6784\u9ed8\u8ba4\u7684\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\u3002\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u3002\u81f3\u4e8e\u5c5e\u6027\u540d<code>Symbol.iterator</code>\uff0c\u5b83\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8fd4\u56de<code>Symbol</code>\u5bf9\u8c61\u7684<code>iterator</code>\u5c5e\u6027\uff0c\u8fd9\u662f\u4e00\u4e2a\u9884\u5b9a\u4e49\u597d\u7684\u3001\u7c7b\u578b\u4e3a Symbol \u7684\u7279\u6b8a\u503c\uff0c\u6240\u4ee5\u8981\u653e\u5728\u65b9\u62ec\u53f7\u5185\uff08\u53c2\u89c1\u300aSymbol\u300b\u4e00\u7ae0\uff09\u3002</p> <pre><code>const obj = {\n  [Symbol.iterator] : function () {\n    return {\n      next: function () {\n        return {\n          value: 1,\n          done: true\n        };\n      }\n    };\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj</code>\u662f\u53ef\u904d\u5386\u7684\uff08iterable\uff09\uff0c\u56e0\u4e3a\u5177\u6709<code>Symbol.iterator</code>\u5c5e\u6027\u3002\u6267\u884c\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684\u6839\u672c\u7279\u5f81\u5c31\u662f\u5177\u6709<code>next</code>\u65b9\u6cd5\u3002\u6bcf\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u4ee3\u8868\u5f53\u524d\u6210\u5458\u7684\u4fe1\u606f\u5bf9\u8c61\uff0c\u5177\u6709<code>value</code>\u548c<code>done</code>\u4e24\u4e2a\u5c5e\u6027\u3002</p> <p>ES6 \u7684\u6709\u4e9b\u6570\u636e\u7ed3\u6784\u539f\u751f\u5177\u5907 Iterator \u63a5\u53e3\uff08\u6bd4\u5982\u6570\u7ec4\uff09\uff0c\u5373\u4e0d\u7528\u4efb\u4f55\u5904\u7406\uff0c\u5c31\u53ef\u4ee5\u88ab<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002\u539f\u56e0\u5728\u4e8e\uff0c\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\u539f\u751f\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\uff08\u8be6\u89c1\u4e0b\u6587\uff09\uff0c\u53e6\u5916\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\u6ca1\u6709\uff08\u6bd4\u5982\u5bf9\u8c61\uff09\u3002\u51e1\u662f\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5c31\u79f0\u4e3a\u90e8\u7f72\u4e86\u904d\u5386\u5668\u63a5\u53e3\u3002\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u539f\u751f\u5177\u5907 Iterator \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\u5982\u4e0b\u3002</p> <ul> <li>Array</li> <li>Map</li> <li>Set</li> <li>String</li> <li>TypedArray</li> <li>\u51fd\u6570\u7684 arguments \u5bf9\u8c61</li> <li>NodeList \u5bf9\u8c61</li> </ul> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u6570\u7ec4\u7684<code>Symbol.iterator</code>\u5c5e\u6027\u3002</p> <pre><code>let arr = ['a', 'b', 'c'];\nlet iter = arr[Symbol.iterator]();\n\niter.next() // { value: 'a', done: false }\niter.next() // { value: 'b', done: false }\niter.next() // { value: 'c', done: false }\niter.next() // { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>arr</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u539f\u751f\u5c31\u5177\u6709\u904d\u5386\u5668\u63a5\u53e3\uff0c\u90e8\u7f72\u5728<code>arr</code>\u7684<code>Symbol.iterator</code>\u5c5e\u6027\u4e0a\u9762\u3002\u6240\u4ee5\uff0c\u8c03\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5c31\u5f97\u5230\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u5bf9\u4e8e\u539f\u751f\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u7528\u81ea\u5df1\u5199\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff0c<code>for...of</code>\u5faa\u73af\u4f1a\u81ea\u52a8\u904d\u5386\u5b83\u4eec\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u5176\u4ed6\u6570\u636e\u7ed3\u6784\uff08\u4e3b\u8981\u662f\u5bf9\u8c61\uff09\u7684 Iterator \u63a5\u53e3\uff0c\u90fd\u9700\u8981\u81ea\u5df1\u5728<code>Symbol.iterator</code>\u5c5e\u6027\u4e0a\u9762\u90e8\u7f72\uff0c\u8fd9\u6837\u624d\u4f1a\u88ab<code>for...of</code>\u5faa\u73af\u904d\u5386\u3002</p> <p>\u5bf9\u8c61\uff08Object\uff09\u4e4b\u6240\u4ee5\u6ca1\u6709\u9ed8\u8ba4\u90e8\u7f72 Iterator \u63a5\u53e3\uff0c\u662f\u56e0\u4e3a\u5bf9\u8c61\u7684\u54ea\u4e2a\u5c5e\u6027\u5148\u904d\u5386\uff0c\u54ea\u4e2a\u5c5e\u6027\u540e\u904d\u5386\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u9700\u8981\u5f00\u53d1\u8005\u624b\u52a8\u6307\u5b9a\u3002\u672c\u8d28\u4e0a\uff0c\u904d\u5386\u5668\u662f\u4e00\u79cd\u7ebf\u6027\u5904\u7406\uff0c\u5bf9\u4e8e\u4efb\u4f55\u975e\u7ebf\u6027\u7684\u6570\u636e\u7ed3\u6784\uff0c\u90e8\u7f72\u904d\u5386\u5668\u63a5\u53e3\uff0c\u5c31\u7b49\u4e8e\u90e8\u7f72\u4e00\u79cd\u7ebf\u6027\u8f6c\u6362\u3002\u4e0d\u8fc7\uff0c\u4e25\u683c\u5730\u8bf4\uff0c\u5bf9\u8c61\u90e8\u7f72\u904d\u5386\u5668\u63a5\u53e3\u5e76\u4e0d\u662f\u5f88\u5fc5\u8981\uff0c\u56e0\u4e3a\u8fd9\u65f6\u5bf9\u8c61\u5b9e\u9645\u4e0a\u88ab\u5f53\u4f5c Map \u7ed3\u6784\u4f7f\u7528\uff0cES5 \u6ca1\u6709 Map \u7ed3\u6784\uff0c\u800c ES6 \u539f\u751f\u63d0\u4f9b\u4e86\u3002</p> <p>\u4e00\u4e2a\u5bf9\u8c61\u5982\u679c\u8981\u5177\u5907\u53ef\u88ab<code>for...of</code>\u5faa\u73af\u8c03\u7528\u7684 Iterator \u63a5\u53e3\uff0c\u5c31\u5fc5\u987b\u5728<code>Symbol.iterator</code>\u7684\u5c5e\u6027\u4e0a\u90e8\u7f72\u904d\u5386\u5668\u751f\u6210\u65b9\u6cd5\uff08\u539f\u578b\u94fe\u4e0a\u7684\u5bf9\u8c61\u5177\u6709\u8be5\u65b9\u6cd5\u4e5f\u53ef\uff09\u3002</p> <pre><code>class RangeIterator {\n  constructor(start, stop) {\n    this.value = start;\n    this.stop = stop;\n  }\n\n  [Symbol.iterator]() { return this; }\n\n  next() {\n    var value = this.value;\n    if (value &lt; this.stop) {\n      this.value++;\n      return {done: false, value: value};\n    }\n    return {done: true, value: undefined};\n  }\n}\n\nfunction range(start, stop) {\n  return new RangeIterator(start, stop);\n}\n\nfor (var value of range(0, 3)) {\n  console.log(value); // 0, 1, 2\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u7c7b\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u5199\u6cd5\u3002<code>Symbol.iterator</code>\u5c5e\u6027\u5bf9\u5e94\u4e00\u4e2a\u51fd\u6570\uff0c\u6267\u884c\u540e\u8fd4\u56de\u5f53\u524d\u5bf9\u8c61\u7684\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u662f\u901a\u8fc7\u904d\u5386\u5668\u5b9e\u73b0\u201c\u94fe\u8868\u201d\u7ed3\u6784\u7684\u4f8b\u5b50\u3002</p> <pre><code>function Obj(value) {\n  this.value = value;\n  this.next = null;\n}\n\nObj.prototype[Symbol.iterator] = function() {\n  var iterator = { next: next };\n\n  var current = this;\n\n  function next() {\n    if (current) {\n      var value = current.value;\n      current = current.next;\n      return { done: false, value: value };\n    }\n    return { done: true };\n  }\n  return iterator;\n}\n\nvar one = new Obj(1);\nvar two = new Obj(2);\nvar three = new Obj(3);\n\none.next = two;\ntwo.next = three;\n\nfor (var i of one){\n  console.log(i); // 1, 2, 3\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u9996\u5148\u5728\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u94fe\u4e0a\u90e8\u7f72<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u4f1a\u8fd4\u56de\u904d\u5386\u5668\u5bf9\u8c61<code>iterator</code>\uff0c\u8c03\u7528\u8be5\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5728\u8fd4\u56de\u4e00\u4e2a\u503c\u7684\u540c\u65f6\uff0c\u81ea\u52a8\u5c06\u5185\u90e8\u6307\u9488\u79fb\u5230\u4e0b\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4e3a\u5bf9\u8c61\u6dfb\u52a0 Iterator \u63a5\u53e3\u7684\u4f8b\u5b50\u3002</p> <pre><code>let obj = {\n  data: [ 'hello', 'world' ],\n  [Symbol.iterator]() {\n    const self = this;\n    let index = 0;\n    return {\n      next() {\n        if (index &lt; self.data.length) {\n          return {\n            value: self.data[index++],\n            done: false\n          };\n        }\n        return { value: undefined, done: true };\n      }\n    };\n  }\n};\n</code></pre> <p>\u5bf9\u4e8e\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff08\u5b58\u5728\u6570\u503c\u952e\u540d\u548c<code>length</code>\u5c5e\u6027\uff09\uff0c\u90e8\u7f72 Iterator \u63a5\u53e3\uff0c\u6709\u4e00\u4e2a\u7b80\u4fbf\u65b9\u6cd5\uff0c\u5c31\u662f<code>Symbol.iterator</code>\u65b9\u6cd5\u76f4\u63a5\u5f15\u7528\u6570\u7ec4\u7684 Iterator \u63a5\u53e3\u3002</p> <pre><code>NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];\n// \u6216\u8005\nNodeList.prototype[Symbol.iterator] = [][Symbol.iterator];\n\n[...document.querySelectorAll('div')] // \u53ef\u4ee5\u6267\u884c\u4e86\n</code></pre> <p>NodeList \u5bf9\u8c61\u662f\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u672c\u6765\u5c31\u5177\u6709\u904d\u5386\u63a5\u53e3\uff0c\u53ef\u4ee5\u76f4\u63a5\u904d\u5386\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5c06\u5b83\u7684\u904d\u5386\u63a5\u53e3\u6539\u6210\u6570\u7ec4\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u770b\u5230\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u8c03\u7528\u6570\u7ec4\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002</p> <pre><code>let iterable = {\n  0: 'a',\n  1: 'b',\n  2: 'c',\n  length: 3,\n  [Symbol.iterator]: Array.prototype[Symbol.iterator]\n};\nfor (let item of iterable) {\n  console.log(item); // 'a', 'b', 'c'\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u666e\u901a\u5bf9\u8c61\u90e8\u7f72\u6570\u7ec4\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u5e76\u65e0\u6548\u679c\u3002</p> <pre><code>let iterable = {\n  a: 'a',\n  b: 'b',\n  c: 'c',\n  length: 3,\n  [Symbol.iterator]: Array.prototype[Symbol.iterator]\n};\nfor (let item of iterable) {\n  console.log(item); // undefined, undefined, undefined\n}\n</code></pre> <p>\u5982\u679c<code>Symbol.iterator</code>\u65b9\u6cd5\u5bf9\u5e94\u7684\u4e0d\u662f\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff08\u5373\u4f1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff09\uff0c\u89e3\u91ca\u5f15\u64ce\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>var obj = {};\n\nobj[Symbol.iterator] = () =&gt; 1;\n\n[...obj] // TypeError: [] is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>obj</code>\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u5bf9\u5e94\u7684\u4e0d\u662f\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u6709\u4e86\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6570\u636e\u7ed3\u6784\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\uff08\u8be6\u89c1\u4e0b\u6587\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>while</code>\u5faa\u73af\u904d\u5386\u3002</p> <pre><code>var $iterator = ITERABLE[Symbol.iterator]();\nvar $result = $iterator.next();\nwhile (!$result.done) {\n  var x = $result.value;\n  // ...\n  $result = $iterator.next();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ITERABLE</code>\u4ee3\u8868\u67d0\u79cd\u53ef\u904d\u5386\u7684\u6570\u636e\u7ed3\u6784\uff0c<code>$iterator</code>\u662f\u5b83\u7684\u904d\u5386\u5668\u5bf9\u8c61\u3002\u904d\u5386\u5668\u5bf9\u8c61\u6bcf\u6b21\u79fb\u52a8\u6307\u9488\uff08<code>next</code>\u65b9\u6cd5\uff09\uff0c\u90fd\u68c0\u67e5\u4e00\u4e0b\u8fd4\u56de\u503c\u7684<code>done</code>\u5c5e\u6027\uff0c\u5982\u679c\u904d\u5386\u8fd8\u6ca1\u7ed3\u675f\uff0c\u5c31\u79fb\u52a8\u904d\u5386\u5668\u5bf9\u8c61\u7684\u6307\u9488\u5230\u4e0b\u4e00\u6b65\uff08<code>next</code>\u65b9\u6cd5\uff09\uff0c\u4e0d\u65ad\u5faa\u73af\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#iterator_2","title":"\u8c03\u7528 Iterator \u63a5\u53e3\u7684\u573a\u5408","text":"<p>\u6709\u4e00\u4e9b\u573a\u5408\u4f1a\u9ed8\u8ba4\u8c03\u7528 Iterator \u63a5\u53e3\uff08\u5373<code>Symbol.iterator</code>\u65b9\u6cd5\uff09\uff0c\u9664\u4e86\u4e0b\u6587\u4f1a\u4ecb\u7ecd\u7684<code>for...of</code>\u5faa\u73af\uff0c\u8fd8\u6709\u51e0\u4e2a\u522b\u7684\u573a\u5408\u3002</p> <p>\uff081\uff09\u89e3\u6784\u8d4b\u503c</p> <p>\u5bf9\u6570\u7ec4\u548c Set \u7ed3\u6784\u8fdb\u884c\u89e3\u6784\u8d4b\u503c\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u8c03\u7528<code>Symbol.iterator</code>\u65b9\u6cd5\u3002</p> <pre><code>let set = new Set().add('a').add('b').add('c');\n\nlet [x,y] = set;\n// x='a'; y='b'\n\nlet [first, ...rest] = set;\n// first='a'; rest=['b','c'];\n</code></pre> <p>\uff082\uff09\u6269\u5c55\u8fd0\u7b97\u7b26</p> <p>\u6269\u5c55\u8fd0\u7b97\u7b26\uff08...\uff09\u4e5f\u4f1a\u8c03\u7528\u9ed8\u8ba4\u7684 Iterator \u63a5\u53e3\u3002</p> <pre><code>// \u4f8b\u4e00\nvar str = 'hello';\n[...str] //  ['h','e','l','l','o']\n\n// \u4f8b\u4e8c\nlet arr = ['b', 'c'];\n['a', ...arr, 'd']\n// ['a', 'b', 'c', 'd']\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u6269\u5c55\u8fd0\u7b97\u7b26\u5185\u90e8\u5c31\u8c03\u7528 Iterator \u63a5\u53e3\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u8fd9\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u4fbf\u673a\u5236\uff0c\u53ef\u4ee5\u5c06\u4efb\u4f55\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8f6c\u4e3a\u6570\u7ec4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u67d0\u4e2a\u6570\u636e\u7ed3\u6784\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u5bf9\u5b83\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff0c\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>let arr = [...iterable];\n</code></pre> <p>\uff083\uff09yield*</p> <p><code>yield*</code>\u540e\u9762\u8ddf\u7684\u662f\u4e00\u4e2a\u53ef\u904d\u5386\u7684\u7ed3\u6784\uff0c\u5b83\u4f1a\u8c03\u7528\u8be5\u7ed3\u6784\u7684\u904d\u5386\u5668\u63a5\u53e3\u3002</p> <pre><code>let generator = function* () {\n  yield 1;\n  yield* [2,3,4];\n  yield 5;\n};\n\nvar iterator = generator();\n\niterator.next() // { value: 1, done: false }\niterator.next() // { value: 2, done: false }\niterator.next() // { value: 3, done: false }\niterator.next() // { value: 4, done: false }\niterator.next() // { value: 5, done: false }\niterator.next() // { value: undefined, done: true }\n</code></pre> <p>\uff084\uff09\u5176\u4ed6\u573a\u5408</p> <p>\u7531\u4e8e\u6570\u7ec4\u7684\u904d\u5386\u4f1a\u8c03\u7528\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6240\u4ee5\u4efb\u4f55\u63a5\u53d7\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u7684\u573a\u5408\uff0c\u5176\u5b9e\u90fd\u8c03\u7528\u4e86\u904d\u5386\u5668\u63a5\u53e3\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002</p> <ul> <li>for...of</li> <li>Array.from()</li> <li>Map(), Set(), WeakMap(), WeakSet()\uff08\u6bd4\u5982<code>new Map([['a',1],['b',2]])</code>\uff09</li> <li>Promise.all()</li> <li>Promise.race()</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#iterator_3","title":"\u5b57\u7b26\u4e32\u7684 Iterator \u63a5\u53e3","text":"<p>\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u4e5f\u539f\u751f\u5177\u6709 Iterator \u63a5\u53e3\u3002</p> <pre><code>var someString = \"hi\";\ntypeof someString[Symbol.iterator]\n// \"function\"\n\nvar iterator = someString[Symbol.iterator]();\n\niterator.next()  // { value: \"h\", done: false }\niterator.next()  // { value: \"i\", done: false }\niterator.next()  // { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>Symbol.iterator</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u5728\u8fd9\u4e2a\u904d\u5386\u5668\u4e0a\u53ef\u4ee5\u8c03\u7528 next \u65b9\u6cd5\uff0c\u5b9e\u73b0\u5bf9\u4e8e\u5b57\u7b26\u4e32\u7684\u904d\u5386\u3002</p> <p>\u53ef\u4ee5\u8986\u76d6\u539f\u751f\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u8fbe\u5230\u4fee\u6539\u904d\u5386\u5668\u884c\u4e3a\u7684\u76ee\u7684\u3002</p> <pre><code>var str = new String(\"hi\");\n\n[...str] // [\"h\", \"i\"]\n\nstr[Symbol.iterator] = function() {\n  return {\n    next: function() {\n      if (this._first) {\n        this._first = false;\n        return { value: \"bye\", done: false };\n      } else {\n        return { done: true };\n      }\n    },\n    _first: true\n  };\n};\n\n[...str] // [\"bye\"]\nstr // \"hi\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b57\u7b26\u4e32 str \u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u88ab\u4fee\u6539\u4e86\uff0c\u6240\u4ee5\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u8fd4\u56de\u7684\u503c\u53d8\u6210\u4e86<code>bye</code>\uff0c\u800c\u5b57\u7b26\u4e32\u672c\u8eab\u8fd8\u662f<code>hi</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#iterator-generator","title":"Iterator \u63a5\u53e3\u4e0e Generator \u51fd\u6570","text":"<p><code>Symbol.iterator()</code>\u65b9\u6cd5\u7684\u6700\u7b80\u5355\u5b9e\u73b0\uff0c\u8fd8\u662f\u4f7f\u7528\u4e0b\u4e00\u7ae0\u8981\u4ecb\u7ecd\u7684 Generator \u51fd\u6570\u3002</p> <pre><code>let myIterable = {\n  [Symbol.iterator]: function* () {\n    yield 1;\n    yield 2;\n    yield 3;\n  }\n};\n[...myIterable] // [1, 2, 3]\n\n// \u6216\u8005\u91c7\u7528\u4e0b\u9762\u7684\u7b80\u6d01\u5199\u6cd5\n\nlet obj = {\n  * [Symbol.iterator]() {\n    yield 'hello';\n    yield 'world';\n  }\n};\n\nfor (let x of obj) {\n  console.log(x);\n}\n// \"hello\"\n// \"world\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Symbol.iterator()</code>\u65b9\u6cd5\u51e0\u4e4e\u4e0d\u7528\u90e8\u7f72\u4efb\u4f55\u4ee3\u7801\uff0c\u53ea\u8981\u7528 yield \u547d\u4ee4\u7ed9\u51fa\u6bcf\u4e00\u6b65\u7684\u8fd4\u56de\u503c\u5373\u53ef\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#returnthrow","title":"\u904d\u5386\u5668\u5bf9\u8c61\u7684 return()\uff0cthrow()","text":"<p>\u904d\u5386\u5668\u5bf9\u8c61\u9664\u4e86\u5177\u6709<code>next()</code>\u65b9\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u5177\u6709<code>return()</code>\u65b9\u6cd5\u548c<code>throw()</code>\u65b9\u6cd5\u3002\u5982\u679c\u4f60\u81ea\u5df1\u5199\u904d\u5386\u5668\u5bf9\u8c61\u751f\u6210\u51fd\u6570\uff0c\u90a3\u4e48<code>next()</code>\u65b9\u6cd5\u662f\u5fc5\u987b\u90e8\u7f72\u7684\uff0c<code>return()</code>\u65b9\u6cd5\u548c<code>throw()</code>\u65b9\u6cd5\u662f\u5426\u90e8\u7f72\u662f\u53ef\u9009\u7684\u3002</p> <p><code>return()</code>\u65b9\u6cd5\u7684\u4f7f\u7528\u573a\u5408\u662f\uff0c\u5982\u679c<code>for...of</code>\u5faa\u73af\u63d0\u524d\u9000\u51fa\uff08\u901a\u5e38\u662f\u56e0\u4e3a\u51fa\u9519\uff0c\u6216\u8005\u6709<code>break</code>\u8bed\u53e5\uff09\uff0c\u5c31\u4f1a\u8c03\u7528<code>return()</code>\u65b9\u6cd5\u3002\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u5728\u5b8c\u6210\u904d\u5386\u524d\uff0c\u9700\u8981\u6e05\u7406\u6216\u91ca\u653e\u8d44\u6e90\uff0c\u5c31\u53ef\u4ee5\u90e8\u7f72<code>return()</code>\u65b9\u6cd5\u3002</p> <pre><code>function readLinesSync(file) {\n  return {\n    [Symbol.iterator]() {\n      return {\n        next() {\n          return { done: false };\n        },\n        return() {\n          file.close();\n          return { done: true };\n        }\n      };\n    },\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>readLinesSync</code>\u63a5\u53d7\u4e00\u4e2a\u6587\u4ef6\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u5176\u4e2d\u9664\u4e86<code>next()</code>\u65b9\u6cd5\uff0c\u8fd8\u90e8\u7f72\u4e86<code>return()</code>\u65b9\u6cd5\u3002\u4e0b\u9762\u7684\u4e24\u79cd\u60c5\u51b5\uff0c\u90fd\u4f1a\u89e6\u53d1\u6267\u884c<code>return()</code>\u65b9\u6cd5\u3002</p> <pre><code>// \u60c5\u51b5\u4e00\nfor (let line of readLinesSync(fileName)) {\n  console.log(line);\n  break;\n}\n\n// \u60c5\u51b5\u4e8c\nfor (let line of readLinesSync(fileName)) {\n  console.log(line);\n  throw new Error();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u60c5\u51b5\u4e00\u8f93\u51fa\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u4ee5\u540e\uff0c\u5c31\u4f1a\u6267\u884c<code>return()</code>\u65b9\u6cd5\uff0c\u5173\u95ed\u8fd9\u4e2a\u6587\u4ef6\uff1b\u60c5\u51b5\u4e8c\u4f1a\u5728\u6267\u884c<code>return()</code>\u65b9\u6cd5\u5173\u95ed\u6587\u4ef6\u4e4b\u540e\uff0c\u518d\u629b\u51fa\u9519\u8bef\u3002</p> <p>\u6ce8\u610f\uff0c<code>return()</code>\u65b9\u6cd5\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u662f Generator \u8bed\u6cd5\u51b3\u5b9a\u7684\u3002</p> <p><code>throw()</code>\u65b9\u6cd5\u4e3b\u8981\u662f\u914d\u5408 Generator \u51fd\u6570\u4f7f\u7528\uff0c\u4e00\u822c\u7684\u904d\u5386\u5668\u5bf9\u8c61\u7528\u4e0d\u5230\u8fd9\u4e2a\u65b9\u6cd5\u3002\u8bf7\u53c2\u9605\u300aGenerator \u51fd\u6570\u300b\u4e00\u7ae0\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#forof","title":"for...of \u5faa\u73af","text":"<p>ES6 \u501f\u9274 C++\u3001Java\u3001C# \u548c Python \u8bed\u8a00\uff0c\u5f15\u5165\u4e86<code>for...of</code>\u5faa\u73af\uff0c\u4f5c\u4e3a\u904d\u5386\u6240\u6709\u6570\u636e\u7ed3\u6784\u7684\u7edf\u4e00\u7684\u65b9\u6cd5\u3002</p> <p>\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53ea\u8981\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u5c31\u88ab\u89c6\u4e3a\u5177\u6709 iterator \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u904d\u5386\u5b83\u7684\u6210\u5458\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>for...of</code>\u5faa\u73af\u5185\u90e8\u8c03\u7528\u7684\u662f\u6570\u636e\u7ed3\u6784\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u3002</p> <p><code>for...of</code>\u5faa\u73af\u53ef\u4ee5\u4f7f\u7528\u7684\u8303\u56f4\u5305\u62ec\u6570\u7ec4\u3001Set \u548c Map \u7ed3\u6784\u3001\u67d0\u4e9b\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff08\u6bd4\u5982<code>arguments</code>\u5bf9\u8c61\u3001DOM NodeList \u5bf9\u8c61\uff09\u3001\u540e\u6587\u7684 Generator \u5bf9\u8c61\uff0c\u4ee5\u53ca\u5b57\u7b26\u4e32\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#_1","title":"\u6570\u7ec4","text":"<p>\u6570\u7ec4\u539f\u751f\u5177\u5907<code>iterator</code>\u63a5\u53e3\uff08\u5373\u9ed8\u8ba4\u90e8\u7f72\u4e86<code>Symbol.iterator</code>\u5c5e\u6027\uff09\uff0c<code>for...of</code>\u5faa\u73af\u672c\u8d28\u4e0a\u5c31\u662f\u8c03\u7528\u8fd9\u4e2a\u63a5\u53e3\u4ea7\u751f\u7684\u904d\u5386\u5668\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u8bc1\u660e\u3002</p> <pre><code>const arr = ['red', 'green', 'blue'];\n\nfor(let v of arr) {\n  console.log(v); // red green blue\n}\n\nconst obj = {};\nobj[Symbol.iterator] = arr[Symbol.iterator].bind(arr);\n\nfor(let v of obj) {\n  console.log(v); // red green blue\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7a7a\u5bf9\u8c61<code>obj</code>\u90e8\u7f72\u4e86\u6570\u7ec4<code>arr</code>\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u7ed3\u679c<code>obj</code>\u7684<code>for...of</code>\u5faa\u73af\uff0c\u4ea7\u751f\u4e86\u4e0e<code>arr</code>\u5b8c\u5168\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <p><code>for...of</code>\u5faa\u73af\u53ef\u4ee5\u4ee3\u66ff\u6570\u7ec4\u5b9e\u4f8b\u7684<code>forEach</code>\u65b9\u6cd5\u3002</p> <pre><code>const arr = ['red', 'green', 'blue'];\n\narr.forEach(function (element, index) {\n  console.log(element); // red green blue\n  console.log(index);   // 0 1 2\n});\n</code></pre> <p>JavaScript \u539f\u6709\u7684<code>for...in</code>\u5faa\u73af\uff0c\u53ea\u80fd\u83b7\u5f97\u5bf9\u8c61\u7684\u952e\u540d\uff0c\u4e0d\u80fd\u76f4\u63a5\u83b7\u53d6\u952e\u503c\u3002ES6 \u63d0\u4f9b<code>for...of</code>\u5faa\u73af\uff0c\u5141\u8bb8\u904d\u5386\u83b7\u5f97\u952e\u503c\u3002</p> <pre><code>var arr = ['a', 'b', 'c', 'd'];\n\nfor (let a in arr) {\n  console.log(a); // 0 1 2 3\n}\n\nfor (let a of arr) {\n  console.log(a); // a b c d\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0c<code>for...in</code>\u5faa\u73af\u8bfb\u53d6\u952e\u540d\uff0c<code>for...of</code>\u5faa\u73af\u8bfb\u53d6\u952e\u503c\u3002\u5982\u679c\u8981\u901a\u8fc7<code>for...of</code>\u5faa\u73af\uff0c\u83b7\u53d6\u6570\u7ec4\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u501f\u52a9\u6570\u7ec4\u5b9e\u4f8b\u7684<code>entries</code>\u65b9\u6cd5\u548c<code>keys</code>\u65b9\u6cd5\uff08\u53c2\u89c1\u300a\u6570\u7ec4\u7684\u6269\u5c55\u300b\u4e00\u7ae0\uff09\u3002</p> <p><code>for...of</code>\u5faa\u73af\u8c03\u7528\u904d\u5386\u5668\u63a5\u53e3\uff0c\u6570\u7ec4\u7684\u904d\u5386\u5668\u63a5\u53e3\u53ea\u8fd4\u56de\u5177\u6709\u6570\u5b57\u7d22\u5f15\u7684\u5c5e\u6027\u3002\u8fd9\u4e00\u70b9\u8ddf<code>for...in</code>\u5faa\u73af\u4e5f\u4e0d\u4e00\u6837\u3002</p> <pre><code>let arr = [3, 5, 7];\narr.foo = 'hello';\n\nfor (let i in arr) {\n  console.log(i); // \"0\", \"1\", \"2\", \"foo\"\n}\n\nfor (let i of arr) {\n  console.log(i); //  \"3\", \"5\", \"7\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>for...of</code>\u5faa\u73af\u4e0d\u4f1a\u8fd4\u56de\u6570\u7ec4<code>arr</code>\u7684<code>foo</code>\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#set-map","title":"Set \u548c Map \u7ed3\u6784","text":"<p>Set \u548c Map \u7ed3\u6784\u4e5f\u539f\u751f\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>for...of</code>\u5faa\u73af\u3002</p> <pre><code>var engines = new Set([\"Gecko\", \"Trident\", \"Webkit\", \"Webkit\"]);\nfor (var e of engines) {\n  console.log(e);\n}\n// Gecko\n// Trident\n// Webkit\n\nvar es6 = new Map();\nes6.set(\"edition\", 6);\nes6.set(\"committee\", \"TC39\");\nes6.set(\"standard\", \"ECMA-262\");\nfor (var [name, value] of es6) {\n  console.log(name + \": \" + value);\n}\n// edition: 6\n// committee: TC39\n// standard: ECMA-262\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6f14\u793a\u4e86\u5982\u4f55\u904d\u5386 Set \u7ed3\u6784\u548c Map \u7ed3\u6784\u3002\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9\u6709\u4e24\u4e2a\uff0c\u9996\u5148\uff0c\u904d\u5386\u7684\u987a\u5e8f\u662f\u6309\u7167\u5404\u4e2a\u6210\u5458\u88ab\u6dfb\u52a0\u8fdb\u6570\u636e\u7ed3\u6784\u7684\u987a\u5e8f\u3002\u5176\u6b21\uff0cSet \u7ed3\u6784\u904d\u5386\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u503c\uff0c\u800c Map \u7ed3\u6784\u904d\u5386\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u8be5\u6570\u7ec4\u7684\u4e24\u4e2a\u6210\u5458\u5206\u522b\u4e3a\u5f53\u524d Map \u6210\u5458\u7684\u952e\u540d\u548c\u952e\u503c\u3002</p> <pre><code>let map = new Map().set('a', 1).set('b', 2);\nfor (let pair of map) {\n  console.log(pair);\n}\n// ['a', 1]\n// ['b', 2]\n\nfor (let [key, value] of map) {\n  console.log(key + ' : ' + value);\n}\n// a : 1\n// b : 2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#_2","title":"\u8ba1\u7b97\u751f\u6210\u7684\u6570\u636e\u7ed3\u6784","text":"<p>\u6709\u4e9b\u6570\u636e\u7ed3\u6784\u662f\u5728\u73b0\u6709\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u4e0a\uff0c\u8ba1\u7b97\u751f\u6210\u7684\u3002\u6bd4\u5982\uff0cES6 \u7684\u6570\u7ec4\u3001Set\u3001Map \u90fd\u90e8\u7f72\u4e86\u4ee5\u4e0b\u4e09\u4e2a\u65b9\u6cd5\uff0c\u8c03\u7528\u540e\u90fd\u8fd4\u56de\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <ul> <li><code>entries()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386<code>[\u952e\u540d, \u952e\u503c]</code>\u7ec4\u6210\u7684\u6570\u7ec4\u3002\u5bf9\u4e8e\u6570\u7ec4\uff0c\u952e\u540d\u5c31\u662f\u7d22\u5f15\u503c\uff1b\u5bf9\u4e8e Set\uff0c\u952e\u540d\u4e0e\u952e\u503c\u76f8\u540c\u3002Map \u7ed3\u6784\u7684 Iterator \u63a5\u53e3\uff0c\u9ed8\u8ba4\u5c31\u662f\u8c03\u7528<code>entries</code>\u65b9\u6cd5\u3002</li> <li><code>keys()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u6240\u6709\u7684\u952e\u540d\u3002</li> <li><code>values()</code> \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7528\u6765\u904d\u5386\u6240\u6709\u7684\u952e\u503c\u3002</li> </ul> <p>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u8c03\u7528\u540e\u751f\u6210\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u6240\u904d\u5386\u7684\u90fd\u662f\u8ba1\u7b97\u751f\u6210\u7684\u6570\u636e\u7ed3\u6784\u3002</p> <pre><code>let arr = ['a', 'b', 'c'];\nfor (let pair of arr.entries()) {\n  console.log(pair);\n}\n// [0, 'a']\n// [1, 'b']\n// [2, 'c']\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#_3","title":"\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61","text":"<p>\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u5305\u62ec\u597d\u51e0\u7c7b\u3002\u4e0b\u9762\u662f<code>for...of</code>\u5faa\u73af\u7528\u4e8e\u5b57\u7b26\u4e32\u3001DOM NodeList \u5bf9\u8c61\u3001<code>arguments</code>\u5bf9\u8c61\u7684\u4f8b\u5b50\u3002</p> <pre><code>// \u5b57\u7b26\u4e32\nlet str = \"hello\";\n\nfor (let s of str) {\n  console.log(s); // h e l l o\n}\n\n// DOM NodeList\u5bf9\u8c61\nlet paras = document.querySelectorAll(\"p\");\n\nfor (let p of paras) {\n  p.classList.add(\"test\");\n}\n\n// arguments\u5bf9\u8c61\nfunction printArgs() {\n  for (let x of arguments) {\n    console.log(x);\n  }\n}\nprintArgs('a', 'b');\n// 'a'\n// 'b'\n</code></pre> <p>\u5bf9\u4e8e\u5b57\u7b26\u4e32\u6765\u8bf4\uff0c<code>for...of</code>\u5faa\u73af\u8fd8\u6709\u4e00\u4e2a\u7279\u70b9\uff0c\u5c31\u662f\u4f1a\u6b63\u786e\u8bc6\u522b 32 \u4f4d UTF-16 \u5b57\u7b26\u3002</p> <pre><code>for (let x of 'a\\uD83D\\uDC0A') {\n  console.log(x);\n}\n// 'a'\n// '\\uD83D\\uDC0A'\n</code></pre> <p>\u5e76\u4e0d\u662f\u6240\u6709\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u90fd\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u4e00\u4e2a\u7b80\u4fbf\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528<code>Array.from</code>\u65b9\u6cd5\u5c06\u5176\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>let arrayLike = { length: 2, 0: 'a', 1: 'b' };\n\n// \u62a5\u9519\nfor (let x of arrayLike) {\n  console.log(x);\n}\n\n// \u6b63\u786e\nfor (let x of Array.from(arrayLike)) {\n  console.log(x);\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#_4","title":"\u5bf9\u8c61","text":"<p>\u5bf9\u4e8e\u666e\u901a\u7684\u5bf9\u8c61\uff0c<code>for...of</code>\u7ed3\u6784\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u4f1a\u62a5\u9519\uff0c\u5fc5\u987b\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\u540e\u624d\u80fd\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u8fd9\u6837\u60c5\u51b5\u4e0b\uff0c<code>for...in</code>\u5faa\u73af\u4f9d\u7136\u53ef\u4ee5\u7528\u6765\u904d\u5386\u952e\u540d\u3002</p> <pre><code>let es6 = {\n  edition: 6,\n  committee: \"TC39\",\n  standard: \"ECMA-262\"\n};\n\nfor (let e in es6) {\n  console.log(e);\n}\n// edition\n// committee\n// standard\n\nfor (let e of es6) {\n  console.log(e);\n}\n// TypeError: es6[Symbol.iterator] is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u5bf9\u4e8e\u666e\u901a\u7684\u5bf9\u8c61\uff0c<code>for...in</code>\u5faa\u73af\u53ef\u4ee5\u904d\u5386\u952e\u540d\uff0c<code>for...of</code>\u5faa\u73af\u4f1a\u62a5\u9519\u3002</p> <p>\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u4f7f\u7528<code>Object.keys</code>\u65b9\u6cd5\u5c06\u5bf9\u8c61\u7684\u952e\u540d\u751f\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u7136\u540e\u904d\u5386\u8fd9\u4e2a\u6570\u7ec4\u3002</p> <pre><code>for (var key of Object.keys(someObject)) {\n  console.log(key + ': ' + someObject[key]);\n}\n</code></pre> <p>\u53e6\u4e00\u4e2a\u65b9\u6cd5\u662f\u4f7f\u7528 Generator \u51fd\u6570\u5c06\u5bf9\u8c61\u91cd\u65b0\u5305\u88c5\u4e00\u4e0b\u3002</p> <pre><code>const obj = { a: 1, b: 2, c: 3 }\n\nfunction* entries(obj) {\n  for (let key of Object.keys(obj)) {\n    yield [key, obj[key]];\n  }\n}\n\nfor (let [key, value] of entries(obj)) {\n  console.log(key, '-&gt;', value);\n}\n// a -&gt; 1\n// b -&gt; 2\n// c -&gt; 3\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/18-iterator/#_5","title":"\u4e0e\u5176\u4ed6\u904d\u5386\u8bed\u6cd5\u7684\u6bd4\u8f83","text":"<p>\u4ee5\u6570\u7ec4\u4e3a\u4f8b\uff0cJavaScript \u63d0\u4f9b\u591a\u79cd\u904d\u5386\u8bed\u6cd5\u3002\u6700\u539f\u59cb\u7684\u5199\u6cd5\u5c31\u662f<code>for</code>\u5faa\u73af\u3002</p> <pre><code>for (var index = 0; index &lt; myArray.length; index++) {\n  console.log(myArray[index]);\n}\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u6bd4\u8f83\u9ebb\u70e6\uff0c\u56e0\u6b64\u6570\u7ec4\u63d0\u4f9b\u5185\u7f6e\u7684<code>forEach</code>\u65b9\u6cd5\u3002</p> <pre><code>myArray.forEach(function (value) {\n  console.log(value);\n});\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u65e0\u6cd5\u4e2d\u9014\u8df3\u51fa<code>forEach</code>\u5faa\u73af\uff0c<code>break</code>\u547d\u4ee4\u6216<code>return</code>\u547d\u4ee4\u90fd\u4e0d\u80fd\u594f\u6548\u3002</p> <p><code>for...in</code>\u5faa\u73af\u53ef\u4ee5\u904d\u5386\u6570\u7ec4\u7684\u952e\u540d\u3002</p> <pre><code>for (var index in myArray) {\n  console.log(myArray[index]);\n}\n</code></pre> <p><code>for...in</code>\u5faa\u73af\u6709\u51e0\u4e2a\u7f3a\u70b9\u3002</p> <ul> <li>\u6570\u7ec4\u7684\u952e\u540d\u662f\u6570\u5b57\uff0c\u4f46\u662f<code>for...in</code>\u5faa\u73af\u662f\u4ee5\u5b57\u7b26\u4e32\u4f5c\u4e3a\u952e\u540d\u201c0\u201d\u3001\u201c1\u201d\u3001\u201c2\u201d\u7b49\u7b49\u3002</li> <li><code>for...in</code>\u5faa\u73af\u4e0d\u4ec5\u904d\u5386\u6570\u5b57\u952e\u540d\uff0c\u8fd8\u4f1a\u904d\u5386\u624b\u52a8\u6dfb\u52a0\u7684\u5176\u4ed6\u952e\uff0c\u751a\u81f3\u5305\u62ec\u539f\u578b\u94fe\u4e0a\u7684\u952e\u3002</li> <li>\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c<code>for...in</code>\u5faa\u73af\u4f1a\u4ee5\u4efb\u610f\u987a\u5e8f\u904d\u5386\u952e\u540d\u3002</li> </ul> <p>\u603b\u4e4b\uff0c<code>for...in</code>\u5faa\u73af\u4e3b\u8981\u662f\u4e3a\u904d\u5386\u5bf9\u8c61\u800c\u8bbe\u8ba1\u7684\uff0c\u4e0d\u9002\u7528\u4e8e\u904d\u5386\u6570\u7ec4\u3002</p> <p><code>for...of</code>\u5faa\u73af\u76f8\u6bd4\u4e0a\u9762\u51e0\u79cd\u505a\u6cd5\uff0c\u6709\u4e00\u4e9b\u663e\u8457\u7684\u4f18\u70b9\u3002</p> <pre><code>for (let value of myArray) {\n  console.log(value);\n}\n</code></pre> <ul> <li>\u6709\u7740\u540c<code>for...in</code>\u4e00\u6837\u7684\u7b80\u6d01\u8bed\u6cd5\uff0c\u4f46\u662f\u6ca1\u6709<code>for...in</code>\u90a3\u4e9b\u7f3a\u70b9\u3002</li> <li>\u4e0d\u540c\u4e8e<code>forEach</code>\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u4e0e<code>break</code>\u3001<code>continue</code>\u548c<code>return</code>\u914d\u5408\u4f7f\u7528\u3002</li> <li>\u63d0\u4f9b\u4e86\u904d\u5386\u6240\u6709\u6570\u636e\u7ed3\u6784\u7684\u7edf\u4e00\u64cd\u4f5c\u63a5\u53e3\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 break \u8bed\u53e5\uff0c\u8df3\u51fa<code>for...of</code>\u5faa\u73af\u7684\u4f8b\u5b50\u3002</p> <pre><code>for (var n of fibonacci) {\n  if (n &gt; 1000)\n    break;\n  console.log(n);\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u4f1a\u8f93\u51fa\u6590\u6ce2\u7eb3\u5951\u6570\u5217\u5c0f\u4e8e\u7b49\u4e8e 1000 \u7684\u9879\u3002\u5982\u679c\u5f53\u524d\u9879\u5927\u4e8e 1000\uff0c\u5c31\u4f1a\u4f7f\u7528<code>break</code>\u8bed\u53e5\u8df3\u51fa<code>for...of</code>\u5faa\u73af\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/","title":"19-Generator \u51fd\u6570\u7684\u8bed\u6cd5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#_1","title":"\u7b80\u4ecb","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>Generator \u51fd\u6570\u662f ES6 \u63d0\u4f9b\u7684\u4e00\u79cd\u5f02\u6b65\u7f16\u7a0b\u89e3\u51b3\u65b9\u6848\uff0c\u8bed\u6cd5\u884c\u4e3a\u4e0e\u4f20\u7edf\u51fd\u6570\u5b8c\u5168\u4e0d\u540c\u3002\u672c\u7ae0\u8be6\u7ec6\u4ecb\u7ecd Generator \u51fd\u6570\u7684\u8bed\u6cd5\u548c API\uff0c\u5b83\u7684\u5f02\u6b65\u7f16\u7a0b\u5e94\u7528\u8bf7\u770b\u300aGenerator \u51fd\u6570\u7684\u5f02\u6b65\u5e94\u7528\u300b\u4e00\u7ae0\u3002</p> <p>Generator \u51fd\u6570\u6709\u591a\u79cd\u7406\u89e3\u89d2\u5ea6\u3002\u8bed\u6cd5\u4e0a\uff0c\u9996\u5148\u53ef\u4ee5\u628a\u5b83\u7406\u89e3\u6210\uff0cGenerator \u51fd\u6570\u662f\u4e00\u4e2a\u72b6\u6001\u673a\uff0c\u5c01\u88c5\u4e86\u591a\u4e2a\u5185\u90e8\u72b6\u6001\u3002</p> <p>\u6267\u884c Generator \u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cGenerator \u51fd\u6570\u9664\u4e86\u72b6\u6001\u673a\uff0c\u8fd8\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u751f\u6210\u51fd\u6570\u3002\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f9d\u6b21\u904d\u5386 Generator \u51fd\u6570\u5185\u90e8\u7684\u6bcf\u4e00\u4e2a\u72b6\u6001\u3002</p> <p>\u5f62\u5f0f\u4e0a\uff0cGenerator \u51fd\u6570\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u7279\u5f81\u3002\u4e00\u662f\uff0c<code>function</code>\u5173\u952e\u5b57\u4e0e\u51fd\u6570\u540d\u4e4b\u95f4\u6709\u4e00\u4e2a\u661f\u53f7\uff1b\u4e8c\u662f\uff0c\u51fd\u6570\u4f53\u5185\u90e8\u4f7f\u7528<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u5b9a\u4e49\u4e0d\u540c\u7684\u5185\u90e8\u72b6\u6001\uff08<code>yield</code>\u5728\u82f1\u8bed\u91cc\u7684\u610f\u601d\u5c31\u662f\u201c\u4ea7\u51fa\u201d\uff09\u3002</p> <pre><code>function* helloWorldGenerator() {\n  yield 'hello';\n  yield 'world';\n  return 'ending';\n}\n\nvar hw = helloWorldGenerator();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a Generator \u51fd\u6570<code>helloWorldGenerator</code>\uff0c\u5b83\u5185\u90e8\u6709\u4e24\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\uff08<code>hello</code>\u548c<code>world</code>\uff09\uff0c\u5373\u8be5\u51fd\u6570\u6709\u4e09\u4e2a\u72b6\u6001\uff1ahello\uff0cworld \u548c return \u8bed\u53e5\uff08\u7ed3\u675f\u6267\u884c\uff09\u3002</p> <p>\u7136\u540e\uff0cGenerator \u51fd\u6570\u7684\u8c03\u7528\u65b9\u6cd5\u4e0e\u666e\u901a\u51fd\u6570\u4e00\u6837\uff0c\u4e5f\u662f\u5728\u51fd\u6570\u540d\u540e\u9762\u52a0\u4e0a\u4e00\u5bf9\u5706\u62ec\u53f7\u3002\u4e0d\u540c\u7684\u662f\uff0c\u8c03\u7528 Generator \u51fd\u6570\u540e\uff0c\u8be5\u51fd\u6570\u5e76\u4e0d\u6267\u884c\uff0c\u8fd4\u56de\u7684\u4e5f\u4e0d\u662f\u51fd\u6570\u8fd0\u884c\u7ed3\u679c\uff0c\u800c\u662f\u4e00\u4e2a\u6307\u5411\u5185\u90e8\u72b6\u6001\u7684\u6307\u9488\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u4e0a\u4e00\u7ae0\u4ecb\u7ecd\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff08Iterator Object\uff09\u3002</p> <p>\u4e0b\u4e00\u6b65\uff0c\u5fc5\u987b\u8c03\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u4f7f\u5f97\u6307\u9488\u79fb\u5411\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5185\u90e8\u6307\u9488\u5c31\u4ece\u51fd\u6570\u5934\u90e8\u6216\u4e0a\u4e00\u6b21\u505c\u4e0b\u6765\u7684\u5730\u65b9\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u9047\u5230\u4e0b\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\uff08\u6216<code>return</code>\u8bed\u53e5\uff09\u4e3a\u6b62\u3002\u6362\u8a00\u4e4b\uff0cGenerator \u51fd\u6570\u662f\u5206\u6bb5\u6267\u884c\u7684\uff0c<code>yield</code>\u8868\u8fbe\u5f0f\u662f\u6682\u505c\u6267\u884c\u7684\u6807\u8bb0\uff0c\u800c<code>next</code>\u65b9\u6cd5\u53ef\u4ee5\u6062\u590d\u6267\u884c\u3002</p> <pre><code>hw.next()\n// { value: 'hello', done: false }\n\nhw.next()\n// { value: 'world', done: false }\n\nhw.next()\n// { value: 'ending', done: true }\n\nhw.next()\n// { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e00\u5171\u8c03\u7528\u4e86\u56db\u6b21<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u7b2c\u4e00\u6b21\u8c03\u7528\uff0cGenerator \u51fd\u6570\u5f00\u59cb\u6267\u884c\uff0c\u76f4\u5230\u9047\u5230\u7b2c\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u4e3a\u6b62\u3002<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u7684<code>value</code>\u5c5e\u6027\u5c31\u662f\u5f53\u524d<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u503c<code>hello</code>\uff0c<code>done</code>\u5c5e\u6027\u7684\u503c<code>false</code>\uff0c\u8868\u793a\u904d\u5386\u8fd8\u6ca1\u6709\u7ed3\u675f\u3002</p> <p>\u7b2c\u4e8c\u6b21\u8c03\u7528\uff0cGenerator \u51fd\u6570\u4ece\u4e0a\u6b21<code>yield</code>\u8868\u8fbe\u5f0f\u505c\u4e0b\u7684\u5730\u65b9\uff0c\u4e00\u76f4\u6267\u884c\u5230\u4e0b\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u3002<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u5c31\u662f\u5f53\u524d<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u503c<code>world</code>\uff0c<code>done</code>\u5c5e\u6027\u7684\u503c<code>false</code>\uff0c\u8868\u793a\u904d\u5386\u8fd8\u6ca1\u6709\u7ed3\u675f\u3002</p> <p>\u7b2c\u4e09\u6b21\u8c03\u7528\uff0cGenerator \u51fd\u6570\u4ece\u4e0a\u6b21<code>yield</code>\u8868\u8fbe\u5f0f\u505c\u4e0b\u7684\u5730\u65b9\uff0c\u4e00\u76f4\u6267\u884c\u5230<code>return</code>\u8bed\u53e5\uff08\u5982\u679c\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u5c31\u6267\u884c\u5230\u51fd\u6570\u7ed3\u675f\uff09\u3002<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\uff0c\u5c31\u662f\u7d27\u8ddf\u5728<code>return</code>\u8bed\u53e5\u540e\u9762\u7684\u8868\u8fbe\u5f0f\u7684\u503c\uff08\u5982\u679c\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u5219<code>value</code>\u5c5e\u6027\u7684\u503c\u4e3a<code>undefined</code>\uff09\uff0c<code>done</code>\u5c5e\u6027\u7684\u503c<code>true</code>\uff0c\u8868\u793a\u904d\u5386\u5df2\u7ecf\u7ed3\u675f\u3002</p> <p>\u7b2c\u56db\u6b21\u8c03\u7528\uff0c\u6b64\u65f6 Generator \u51fd\u6570\u5df2\u7ecf\u8fd0\u884c\u5b8c\u6bd5\uff0c<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u4e3a<code>undefined</code>\uff0c<code>done</code>\u5c5e\u6027\u4e3a<code>true</code>\u3002\u4ee5\u540e\u518d\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u7684\u90fd\u662f\u8fd9\u4e2a\u503c\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u8c03\u7528 Generator \u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u4ee3\u8868 Generator \u51fd\u6570\u7684\u5185\u90e8\u6307\u9488\u3002\u4ee5\u540e\uff0c\u6bcf\u6b21\u8c03\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6709\u7740<code>value</code>\u548c<code>done</code>\u4e24\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61\u3002<code>value</code>\u5c5e\u6027\u8868\u793a\u5f53\u524d\u7684\u5185\u90e8\u72b6\u6001\u7684\u503c\uff0c\u662f<code>yield</code>\u8868\u8fbe\u5f0f\u540e\u9762\u90a3\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff1b<code>done</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u904d\u5386\u7ed3\u675f\u3002</p> <p>ES6 \u6ca1\u6709\u89c4\u5b9a\uff0c<code>function</code>\u5173\u952e\u5b57\u4e0e\u51fd\u6570\u540d\u4e4b\u95f4\u7684\u661f\u53f7\uff0c\u5199\u5728\u54ea\u4e2a\u4f4d\u7f6e\u3002\u8fd9\u5bfc\u81f4\u4e0b\u9762\u7684\u5199\u6cd5\u90fd\u80fd\u901a\u8fc7\u3002</p> <pre><code>function * foo(x, y) { \u00b7\u00b7\u00b7 }\nfunction *foo(x, y) { \u00b7\u00b7\u00b7 }\nfunction* foo(x, y) { \u00b7\u00b7\u00b7 }\nfunction*foo(x, y) { \u00b7\u00b7\u00b7 }\n</code></pre> <p>\u7531\u4e8e Generator \u51fd\u6570\u4ecd\u7136\u662f\u666e\u901a\u51fd\u6570\uff0c\u6240\u4ee5\u4e00\u822c\u7684\u5199\u6cd5\u662f\u4e0a\u9762\u7684\u7b2c\u4e09\u79cd\uff0c\u5373\u661f\u53f7\u7d27\u8ddf\u5728<code>function</code>\u5173\u952e\u5b57\u540e\u9762\u3002\u672c\u4e66\u4e5f\u91c7\u7528\u8fd9\u79cd\u5199\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#yield","title":"yield \u8868\u8fbe\u5f0f","text":"<p>\u7531\u4e8e Generator \u51fd\u6570\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u53ea\u6709\u8c03\u7528<code>next</code>\u65b9\u6cd5\u624d\u4f1a\u904d\u5386\u4e0b\u4e00\u4e2a\u5185\u90e8\u72b6\u6001\uff0c\u6240\u4ee5\u5176\u5b9e\u63d0\u4f9b\u4e86\u4e00\u79cd\u53ef\u4ee5\u6682\u505c\u6267\u884c\u7684\u51fd\u6570\u3002<code>yield</code>\u8868\u8fbe\u5f0f\u5c31\u662f\u6682\u505c\u6807\u5fd7\u3002</p> <p>\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\u7684\u8fd0\u884c\u903b\u8f91\u5982\u4e0b\u3002</p> <p>\uff081\uff09\u9047\u5230<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u5c31\u6682\u505c\u6267\u884c\u540e\u9762\u7684\u64cd\u4f5c\uff0c\u5e76\u5c06\u7d27\u8ddf\u5728<code>yield</code>\u540e\u9762\u7684\u90a3\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4f5c\u4e3a\u8fd4\u56de\u7684\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u503c\u3002</p> <p>\uff082\uff09\u4e0b\u4e00\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\uff0c\u518d\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff0c\u76f4\u5230\u9047\u5230\u4e0b\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u3002</p> <p>\uff083\uff09\u5982\u679c\u6ca1\u6709\u518d\u9047\u5230\u65b0\u7684<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u5c31\u4e00\u76f4\u8fd0\u884c\u5230\u51fd\u6570\u7ed3\u675f\uff0c\u76f4\u5230<code>return</code>\u8bed\u53e5\u4e3a\u6b62\uff0c\u5e76\u5c06<code>return</code>\u8bed\u53e5\u540e\u9762\u7684\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4f5c\u4e3a\u8fd4\u56de\u7684\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u503c\u3002</p> <p>\uff084\uff09\u5982\u679c\u8be5\u51fd\u6570\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u5219\u8fd4\u56de\u7684\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u503c\u4e3a<code>undefined</code>\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c<code>yield</code>\u8868\u8fbe\u5f0f\u540e\u9762\u7684\u8868\u8fbe\u5f0f\uff0c\u53ea\u6709\u5f53\u8c03\u7528<code>next</code>\u65b9\u6cd5\u3001\u5185\u90e8\u6307\u9488\u6307\u5411\u8be5\u8bed\u53e5\u65f6\u624d\u4f1a\u6267\u884c\uff0c\u56e0\u6b64\u7b49\u4e8e\u4e3a JavaScript \u63d0\u4f9b\u4e86\u624b\u52a8\u7684\u201c\u60f0\u6027\u6c42\u503c\u201d\uff08Lazy Evaluation\uff09\u7684\u8bed\u6cd5\u529f\u80fd\u3002</p> <pre><code>function* gen() {\n  yield  123 + 456;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>yield</code>\u540e\u9762\u7684\u8868\u8fbe\u5f0f<code>123 + 456</code>\uff0c\u4e0d\u4f1a\u7acb\u5373\u6c42\u503c\uff0c\u53ea\u4f1a\u5728<code>next</code>\u65b9\u6cd5\u5c06\u6307\u9488\u79fb\u5230\u8fd9\u4e00\u53e5\u65f6\uff0c\u624d\u4f1a\u6c42\u503c\u3002</p> <p><code>yield</code>\u8868\u8fbe\u5f0f\u4e0e<code>return</code>\u8bed\u53e5\u65e2\u6709\u76f8\u4f3c\u4e4b\u5904\uff0c\u4e5f\u6709\u533a\u522b\u3002\u76f8\u4f3c\u4e4b\u5904\u5728\u4e8e\uff0c\u90fd\u80fd\u8fd4\u56de\u7d27\u8ddf\u5728\u8bed\u53e5\u540e\u9762\u7684\u90a3\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u533a\u522b\u5728\u4e8e\u6bcf\u6b21\u9047\u5230<code>yield</code>\uff0c\u51fd\u6570\u6682\u505c\u6267\u884c\uff0c\u4e0b\u4e00\u6b21\u518d\u4ece\u8be5\u4f4d\u7f6e\u7ee7\u7eed\u5411\u540e\u6267\u884c\uff0c\u800c<code>return</code>\u8bed\u53e5\u4e0d\u5177\u5907\u4f4d\u7f6e\u8bb0\u5fc6\u7684\u529f\u80fd\u3002\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u53ea\u80fd\u6267\u884c\u4e00\u6b21\uff08\u6216\u8005\u8bf4\u4e00\u4e2a\uff09<code>return</code>\u8bed\u53e5\uff0c\u4f46\u662f\u53ef\u4ee5\u6267\u884c\u591a\u6b21\uff08\u6216\u8005\u8bf4\u591a\u4e2a\uff09<code>yield</code>\u8868\u8fbe\u5f0f\u3002\u6b63\u5e38\u51fd\u6570\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u56e0\u4e3a\u53ea\u80fd\u6267\u884c\u4e00\u6b21<code>return</code>\uff1bGenerator \u51fd\u6570\u53ef\u4ee5\u8fd4\u56de\u4e00\u7cfb\u5217\u7684\u503c\uff0c\u56e0\u4e3a\u53ef\u4ee5\u6709\u4efb\u610f\u591a\u4e2a<code>yield</code>\u3002\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\uff0c\u4e5f\u53ef\u4ee5\u8bf4 Generator \u751f\u6210\u4e86\u4e00\u7cfb\u5217\u7684\u503c\uff0c\u8fd9\u4e5f\u5c31\u662f\u5b83\u7684\u540d\u79f0\u7684\u6765\u5386\uff08\u82f1\u8bed\u4e2d\uff0cgenerator \u8fd9\u4e2a\u8bcd\u662f\u201c\u751f\u6210\u5668\u201d\u7684\u610f\u601d\uff09\u3002</p> <p>Generator \u51fd\u6570\u53ef\u4ee5\u4e0d\u7528<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u8fd9\u65f6\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u5355\u7eaf\u7684\u6682\u7f13\u6267\u884c\u51fd\u6570\u3002</p> <pre><code>function* f() {\n  console.log('\u6267\u884c\u4e86\uff01')\n}\n\nvar generator = f();\n\nsetTimeout(function () {\n  generator.next()\n}, 2000);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u5982\u679c\u662f\u666e\u901a\u51fd\u6570\uff0c\u5728\u4e3a\u53d8\u91cf<code>generator</code>\u8d4b\u503c\u65f6\u5c31\u4f1a\u6267\u884c\u3002\u4f46\u662f\uff0c\u51fd\u6570<code>f</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u5c31\u53d8\u6210\u53ea\u6709\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\uff0c\u51fd\u6570<code>f</code>\u624d\u4f1a\u6267\u884c\u3002</p> <p>\u53e6\u5916\u9700\u8981\u6ce8\u610f\uff0c<code>yield</code>\u8868\u8fbe\u5f0f\u53ea\u80fd\u7528\u5728 Generator \u51fd\u6570\u91cc\u9762\uff0c\u7528\u5728\u5176\u4ed6\u5730\u65b9\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>(function (){\n  yield 1;\n})()\n// SyntaxError: Unexpected number\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u4e2d\u4f7f\u7528<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u7ed3\u679c\u4ea7\u751f\u4e00\u4e2a\u53e5\u6cd5\u9519\u8bef\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var arr = [1, [[2, 3], 4], [5, 6]];\n\nvar flat = function* (a) {\n  a.forEach(function (item) {\n    if (typeof item !== 'number') {\n      yield* flat(item);\n    } else {\n      yield item;\n    }\n  });\n};\n\nfor (var f of flat(arr)){\n  console.log(f);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u4f1a\u4ea7\u751f\u53e5\u6cd5\u9519\u8bef\uff0c\u56e0\u4e3a<code>forEach</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u4f46\u662f\u5728\u91cc\u9762\u4f7f\u7528\u4e86<code>yield</code>\u8868\u8fbe\u5f0f\uff08\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u8fd8\u4f7f\u7528\u4e86<code>yield*</code>\u8868\u8fbe\u5f0f\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u89c1\u540e\u6587\uff09\u3002\u4e00\u79cd\u4fee\u6539\u65b9\u6cd5\u662f\u6539\u7528<code>for</code>\u5faa\u73af\u3002</p> <pre><code>var arr = [1, [[2, 3], 4], [5, 6]];\n\nvar flat = function* (a) {\n  var length = a.length;\n  for (var i = 0; i &lt; length; i++) {\n    var item = a[i];\n    if (typeof item !== 'number') {\n      yield* flat(item);\n    } else {\n      yield item;\n    }\n  }\n};\n\nfor (var f of flat(arr)) {\n  console.log(f);\n}\n// 1, 2, 3, 4, 5, 6\n</code></pre> <p>\u53e6\u5916\uff0c<code>yield</code>\u8868\u8fbe\u5f0f\u5982\u679c\u7528\u5728\u53e6\u4e00\u4e2a\u8868\u8fbe\u5f0f\u4e4b\u4e2d\uff0c\u5fc5\u987b\u653e\u5728\u5706\u62ec\u53f7\u91cc\u9762\u3002</p> <pre><code>function* demo() {\n  console.log('Hello' + yield); // SyntaxError\n  console.log('Hello' + yield 123); // SyntaxError\n\n  console.log('Hello' + (yield)); // OK\n  console.log('Hello' + (yield 123)); // OK\n}\n</code></pre> <p><code>yield</code>\u8868\u8fbe\u5f0f\u7528\u4f5c\u51fd\u6570\u53c2\u6570\u6216\u653e\u5728\u8d4b\u503c\u8868\u8fbe\u5f0f\u7684\u53f3\u8fb9\uff0c\u53ef\u4ee5\u4e0d\u52a0\u62ec\u53f7\u3002</p> <pre><code>function* demo() {\n  foo(yield 'a', yield 'b'); // OK\n  let input = yield; // OK\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#iterator","title":"\u4e0e Iterator \u63a5\u53e3\u7684\u5173\u7cfb","text":"<p>\u4e0a\u4e00\u7ae0\u8bf4\u8fc7\uff0c\u4efb\u610f\u4e00\u4e2a\u5bf9\u8c61\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\uff0c\u7b49\u4e8e\u8be5\u5bf9\u8c61\u7684\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff0c\u8c03\u7528\u8be5\u51fd\u6570\u4f1a\u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u7531\u4e8e Generator \u51fd\u6570\u5c31\u662f\u904d\u5386\u5668\u751f\u6210\u51fd\u6570\uff0c\u56e0\u6b64\u53ef\u4ee5\u628a Generator \u8d4b\u503c\u7ed9\u5bf9\u8c61\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u4ece\u800c\u4f7f\u5f97\u8be5\u5bf9\u8c61\u5177\u6709 Iterator \u63a5\u53e3\u3002</p> <pre><code>var myIterable = {};\nmyIterable[Symbol.iterator] = function* () {\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\n[...myIterable] // [1, 2, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u8d4b\u503c\u7ed9<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u4ece\u800c\u4f7f\u5f97<code>myIterable</code>\u5bf9\u8c61\u5177\u6709\u4e86 Iterator \u63a5\u53e3\uff0c\u53ef\u4ee5\u88ab<code>...</code>\u8fd0\u7b97\u7b26\u904d\u5386\u4e86\u3002</p> <p>Generator \u51fd\u6570\u6267\u884c\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u672c\u8eab\u4e5f\u5177\u6709<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u6267\u884c\u540e\u8fd4\u56de\u81ea\u8eab\u3002</p> <pre><code>function* gen(){\n  // some code\n}\n\nvar g = gen();\n\ng[Symbol.iterator]() === g\n// true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>gen</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u8c03\u7528\u5b83\u4f1a\u751f\u6210\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61<code>g</code>\u3002\u5b83\u7684<code>Symbol.iterator</code>\u5c5e\u6027\uff0c\u4e5f\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u751f\u6210\u51fd\u6570\uff0c\u6267\u884c\u540e\u8fd4\u56de\u5b83\u81ea\u5df1\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#next","title":"next \u65b9\u6cd5\u7684\u53c2\u6570","text":"<p><code>yield</code>\u8868\u8fbe\u5f0f\u672c\u8eab\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u6216\u8005\u8bf4\u603b\u662f\u8fd4\u56de<code>undefined</code>\u3002<code>next</code>\u65b9\u6cd5\u53ef\u4ee5\u5e26\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u5c31\u4f1a\u88ab\u5f53\u4f5c\u4e0a\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>function* f() {\n  for(var i = 0; true; i++) {\n    var reset = yield i;\n    if(reset) { i = -1; }\n  }\n}\n\nvar g = f();\n\ng.next() // { value: 0, done: false }\ng.next() // { value: 1, done: false }\ng.next(true) // { value: 0, done: false }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u4ee5\u65e0\u9650\u8fd0\u884c\u7684 Generator \u51fd\u6570<code>f</code>\uff0c\u5982\u679c<code>next</code>\u65b9\u6cd5\u6ca1\u6709\u53c2\u6570\uff0c\u6bcf\u6b21\u8fd0\u884c\u5230<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u53d8\u91cf<code>reset</code>\u7684\u503c\u603b\u662f<code>undefined</code>\u3002\u5f53<code>next</code>\u65b9\u6cd5\u5e26\u4e00\u4e2a\u53c2\u6570<code>true</code>\u65f6\uff0c\u53d8\u91cf<code>reset</code>\u5c31\u88ab\u91cd\u7f6e\u4e3a\u8fd9\u4e2a\u53c2\u6570\uff08\u5373<code>true</code>\uff09\uff0c\u56e0\u6b64<code>i</code>\u4f1a\u7b49\u4e8e<code>-1</code>\uff0c\u4e0b\u4e00\u8f6e\u5faa\u73af\u5c31\u4f1a\u4ece<code>-1</code>\u5f00\u59cb\u9012\u589e\u3002</p> <p>\u8fd9\u4e2a\u529f\u80fd\u6709\u5f88\u91cd\u8981\u7684\u8bed\u6cd5\u610f\u4e49\u3002Generator \u51fd\u6570\u4ece\u6682\u505c\u72b6\u6001\u5230\u6062\u590d\u8fd0\u884c\uff0c\u5b83\u7684\u4e0a\u4e0b\u6587\u72b6\u6001\uff08context\uff09\u662f\u4e0d\u53d8\u7684\u3002\u901a\u8fc7<code>next</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5c31\u6709\u529e\u6cd5\u5728 Generator \u51fd\u6570\u5f00\u59cb\u8fd0\u884c\u4e4b\u540e\uff0c\u7ee7\u7eed\u5411\u51fd\u6570\u4f53\u5185\u90e8\u6ce8\u5165\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u5728 Generator \u51fd\u6570\u8fd0\u884c\u7684\u4e0d\u540c\u9636\u6bb5\uff0c\u4ece\u5916\u90e8\u5411\u5185\u90e8\u6ce8\u5165\u4e0d\u540c\u7684\u503c\uff0c\u4ece\u800c\u8c03\u6574\u51fd\u6570\u884c\u4e3a\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function* foo(x) {\n  var y = 2 * (yield (x + 1));\n  var z = yield (y / 3);\n  return (x + y + z);\n}\n\nvar a = foo(5);\na.next() // Object{value:6, done:false}\na.next() // Object{value:NaN, done:false}\na.next() // Object{value:NaN, done:true}\n\nvar b = foo(5);\nb.next() // { value:6, done:false }\nb.next(12) // { value:8, done:false }\nb.next(13) // { value:42, done:true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u6b21\u8fd0\u884c<code>next</code>\u65b9\u6cd5\u7684\u65f6\u5019\u4e0d\u5e26\u53c2\u6570\uff0c\u5bfc\u81f4 y \u7684\u503c\u7b49\u4e8e<code>2 * undefined</code>\uff08\u5373<code>NaN</code>\uff09\uff0c\u9664\u4ee5 3 \u4ee5\u540e\u8fd8\u662f<code>NaN</code>\uff0c\u56e0\u6b64\u8fd4\u56de\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u4e5f\u7b49\u4e8e<code>NaN</code>\u3002\u7b2c\u4e09\u6b21\u8fd0\u884c<code>Next</code>\u65b9\u6cd5\u7684\u65f6\u5019\u4e0d\u5e26\u53c2\u6570\uff0c\u6240\u4ee5<code>z</code>\u7b49\u4e8e<code>undefined</code>\uff0c\u8fd4\u56de\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\u7b49\u4e8e<code>5 + NaN + undefined</code>\uff0c\u5373<code>NaN</code>\u3002</p> <p>\u5982\u679c\u5411<code>next</code>\u65b9\u6cd5\u63d0\u4f9b\u53c2\u6570\uff0c\u8fd4\u56de\u7ed3\u679c\u5c31\u5b8c\u5168\u4e0d\u4e00\u6837\u4e86\u3002\u4e0a\u9762\u4ee3\u7801\u7b2c\u4e00\u6b21\u8c03\u7528<code>b</code>\u7684<code>next</code>\u65b9\u6cd5\u65f6\uff0c\u8fd4\u56de<code>x+1</code>\u7684\u503c<code>6</code>\uff1b\u7b2c\u4e8c\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5c06\u4e0a\u4e00\u6b21<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u503c\u8bbe\u4e3a<code>12</code>\uff0c\u56e0\u6b64<code>y</code>\u7b49\u4e8e<code>24</code>\uff0c\u8fd4\u56de<code>y / 3</code>\u7684\u503c<code>8</code>\uff1b\u7b2c\u4e09\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5c06\u4e0a\u4e00\u6b21<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u503c\u8bbe\u4e3a<code>13</code>\uff0c\u56e0\u6b64<code>z</code>\u7b49\u4e8e<code>13</code>\uff0c\u8fd9\u65f6<code>x</code>\u7b49\u4e8e<code>5</code>\uff0c<code>y</code>\u7b49\u4e8e<code>24</code>\uff0c\u6240\u4ee5<code>return</code>\u8bed\u53e5\u7684\u503c\u7b49\u4e8e<code>42</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u7531\u4e8e<code>next</code>\u65b9\u6cd5\u7684\u53c2\u6570\u8868\u793a\u4e0a\u4e00\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\uff0c\u6240\u4ee5\u5728\u7b2c\u4e00\u6b21\u4f7f\u7528<code>next</code>\u65b9\u6cd5\u65f6\uff0c\u4f20\u9012\u53c2\u6570\u662f\u65e0\u6548\u7684\u3002V8 \u5f15\u64ce\u76f4\u63a5\u5ffd\u7565\u7b2c\u4e00\u6b21\u4f7f\u7528<code>next</code>\u65b9\u6cd5\u65f6\u7684\u53c2\u6570\uff0c\u53ea\u6709\u4ece\u7b2c\u4e8c\u6b21\u4f7f\u7528<code>next</code>\u65b9\u6cd5\u5f00\u59cb\uff0c\u53c2\u6570\u624d\u662f\u6709\u6548\u7684\u3002\u4ece\u8bed\u4e49\u4e0a\u8bb2\uff0c\u7b2c\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u7528\u6765\u542f\u52a8\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u6240\u4ee5\u4e0d\u7528\u5e26\u6709\u53c2\u6570\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u901a\u8fc7<code>next</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5411 Generator \u51fd\u6570\u5185\u90e8\u8f93\u5165\u503c\u7684\u4f8b\u5b50\u3002</p> <pre><code>function* dataConsumer() {\n  console.log('Started');\n  console.log(`1. ${yield}`);\n  console.log(`2. ${yield}`);\n  return 'result';\n}\n\nlet genObj = dataConsumer();\ngenObj.next();\n// Started\ngenObj.next('a')\n// 1. a\ngenObj.next('b')\n// 2. b\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u5f88\u76f4\u89c2\u7684\u4f8b\u5b50\uff0c\u6bcf\u6b21\u901a\u8fc7<code>next</code>\u65b9\u6cd5\u5411 Generator \u51fd\u6570\u8f93\u5165\u503c\uff0c\u7136\u540e\u6253\u5370\u51fa\u6765\u3002</p> <p>\u5982\u679c\u60f3\u8981\u7b2c\u4e00\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\uff0c\u5c31\u80fd\u591f\u8f93\u5165\u503c\uff0c\u53ef\u4ee5\u5728 Generator \u51fd\u6570\u5916\u9762\u518d\u5305\u4e00\u5c42\u3002</p> <pre><code>function wrapper(generatorFunction) {\n  return function (...args) {\n    let generatorObject = generatorFunction(...args);\n    generatorObject.next();\n    return generatorObject;\n  };\n}\n\nconst wrapped = wrapper(function* () {\n  console.log(`First input: ${yield}`);\n  return 'DONE';\n});\n\nwrapped().next('hello!')\n// First input: hello!\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u5982\u679c\u4e0d\u7528<code>wrapper</code>\u5148\u5305\u4e00\u5c42\uff0c\u662f\u65e0\u6cd5\u7b2c\u4e00\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5c31\u8f93\u5165\u53c2\u6570\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#forof","title":"for...of \u5faa\u73af","text":"<p><code>for...of</code>\u5faa\u73af\u53ef\u4ee5\u81ea\u52a8\u904d\u5386 Generator \u51fd\u6570\u8fd0\u884c\u65f6\u751f\u6210\u7684<code>Iterator</code>\u5bf9\u8c61\uff0c\u4e14\u6b64\u65f6\u4e0d\u518d\u9700\u8981\u8c03\u7528<code>next</code>\u65b9\u6cd5\u3002</p> <pre><code>function* foo() {\n  yield 1;\n  yield 2;\n  yield 3;\n  yield 4;\n  yield 5;\n  return 6;\n}\n\nfor (let v of foo()) {\n  console.log(v);\n}\n// 1 2 3 4 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u4f9d\u6b21\u663e\u793a 5 \u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0c\u4e00\u65e6<code>next</code>\u65b9\u6cd5\u7684\u8fd4\u56de\u5bf9\u8c61\u7684<code>done</code>\u5c5e\u6027\u4e3a<code>true</code>\uff0c<code>for...of</code>\u5faa\u73af\u5c31\u4f1a\u4e2d\u6b62\uff0c\u4e14\u4e0d\u5305\u542b\u8be5\u8fd4\u56de\u5bf9\u8c61\uff0c\u6240\u4ee5\u4e0a\u9762\u4ee3\u7801\u7684<code>return</code>\u8bed\u53e5\u8fd4\u56de\u7684<code>6</code>\uff0c\u4e0d\u5305\u62ec\u5728<code>for...of</code>\u5faa\u73af\u4e4b\u4e2d\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5229\u7528 Generator \u51fd\u6570\u548c<code>for...of</code>\u5faa\u73af\uff0c\u5b9e\u73b0\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u4f8b\u5b50\u3002</p> <pre><code>function* fibonacci() {\n  let [prev, curr] = [0, 1];\n  for (;;) {\n    yield curr;\n    [prev, curr] = [curr, prev + curr];\n  }\n}\n\nfor (let n of fibonacci()) {\n  if (n &gt; 1000) break;\n  console.log(n);\n}\n</code></pre> <p>\u4ece\u4e0a\u9762\u4ee3\u7801\u53ef\u89c1\uff0c\u4f7f\u7528<code>for...of</code>\u8bed\u53e5\u65f6\u4e0d\u9700\u8981\u4f7f\u7528<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u5229\u7528<code>for...of</code>\u5faa\u73af\uff0c\u53ef\u4ee5\u5199\u51fa\u904d\u5386\u4efb\u610f\u5bf9\u8c61\uff08object\uff09\u7684\u65b9\u6cd5\u3002\u539f\u751f\u7684 JavaScript \u5bf9\u8c61\u6ca1\u6709\u904d\u5386\u63a5\u53e3\uff0c\u65e0\u6cd5\u4f7f\u7528<code>for...of</code>\u5faa\u73af\uff0c\u901a\u8fc7 Generator \u51fd\u6570\u4e3a\u5b83\u52a0\u4e0a\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u7528\u4e86\u3002</p> <pre><code>function* objectEntries(obj) {\n  let propKeys = Reflect.ownKeys(obj);\n\n  for (let propKey of propKeys) {\n    yield [propKey, obj[propKey]];\n  }\n}\n\nlet jane = { first: 'Jane', last: 'Doe' };\n\nfor (let [key, value] of objectEntries(jane)) {\n  console.log(`${key}: ${value}`);\n}\n// first: Jane\n// last: Doe\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>jane</code>\u539f\u751f\u4e0d\u5177\u5907 Iterator \u63a5\u53e3\uff0c\u65e0\u6cd5\u7528<code>for...of</code>\u904d\u5386\u3002\u8fd9\u65f6\uff0c\u6211\u4eec\u901a\u8fc7 Generator \u51fd\u6570<code>objectEntries</code>\u4e3a\u5b83\u52a0\u4e0a\u904d\u5386\u5668\u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u904d\u5386\u4e86\u3002\u52a0\u4e0a\u904d\u5386\u5668\u63a5\u53e3\u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u662f\uff0c\u5c06 Generator \u51fd\u6570\u52a0\u5230\u5bf9\u8c61\u7684<code>Symbol.iterator</code>\u5c5e\u6027\u4e0a\u9762\u3002</p> <pre><code>function* objectEntries() {\n  let propKeys = Object.keys(this);\n\n  for (let propKey of propKeys) {\n    yield [propKey, this[propKey]];\n  }\n}\n\nlet jane = { first: 'Jane', last: 'Doe' };\n\njane[Symbol.iterator] = objectEntries;\n\nfor (let [key, value] of jane) {\n  console.log(`${key}: ${value}`);\n}\n// first: Jane\n// last: Doe\n</code></pre> <p>\u9664\u4e86<code>for...of</code>\u5faa\u73af\u4ee5\u5916\uff0c\u6269\u5c55\u8fd0\u7b97\u7b26\uff08<code>...</code>\uff09\u3001\u89e3\u6784\u8d4b\u503c\u548c<code>Array.from</code>\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\u7684\uff0c\u90fd\u662f\u904d\u5386\u5668\u63a5\u53e3\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5b83\u4eec\u90fd\u53ef\u4ee5\u5c06 Generator \u51fd\u6570\u8fd4\u56de\u7684 Iterator \u5bf9\u8c61\uff0c\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>function* numbers () {\n  yield 1\n  yield 2\n  return 3\n  yield 4\n}\n\n// \u6269\u5c55\u8fd0\u7b97\u7b26\n[...numbers()] // [1, 2]\n\n// Array.from \u65b9\u6cd5\nArray.from(numbers()) // [1, 2]\n\n// \u89e3\u6784\u8d4b\u503c\nlet [x, y] = numbers();\nx // 1\ny // 2\n\n// for...of \u5faa\u73af\nfor (let n of numbers()) {\n  console.log(n)\n}\n// 1\n// 2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generatorprototypethrow","title":"Generator.prototype.throw()","text":"<p>Generator \u51fd\u6570\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u90fd\u6709\u4e00\u4e2a<code>throw</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4f53\u5916\u629b\u51fa\u9519\u8bef\uff0c\u7136\u540e\u5728 Generator \u51fd\u6570\u4f53\u5185\u6355\u83b7\u3002</p> <pre><code>var g = function* () {\n  try {\n    yield;\n  } catch (e) {\n    console.log('\u5185\u90e8\u6355\u83b7', e);\n  }\n};\n\nvar i = g();\ni.next();\n\ntry {\n  i.throw('a');\n  i.throw('b');\n} catch (e) {\n  console.log('\u5916\u90e8\u6355\u83b7', e);\n}\n// \u5185\u90e8\u6355\u83b7 a\n// \u5916\u90e8\u6355\u83b7 b\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u904d\u5386\u5668\u5bf9\u8c61<code>i</code>\u8fde\u7eed\u629b\u51fa\u4e24\u4e2a\u9519\u8bef\u3002\u7b2c\u4e00\u4e2a\u9519\u8bef\u88ab Generator \u51fd\u6570\u4f53\u5185\u7684<code>catch</code>\u8bed\u53e5\u6355\u83b7\u3002<code>i</code>\u7b2c\u4e8c\u6b21\u629b\u51fa\u9519\u8bef\uff0c\u7531\u4e8e Generator \u51fd\u6570\u5185\u90e8\u7684<code>catch</code>\u8bed\u53e5\u5df2\u7ecf\u6267\u884c\u8fc7\u4e86\uff0c\u4e0d\u4f1a\u518d\u6355\u6349\u5230\u8fd9\u4e2a\u9519\u8bef\u4e86\uff0c\u6240\u4ee5\u8fd9\u4e2a\u9519\u8bef\u5c31\u88ab\u629b\u51fa\u4e86 Generator \u51fd\u6570\u4f53\uff0c\u88ab\u51fd\u6570\u4f53\u5916\u7684<code>catch</code>\u8bed\u53e5\u6355\u83b7\u3002</p> <p><code>throw</code>\u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u4f1a\u88ab<code>catch</code>\u8bed\u53e5\u63a5\u6536\uff0c\u5efa\u8bae\u629b\u51fa<code>Error</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002</p> <pre><code>var g = function* () {\n  try {\n    yield;\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nvar i = g();\ni.next();\ni.throw(new Error('\u51fa\u9519\u4e86\uff01'));\n// Error: \u51fa\u9519\u4e86\uff01(\u2026)\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0d\u8981\u6df7\u6dc6\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>throw</code>\u65b9\u6cd5\u548c\u5168\u5c40\u7684<code>throw</code>\u547d\u4ee4\u3002\u4e0a\u9762\u4ee3\u7801\u7684\u9519\u8bef\uff0c\u662f\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\uff0c\u800c\u4e0d\u662f\u7528<code>throw</code>\u547d\u4ee4\u629b\u51fa\u7684\u3002\u540e\u8005\u53ea\u80fd\u88ab\u51fd\u6570\u4f53\u5916\u7684<code>catch</code>\u8bed\u53e5\u6355\u83b7\u3002</p> <pre><code>var g = function* () {\n  while (true) {\n    try {\n      yield;\n    } catch (e) {\n      if (e != 'a') throw e;\n      console.log('\u5185\u90e8\u6355\u83b7', e);\n    }\n  }\n};\n\nvar i = g();\ni.next();\n\ntry {\n  throw new Error('a');\n  throw new Error('b');\n} catch (e) {\n  console.log('\u5916\u90e8\u6355\u83b7', e);\n}\n// \u5916\u90e8\u6355\u83b7 [Error: a]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u6240\u4ee5\u53ea\u6355\u83b7\u4e86<code>a</code>\uff0c\u662f\u56e0\u4e3a\u51fd\u6570\u4f53\u5916\u7684<code>catch</code>\u8bed\u53e5\u5757\uff0c\u6355\u83b7\u4e86\u629b\u51fa\u7684<code>a</code>\u9519\u8bef\u4ee5\u540e\uff0c\u5c31\u4e0d\u4f1a\u518d\u7ee7\u7eed<code>try</code>\u4ee3\u7801\u5757\u91cc\u9762\u5269\u4f59\u7684\u8bed\u53e5\u4e86\u3002</p> <p>\u5982\u679c Generator \u51fd\u6570\u5185\u90e8\u6ca1\u6709\u90e8\u7f72<code>try...catch</code>\u4ee3\u7801\u5757\uff0c\u90a3\u4e48<code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\uff0c\u5c06\u88ab\u5916\u90e8<code>try...catch</code>\u4ee3\u7801\u5757\u6355\u83b7\u3002</p> <pre><code>var g = function* () {\n  while (true) {\n    yield;\n    console.log('\u5185\u90e8\u6355\u83b7', e);\n  }\n};\n\nvar i = g();\ni.next();\n\ntry {\n  i.throw('a');\n  i.throw('b');\n} catch (e) {\n  console.log('\u5916\u90e8\u6355\u83b7', e);\n}\n// \u5916\u90e8\u6355\u83b7 a\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570<code>g</code>\u5185\u90e8\u6ca1\u6709\u90e8\u7f72<code>try...catch</code>\u4ee3\u7801\u5757\uff0c\u6240\u4ee5\u629b\u51fa\u7684\u9519\u8bef\u76f4\u63a5\u88ab\u5916\u90e8<code>catch</code>\u4ee3\u7801\u5757\u6355\u83b7\u3002</p> <p>\u5982\u679c Generator \u51fd\u6570\u5185\u90e8\u548c\u5916\u90e8\uff0c\u90fd\u6ca1\u6709\u90e8\u7f72<code>try...catch</code>\u4ee3\u7801\u5757\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c06\u62a5\u9519\uff0c\u76f4\u63a5\u4e2d\u65ad\u6267\u884c\u3002</p> <pre><code>var gen = function* gen(){\n  yield console.log('hello');\n  yield console.log('world');\n}\n\nvar g = gen();\ng.next();\ng.throw();\n// hello\n// Uncaught undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g.throw</code>\u629b\u51fa\u9519\u8bef\u4ee5\u540e\uff0c\u6ca1\u6709\u4efb\u4f55<code>try...catch</code>\u4ee3\u7801\u5757\u53ef\u4ee5\u6355\u83b7\u8fd9\u4e2a\u9519\u8bef\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u62a5\u9519\uff0c\u4e2d\u65ad\u6267\u884c\u3002</p> <p><code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\u8981\u88ab\u5185\u90e8\u6355\u83b7\uff0c\u524d\u63d0\u662f\u5fc5\u987b\u81f3\u5c11\u6267\u884c\u8fc7\u4e00\u6b21<code>next</code>\u65b9\u6cd5\u3002</p> <pre><code>function* gen() {\n  try {\n    yield 1;\n  } catch (e) {\n    console.log('\u5185\u90e8\u6355\u83b7');\n  }\n}\n\nvar g = gen();\ng.throw(1);\n// Uncaught 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g.throw(1)</code>\u6267\u884c\u65f6\uff0c<code>next</code>\u65b9\u6cd5\u4e00\u6b21\u90fd\u6ca1\u6709\u6267\u884c\u8fc7\u3002\u8fd9\u65f6\uff0c\u629b\u51fa\u7684\u9519\u8bef\u4e0d\u4f1a\u88ab\u5185\u90e8\u6355\u83b7\uff0c\u800c\u662f\u76f4\u63a5\u5728\u5916\u90e8\u629b\u51fa\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u51fa\u9519\u3002\u8fd9\u79cd\u884c\u4e3a\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u7b2c\u4e00\u6b21\u6267\u884c<code>next</code>\u65b9\u6cd5\uff0c\u7b49\u540c\u4e8e\u542f\u52a8\u6267\u884c Generator \u51fd\u6570\u7684\u5185\u90e8\u4ee3\u7801\uff0c\u5426\u5219 Generator \u51fd\u6570\u8fd8\u6ca1\u6709\u5f00\u59cb\u6267\u884c\uff0c\u8fd9\u65f6<code>throw</code>\u65b9\u6cd5\u629b\u9519\u53ea\u53ef\u80fd\u629b\u51fa\u5728\u51fd\u6570\u5916\u90e8\u3002</p> <p><code>throw</code>\u65b9\u6cd5\u88ab\u5185\u90e8\u6355\u83b7\u4ee5\u540e\uff0c\u4f1a\u9644\u5e26\u6267\u884c\u5230\u4e0b\u4e00\u6761<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7b49\u540c\u4e8e\u6267\u884c\u4e00\u6b21<code>next</code>\u65b9\u6cd5\u3002</p> <pre><code>var gen = function* gen(){\n  try {\n    yield 1;\n  } catch (e) {\n    yield 2;\n  }\n  yield 3;\n}\n\nvar g = gen();\ng.next() // { value:1, done:false }\ng.throw() // { value:2, done:false }\ng.next() // { value:3, done:false }\ng.next() // { value:undefined, done:true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g.throw</code>\u65b9\u6cd5\u88ab\u5185\u90e8\u6355\u83b7\u4ee5\u540e\uff0c\u7b49\u540c\u4e8e\u6267\u884c\u4e86\u4e00\u6b21<code>next</code>\u65b9\u6cd5\uff0c\u6240\u4ee5\u8fd4\u56de<code>{ value:2, done:false }</code>\u3002\u53e6\u5916\uff0c\u4e5f\u53ef\u4ee5\u770b\u5230\uff0c\u53ea\u8981 Generator \u51fd\u6570\u5185\u90e8\u90e8\u7f72\u4e86<code>try...catch</code>\u4ee3\u7801\u5757\uff0c\u90a3\u4e48\u904d\u5386\u5668\u7684<code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\uff0c\u4e0d\u5f71\u54cd\u4e0b\u4e00\u6b21\u904d\u5386\u3002</p> <p>\u53e6\u5916\uff0c<code>throw</code>\u547d\u4ee4\u4e0e<code>g.throw</code>\u65b9\u6cd5\u662f\u65e0\u5173\u7684\uff0c\u4e24\u8005\u4e92\u4e0d\u5f71\u54cd\u3002</p> <pre><code>var gen = function* gen(){\n  yield console.log('hello');\n  yield console.log('world');\n}\n\nvar g = gen();\ng.next();\n\ntry {\n  throw new Error();\n} catch (e) {\n  g.next();\n}\n// hello\n// world\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>throw</code>\u547d\u4ee4\u629b\u51fa\u7684\u9519\u8bef\u4e0d\u4f1a\u5f71\u54cd\u5230\u904d\u5386\u5668\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u4e24\u6b21\u6267\u884c<code>next</code>\u65b9\u6cd5\uff0c\u90fd\u8fdb\u884c\u4e86\u6b63\u786e\u7684\u64cd\u4f5c\u3002</p> <p>\u8fd9\u79cd\u51fd\u6570\u4f53\u5185\u6355\u83b7\u9519\u8bef\u7684\u673a\u5236\uff0c\u5927\u5927\u65b9\u4fbf\u4e86\u5bf9\u9519\u8bef\u7684\u5904\u7406\u3002\u591a\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u53ea\u7528\u4e00\u4e2a<code>try...catch</code>\u4ee3\u7801\u5757\u6765\u6355\u83b7\u9519\u8bef\u3002\u5982\u679c\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u7684\u5199\u6cd5\uff0c\u60f3\u8981\u6355\u83b7\u591a\u4e2a\u9519\u8bef\uff0c\u5c31\u4e0d\u5f97\u4e0d\u4e3a\u6bcf\u4e2a\u51fd\u6570\u5185\u90e8\u5199\u4e00\u4e2a\u9519\u8bef\u5904\u7406\u8bed\u53e5\uff0c\u73b0\u5728\u53ea\u5728 Generator \u51fd\u6570\u5185\u90e8\u5199\u4e00\u6b21<code>catch</code>\u8bed\u53e5\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>Generator \u51fd\u6570\u4f53\u5916\u629b\u51fa\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4f53\u5185\u6355\u83b7\uff1b\u53cd\u8fc7\u6765\uff0cGenerator \u51fd\u6570\u4f53\u5185\u629b\u51fa\u7684\u9519\u8bef\uff0c\u4e5f\u53ef\u4ee5\u88ab\u51fd\u6570\u4f53\u5916\u7684<code>catch</code>\u6355\u83b7\u3002</p> <pre><code>function* foo() {\n  var x = yield 3;\n  var y = x.toUpperCase();\n  yield y;\n}\n\nvar it = foo();\n\nit.next(); // { value:3, done:false }\n\ntry {\n  it.next(42);\n} catch (err) {\n  console.log(err);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>next</code>\u65b9\u6cd5\u5411\u51fd\u6570\u4f53\u5185\u4f20\u5165\u4e00\u4e2a\u53c2\u6570 42\uff0c\u6570\u503c\u662f\u6ca1\u6709<code>toUpperCase</code>\u65b9\u6cd5\u7684\uff0c\u6240\u4ee5\u4f1a\u629b\u51fa\u4e00\u4e2a TypeError \u9519\u8bef\uff0c\u88ab\u51fd\u6570\u4f53\u5916\u7684<code>catch</code>\u6355\u83b7\u3002</p> <p>\u4e00\u65e6 Generator \u6267\u884c\u8fc7\u7a0b\u4e2d\u629b\u51fa\u9519\u8bef\uff0c\u4e14\u6ca1\u6709\u88ab\u5185\u90e8\u6355\u83b7\uff0c\u5c31\u4e0d\u4f1a\u518d\u6267\u884c\u4e0b\u53bb\u4e86\u3002\u5982\u679c\u6b64\u540e\u8fd8\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5c06\u8fd4\u56de\u4e00\u4e2a<code>value</code>\u5c5e\u6027\u7b49\u4e8e<code>undefined</code>\u3001<code>done</code>\u5c5e\u6027\u7b49\u4e8e<code>true</code>\u7684\u5bf9\u8c61\uff0c\u5373 JavaScript \u5f15\u64ce\u8ba4\u4e3a\u8fd9\u4e2a Generator \u5df2\u7ecf\u8fd0\u884c\u7ed3\u675f\u4e86\u3002</p> <pre><code>function* g() {\n  yield 1;\n  console.log('throwing an exception');\n  throw new Error('generator broke!');\n  yield 2;\n  yield 3;\n}\n\nfunction log(generator) {\n  var v;\n  console.log('starting generator');\n  try {\n    v = generator.next();\n    console.log('\u7b2c\u4e00\u6b21\u8fd0\u884cnext\u65b9\u6cd5', v);\n  } catch (err) {\n    console.log('\u6355\u6349\u9519\u8bef', v);\n  }\n  try {\n    v = generator.next();\n    console.log('\u7b2c\u4e8c\u6b21\u8fd0\u884cnext\u65b9\u6cd5', v);\n  } catch (err) {\n    console.log('\u6355\u6349\u9519\u8bef', v);\n  }\n  try {\n    v = generator.next();\n    console.log('\u7b2c\u4e09\u6b21\u8fd0\u884cnext\u65b9\u6cd5', v);\n  } catch (err) {\n    console.log('\u6355\u6349\u9519\u8bef', v);\n  }\n  console.log('caller done');\n}\n\nlog(g());\n// starting generator\n// \u7b2c\u4e00\u6b21\u8fd0\u884cnext\u65b9\u6cd5 { value: 1, done: false }\n// throwing an exception\n// \u6355\u6349\u9519\u8bef { value: 1, done: false }\n// \u7b2c\u4e09\u6b21\u8fd0\u884cnext\u65b9\u6cd5 { value: undefined, done: true }\n// caller done\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e00\u5171\u4e09\u6b21\u8fd0\u884c<code>next</code>\u65b9\u6cd5\uff0c\u7b2c\u4e8c\u6b21\u8fd0\u884c\u7684\u65f6\u5019\u4f1a\u629b\u51fa\u9519\u8bef\uff0c\u7136\u540e\u7b2c\u4e09\u6b21\u8fd0\u884c\u7684\u65f6\u5019\uff0cGenerator \u51fd\u6570\u5c31\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u4e0d\u518d\u6267\u884c\u4e0b\u53bb\u4e86\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generatorprototypereturn","title":"Generator.prototype.return()","text":"<p>Generator \u51fd\u6570\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u8fd8\u6709\u4e00\u4e2a<code>return()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8fd4\u56de\u7ed9\u5b9a\u7684\u503c\uff0c\u5e76\u4e14\u7ec8\u7ed3\u904d\u5386 Generator \u51fd\u6570\u3002</p> <pre><code>function* gen() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nvar g = gen();\n\ng.next()        // { value: 1, done: false }\ng.return('foo') // { value: \"foo\", done: true }\ng.next()        // { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u904d\u5386\u5668\u5bf9\u8c61<code>g</code>\u8c03\u7528<code>return()</code>\u65b9\u6cd5\u540e\uff0c\u8fd4\u56de\u503c\u7684<code>value</code>\u5c5e\u6027\u5c31\u662f<code>return()</code>\u65b9\u6cd5\u7684\u53c2\u6570<code>foo</code>\u3002\u5e76\u4e14\uff0cGenerator \u51fd\u6570\u7684\u904d\u5386\u5c31\u7ec8\u6b62\u4e86\uff0c\u8fd4\u56de\u503c\u7684<code>done</code>\u5c5e\u6027\u4e3a<code>true</code>\uff0c\u4ee5\u540e\u518d\u8c03\u7528<code>next()</code>\u65b9\u6cd5\uff0c<code>done</code>\u5c5e\u6027\u603b\u662f\u8fd4\u56de<code>true</code>\u3002</p> <p>\u5982\u679c<code>return()</code>\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4e0d\u63d0\u4f9b\u53c2\u6570\uff0c\u5219\u8fd4\u56de\u503c\u7684<code>value</code>\u5c5e\u6027\u4e3a<code>undefined</code>\u3002</p> <pre><code>function* gen() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nvar g = gen();\n\ng.next() // { value: 1, done: false }\ng.return() // { value: undefined, done: true }\n</code></pre> <p>\u5982\u679c Generator \u51fd\u6570\u5185\u90e8\u6709<code>try...finally</code>\u4ee3\u7801\u5757\uff0c\u4e14\u6b63\u5728\u6267\u884c<code>try</code>\u4ee3\u7801\u5757\uff0c\u90a3\u4e48<code>return()</code>\u65b9\u6cd5\u4f1a\u5bfc\u81f4\u7acb\u523b\u8fdb\u5165<code>finally</code>\u4ee3\u7801\u5757\uff0c\u6267\u884c\u5b8c\u4ee5\u540e\uff0c\u6574\u4e2a\u51fd\u6570\u624d\u4f1a\u7ed3\u675f\u3002</p> <pre><code>function* numbers () {\n  yield 1;\n  try {\n    yield 2;\n    yield 3;\n  } finally {\n    yield 4;\n    yield 5;\n  }\n  yield 6;\n}\nvar g = numbers();\ng.next() // { value: 1, done: false }\ng.next() // { value: 2, done: false }\ng.return(7) // { value: 4, done: false }\ng.next() // { value: 5, done: false }\ng.next() // { value: 7, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528<code>return()</code>\u65b9\u6cd5\u540e\uff0c\u5c31\u5f00\u59cb\u6267\u884c<code>finally</code>\u4ee3\u7801\u5757\uff0c\u4e0d\u6267\u884c<code>try</code>\u91cc\u9762\u5269\u4e0b\u7684\u4ee3\u7801\u4e86\uff0c\u7136\u540e\u7b49\u5230<code>finally</code>\u4ee3\u7801\u5757\u6267\u884c\u5b8c\uff0c\u518d\u8fd4\u56de<code>return()</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u8fd4\u56de\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#nextthrowreturn","title":"next()\u3001throw()\u3001return() \u7684\u5171\u540c\u70b9","text":"<p><code>next()</code>\u3001<code>throw()</code>\u3001<code>return()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u672c\u8d28\u4e0a\u662f\u540c\u4e00\u4ef6\u4e8b\uff0c\u53ef\u4ee5\u653e\u5728\u4e00\u8d77\u7406\u89e3\u3002\u5b83\u4eec\u7684\u4f5c\u7528\u90fd\u662f\u8ba9 Generator \u51fd\u6570\u6062\u590d\u6267\u884c\uff0c\u5e76\u4e14\u4f7f\u7528\u4e0d\u540c\u7684\u8bed\u53e5\u66ff\u6362<code>yield</code>\u8868\u8fbe\u5f0f\u3002</p> <p><code>next()</code>\u662f\u5c06<code>yield</code>\u8868\u8fbe\u5f0f\u66ff\u6362\u6210\u4e00\u4e2a\u503c\u3002</p> <pre><code>const g = function* (x, y) {\n  let result = yield x + y;\n  return result;\n};\n\nconst gen = g(1, 2);\ngen.next(); // Object {value: 3, done: false}\n\ngen.next(1); // Object {value: 1, done: true}\n// \u76f8\u5f53\u4e8e\u5c06 let result = yield x + y\n// \u66ff\u6362\u6210 let result = 1;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>next(1)</code>\u65b9\u6cd5\u5c31\u76f8\u5f53\u4e8e\u5c06<code>yield</code>\u8868\u8fbe\u5f0f\u66ff\u6362\u6210\u4e00\u4e2a\u503c<code>1</code>\u3002\u5982\u679c<code>next</code>\u65b9\u6cd5\u6ca1\u6709\u53c2\u6570\uff0c\u5c31\u76f8\u5f53\u4e8e\u66ff\u6362\u6210<code>undefined</code>\u3002</p> <p><code>throw()</code>\u662f\u5c06<code>yield</code>\u8868\u8fbe\u5f0f\u66ff\u6362\u6210\u4e00\u4e2a<code>throw</code>\u8bed\u53e5\u3002</p> <pre><code>gen.throw(new Error('\u51fa\u9519\u4e86')); // Uncaught Error: \u51fa\u9519\u4e86\n// \u76f8\u5f53\u4e8e\u5c06 let result = yield x + y\n// \u66ff\u6362\u6210 let result = throw(new Error('\u51fa\u9519\u4e86'));\n</code></pre> <p><code>return()</code>\u662f\u5c06<code>yield</code>\u8868\u8fbe\u5f0f\u66ff\u6362\u6210\u4e00\u4e2a<code>return</code>\u8bed\u53e5\u3002</p> <pre><code>gen.return(2); // Object {value: 2, done: true}\n// \u76f8\u5f53\u4e8e\u5c06 let result = yield x + y\n// \u66ff\u6362\u6210 let result = return 2;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#yield_1","title":"yield* \u8868\u8fbe\u5f0f","text":"<p>\u5982\u679c\u5728 Generator \u51fd\u6570\u5185\u90e8\uff0c\u8c03\u7528\u53e6\u4e00\u4e2a Generator \u51fd\u6570\u3002\u9700\u8981\u5728\u524d\u8005\u7684\u51fd\u6570\u4f53\u5185\u90e8\uff0c\u81ea\u5df1\u624b\u52a8\u5b8c\u6210\u904d\u5386\u3002</p> <pre><code>function* foo() {\n  yield 'a';\n  yield 'b';\n}\n\nfunction* bar() {\n  yield 'x';\n  // \u624b\u52a8\u904d\u5386 foo()\n  for (let i of foo()) {\n    console.log(i);\n  }\n  yield 'y';\n}\n\nfor (let v of bar()){\n  console.log(v);\n}\n// x\n// a\n// b\n// y\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u548c<code>bar</code>\u90fd\u662f Generator \u51fd\u6570\uff0c\u5728<code>bar</code>\u91cc\u9762\u8c03\u7528<code>foo</code>\uff0c\u5c31\u9700\u8981\u624b\u52a8\u904d\u5386<code>foo</code>\u3002\u5982\u679c\u6709\u591a\u4e2a Generator \u51fd\u6570\u5d4c\u5957\uff0c\u5199\u8d77\u6765\u5c31\u975e\u5e38\u9ebb\u70e6\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86<code>yield*</code>\u8868\u8fbe\u5f0f\uff0c\u4f5c\u4e3a\u89e3\u51b3\u529e\u6cd5\uff0c\u7528\u6765\u5728\u4e00\u4e2a Generator \u51fd\u6570\u91cc\u9762\u6267\u884c\u53e6\u4e00\u4e2a Generator \u51fd\u6570\u3002</p> <pre><code>function* bar() {\n  yield 'x';\n  yield* foo();\n  yield 'y';\n}\n\n// \u7b49\u540c\u4e8e\nfunction* bar() {\n  yield 'x';\n  yield 'a';\n  yield 'b';\n  yield 'y';\n}\n\n// \u7b49\u540c\u4e8e\nfunction* bar() {\n  yield 'x';\n  for (let v of foo()) {\n    yield v;\n  }\n  yield 'y';\n}\n\nfor (let v of bar()){\n  console.log(v);\n}\n// \"x\"\n// \"a\"\n// \"b\"\n// \"y\"\n</code></pre> <p>\u518d\u6765\u770b\u4e00\u4e2a\u5bf9\u6bd4\u7684\u4f8b\u5b50\u3002</p> <pre><code>function* inner() {\n  yield 'hello!';\n}\n\nfunction* outer1() {\n  yield 'open';\n  yield inner();\n  yield 'close';\n}\n\nvar gen = outer1()\ngen.next().value // \"open\"\ngen.next().value // \u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\ngen.next().value // \"close\"\n\nfunction* outer2() {\n  yield 'open'\n  yield* inner()\n  yield 'close'\n}\n\nvar gen = outer2()\ngen.next().value // \"open\"\ngen.next().value // \"hello!\"\ngen.next().value // \"close\"\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>outer2</code>\u4f7f\u7528\u4e86<code>yield*</code>\uff0c<code>outer1</code>\u6ca1\u4f7f\u7528\u3002\u7ed3\u679c\u5c31\u662f\uff0c<code>outer1</code>\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c<code>outer2</code>\u8fd4\u56de\u8be5\u904d\u5386\u5668\u5bf9\u8c61\u7684\u5185\u90e8\u503c\u3002</p> <p>\u4ece\u8bed\u6cd5\u89d2\u5ea6\u770b\uff0c\u5982\u679c<code>yield</code>\u8868\u8fbe\u5f0f\u540e\u9762\u8ddf\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u9700\u8981\u5728<code>yield</code>\u8868\u8fbe\u5f0f\u540e\u9762\u52a0\u4e0a\u661f\u53f7\uff0c\u8868\u660e\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\u5bf9\u8c61\u3002\u8fd9\u88ab\u79f0\u4e3a<code>yield*</code>\u8868\u8fbe\u5f0f\u3002</p> <pre><code>let delegatedIterator = (function* () {\n  yield 'Hello!';\n  yield 'Bye!';\n}());\n\nlet delegatingIterator = (function* () {\n  yield 'Greetings!';\n  yield* delegatedIterator;\n  yield 'Ok, bye.';\n}());\n\nfor(let value of delegatingIterator) {\n  console.log(value);\n}\n// \"Greetings!\n// \"Hello!\"\n// \"Bye!\"\n// \"Ok, bye.\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>delegatingIterator</code>\u662f\u4ee3\u7406\u8005\uff0c<code>delegatedIterator</code>\u662f\u88ab\u4ee3\u7406\u8005\u3002\u7531\u4e8e<code>yield* delegatedIterator</code>\u8bed\u53e5\u5f97\u5230\u7684\u503c\uff0c\u662f\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u6240\u4ee5\u8981\u7528\u661f\u53f7\u8868\u793a\u3002\u8fd0\u884c\u7ed3\u679c\u5c31\u662f\u4f7f\u7528\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u904d\u5386\u4e86\u591a\u4e2a Generator \u51fd\u6570\uff0c\u6709\u9012\u5f52\u7684\u6548\u679c\u3002</p> <p><code>yield*</code>\u540e\u9762\u7684 Generator \u51fd\u6570\uff08\u6ca1\u6709<code>return</code>\u8bed\u53e5\u65f6\uff09\uff0c\u7b49\u540c\u4e8e\u5728 Generator \u51fd\u6570\u5185\u90e8\uff0c\u90e8\u7f72\u4e00\u4e2a<code>for...of</code>\u5faa\u73af\u3002</p> <pre><code>function* concat(iter1, iter2) {\n  yield* iter1;\n  yield* iter2;\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction* concat(iter1, iter2) {\n  for (var value of iter1) {\n    yield value;\n  }\n  for (var value of iter2) {\n    yield value;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c<code>yield*</code>\u540e\u9762\u7684 Generator \u51fd\u6570\uff08\u6ca1\u6709<code>return</code>\u8bed\u53e5\u65f6\uff09\uff0c\u4e0d\u8fc7\u662f<code>for...of</code>\u7684\u4e00\u79cd\u7b80\u5199\u5f62\u5f0f\uff0c\u5b8c\u5168\u53ef\u4ee5\u7528\u540e\u8005\u66ff\u4ee3\u524d\u8005\u3002\u53cd\u4e4b\uff0c\u5728\u6709<code>return</code>\u8bed\u53e5\u65f6\uff0c\u5219\u9700\u8981\u7528<code>var value = yield* iterator</code>\u7684\u5f62\u5f0f\u83b7\u53d6<code>return</code>\u8bed\u53e5\u7684\u503c\u3002</p> <p>\u5982\u679c<code>yield*</code>\u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u6570\u7ec4\uff0c\u7531\u4e8e\u6570\u7ec4\u539f\u751f\u652f\u6301\u904d\u5386\u5668\uff0c\u56e0\u6b64\u5c31\u4f1a\u904d\u5386\u6570\u7ec4\u6210\u5458\u3002</p> <pre><code>function* gen(){\n  yield* [\"a\", \"b\", \"c\"];\n}\n\ngen().next() // { value:\"a\", done:false }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>yield</code>\u547d\u4ee4\u540e\u9762\u5982\u679c\u4e0d\u52a0\u661f\u53f7\uff0c\u8fd4\u56de\u7684\u662f\u6574\u4e2a\u6570\u7ec4\uff0c\u52a0\u4e86\u661f\u53f7\u5c31\u8868\u793a\u8fd4\u56de\u7684\u662f\u6570\u7ec4\u7684\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u4efb\u4f55\u6570\u636e\u7ed3\u6784\u53ea\u8981\u6709 Iterator \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u88ab<code>yield*</code>\u904d\u5386\u3002</p> <pre><code>let read = (function* () {\n  yield 'hello';\n  yield* 'hello';\n})();\n\nread.next().value // \"hello\"\nread.next().value // \"h\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>yield</code>\u8868\u8fbe\u5f0f\u8fd4\u56de\u6574\u4e2a\u5b57\u7b26\u4e32\uff0c<code>yield*</code>\u8bed\u53e5\u8fd4\u56de\u5355\u4e2a\u5b57\u7b26\u3002\u56e0\u4e3a\u5b57\u7b26\u4e32\u5177\u6709 Iterator \u63a5\u53e3\uff0c\u6240\u4ee5\u88ab<code>yield*</code>\u904d\u5386\u3002</p> <p>\u5982\u679c\u88ab\u4ee3\u7406\u7684 Generator \u51fd\u6570\u6709<code>return</code>\u8bed\u53e5\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5411\u4ee3\u7406\u5b83\u7684 Generator \u51fd\u6570\u8fd4\u56de\u6570\u636e\u3002</p> <pre><code>function* foo() {\n  yield 2;\n  yield 3;\n  return \"foo\";\n}\n\nfunction* bar() {\n  yield 1;\n  var v = yield* foo();\n  console.log(\"v: \" + v);\n  yield 4;\n}\n\nvar it = bar();\n\nit.next()\n// {value: 1, done: false}\nit.next()\n// {value: 2, done: false}\nit.next()\n// {value: 3, done: false}\nit.next();\n// \"v: foo\"\n// {value: 4, done: false}\nit.next()\n// {value: undefined, done: true}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u7b2c\u56db\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u5c4f\u5e55\u4e0a\u4f1a\u6709\u8f93\u51fa\uff0c\u8fd9\u662f\u56e0\u4e3a\u51fd\u6570<code>foo</code>\u7684<code>return</code>\u8bed\u53e5\uff0c\u5411\u51fd\u6570<code>bar</code>\u63d0\u4f9b\u4e86\u8fd4\u56de\u503c\u3002</p> <p>\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function* genFuncWithReturn() {\n  yield 'a';\n  yield 'b';\n  return 'The result';\n}\nfunction* logReturned(genObj) {\n  let result = yield* genObj;\n  console.log(result);\n}\n\n[...logReturned(genFuncWithReturn())]\n// The result\n// \u503c\u4e3a [ 'a', 'b' ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b58\u5728\u4e24\u6b21\u904d\u5386\u3002\u7b2c\u4e00\u6b21\u662f\u6269\u5c55\u8fd0\u7b97\u7b26\u904d\u5386\u51fd\u6570<code>logReturned</code>\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u6b21\u662f<code>yield*</code>\u8bed\u53e5\u904d\u5386\u51fd\u6570<code>genFuncWithReturn</code>\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\u3002\u8fd9\u4e24\u6b21\u904d\u5386\u7684\u6548\u679c\u662f\u53e0\u52a0\u7684\uff0c\u6700\u7ec8\u8868\u73b0\u4e3a\u6269\u5c55\u8fd0\u7b97\u7b26\u904d\u5386\u51fd\u6570<code>genFuncWithReturn</code>\u8fd4\u56de\u7684\u904d\u5386\u5668\u5bf9\u8c61\u3002\u6240\u4ee5\uff0c\u6700\u540e\u7684\u6570\u636e\u8868\u8fbe\u5f0f\u5f97\u5230\u7684\u503c\u7b49\u4e8e<code>[ 'a', 'b' ]</code>\u3002\u4f46\u662f\uff0c\u51fd\u6570<code>genFuncWithReturn</code>\u7684<code>return</code>\u8bed\u53e5\u7684\u8fd4\u56de\u503c<code>The result</code>\uff0c\u4f1a\u8fd4\u56de\u7ed9\u51fd\u6570<code>logReturned</code>\u5185\u90e8\u7684<code>result</code>\u53d8\u91cf\uff0c\u56e0\u6b64\u4f1a\u6709\u7ec8\u7aef\u8f93\u51fa\u3002</p> <p><code>yield*</code>\u547d\u4ee4\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u53d6\u51fa\u5d4c\u5957\u6570\u7ec4\u7684\u6240\u6709\u6210\u5458\u3002</p> <pre><code>function* iterTree(tree) {\n  if (Array.isArray(tree)) {\n    for(let i=0; i &lt; tree.length; i++) {\n      yield* iterTree(tree[i]);\n    }\n  } else {\n    yield tree;\n  }\n}\n\nconst tree = [ 'a', ['b', 'c'], ['d', 'e'] ];\n\nfor(let x of iterTree(tree)) {\n  console.log(x);\n}\n// a\n// b\n// c\n// d\n// e\n</code></pre> <p>\u7531\u4e8e\u6269\u5c55\u8fd0\u7b97\u7b26<code>...</code>\u9ed8\u8ba4\u8c03\u7528 Iterator \u63a5\u53e3\uff0c\u6240\u4ee5\u4e0a\u9762\u8fd9\u4e2a\u51fd\u6570\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5d4c\u5957\u6570\u7ec4\u7684\u5e73\u94fa\u3002</p> <pre><code>[...iterTree(tree)] // [\"a\", \"b\", \"c\", \"d\", \"e\"]\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7a0d\u5fae\u590d\u6742\u7684\u4f8b\u5b50\uff0c\u4f7f\u7528<code>yield*</code>\u8bed\u53e5\u904d\u5386\u5b8c\u5168\u4e8c\u53c9\u6811\u3002</p> <pre><code>// \u4e0b\u9762\u662f\u4e8c\u53c9\u6811\u7684\u6784\u9020\u51fd\u6570\uff0c\n// \u4e09\u4e2a\u53c2\u6570\u5206\u522b\u662f\u5de6\u6811\u3001\u5f53\u524d\u8282\u70b9\u548c\u53f3\u6811\nfunction Tree(left, label, right) {\n  this.left = left;\n  this.label = label;\n  this.right = right;\n}\n\n// \u4e0b\u9762\u662f\u4e2d\u5e8f\uff08inorder\uff09\u904d\u5386\u51fd\u6570\u3002\n// \u7531\u4e8e\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u6240\u4ee5\u8981\u7528generator\u51fd\u6570\u3002\n// \u51fd\u6570\u4f53\u5185\u91c7\u7528\u9012\u5f52\u7b97\u6cd5\uff0c\u6240\u4ee5\u5de6\u6811\u548c\u53f3\u6811\u8981\u7528yield*\u904d\u5386\nfunction* inorder(t) {\n  if (t) {\n    yield* inorder(t.left);\n    yield t.label;\n    yield* inorder(t.right);\n  }\n}\n\n// \u4e0b\u9762\u751f\u6210\u4e8c\u53c9\u6811\nfunction make(array) {\n  // \u5224\u65ad\u662f\u5426\u4e3a\u53f6\u8282\u70b9\n  if (array.length == 1) return new Tree(null, array[0], null);\n  return new Tree(make(array[0]), array[1], make(array[2]));\n}\nlet tree = make([[['a'], 'b', ['c']], 'd', [['e'], 'f', ['g']]]);\n\n// \u904d\u5386\u4e8c\u53c9\u6811\nvar result = [];\nfor (let node of inorder(tree)) {\n  result.push(node);\n}\n\nresult\n// ['a', 'b', 'c', 'd', 'e', 'f', 'g']\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generator","title":"\u4f5c\u4e3a\u5bf9\u8c61\u5c5e\u6027\u7684 Generator \u51fd\u6570","text":"<p>\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u662f Generator \u51fd\u6570\uff0c\u53ef\u4ee5\u7b80\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>let obj = {\n  * myGeneratorMethod() {\n    \u00b7\u00b7\u00b7\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>myGeneratorMethod</code>\u5c5e\u6027\u524d\u9762\u6709\u4e00\u4e2a\u661f\u53f7\uff0c\u8868\u793a\u8fd9\u4e2a\u5c5e\u6027\u662f\u4e00\u4e2a Generator \u51fd\u6570\u3002</p> <p>\u5b83\u7684\u5b8c\u6574\u5f62\u5f0f\u5982\u4e0b\uff0c\u4e0e\u4e0a\u9762\u7684\u5199\u6cd5\u662f\u7b49\u4ef7\u7684\u3002</p> <pre><code>let obj = {\n  myGeneratorMethod: function* () {\n    // \u00b7\u00b7\u00b7\n  }\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generator-this","title":"Generator \u51fd\u6570\u7684<code>this</code>","text":"<p>Generator \u51fd\u6570\u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\uff0cES6 \u89c4\u5b9a\u8fd9\u4e2a\u904d\u5386\u5668\u662f Generator \u51fd\u6570\u7684\u5b9e\u4f8b\uff0c\u4e5f\u7ee7\u627f\u4e86 Generator \u51fd\u6570\u7684<code>prototype</code>\u5bf9\u8c61\u4e0a\u7684\u65b9\u6cd5\u3002</p> <pre><code>function* g() {}\n\ng.prototype.hello = function () {\n  return 'hi!';\n};\n\nlet obj = g();\n\nobj instanceof g // true\nobj.hello() // 'hi!'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0cGenerator \u51fd\u6570<code>g</code>\u8fd4\u56de\u7684\u904d\u5386\u5668<code>obj</code>\uff0c\u662f<code>g</code>\u7684\u5b9e\u4f8b\uff0c\u800c\u4e14\u7ee7\u627f\u4e86<code>g.prototype</code>\u3002\u4f46\u662f\uff0c\u5982\u679c\u628a<code>g</code>\u5f53\u4f5c\u666e\u901a\u7684\u6784\u9020\u51fd\u6570\uff0c\u5e76\u4e0d\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a<code>g</code>\u8fd4\u56de\u7684\u603b\u662f\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f<code>this</code>\u5bf9\u8c61\u3002</p> <pre><code>function* g() {\n  this.a = 11;\n}\n\nlet obj = g();\nobj.next();\nobj.a // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570<code>g</code>\u5728<code>this</code>\u5bf9\u8c61\u4e0a\u9762\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5c5e\u6027<code>a</code>\uff0c\u4f46\u662f<code>obj</code>\u5bf9\u8c61\u62ff\u4e0d\u5230\u8fd9\u4e2a\u5c5e\u6027\u3002</p> <p>Generator \u51fd\u6570\u4e5f\u4e0d\u80fd\u8ddf<code>new</code>\u547d\u4ee4\u4e00\u8d77\u7528\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>function* F() {\n  yield this.x = 2;\n  yield this.y = 3;\n}\n\nnew F()\n// TypeError: F is not a constructor\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>new</code>\u547d\u4ee4\u8ddf\u6784\u9020\u51fd\u6570<code>F</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u7ed3\u679c\u62a5\u9519\uff0c\u56e0\u4e3a<code>F</code>\u4e0d\u662f\u6784\u9020\u51fd\u6570\u3002</p> <p>\u90a3\u4e48\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u8ba9 Generator \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u6b63\u5e38\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u65e2\u53ef\u4ee5\u7528<code>next</code>\u65b9\u6cd5\uff0c\u53c8\u53ef\u4ee5\u83b7\u5f97\u6b63\u5e38\u7684<code>this</code>\uff1f</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u53d8\u901a\u65b9\u6cd5\u3002\u9996\u5148\uff0c\u751f\u6210\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u4f7f\u7528<code>call</code>\u65b9\u6cd5\u7ed1\u5b9a Generator \u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u3002\u8fd9\u6837\uff0c\u6784\u9020\u51fd\u6570\u8c03\u7528\u4ee5\u540e\uff0c\u8fd9\u4e2a\u7a7a\u5bf9\u8c61\u5c31\u662f Generator \u51fd\u6570\u7684\u5b9e\u4f8b\u5bf9\u8c61\u4e86\u3002</p> <pre><code>function* F() {\n  this.a = 1;\n  yield this.b = 2;\n  yield this.c = 3;\n}\nvar obj = {};\nvar f = F.call(obj);\n\nf.next();  // Object {value: 2, done: false}\nf.next();  // Object {value: 3, done: false}\nf.next();  // Object {value: undefined, done: true}\n\nobj.a // 1\nobj.b // 2\nobj.c // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u662f<code>F</code>\u5185\u90e8\u7684<code>this</code>\u5bf9\u8c61\u7ed1\u5b9a<code>obj</code>\u5bf9\u8c61\uff0c\u7136\u540e\u8c03\u7528\u5b83\uff0c\u8fd4\u56de\u4e00\u4e2a Iterator \u5bf9\u8c61\u3002\u8fd9\u4e2a\u5bf9\u8c61\u6267\u884c\u4e09\u6b21<code>next</code>\u65b9\u6cd5\uff08\u56e0\u4e3a<code>F</code>\u5185\u90e8\u6709\u4e24\u4e2a<code>yield</code>\u8868\u8fbe\u5f0f\uff09\uff0c\u5b8c\u6210 F \u5185\u90e8\u6240\u6709\u4ee3\u7801\u7684\u8fd0\u884c\u3002\u8fd9\u65f6\uff0c\u6240\u6709\u5185\u90e8\u5c5e\u6027\u90fd\u7ed1\u5b9a\u5728<code>obj</code>\u5bf9\u8c61\u4e0a\u4e86\uff0c\u56e0\u6b64<code>obj</code>\u5bf9\u8c61\u4e5f\u5c31\u6210\u4e86<code>F</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6267\u884c\u7684\u662f\u904d\u5386\u5668\u5bf9\u8c61<code>f</code>\uff0c\u4f46\u662f\u751f\u6210\u7684\u5bf9\u8c61\u5b9e\u4f8b\u662f<code>obj</code>\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u5c06\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u7edf\u4e00\u5462\uff1f</p> <p>\u4e00\u4e2a\u529e\u6cd5\u5c31\u662f\u5c06<code>obj</code>\u6362\u6210<code>F.prototype</code>\u3002</p> <pre><code>function* F() {\n  this.a = 1;\n  yield this.b = 2;\n  yield this.c = 3;\n}\nvar f = F.call(F.prototype);\n\nf.next();  // Object {value: 2, done: false}\nf.next();  // Object {value: 3, done: false}\nf.next();  // Object {value: undefined, done: true}\n\nf.a // 1\nf.b // 2\nf.c // 3\n</code></pre> <p>\u518d\u5c06<code>F</code>\u6539\u6210\u6784\u9020\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u5bf9\u5b83\u6267\u884c<code>new</code>\u547d\u4ee4\u4e86\u3002</p> <pre><code>function* gen() {\n  this.a = 1;\n  yield this.b = 2;\n  yield this.c = 3;\n}\n\nfunction F() {\n  return gen.call(gen.prototype);\n}\n\nvar f = new F();\n\nf.next();  // Object {value: 2, done: false}\nf.next();  // Object {value: 3, done: false}\nf.next();  // Object {value: undefined, done: true}\n\nf.a // 1\nf.b // 2\nf.c // 3\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#_3","title":"\u542b\u4e49","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generator_1","title":"Generator \u4e0e\u72b6\u6001\u673a","text":"<p>Generator \u662f\u5b9e\u73b0\u72b6\u6001\u673a\u7684\u6700\u4f73\u7ed3\u6784\u3002\u6bd4\u5982\uff0c\u4e0b\u9762\u7684<code>clock</code>\u51fd\u6570\u5c31\u662f\u4e00\u4e2a\u72b6\u6001\u673a\u3002</p> <pre><code>var ticking = true;\nvar clock = function() {\n  if (ticking)\n    console.log('Tick!');\n  else\n    console.log('Tock!');\n  ticking = !ticking;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>clock</code>\u51fd\u6570\u4e00\u5171\u6709\u4e24\u79cd\u72b6\u6001\uff08<code>Tick</code>\u548c<code>Tock</code>\uff09\uff0c\u6bcf\u8fd0\u884c\u4e00\u6b21\uff0c\u5c31\u6539\u53d8\u4e00\u6b21\u72b6\u6001\u3002\u8fd9\u4e2a\u51fd\u6570\u5982\u679c\u7528 Generator \u5b9e\u73b0\uff0c\u5c31\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>var clock = function* () {\n  while (true) {\n    console.log('Tick!');\n    yield;\n    console.log('Tock!');\n    yield;\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u7684 Generator \u5b9e\u73b0\u4e0e ES5 \u5b9e\u73b0\u5bf9\u6bd4\uff0c\u53ef\u4ee5\u770b\u5230\u5c11\u4e86\u7528\u6765\u4fdd\u5b58\u72b6\u6001\u7684\u5916\u90e8\u53d8\u91cf<code>ticking</code>\uff0c\u8fd9\u6837\u5c31\u66f4\u7b80\u6d01\uff0c\u66f4\u5b89\u5168\uff08\u72b6\u6001\u4e0d\u4f1a\u88ab\u975e\u6cd5\u7be1\u6539\uff09\u3001\u66f4\u7b26\u5408\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u601d\u60f3\uff0c\u5728\u5199\u6cd5\u4e0a\u4e5f\u66f4\u4f18\u96c5\u3002Generator \u4e4b\u6240\u4ee5\u53ef\u4ee5\u4e0d\u7528\u5916\u90e8\u53d8\u91cf\u4fdd\u5b58\u72b6\u6001\uff0c\u662f\u56e0\u4e3a\u5b83\u672c\u8eab\u5c31\u5305\u542b\u4e86\u4e00\u4e2a\u72b6\u6001\u4fe1\u606f\uff0c\u5373\u76ee\u524d\u662f\u5426\u5904\u4e8e\u6682\u505c\u6001\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generator_2","title":"Generator \u4e0e\u534f\u7a0b","text":"<p>\u534f\u7a0b\uff08coroutine\uff09\u662f\u4e00\u79cd\u7a0b\u5e8f\u8fd0\u884c\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u201c\u534f\u4f5c\u7684\u7ebf\u7a0b\u201d\u6216\u201c\u534f\u4f5c\u7684\u51fd\u6570\u201d\u3002\u534f\u7a0b\u65e2\u53ef\u4ee5\u7528\u5355\u7ebf\u7a0b\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u7528\u591a\u7ebf\u7a0b\u5b9e\u73b0\u3002\u524d\u8005\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5b50\u4f8b\u7a0b\uff0c\u540e\u8005\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u7ebf\u7a0b\u3002</p> <p>\uff081\uff09\u534f\u7a0b\u4e0e\u5b50\u4f8b\u7a0b\u7684\u5dee\u5f02</p> <p>\u4f20\u7edf\u7684\u201c\u5b50\u4f8b\u7a0b\u201d\uff08subroutine\uff09\u91c7\u7528\u5806\u6808\u5f0f\u201c\u540e\u8fdb\u5148\u51fa\u201d\u7684\u6267\u884c\u65b9\u5f0f\uff0c\u53ea\u6709\u5f53\u8c03\u7528\u7684\u5b50\u51fd\u6570\u5b8c\u5168\u6267\u884c\u5b8c\u6bd5\uff0c\u624d\u4f1a\u7ed3\u675f\u6267\u884c\u7236\u51fd\u6570\u3002\u534f\u7a0b\u4e0e\u5176\u4e0d\u540c\uff0c\u591a\u4e2a\u7ebf\u7a0b\uff08\u5355\u7ebf\u7a0b\u60c5\u51b5\u4e0b\uff0c\u5373\u591a\u4e2a\u51fd\u6570\uff09\u53ef\u4ee5\u5e76\u884c\u6267\u884c\uff0c\u4f46\u662f\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\u5904\u4e8e\u6b63\u5728\u8fd0\u884c\u7684\u72b6\u6001\uff0c\u5176\u4ed6\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\u90fd\u5904\u4e8e\u6682\u505c\u6001\uff08suspended\uff09\uff0c\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\u4e4b\u95f4\u53ef\u4ee5\u4ea4\u6362\u6267\u884c\u6743\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\u6267\u884c\u5230\u4e00\u534a\uff0c\u53ef\u4ee5\u6682\u505c\u6267\u884c\uff0c\u5c06\u6267\u884c\u6743\u4ea4\u7ed9\u53e6\u4e00\u4e2a\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\uff0c\u7b49\u5230\u7a0d\u540e\u6536\u56de\u6267\u884c\u6743\u7684\u65f6\u5019\uff0c\u518d\u6062\u590d\u6267\u884c\u3002\u8fd9\u79cd\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u3001\u4ea4\u6362\u6267\u884c\u6743\u7684\u7ebf\u7a0b\uff08\u6216\u51fd\u6570\uff09\uff0c\u5c31\u79f0\u4e3a\u534f\u7a0b\u3002</p> <p>\u4ece\u5b9e\u73b0\u4e0a\u770b\uff0c\u5728\u5185\u5b58\u4e2d\uff0c\u5b50\u4f8b\u7a0b\u53ea\u4f7f\u7528\u4e00\u4e2a\u6808\uff08stack\uff09\uff0c\u800c\u534f\u7a0b\u662f\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u6808\uff0c\u4f46\u53ea\u6709\u4e00\u4e2a\u6808\u662f\u5728\u8fd0\u884c\u72b6\u6001\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u534f\u7a0b\u662f\u4ee5\u591a\u5360\u7528\u5185\u5b58\u4e3a\u4ee3\u4ef7\uff0c\u5b9e\u73b0\u591a\u4efb\u52a1\u7684\u5e76\u884c\u3002</p> <p>\uff082\uff09\u534f\u7a0b\u4e0e\u666e\u901a\u7ebf\u7a0b\u7684\u5dee\u5f02</p> <p>\u4e0d\u96be\u770b\u51fa\uff0c\u534f\u7a0b\u9002\u5408\u7528\u4e8e\u591a\u4efb\u52a1\u8fd0\u884c\u7684\u73af\u5883\u3002\u5728\u8fd9\u4e2a\u610f\u4e49\u4e0a\uff0c\u5b83\u4e0e\u666e\u901a\u7684\u7ebf\u7a0b\u5f88\u76f8\u4f3c\uff0c\u90fd\u6709\u81ea\u5df1\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u3001\u53ef\u4ee5\u5206\u4eab\u5168\u5c40\u53d8\u91cf\u3002\u5b83\u4eec\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u540c\u4e00\u65f6\u95f4\u53ef\u4ee5\u6709\u591a\u4e2a\u7ebf\u7a0b\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff0c\u4f46\u662f\u8fd0\u884c\u7684\u534f\u7a0b\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u5176\u4ed6\u534f\u7a0b\u90fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u3002\u6b64\u5916\uff0c\u666e\u901a\u7684\u7ebf\u7a0b\u662f\u62a2\u5148\u5f0f\u7684\uff0c\u5230\u5e95\u54ea\u4e2a\u7ebf\u7a0b\u4f18\u5148\u5f97\u5230\u8d44\u6e90\uff0c\u5fc5\u987b\u7531\u8fd0\u884c\u73af\u5883\u51b3\u5b9a\uff0c\u4f46\u662f\u534f\u7a0b\u662f\u5408\u4f5c\u5f0f\u7684\uff0c\u6267\u884c\u6743\u7531\u534f\u7a0b\u81ea\u5df1\u5206\u914d\u3002</p> <p>\u7531\u4e8e JavaScript \u662f\u5355\u7ebf\u7a0b\u8bed\u8a00\uff0c\u53ea\u80fd\u4fdd\u6301\u4e00\u4e2a\u8c03\u7528\u6808\u3002\u5f15\u5165\u534f\u7a0b\u4ee5\u540e\uff0c\u6bcf\u4e2a\u4efb\u52a1\u53ef\u4ee5\u4fdd\u6301\u81ea\u5df1\u7684\u8c03\u7528\u6808\u3002\u8fd9\u6837\u505a\u7684\u6700\u5927\u597d\u5904\uff0c\u5c31\u662f\u629b\u51fa\u9519\u8bef\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u627e\u5230\u539f\u59cb\u7684\u8c03\u7528\u6808\u3002\u4e0d\u81f3\u4e8e\u50cf\u5f02\u6b65\u64cd\u4f5c\u7684\u56de\u8c03\u51fd\u6570\u90a3\u6837\uff0c\u4e00\u65e6\u51fa\u9519\uff0c\u539f\u59cb\u7684\u8c03\u7528\u6808\u65e9\u5c31\u7ed3\u675f\u3002</p> <p>Generator \u51fd\u6570\u662f ES6 \u5bf9\u534f\u7a0b\u7684\u5b9e\u73b0\uff0c\u4f46\u5c5e\u4e8e\u4e0d\u5b8c\u5168\u5b9e\u73b0\u3002Generator \u51fd\u6570\u88ab\u79f0\u4e3a\u201c\u534a\u534f\u7a0b\u201d\uff08semi-coroutine\uff09\uff0c\u610f\u601d\u662f\u53ea\u6709 Generator \u51fd\u6570\u7684\u8c03\u7528\u8005\uff0c\u624d\u80fd\u5c06\u7a0b\u5e8f\u7684\u6267\u884c\u6743\u8fd8\u7ed9 Generator \u51fd\u6570\u3002\u5982\u679c\u662f\u5b8c\u5168\u6267\u884c\u7684\u534f\u7a0b\uff0c\u4efb\u4f55\u51fd\u6570\u90fd\u53ef\u4ee5\u8ba9\u6682\u505c\u7684\u534f\u7a0b\u7ee7\u7eed\u6267\u884c\u3002</p> <p>\u5982\u679c\u5c06 Generator \u51fd\u6570\u5f53\u4f5c\u534f\u7a0b\uff0c\u5b8c\u5168\u53ef\u4ee5\u5c06\u591a\u4e2a\u9700\u8981\u4e92\u76f8\u534f\u4f5c\u7684\u4efb\u52a1\u5199\u6210 Generator \u51fd\u6570\uff0c\u5b83\u4eec\u4e4b\u95f4\u4f7f\u7528<code>yield</code>\u8868\u8fbe\u5f0f\u4ea4\u6362\u63a7\u5236\u6743\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#generator_3","title":"Generator \u4e0e\u4e0a\u4e0b\u6587","text":"<p>JavaScript \u4ee3\u7801\u8fd0\u884c\u65f6\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5168\u5c40\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff08context\uff0c\u53c8\u79f0\u8fd0\u884c\u73af\u5883\uff09\uff0c\u5305\u542b\u4e86\u5f53\u524d\u6240\u6709\u7684\u53d8\u91cf\u548c\u5bf9\u8c61\u3002\u7136\u540e\uff0c\u6267\u884c\u51fd\u6570\uff08\u6216\u5757\u7ea7\u4ee3\u7801\uff09\u7684\u65f6\u5019\uff0c\u53c8\u4f1a\u5728\u5f53\u524d\u4e0a\u4e0b\u6587\u73af\u5883\u7684\u4e0a\u5c42\uff0c\u4ea7\u751f\u4e00\u4e2a\u51fd\u6570\u8fd0\u884c\u7684\u4e0a\u4e0b\u6587\uff0c\u53d8\u6210\u5f53\u524d\uff08active\uff09\u7684\u4e0a\u4e0b\u6587\uff0c\u7531\u6b64\u5f62\u6210\u4e00\u4e2a\u4e0a\u4e0b\u6587\u73af\u5883\u7684\u5806\u6808\uff08context stack\uff09\u3002</p> <p>\u8fd9\u4e2a\u5806\u6808\u662f\u201c\u540e\u8fdb\u5148\u51fa\u201d\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6700\u540e\u4ea7\u751f\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u9996\u5148\u6267\u884c\u5b8c\u6210\uff0c\u9000\u51fa\u5806\u6808\uff0c\u7136\u540e\u518d\u6267\u884c\u5b8c\u6210\u5b83\u4e0b\u5c42\u7684\u4e0a\u4e0b\u6587\uff0c\u76f4\u81f3\u6240\u6709\u4ee3\u7801\u6267\u884c\u5b8c\u6210\uff0c\u5806\u6808\u6e05\u7a7a\u3002</p> <p>Generator \u51fd\u6570\u4e0d\u662f\u8fd9\u6837\uff0c\u5b83\u6267\u884c\u4ea7\u751f\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4e00\u65e6\u9047\u5230<code>yield</code>\u547d\u4ee4\uff0c\u5c31\u4f1a\u6682\u65f6\u9000\u51fa\u5806\u6808\uff0c\u4f46\u662f\u5e76\u4e0d\u6d88\u5931\uff0c\u91cc\u9762\u7684\u6240\u6709\u53d8\u91cf\u548c\u5bf9\u8c61\u4f1a\u51bb\u7ed3\u5728\u5f53\u524d\u72b6\u6001\u3002\u7b49\u5230\u5bf9\u5b83\u6267\u884c<code>next</code>\u547d\u4ee4\u65f6\uff0c\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u73af\u5883\u53c8\u4f1a\u91cd\u65b0\u52a0\u5165\u8c03\u7528\u6808\uff0c\u51bb\u7ed3\u7684\u53d8\u91cf\u548c\u5bf9\u8c61\u6062\u590d\u6267\u884c\u3002</p> <pre><code>function* gen() {\n  yield 1;\n  return 2;\n}\n\nlet g = gen();\n\nconsole.log(\n  g.next().value,\n  g.next().value,\n);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u6b21\u6267\u884c<code>g.next()</code>\u65f6\uff0cGenerator \u51fd\u6570<code>gen</code>\u7684\u4e0a\u4e0b\u6587\u4f1a\u52a0\u5165\u5806\u6808\uff0c\u5373\u5f00\u59cb\u8fd0\u884c<code>gen</code>\u5185\u90e8\u7684\u4ee3\u7801\u3002\u7b49\u9047\u5230<code>yield 1</code>\u65f6\uff0c<code>gen</code>\u4e0a\u4e0b\u6587\u9000\u51fa\u5806\u6808\uff0c\u5185\u90e8\u72b6\u6001\u51bb\u7ed3\u3002\u7b2c\u4e8c\u6b21\u6267\u884c<code>g.next()</code>\u65f6\uff0c<code>gen</code>\u4e0a\u4e0b\u6587\u91cd\u65b0\u52a0\u5165\u5806\u6808\uff0c\u53d8\u6210\u5f53\u524d\u7684\u4e0a\u4e0b\u6587\uff0c\u91cd\u65b0\u6062\u590d\u6267\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#_4","title":"\u5e94\u7528","text":"<p>Generator \u53ef\u4ee5\u6682\u505c\u51fd\u6570\u6267\u884c\uff0c\u8fd4\u56de\u4efb\u610f\u8868\u8fbe\u5f0f\u7684\u503c\u3002\u8fd9\u79cd\u7279\u70b9\u4f7f\u5f97 Generator \u6709\u591a\u79cd\u5e94\u7528\u573a\u666f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#1","title":"\uff081\uff09\u5f02\u6b65\u64cd\u4f5c\u7684\u540c\u6b65\u5316\u8868\u8fbe","text":"<p>Generator \u51fd\u6570\u7684\u6682\u505c\u6267\u884c\u7684\u6548\u679c\uff0c\u610f\u5473\u7740\u53ef\u4ee5\u628a\u5f02\u6b65\u64cd\u4f5c\u5199\u5728<code>yield</code>\u8868\u8fbe\u5f0f\u91cc\u9762\uff0c\u7b49\u5230\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\u518d\u5f80\u540e\u6267\u884c\u3002\u8fd9\u5b9e\u9645\u4e0a\u7b49\u540c\u4e8e\u4e0d\u9700\u8981\u5199\u56de\u8c03\u51fd\u6570\u4e86\uff0c\u56e0\u4e3a\u5f02\u6b65\u64cd\u4f5c\u7684\u540e\u7eed\u64cd\u4f5c\u53ef\u4ee5\u653e\u5728<code>yield</code>\u8868\u8fbe\u5f0f\u4e0b\u9762\uff0c\u53cd\u6b63\u8981\u7b49\u5230\u8c03\u7528<code>next</code>\u65b9\u6cd5\u65f6\u518d\u6267\u884c\u3002\u6240\u4ee5\uff0cGenerator \u51fd\u6570\u7684\u4e00\u4e2a\u91cd\u8981\u5b9e\u9645\u610f\u4e49\u5c31\u662f\u7528\u6765\u5904\u7406\u5f02\u6b65\u64cd\u4f5c\uff0c\u6539\u5199\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>function* loadUI() {\n  showLoadingScreen();\n  yield loadUIDataAsynchronously();\n  hideLoadingScreen();\n}\nvar loader = loadUI();\n// \u52a0\u8f7dUI\nloader.next()\n\n// \u5378\u8f7dUI\nloader.next()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u6b21\u8c03\u7528<code>loadUI</code>\u51fd\u6570\u65f6\uff0c\u8be5\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\uff0c\u4ec5\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u3002\u4e0b\u4e00\u6b21\u5bf9\u8be5\u904d\u5386\u5668\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5219\u4f1a\u663e\u793a<code>Loading</code>\u754c\u9762\uff08<code>showLoadingScreen</code>\uff09\uff0c\u5e76\u4e14\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\uff08<code>loadUIDataAsynchronously</code>\uff09\u3002\u7b49\u5230\u6570\u636e\u52a0\u8f7d\u5b8c\u6210\uff0c\u518d\u4e00\u6b21\u4f7f\u7528<code>next</code>\u65b9\u6cd5\uff0c\u5219\u4f1a\u9690\u85cf<code>Loading</code>\u754c\u9762\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u79cd\u5199\u6cd5\u7684\u597d\u5904\u662f\u6240\u6709<code>Loading</code>\u754c\u9762\u7684\u903b\u8f91\uff0c\u90fd\u88ab\u5c01\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\uff0c\u6309\u90e8\u5c31\u73ed\u975e\u5e38\u6e05\u6670\u3002</p> <p>Ajax \u662f\u5178\u578b\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u901a\u8fc7 Generator \u51fd\u6570\u90e8\u7f72 Ajax \u64cd\u4f5c\uff0c\u53ef\u4ee5\u7528\u540c\u6b65\u7684\u65b9\u5f0f\u8868\u8fbe\u3002</p> <pre><code>function* main() {\n  var result = yield request(\"http://some.url\");\n  var resp = JSON.parse(result);\n    console.log(resp.value);\n}\n\nfunction request(url) {\n  makeAjaxCall(url, function(response){\n    it.next(response);\n  });\n}\n\nvar it = main();\nit.next();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>main</code>\u51fd\u6570\uff0c\u5c31\u662f\u901a\u8fc7 Ajax \u64cd\u4f5c\u83b7\u53d6\u6570\u636e\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u9664\u4e86\u591a\u4e86\u4e00\u4e2a<code>yield</code>\uff0c\u5b83\u51e0\u4e4e\u4e0e\u540c\u6b65\u64cd\u4f5c\u7684\u5199\u6cd5\u5b8c\u5168\u4e00\u6837\u3002\u6ce8\u610f\uff0c<code>makeAjaxCall</code>\u51fd\u6570\u4e2d\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5fc5\u987b\u52a0\u4e0a<code>response</code>\u53c2\u6570\uff0c\u56e0\u4e3a<code>yield</code>\u8868\u8fbe\u5f0f\uff0c\u672c\u8eab\u662f\u6ca1\u6709\u503c\u7684\uff0c\u603b\u662f\u7b49\u4e8e<code>undefined</code>\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u901a\u8fc7 Generator \u51fd\u6570\u9010\u884c\u8bfb\u53d6\u6587\u672c\u6587\u4ef6\u3002</p> <pre><code>function* numbers() {\n  let file = new FileReader(\"numbers.txt\");\n  try {\n    while(!file.eof) {\n      yield parseInt(file.readLine(), 10);\n    }\n  } finally {\n    file.close();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6253\u5f00\u6587\u672c\u6587\u4ef6\uff0c\u4f7f\u7528<code>yield</code>\u8868\u8fbe\u5f0f\u53ef\u4ee5\u624b\u52a8\u9010\u884c\u8bfb\u53d6\u6587\u4ef6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#2","title":"\uff082\uff09\u63a7\u5236\u6d41\u7ba1\u7406","text":"<p>\u5982\u679c\u6709\u4e00\u4e2a\u591a\u6b65\u64cd\u4f5c\u975e\u5e38\u8017\u65f6\uff0c\u91c7\u7528\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u80fd\u4f1a\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>step1(function (value1) {\n  step2(value1, function(value2) {\n    step3(value2, function(value3) {\n      step4(value3, function(value4) {\n        // Do something with value4\n      });\n    });\n  });\n});\n</code></pre> <p>\u91c7\u7528 Promise \u6539\u5199\u4e0a\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>Promise.resolve(step1)\n  .then(step2)\n  .then(step3)\n  .then(step4)\n  .then(function (value4) {\n    // Do something with value4\n  }, function (error) {\n    // Handle any error from step1 through step4\n  })\n  .done();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5df2\u7ecf\u628a\u56de\u8c03\u51fd\u6570\uff0c\u6539\u6210\u4e86\u76f4\u7ebf\u6267\u884c\u7684\u5f62\u5f0f\uff0c\u4f46\u662f\u52a0\u5165\u4e86\u5927\u91cf Promise \u7684\u8bed\u6cd5\u3002Generator \u51fd\u6570\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u5584\u4ee3\u7801\u8fd0\u884c\u6d41\u7a0b\u3002</p> <pre><code>function* longRunningTask(value1) {\n  try {\n    var value2 = yield step1(value1);\n    var value3 = yield step2(value2);\n    var value4 = yield step3(value3);\n    var value5 = yield step4(value4);\n    // Do something with value4\n  } catch (e) {\n    // Handle any error from step1 through step4\n  }\n}\n</code></pre> <p>\u7136\u540e\uff0c\u4f7f\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u6309\u6b21\u5e8f\u81ea\u52a8\u6267\u884c\u6240\u6709\u6b65\u9aa4\u3002</p> <pre><code>scheduler(longRunningTask(initialValue));\n\nfunction scheduler(task) {\n  var taskObj = task.next(task.value);\n  // \u5982\u679cGenerator\u51fd\u6570\u672a\u7ed3\u675f\uff0c\u5c31\u7ee7\u7eed\u8c03\u7528\n  if (!taskObj.done) {\n    task.value = taskObj.value\n    scheduler(task);\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\uff0c\u53ea\u9002\u5408\u540c\u6b65\u64cd\u4f5c\uff0c\u5373\u6240\u6709\u7684<code>task</code>\u90fd\u5fc5\u987b\u662f\u540c\u6b65\u7684\uff0c\u4e0d\u80fd\u6709\u5f02\u6b65\u64cd\u4f5c\u3002\u56e0\u4e3a\u8fd9\u91cc\u7684\u4ee3\u7801\u4e00\u5f97\u5230\u8fd4\u56de\u503c\uff0c\u5c31\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff0c\u6ca1\u6709\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u4f55\u65f6\u5b8c\u6210\u3002\u5982\u679c\u8981\u63a7\u5236\u5f02\u6b65\u7684\u64cd\u4f5c\u6d41\u7a0b\uff0c\u8be6\u89c1\u540e\u9762\u7684\u300a\u5f02\u6b65\u64cd\u4f5c\u300b\u4e00\u7ae0\u3002</p> <p>\u4e0b\u9762\uff0c\u5229\u7528<code>for...of</code>\u5faa\u73af\u4f1a\u81ea\u52a8\u4f9d\u6b21\u6267\u884c<code>yield</code>\u547d\u4ee4\u7684\u7279\u6027\uff0c\u63d0\u4f9b\u4e00\u79cd\u66f4\u4e00\u822c\u7684\u63a7\u5236\u6d41\u7ba1\u7406\u7684\u65b9\u6cd5\u3002</p> <pre><code>let steps = [step1Func, step2Func, step3Func];\n\nfunction* iterateSteps(steps){\n  for (var i=0; i&lt; steps.length; i++){\n    var step = steps[i];\n    yield step();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>steps</code>\u5c01\u88c5\u4e86\u4e00\u4e2a\u4efb\u52a1\u7684\u591a\u4e2a\u6b65\u9aa4\uff0cGenerator \u51fd\u6570<code>iterateSteps</code>\u5219\u662f\u4f9d\u6b21\u4e3a\u8fd9\u4e9b\u6b65\u9aa4\u52a0\u4e0a<code>yield</code>\u547d\u4ee4\u3002</p> <p>\u5c06\u4efb\u52a1\u5206\u89e3\u6210\u6b65\u9aa4\u4e4b\u540e\uff0c\u8fd8\u53ef\u4ee5\u5c06\u9879\u76ee\u5206\u89e3\u6210\u591a\u4e2a\u4f9d\u6b21\u6267\u884c\u7684\u4efb\u52a1\u3002</p> <pre><code>let jobs = [job1, job2, job3];\n\nfunction* iterateJobs(jobs){\n  for (var i=0; i&lt; jobs.length; i++){\n    var job = jobs[i];\n    yield* iterateSteps(job.steps);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>jobs</code>\u5c01\u88c5\u4e86\u4e00\u4e2a\u9879\u76ee\u7684\u591a\u4e2a\u4efb\u52a1\uff0cGenerator \u51fd\u6570<code>iterateJobs</code>\u5219\u662f\u4f9d\u6b21\u4e3a\u8fd9\u4e9b\u4efb\u52a1\u52a0\u4e0a<code>yield*</code>\u547d\u4ee4\u3002</p> <p>\u6700\u540e\uff0c\u5c31\u53ef\u4ee5\u7528<code>for...of</code>\u5faa\u73af\u4e00\u6b21\u6027\u4f9d\u6b21\u6267\u884c\u6240\u6709\u4efb\u52a1\u7684\u6240\u6709\u6b65\u9aa4\u3002</p> <pre><code>for (var step of iterateJobs(jobs)){\n  console.log(step.id);\n}\n</code></pre> <p>\u518d\u6b21\u63d0\u9192\uff0c\u4e0a\u9762\u7684\u505a\u6cd5\u53ea\u80fd\u7528\u4e8e\u6240\u6709\u6b65\u9aa4\u90fd\u662f\u540c\u6b65\u64cd\u4f5c\u7684\u60c5\u51b5\uff0c\u4e0d\u80fd\u6709\u5f02\u6b65\u64cd\u4f5c\u7684\u6b65\u9aa4\u3002\u5982\u679c\u60f3\u8981\u4f9d\u6b21\u6267\u884c\u5f02\u6b65\u7684\u6b65\u9aa4\uff0c\u5fc5\u987b\u4f7f\u7528\u540e\u9762\u7684\u300a\u5f02\u6b65\u64cd\u4f5c\u300b\u4e00\u7ae0\u4ecb\u7ecd\u7684\u65b9\u6cd5\u3002</p> <p><code>for...of</code>\u7684\u672c\u8d28\u662f\u4e00\u4e2a<code>while</code>\u5faa\u73af\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u5b9e\u8d28\u4e0a\u6267\u884c\u7684\u662f\u4e0b\u9762\u7684\u903b\u8f91\u3002</p> <pre><code>var it = iterateJobs(jobs);\nvar res = it.next();\n\nwhile (!res.done){\n  var result = res.value;\n  // ...\n  res = it.next();\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#3-iterator","title":"\uff083\uff09\u90e8\u7f72 Iterator \u63a5\u53e3","text":"<p>\u5229\u7528 Generator \u51fd\u6570\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u5bf9\u8c61\u4e0a\u90e8\u7f72 Iterator \u63a5\u53e3\u3002</p> <pre><code>function* iterEntries(obj) {\n  let keys = Object.keys(obj);\n  for (let i=0; i &lt; keys.length; i++) {\n    let key = keys[i];\n    yield [key, obj[key]];\n  }\n}\n\nlet myObj = { foo: 3, bar: 7 };\n\nfor (let [key, value] of iterEntries(myObj)) {\n  console.log(key, value);\n}\n\n// foo 3\n// bar 7\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c<code>myObj</code>\u662f\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\uff0c\u901a\u8fc7<code>iterEntries</code>\u51fd\u6570\uff0c\u5c31\u6709\u4e86 Iterator \u63a5\u53e3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u5bf9\u8c61\u4e0a\u90e8\u7f72<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5bf9\u6570\u7ec4\u90e8\u7f72 Iterator \u63a5\u53e3\u7684\u4f8b\u5b50\uff0c\u5c3d\u7ba1\u6570\u7ec4\u539f\u751f\u5177\u6709\u8fd9\u4e2a\u63a5\u53e3\u3002</p> <pre><code>function* makeSimpleGenerator(array){\n  var nextIndex = 0;\n\n  while(nextIndex &lt; array.length){\n    yield array[nextIndex++];\n  }\n}\n\nvar gen = makeSimpleGenerator(['yo', 'ya']);\n\ngen.next().value // 'yo'\ngen.next().value // 'ya'\ngen.next().done  // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/19-generator/#4","title":"\uff084\uff09\u4f5c\u4e3a\u6570\u636e\u7ed3\u6784","text":"<p>Generator \u53ef\u4ee5\u770b\u4f5c\u662f\u6570\u636e\u7ed3\u6784\uff0c\u66f4\u786e\u5207\u5730\u8bf4\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u6570\u7ec4\u7ed3\u6784\uff0c\u56e0\u4e3a Generator \u51fd\u6570\u53ef\u4ee5\u8fd4\u56de\u4e00\u7cfb\u5217\u7684\u503c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u4ee5\u5bf9\u4efb\u610f\u8868\u8fbe\u5f0f\uff0c\u63d0\u4f9b\u7c7b\u4f3c\u6570\u7ec4\u7684\u63a5\u53e3\u3002</p> <pre><code>function* doStuff() {\n  yield fs.readFile.bind(null, 'hello.txt');\n  yield fs.readFile.bind(null, 'world.txt');\n  yield fs.readFile.bind(null, 'and-such.txt');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c31\u662f\u4f9d\u6b21\u8fd4\u56de\u4e09\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u7531\u4e8e\u4f7f\u7528\u4e86 Generator \u51fd\u6570\uff0c\u5bfc\u81f4\u53ef\u4ee5\u50cf\u5904\u7406\u6570\u7ec4\u90a3\u6837\uff0c\u5904\u7406\u8fd9\u4e09\u4e2a\u8fd4\u56de\u7684\u51fd\u6570\u3002</p> <pre><code>for (task of doStuff()) {\n  // task\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u50cf\u56de\u8c03\u51fd\u6570\u90a3\u6837\u4f7f\u7528\u5b83\n}\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u7528 ES5 \u8868\u8fbe\uff0c\u5b8c\u5168\u53ef\u4ee5\u7528\u6570\u7ec4\u6a21\u62df Generator \u7684\u8fd9\u79cd\u7528\u6cd5\u3002</p> <pre><code>function doStuff() {\n  return [\n    fs.readFile.bind(null, 'hello.txt'),\n    fs.readFile.bind(null, 'world.txt'),\n    fs.readFile.bind(null, 'and-such.txt')\n  ];\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u4e00\u6a21\u4e00\u6837\u7684<code>for...of</code>\u5faa\u73af\u5904\u7406\uff01\u4e24\u76f8\u4e00\u6bd4\u8f83\uff0c\u5c31\u4e0d\u96be\u770b\u51fa Generator \u4f7f\u5f97\u6570\u636e\u6216\u8005\u64cd\u4f5c\uff0c\u5177\u5907\u4e86\u7c7b\u4f3c\u6570\u7ec4\u7684\u63a5\u53e3\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/","title":"20-Generator \u51fd\u6570\u7684\u5f02\u6b65\u5e94\u7528","text":"<p>\u5f02\u6b65\u7f16\u7a0b\u5bf9 JavaScript \u8bed\u8a00\u592a\u91cd\u8981\u3002JavaScript \u8bed\u8a00\u7684\u6267\u884c\u73af\u5883\u662f\u201c\u5355\u7ebf\u7a0b\u201d\u7684\uff0c\u5982\u679c\u6ca1\u6709\u5f02\u6b65\u7f16\u7a0b\uff0c\u6839\u672c\u6ca1\u6cd5\u7528\uff0c\u975e\u5361\u6b7b\u4e0d\u53ef\u3002\u672c\u7ae0\u4e3b\u8981\u4ecb\u7ecd Generator \u51fd\u6570\u5982\u4f55\u5b8c\u6210\u5f02\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_1","title":"\u4f20\u7edf\u65b9\u6cd5","text":"<p>ES6 \u8bde\u751f\u4ee5\u524d\uff0c\u5f02\u6b65\u7f16\u7a0b\u7684\u65b9\u6cd5\uff0c\u5927\u6982\u6709\u4e0b\u9762\u56db\u79cd\u3002</p> <ul> <li>\u56de\u8c03\u51fd\u6570</li> <li>\u4e8b\u4ef6\u76d1\u542c</li> <li>\u53d1\u5e03/\u8ba2\u9605</li> <li>Promise \u5bf9\u8c61</li> </ul> <p>Generator \u51fd\u6570\u5c06 JavaScript \u5f02\u6b65\u7f16\u7a0b\u5e26\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u9636\u6bb5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_3","title":"\u5f02\u6b65","text":"<p>\u6240\u8c13\"\u5f02\u6b65\"\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u4e00\u4e2a\u4efb\u52a1\u4e0d\u662f\u8fde\u7eed\u5b8c\u6210\u7684\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u8be5\u4efb\u52a1\u88ab\u4eba\u4e3a\u5206\u6210\u4e24\u6bb5\uff0c\u5148\u6267\u884c\u7b2c\u4e00\u6bb5\uff0c\u7136\u540e\u8f6c\u800c\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u7b49\u505a\u597d\u4e86\u51c6\u5907\uff0c\u518d\u56de\u8fc7\u5934\u6267\u884c\u7b2c\u4e8c\u6bb5\u3002</p> <p>\u6bd4\u5982\uff0c\u6709\u4e00\u4e2a\u4efb\u52a1\u662f\u8bfb\u53d6\u6587\u4ef6\u8fdb\u884c\u5904\u7406\uff0c\u4efb\u52a1\u7684\u7b2c\u4e00\u6bb5\u662f\u5411\u64cd\u4f5c\u7cfb\u7edf\u53d1\u51fa\u8bf7\u6c42\uff0c\u8981\u6c42\u8bfb\u53d6\u6587\u4ef6\u3002\u7136\u540e\uff0c\u7a0b\u5e8f\u6267\u884c\u5176\u4ed6\u4efb\u52a1\uff0c\u7b49\u5230\u64cd\u4f5c\u7cfb\u7edf\u8fd4\u56de\u6587\u4ef6\uff0c\u518d\u63a5\u7740\u6267\u884c\u4efb\u52a1\u7684\u7b2c\u4e8c\u6bb5\uff08\u5904\u7406\u6587\u4ef6\uff09\u3002\u8fd9\u79cd\u4e0d\u8fde\u7eed\u7684\u6267\u884c\uff0c\u5c31\u53eb\u505a\u5f02\u6b65\u3002</p> <p>\u76f8\u5e94\u5730\uff0c\u8fde\u7eed\u7684\u6267\u884c\u5c31\u53eb\u505a\u540c\u6b65\u3002\u7531\u4e8e\u662f\u8fde\u7eed\u6267\u884c\uff0c\u4e0d\u80fd\u63d2\u5165\u5176\u4ed6\u4efb\u52a1\uff0c\u6240\u4ee5\u64cd\u4f5c\u7cfb\u7edf\u4ece\u786c\u76d8\u8bfb\u53d6\u6587\u4ef6\u7684\u8fd9\u6bb5\u65f6\u95f4\uff0c\u7a0b\u5e8f\u53ea\u80fd\u5e72\u7b49\u7740\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_4","title":"\u56de\u8c03\u51fd\u6570","text":"<p>JavaScript \u8bed\u8a00\u5bf9\u5f02\u6b65\u7f16\u7a0b\u7684\u5b9e\u73b0\uff0c\u5c31\u662f\u56de\u8c03\u51fd\u6570\u3002\u6240\u8c13\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u662f\u628a\u4efb\u52a1\u7684\u7b2c\u4e8c\u6bb5\u5355\u72ec\u5199\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u9762\uff0c\u7b49\u5230\u91cd\u65b0\u6267\u884c\u8fd9\u4e2a\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u5c31\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\u56de\u8c03\u51fd\u6570\u7684\u82f1\u8bed\u540d\u5b57<code>callback</code>\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\"\u91cd\u65b0\u8c03\u7528\"\u3002</p> <p>\u8bfb\u53d6\u6587\u4ef6\u8fdb\u884c\u5904\u7406\uff0c\u662f\u8fd9\u6837\u5199\u7684\u3002</p> <pre><code>fs.readFile('/etc/passwd', 'utf-8', function (err, data) {\n  if (err) throw err;\n  console.log(data);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>readFile</code>\u51fd\u6570\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u56de\u8c03\u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u4efb\u52a1\u7684\u7b2c\u4e8c\u6bb5\u3002\u7b49\u5230\u64cd\u4f5c\u7cfb\u7edf\u8fd4\u56de\u4e86<code>/etc/passwd</code>\u8fd9\u4e2a\u6587\u4ef6\u4ee5\u540e\uff0c\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u6267\u884c\u3002</p> <p>\u4e00\u4e2a\u6709\u8da3\u7684\u95ee\u9898\u662f\uff0c\u4e3a\u4ec0\u4e48 Node \u7ea6\u5b9a\uff0c\u56de\u8c03\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5fc5\u987b\u662f\u9519\u8bef\u5bf9\u8c61<code>err</code>\uff08\u5982\u679c\u6ca1\u6709\u9519\u8bef\uff0c\u8be5\u53c2\u6570\u5c31\u662f<code>null</code>\uff09\uff1f</p> <p>\u539f\u56e0\u662f\u6267\u884c\u5206\u6210\u4e24\u6bb5\uff0c\u7b2c\u4e00\u6bb5\u6267\u884c\u5b8c\u4ee5\u540e\uff0c\u4efb\u52a1\u6240\u5728\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5c31\u5df2\u7ecf\u7ed3\u675f\u4e86\u3002\u5728\u8fd9\u4ee5\u540e\u629b\u51fa\u7684\u9519\u8bef\uff0c\u539f\u6765\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5df2\u7ecf\u65e0\u6cd5\u6355\u6349\uff0c\u53ea\u80fd\u5f53\u4f5c\u53c2\u6570\uff0c\u4f20\u5165\u7b2c\u4e8c\u6bb5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#promise","title":"Promise","text":"<p>\u56de\u8c03\u51fd\u6570\u672c\u8eab\u5e76\u6ca1\u6709\u95ee\u9898\uff0c\u5b83\u7684\u95ee\u9898\u51fa\u73b0\u5728\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u5d4c\u5957\u3002\u5047\u5b9a\u8bfb\u53d6<code>A</code>\u6587\u4ef6\u4e4b\u540e\uff0c\u518d\u8bfb\u53d6<code>B</code>\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>fs.readFile(fileA, 'utf-8', function (err, data) {\n  fs.readFile(fileB, 'utf-8', function (err, data) {\n    // ...\n  });\n});\n</code></pre> <p>\u4e0d\u96be\u60f3\u8c61\uff0c\u5982\u679c\u4f9d\u6b21\u8bfb\u53d6\u4e24\u4e2a\u4ee5\u4e0a\u7684\u6587\u4ef6\uff0c\u5c31\u4f1a\u51fa\u73b0\u591a\u91cd\u5d4c\u5957\u3002\u4ee3\u7801\u4e0d\u662f\u7eb5\u5411\u53d1\u5c55\uff0c\u800c\u662f\u6a2a\u5411\u53d1\u5c55\uff0c\u5f88\u5feb\u5c31\u4f1a\u4e71\u6210\u4e00\u56e2\uff0c\u65e0\u6cd5\u7ba1\u7406\u3002\u56e0\u4e3a\u591a\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5f62\u6210\u4e86\u5f3a\u8026\u5408\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u64cd\u4f5c\u9700\u8981\u4fee\u6539\uff0c\u5b83\u7684\u4e0a\u5c42\u56de\u8c03\u51fd\u6570\u548c\u4e0b\u5c42\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u80fd\u90fd\u8981\u8ddf\u7740\u4fee\u6539\u3002\u8fd9\u79cd\u60c5\u51b5\u5c31\u79f0\u4e3a\"\u56de\u8c03\u51fd\u6570\u5730\u72f1\"\uff08callback hell\uff09\u3002</p> <p>Promise \u5bf9\u8c61\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u63d0\u51fa\u7684\u3002\u5b83\u4e0d\u662f\u65b0\u7684\u8bed\u6cd5\u529f\u80fd\uff0c\u800c\u662f\u4e00\u79cd\u65b0\u7684\u5199\u6cd5\uff0c\u5141\u8bb8\u5c06\u56de\u8c03\u51fd\u6570\u7684\u5d4c\u5957\uff0c\u6539\u6210\u94fe\u5f0f\u8c03\u7528\u3002\u91c7\u7528 Promise\uff0c\u8fde\u7eed\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\uff0c\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>var readFile = require('fs-readfile-promise');\n\nreadFile(fileA)\n.then(function (data) {\n  console.log(data.toString());\n})\n.then(function () {\n  return readFile(fileB);\n})\n.then(function (data) {\n  console.log(data.toString());\n})\n.catch(function (err) {\n  console.log(err);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4f7f\u7528\u4e86<code>fs-readfile-promise</code>\u6a21\u5757\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u8fd4\u56de\u4e00\u4e2a Promise \u7248\u672c\u7684<code>readFile</code>\u51fd\u6570\u3002Promise \u63d0\u4f9b<code>then</code>\u65b9\u6cd5\u52a0\u8f7d\u56de\u8c03\u51fd\u6570\uff0c<code>catch</code>\u65b9\u6cd5\u6355\u6349\u6267\u884c\u8fc7\u7a0b\u4e2d\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0cPromise \u7684\u5199\u6cd5\u53ea\u662f\u56de\u8c03\u51fd\u6570\u7684\u6539\u8fdb\uff0c\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u4ee5\u540e\uff0c\u5f02\u6b65\u4efb\u52a1\u7684\u4e24\u6bb5\u6267\u884c\u770b\u5f97\u66f4\u6e05\u695a\u4e86\uff0c\u9664\u6b64\u4ee5\u5916\uff0c\u5e76\u65e0\u65b0\u610f\u3002</p> <p>Promise \u7684\u6700\u5927\u95ee\u9898\u662f\u4ee3\u7801\u5197\u4f59\uff0c\u539f\u6765\u7684\u4efb\u52a1\u88ab Promise \u5305\u88c5\u4e86\u4e00\u4e0b\uff0c\u4e0d\u7ba1\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4e00\u773c\u770b\u53bb\u90fd\u662f\u4e00\u5806<code>then</code>\uff0c\u539f\u6765\u7684\u8bed\u4e49\u53d8\u5f97\u5f88\u4e0d\u6e05\u695a\u3002</p> <p>\u90a3\u4e48\uff0c\u6709\u6ca1\u6709\u66f4\u597d\u7684\u5199\u6cd5\u5462\uff1f</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#generator","title":"Generator \u51fd\u6570","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_5","title":"\u534f\u7a0b","text":"<p>\u4f20\u7edf\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u65e9\u6709\u5f02\u6b65\u7f16\u7a0b\u7684\u89e3\u51b3\u65b9\u6848\uff08\u5176\u5b9e\u662f\u591a\u4efb\u52a1\u7684\u89e3\u51b3\u65b9\u6848\uff09\u3002\u5176\u4e2d\u6709\u4e00\u79cd\u53eb\u505a\"\u534f\u7a0b\"\uff08coroutine\uff09\uff0c\u610f\u601d\u662f\u591a\u4e2a\u7ebf\u7a0b\u4e92\u76f8\u534f\u4f5c\uff0c\u5b8c\u6210\u5f02\u6b65\u4efb\u52a1\u3002</p> <p>\u534f\u7a0b\u6709\u70b9\u50cf\u51fd\u6570\uff0c\u53c8\u6709\u70b9\u50cf\u7ebf\u7a0b\u3002\u5b83\u7684\u8fd0\u884c\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\u3002</p> <ul> <li>\u7b2c\u4e00\u6b65\uff0c\u534f\u7a0b<code>A</code>\u5f00\u59cb\u6267\u884c\u3002</li> <li>\u7b2c\u4e8c\u6b65\uff0c\u534f\u7a0b<code>A</code>\u6267\u884c\u5230\u4e00\u534a\uff0c\u8fdb\u5165\u6682\u505c\uff0c\u6267\u884c\u6743\u8f6c\u79fb\u5230\u534f\u7a0b<code>B</code>\u3002</li> <li>\u7b2c\u4e09\u6b65\uff0c\uff08\u4e00\u6bb5\u65f6\u95f4\u540e\uff09\u534f\u7a0b<code>B</code>\u4ea4\u8fd8\u6267\u884c\u6743\u3002</li> <li>\u7b2c\u56db\u6b65\uff0c\u534f\u7a0b<code>A</code>\u6062\u590d\u6267\u884c\u3002</li> </ul> <p>\u4e0a\u9762\u6d41\u7a0b\u7684\u534f\u7a0b<code>A</code>\uff0c\u5c31\u662f\u5f02\u6b65\u4efb\u52a1\uff0c\u56e0\u4e3a\u5b83\u5206\u6210\u4e24\u6bb5\uff08\u6216\u591a\u6bb5\uff09\u6267\u884c\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u8bfb\u53d6\u6587\u4ef6\u7684\u534f\u7a0b\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function* asyncJob() {\n  // ...\u5176\u4ed6\u4ee3\u7801\n  var f = yield readFile(fileA);\n  // ...\u5176\u4ed6\u4ee3\u7801\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u51fd\u6570<code>asyncJob</code>\u662f\u4e00\u4e2a\u534f\u7a0b\uff0c\u5b83\u7684\u5965\u5999\u5c31\u5728\u5176\u4e2d\u7684<code>yield</code>\u547d\u4ee4\u3002\u5b83\u8868\u793a\u6267\u884c\u5230\u6b64\u5904\uff0c\u6267\u884c\u6743\u5c06\u4ea4\u7ed9\u5176\u4ed6\u534f\u7a0b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>yield</code>\u547d\u4ee4\u662f\u5f02\u6b65\u4e24\u4e2a\u9636\u6bb5\u7684\u5206\u754c\u7ebf\u3002</p> <p>\u534f\u7a0b\u9047\u5230<code>yield</code>\u547d\u4ee4\u5c31\u6682\u505c\uff0c\u7b49\u5230\u6267\u884c\u6743\u8fd4\u56de\uff0c\u518d\u4ece\u6682\u505c\u7684\u5730\u65b9\u7ee7\u7eed\u5f80\u540e\u6267\u884c\u3002\u5b83\u7684\u6700\u5927\u4f18\u70b9\uff0c\u5c31\u662f\u4ee3\u7801\u7684\u5199\u6cd5\u975e\u5e38\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u5982\u679c\u53bb\u9664<code>yield</code>\u547d\u4ee4\uff0c\u7b80\u76f4\u4e00\u6a21\u4e00\u6837\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#generator_1","title":"\u534f\u7a0b\u7684 Generator \u51fd\u6570\u5b9e\u73b0","text":"<p>Generator \u51fd\u6570\u662f\u534f\u7a0b\u5728 ES6 \u7684\u5b9e\u73b0\uff0c\u6700\u5927\u7279\u70b9\u5c31\u662f\u53ef\u4ee5\u4ea4\u51fa\u51fd\u6570\u7684\u6267\u884c\u6743\uff08\u5373\u6682\u505c\u6267\u884c\uff09\u3002</p> <p>\u6574\u4e2a Generator \u51fd\u6570\u5c31\u662f\u4e00\u4e2a\u5c01\u88c5\u7684\u5f02\u6b65\u4efb\u52a1\uff0c\u6216\u8005\u8bf4\u662f\u5f02\u6b65\u4efb\u52a1\u7684\u5bb9\u5668\u3002\u5f02\u6b65\u64cd\u4f5c\u9700\u8981\u6682\u505c\u7684\u5730\u65b9\uff0c\u90fd\u7528<code>yield</code>\u8bed\u53e5\u6ce8\u660e\u3002Generator \u51fd\u6570\u7684\u6267\u884c\u65b9\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function* gen(x) {\n  var y = yield x + 2;\n  return y;\n}\n\nvar g = gen(1);\ng.next() // { value: 3, done: false }\ng.next() // { value: undefined, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8c03\u7528 Generator \u51fd\u6570\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5185\u90e8\u6307\u9488\uff08\u5373\u904d\u5386\u5668\uff09<code>g</code>\u3002\u8fd9\u662f Generator \u51fd\u6570\u4e0d\u540c\u4e8e\u666e\u901a\u51fd\u6570\u7684\u53e6\u4e00\u4e2a\u5730\u65b9\uff0c\u5373\u6267\u884c\u5b83\u4e0d\u4f1a\u8fd4\u56de\u7ed3\u679c\uff0c\u8fd4\u56de\u7684\u662f\u6307\u9488\u5bf9\u8c61\u3002\u8c03\u7528\u6307\u9488<code>g</code>\u7684<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u79fb\u52a8\u5185\u90e8\u6307\u9488\uff08\u5373\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u7684\u7b2c\u4e00\u6bb5\uff09\uff0c\u6307\u5411\u7b2c\u4e00\u4e2a\u9047\u5230\u7684<code>yield</code>\u8bed\u53e5\uff0c\u4e0a\u4f8b\u662f\u6267\u884c\u5230<code>x + 2</code>\u4e3a\u6b62\u3002</p> <p>\u6362\u8a00\u4e4b\uff0c<code>next</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u5206\u9636\u6bb5\u6267\u884c<code>Generator</code>\u51fd\u6570\u3002\u6bcf\u6b21\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u9636\u6bb5\u7684\u4fe1\u606f\uff08<code>value</code>\u5c5e\u6027\u548c<code>done</code>\u5c5e\u6027\uff09\u3002<code>value</code>\u5c5e\u6027\u662f<code>yield</code>\u8bed\u53e5\u540e\u9762\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u8868\u793a\u5f53\u524d\u9636\u6bb5\u7684\u503c\uff1b<code>done</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a Generator \u51fd\u6570\u662f\u5426\u6267\u884c\u5b8c\u6bd5\uff0c\u5373\u662f\u5426\u8fd8\u6709\u4e0b\u4e00\u4e2a\u9636\u6bb5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#generator_2","title":"Generator \u51fd\u6570\u7684\u6570\u636e\u4ea4\u6362\u548c\u9519\u8bef\u5904\u7406","text":"<p>Generator \u51fd\u6570\u53ef\u4ee5\u6682\u505c\u6267\u884c\u548c\u6062\u590d\u6267\u884c\uff0c\u8fd9\u662f\u5b83\u80fd\u5c01\u88c5\u5f02\u6b65\u4efb\u52a1\u7684\u6839\u672c\u539f\u56e0\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u5b83\u8fd8\u6709\u4e24\u4e2a\u7279\u6027\uff0c\u4f7f\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u5f02\u6b65\u7f16\u7a0b\u7684\u5b8c\u6574\u89e3\u51b3\u65b9\u6848\uff1a\u51fd\u6570\u4f53\u5185\u5916\u7684\u6570\u636e\u4ea4\u6362\u548c\u9519\u8bef\u5904\u7406\u673a\u5236\u3002</p> <p><code>next</code>\u8fd4\u56de\u503c\u7684 value \u5c5e\u6027\uff0c\u662f Generator \u51fd\u6570\u5411\u5916\u8f93\u51fa\u6570\u636e\uff1b<code>next</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\uff0c\u5411 Generator \u51fd\u6570\u4f53\u5185\u8f93\u5165\u6570\u636e\u3002</p> <pre><code>function* gen(x){\n  var y = yield x + 2;\n  return y;\n}\n\nvar g = gen(1);\ng.next() // { value: 3, done: false }\ng.next(2) // { value: 2, done: true }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u7684<code>value</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u8868\u8fbe\u5f0f<code>x + 2</code>\u7684\u503c<code>3</code>\u3002\u7b2c\u4e8c\u4e2a<code>next</code>\u65b9\u6cd5\u5e26\u6709\u53c2\u6570<code>2</code>\uff0c\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u5165 Generator \u51fd\u6570\uff0c\u4f5c\u4e3a\u4e0a\u4e2a\u9636\u6bb5\u5f02\u6b65\u4efb\u52a1\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u88ab\u51fd\u6570\u4f53\u5185\u7684\u53d8\u91cf<code>y</code>\u63a5\u6536\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u6b65\u7684<code>value</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u7684\u5c31\u662f<code>2</code>\uff08\u53d8\u91cf<code>y</code>\u7684\u503c\uff09\u3002</p> <p>Generator \u51fd\u6570\u5185\u90e8\u8fd8\u53ef\u4ee5\u90e8\u7f72\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff0c\u6355\u83b7\u51fd\u6570\u4f53\u5916\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <pre><code>function* gen(x){\n  try {\n    var y = yield x + 2;\n  } catch (e){\n    console.log(e);\n  }\n  return y;\n}\n\nvar g = gen(1);\ng.next();\ng.throw('\u51fa\u9519\u4e86');\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\uff0cGenerator \u51fd\u6570\u4f53\u5916\uff0c\u4f7f\u7528\u6307\u9488\u5bf9\u8c61\u7684<code>throw</code>\u65b9\u6cd5\u629b\u51fa\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u88ab\u51fd\u6570\u4f53\u5185\u7684<code>try...catch</code>\u4ee3\u7801\u5757\u6355\u83b7\u3002\u8fd9\u610f\u5473\u7740\uff0c\u51fa\u9519\u7684\u4ee3\u7801\u4e0e\u5904\u7406\u9519\u8bef\u7684\u4ee3\u7801\uff0c\u5b9e\u73b0\u4e86\u65f6\u95f4\u548c\u7a7a\u95f4\u4e0a\u7684\u5206\u79bb\uff0c\u8fd9\u5bf9\u4e8e\u5f02\u6b65\u7f16\u7a0b\u65e0\u7591\u662f\u5f88\u91cd\u8981\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_6","title":"\u5f02\u6b65\u4efb\u52a1\u7684\u5c01\u88c5","text":"<p>\u4e0b\u9762\u770b\u770b\u5982\u4f55\u4f7f\u7528 Generator \u51fd\u6570\uff0c\u6267\u884c\u4e00\u4e2a\u771f\u5b9e\u7684\u5f02\u6b65\u4efb\u52a1\u3002</p> <pre><code>var fetch = require('node-fetch');\n\nfunction* gen(){\n  var url = 'https://api.github.com/users/github';\n  var result = yield fetch(url);\n  console.log(result.bio);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u5c01\u88c5\u4e86\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u8be5\u64cd\u4f5c\u5148\u8bfb\u53d6\u4e00\u4e2a\u8fdc\u7a0b\u63a5\u53e3\uff0c\u7136\u540e\u4ece JSON \u683c\u5f0f\u7684\u6570\u636e\u89e3\u6790\u4fe1\u606f\u3002\u5c31\u50cf\u524d\u9762\u8bf4\u8fc7\u7684\uff0c\u8fd9\u6bb5\u4ee3\u7801\u975e\u5e38\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u9664\u4e86\u52a0\u4e0a\u4e86<code>yield</code>\u547d\u4ee4\u3002</p> <p>\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\u7684\u65b9\u6cd5\u5982\u4e0b\u3002</p> <pre><code>var g = gen();\nvar result = g.next();\n\nresult.value.then(function(data){\n  return data.json();\n}).then(function(data){\n  g.next(data);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9996\u5148\u6267\u884c Generator \u51fd\u6570\uff0c\u83b7\u53d6\u904d\u5386\u5668\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528<code>next</code>\u65b9\u6cd5\uff08\u7b2c\u4e8c\u884c\uff09\uff0c\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u7684\u7b2c\u4e00\u9636\u6bb5\u3002\u7531\u4e8e<code>Fetch</code>\u6a21\u5757\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u56e0\u6b64\u8981\u7528<code>then</code>\u65b9\u6cd5\u8c03\u7528\u4e0b\u4e00\u4e2a<code>next</code>\u65b9\u6cd5\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u867d\u7136 Generator \u51fd\u6570\u5c06\u5f02\u6b65\u64cd\u4f5c\u8868\u793a\u5f97\u5f88\u7b80\u6d01\uff0c\u4f46\u662f\u6d41\u7a0b\u7ba1\u7406\u5374\u4e0d\u65b9\u4fbf\uff08\u5373\u4f55\u65f6\u6267\u884c\u7b2c\u4e00\u9636\u6bb5\u3001\u4f55\u65f6\u6267\u884c\u7b2c\u4e8c\u9636\u6bb5\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#thunk","title":"Thunk \u51fd\u6570","text":"<p>Thunk \u51fd\u6570\u662f\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_7","title":"\u53c2\u6570\u7684\u6c42\u503c\u7b56\u7565","text":"<p>Thunk \u51fd\u6570\u65e9\u5728\u4e0a\u4e2a\u4e16\u7eaa 60 \u5e74\u4ee3\u5c31\u8bde\u751f\u4e86\u3002</p> <p>\u90a3\u65f6\uff0c\u7f16\u7a0b\u8bed\u8a00\u521a\u521a\u8d77\u6b65\uff0c\u8ba1\u7b97\u673a\u5b66\u5bb6\u8fd8\u5728\u7814\u7a76\uff0c\u7f16\u8bd1\u5668\u600e\u4e48\u5199\u6bd4\u8f83\u597d\u3002\u4e00\u4e2a\u4e89\u8bba\u7684\u7126\u70b9\u662f\"\u6c42\u503c\u7b56\u7565\"\uff0c\u5373\u51fd\u6570\u7684\u53c2\u6570\u5230\u5e95\u5e94\u8be5\u4f55\u65f6\u6c42\u503c\u3002</p> <pre><code>var x = 1;\n\nfunction f(m) {\n  return m * 2;\n}\n\nf(x + 5)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u5b9a\u4e49\u51fd\u6570<code>f</code>\uff0c\u7136\u540e\u5411\u5b83\u4f20\u5165\u8868\u8fbe\u5f0f<code>x + 5</code>\u3002\u8bf7\u95ee\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5e94\u8be5\u4f55\u65f6\u6c42\u503c\uff1f</p> <p>\u4e00\u79cd\u610f\u89c1\u662f\"\u4f20\u503c\u8c03\u7528\"\uff08call by value\uff09\uff0c\u5373\u5728\u8fdb\u5165\u51fd\u6570\u4f53\u4e4b\u524d\uff0c\u5c31\u8ba1\u7b97<code>x + 5</code>\u7684\u503c\uff08\u7b49\u4e8e 6\uff09\uff0c\u518d\u5c06\u8fd9\u4e2a\u503c\u4f20\u5165\u51fd\u6570<code>f</code>\u3002C \u8bed\u8a00\u5c31\u91c7\u7528\u8fd9\u79cd\u7b56\u7565\u3002</p> <pre><code>f(x + 5)\n// \u4f20\u503c\u8c03\u7528\u65f6\uff0c\u7b49\u540c\u4e8e\nf(6)\n</code></pre> <p>\u53e6\u4e00\u79cd\u610f\u89c1\u662f\u201c\u4f20\u540d\u8c03\u7528\u201d\uff08call by name\uff09\uff0c\u5373\u76f4\u63a5\u5c06\u8868\u8fbe\u5f0f<code>x + 5</code>\u4f20\u5165\u51fd\u6570\u4f53\uff0c\u53ea\u5728\u7528\u5230\u5b83\u7684\u65f6\u5019\u6c42\u503c\u3002Haskell \u8bed\u8a00\u91c7\u7528\u8fd9\u79cd\u7b56\u7565\u3002</p> <pre><code>f(x + 5)\n// \u4f20\u540d\u8c03\u7528\u65f6\uff0c\u7b49\u540c\u4e8e\n(x + 5) * 2\n</code></pre> <p>\u4f20\u503c\u8c03\u7528\u548c\u4f20\u540d\u8c03\u7528\uff0c\u54ea\u4e00\u79cd\u6bd4\u8f83\u597d\uff1f</p> <p>\u56de\u7b54\u662f\u5404\u6709\u5229\u5f0a\u3002\u4f20\u503c\u8c03\u7528\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u5bf9\u53c2\u6570\u6c42\u503c\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u8fd8\u6ca1\u7528\u5230\u8fd9\u4e2a\u53c2\u6570\uff0c\u6709\u53ef\u80fd\u9020\u6210\u6027\u80fd\u635f\u5931\u3002</p> <pre><code>function f(a, b){\n  return b;\n}\n\nf(3 * x * x - 2 * x - 1, x);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u590d\u6742\u7684\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u51fd\u6570\u4f53\u5185\u6839\u672c\u6ca1\u7528\u5230\u3002\u5bf9\u8fd9\u4e2a\u53c2\u6570\u6c42\u503c\uff0c\u5b9e\u9645\u4e0a\u662f\u4e0d\u5fc5\u8981\u7684\u3002\u56e0\u6b64\uff0c\u6709\u4e00\u4e9b\u8ba1\u7b97\u673a\u5b66\u5bb6\u503e\u5411\u4e8e\"\u4f20\u540d\u8c03\u7528\"\uff0c\u5373\u53ea\u5728\u6267\u884c\u65f6\u6c42\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#thunk_1","title":"Thunk \u51fd\u6570\u7684\u542b\u4e49","text":"<p>\u7f16\u8bd1\u5668\u7684\u201c\u4f20\u540d\u8c03\u7528\u201d\u5b9e\u73b0\uff0c\u5f80\u5f80\u662f\u5c06\u53c2\u6570\u653e\u5230\u4e00\u4e2a\u4e34\u65f6\u51fd\u6570\u4e4b\u4e2d\uff0c\u518d\u5c06\u8fd9\u4e2a\u4e34\u65f6\u51fd\u6570\u4f20\u5165\u51fd\u6570\u4f53\u3002\u8fd9\u4e2a\u4e34\u65f6\u51fd\u6570\u5c31\u53eb\u505a Thunk \u51fd\u6570\u3002</p> <pre><code>function f(m) {\n  return m * 2;\n}\n\nf(x + 5);\n\n// \u7b49\u540c\u4e8e\n\nvar thunk = function () {\n  return x + 5;\n};\n\nfunction f(thunk) {\n  return thunk() * 2;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570 f \u7684\u53c2\u6570<code>x + 5</code>\u88ab\u4e00\u4e2a\u51fd\u6570\u66ff\u6362\u4e86\u3002\u51e1\u662f\u7528\u5230\u539f\u53c2\u6570\u7684\u5730\u65b9\uff0c\u5bf9<code>Thunk</code>\u51fd\u6570\u6c42\u503c\u5373\u53ef\u3002</p> <p>\u8fd9\u5c31\u662f Thunk \u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u5b83\u662f\u201c\u4f20\u540d\u8c03\u7528\u201d\u7684\u4e00\u79cd\u5b9e\u73b0\u7b56\u7565\uff0c\u7528\u6765\u66ff\u6362\u67d0\u4e2a\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#javascript-thunk","title":"JavaScript \u8bed\u8a00\u7684 Thunk \u51fd\u6570","text":"<p>JavaScript \u8bed\u8a00\u662f\u4f20\u503c\u8c03\u7528\uff0c\u5b83\u7684 Thunk \u51fd\u6570\u542b\u4e49\u6709\u6240\u4e0d\u540c\u3002\u5728 JavaScript \u8bed\u8a00\u4e2d\uff0cThunk \u51fd\u6570\u66ff\u6362\u7684\u4e0d\u662f\u8868\u8fbe\u5f0f\uff0c\u800c\u662f\u591a\u53c2\u6570\u51fd\u6570\uff0c\u5c06\u5176\u66ff\u6362\u6210\u4e00\u4e2a\u53ea\u63a5\u53d7\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u7684\u5355\u53c2\u6570\u51fd\u6570\u3002</p> <pre><code>// \u6b63\u5e38\u7248\u672c\u7684readFile\uff08\u591a\u53c2\u6570\u7248\u672c\uff09\nfs.readFile(fileName, callback);\n\n// Thunk\u7248\u672c\u7684readFile\uff08\u5355\u53c2\u6570\u7248\u672c\uff09\nvar Thunk = function (fileName) {\n  return function (callback) {\n    return fs.readFile(fileName, callback);\n  };\n};\n\nvar readFileThunk = Thunk(fileName);\nreadFileThunk(callback);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>fs</code>\u6a21\u5757\u7684<code>readFile</code>\u65b9\u6cd5\u662f\u4e00\u4e2a\u591a\u53c2\u6570\u51fd\u6570\uff0c\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u4e3a\u6587\u4ef6\u540d\u548c\u56de\u8c03\u51fd\u6570\u3002\u7ecf\u8fc7\u8f6c\u6362\u5668\u5904\u7406\uff0c\u5b83\u53d8\u6210\u4e86\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\uff0c\u53ea\u63a5\u53d7\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u4e2a\u5355\u53c2\u6570\u7248\u672c\uff0c\u5c31\u53eb\u505a Thunk \u51fd\u6570\u3002</p> <p>\u4efb\u4f55\u51fd\u6570\uff0c\u53ea\u8981\u53c2\u6570\u6709\u56de\u8c03\u51fd\u6570\uff0c\u5c31\u80fd\u5199\u6210 Thunk \u51fd\u6570\u7684\u5f62\u5f0f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684 Thunk \u51fd\u6570\u8f6c\u6362\u5668\u3002</p> <pre><code>// ES5\u7248\u672c\nvar Thunk = function(fn){\n  return function (){\n    var args = Array.prototype.slice.call(arguments);\n    return function (callback){\n      args.push(callback);\n      return fn.apply(this, args);\n    }\n  };\n};\n\n// ES6\u7248\u672c\nconst Thunk = function(fn) {\n  return function (...args) {\n    return function (callback) {\n      return fn.call(this, ...args, callback);\n    }\n  };\n};\n</code></pre> <p>\u4f7f\u7528\u4e0a\u9762\u7684\u8f6c\u6362\u5668\uff0c\u751f\u6210<code>fs.readFile</code>\u7684 Thunk \u51fd\u6570\u3002</p> <pre><code>var readFileThunk = Thunk(fs.readFile);\nreadFileThunk(fileA)(callback);\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u5b8c\u6574\u7684\u4f8b\u5b50\u3002</p> <pre><code>function f(a, cb) {\n  cb(a);\n}\nconst ft = Thunk(f);\n\nft(1)(console.log) // 1\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#thunkify","title":"Thunkify \u6a21\u5757","text":"<p>\u751f\u4ea7\u73af\u5883\u7684\u8f6c\u6362\u5668\uff0c\u5efa\u8bae\u4f7f\u7528 Thunkify \u6a21\u5757\u3002</p> <p>\u9996\u5148\u662f\u5b89\u88c5\u3002</p> <pre><code>$ npm install thunkify\n</code></pre> <p>\u4f7f\u7528\u65b9\u5f0f\u5982\u4e0b\u3002</p> <pre><code>var thunkify = require('thunkify');\nvar fs = require('fs');\n\nvar read = thunkify(fs.readFile);\nread('package.json')(function(err, str){\n  // ...\n});\n</code></pre> <p>Thunkify \u7684\u6e90\u7801\u4e0e\u4e0a\u4e00\u8282\u90a3\u4e2a\u7b80\u5355\u7684\u8f6c\u6362\u5668\u975e\u5e38\u50cf\u3002</p> <pre><code>function thunkify(fn) {\n  return function() {\n    var args = new Array(arguments.length);\n    var ctx = this;\n\n    for (var i = 0; i &lt; args.length; ++i) {\n      args[i] = arguments[i];\n    }\n\n    return function (done) {\n      var called;\n\n      args.push(function () {\n        if (called) return;\n        called = true;\n        done.apply(null, arguments);\n      });\n\n      try {\n        fn.apply(ctx, args);\n      } catch (err) {\n        done(err);\n      }\n    }\n  }\n};\n</code></pre> <p>\u5b83\u7684\u6e90\u7801\u4e3b\u8981\u591a\u4e86\u4e00\u4e2a\u68c0\u67e5\u673a\u5236\uff0c\u53d8\u91cf<code>called</code>\u786e\u4fdd\u56de\u8c03\u51fd\u6570\u53ea\u8fd0\u884c\u4e00\u6b21\u3002\u8fd9\u6837\u7684\u8bbe\u8ba1\u4e0e\u4e0b\u6587\u7684 Generator \u51fd\u6570\u76f8\u5173\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>function f(a, b, callback){\n  var sum = a + b;\n  callback(sum);\n  callback(sum);\n}\n\nvar ft = thunkify(f);\nvar print = console.log.bind(console);\nft(1, 2)(print);\n// 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e<code>thunkify</code>\u53ea\u5141\u8bb8\u56de\u8c03\u51fd\u6570\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u53ea\u8f93\u51fa\u4e00\u884c\u7ed3\u679c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#generator_3","title":"Generator \u51fd\u6570\u7684\u6d41\u7a0b\u7ba1\u7406","text":"<p>\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c Thunk \u51fd\u6570\u6709\u4ec0\u4e48\u7528\uff1f\u56de\u7b54\u662f\u4ee5\u524d\u786e\u5b9e\u6ca1\u4ec0\u4e48\u7528\uff0c\u4f46\u662f ES6 \u6709\u4e86 Generator \u51fd\u6570\uff0cThunk \u51fd\u6570\u73b0\u5728\u53ef\u4ee5\u7528\u4e8e Generator \u51fd\u6570\u7684\u81ea\u52a8\u6d41\u7a0b\u7ba1\u7406\u3002</p> <p>Generator \u51fd\u6570\u53ef\u4ee5\u81ea\u52a8\u6267\u884c\u3002</p> <pre><code>function* gen() {\n  // ...\n}\n\nvar g = gen();\nvar res = g.next();\n\nwhile(!res.done){\n  console.log(res.value);\n  res = g.next();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570<code>gen</code>\u4f1a\u81ea\u52a8\u6267\u884c\u5b8c\u6240\u6709\u6b65\u9aa4\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u4e0d\u9002\u5408\u5f02\u6b65\u64cd\u4f5c\u3002\u5982\u679c\u5fc5\u987b\u4fdd\u8bc1\u524d\u4e00\u6b65\u6267\u884c\u5b8c\uff0c\u624d\u80fd\u6267\u884c\u540e\u4e00\u6b65\uff0c\u4e0a\u9762\u7684\u81ea\u52a8\u6267\u884c\u5c31\u4e0d\u53ef\u884c\u3002\u8fd9\u65f6\uff0cThunk \u51fd\u6570\u5c31\u80fd\u6d3e\u4e0a\u7528\u5904\u3002\u4ee5\u8bfb\u53d6\u6587\u4ef6\u4e3a\u4f8b\u3002\u4e0b\u9762\u7684 Generator \u51fd\u6570\u5c01\u88c5\u4e86\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\u3002</p> <pre><code>var fs = require('fs');\nvar thunkify = require('thunkify');\nvar readFileThunk = thunkify(fs.readFile);\n\nvar gen = function* (){\n  var r1 = yield readFileThunk('/etc/fstab');\n  console.log(r1.toString());\n  var r2 = yield readFileThunk('/etc/shells');\n  console.log(r2.toString());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>yield</code>\u547d\u4ee4\u7528\u4e8e\u5c06\u7a0b\u5e8f\u7684\u6267\u884c\u6743\u79fb\u51fa Generator \u51fd\u6570\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u79cd\u65b9\u6cd5\uff0c\u5c06\u6267\u884c\u6743\u518d\u4ea4\u8fd8\u7ed9 Generator \u51fd\u6570\u3002</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u5c31\u662f Thunk \u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u5728\u56de\u8c03\u51fd\u6570\u91cc\uff0c\u5c06\u6267\u884c\u6743\u4ea4\u8fd8\u7ed9 Generator \u51fd\u6570\u3002\u4e3a\u4e86\u4fbf\u4e8e\u7406\u89e3\uff0c\u6211\u4eec\u5148\u770b\u5982\u4f55\u624b\u52a8\u6267\u884c\u4e0a\u9762\u8fd9\u4e2a Generator \u51fd\u6570\u3002</p> <pre><code>var g = gen();\n\nvar r1 = g.next();\nr1.value(function (err, data) {\n  if (err) throw err;\n  var r2 = g.next(data);\n  r2.value(function (err, data) {\n    if (err) throw err;\n    g.next(data);\n  });\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>g</code>\u662f Generator \u51fd\u6570\u7684\u5185\u90e8\u6307\u9488\uff0c\u8868\u793a\u76ee\u524d\u6267\u884c\u5230\u54ea\u4e00\u6b65\u3002<code>next</code>\u65b9\u6cd5\u8d1f\u8d23\u5c06\u6307\u9488\u79fb\u52a8\u5230\u4e0b\u4e00\u6b65\uff0c\u5e76\u8fd4\u56de\u8be5\u6b65\u7684\u4fe1\u606f\uff08<code>value</code>\u5c5e\u6027\u548c<code>done</code>\u5c5e\u6027\uff09\u3002</p> <p>\u4ed4\u7ec6\u67e5\u770b\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u53d1\u73b0 Generator \u51fd\u6570\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u5176\u5b9e\u662f\u5c06\u540c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u53cd\u590d\u4f20\u5165<code>next</code>\u65b9\u6cd5\u7684<code>value</code>\u5c5e\u6027\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u7528\u9012\u5f52\u6765\u81ea\u52a8\u5b8c\u6210\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#thunk_2","title":"Thunk \u51fd\u6570\u7684\u81ea\u52a8\u6d41\u7a0b\u7ba1\u7406","text":"<p>Thunk \u51fd\u6570\u771f\u6b63\u7684\u5a01\u529b\uff0c\u5728\u4e8e\u53ef\u4ee5\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\u3002\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u57fa\u4e8e Thunk \u51fd\u6570\u7684 Generator \u6267\u884c\u5668\u3002</p> <pre><code>function run(fn) {\n  var gen = fn();\n\n  function next(err, data) {\n    var result = gen.next(data);\n    if (result.done) return;\n    result.value(next);\n  }\n\n  next();\n}\n\nfunction* g() {\n  // ...\n}\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>run</code>\u51fd\u6570\uff0c\u5c31\u662f\u4e00\u4e2a Generator \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u5185\u90e8\u7684<code>next</code>\u51fd\u6570\u5c31\u662f Thunk \u7684\u56de\u8c03\u51fd\u6570\u3002<code>next</code>\u51fd\u6570\u5148\u5c06\u6307\u9488\u79fb\u5230 Generator \u51fd\u6570\u7684\u4e0b\u4e00\u6b65\uff08<code>gen.next</code>\u65b9\u6cd5\uff09\uff0c\u7136\u540e\u5224\u65ad Generator \u51fd\u6570\u662f\u5426\u7ed3\u675f\uff08<code>result.done</code>\u5c5e\u6027\uff09\uff0c\u5982\u679c\u6ca1\u7ed3\u675f\uff0c\u5c31\u5c06<code>next</code>\u51fd\u6570\u518d\u4f20\u5165 Thunk \u51fd\u6570\uff08<code>result.value</code>\u5c5e\u6027\uff09\uff0c\u5426\u5219\u5c31\u76f4\u63a5\u9000\u51fa\u3002</p> <p>\u6709\u4e86\u8fd9\u4e2a\u6267\u884c\u5668\uff0c\u6267\u884c Generator \u51fd\u6570\u65b9\u4fbf\u591a\u4e86\u3002\u4e0d\u7ba1\u5185\u90e8\u6709\u591a\u5c11\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u76f4\u63a5\u628a Generator \u51fd\u6570\u4f20\u5165<code>run</code>\u51fd\u6570\u5373\u53ef\u3002\u5f53\u7136\uff0c\u524d\u63d0\u662f\u6bcf\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u90fd\u8981\u662f Thunk \u51fd\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ddf\u5728<code>yield</code>\u547d\u4ee4\u540e\u9762\u7684\u5fc5\u987b\u662f Thunk \u51fd\u6570\u3002</p> <pre><code>var g = function* (){\n  var f1 = yield readFileThunk('fileA');\n  var f2 = yield readFileThunk('fileB');\n  // ...\n  var fn = yield readFileThunk('fileN');\n};\n\nrun(g);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>g</code>\u5c01\u88c5\u4e86<code>n</code>\u4e2a\u5f02\u6b65\u7684\u8bfb\u53d6\u6587\u4ef6\u64cd\u4f5c\uff0c\u53ea\u8981\u6267\u884c<code>run</code>\u51fd\u6570\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u5c31\u4f1a\u81ea\u52a8\u5b8c\u6210\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5f02\u6b65\u64cd\u4f5c\u4e0d\u4ec5\u53ef\u4ee5\u5199\u5f97\u50cf\u540c\u6b65\u64cd\u4f5c\uff0c\u800c\u4e14\u4e00\u884c\u4ee3\u7801\u5c31\u53ef\u4ee5\u6267\u884c\u3002</p> <p>Thunk \u51fd\u6570\u5e76\u4e0d\u662f Generator \u51fd\u6570\u81ea\u52a8\u6267\u884c\u7684\u552f\u4e00\u65b9\u6848\u3002\u56e0\u4e3a\u81ea\u52a8\u6267\u884c\u7684\u5173\u952e\u662f\uff0c\u5fc5\u987b\u6709\u4e00\u79cd\u673a\u5236\uff0c\u81ea\u52a8\u63a7\u5236 Generator \u51fd\u6570\u7684\u6d41\u7a0b\uff0c\u63a5\u6536\u548c\u4ea4\u8fd8\u7a0b\u5e8f\u7684\u6267\u884c\u6743\u3002\u56de\u8c03\u51fd\u6570\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\uff0cPromise \u5bf9\u8c61\u4e5f\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#co","title":"co \u6a21\u5757","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_8","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>co \u6a21\u5757\u662f\u8457\u540d\u7a0b\u5e8f\u5458 TJ Holowaychuk \u4e8e 2013 \u5e74 6 \u6708\u53d1\u5e03\u7684\u4e00\u4e2a\u5c0f\u5de5\u5177\uff0c\u7528\u4e8e Generator \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u7528\u4e8e\u4f9d\u6b21\u8bfb\u53d6\u4e24\u4e2a\u6587\u4ef6\u3002</p> <pre><code>var gen = function* () {\n  var f1 = yield readFile('/etc/fstab');\n  var f2 = yield readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>co \u6a21\u5757\u53ef\u4ee5\u8ba9\u4f60\u4e0d\u7528\u7f16\u5199 Generator \u51fd\u6570\u7684\u6267\u884c\u5668\u3002</p> <pre><code>var co = require('co');\nco(gen);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cGenerator \u51fd\u6570\u53ea\u8981\u4f20\u5165<code>co</code>\u51fd\u6570\uff0c\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002</p> <p><code>co</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002</p> <pre><code>co(gen).then(function (){\n  console.log('Generator \u51fd\u6570\u6267\u884c\u5b8c\u6210');\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b49\u5230 Generator \u51fd\u6570\u6267\u884c\u7ed3\u675f\uff0c\u5c31\u4f1a\u8f93\u51fa\u4e00\u884c\u63d0\u793a\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#co_1","title":"co \u6a21\u5757\u7684\u539f\u7406","text":"<p>\u4e3a\u4ec0\u4e48 co \u53ef\u4ee5\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\uff1f</p> <p>\u524d\u9762\u8bf4\u8fc7\uff0cGenerator \u5c31\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u7684\u5bb9\u5668\u3002\u5b83\u7684\u81ea\u52a8\u6267\u884c\u9700\u8981\u4e00\u79cd\u673a\u5236\uff0c\u5f53\u5f02\u6b65\u64cd\u4f5c\u6709\u4e86\u7ed3\u679c\uff0c\u80fd\u591f\u81ea\u52a8\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230\u8fd9\u4e00\u70b9\u3002</p> <p>\uff081\uff09\u56de\u8c03\u51fd\u6570\u3002\u5c06\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u6210 Thunk \u51fd\u6570\uff0c\u5728\u56de\u8c03\u51fd\u6570\u91cc\u9762\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>\uff082\uff09Promise \u5bf9\u8c61\u3002\u5c06\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u6210 Promise \u5bf9\u8c61\uff0c\u7528<code>then</code>\u65b9\u6cd5\u4ea4\u56de\u6267\u884c\u6743\u3002</p> <p>co \u6a21\u5757\u5176\u5b9e\u5c31\u662f\u5c06\u4e24\u79cd\u81ea\u52a8\u6267\u884c\u5668\uff08Thunk \u51fd\u6570\u548c Promise \u5bf9\u8c61\uff09\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u6a21\u5757\u3002\u4f7f\u7528 co \u7684\u524d\u63d0\u6761\u4ef6\u662f\uff0cGenerator \u51fd\u6570\u7684<code>yield</code>\u547d\u4ee4\u540e\u9762\uff0c\u53ea\u80fd\u662f Thunk \u51fd\u6570\u6216 Promise \u5bf9\u8c61\u3002\u5982\u679c\u6570\u7ec4\u6216\u5bf9\u8c61\u7684\u6210\u5458\uff0c\u5168\u90e8\u90fd\u662f Promise \u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 co\uff0c\u8be6\u89c1\u540e\u6587\u7684\u4f8b\u5b50\u3002</p> <p>\u4e0a\u4e00\u8282\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u57fa\u4e8e Thunk \u51fd\u6570\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u4e0b\u9762\u6765\u770b\uff0c\u57fa\u4e8e Promise \u5bf9\u8c61\u7684\u81ea\u52a8\u6267\u884c\u5668\u3002\u8fd9\u662f\u7406\u89e3 co \u6a21\u5757\u5fc5\u987b\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#promise_1","title":"\u57fa\u4e8e Promise \u5bf9\u8c61\u7684\u81ea\u52a8\u6267\u884c","text":"<p>\u8fd8\u662f\u6cbf\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\u3002\u9996\u5148\uff0c\u628a<code>fs</code>\u6a21\u5757\u7684<code>readFile</code>\u65b9\u6cd5\u5305\u88c5\u6210\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>var fs = require('fs');\n\nvar readFile = function (fileName){\n  return new Promise(function (resolve, reject){\n    fs.readFile(fileName, function(error, data){\n      if (error) return reject(error);\n      resolve(data);\n    });\n  });\n};\n\nvar gen = function* (){\n  var f1 = yield readFile('/etc/fstab');\n  var f2 = yield readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>\u7136\u540e\uff0c\u624b\u52a8\u6267\u884c\u4e0a\u9762\u7684 Generator \u51fd\u6570\u3002</p> <pre><code>var g = gen();\n\ng.next().value.then(function(data){\n  g.next(data).value.then(function(data){\n    g.next(data);\n  });\n});\n</code></pre> <p>\u624b\u52a8\u6267\u884c\u5176\u5b9e\u5c31\u662f\u7528<code>then</code>\u65b9\u6cd5\uff0c\u5c42\u5c42\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002\u7406\u89e3\u4e86\u8fd9\u4e00\u70b9\uff0c\u5c31\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a\u81ea\u52a8\u6267\u884c\u5668\u3002</p> <pre><code>function run(gen){\n  var g = gen();\n\n  function next(data){\n    var result = g.next(data);\n    if (result.done) return result.value;\n    result.value.then(function(data){\n      next(data);\n    });\n  }\n\n  next();\n}\n\nrun(gen);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53ea\u8981 Generator \u51fd\u6570\u8fd8\u6ca1\u6267\u884c\u5230\u6700\u540e\u4e00\u6b65\uff0c<code>next</code>\u51fd\u6570\u5c31\u8c03\u7528\u81ea\u8eab\uff0c\u4ee5\u6b64\u5b9e\u73b0\u81ea\u52a8\u6267\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#co_2","title":"co \u6a21\u5757\u7684\u6e90\u7801","text":"<p>co \u5c31\u662f\u4e0a\u9762\u90a3\u4e2a\u81ea\u52a8\u6267\u884c\u5668\u7684\u6269\u5c55\uff0c\u5b83\u7684\u6e90\u7801\u53ea\u6709\u51e0\u5341\u884c\uff0c\u975e\u5e38\u7b80\u5355\u3002</p> <p>\u9996\u5148\uff0cco \u51fd\u6570\u63a5\u53d7 Generator \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n  });\n}\n</code></pre> <p>\u5728\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u91cc\u9762\uff0cco \u5148\u68c0\u67e5\u53c2\u6570<code>gen</code>\u662f\u5426\u4e3a Generator \u51fd\u6570\u3002\u5982\u679c\u662f\uff0c\u5c31\u6267\u884c\u8be5\u51fd\u6570\uff0c\u5f97\u5230\u4e00\u4e2a\u5185\u90e8\u6307\u9488\u5bf9\u8c61\uff1b\u5982\u679c\u4e0d\u662f\u5c31\u8fd4\u56de\uff0c\u5e76\u5c06 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u6539\u4e3a<code>resolved</code>\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.call(ctx);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n  });\n}\n</code></pre> <p>\u63a5\u7740\uff0cco \u5c06 Generator \u51fd\u6570\u7684\u5185\u90e8\u6307\u9488\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5305\u88c5\u6210<code>onFulfilled</code>\u51fd\u6570\u3002\u8fd9\u4e3b\u8981\u662f\u4e3a\u4e86\u80fd\u591f\u6355\u6349\u629b\u51fa\u7684\u9519\u8bef\u3002</p> <pre><code>function co(gen) {\n  var ctx = this;\n\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.call(ctx);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n  });\n}\n</code></pre> <p>\u6700\u540e\uff0c\u5c31\u662f\u5173\u952e\u7684<code>next</code>\u51fd\u6570\uff0c\u5b83\u4f1a\u53cd\u590d\u8c03\u7528\u81ea\u8eab\u3002</p> <pre><code>function next(ret) {\n  if (ret.done) return resolve(ret.value);\n  var value = toPromise.call(ctx, ret.value);\n  if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected);\n  return onRejected(\n    new TypeError(\n      'You may only yield a function, promise, generator, array, or object, '\n      + 'but the following object was passed: \"'\n      + String(ret.value)\n      + '\"'\n    )\n  );\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>next</code>\u51fd\u6570\u7684\u5185\u90e8\u4ee3\u7801\uff0c\u4e00\u5171\u53ea\u6709\u56db\u884c\u547d\u4ee4\u3002</p> <p>\u7b2c\u4e00\u884c\uff0c\u68c0\u67e5\u5f53\u524d\u662f\u5426\u4e3a Generator \u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\uff0c\u5982\u679c\u662f\u5c31\u8fd4\u56de\u3002</p> <p>\u7b2c\u4e8c\u884c\uff0c\u786e\u4fdd\u6bcf\u4e00\u6b65\u7684\u8fd4\u56de\u503c\uff0c\u662f Promise \u5bf9\u8c61\u3002</p> <p>\u7b2c\u4e09\u884c\uff0c\u4f7f\u7528<code>then</code>\u65b9\u6cd5\uff0c\u4e3a\u8fd4\u56de\u503c\u52a0\u4e0a\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u901a\u8fc7<code>onFulfilled</code>\u51fd\u6570\u518d\u6b21\u8c03\u7528<code>next</code>\u51fd\u6570\u3002</p> <p>\u7b2c\u56db\u884c\uff0c\u5728\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u60c5\u51b5\u4e0b\uff08\u53c2\u6570\u975e Thunk \u51fd\u6570\u548c Promise \u5bf9\u8c61\uff09\uff0c\u5c06 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u6539\u4e3a<code>rejected</code>\uff0c\u4ece\u800c\u7ec8\u6b62\u6267\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#_9","title":"\u5904\u7406\u5e76\u53d1\u7684\u5f02\u6b65\u64cd\u4f5c","text":"<p>co \u652f\u6301\u5e76\u53d1\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5373\u5141\u8bb8\u67d0\u4e9b\u64cd\u4f5c\u540c\u65f6\u8fdb\u884c\uff0c\u7b49\u5230\u5b83\u4eec\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</p> <p>\u8fd9\u65f6\uff0c\u8981\u628a\u5e76\u53d1\u7684\u64cd\u4f5c\u90fd\u653e\u5728\u6570\u7ec4\u6216\u5bf9\u8c61\u91cc\u9762\uff0c\u8ddf\u5728<code>yield</code>\u8bed\u53e5\u540e\u9762\u3002</p> <pre><code>// \u6570\u7ec4\u7684\u5199\u6cd5\nco(function* () {\n  var res = yield [\n    Promise.resolve(1),\n    Promise.resolve(2)\n  ];\n  console.log(res);\n}).catch(onerror);\n\n// \u5bf9\u8c61\u7684\u5199\u6cd5\nco(function* () {\n  var res = yield {\n    1: Promise.resolve(1),\n    2: Promise.resolve(2),\n  };\n  console.log(res);\n}).catch(onerror);\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>co(function* () {\n  var values = [n1, n2, n3];\n  yield values.map(somethingAsync);\n});\n\nfunction* somethingAsync(x) {\n  // do something async\n  return y\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u5141\u8bb8\u5e76\u53d1\u4e09\u4e2a<code>somethingAsync</code>\u5f02\u6b65\u64cd\u4f5c\uff0c\u7b49\u5230\u5b83\u4eec\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b65\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/20-generator-async/#stream","title":"\u5b9e\u4f8b\uff1a\u5904\u7406 Stream","text":"<p>Node \u63d0\u4f9b Stream \u6a21\u5f0f\u8bfb\u5199\u6570\u636e\uff0c\u7279\u70b9\u662f\u4e00\u6b21\u53ea\u5904\u7406\u6570\u636e\u7684\u4e00\u90e8\u5206\uff0c\u6570\u636e\u5206\u6210\u4e00\u5757\u5757\u4f9d\u6b21\u5904\u7406\uff0c\u5c31\u597d\u50cf\u201c\u6570\u636e\u6d41\u201d\u4e00\u6837\u3002\u8fd9\u5bf9\u4e8e\u5904\u7406\u5927\u89c4\u6a21\u6570\u636e\u975e\u5e38\u6709\u5229\u3002Stream \u6a21\u5f0f\u4f7f\u7528 EventEmitter API\uff0c\u4f1a\u91ca\u653e\u4e09\u4e2a\u4e8b\u4ef6\u3002</p> <ul> <li><code>data</code>\u4e8b\u4ef6\uff1a\u4e0b\u4e00\u5757\u6570\u636e\u5757\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u3002</li> <li><code>end</code>\u4e8b\u4ef6\uff1a\u6574\u4e2a\u201c\u6570\u636e\u6d41\u201d\u5904\u7406\u5b8c\u4e86\u3002</li> <li><code>error</code>\u4e8b\u4ef6\uff1a\u53d1\u751f\u9519\u8bef\u3002</li> </ul> <p>\u4f7f\u7528<code>Promise.race()</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u5224\u65ad\u8fd9\u4e09\u4e2a\u4e8b\u4ef6\u4e4b\u4e2d\u54ea\u4e00\u4e2a\u6700\u5148\u53d1\u751f\uff0c\u53ea\u6709\u5f53<code>data</code>\u4e8b\u4ef6\u6700\u5148\u53d1\u751f\u65f6\uff0c\u624d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u6570\u636e\u5757\u7684\u5904\u7406\u3002\u4ece\u800c\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a<code>while</code>\u5faa\u73af\uff0c\u5b8c\u6210\u6240\u6709\u6570\u636e\u7684\u8bfb\u53d6\u3002</p> <pre><code>const co = require('co');\nconst fs = require('fs');\n\nconst stream = fs.createReadStream('./les_miserables.txt');\nlet valjeanCount = 0;\n\nco(function*() {\n  while(true) {\n    const res = yield Promise.race([\n      new Promise(resolve =&gt; stream.once('data', resolve)),\n      new Promise(resolve =&gt; stream.once('end', resolve)),\n      new Promise((resolve, reject) =&gt; stream.once('error', reject))\n    ]);\n    if (!res) {\n      break;\n    }\n    stream.removeAllListeners('data');\n    stream.removeAllListeners('end');\n    stream.removeAllListeners('error');\n    valjeanCount += (res.toString().match(/valjean/ig) || []).length;\n  }\n  console.log('count:', valjeanCount); // count: 1120\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u91c7\u7528 Stream \u6a21\u5f0f\u8bfb\u53d6\u300a\u60b2\u60e8\u4e16\u754c\u300b\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u636e\u5757\u90fd\u4f7f\u7528<code>stream.once</code>\u65b9\u6cd5\uff0c\u5728<code>data</code>\u3001<code>end</code>\u3001<code>error</code>\u4e09\u4e2a\u4e8b\u4ef6\u4e0a\u6dfb\u52a0\u4e00\u6b21\u6027\u56de\u8c03\u51fd\u6570\u3002\u53d8\u91cf<code>res</code>\u53ea\u6709\u5728<code>data</code>\u4e8b\u4ef6\u53d1\u751f\u65f6\u624d\u6709\u503c\uff0c\u7136\u540e\u7d2f\u52a0\u6bcf\u4e2a\u6570\u636e\u5757\u4e4b\u4e2d<code>valjean</code>\u8fd9\u4e2a\u8bcd\u51fa\u73b0\u7684\u6b21\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/","title":"21-async \u51fd\u6570","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_1","title":"\u542b\u4e49","text":"<p>ES2017 \u6807\u51c6\u5f15\u5165\u4e86 async \u51fd\u6570\uff0c\u4f7f\u5f97\u5f02\u6b65\u64cd\u4f5c\u53d8\u5f97\u66f4\u52a0\u65b9\u4fbf\u3002</p> <p>async \u51fd\u6570\u662f\u4ec0\u4e48\uff1f\u4e00\u53e5\u8bdd\uff0c\u5b83\u5c31\u662f Generator \u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\u3002</p> <p>\u524d\u6587\u6709\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u4f9d\u6b21\u8bfb\u53d6\u4e24\u4e2a\u6587\u4ef6\u3002</p> <pre><code>const fs = require('fs');\n\nconst readFile = function (fileName) {\n  return new Promise(function (resolve, reject) {\n    fs.readFile(fileName, function(error, data) {\n      if (error) return reject(error);\n      resolve(data);\n    });\n  });\n};\n\nconst gen = function* () {\n  const f1 = yield readFile('/etc/fstab');\n  const f2 = yield readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u51fd\u6570<code>gen</code>\u53ef\u4ee5\u5199\u6210<code>async</code>\u51fd\u6570\uff0c\u5c31\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>const asyncReadFile = async function () {\n  const f1 = await readFile('/etc/fstab');\n  const f2 = await readFile('/etc/shells');\n  console.log(f1.toString());\n  console.log(f2.toString());\n};\n</code></pre> <p>\u4e00\u6bd4\u8f83\u5c31\u4f1a\u53d1\u73b0\uff0c<code>async</code>\u51fd\u6570\u5c31\u662f\u5c06 Generator \u51fd\u6570\u7684\u661f\u53f7\uff08<code>*</code>\uff09\u66ff\u6362\u6210<code>async</code>\uff0c\u5c06<code>yield</code>\u66ff\u6362\u6210<code>await</code>\uff0c\u4ec5\u6b64\u800c\u5df2\u3002</p> <p><code>async</code>\u51fd\u6570\u5bf9 Generator \u51fd\u6570\u7684\u6539\u8fdb\uff0c\u4f53\u73b0\u5728\u4ee5\u4e0b\u56db\u70b9\u3002</p> <p>\uff081\uff09\u5185\u7f6e\u6267\u884c\u5668\u3002</p> <p>Generator \u51fd\u6570\u7684\u6267\u884c\u5fc5\u987b\u9760\u6267\u884c\u5668\uff0c\u6240\u4ee5\u624d\u6709\u4e86<code>co</code>\u6a21\u5757\uff0c\u800c<code>async</code>\u51fd\u6570\u81ea\u5e26\u6267\u884c\u5668\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>async</code>\u51fd\u6570\u7684\u6267\u884c\uff0c\u4e0e\u666e\u901a\u51fd\u6570\u4e00\u6a21\u4e00\u6837\uff0c\u53ea\u8981\u4e00\u884c\u3002</p> <pre><code>asyncReadFile();\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8c03\u7528\u4e86<code>asyncReadFile</code>\u51fd\u6570\uff0c\u7136\u540e\u5b83\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u8f93\u51fa\u6700\u540e\u7ed3\u679c\u3002\u8fd9\u5b8c\u5168\u4e0d\u50cf Generator \u51fd\u6570\uff0c\u9700\u8981\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u6216\u8005\u7528<code>co</code>\u6a21\u5757\uff0c\u624d\u80fd\u771f\u6b63\u6267\u884c\uff0c\u5f97\u5230\u6700\u540e\u7ed3\u679c\u3002</p> <p>\uff082\uff09\u66f4\u597d\u7684\u8bed\u4e49\u3002</p> <p><code>async</code>\u548c<code>await</code>\uff0c\u6bd4\u8d77\u661f\u53f7\u548c<code>yield</code>\uff0c\u8bed\u4e49\u66f4\u6e05\u695a\u4e86\u3002<code>async</code>\u8868\u793a\u51fd\u6570\u91cc\u6709\u5f02\u6b65\u64cd\u4f5c\uff0c<code>await</code>\u8868\u793a\u7d27\u8ddf\u5728\u540e\u9762\u7684\u8868\u8fbe\u5f0f\u9700\u8981\u7b49\u5f85\u7ed3\u679c\u3002</p> <p>\uff083\uff09\u66f4\u5e7f\u7684\u9002\u7528\u6027\u3002</p> <p><code>co</code>\u6a21\u5757\u7ea6\u5b9a\uff0c<code>yield</code>\u547d\u4ee4\u540e\u9762\u53ea\u80fd\u662f Thunk \u51fd\u6570\u6216 Promise \u5bf9\u8c61\uff0c\u800c<code>async</code>\u51fd\u6570\u7684<code>await</code>\u547d\u4ee4\u540e\u9762\uff0c\u53ef\u4ee5\u662f Promise \u5bf9\u8c61\u548c\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff08\u6570\u503c\u3001\u5b57\u7b26\u4e32\u548c\u5e03\u5c14\u503c\uff0c\u4f46\u8fd9\u65f6\u4f1a\u81ea\u52a8\u8f6c\u6210\u7acb\u5373 resolved \u7684 Promise \u5bf9\u8c61\uff09\u3002</p> <p>\uff084\uff09\u8fd4\u56de\u503c\u662f Promise\u3002</p> <p><code>async</code>\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f Promise \u5bf9\u8c61\uff0c\u8fd9\u6bd4 Generator \u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f Iterator \u5bf9\u8c61\u65b9\u4fbf\u591a\u4e86\u3002\u4f60\u53ef\u4ee5\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u4e0b\u4e00\u6b65\u7684\u64cd\u4f5c\u3002</p> <p>\u8fdb\u4e00\u6b65\u8bf4\uff0c<code>async</code>\u51fd\u6570\u5b8c\u5168\u53ef\u4ee5\u770b\u4f5c\u591a\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u5305\u88c5\u6210\u7684\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u800c<code>await</code>\u547d\u4ee4\u5c31\u662f\u5185\u90e8<code>then</code>\u547d\u4ee4\u7684\u8bed\u6cd5\u7cd6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\u3002\u5f53\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\uff0c\u4e00\u65e6\u9047\u5230<code>await</code>\u5c31\u4f1a\u5148\u8fd4\u56de\uff0c\u7b49\u5230\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u518d\u63a5\u7740\u6267\u884c\u51fd\u6570\u4f53\u5185\u540e\u9762\u7684\u8bed\u53e5\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>async function getStockPriceByName(name) {\n  const symbol = await getStockSymbol(name);\n  const stockPrice = await getStockPrice(symbol);\n  return stockPrice;\n}\n\ngetStockPriceByName('goog').then(function (result) {\n  console.log(result);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u83b7\u53d6\u80a1\u7968\u62a5\u4ef7\u7684\u51fd\u6570\uff0c\u51fd\u6570\u524d\u9762\u7684<code>async</code>\u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u51fd\u6570\u5185\u90e8\u6709\u5f02\u6b65\u64cd\u4f5c\u3002\u8c03\u7528\u8be5\u51fd\u6570\u65f6\uff0c\u4f1a\u7acb\u5373\u8fd4\u56de\u4e00\u4e2a<code>Promise</code>\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6307\u5b9a\u591a\u5c11\u6beb\u79d2\u540e\u8f93\u51fa\u4e00\u4e2a\u503c\u3002</p> <pre><code>function timeout(ms) {\n  return new Promise((resolve) =&gt; {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function asyncPrint(value, ms) {\n  await timeout(ms);\n  console.log(value);\n}\n\nasyncPrint('hello world', 50);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a 50 \u6beb\u79d2\u4ee5\u540e\uff0c\u8f93\u51fa<code>hello world</code>\u3002</p> <p>\u7531\u4e8e<code>async</code>\u51fd\u6570\u8fd4\u56de\u7684\u662f Promise \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f5c\u4e3a<code>await</code>\u547d\u4ee4\u7684\u53c2\u6570\u3002\u6240\u4ee5\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u4e5f\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>async function timeout(ms) {\n  await new Promise((resolve) =&gt; {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function asyncPrint(value, ms) {\n  await timeout(ms);\n  console.log(value);\n}\n\nasyncPrint('hello world', 50);\n</code></pre> <p>async \u51fd\u6570\u6709\u591a\u79cd\u4f7f\u7528\u5f62\u5f0f\u3002</p> <pre><code>// \u51fd\u6570\u58f0\u660e\nasync function foo() {}\n\n// \u51fd\u6570\u8868\u8fbe\u5f0f\nconst foo = async function () {};\n\n// \u5bf9\u8c61\u7684\u65b9\u6cd5\nlet obj = { async foo() {} };\nobj.foo().then(...)\n\n// Class \u7684\u65b9\u6cd5\nclass Storage {\n  constructor() {\n    this.cachePromise = caches.open('avatars');\n  }\n\n  async getAvatar(name) {\n    const cache = await this.cachePromise;\n    return cache.match(`/avatars/${name}.jpg`);\n  }\n}\n\nconst storage = new Storage();\nstorage.getAvatar('jake').then(\u2026);\n\n// \u7bad\u5934\u51fd\u6570\nconst foo = async () =&gt; {};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_3","title":"\u8bed\u6cd5","text":"<p><code>async</code>\u51fd\u6570\u7684\u8bed\u6cd5\u89c4\u5219\u603b\u4f53\u4e0a\u6bd4\u8f83\u7b80\u5355\uff0c\u96be\u70b9\u662f\u9519\u8bef\u5904\u7406\u673a\u5236\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#promise","title":"\u8fd4\u56de Promise \u5bf9\u8c61","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <p><code>async</code>\u51fd\u6570\u5185\u90e8<code>return</code>\u8bed\u53e5\u8fd4\u56de\u7684\u503c\uff0c\u4f1a\u6210\u4e3a<code>then</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u3002</p> <pre><code>async function f() {\n  return 'hello world';\n}\n\nf().then(v =&gt; console.log(v))\n// \"hello world\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>f</code>\u5185\u90e8<code>return</code>\u547d\u4ee4\u8fd4\u56de\u7684\u503c\uff0c\u4f1a\u88ab<code>then</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <p><code>async</code>\u51fd\u6570\u5185\u90e8\u629b\u51fa\u9519\u8bef\uff0c\u4f1a\u5bfc\u81f4\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a<code>reject</code>\u72b6\u6001\u3002\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u4f1a\u88ab<code>catch</code>\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <pre><code>async function f() {\n  throw new Error('\u51fa\u9519\u4e86');\n}\n\nf().then(\n  v =&gt; console.log('resolve', v),\n  e =&gt; console.log('reject', e)\n)\n//reject Error: \u51fa\u9519\u4e86\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#promise_1","title":"Promise \u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u5316","text":"<p><code>async</code>\u51fd\u6570\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\uff0c\u5fc5\u987b\u7b49\u5230\u5185\u90e8\u6240\u6709<code>await</code>\u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u53d1\u751f\u72b6\u6001\u6539\u53d8\uff0c\u9664\u975e\u9047\u5230<code>return</code>\u8bed\u53e5\u6216\u8005\u629b\u51fa\u9519\u8bef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709<code>async</code>\u51fd\u6570\u5185\u90e8\u7684\u5f02\u6b65\u64cd\u4f5c\u6267\u884c\u5b8c\uff0c\u624d\u4f1a\u6267\u884c<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>async function getTitle(url) {\n  let response = await fetch(url);\n  let html = await response.text();\n  return html.match(/&lt;title&gt;([\\s\\S]+)&lt;\\/title&gt;/i)[1];\n}\ngetTitle('https://tc39.github.io/ecma262/').then(console.log)\n// \"ECMAScript 2017 Language Specification\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>getTitle</code>\u5185\u90e8\u6709\u4e09\u4e2a\u64cd\u4f5c\uff1a\u6293\u53d6\u7f51\u9875\u3001\u53d6\u51fa\u6587\u672c\u3001\u5339\u914d\u9875\u9762\u6807\u9898\u3002\u53ea\u6709\u8fd9\u4e09\u4e2a\u64cd\u4f5c\u5168\u90e8\u5b8c\u6210\uff0c\u624d\u4f1a\u6267\u884c<code>then</code>\u65b9\u6cd5\u91cc\u9762\u7684<code>console.log</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#await","title":"await \u547d\u4ee4","text":"<p>\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u7684\u7ed3\u679c\u3002\u5982\u679c\u4e0d\u662f Promise \u5bf9\u8c61\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u5bf9\u5e94\u7684\u503c\u3002</p> <pre><code>async function f() {\n  // \u7b49\u540c\u4e8e\n  // return 123;\n  return await 123;\n}\n\nf().then(v =&gt; console.log(v))\n// 123\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u7684\u53c2\u6570\u662f\u6570\u503c<code>123</code>\uff0c\u8fd9\u65f6\u7b49\u540c\u4e8e<code>return 123</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a<code>thenable</code>\u5bf9\u8c61\uff08\u5373\u5b9a\u4e49\u4e86<code>then</code>\u65b9\u6cd5\u7684\u5bf9\u8c61\uff09\uff0c\u90a3\u4e48<code>await</code>\u4f1a\u5c06\u5176\u7b49\u540c\u4e8e Promise \u5bf9\u8c61\u3002</p> <pre><code>class Sleep {\n  constructor(timeout) {\n    this.timeout = timeout;\n  }\n  then(resolve, reject) {\n    const startTime = Date.now();\n    setTimeout(\n      () =&gt; resolve(Date.now() - startTime),\n      this.timeout\n    );\n  }\n}\n\n(async () =&gt; {\n  const sleepTime = await new Sleep(1000);\n  console.log(sleepTime);\n})();\n// 1000\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a<code>Sleep</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u5b9e\u4f8b\u4e0d\u662f Promise \u5bf9\u8c61\uff0c\u4f46\u662f\u56e0\u4e3a\u5b9a\u4e49\u4e86<code>then</code>\u65b9\u6cd5\uff0c<code>await</code>\u4f1a\u5c06\u5176\u89c6\u4e3a<code>Promise</code>\u5904\u7406\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u8fd8\u6f14\u793a\u4e86\u5982\u4f55\u5b9e\u73b0\u4f11\u7720\u6548\u679c\u3002JavaScript \u4e00\u76f4\u6ca1\u6709\u4f11\u7720\u7684\u8bed\u6cd5\uff0c\u4f46\u662f\u501f\u52a9<code>await</code>\u547d\u4ee4\u5c31\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u505c\u987f\u6307\u5b9a\u7684\u65f6\u95f4\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7b80\u5316\u7684<code>sleep</code>\u5b9e\u73b0\u3002</p> <pre><code>function sleep(interval) {\n  return new Promise(resolve =&gt; {\n    setTimeout(resolve, interval);\n  })\n}\n\n// \u7528\u6cd5\nasync function one2FiveInAsync() {\n  for(let i = 1; i &lt;= 5; i++) {\n    console.log(i);\n    await sleep(1000);\n  }\n}\n\none2FiveInAsync();\n</code></pre> <p><code>await</code>\u547d\u4ee4\u540e\u9762\u7684 Promise \u5bf9\u8c61\u5982\u679c\u53d8\u4e3a<code>reject</code>\u72b6\u6001\uff0c\u5219<code>reject</code>\u7684\u53c2\u6570\u4f1a\u88ab<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u63a5\u6536\u5230\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86');\n}\n\nf()\n.then(v =&gt; console.log(v))\n.catch(e =&gt; console.log(e))\n// \u51fa\u9519\u4e86\n</code></pre> <p>\u6ce8\u610f\uff0c\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u8bed\u53e5\u524d\u9762\u6ca1\u6709<code>return</code>\uff0c\u4f46\u662f<code>reject</code>\u65b9\u6cd5\u7684\u53c2\u6570\u4f9d\u7136\u4f20\u5165\u4e86<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u3002\u8fd9\u91cc\u5982\u679c\u5728<code>await</code>\u524d\u9762\u52a0\u4e0a<code>return</code>\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\u3002</p> <p>\u4efb\u4f55\u4e00\u4e2a<code>await</code>\u8bed\u53e5\u540e\u9762\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a<code>reject</code>\u72b6\u6001\uff0c\u90a3\u4e48\u6574\u4e2a<code>async</code>\u51fd\u6570\u90fd\u4f1a\u4e2d\u65ad\u6267\u884c\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86');\n  await Promise.resolve('hello world'); // \u4e0d\u4f1a\u6267\u884c\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e8c\u4e2a<code>await</code>\u8bed\u53e5\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4e2a<code>await</code>\u8bed\u53e5\u72b6\u6001\u53d8\u6210\u4e86<code>reject</code>\u3002</p> <p>\u6709\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u5373\u4f7f\u524d\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5931\u8d25\uff0c\u4e5f\u4e0d\u8981\u4e2d\u65ad\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u3002\u8fd9\u65f6\u53ef\u4ee5\u5c06\u7b2c\u4e00\u4e2a<code>await</code>\u653e\u5728<code>try...catch</code>\u7ed3\u6784\u91cc\u9762\uff0c\u8fd9\u6837\u4e0d\u7ba1\u8fd9\u4e2a\u5f02\u6b65\u64cd\u4f5c\u662f\u5426\u6210\u529f\uff0c\u7b2c\u4e8c\u4e2a<code>await</code>\u90fd\u4f1a\u6267\u884c\u3002</p> <pre><code>async function f() {\n  try {\n    await Promise.reject('\u51fa\u9519\u4e86');\n  } catch(e) {\n  }\n  return await Promise.resolve('hello world');\n}\n\nf()\n.then(v =&gt; console.log(v))\n// hello world\n</code></pre> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f<code>await</code>\u540e\u9762\u7684 Promise \u5bf9\u8c61\u518d\u8ddf\u4e00\u4e2a<code>catch</code>\u65b9\u6cd5\uff0c\u5904\u7406\u524d\u9762\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u3002</p> <pre><code>async function f() {\n  await Promise.reject('\u51fa\u9519\u4e86')\n    .catch(e =&gt; console.log(e));\n  return await Promise.resolve('hello world');\n}\n\nf()\n.then(v =&gt; console.log(v))\n// \u51fa\u9519\u4e86\n// hello world\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_4","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u5982\u679c<code>await</code>\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u51fa\u9519\uff0c\u90a3\u4e48\u7b49\u540c\u4e8e<code>async</code>\u51fd\u6570\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u88ab<code>reject</code>\u3002</p> <pre><code>async function f() {\n  await new Promise(function (resolve, reject) {\n    throw new Error('\u51fa\u9519\u4e86');\n  });\n}\n\nf()\n.then(v =&gt; console.log(v))\n.catch(e =&gt; console.log(e))\n// Error\uff1a\u51fa\u9519\u4e86\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>async</code>\u51fd\u6570<code>f</code>\u6267\u884c\u540e\uff0c<code>await</code>\u540e\u9762\u7684 Promise \u5bf9\u8c61\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\uff0c\u5bfc\u81f4<code>catch</code>\u65b9\u6cd5\u7684\u56de\u8c03\u51fd\u6570\u88ab\u8c03\u7528\uff0c\u5b83\u7684\u53c2\u6570\u5c31\u662f\u629b\u51fa\u7684\u9519\u8bef\u5bf9\u8c61\u3002\u5177\u4f53\u7684\u6267\u884c\u673a\u5236\uff0c\u53ef\u4ee5\u53c2\u8003\u540e\u6587\u7684\u201casync \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\u201d\u3002</p> <p>\u9632\u6b62\u51fa\u9519\u7684\u65b9\u6cd5\uff0c\u4e5f\u662f\u5c06\u5176\u653e\u5728<code>try...catch</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\u3002</p> <pre><code>async function f() {\n  try {\n    await new Promise(function (resolve, reject) {\n      throw new Error('\u51fa\u9519\u4e86');\n    });\n  } catch(e) {\n  }\n  return await('hello world');\n}\n</code></pre> <p>\u5982\u679c\u6709\u591a\u4e2a<code>await</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u7edf\u4e00\u653e\u5728<code>try...catch</code>\u7ed3\u6784\u4e2d\u3002</p> <pre><code>async function main() {\n  try {\n    const val1 = await firstStep();\n    const val2 = await secondStep(val1);\n    const val3 = await thirdStep(val1, val2);\n\n    console.log('Final: ', val3);\n  }\n  catch (err) {\n    console.error(err);\n  }\n}\n</code></pre> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4f7f\u7528<code>try...catch</code>\u7ed3\u6784\uff0c\u5b9e\u73b0\u591a\u6b21\u91cd\u590d\u5c1d\u8bd5\u3002</p> <pre><code>const superagent = require('superagent');\nconst NUM_RETRIES = 3;\n\nasync function test() {\n  let i;\n  for (i = 0; i &lt; NUM_RETRIES; ++i) {\n    try {\n      await superagent.get('http://google.com/this-throws-an-error');\n      break;\n    } catch(err) {}\n  }\n  console.log(i); // 3\n}\n\ntest();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c<code>await</code>\u64cd\u4f5c\u6210\u529f\uff0c\u5c31\u4f1a\u4f7f\u7528<code>break</code>\u8bed\u53e5\u9000\u51fa\u5faa\u73af\uff1b\u5982\u679c\u5931\u8d25\uff0c\u4f1a\u88ab<code>catch</code>\u8bed\u53e5\u6355\u6349\uff0c\u7136\u540e\u8fdb\u5165\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_5","title":"\u4f7f\u7528\u6ce8\u610f\u70b9","text":"<p>\u7b2c\u4e00\u70b9\uff0c\u524d\u9762\u5df2\u7ecf\u8bf4\u8fc7\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u7684<code>Promise</code>\u5bf9\u8c61\uff0c\u8fd0\u884c\u7ed3\u679c\u53ef\u80fd\u662f<code>rejected</code>\uff0c\u6240\u4ee5\u6700\u597d\u628a<code>await</code>\u547d\u4ee4\u653e\u5728<code>try...catch</code>\u4ee3\u7801\u5757\u4e2d\u3002</p> <pre><code>async function myFunction() {\n  try {\n    await somethingThatReturnsAPromise();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// \u53e6\u4e00\u79cd\u5199\u6cd5\n\nasync function myFunction() {\n  await somethingThatReturnsAPromise()\n  .catch(function (err) {\n    console.log(err);\n  });\n}\n</code></pre> <p>\u7b2c\u4e8c\u70b9\uff0c\u591a\u4e2a<code>await</code>\u547d\u4ee4\u540e\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u7ee7\u53d1\u5173\u7cfb\uff0c\u6700\u597d\u8ba9\u5b83\u4eec\u540c\u65f6\u89e6\u53d1\u3002</p> <pre><code>let foo = await getFoo();\nlet bar = await getBar();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>getFoo</code>\u548c<code>getBar</code>\u662f\u4e24\u4e2a\u72ec\u7acb\u7684\u5f02\u6b65\u64cd\u4f5c\uff08\u5373\u4e92\u4e0d\u4f9d\u8d56\uff09\uff0c\u88ab\u5199\u6210\u7ee7\u53d1\u5173\u7cfb\u3002\u8fd9\u6837\u6bd4\u8f83\u8017\u65f6\uff0c\u56e0\u4e3a\u53ea\u6709<code>getFoo</code>\u5b8c\u6210\u4ee5\u540e\uff0c\u624d\u4f1a\u6267\u884c<code>getBar</code>\uff0c\u5b8c\u5168\u53ef\u4ee5\u8ba9\u5b83\u4eec\u540c\u65f6\u89e6\u53d1\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nlet [foo, bar] = await Promise.all([getFoo(), getBar()]);\n\n// \u5199\u6cd5\u4e8c\nlet fooPromise = getFoo();\nlet barPromise = getBar();\nlet foo = await fooPromise;\nlet bar = await barPromise;\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\uff0c<code>getFoo</code>\u548c<code>getBar</code>\u90fd\u662f\u540c\u65f6\u89e6\u53d1\uff0c\u8fd9\u6837\u5c31\u4f1a\u7f29\u77ed\u7a0b\u5e8f\u7684\u6267\u884c\u65f6\u95f4\u3002</p> <p>\u7b2c\u4e09\u70b9\uff0c<code>await</code>\u547d\u4ee4\u53ea\u80fd\u7528\u5728<code>async</code>\u51fd\u6570\u4e4b\u4e2d\uff0c\u5982\u679c\u7528\u5728\u666e\u901a\u51fd\u6570\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n\n  // \u62a5\u9519\n  docs.forEach(function (doc) {\n    await db.post(doc);\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>await</code>\u7528\u5728\u666e\u901a\u51fd\u6570\u4e4b\u4e2d\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u5c06<code>forEach</code>\u65b9\u6cd5\u7684\u53c2\u6570\u6539\u6210<code>async</code>\u51fd\u6570\uff0c\u4e5f\u6709\u95ee\u9898\u3002</p> <pre><code>function dbFuc(db) { //\u8fd9\u91cc\u4e0d\u9700\u8981 async\n \u00a0let docs = [{}, {}, {}];\n\n  // \u53ef\u80fd\u5f97\u5230\u9519\u8bef\u7ed3\u679c\n  docs.forEach(async function (doc) {\n    await db.post(doc);\n  });\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u6b63\u5e38\u5de5\u4f5c\uff0c\u539f\u56e0\u662f\u8fd9\u65f6\u4e09\u4e2a<code>db.post()</code>\u64cd\u4f5c\u5c06\u662f\u5e76\u53d1\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u540c\u65f6\u6267\u884c\uff0c\u800c\u4e0d\u662f\u7ee7\u53d1\u6267\u884c\u3002\u6b63\u786e\u7684\u5199\u6cd5\u662f\u91c7\u7528<code>for</code>\u5faa\u73af\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n\n  for (let doc of docs) {\n    await db.post(doc);\n  }\n}\n</code></pre> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528\u6570\u7ec4\u7684<code>reduce()</code>\u65b9\u6cd5\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n\n  await docs.reduce(async (_, doc) =&gt; {\n    await _;\n    await db.post(doc);\n  }, undefined);\n}\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>reduce()</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>async</code>\u51fd\u6570\uff0c\u5bfc\u81f4\u8be5\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u524d\u4e00\u6b65\u64cd\u4f5c\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\uff0c\u6240\u4ee5\u5fc5\u987b\u4f7f\u7528<code>await</code>\u7b49\u5f85\u5b83\u64cd\u4f5c\u7ed3\u675f\u3002\u53e6\u5916\uff0c<code>reduce()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f<code>docs</code>\u6570\u7ec4\u6700\u540e\u4e00\u4e2a\u6210\u5458\u7684<code>async</code>\u51fd\u6570\u7684\u6267\u884c\u7ed3\u679c\uff0c\u4e5f\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5bfc\u81f4\u5728\u5b83\u524d\u9762\u4e5f\u5fc5\u987b\u52a0\u4e0a<code>await</code>\u3002</p> <p>\u4e0a\u9762\u7684<code>reduce()</code>\u7684\u53c2\u6570\u51fd\u6570\u91cc\u9762\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u539f\u56e0\u662f\u8fd9\u4e2a\u51fd\u6570\u7684\u4e3b\u8981\u76ee\u7684\u662f<code>db.post()</code>\u64cd\u4f5c\uff0c\u4e0d\u662f\u8fd4\u56de\u503c\u3002\u800c\u4e14<code>async</code>\u51fd\u6570\u4e0d\u7ba1\u6709\u6ca1\u6709<code>return</code>\u8bed\u53e5\uff0c\u603b\u662f\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684<code>return</code>\u662f\u4e0d\u5fc5\u8981\u7684\u3002</p> <p>\u5982\u679c\u786e\u5b9e\u5e0c\u671b\u591a\u4e2a\u8bf7\u6c42\u5e76\u53d1\u6267\u884c\uff0c\u53ef\u4ee5\u4f7f\u7528<code>Promise.all</code>\u65b9\u6cd5\u3002\u5f53\u4e09\u4e2a\u8bf7\u6c42\u90fd\u4f1a<code>resolved</code>\u65f6\uff0c\u4e0b\u9762\u4e24\u79cd\u5199\u6cd5\u6548\u679c\u76f8\u540c\u3002</p> <pre><code>async function dbFuc(db) {\n  let docs = [{}, {}, {}];\n  let promises = docs.map((doc) =&gt; db.post(doc));\n\n  let results = await Promise.all(promises);\n  console.log(results);\n}\n\n// \u6216\u8005\u4f7f\u7528\u4e0b\u9762\u7684\u5199\u6cd5\n\nasync function dbFuc(db) {\n  let docs = [{}, {}, {}];\n  let promises = docs.map((doc) =&gt; db.post(doc));\n\n  let results = [];\n  for (let promise of promises) {\n    results.push(await promise);\n  }\n  console.log(results);\n}\n</code></pre> <p>\u7b2c\u56db\u70b9\uff0casync \u51fd\u6570\u53ef\u4ee5\u4fdd\u7559\u8fd0\u884c\u5806\u6808\u3002</p> <pre><code>const a = () =&gt; {\n  b().then(() =&gt; c());\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>a</code>\u5185\u90e8\u8fd0\u884c\u4e86\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1<code>b()</code>\u3002\u5f53<code>b()</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u51fd\u6570<code>a()</code>\u4e0d\u4f1a\u4e2d\u65ad\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u3002\u7b49\u5230<code>b()</code>\u8fd0\u884c\u7ed3\u675f\uff0c\u53ef\u80fd<code>a()</code>\u65e9\u5c31\u8fd0\u884c\u7ed3\u675f\u4e86\uff0c<code>b()</code>\u6240\u5728\u7684\u4e0a\u4e0b\u6587\u73af\u5883\u5df2\u7ecf\u6d88\u5931\u4e86\u3002\u5982\u679c<code>b()</code>\u6216<code>c()</code>\u62a5\u9519\uff0c\u9519\u8bef\u5806\u6808\u5c06\u4e0d\u5305\u62ec<code>a()</code>\u3002</p> <p>\u73b0\u5728\u5c06\u8fd9\u4e2a\u4f8b\u5b50\u6539\u6210<code>async</code>\u51fd\u6570\u3002</p> <pre><code>const a = async () =&gt; {\n  await b();\n  c();\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>b()</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c<code>a()</code>\u662f\u6682\u505c\u6267\u884c\uff0c\u4e0a\u4e0b\u6587\u73af\u5883\u90fd\u4fdd\u5b58\u7740\u3002\u4e00\u65e6<code>b()</code>\u6216<code>c()</code>\u62a5\u9519\uff0c\u9519\u8bef\u5806\u6808\u5c06\u5305\u62ec<code>a()</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#async","title":"async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>async \u51fd\u6570\u7684\u5b9e\u73b0\u539f\u7406\uff0c\u5c31\u662f\u5c06 Generator \u51fd\u6570\u548c\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5305\u88c5\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u3002</p> <pre><code>async function fn(args) {\n  // ...\n}\n\n// \u7b49\u540c\u4e8e\n\nfunction fn(args) {\n  return spawn(function* () {\n    // ...\n  });\n}\n</code></pre> <p>\u6240\u6709\u7684<code>async</code>\u51fd\u6570\u90fd\u53ef\u4ee5\u5199\u6210\u4e0a\u9762\u7684\u7b2c\u4e8c\u79cd\u5f62\u5f0f\uff0c\u5176\u4e2d\u7684<code>spawn</code>\u51fd\u6570\u5c31\u662f\u81ea\u52a8\u6267\u884c\u5668\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa<code>spawn</code>\u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u57fa\u672c\u5c31\u662f\u524d\u6587\u81ea\u52a8\u6267\u884c\u5668\u7684\u7ffb\u7248\u3002</p> <pre><code>function spawn(genF) {\n  return new Promise(function(resolve, reject) {\n    const gen = genF();\n    function step(nextF) {\n      let next;\n      try {\n        next = nextF();\n      } catch(e) {\n        return reject(e);\n      }\n      if(next.done) {\n        return resolve(next.value);\n      }\n      Promise.resolve(next.value).then(function(v) {\n        step(function() { return gen.next(v); });\n      }, function(e) {\n        step(function() { return gen.throw(e); });\n      });\n    }\n    step(function() { return gen.next(undefined); });\n  });\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_6","title":"\u4e0e\u5176\u4ed6\u5f02\u6b65\u5904\u7406\u65b9\u6cd5\u7684\u6bd4\u8f83","text":"<p>\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6765\u770b async \u51fd\u6570\u4e0e Promise\u3001Generator \u51fd\u6570\u7684\u6bd4\u8f83\u3002</p> <p>\u5047\u5b9a\u67d0\u4e2a DOM \u5143\u7d20\u4e0a\u9762\uff0c\u90e8\u7f72\u4e86\u4e00\u7cfb\u5217\u7684\u52a8\u753b\uff0c\u524d\u4e00\u4e2a\u52a8\u753b\u7ed3\u675f\uff0c\u624d\u80fd\u5f00\u59cb\u540e\u4e00\u4e2a\u3002\u5982\u679c\u5f53\u4e2d\u6709\u4e00\u4e2a\u52a8\u753b\u51fa\u9519\uff0c\u5c31\u4e0d\u518d\u5f80\u4e0b\u6267\u884c\uff0c\u8fd4\u56de\u4e0a\u4e00\u4e2a\u6210\u529f\u6267\u884c\u7684\u52a8\u753b\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u9996\u5148\u662f Promise \u7684\u5199\u6cd5\u3002</p> <pre><code>function chainAnimationsPromise(elem, animations) {\n\n  // \u53d8\u91cfret\u7528\u6765\u4fdd\u5b58\u4e0a\u4e00\u4e2a\u52a8\u753b\u7684\u8fd4\u56de\u503c\n  let ret = null;\n\n  // \u65b0\u5efa\u4e00\u4e2a\u7a7a\u7684Promise\n  let p = Promise.resolve();\n\n  // \u4f7f\u7528then\u65b9\u6cd5\uff0c\u6dfb\u52a0\u6240\u6709\u52a8\u753b\n  for(let anim of animations) {\n    p = p.then(function(val) {\n      ret = val;\n      return anim(elem);\n    });\n  }\n\n  // \u8fd4\u56de\u4e00\u4e2a\u90e8\u7f72\u4e86\u9519\u8bef\u6355\u6349\u673a\u5236\u7684Promise\n  return p.catch(function(e) {\n    /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n  }).then(function() {\n    return ret;\n  });\n\n}\n</code></pre> <p>\u867d\u7136 Promise \u7684\u5199\u6cd5\u6bd4\u56de\u8c03\u51fd\u6570\u7684\u5199\u6cd5\u5927\u5927\u6539\u8fdb\uff0c\u4f46\u662f\u4e00\u773c\u770b\u4e0a\u53bb\uff0c\u4ee3\u7801\u5b8c\u5168\u90fd\u662f Promise \u7684 API\uff08<code>then</code>\u3001<code>catch</code>\u7b49\u7b49\uff09\uff0c\u64cd\u4f5c\u672c\u8eab\u7684\u8bed\u4e49\u53cd\u800c\u4e0d\u5bb9\u6613\u770b\u51fa\u6765\u3002</p> <p>\u63a5\u7740\u662f Generator \u51fd\u6570\u7684\u5199\u6cd5\u3002</p> <pre><code>function chainAnimationsGenerator(elem, animations) {\n\n  return spawn(function*() {\n    let ret = null;\n    try {\n      for(let anim of animations) {\n        ret = yield anim(elem);\n      }\n    } catch(e) {\n      /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n    }\n    return ret;\n  });\n\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528 Generator \u51fd\u6570\u904d\u5386\u4e86\u6bcf\u4e2a\u52a8\u753b\uff0c\u8bed\u4e49\u6bd4 Promise \u5199\u6cd5\u66f4\u6e05\u6670\uff0c\u7528\u6237\u5b9a\u4e49\u7684\u64cd\u4f5c\u5168\u90e8\u90fd\u51fa\u73b0\u5728<code>spawn</code>\u51fd\u6570\u7684\u5185\u90e8\u3002\u8fd9\u4e2a\u5199\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u4efb\u52a1\u8fd0\u884c\u5668\uff0c\u81ea\u52a8\u6267\u884c Generator \u51fd\u6570\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>spawn</code>\u51fd\u6570\u5c31\u662f\u81ea\u52a8\u6267\u884c\u5668\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u800c\u4e14\u5fc5\u987b\u4fdd\u8bc1<code>yield</code>\u8bed\u53e5\u540e\u9762\u7684\u8868\u8fbe\u5f0f\uff0c\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a Promise\u3002</p> <p>\u6700\u540e\u662f async \u51fd\u6570\u7684\u5199\u6cd5\u3002</p> <pre><code>async function chainAnimationsAsync(elem, animations) {\n  let ret = null;\n  try {\n    for(let anim of animations) {\n      ret = await anim(elem);\n    }\n  } catch(e) {\n    /* \u5ffd\u7565\u9519\u8bef\uff0c\u7ee7\u7eed\u6267\u884c */\n  }\n  return ret;\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230 Async \u51fd\u6570\u7684\u5b9e\u73b0\u6700\u7b80\u6d01\uff0c\u6700\u7b26\u5408\u8bed\u4e49\uff0c\u51e0\u4e4e\u6ca1\u6709\u8bed\u4e49\u4e0d\u76f8\u5173\u7684\u4ee3\u7801\u3002\u5b83\u5c06 Generator \u5199\u6cd5\u4e2d\u7684\u81ea\u52a8\u6267\u884c\u5668\uff0c\u6539\u5728\u8bed\u8a00\u5c42\u9762\u63d0\u4f9b\uff0c\u4e0d\u66b4\u9732\u7ed9\u7528\u6237\uff0c\u56e0\u6b64\u4ee3\u7801\u91cf\u6700\u5c11\u3002\u5982\u679c\u4f7f\u7528 Generator \u5199\u6cd5\uff0c\u81ea\u52a8\u6267\u884c\u5668\u9700\u8981\u7528\u6237\u81ea\u5df1\u63d0\u4f9b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#_7","title":"\u5b9e\u4f8b\uff1a\u6309\u987a\u5e8f\u5b8c\u6210\u5f02\u6b65\u64cd\u4f5c","text":"<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7ecf\u5e38\u9047\u5230\u4e00\u7ec4\u5f02\u6b65\u64cd\u4f5c\uff0c\u9700\u8981\u6309\u7167\u987a\u5e8f\u5b8c\u6210\u3002\u6bd4\u5982\uff0c\u4f9d\u6b21\u8fdc\u7a0b\u8bfb\u53d6\u4e00\u7ec4 URL\uff0c\u7136\u540e\u6309\u7167\u8bfb\u53d6\u7684\u987a\u5e8f\u8f93\u51fa\u7ed3\u679c\u3002</p> <p>Promise \u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>function logInOrder(urls) {\n  // \u8fdc\u7a0b\u8bfb\u53d6\u6240\u6709URL\n  const textPromises = urls.map(url =&gt; {\n    return fetch(url).then(response =&gt; response.text());\n  });\n\n  // \u6309\u6b21\u5e8f\u8f93\u51fa\n  textPromises.reduce((chain, textPromise) =&gt; {\n    return chain.then(() =&gt; textPromise)\n      .then(text =&gt; console.log(text));\n  }, Promise.resolve());\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>fetch</code>\u65b9\u6cd5\uff0c\u540c\u65f6\u8fdc\u7a0b\u8bfb\u53d6\u4e00\u7ec4 URL\u3002\u6bcf\u4e2a<code>fetch</code>\u64cd\u4f5c\u90fd\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u653e\u5165<code>textPromises</code>\u6570\u7ec4\u3002\u7136\u540e\uff0c<code>reduce</code>\u65b9\u6cd5\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a Promise \u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528<code>then</code>\uff0c\u5c06\u6240\u6709 Promise \u5bf9\u8c61\u8fde\u8d77\u6765\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u4f9d\u6b21\u8f93\u51fa\u7ed3\u679c\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u4e0d\u592a\u76f4\u89c2\uff0c\u53ef\u8bfb\u6027\u6bd4\u8f83\u5dee\u3002\u4e0b\u9762\u662f async \u51fd\u6570\u5b9e\u73b0\u3002</p> <pre><code>async function logInOrder(urls) {\n  for (const url of urls) {\n    const response = await fetch(url);\n    console.log(await response.text());\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u786e\u5b9e\u5927\u5927\u7b80\u5316\uff0c\u95ee\u9898\u662f\u6240\u6709\u8fdc\u7a0b\u64cd\u4f5c\u90fd\u662f\u7ee7\u53d1\u3002\u53ea\u6709\u524d\u4e00\u4e2a URL \u8fd4\u56de\u7ed3\u679c\uff0c\u624d\u4f1a\u53bb\u8bfb\u53d6\u4e0b\u4e00\u4e2a URL\uff0c\u8fd9\u6837\u505a\u6548\u7387\u5f88\u5dee\uff0c\u975e\u5e38\u6d6a\u8d39\u65f6\u95f4\u3002\u6211\u4eec\u9700\u8981\u7684\u662f\u5e76\u53d1\u53d1\u51fa\u8fdc\u7a0b\u8bf7\u6c42\u3002</p> <pre><code>async function logInOrder(urls) {\n  // \u5e76\u53d1\u8bfb\u53d6\u8fdc\u7a0bURL\n  const textPromises = urls.map(async url =&gt; {\n    const response = await fetch(url);\n    return response.text();\n  });\n\n  // \u6309\u6b21\u5e8f\u8f93\u51fa\n  for (const textPromise of textPromises) {\n    console.log(await textPromise);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u867d\u7136<code>map</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f<code>async</code>\u51fd\u6570\uff0c\u4f46\u5b83\u662f\u5e76\u53d1\u6267\u884c\u7684\uff0c\u56e0\u4e3a\u53ea\u6709<code>async</code>\u51fd\u6570\u5185\u90e8\u662f\u7ee7\u53d1\u6267\u884c\uff0c\u5916\u90e8\u4e0d\u53d7\u5f71\u54cd\u3002\u540e\u9762\u7684<code>for..of</code>\u5faa\u73af\u5185\u90e8\u4f7f\u7528\u4e86<code>await</code>\uff0c\u56e0\u6b64\u5b9e\u73b0\u4e86\u6309\u987a\u5e8f\u8f93\u51fa\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/21-async/#await_1","title":"\u9876\u5c42 await","text":"<p>\u65e9\u671f\u7684\u8bed\u6cd5\u89c4\u5b9a\u662f\uff0c<code>await</code>\u547d\u4ee4\u53ea\u80fd\u51fa\u73b0\u5728 async \u51fd\u6570\u5185\u90e8\uff0c\u5426\u5219\u90fd\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nconst data = await fetch('https://api.example.com');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u72ec\u7acb\u4f7f\u7528\uff0c\u6ca1\u6709\u653e\u5728 async \u51fd\u6570\u91cc\u9762\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u4ece ES2022 \u5f00\u59cb\uff0c\u5141\u8bb8\u5728\u6a21\u5757\u7684\u9876\u5c42\u72ec\u7acb\u4f7f\u7528<code>await</code>\u547d\u4ee4\uff0c\u4f7f\u5f97\u4e0a\u9762\u90a3\u884c\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\u4e86\u3002\u5b83\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4f7f\u7528<code>await</code>\u89e3\u51b3\u6a21\u5757\u5f02\u6b65\u52a0\u8f7d\u7684\u95ee\u9898\u3002</p> <pre><code>// awaiting.js\nlet output;\nasync function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n}\nmain();\nexport { output };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6a21\u5757<code>awaiting.js</code>\u7684\u8f93\u51fa\u503c<code>output</code>\uff0c\u53d6\u51b3\u4e8e\u5f02\u6b65\u64cd\u4f5c\u3002\u6211\u4eec\u628a\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u5728\u4e00\u4e2a async \u51fd\u6570\u91cc\u9762\uff0c\u7136\u540e\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u53ea\u6709\u7b49\u91cc\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u90fd\u6267\u884c\uff0c\u53d8\u91cf<code>output</code>\u624d\u4f1a\u6709\u503c\uff0c\u5426\u5219\u5c31\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u4e0b\u9762\u662f\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u5199\u6cd5\u3002</p> <pre><code>// usage.js\nimport { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() =&gt; console.log(outputPlusValue(100)), 1000);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>outputPlusValue()</code>\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5b8c\u5168\u53d6\u51b3\u4e8e\u6267\u884c\u7684\u65f6\u95f4\u3002\u5982\u679c<code>awaiting.js</code>\u91cc\u9762\u7684\u5f02\u6b65\u64cd\u4f5c\u6ca1\u6267\u884c\u5b8c\uff0c\u52a0\u8f7d\u8fdb\u6765\u7684<code>output</code>\u7684\u503c\u5c31\u662f<code>undefined</code>\u3002</p> <p>\u76ee\u524d\u7684\u89e3\u51b3\u65b9\u6cd5\uff0c\u5c31\u662f\u8ba9\u539f\u59cb\u6a21\u5757\u8f93\u51fa\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u4ece\u8fd9\u4e2a Promise \u5bf9\u8c61\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u6709\u6ca1\u6709\u7ed3\u675f\u3002</p> <pre><code>// awaiting.js\nlet output;\nexport default (async function main() {\n  const dynamic = await import(someMission);\n  const data = await fetch(url);\n  output = someProcess(dynamic.default, data);\n})();\nexport { output };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>awaiting.js</code>\u9664\u4e86\u8f93\u51fa<code>output</code>\uff0c\u8fd8\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a Promise \u5bf9\u8c61\uff08async \u51fd\u6570\u7acb\u5373\u6267\u884c\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff09\uff0c\u4ece\u8fd9\u4e2a\u5bf9\u8c61\u5224\u65ad\u5f02\u6b65\u64cd\u4f5c\u662f\u5426\u7ed3\u675f\u3002</p> <p>\u4e0b\u9762\u662f\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u65b0\u7684\u5199\u6cd5\u3002</p> <pre><code>// usage.js\nimport promise, { output } from \"./awaiting.js\";\n\nfunction outputPlusValue(value) { return output + value }\n\npromise.then(() =&gt; {\n  console.log(outputPlusValue(100));\n  setTimeout(() =&gt; console.log(outputPlusValue(100)), 1000);\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c06<code>awaiting.js</code>\u5bf9\u8c61\u7684\u8f93\u51fa\uff0c\u653e\u5728<code>promise.then()</code>\u91cc\u9762\uff0c\u8fd9\u6837\u5c31\u80fd\u4fdd\u8bc1\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u624d\u53bb\u8bfb\u53d6<code>output</code>\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u6bd4\u8f83\u9ebb\u70e6\uff0c\u7b49\u4e8e\u8981\u6c42\u6a21\u5757\u7684\u4f7f\u7528\u8005\u9075\u5b88\u4e00\u4e2a\u989d\u5916\u7684\u4f7f\u7528\u534f\u8bae\uff0c\u6309\u7167\u7279\u6b8a\u7684\u65b9\u6cd5\u4f7f\u7528\u8fd9\u4e2a\u6a21\u5757\u3002\u4e00\u65e6\u4f60\u5fd8\u4e86\u8981\u7528 Promise \u52a0\u8f7d\uff0c\u53ea\u4f7f\u7528\u6b63\u5e38\u7684\u52a0\u8f7d\u65b9\u6cd5\uff0c\u4f9d\u8d56\u8fd9\u4e2a\u6a21\u5757\u7684\u4ee3\u7801\u5c31\u53ef\u80fd\u51fa\u9519\u3002\u800c\u4e14\uff0c\u5982\u679c\u4e0a\u9762\u7684<code>usage.js</code>\u53c8\u6709\u5bf9\u5916\u7684\u8f93\u51fa\uff0c\u7b49\u4e8e\u8fd9\u4e2a\u4f9d\u8d56\u94fe\u7684\u6240\u6709\u6a21\u5757\u90fd\u8981\u4f7f\u7528 Promise \u52a0\u8f7d\u3002</p> <p>\u9876\u5c42\u7684<code>await</code>\u547d\u4ee4\uff0c\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u5b83\u4fdd\u8bc1\u53ea\u6709\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u6a21\u5757\u624d\u4f1a\u8f93\u51fa\u503c\u3002</p> <pre><code>// awaiting.js\nconst dynamic = import(someMission);\nconst data = fetch(url);\nexport const output = someProcess((await dynamic).default, await data);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e24\u4e2a\u5f02\u6b65\u64cd\u4f5c\u5728\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u90fd\u52a0\u4e0a\u4e86<code>await</code>\u547d\u4ee4\u3002\u53ea\u6709\u7b49\u5230\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u8fd9\u4e2a\u6a21\u5757\u624d\u4f1a\u8f93\u51fa\u503c\u3002</p> <p>\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>// usage.js\nimport { output } from \"./awaiting.js\";\nfunction outputPlusValue(value) { return output + value }\n\nconsole.log(outputPlusValue(100));\nsetTimeout(() =&gt; console.log(outputPlusValue(100)), 1000);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5199\u6cd5\uff0c\u4e0e\u666e\u901a\u7684\u6a21\u5757\u52a0\u8f7d\u5b8c\u5168\u4e00\u6837\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6a21\u5757\u7684\u4f7f\u7528\u8005\u5b8c\u5168\u4e0d\u7528\u5173\u5fc3\uff0c\u4f9d\u8d56\u6a21\u5757\u7684\u5185\u90e8\u6709\u6ca1\u6709\u5f02\u6b65\u64cd\u4f5c\uff0c\u6b63\u5e38\u52a0\u8f7d\u5373\u53ef\u3002</p> <p>\u8fd9\u65f6\uff0c\u6a21\u5757\u7684\u52a0\u8f7d\u4f1a\u7b49\u5f85\u4f9d\u8d56\u6a21\u5757\uff08\u4e0a\u4f8b\u662f<code>awaiting.js</code>\uff09\u7684\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\uff0c\u624d\u6267\u884c\u540e\u9762\u7684\u4ee3\u7801\uff0c\u6709\u70b9\u50cf\u6682\u505c\u5728\u90a3\u91cc\u3002\u6240\u4ee5\uff0c\u5b83\u603b\u662f\u4f1a\u5f97\u5230\u6b63\u786e\u7684<code>output</code>\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u52a0\u8f7d\u65f6\u673a\u7684\u4e0d\u540c\uff0c\u800c\u5f97\u5230\u4e0d\u4e00\u6837\u7684\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u9876\u5c42<code>await</code>\u53ea\u80fd\u7528\u5728 ES6 \u6a21\u5757\uff0c\u4e0d\u80fd\u7528\u5728 CommonJS \u6a21\u5757\u3002\u8fd9\u662f\u56e0\u4e3a CommonJS \u6a21\u5757\u7684<code>require()</code>\u662f\u540c\u6b65\u52a0\u8f7d\uff0c\u5982\u679c\u6709\u9876\u5c42<code>await</code>\uff0c\u5c31\u6ca1\u6cd5\u5904\u7406\u52a0\u8f7d\u4e86\u3002</p> <p>\u4e0b\u9762\u662f\u9876\u5c42<code>await</code>\u7684\u4e00\u4e9b\u4f7f\u7528\u573a\u666f\u3002</p> <pre><code>// import() \u65b9\u6cd5\u52a0\u8f7d\nconst strings = await import(`/i18n/${navigator.language}`);\n\n// \u6570\u636e\u5e93\u64cd\u4f5c\nconst connection = await dbConnector();\n\n// \u4f9d\u8d56\u56de\u6eda\nlet jQuery;\ntry {\n  jQuery = await import('https://cdn-a.com/jQuery');\n} catch {\n  jQuery = await import('https://cdn-b.com/jQuery');\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u52a0\u8f7d\u591a\u4e2a\u5305\u542b\u9876\u5c42<code>await</code>\u547d\u4ee4\u7684\u6a21\u5757\uff0c\u52a0\u8f7d\u547d\u4ee4\u662f\u540c\u6b65\u6267\u884c\u7684\u3002</p> <pre><code>// x.js\nconsole.log(\"X1\");\nawait new Promise(r =&gt; setTimeout(r, 1000));\nconsole.log(\"X2\");\n\n// y.js\nconsole.log(\"Y\");\n\n// z.js\nimport \"./x.js\";\nimport \"./y.js\";\nconsole.log(\"Z\");\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6709\u4e09\u4e2a\u6a21\u5757\uff0c\u6700\u540e\u7684<code>z.js</code>\u52a0\u8f7d<code>x.js</code>\u548c<code>y.js</code>\uff0c\u6253\u5370\u7ed3\u679c\u662f<code>X1</code>\u3001<code>Y</code>\u3001<code>X2</code>\u3001<code>Z</code>\u3002\u8fd9\u8bf4\u660e\uff0c<code>z.js</code>\u5e76\u6ca1\u6709\u7b49\u5f85<code>x.js</code>\u52a0\u8f7d\u5b8c\u6210\uff0c\u518d\u53bb\u52a0\u8f7d<code>y.js</code>\u3002</p> <p>\u9876\u5c42\u7684<code>await</code>\u547d\u4ee4\u6709\u70b9\u50cf\uff0c\u4ea4\u51fa\u4ee3\u7801\u7684\u6267\u884c\u6743\u7ed9\u5176\u4ed6\u7684\u6a21\u5757\u52a0\u8f7d\uff0c\u7b49\u5f02\u6b65\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u518d\u62ff\u56de\u6267\u884c\u6743\uff0c\u7ee7\u7eed\u5411\u4e0b\u6267\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/","title":"22-Class \u7684\u57fa\u672c\u8bed\u6cd5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_1","title":"\u7c7b\u7684\u7531\u6765","text":"<p>JavaScript \u8bed\u8a00\u4e2d\uff0c\u751f\u6210\u5b9e\u4f8b\u5bf9\u8c61\u7684\u4f20\u7edf\u65b9\u6cd5\u662f\u901a\u8fc7\u6784\u9020\u51fd\u6570\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\n\nPoint.prototype.toString = function () {\n  return '(' + this.x + ', ' + this.y + ')';\n};\n\nvar p = new Point(1, 2);\n</code></pre> <p>\u4e0a\u9762\u8fd9\u79cd\u5199\u6cd5\u8ddf\u4f20\u7edf\u7684\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\uff08\u6bd4\u5982 C++ \u548c Java\uff09\u5dee\u5f02\u5f88\u5927\uff0c\u5f88\u5bb9\u6613\u8ba9\u65b0\u5b66\u4e60\u8fd9\u95e8\u8bed\u8a00\u7684\u7a0b\u5e8f\u5458\u611f\u5230\u56f0\u60d1\u3002</p> <p>ES6 \u63d0\u4f9b\u4e86\u66f4\u63a5\u8fd1\u4f20\u7edf\u8bed\u8a00\u7684\u5199\u6cd5\uff0c\u5f15\u5165\u4e86 Class\uff08\u7c7b\uff09\u8fd9\u4e2a\u6982\u5ff5\uff0c\u4f5c\u4e3a\u5bf9\u8c61\u7684\u6a21\u677f\u3002\u901a\u8fc7<code>class</code>\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u5b9a\u4e49\u7c7b\u3002</p> <p>\u57fa\u672c\u4e0a\uff0cES6 \u7684<code>class</code>\u53ef\u4ee5\u770b\u4f5c\u53ea\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u5b83\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd\uff0cES5 \u90fd\u53ef\u4ee5\u505a\u5230\uff0c\u65b0\u7684<code>class</code>\u5199\u6cd5\u53ea\u662f\u8ba9\u5bf9\u8c61\u539f\u578b\u7684\u5199\u6cd5\u66f4\u52a0\u6e05\u6670\u3001\u66f4\u50cf\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u8bed\u6cd5\u800c\u5df2\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u7528 ES6 \u7684<code>class</code>\u6539\u5199\uff0c\u5c31\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  toString() {\n    return '(' + this.x + ', ' + this.y + ')';\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u201c\u7c7b\u201d\uff0c\u53ef\u4ee5\u770b\u5230\u91cc\u9762\u6709\u4e00\u4e2a<code>constructor()</code>\u65b9\u6cd5\uff0c\u8fd9\u5c31\u662f\u6784\u9020\u65b9\u6cd5\uff0c\u800c<code>this</code>\u5173\u952e\u5b57\u5219\u4ee3\u8868\u5b9e\u4f8b\u5bf9\u8c61\u3002\u8fd9\u79cd\u65b0\u7684 Class \u5199\u6cd5\uff0c\u672c\u8d28\u4e0a\u4e0e\u672c\u7ae0\u5f00\u5934\u7684 ES5 \u7684\u6784\u9020\u51fd\u6570<code>Point</code>\u662f\u4e00\u81f4\u7684\u3002</p> <p><code>Point</code>\u7c7b\u9664\u4e86\u6784\u9020\u65b9\u6cd5\uff0c\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>toString()</code>\u65b9\u6cd5\u3002\u6ce8\u610f\uff0c\u5b9a\u4e49<code>toString()</code>\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u524d\u9762\u4e0d\u9700\u8981\u52a0\u4e0a<code>function</code>\u8fd9\u4e2a\u5173\u952e\u5b57\uff0c\u76f4\u63a5\u628a\u51fd\u6570\u5b9a\u4e49\u653e\u8fdb\u53bb\u4e86\u5c31\u53ef\u4ee5\u4e86\u3002\u53e6\u5916\uff0c\u65b9\u6cd5\u4e0e\u65b9\u6cd5\u4e4b\u95f4\u4e0d\u9700\u8981\u9017\u53f7\u5206\u9694\uff0c\u52a0\u4e86\u4f1a\u62a5\u9519\u3002</p> <p>ES6 \u7684\u7c7b\uff0c\u5b8c\u5168\u53ef\u4ee5\u770b\u4f5c\u6784\u9020\u51fd\u6570\u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u3002</p> <pre><code>class Point {\n  // ...\n}\n\ntypeof Point // \"function\"\nPoint === Point.prototype.constructor // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0c\u7c7b\u7684\u6570\u636e\u7c7b\u578b\u5c31\u662f\u51fd\u6570\uff0c\u7c7b\u672c\u8eab\u5c31\u6307\u5411\u6784\u9020\u51fd\u6570\u3002</p> <p>\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e5f\u662f\u76f4\u63a5\u5bf9\u7c7b\u4f7f\u7528<code>new</code>\u547d\u4ee4\uff0c\u8ddf\u6784\u9020\u51fd\u6570\u7684\u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>class Bar {\n  doStuff() {\n    console.log('stuff');\n  }\n}\n\nconst b = new Bar();\nb.doStuff() // \"stuff\"\n</code></pre> <p>\u6784\u9020\u51fd\u6570\u7684<code>prototype</code>\u5c5e\u6027\uff0c\u5728 ES6 \u7684\u201c\u7c7b\u201d\u4e0a\u9762\u7ee7\u7eed\u5b58\u5728\u3002\u4e8b\u5b9e\u4e0a\uff0c\u7c7b\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u5b9a\u4e49\u5728\u7c7b\u7684<code>prototype</code>\u5c5e\u6027\u4e0a\u9762\u3002</p> <pre><code>class Point {\n  constructor() {\n    // ...\n  }\n\n  toString() {\n    // ...\n  }\n\n  toValue() {\n    // ...\n  }\n}\n\n// \u7b49\u540c\u4e8e\n\nPoint.prototype = {\n  constructor() {},\n  toString() {},\n  toValue() {},\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>constructor()</code>\u3001<code>toString()</code>\u3001<code>toValue()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\uff0c\u5176\u5b9e\u90fd\u662f\u5b9a\u4e49\u5728<code>Point.prototype</code>\u4e0a\u9762\u3002</p> <p>\u56e0\u6b64\uff0c\u5728\u7c7b\u7684\u5b9e\u4f8b\u4e0a\u9762\u8c03\u7528\u65b9\u6cd5\uff0c\u5176\u5b9e\u5c31\u662f\u8c03\u7528\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\u3002</p> <pre><code>class B {}\nconst b = new B();\n\nb.constructor === B.prototype.constructor // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>b</code>\u662f<code>B</code>\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5b83\u7684<code>constructor()</code>\u65b9\u6cd5\u5c31\u662f<code>B</code>\u7c7b\u539f\u578b\u7684<code>constructor()</code>\u65b9\u6cd5\u3002</p> <p>\u7531\u4e8e\u7c7b\u7684\u65b9\u6cd5\u90fd\u5b9a\u4e49\u5728<code>prototype</code>\u5bf9\u8c61\u4e0a\u9762\uff0c\u6240\u4ee5\u7c7b\u7684\u65b0\u65b9\u6cd5\u53ef\u4ee5\u6dfb\u52a0\u5728<code>prototype</code>\u5bf9\u8c61\u4e0a\u9762\u3002<code>Object.assign()</code>\u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u4e00\u6b21\u5411\u7c7b\u6dfb\u52a0\u591a\u4e2a\u65b9\u6cd5\u3002</p> <pre><code>class Point {\n  constructor(){\n    // ...\n  }\n}\n\nObject.assign(Point.prototype, {\n  toString(){},\n  toValue(){}\n});\n</code></pre> <p><code>prototype</code>\u5bf9\u8c61\u7684<code>constructor</code>\u5c5e\u6027\uff0c\u76f4\u63a5\u6307\u5411\u201c\u7c7b\u201d\u7684\u672c\u8eab\uff0c\u8fd9\u4e0e ES5 \u7684\u884c\u4e3a\u662f\u4e00\u81f4\u7684\u3002</p> <pre><code>Point.prototype.constructor === Point // true\n</code></pre> <p>\u53e6\u5916\uff0c\u7c7b\u7684\u5185\u90e8\u6240\u6709\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u90fd\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\uff08non-enumerable\uff09\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    // ...\n  }\n\n  toString() {\n    // ...\n  }\n}\n\nObject.keys(Point.prototype)\n// []\nObject.getOwnPropertyNames(Point.prototype)\n// [\"constructor\",\"toString\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>toString()</code>\u65b9\u6cd5\u662f<code>Point</code>\u7c7b\u5185\u90e8\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u5b83\u662f\u4e0d\u53ef\u679a\u4e3e\u7684\u3002\u8fd9\u4e00\u70b9\u4e0e ES5 \u7684\u884c\u4e3a\u4e0d\u4e00\u81f4\u3002</p> <pre><code>var Point = function (x, y) {\n  // ...\n};\n\nPoint.prototype.toString = function () {\n  // ...\n};\n\nObject.keys(Point.prototype)\n// [\"toString\"]\nObject.getOwnPropertyNames(Point.prototype)\n// [\"constructor\",\"toString\"]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u91c7\u7528 ES5 \u7684\u5199\u6cd5\uff0c<code>toString()</code>\u65b9\u6cd5\u5c31\u662f\u53ef\u679a\u4e3e\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#constructor","title":"constructor() \u65b9\u6cd5","text":"<p><code>constructor()</code>\u65b9\u6cd5\u662f\u7c7b\u7684\u9ed8\u8ba4\u65b9\u6cd5\uff0c\u901a\u8fc7<code>new</code>\u547d\u4ee4\u751f\u6210\u5bf9\u8c61\u5b9e\u4f8b\u65f6\uff0c\u81ea\u52a8\u8c03\u7528\u8be5\u65b9\u6cd5\u3002\u4e00\u4e2a\u7c7b\u5fc5\u987b\u6709<code>constructor()</code>\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\uff0c\u4e00\u4e2a\u7a7a\u7684<code>constructor()</code>\u65b9\u6cd5\u4f1a\u88ab\u9ed8\u8ba4\u6dfb\u52a0\u3002</p> <pre><code>class Point {\n}\n\n// \u7b49\u540c\u4e8e\nclass Point {\n  constructor() {}\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7a7a\u7684\u7c7b<code>Point</code>\uff0cJavaScript \u5f15\u64ce\u4f1a\u81ea\u52a8\u4e3a\u5b83\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u7684<code>constructor()</code>\u65b9\u6cd5\u3002</p> <p><code>constructor()</code>\u65b9\u6cd5\u9ed8\u8ba4\u8fd4\u56de\u5b9e\u4f8b\u5bf9\u8c61\uff08\u5373<code>this</code>\uff09\uff0c\u5b8c\u5168\u53ef\u4ee5\u6307\u5b9a\u8fd4\u56de\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>class Foo {\n  constructor() {\n    return Object.create(null);\n  }\n}\n\nnew Foo() instanceof Foo\n// false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>constructor()</code>\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5168\u65b0\u7684\u5bf9\u8c61\uff0c\u7ed3\u679c\u5bfc\u81f4\u5b9e\u4f8b\u5bf9\u8c61\u4e0d\u662f<code>Foo</code>\u7c7b\u7684\u5b9e\u4f8b\u3002</p> <p>\u7c7b\u5fc5\u987b\u4f7f\u7528<code>new</code>\u8c03\u7528\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u5b83\u8ddf\u666e\u901a\u6784\u9020\u51fd\u6570\u7684\u4e00\u4e2a\u4e3b\u8981\u533a\u522b\uff0c\u540e\u8005\u4e0d\u7528<code>new</code>\u4e5f\u53ef\u4ee5\u6267\u884c\u3002</p> <pre><code>class Foo {\n  constructor() {\n    return Object.create(null);\n  }\n}\n\nFoo()\n// TypeError: Class constructor Foo cannot be invoked without 'new'\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_2","title":"\u7c7b\u7684\u5b9e\u4f8b","text":"<p>\u751f\u6210\u7c7b\u7684\u5b9e\u4f8b\u7684\u5199\u6cd5\uff0c\u4e0e ES5 \u5b8c\u5168\u4e00\u6837\uff0c\u4e5f\u662f\u4f7f\u7528<code>new</code>\u547d\u4ee4\u3002\u524d\u9762\u8bf4\u8fc7\uff0c\u5982\u679c\u5fd8\u8bb0\u52a0\u4e0a<code>new</code>\uff0c\u50cf\u51fd\u6570\u90a3\u6837\u8c03\u7528<code>Class()</code>\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p> <pre><code>class Point {\n  // ...\n}\n\n// \u62a5\u9519\nvar point = Point(2, 3);\n\n// \u6b63\u786e\nvar point = new Point(2, 3);\n</code></pre> <p>\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u9664\u975e\u663e\u5f0f\u5b9a\u4e49\u5728\u5176\u672c\u8eab\uff08\u5373\u5b9a\u4e49\u5728<code>this</code>\u5bf9\u8c61\u4e0a\uff09\uff0c\u5426\u5219\u90fd\u662f\u5b9a\u4e49\u5728\u539f\u578b\u4e0a\uff08\u5373\u5b9a\u4e49\u5728<code>class</code>\u4e0a\uff09\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  toString() {\n    return '(' + this.x + ', ' + this.y + ')';\n  }\n}\n\nvar point = new Point(2, 3);\n\npoint.toString() // (2, 3)\n\npoint.hasOwnProperty('x') // true\npoint.hasOwnProperty('y') // true\npoint.hasOwnProperty('toString') // false\npoint.__proto__.hasOwnProperty('toString') // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>x</code>\u548c<code>y</code>\u90fd\u662f\u5b9e\u4f8b\u5bf9\u8c61<code>point</code>\u81ea\u8eab\u7684\u5c5e\u6027\uff08\u56e0\u4e3a\u5b9a\u4e49\u5728<code>this</code>\u5bf9\u8c61\u4e0a\uff09\uff0c\u6240\u4ee5<code>hasOwnProperty()</code>\u65b9\u6cd5\u8fd4\u56de<code>true</code>\uff0c\u800c<code>toString()</code>\u662f\u539f\u578b\u5bf9\u8c61\u7684\u5c5e\u6027\uff08\u56e0\u4e3a\u5b9a\u4e49\u5728<code>Point</code>\u7c7b\u4e0a\uff09\uff0c\u6240\u4ee5<code>hasOwnProperty()</code>\u65b9\u6cd5\u8fd4\u56de<code>false</code>\u3002\u8fd9\u4e9b\u90fd\u4e0e ES5 \u7684\u884c\u4e3a\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u4e0e ES5 \u4e00\u6837\uff0c\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u4e00\u4e2a\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>var p1 = new Point(2,3);\nvar p2 = new Point(3,2);\n\np1.__proto__ === p2.__proto__\n//true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p1</code>\u548c<code>p2</code>\u90fd\u662f<code>Point</code>\u7684\u5b9e\u4f8b\uff0c\u5b83\u4eec\u7684\u539f\u578b\u90fd\u662f<code>Point.prototype</code>\uff0c\u6240\u4ee5<code>__proto__</code>\u5c5e\u6027\u662f\u76f8\u7b49\u7684\u3002</p> <p>\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u4e3a\u201c\u7c7b\u201d\u6dfb\u52a0\u65b9\u6cd5\u3002</p> <p><code>__proto__</code> \u5e76\u4e0d\u662f\u8bed\u8a00\u672c\u8eab\u7684\u7279\u6027\uff0c\u8fd9\u662f\u5404\u5927\u5382\u5546\u5177\u4f53\u5b9e\u73b0\u65f6\u6dfb\u52a0\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u867d\u7136\u76ee\u524d\u5f88\u591a\u73b0\u4ee3\u6d4f\u89c8\u5668\u7684 JS \u5f15\u64ce\u4e2d\u90fd\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u79c1\u6709\u5c5e\u6027\uff0c\u4f46\u4f9d\u65e7\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u8be5\u5c5e\u6027\uff0c\u907f\u514d\u5bf9\u73af\u5883\u4ea7\u751f\u4f9d\u8d56\u3002\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>Object.getPrototypeOf()</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\uff0c\u7136\u540e\u518d\u6765\u4e3a\u539f\u578b\u6dfb\u52a0\u65b9\u6cd5/\u5c5e\u6027\u3002</p> <pre><code>var p1 = new Point(2,3);\nvar p2 = new Point(3,2);\n\np1.__proto__.printName = function () { return 'Oops' };\n\np1.printName() // \"Oops\"\np2.printName() // \"Oops\"\n\nvar p3 = new Point(4,2);\np3.printName() // \"Oops\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>p1</code>\u7684\u539f\u578b\u4e0a\u6dfb\u52a0\u4e86\u4e00\u4e2a<code>printName()</code>\u65b9\u6cd5\uff0c\u7531\u4e8e<code>p1</code>\u7684\u539f\u578b\u5c31\u662f<code>p2</code>\u7684\u539f\u578b\uff0c\u56e0\u6b64<code>p2</code>\u4e5f\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u800c\u4e14\uff0c\u6b64\u540e\u65b0\u5efa\u7684\u5b9e\u4f8b<code>p3</code>\u4e5f\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4f7f\u7528\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u6539\u5199\u539f\u578b\uff0c\u5fc5\u987b\u76f8\u5f53\u8c28\u614e\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u6539\u53d8\u201c\u7c7b\u201d\u7684\u539f\u59cb\u5b9a\u4e49\uff0c\u5f71\u54cd\u5230\u6240\u6709\u5b9e\u4f8b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_3","title":"\u5b9e\u4f8b\u5c5e\u6027\u7684\u65b0\u5199\u6cd5","text":"<p>ES2022 \u4e3a\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\uff0c\u53c8\u89c4\u5b9a\u4e86\u4e00\u79cd\u65b0\u5199\u6cd5\u3002\u5b9e\u4f8b\u5c5e\u6027\u73b0\u5728\u9664\u4e86\u53ef\u4ee5\u5b9a\u4e49\u5728<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u7684<code>this</code>\u4e0a\u9762\uff0c\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u5185\u90e8\u7684\u6700\u9876\u5c42\u3002</p> <pre><code>// \u539f\u6765\u7684\u5199\u6cd5\nclass IncreasingCounter {\n  constructor() {\n    this._count = 0;\n  }\n  get value() {\n    console.log('Getting the current value!');\n    return this._count;\n  }\n  increment() {\n    this._count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5b9e\u4f8b\u5c5e\u6027<code>_count</code>\u5b9a\u4e49\u5728<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u7684<code>this</code>\u4e0a\u9762\u3002</p> <p>\u73b0\u5728\u7684\u65b0\u5199\u6cd5\u662f\uff0c\u8fd9\u4e2a\u5c5e\u6027\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u7684\u6700\u9876\u5c42\uff0c\u5176\u4ed6\u90fd\u4e0d\u53d8\u3002</p> <pre><code>class IncreasingCounter {\n  _count = 0;\n  get value() {\n    console.log('Getting the current value!');\n    return this._count;\n  }\n  increment() {\n    this._count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9e\u4f8b\u5c5e\u6027<code>_count</code>\u4e0e\u53d6\u503c\u51fd\u6570<code>value()</code>\u548c<code>increment()</code>\u65b9\u6cd5\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u5c42\u7ea7\u3002\u8fd9\u65f6\uff0c\u4e0d\u9700\u8981\u5728\u5b9e\u4f8b\u5c5e\u6027\u524d\u9762\u52a0\u4e0a<code>this</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u65b0\u5199\u6cd5\u5b9a\u4e49\u7684\u5c5e\u6027\u662f\u5b9e\u4f8b\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u5b9a\u4e49\u5728\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u4e0a\u9762\u3002</p> <p>\u8fd9\u79cd\u65b0\u5199\u6cd5\u7684\u597d\u5904\u662f\uff0c\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u81ea\u8eab\u7684\u5c5e\u6027\u90fd\u5b9a\u4e49\u5728\u7c7b\u7684\u5934\u90e8\uff0c\u770b\u4e0a\u53bb\u6bd4\u8f83\u6574\u9f50\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u8fd9\u4e2a\u7c7b\u6709\u54ea\u4e9b\u5b9e\u4f8b\u5c5e\u6027\u3002</p> <pre><code>class foo {\n  bar = 'hello';\n  baz = 'world';\n\n  constructor() {\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u4e00\u773c\u5c31\u80fd\u770b\u51fa\uff0c<code>foo</code>\u7c7b\u6709\u4e24\u4e2a\u5b9e\u4f8b\u5c5e\u6027\uff0c\u4e00\u76ee\u4e86\u7136\u3002\u53e6\u5916\uff0c\u5199\u8d77\u6765\u4e5f\u6bd4\u8f83\u7b80\u6d01\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#gettersetter","title":"\u53d6\u503c\u51fd\u6570\uff08getter\uff09\u548c\u5b58\u503c\u51fd\u6570\uff08setter\uff09","text":"<p>\u4e0e ES5 \u4e00\u6837\uff0c\u5728\u201c\u7c7b\u201d\u7684\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528<code>get</code>\u548c<code>set</code>\u5173\u952e\u5b57\uff0c\u5bf9\u67d0\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\uff0c\u62e6\u622a\u8be5\u5c5e\u6027\u7684\u5b58\u53d6\u884c\u4e3a\u3002</p> <pre><code>class MyClass {\n  constructor() {\n    // ...\n  }\n  get prop() {\n    return 'getter';\n  }\n  set prop(value) {\n    console.log('setter: '+value);\n  }\n}\n\nlet inst = new MyClass();\n\ninst.prop = 123;\n// setter: 123\n\ninst.prop\n// 'getter'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>prop</code>\u5c5e\u6027\u6709\u5bf9\u5e94\u7684\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\uff0c\u56e0\u6b64\u8d4b\u503c\u548c\u8bfb\u53d6\u884c\u4e3a\u90fd\u88ab\u81ea\u5b9a\u4e49\u4e86\u3002</p> <p>\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\u662f\u8bbe\u7f6e\u5728\u5c5e\u6027\u7684 Descriptor \u5bf9\u8c61\u4e0a\u7684\u3002</p> <pre><code>class CustomHTMLElement {\n  constructor(element) {\n    this.element = element;\n  }\n\n  get html() {\n    return this.element.innerHTML;\n  }\n\n  set html(value) {\n    this.element.innerHTML = value;\n  }\n}\n\nvar descriptor = Object.getOwnPropertyDescriptor(\n  CustomHTMLElement.prototype, \"html\"\n);\n\n\"get\" in descriptor  // true\n\"set\" in descriptor  // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b58\u503c\u51fd\u6570\u548c\u53d6\u503c\u51fd\u6570\u662f\u5b9a\u4e49\u5728<code>html</code>\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u4e0a\u9762\uff0c\u8fd9\u4e0e ES5 \u5b8c\u5168\u4e00\u81f4\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_4","title":"\u5c5e\u6027\u8868\u8fbe\u5f0f","text":"<p>\u7c7b\u7684\u5c5e\u6027\u540d\uff0c\u53ef\u4ee5\u91c7\u7528\u8868\u8fbe\u5f0f\u3002</p> <pre><code>let methodName = 'getArea';\n\nclass Square {\n  constructor(length) {\n    // ...\n  }\n\n  [methodName]() {\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Square</code>\u7c7b\u7684\u65b9\u6cd5\u540d<code>getArea</code>\uff0c\u662f\u4ece\u8868\u8fbe\u5f0f\u5f97\u5230\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#class","title":"Class \u8868\u8fbe\u5f0f","text":"<p>\u4e0e\u51fd\u6570\u4e00\u6837\uff0c\u7c7b\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8868\u8fbe\u5f0f\u7684\u5f62\u5f0f\u5b9a\u4e49\u3002</p> <pre><code>const MyClass = class Me {\n  getClassName() {\n    return Me.name;\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u8868\u8fbe\u5f0f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u7c7b\u7684\u540d\u5b57\u662f<code>Me</code>\uff0c\u4f46\u662f<code>Me</code>\u53ea\u5728 Class \u7684\u5185\u90e8\u53ef\u7528\uff0c\u6307\u4ee3\u5f53\u524d\u7c7b\u3002\u5728 Class \u5916\u90e8\uff0c\u8fd9\u4e2a\u7c7b\u53ea\u80fd\u7528<code>MyClass</code>\u5f15\u7528\u3002</p> <pre><code>let inst = new MyClass();\ninst.getClassName() // Me\nMe.name // ReferenceError: Me is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c<code>Me</code>\u53ea\u5728 Class \u5185\u90e8\u6709\u5b9a\u4e49\u3002</p> <p>\u5982\u679c\u7c7b\u7684\u5185\u90e8\u6ca1\u7528\u5230\u7684\u8bdd\uff0c\u53ef\u4ee5\u7701\u7565<code>Me</code>\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u7684\u5f62\u5f0f\u3002</p> <pre><code>const MyClass = class { /* ... */ };\n</code></pre> <p>\u91c7\u7528 Class \u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u5199\u51fa\u7acb\u5373\u6267\u884c\u7684 Class\u3002</p> <pre><code>let person = new class {\n  constructor(name) {\n    this.name = name;\n  }\n\n  sayName() {\n    console.log(this.name);\n  }\n}('\u5f20\u4e09');\n\nperson.sayName(); // \"\u5f20\u4e09\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>person</code>\u662f\u4e00\u4e2a\u7acb\u5373\u6267\u884c\u7684\u7c7b\u7684\u5b9e\u4f8b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_5","title":"\u9759\u6001\u65b9\u6cd5","text":"<p>\u7c7b\u76f8\u5f53\u4e8e\u5b9e\u4f8b\u7684\u539f\u578b\uff0c\u6240\u6709\u5728\u7c7b\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\uff0c\u90fd\u4f1a\u88ab\u5b9e\u4f8b\u7ee7\u627f\u3002\u5982\u679c\u5728\u4e00\u4e2a\u65b9\u6cd5\u524d\uff0c\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\uff0c\u5c31\u8868\u793a\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u88ab\u5b9e\u4f8b\u7ee7\u627f\uff0c\u800c\u662f\u76f4\u63a5\u901a\u8fc7\u7c7b\u6765\u8c03\u7528\uff0c\u8fd9\u5c31\u79f0\u4e3a\u201c\u9759\u6001\u65b9\u6cd5\u201d\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nFoo.classMethod() // 'hello'\n\nvar foo = new Foo();\nfoo.classMethod()\n// TypeError: foo.classMethod is not a function\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u7684<code>classMethod</code>\u65b9\u6cd5\u524d\u6709<code>static</code>\u5173\u952e\u5b57\uff0c\u8868\u660e\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728<code>Foo</code>\u7c7b\u4e0a\u8c03\u7528\uff08<code>Foo.classMethod()</code>\uff09\uff0c\u800c\u4e0d\u662f\u5728<code>Foo</code>\u7c7b\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528\u3002\u5982\u679c\u5728\u5b9e\u4f8b\u4e0a\u8c03\u7528\u9759\u6001\u65b9\u6cd5\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff0c\u8868\u793a\u4e0d\u5b58\u5728\u8be5\u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u9759\u6001\u65b9\u6cd5\u5305\u542b<code>this</code>\u5173\u952e\u5b57\uff0c\u8fd9\u4e2a<code>this</code>\u6307\u7684\u662f\u7c7b\uff0c\u800c\u4e0d\u662f\u5b9e\u4f8b\u3002</p> <pre><code>class Foo {\n  static bar() {\n    this.baz();\n  }\n  static baz() {\n    console.log('hello');\n  }\n  baz() {\n    console.log('world');\n  }\n}\n\nFoo.bar() // hello\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9759\u6001\u65b9\u6cd5<code>bar</code>\u8c03\u7528\u4e86<code>this.baz</code>\uff0c\u8fd9\u91cc\u7684<code>this</code>\u6307\u7684\u662f<code>Foo</code>\u7c7b\uff0c\u800c\u4e0d\u662f<code>Foo</code>\u7684\u5b9e\u4f8b\uff0c\u7b49\u540c\u4e8e\u8c03\u7528<code>Foo.baz</code>\u3002\u53e6\u5916\uff0c\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u8fd8\u53ef\u4ee5\u770b\u51fa\uff0c\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u4e0e\u975e\u9759\u6001\u65b9\u6cd5\u91cd\u540d\u3002</p> <p>\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nclass Bar extends Foo {\n}\n\nBar.classMethod() // 'hello'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7236\u7c7b<code>Foo</code>\u6709\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5b50\u7c7b<code>Bar</code>\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u9759\u6001\u65b9\u6cd5\u4e5f\u662f\u53ef\u4ee5\u4ece<code>super</code>\u5bf9\u8c61\u4e0a\u8c03\u7528\u7684\u3002</p> <pre><code>class Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nclass Bar extends Foo {\n  static classMethod() {\n    return super.classMethod() + ', too';\n  }\n}\n\nBar.classMethod() // \"hello, too\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_6","title":"\u9759\u6001\u5c5e\u6027","text":"<p>\u9759\u6001\u5c5e\u6027\u6307\u7684\u662f Class \u672c\u8eab\u7684\u5c5e\u6027\uff0c\u5373<code>Class.propName</code>\uff0c\u800c\u4e0d\u662f\u5b9a\u4e49\u5728\u5b9e\u4f8b\u5bf9\u8c61\uff08<code>this</code>\uff09\u4e0a\u7684\u5c5e\u6027\u3002</p> <pre><code>class Foo {\n}\n\nFoo.prop = 1;\nFoo.prop // 1\n</code></pre> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u4e3a<code>Foo</code>\u7c7b\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9759\u6001\u5c5e\u6027<code>prop</code>\u3002</p> <p>\u76ee\u524d\uff0c\u53ea\u6709\u8fd9\u79cd\u5199\u6cd5\u53ef\u884c\uff0c\u56e0\u4e3a ES6 \u660e\u786e\u89c4\u5b9a\uff0cClass \u5185\u90e8\u53ea\u6709\u9759\u6001\u65b9\u6cd5\uff0c\u6ca1\u6709\u9759\u6001\u5c5e\u6027\u3002\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\u63d0\u4f9b\u4e86\u7c7b\u7684\u9759\u6001\u5c5e\u6027\uff0c\u5199\u6cd5\u662f\u5728\u5b9e\u4f8b\u5c5e\u6027\u7684\u524d\u9762\uff0c\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\u3002</p> <pre><code>class MyClass {\n  static myStaticProp = 42;\n\n  constructor() {\n    console.log(MyClass.myStaticProp); // 42\n  }\n}\n</code></pre> <p>\u8fd9\u4e2a\u65b0\u5199\u6cd5\u5927\u5927\u65b9\u4fbf\u4e86\u9759\u6001\u5c5e\u6027\u7684\u8868\u8fbe\u3002</p> <pre><code>// \u8001\u5199\u6cd5\nclass Foo {\n  // ...\n}\nFoo.prop = 1;\n\n// \u65b0\u5199\u6cd5\nclass Foo {\n  static prop = 1;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8001\u5199\u6cd5\u7684\u9759\u6001\u5c5e\u6027\u5b9a\u4e49\u5728\u7c7b\u7684\u5916\u90e8\u3002\u6574\u4e2a\u7c7b\u751f\u6210\u4ee5\u540e\uff0c\u518d\u751f\u6210\u9759\u6001\u5c5e\u6027\u3002\u8fd9\u6837\u8ba9\u4eba\u5f88\u5bb9\u6613\u5ffd\u7565\u8fd9\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u4e5f\u4e0d\u7b26\u5408\u76f8\u5173\u4ee3\u7801\u5e94\u8be5\u653e\u5728\u4e00\u8d77\u7684\u4ee3\u7801\u7ec4\u7ec7\u539f\u5219\u3002\u53e6\u5916\uff0c\u65b0\u5199\u6cd5\u662f\u663e\u5f0f\u58f0\u660e\uff08declarative\uff09\uff0c\u800c\u4e0d\u662f\u8d4b\u503c\u5904\u7406\uff0c\u8bed\u4e49\u66f4\u597d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_7","title":"\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_8","title":"\u65e9\u671f\u89e3\u51b3\u65b9\u6848","text":"<p>\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027\uff0c\u662f\u53ea\u80fd\u5728\u7c7b\u7684\u5185\u90e8\u8bbf\u95ee\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5916\u90e8\u4e0d\u80fd\u8bbf\u95ee\u3002\u8fd9\u662f\u5e38\u89c1\u9700\u6c42\uff0c\u6709\u5229\u4e8e\u4ee3\u7801\u7684\u5c01\u88c5\uff0c\u4f46\u65e9\u671f\u7684 ES6 \u4e0d\u63d0\u4f9b\uff0c\u53ea\u80fd\u901a\u8fc7\u53d8\u901a\u65b9\u6cd5\u6a21\u62df\u5b9e\u73b0\u3002</p> <p>\u4e00\u79cd\u505a\u6cd5\u662f\u5728\u547d\u540d\u4e0a\u52a0\u4ee5\u533a\u522b\u3002</p> <pre><code>class Widget {\n\n  // \u516c\u6709\u65b9\u6cd5\n  foo (baz) {\n    this._bar(baz);\n  }\n\n  // \u79c1\u6709\u65b9\u6cd5\n  _bar(baz) {\n    return this.snaf = baz;\n  }\n\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>_bar()</code>\u65b9\u6cd5\u524d\u9762\u7684\u4e0b\u5212\u7ebf\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u53ea\u9650\u4e8e\u5185\u90e8\u4f7f\u7528\u7684\u79c1\u6709\u65b9\u6cd5\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u547d\u540d\u662f\u4e0d\u4fdd\u9669\u7684\uff0c\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u8fd8\u662f\u53ef\u4ee5\u8c03\u7528\u5230\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u5c31\u662f\u7d22\u6027\u5c06\u79c1\u6709\u65b9\u6cd5\u79fb\u51fa\u7c7b\uff0c\u56e0\u4e3a\u7c7b\u5185\u90e8\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u662f\u5bf9\u5916\u53ef\u89c1\u7684\u3002</p> <pre><code>class Widget {\n  foo (baz) {\n    bar.call(this, baz);\n  }\n\n  // ...\n}\n\nfunction bar(baz) {\n  return this.snaf = baz;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u662f\u516c\u5f00\u65b9\u6cd5\uff0c\u5185\u90e8\u8c03\u7528\u4e86<code>bar.call(this, baz)</code>\u3002\u8fd9\u4f7f\u5f97<code>bar()</code>\u5b9e\u9645\u4e0a\u6210\u4e3a\u4e86\u5f53\u524d\u7c7b\u7684\u79c1\u6709\u65b9\u6cd5\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u65b9\u6cd5\u662f\u5229\u7528<code>Symbol</code>\u503c\u7684\u552f\u4e00\u6027\uff0c\u5c06\u79c1\u6709\u65b9\u6cd5\u7684\u540d\u5b57\u547d\u540d\u4e3a\u4e00\u4e2a<code>Symbol</code>\u503c\u3002</p> <pre><code>const bar = Symbol('bar');\nconst snaf = Symbol('snaf');\n\nexport default class myClass{\n\n  // \u516c\u6709\u65b9\u6cd5\n  foo(baz) {\n    this[bar](baz);\n  }\n\n  // \u79c1\u6709\u65b9\u6cd5\n  [bar](baz) {\n    return this[snaf] = baz;\n  }\n\n  // ...\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>bar</code>\u548c<code>snaf</code>\u90fd\u662f<code>Symbol</code>\u503c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u65e0\u6cd5\u83b7\u53d6\u5230\u5b83\u4eec\uff0c\u56e0\u6b64\u8fbe\u5230\u4e86\u79c1\u6709\u65b9\u6cd5\u548c\u79c1\u6709\u5c5e\u6027\u7684\u6548\u679c\u3002\u4f46\u662f\u4e5f\u4e0d\u662f\u7edd\u5bf9\u4e0d\u884c\uff0c<code>Reflect.ownKeys()</code>\u4f9d\u7136\u53ef\u4ee5\u62ff\u5230\u5b83\u4eec\u3002</p> <pre><code>const inst = new myClass();\n\nReflect.ownKeys(myClass.prototype)\n// [ 'constructor', 'foo', Symbol(bar) ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cSymbol \u503c\u7684\u5c5e\u6027\u540d\u4f9d\u7136\u53ef\u4ee5\u4ece\u7c7b\u7684\u5916\u90e8\u62ff\u5230\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_9","title":"\u79c1\u6709\u5c5e\u6027\u7684\u6b63\u5f0f\u5199\u6cd5","text":"<p>ES2022\u6b63\u5f0f\u4e3a<code>class</code>\u6dfb\u52a0\u4e86\u79c1\u6709\u5c5e\u6027\uff0c\u65b9\u6cd5\u662f\u5728\u5c5e\u6027\u540d\u4e4b\u524d\u4f7f\u7528<code>#</code>\u8868\u793a\u3002</p> <pre><code>class IncreasingCounter {\n  #count = 0;\n  get value() {\n    console.log('Getting the current value!');\n    return this.#count;\n  }\n  increment() {\n    this.#count++;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#count</code>\u5c31\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u53ea\u80fd\u5728\u7c7b\u7684\u5185\u90e8\u4f7f\u7528\uff08<code>this.#count</code>\uff09\u3002\u5982\u679c\u5728\u7c7b\u7684\u5916\u90e8\u4f7f\u7528\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>const counter = new IncreasingCounter();\ncounter.#count // \u62a5\u9519\ncounter.#count = 42 // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u8bfb\u53d6\u6216\u5199\u5165\u79c1\u6709\u5c5e\u6027<code>#count</code>\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u4ece Chrome 111 \u5f00\u59cb\uff0c\u5f00\u53d1\u8005\u5de5\u5177\u91cc\u9762\u53ef\u4ee5\u8bfb\u5199\u79c1\u6709\u5c5e\u6027\uff0c\u4e0d\u4f1a\u62a5\u9519\uff0c\u539f\u56e0\u662f Chrome \u56e2\u961f\u8ba4\u4e3a\u8fd9\u6837\u65b9\u4fbf\u8c03\u8bd5\u3002</p> <p>\u53e6\u5916\uff0c\u4e0d\u7ba1\u5728\u7c7b\u7684\u5185\u90e8\u6216\u5916\u90e8\uff0c\u8bfb\u53d6\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u4e5f\u90fd\u4f1a\u62a5\u9519\u3002\u8fd9\u8ddf\u516c\u5f00\u5c5e\u6027\u7684\u884c\u4e3a\u5b8c\u5168\u4e0d\u540c\uff0c\u5982\u679c\u8bfb\u53d6\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u516c\u5f00\u5c5e\u6027\uff0c\u4e0d\u4f1a\u62a5\u9519\uff0c\u53ea\u4f1a\u8fd4\u56de<code>undefined</code>\u3002</p> <pre><code>class IncreasingCounter {\n  #count = 0;\n  get value() {\n    console.log('Getting the current value!');\n    return this.#myCount; // \u62a5\u9519\n  }\n  increment() {\n    this.#count++;\n  }\n}\n\nconst counter = new IncreasingCounter();\ncounter.#myCount // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>#myCount</code>\u662f\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u4e0d\u7ba1\u5728\u51fd\u6570\u5185\u90e8\u6216\u5916\u90e8\uff0c\u8bfb\u53d6\u8be5\u5c5e\u6027\u90fd\u4f1a\u5bfc\u81f4\u62a5\u9519\u3002</p> <p>\u6ce8\u610f\uff0c\u79c1\u6709\u5c5e\u6027\u7684\u5c5e\u6027\u540d\u5fc5\u987b\u5305\u62ec<code>#</code>\uff0c\u5982\u679c\u4e0d\u5e26<code>#</code>\uff0c\u4f1a\u88ab\u5f53\u4f5c\u53e6\u4e00\u4e2a\u5c5e\u6027\u3002</p> <pre><code>class Point {\n  #x;\n\n  constructor(x = 0) {\n    this.#x = +x;\n  }\n\n  get x() {\n    return this.#x;\n  }\n\n  set x(value) {\n    this.#x = +value;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#x</code>\u5c31\u662f\u79c1\u6709\u5c5e\u6027\uff0c\u5728<code>Point</code>\u7c7b\u4e4b\u5916\u662f\u8bfb\u53d6\u4e0d\u5230\u8fd9\u4e2a\u5c5e\u6027\u7684\u3002\u7531\u4e8e\u4e95\u53f7<code>#</code>\u662f\u5c5e\u6027\u540d\u7684\u4e00\u90e8\u5206\uff0c\u4f7f\u7528\u65f6\u5fc5\u987b\u5e26\u6709<code>#</code>\u4e00\u8d77\u4f7f\u7528\uff0c\u6240\u4ee5<code>#x</code>\u548c<code>x</code>\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u5c5e\u6027\u3002</p> <p>\u8fd9\u79cd\u5199\u6cd5\u4e0d\u4ec5\u53ef\u4ee5\u5199\u79c1\u6709\u5c5e\u6027\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u5199\u79c1\u6709\u65b9\u6cd5\u3002</p> <pre><code>class Foo {\n  #a;\n  #b;\n  constructor(a, b) {\n    this.#a = a;\n    this.#b = b;\n  }\n  #sum() {\n    return this.#a + this.#b;\n  }\n  printSum() {\n    console.log(this.#sum());\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>#sum()</code>\u5c31\u662f\u4e00\u4e2a\u79c1\u6709\u65b9\u6cd5\u3002</p> <p>\u53e6\u5916\uff0c\u79c1\u6709\u5c5e\u6027\u4e5f\u53ef\u4ee5\u8bbe\u7f6e getter \u548c setter \u65b9\u6cd5\u3002</p> <pre><code>class Counter {\n  #xValue = 0;\n\n  constructor() {\n    console.log(this.#x);\n  }\n\n  get #x() { return this.#xValue; }\n  set #x(value) {\n    this.#xValue = value;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#x</code>\u662f\u4e00\u4e2a\u79c1\u6709\u5c5e\u6027\uff0c\u5b83\u7684\u8bfb\u5199\u90fd\u901a\u8fc7<code>get #x()</code>\u548c<code>set #x()</code>\u64cd\u4f5c\u53e6\u4e00\u4e2a\u79c1\u6709\u5c5e\u6027<code>#xValue</code>\u6765\u5b8c\u6210\u3002</p> <p>\u79c1\u6709\u5c5e\u6027\u4e0d\u9650\u4e8e\u4ece<code>this</code>\u5f15\u7528\uff0c\u53ea\u8981\u662f\u5728\u7c7b\u7684\u5185\u90e8\uff0c\u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u5f15\u7528\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>class Foo {\n  #privateValue = 42;\n  static getPrivateValue(foo) {\n    return foo.#privateValue;\n  }\n}\n\nFoo.getPrivateValue(new Foo()); // 42\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5141\u8bb8\u4ece\u5b9e\u4f8b<code>foo</code>\u4e0a\u9762\u5f15\u7528\u79c1\u6709\u5c5e\u6027\u3002</p> <p>\u79c1\u6709\u5c5e\u6027\u548c\u79c1\u6709\u65b9\u6cd5\u524d\u9762\uff0c\u4e5f\u53ef\u4ee5\u52a0\u4e0a<code>static</code>\u5173\u952e\u5b57\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u9759\u6001\u7684\u79c1\u6709\u5c5e\u6027\u6216\u79c1\u6709\u65b9\u6cd5\u3002</p> <pre><code>class FakeMath {\n  static PI = 22 / 7;\n  static #totallyRandomNumber = 4;\n\n  static #computeRandomNumber() {\n    return FakeMath.#totallyRandomNumber;\n  }\n\n  static random() {\n    console.log('I heard you like random numbers\u2026')\n    return FakeMath.#computeRandomNumber();\n  }\n}\n\nFakeMath.PI // 3.142857142857143\nFakeMath.random()\n// I heard you like random numbers\u2026\n// 4\nFakeMath.#totallyRandomNumber // \u62a5\u9519\nFakeMath.#computeRandomNumber() // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>#totallyRandomNumber</code>\u662f\u79c1\u6709\u5c5e\u6027\uff0c<code>#computeRandomNumber()</code>\u662f\u79c1\u6709\u65b9\u6cd5\uff0c\u53ea\u80fd\u5728<code>FakeMath</code>\u8fd9\u4e2a\u7c7b\u7684\u5185\u90e8\u8c03\u7528\uff0c\u5916\u90e8\u8c03\u7528\u5c31\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#in","title":"in \u8fd0\u7b97\u7b26","text":"<p>\u524d\u9762\u8bf4\u8fc7\uff0c\u76f4\u63a5\u8bbf\u95ee\u67d0\u4e2a\u7c7b\u4e0d\u5b58\u5728\u7684\u79c1\u6709\u5c5e\u6027\u4f1a\u62a5\u9519\uff0c\u4f46\u662f\u8bbf\u95ee\u4e0d\u5b58\u5728\u7684\u516c\u5f00\u5c5e\u6027\u4e0d\u4f1a\u62a5\u9519\u3002\u8fd9\u4e2a\u7279\u6027\u53ef\u4ee5\u7528\u6765\u5224\u65ad\uff0c\u67d0\u4e2a\u5bf9\u8c61\u662f\u5426\u4e3a\u7c7b\u7684\u5b9e\u4f8b\u3002</p> <pre><code>class C {\n  #brand;\n\n  static isC(obj) {\n    try {\n      obj.#brand;\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u7c7b<code>C</code>\u7684\u9759\u6001\u65b9\u6cd5<code>isC()</code>\u5c31\u7528\u6765\u5224\u65ad\uff0c\u67d0\u4e2a\u5bf9\u8c61\u662f\u5426\u4e3a<code>C</code>\u7684\u5b9e\u4f8b\u3002\u5b83\u91c7\u7528\u7684\u65b9\u6cd5\u5c31\u662f\uff0c\u8bbf\u95ee\u8be5\u5bf9\u8c61\u7684\u79c1\u6709\u5c5e\u6027<code>#brand</code>\u3002\u5982\u679c\u4e0d\u62a5\u9519\uff0c\u5c31\u4f1a\u8fd4\u56de<code>true</code>\uff1b\u5982\u679c\u62a5\u9519\uff0c\u5c31\u8bf4\u660e\u8be5\u5bf9\u8c61\u4e0d\u662f\u5f53\u524d\u7c7b\u7684\u5b9e\u4f8b\uff0c\u4ece\u800c<code>catch</code>\u90e8\u5206\u8fd4\u56de<code>false</code>\u3002</p> <p>\u56e0\u6b64\uff0c<code>try...catch</code>\u7ed3\u6784\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u67d0\u4e2a\u79c1\u6709\u5c5e\u6027\u662f\u5426\u5b58\u5728\u3002\u4f46\u662f\uff0c\u8fd9\u6837\u7684\u5199\u6cd5\u5f88\u9ebb\u70e6\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u5f88\u5dee\uff0cES2022 \u6539\u8fdb\u4e86<code>in</code>\u8fd0\u7b97\u7b26\uff0c\u4f7f\u5b83\u4e5f\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>class C {\n  #brand;\n\n  static isC(obj) {\n    if (#brand in obj) {\n      // \u79c1\u6709\u5c5e\u6027 #brand \u5b58\u5728\n      return true;\n    } else {\n      // \u79c1\u6709\u5c5e\u6027 #foo \u4e0d\u5b58\u5728\n      return false;\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>in</code>\u8fd0\u7b97\u7b26\u5224\u65ad\u67d0\u4e2a\u5bf9\u8c61\u662f\u5426\u6709\u79c1\u6709\u5c5e\u6027<code>#brand</code>\u3002\u5b83\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\u3002</p> <p>\u8fd9\u79cd\u7528\u6cd5\u7684<code>in</code>\uff0c\u4e5f\u53ef\u4ee5\u8ddf<code>this</code>\u4e00\u8d77\u914d\u5408\u4f7f\u7528\u3002</p> <pre><code>class A {\n  #foo = 0;\n  m() {\n    console.log(#foo in this); // true\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5224\u65ad\u79c1\u6709\u5c5e\u6027\u65f6\uff0c<code>in</code>\u53ea\u80fd\u7528\u5728\u7c7b\u7684\u5185\u90e8\u3002\u53e6\u5916\uff0c\u5224\u65ad\u6240\u9488\u5bf9\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u4e00\u5b9a\u8981\u5148\u58f0\u660e\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {\n  m() {\n    console.log(#foo in this); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u79c1\u6709\u5c5e\u6027<code>#foo</code>\u6ca1\u6709\u58f0\u660e\uff0c\u5c31\u76f4\u63a5\u7528\u4e8e<code>in</code>\u8fd0\u7b97\u7b26\u7684\u5224\u65ad\uff0c\u5bfc\u81f4\u62a5\u9519\u3002</p> <p>\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>in</code>\u8fd0\u7b97\u7b26\u6765\u5224\u65ad\u3002</p> <pre><code>class A {\n  #foo = 0;\n  static test(obj) {\n    console.log(#foo in obj);\n  }\n}\n\nclass SubA extends A {};\n\nA.test(new SubA()) // true\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>SubA</code>\u4ece\u7236\u7c7b\u7ee7\u627f\u4e86\u79c1\u6709\u5c5e\u6027<code>#foo</code>\uff0c<code>in</code>\u8fd0\u7b97\u7b26\u4e5f\u6709\u6548\u3002</p> <p>\u6ce8\u610f\uff0c<code>in</code>\u8fd0\u7b97\u7b26\u5bf9\u4e8e<code>Object.create()</code>\u3001<code>Object.setPrototypeOf</code>\u5f62\u6210\u7684\u7ee7\u627f\uff0c\u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a\u8fd9\u79cd\u7ee7\u627f\u4e0d\u4f1a\u4f20\u9012\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>class A {\n  #foo = 0;\n  static test(obj) {\n    console.log(#foo in obj);\n  }\n}\nconst a = new A();\n\nconst o1 = Object.create(a);\nA.test(o1) // false\nA.test(o1.__proto__) // true\n\nconst o2 = {};\nObject.setPrototypeOf(o2, a);\nA.test(o2) // false\nA.test(o2.__proto__) // true\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5bf9\u4e8e\u4fee\u6539\u539f\u578b\u94fe\u5f62\u6210\u7684\u7ee7\u627f\uff0c\u5b50\u7c7b\u90fd\u53d6\u4e0d\u5230\u7236\u7c7b\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u6240\u4ee5<code>in</code>\u8fd0\u7b97\u7b26\u65e0\u6548\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_10","title":"\u9759\u6001\u5757","text":"<p>\u9759\u6001\u5c5e\u6027\u7684\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u5982\u679c\u5b83\u6709\u521d\u59cb\u5316\u903b\u8f91\uff0c\u8fd9\u4e2a\u903b\u8f91\u8981\u4e48\u5199\u5728\u7c7b\u7684\u5916\u90e8\uff0c\u8981\u4e48\u5199\u5728<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u3002</p> <pre><code>class C {\n  static x = 234;\n  static y;\n  static z;\n}\n\ntry {\n  const obj = doSomethingWith(C.x);\n  C.y = obj.y\n  C.z = obj.z;\n} catch {\n  C.y = ...;\n  C.z = ...;\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u9759\u6001\u5c5e\u6027<code>y</code>\u548c<code>z</code>\u7684\u503c\u4f9d\u8d56\u4e8e\u9759\u6001\u5c5e\u6027<code>x</code>\u7684\u8fd0\u7b97\u7ed3\u679c\uff0c\u8fd9\u6bb5\u521d\u59cb\u5316\u903b\u8f91\u5199\u5728\u7c7b\u7684\u5916\u90e8\uff08\u4e0a\u4f8b\u7684<code>try...catch</code>\u4ee3\u7801\u5757\uff09\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u5199\u5230\u7c7b\u7684<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u524d\u8005\u662f\u5c06\u7c7b\u7684\u5185\u90e8\u903b\u8f91\u5199\u5230\u4e86\u5916\u90e8\uff0c\u540e\u8005\u5219\u662f\u6bcf\u6b21\u65b0\u5efa\u5b9e\u4f8b\u90fd\u4f1a\u8fd0\u884c\u4e00\u6b21\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cES2022 \u5f15\u5165\u4e86\u9759\u6001\u5757\uff08static block\uff09\uff0c\u5141\u8bb8\u5728\u7c7b\u7684\u5185\u90e8\u8bbe\u7f6e\u4e00\u4e2a\u4ee3\u7801\u5757\uff0c\u5728\u7c7b\u751f\u6210\u65f6\u8fd0\u884c\u4e14\u53ea\u8fd0\u884c\u4e00\u6b21\uff0c\u4e3b\u8981\u4f5c\u7528\u662f\u5bf9\u9759\u6001\u5c5e\u6027\u8fdb\u884c\u521d\u59cb\u5316\u3002\u4ee5\u540e\uff0c\u65b0\u5efa\u7c7b\u7684\u5b9e\u4f8b\u65f6\uff0c\u8fd9\u4e2a\u5757\u5c31\u4e0d\u8fd0\u884c\u4e86\u3002</p> <pre><code>class C {\n  static x = ...;\n  static y;\n  static z;\n\n  static {\n    try {\n      const obj = doSomethingWith(this.x);\n      this.y = obj.y;\n      this.z = obj.z;\n    }\n    catch {\n      this.y = ...;\n      this.z = ...;\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7c7b\u7684\u5185\u90e8\u6709\u4e00\u4e2a static \u4ee3\u7801\u5757\uff0c\u8fd9\u5c31\u662f\u9759\u6001\u5757\u3002\u5b83\u7684\u597d\u5904\u662f\u5c06\u9759\u6001\u5c5e\u6027<code>y</code>\u548c<code>z</code>\u7684\u521d\u59cb\u5316\u903b\u8f91\uff0c\u5199\u5165\u4e86\u7c7b\u7684\u5185\u90e8\uff0c\u800c\u4e14\u53ea\u8fd0\u884c\u4e00\u6b21\u3002</p> <p>\u6bcf\u4e2a\u7c7b\u5141\u8bb8\u6709\u591a\u4e2a\u9759\u6001\u5757\uff0c\u6bcf\u4e2a\u9759\u6001\u5757\u4e2d\u53ea\u80fd\u8bbf\u95ee\u4e4b\u524d\u58f0\u660e\u7684\u9759\u6001\u5c5e\u6027\u3002\u53e6\u5916\uff0c\u9759\u6001\u5757\u7684\u5185\u90e8\u4e0d\u80fd\u6709<code>return</code>\u8bed\u53e5\u3002</p> <p>\u9759\u6001\u5757\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528\u7c7b\u540d\u6216<code>this</code>\uff0c\u6307\u4ee3\u5f53\u524d\u7c7b\u3002</p> <pre><code>class C {\n  static x = 1;\n  static {\n    this.x; // 1\n    // \u6216\u8005\n    C.x; // 1\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>this.x</code>\u548c<code>C.x</code>\u90fd\u80fd\u83b7\u53d6\u9759\u6001\u5c5e\u6027<code>x</code>\u3002</p> <p>\u9664\u4e86\u9759\u6001\u5c5e\u6027\u7684\u521d\u59cb\u5316\uff0c\u9759\u6001\u5757\u8fd8\u6709\u4e00\u4e2a\u4f5c\u7528\uff0c\u5c31\u662f\u5c06\u79c1\u6709\u5c5e\u6027\u4e0e\u7c7b\u7684\u5916\u90e8\u4ee3\u7801\u5206\u4eab\u3002</p> <pre><code>let getX;\n\nexport class C {\n  #x = 1;\n  static {\n    getX = obj =&gt; obj.#x;\n  }\n}\n\nconsole.log(getX(new C())); // 1\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>#x</code>\u662f\u7c7b\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u5982\u679c\u7c7b\u5916\u90e8\u7684<code>getX()</code>\u65b9\u6cd5\u5e0c\u671b\u83b7\u53d6\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4ee5\u524d\u662f\u8981\u5199\u5728\u7c7b\u7684<code>constructor()</code>\u65b9\u6cd5\u91cc\u9762\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u6bcf\u6b21\u65b0\u5efa\u5b9e\u4f8b\u90fd\u4f1a\u5b9a\u4e49\u4e00\u6b21<code>getX()</code>\u65b9\u6cd5\u3002\u73b0\u5728\u53ef\u4ee5\u5199\u5728\u9759\u6001\u5757\u91cc\u9762\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u53ea\u5728\u7c7b\u751f\u6210\u65f6\u5b9a\u4e49\u4e00\u6b21\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_11","title":"\u7c7b\u7684\u6ce8\u610f\u70b9","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_12","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>\u7c7b\u548c\u6a21\u5757\u7684\u5185\u90e8\uff0c\u9ed8\u8ba4\u5c31\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u4f7f\u7528<code>use strict</code>\u6307\u5b9a\u8fd0\u884c\u6a21\u5f0f\u3002\u53ea\u8981\u4f60\u7684\u4ee3\u7801\u5199\u5728\u7c7b\u6216\u6a21\u5757\u4e4b\u4e2d\uff0c\u5c31\u53ea\u6709\u4e25\u683c\u6a21\u5f0f\u53ef\u7528\u3002\u8003\u8651\u5230\u672a\u6765\u6240\u6709\u7684\u4ee3\u7801\uff0c\u5176\u5b9e\u90fd\u662f\u8fd0\u884c\u5728\u6a21\u5757\u4e4b\u4e2d\uff0c\u6240\u4ee5 ES6 \u5b9e\u9645\u4e0a\u628a\u6574\u4e2a\u8bed\u8a00\u5347\u7ea7\u5230\u4e86\u4e25\u683c\u6a21\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#_13","title":"\u4e0d\u5b58\u5728\u63d0\u5347","text":"<p>\u7c7b\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347\uff08hoist\uff09\uff0c\u8fd9\u4e00\u70b9\u4e0e ES5 \u5b8c\u5168\u4e0d\u540c\u3002</p> <pre><code>new Foo(); // ReferenceError\nclass Foo {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u4f7f\u7528\u5728\u524d\uff0c\u5b9a\u4e49\u5728\u540e\uff0c\u8fd9\u6837\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a ES6 \u4e0d\u4f1a\u628a\u7c7b\u7684\u58f0\u660e\u63d0\u5347\u5230\u4ee3\u7801\u5934\u90e8\u3002\u8fd9\u79cd\u89c4\u5b9a\u7684\u539f\u56e0\u4e0e\u4e0b\u6587\u8981\u63d0\u5230\u7684\u7ee7\u627f\u6709\u5173\uff0c\u5fc5\u987b\u4fdd\u8bc1\u5b50\u7c7b\u5728\u7236\u7c7b\u4e4b\u540e\u5b9a\u4e49\u3002</p> <pre><code>{\n  let Foo = class {};\n  class Bar extends Foo {\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>Bar</code>\u7ee7\u627f<code>Foo</code>\u7684\u65f6\u5019\uff0c<code>Foo</code>\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\u3002\u4f46\u662f\uff0c\u5982\u679c\u5b58\u5728<code>class</code>\u7684\u63d0\u5347\uff0c\u4e0a\u9762\u4ee3\u7801\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>class</code>\u4f1a\u88ab\u63d0\u5347\u5230\u4ee3\u7801\u5934\u90e8\uff0c\u800c\u5b9a\u4e49<code>Foo</code>\u7684\u90a3\u4e00\u884c\u6ca1\u6709\u63d0\u5347\uff0c\u5bfc\u81f4<code>Bar</code>\u7ee7\u627f<code>Foo</code>\u7684\u65f6\u5019\uff0c<code>Foo</code>\u8fd8\u6ca1\u6709\u5b9a\u4e49\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#name","title":"name \u5c5e\u6027","text":"<p>\u7531\u4e8e\u672c\u8d28\u4e0a\uff0cES6 \u7684\u7c7b\u53ea\u662f ES5 \u7684\u6784\u9020\u51fd\u6570\u7684\u4e00\u5c42\u5305\u88c5\uff0c\u6240\u4ee5\u51fd\u6570\u7684\u8bb8\u591a\u7279\u6027\u90fd\u88ab<code>Class</code>\u7ee7\u627f\uff0c\u5305\u62ec<code>name</code>\u5c5e\u6027\u3002</p> <pre><code>class Point {}\nPoint.name // \"Point\"\n</code></pre> <p><code>name</code>\u5c5e\u6027\u603b\u662f\u8fd4\u56de\u7d27\u8ddf\u5728<code>class</code>\u5173\u952e\u5b57\u540e\u9762\u7684\u7c7b\u540d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#generator","title":"Generator \u65b9\u6cd5","text":"<p>\u5982\u679c\u67d0\u4e2a\u65b9\u6cd5\u4e4b\u524d\u52a0\u4e0a\u661f\u53f7\uff08<code>*</code>\uff09\uff0c\u5c31\u8868\u793a\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a Generator \u51fd\u6570\u3002</p> <pre><code>class Foo {\n  constructor(...args) {\n    this.args = args;\n  }\n  * [Symbol.iterator]() {\n    for (let arg of this.args) {\n      yield arg;\n    }\n  }\n}\n\nfor (let x of new Foo('hello', 'world')) {\n  console.log(x);\n}\n// hello\n// world\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Foo</code>\u7c7b\u7684<code>Symbol.iterator</code>\u65b9\u6cd5\u524d\u6709\u4e00\u4e2a\u661f\u53f7\uff0c\u8868\u793a\u8be5\u65b9\u6cd5\u662f\u4e00\u4e2a Generator \u51fd\u6570\u3002<code>Symbol.iterator</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a<code>Foo</code>\u7c7b\u7684\u9ed8\u8ba4\u904d\u5386\u5668\uff0c<code>for...of</code>\u5faa\u73af\u4f1a\u81ea\u52a8\u8c03\u7528\u8fd9\u4e2a\u904d\u5386\u5668\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#this","title":"this \u7684\u6307\u5411","text":"<p>\u7c7b\u7684\u65b9\u6cd5\u5185\u90e8\u5982\u679c\u542b\u6709<code>this</code>\uff0c\u5b83\u9ed8\u8ba4\u6307\u5411\u7c7b\u7684\u5b9e\u4f8b\u3002\u4f46\u662f\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\uff0c\u4e00\u65e6\u5355\u72ec\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u5f88\u53ef\u80fd\u62a5\u9519\u3002</p> <pre><code>class Logger {\n  printName(name = 'there') {\n    this.print(`Hello ${name}`);\n  }\n\n  print(text) {\n    console.log(text);\n  }\n}\n\nconst logger = new Logger();\nconst { printName } = logger;\nprintName(); // TypeError: Cannot read property 'print' of undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>printName</code>\u65b9\u6cd5\u4e2d\u7684<code>this</code>\uff0c\u9ed8\u8ba4\u6307\u5411<code>Logger</code>\u7c7b\u7684\u5b9e\u4f8b\u3002\u4f46\u662f\uff0c\u5982\u679c\u5c06\u8fd9\u4e2a\u65b9\u6cd5\u63d0\u53d6\u51fa\u6765\u5355\u72ec\u4f7f\u7528\uff0c<code>this</code>\u4f1a\u6307\u5411\u8be5\u65b9\u6cd5\u8fd0\u884c\u65f6\u6240\u5728\u7684\u73af\u5883\uff08\u7531\u4e8e class \u5185\u90e8\u662f\u4e25\u683c\u6a21\u5f0f\uff0c\u6240\u4ee5 this \u5b9e\u9645\u6307\u5411\u7684\u662f<code>undefined</code>\uff09\uff0c\u4ece\u800c\u5bfc\u81f4\u627e\u4e0d\u5230<code>print</code>\u65b9\u6cd5\u800c\u62a5\u9519\u3002</p> <p>\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5728\u6784\u9020\u65b9\u6cd5\u4e2d\u7ed1\u5b9a<code>this</code>\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u627e\u4e0d\u5230<code>print</code>\u65b9\u6cd5\u4e86\u3002</p> <pre><code>class Logger {\n  constructor() {\n    this.printName = this.printName.bind(this);\n  }\n\n  // ...\n}\n</code></pre> <p>\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u3002</p> <pre><code>class Obj {\n  constructor() {\n    this.getThis = () =&gt; this;\n  }\n}\n\nconst myObj = new Obj();\nmyObj.getThis() === myObj // true\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684<code>this</code>\u603b\u662f\u6307\u5411\u5b9a\u4e49\u65f6\u6240\u5728\u7684\u5bf9\u8c61\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7bad\u5934\u51fd\u6570\u4f4d\u4e8e\u6784\u9020\u51fd\u6570\u5185\u90e8\uff0c\u5b83\u7684\u5b9a\u4e49\u751f\u6548\u7684\u65f6\u5019\uff0c\u662f\u5728\u6784\u9020\u51fd\u6570\u6267\u884c\u7684\u65f6\u5019\u3002\u8fd9\u65f6\uff0c\u7bad\u5934\u51fd\u6570\u6240\u5728\u7684\u8fd0\u884c\u73af\u5883\uff0c\u80af\u5b9a\u662f\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u6240\u4ee5<code>this</code>\u4f1a\u603b\u662f\u6307\u5411\u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528<code>Proxy</code>\uff0c\u83b7\u53d6\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u7ed1\u5b9a<code>this</code>\u3002</p> <pre><code>function selfish (target) {\n  const cache = new WeakMap();\n  const handler = {\n    get (target, key) {\n      const value = Reflect.get(target, key);\n      if (typeof value !== 'function') {\n        return value;\n      }\n      if (!cache.has(value)) {\n        cache.set(value, value.bind(target));\n      }\n      return cache.get(value);\n    }\n  };\n  const proxy = new Proxy(target, handler);\n  return proxy;\n}\n\nconst logger = selfish(new Logger());\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/22-class/#newtarget","title":"new.target \u5c5e\u6027","text":"<p><code>new</code>\u662f\u4ece\u6784\u9020\u51fd\u6570\u751f\u6210\u5b9e\u4f8b\u5bf9\u8c61\u7684\u547d\u4ee4\u3002ES6 \u4e3a<code>new</code>\u547d\u4ee4\u5f15\u5165\u4e86\u4e00\u4e2a<code>new.target</code>\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u4e00\u822c\u7528\u5728\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\uff0c\u8fd4\u56de<code>new</code>\u547d\u4ee4\u4f5c\u7528\u4e8e\u7684\u90a3\u4e2a\u6784\u9020\u51fd\u6570\u3002\u5982\u679c\u6784\u9020\u51fd\u6570\u4e0d\u662f\u901a\u8fc7<code>new</code>\u547d\u4ee4\u6216<code>Reflect.construct()</code>\u8c03\u7528\u7684\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de<code>undefined</code>\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u786e\u5b9a\u6784\u9020\u51fd\u6570\u662f\u600e\u4e48\u8c03\u7528\u7684\u3002</p> <pre><code>function Person(name) {\n  if (new.target !== undefined) {\n    this.name = name;\n  } else {\n    throw new Error('\u5fc5\u987b\u4f7f\u7528 new \u547d\u4ee4\u751f\u6210\u5b9e\u4f8b');\n  }\n}\n\n// \u53e6\u4e00\u79cd\u5199\u6cd5\nfunction Person(name) {\n  if (new.target === Person) {\n    this.name = name;\n  } else {\n    throw new Error('\u5fc5\u987b\u4f7f\u7528 new \u547d\u4ee4\u751f\u6210\u5b9e\u4f8b');\n  }\n}\n\nvar person = new Person('\u5f20\u4e09'); // \u6b63\u786e\nvar notAPerson = Person.call(person, '\u5f20\u4e09');  // \u62a5\u9519\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u786e\u4fdd\u6784\u9020\u51fd\u6570\u53ea\u80fd\u901a\u8fc7<code>new</code>\u547d\u4ee4\u8c03\u7528\u3002</p> <p>Class \u5185\u90e8\u8c03\u7528<code>new.target</code>\uff0c\u8fd4\u56de\u5f53\u524d Class\u3002</p> <pre><code>class Rectangle {\n  constructor(length, width) {\n    console.log(new.target === Rectangle);\n    this.length = length;\n    this.width = width;\n  }\n}\n\nvar obj = new Rectangle(3, 4); // \u8f93\u51fa true\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u65f6\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de\u5b50\u7c7b\u3002</p> <pre><code>class Rectangle {\n  constructor(length, width) {\n    console.log(new.target === Rectangle);\n    // ...\n  }\n}\n\nclass Square extends Rectangle {\n  constructor(length, width) {\n    super(length, width);\n  }\n}\n\nvar obj = new Square(3); // \u8f93\u51fa false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>new.target</code>\u4f1a\u8fd4\u56de\u5b50\u7c7b\u3002</p> <p>\u5229\u7528\u8fd9\u4e2a\u7279\u70b9\uff0c\u53ef\u4ee5\u5199\u51fa\u4e0d\u80fd\u72ec\u7acb\u4f7f\u7528\u3001\u5fc5\u987b\u7ee7\u627f\u540e\u624d\u80fd\u4f7f\u7528\u7684\u7c7b\u3002</p> <pre><code>class Shape {\n  constructor() {\n    if (new.target === Shape) {\n      throw new Error('\u672c\u7c7b\u4e0d\u80fd\u5b9e\u4f8b\u5316');\n    }\n  }\n}\n\nclass Rectangle extends Shape {\n  constructor(length, width) {\n    super();\n    // ...\n  }\n}\n\nvar x = new Shape();  // \u62a5\u9519\nvar y = new Rectangle(3, 4);  // \u6b63\u786e\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Shape</code>\u7c7b\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316\uff0c\u53ea\u80fd\u7528\u4e8e\u7ee7\u627f\u3002</p> <p>\u6ce8\u610f\uff0c\u5728\u51fd\u6570\u5916\u90e8\uff0c\u4f7f\u7528<code>new.target</code>\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/","title":"23-Class \u7684\u7ee7\u627f","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#_1","title":"\u7b80\u4ecb","text":"<p>Class \u53ef\u4ee5\u901a\u8fc7<code>extends</code>\u5173\u952e\u5b57\u5b9e\u73b0\u7ee7\u627f\uff0c\u8ba9\u5b50\u7c7b\u7ee7\u627f\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002extends \u7684\u5199\u6cd5\u6bd4 ES5 \u7684\u539f\u578b\u94fe\u7ee7\u627f\uff0c\u8981\u6e05\u6670\u548c\u65b9\u4fbf\u5f88\u591a\u3002</p> <pre><code>class Point {\n}\n\nclass ColorPoint extends Point {\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>Point</code>\u662f\u7236\u7c7b\uff0c<code>ColorPoint</code>\u662f\u5b50\u7c7b\uff0c\u5b83\u901a\u8fc7<code>extends</code>\u5173\u952e\u5b57\uff0c\u7ee7\u627f\u4e86<code>Point</code>\u7c7b\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u4f46\u662f\u7531\u4e8e\u6ca1\u6709\u90e8\u7f72\u4efb\u4f55\u4ee3\u7801\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a\u7c7b\u5b8c\u5168\u4e00\u6837\uff0c\u7b49\u4e8e\u590d\u5236\u4e86\u4e00\u4e2a<code>Point</code>\u7c7b\u3002</p> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u5728<code>ColorPoint</code>\u5185\u90e8\u52a0\u4e0a\u4ee3\u7801\u3002</p> <pre><code>class Point { /* ... */ }\n\nclass ColorPoint extends Point {\n  constructor(x, y, color) {\n    super(x, y); // \u8c03\u7528\u7236\u7c7b\u7684constructor(x, y)\n    this.color = color;\n  }\n\n  toString() {\n    return this.color + ' ' + super.toString(); // \u8c03\u7528\u7236\u7c7b\u7684toString()\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>constructor()</code>\u65b9\u6cd5\u548c<code>toString()</code>\u65b9\u6cd5\u5185\u90e8\uff0c\u90fd\u51fa\u73b0\u4e86<code>super</code>\u5173\u952e\u5b57\u3002<code>super</code>\u5728\u8fd9\u91cc\u8868\u793a\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u65b0\u5efa\u4e00\u4e2a\u7236\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\u3002</p> <p>ES6 \u89c4\u5b9a\uff0c\u5b50\u7c7b\u5fc5\u987b\u5728<code>constructor()</code>\u65b9\u6cd5\u4e2d\u8c03\u7528<code>super()</code>\uff0c\u5426\u5219\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u56e0\u4e3a\u5b50\u7c7b\u81ea\u5df1\u7684<code>this</code>\u5bf9\u8c61\uff0c\u5fc5\u987b\u5148\u901a\u8fc7\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5b8c\u6210\u5851\u9020\uff0c\u5f97\u5230\u4e0e\u7236\u7c7b\u540c\u6837\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u7136\u540e\u518d\u5bf9\u5176\u8fdb\u884c\u52a0\u5de5\uff0c\u6dfb\u52a0\u5b50\u7c7b\u81ea\u5df1\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u5982\u679c\u4e0d\u8c03\u7528<code>super()</code>\u65b9\u6cd5\uff0c\u5b50\u7c7b\u5c31\u5f97\u4e0d\u5230\u81ea\u5df1\u7684<code>this</code>\u5bf9\u8c61\u3002</p> <pre><code>class Point { /* ... */ }\n\nclass ColorPoint extends Point {\n  constructor() {\n  }\n}\n\nlet cp = new ColorPoint(); // ReferenceError\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ColorPoint</code>\u7ee7\u627f\u4e86\u7236\u7c7b<code>Point</code>\uff0c\u4f46\u662f\u5b83\u7684\u6784\u9020\u51fd\u6570\u6ca1\u6709\u8c03\u7528<code>super()</code>\uff0c\u5bfc\u81f4\u65b0\u5efa\u5b9e\u4f8b\u65f6\u62a5\u9519\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u4e00\u5b9a\u8981\u8c03\u7528<code>super()</code>\uff1f\u539f\u56e0\u5c31\u5728\u4e8e ES6 \u7684\u7ee7\u627f\u673a\u5236\uff0c\u4e0e ES5 \u5b8c\u5168\u4e0d\u540c\u3002ES5 \u7684\u7ee7\u627f\u673a\u5236\uff0c\u662f\u5148\u521b\u9020\u4e00\u4e2a\u72ec\u7acb\u7684\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7136\u540e\u518d\u5c06\u7236\u7c7b\u7684\u65b9\u6cd5\u6dfb\u52a0\u5230\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\uff0c\u5373\u201c\u5b9e\u4f8b\u5728\u524d\uff0c\u7ee7\u627f\u5728\u540e\u201d\u3002ES6 \u7684\u7ee7\u627f\u673a\u5236\uff0c\u5219\u662f\u5148\u5c06\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u52a0\u5230\u4e00\u4e2a\u7a7a\u7684\u5bf9\u8c61\u4e0a\u9762\uff0c\u7136\u540e\u518d\u5c06\u8be5\u5bf9\u8c61\u4f5c\u4e3a\u5b50\u7c7b\u7684\u5b9e\u4f8b\uff0c\u5373\u201c\u7ee7\u627f\u5728\u524d\uff0c\u5b9e\u4f8b\u5728\u540e\u201d\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 ES6 \u7684\u7ee7\u627f\u5fc5\u987b\u5148\u8c03\u7528<code>super()</code>\u65b9\u6cd5\uff0c\u56e0\u4e3a\u8fd9\u4e00\u6b65\u4f1a\u751f\u6210\u4e00\u4e2a\u7ee7\u627f\u7236\u7c7b\u7684<code>this</code>\u5bf9\u8c61\uff0c\u6ca1\u6709\u8fd9\u4e00\u6b65\u5c31\u65e0\u6cd5\u7ee7\u627f\u7236\u7c7b\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u610f\u5473\u7740\u65b0\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u65f6\uff0c\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5fc5\u5b9a\u4f1a\u5148\u8fd0\u884c\u4e00\u6b21\u3002</p> <pre><code>class Foo {\n  constructor() {\n    console.log(1);\n  }\n}\n\nclass Bar extends Foo {\n  constructor() {\n    super();\n    console.log(2);\n  }\n}\n\nconst bar = new Bar();\n// 1\n// 2\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5b50\u7c7b Bar \u65b0\u5efa\u5b9e\u4f8b\u65f6\uff0c\u4f1a\u8f93\u51fa1\u548c2\u3002\u539f\u56e0\u5c31\u662f\u5b50\u7c7b\u6784\u9020\u51fd\u6570\u8c03\u7528<code>super()</code>\u65f6\uff0c\u4f1a\u6267\u884c\u4e00\u6b21\u7236\u7c7b\u6784\u9020\u51fd\u6570\u3002</p> <p>\u53e6\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u662f\uff0c\u5728\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u53ea\u6709\u8c03\u7528<code>super()</code>\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\u8fd9\u662f\u56e0\u4e3a\u5b50\u7c7b\u5b9e\u4f8b\u7684\u6784\u5efa\uff0c\u5fc5\u987b\u5148\u5b8c\u6210\u7236\u7c7b\u7684\u7ee7\u627f\uff0c\u53ea\u6709<code>super()</code>\u65b9\u6cd5\u624d\u80fd\u8ba9\u5b50\u7c7b\u5b9e\u4f8b\u7ee7\u627f\u7236\u7c7b\u3002</p> <pre><code>class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nclass ColorPoint extends Point {\n  constructor(x, y, color) {\n    this.color = color; // ReferenceError\n    super(x, y);\n    this.color = color; // \u6b63\u786e\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b\u7684<code>constructor()</code>\u65b9\u6cd5\u6ca1\u6709\u8c03\u7528<code>super()</code>\u4e4b\u524d\uff0c\u5c31\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u7ed3\u679c\u62a5\u9519\uff0c\u800c\u653e\u5728<code>super()</code>\u4e4b\u540e\u5c31\u662f\u6b63\u786e\u7684\u3002</p> <p>\u5982\u679c\u5b50\u7c7b\u6ca1\u6709\u5b9a\u4e49<code>constructor()</code>\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\uff0c\u5e76\u4e14\u91cc\u9762\u4f1a\u8c03\u7528<code>super()</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\uff0c\u4efb\u4f55\u4e00\u4e2a\u5b50\u7c7b\u90fd\u6709<code>constructor()</code>\u65b9\u6cd5\u3002</p> <pre><code>class ColorPoint extends Point {\n}\n\n// \u7b49\u540c\u4e8e\nclass ColorPoint extends Point {\n  constructor(...args) {\n    super(...args);\n  }\n}\n</code></pre> <p>\u6709\u4e86\u5b50\u7c7b\u7684\u5b9a\u4e49\uff0c\u5c31\u53ef\u4ee5\u751f\u6210\u5b50\u7c7b\u7684\u5b9e\u4f8b\u4e86\u3002</p> <pre><code>let cp = new ColorPoint(25, 8, 'green');\n\ncp instanceof ColorPoint // true\ncp instanceof Point // true\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5b9e\u4f8b\u5bf9\u8c61<code>cp</code>\u540c\u65f6\u662f<code>ColorPoint</code>\u548c<code>Point</code>\u4e24\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u8fd9\u4e0e ES5 \u7684\u884c\u4e3a\u5b8c\u5168\u4e00\u81f4\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#_2","title":"\u79c1\u6709\u5c5e\u6027\u548c\u79c1\u6709\u65b9\u6cd5\u7684\u7ee7\u627f","text":"<p>\u7236\u7c7b\u6240\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u90fd\u4f1a\u88ab\u5b50\u7c7b\u7ee7\u627f\uff0c\u9664\u4e86\u79c1\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u5b50\u7c7b\u65e0\u6cd5\u7ee7\u627f\u7236\u7c7b\u7684\u79c1\u6709\u5c5e\u6027\uff0c\u6216\u8005\u8bf4\uff0c\u79c1\u6709\u5c5e\u6027\u53ea\u80fd\u5728\u5b9a\u4e49\u5b83\u7684 class \u91cc\u9762\u4f7f\u7528\u3002</p> <pre><code>class Foo {\n  #p = 1;\n  #m() {\n    console.log('hello');\n  }\n}\n\nclass Bar extends Foo {\n  constructor() {\n    super();\n    console.log(this.#p); // \u62a5\u9519\n    this.#m(); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u5b50\u7c7b Bar \u8c03\u7528\u7236\u7c7b Foo \u7684\u79c1\u6709\u5c5e\u6027\u6216\u79c1\u6709\u65b9\u6cd5\uff0c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u5982\u679c\u7236\u7c7b\u5b9a\u4e49\u4e86\u79c1\u6709\u5c5e\u6027\u7684\u8bfb\u5199\u65b9\u6cd5\uff0c\u5b50\u7c7b\u5c31\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u8bfb\u5199\u79c1\u6709\u5c5e\u6027\u3002</p> <pre><code>class Foo {\n  #p = 1;\n  getP() {\n    return this.#p;\n  }\n}\n\nclass Bar extends Foo {\n  constructor() {\n    super();\n    console.log(this.getP()); // 1\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>getP()</code>\u662f\u7236\u7c7b\u7528\u6765\u8bfb\u53d6\u79c1\u6709\u5c5e\u6027\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7\u8be5\u65b9\u6cd5\uff0c\u5b50\u7c7b\u5c31\u53ef\u4ee5\u8bfb\u5230\u7236\u7c7b\u7684\u79c1\u6709\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#_3","title":"\u9759\u6001\u5c5e\u6027\u548c\u9759\u6001\u65b9\u6cd5\u7684\u7ee7\u627f","text":"<p>\u7236\u7c7b\u7684\u9759\u6001\u5c5e\u6027\u548c\u9759\u6001\u65b9\u6cd5\uff0c\u4e5f\u4f1a\u88ab\u5b50\u7c7b\u7ee7\u627f\u3002</p> <pre><code>class A {\n  static hello() {\n    console.log('hello world');\n  }\n}\n\nclass B extends A {\n}\n\nB.hello()  // hello world\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>hello()</code>\u662f<code>A</code>\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\uff0c<code>B</code>\u7ee7\u627f<code>A</code>\uff0c\u4e5f\u7ee7\u627f\u4e86<code>A</code>\u7684\u9759\u6001\u65b9\u6cd5\u3002</p> <p>\u6ce8\u610f\uff0c\u9759\u6001\u5c5e\u6027\u662f\u901a\u8fc7\u6d45\u62f7\u8d1d\u5b9e\u73b0\u7ee7\u627f\u7684\u3002</p> <pre><code>class A { static foo = 100; }\nclass B extends A {\n  constructor() {\n    super();\n    B.foo--;\n  }\n}\n\nconst b = new B();\nB.foo // 99\nA.foo // 100\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>foo</code>\u662f A \u7c7b\u7684\u9759\u6001\u5c5e\u6027\uff0cB \u7c7b\u7ee7\u627f\u4e86 A \u7c7b\uff0c\u56e0\u6b64\u4e5f\u7ee7\u627f\u4e86\u8fd9\u4e2a\u5c5e\u6027\u3002\u4f46\u662f\uff0c\u5728 B \u7c7b\u5185\u90e8\u64cd\u4f5c<code>B.foo</code>\u8fd9\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u5f71\u54cd\u4e0d\u5230<code>A.foo</code>\uff0c\u539f\u56e0\u5c31\u662f B \u7c7b\u7ee7\u627f\u9759\u6001\u5c5e\u6027\u65f6\uff0c\u4f1a\u91c7\u7528\u6d45\u62f7\u8d1d\uff0c\u62f7\u8d1d\u7236\u7c7b\u9759\u6001\u5c5e\u6027\u7684\u503c\uff0c\u56e0\u6b64<code>A.foo</code>\u548c<code>B.foo</code>\u662f\u4e24\u4e2a\u5f7c\u6b64\u72ec\u7acb\u7684\u5c5e\u6027\u3002</p> <p>\u4f46\u662f\uff0c\u7531\u4e8e\u8fd9\u79cd\u62f7\u8d1d\u662f\u6d45\u62f7\u8d1d\uff0c\u5982\u679c\u7236\u7c7b\u7684\u9759\u6001\u5c5e\u6027\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u5b50\u7c7b\u7684\u9759\u6001\u5c5e\u6027\u4e5f\u4f1a\u6307\u5411\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u56e0\u4e3a\u6d45\u62f7\u8d1d\u53ea\u4f1a\u62f7\u8d1d\u5bf9\u8c61\u7684\u5185\u5b58\u5730\u5740\u3002</p> <pre><code>class A {\n  static foo = { n: 100 };\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    B.foo.n--;\n  }\n}\n\nconst b = new B();\nB.foo.n // 99\nA.foo.n // 99\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>A.foo</code>\u7684\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6d45\u62f7\u8d1d\u5bfc\u81f4<code>B.foo</code>\u548c<code>A.foo</code>\u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u6240\u4ee5\uff0c\u5b50\u7c7b<code>B</code>\u4fee\u6539\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u503c\uff0c\u4f1a\u5f71\u54cd\u5230\u7236\u7c7b<code>A</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#objectgetprototypeof","title":"Object.getPrototypeOf()","text":"<p><code>Object.getPrototypeOf()</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u6765\u4ece\u5b50\u7c7b\u4e0a\u83b7\u53d6\u7236\u7c7b\u3002</p> <pre><code>class Point { /*...*/ }\n\nclass ColorPoint extends Point { /*...*/ }\n\nObject.getPrototypeOf(ColorPoint) === Point\n// true\n</code></pre> <p>\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad\uff0c\u4e00\u4e2a\u7c7b\u662f\u5426\u7ee7\u627f\u4e86\u53e6\u4e00\u4e2a\u7c7b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#super","title":"super \u5173\u952e\u5b57","text":"<p><code>super</code>\u8fd9\u4e2a\u5173\u952e\u5b57\uff0c\u65e2\u53ef\u4ee5\u5f53\u4f5c\u51fd\u6570\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5f53\u4f5c\u5bf9\u8c61\u4f7f\u7528\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u7528\u6cd5\u5b8c\u5168\u4e0d\u540c\u3002</p> <p>\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c<code>super</code>\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u4ee3\u8868\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u3002ES6 \u8981\u6c42\uff0c\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u5fc5\u987b\u6267\u884c\u4e00\u6b21<code>super()</code>\u51fd\u6570\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u7684\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\u7684<code>super()</code>\uff0c\u4ee3\u8868\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u3002\u8fd9\u662f\u5fc5\u987b\u7684\uff0c\u5426\u5219\u62a5\u9519\u3002</p> <p>\u8c03\u7528<code>super()</code>\u7684\u4f5c\u7528\u662f\u5f62\u6210\u5b50\u7c7b\u7684<code>this</code>\u5bf9\u8c61\uff0c\u628a\u7236\u7c7b\u7684\u5b9e\u4f8b\u5c5e\u6027\u548c\u65b9\u6cd5\u653e\u5230\u8fd9\u4e2a<code>this</code>\u5bf9\u8c61\u4e0a\u9762\u3002\u5b50\u7c7b\u5728\u8c03\u7528<code>super()</code>\u4e4b\u524d\uff0c\u662f\u6ca1\u6709<code>this</code>\u5bf9\u8c61\u7684\uff0c\u4efb\u4f55\u5bf9<code>this</code>\u7684\u64cd\u4f5c\u90fd\u8981\u653e\u5728<code>super()</code>\u7684\u540e\u9762\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684<code>super</code>\u867d\u7136\u4ee3\u8868\u4e86\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u4f46\u662f\u56e0\u4e3a\u8fd4\u56de\u7684\u662f\u5b50\u7c7b\u7684<code>this</code>\uff08\u5373\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff09\uff0c\u6240\u4ee5<code>super</code>\u5185\u90e8\u7684<code>this</code>\u4ee3\u8868\u5b50\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u7236\u7c7b\u7684\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u7684<code>super()</code>\u76f8\u5f53\u4e8e<code>A.prototype.constructor.call(this)</code>\uff08\u5728\u5b50\u7c7b\u7684<code>this</code>\u4e0a\u8fd0\u884c\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff09\u3002</p> <pre><code>class A {\n  constructor() {\n    console.log(new.target.name);\n  }\n}\nclass B extends A {\n  constructor() {\n    super();\n  }\n}\nnew A() // A\nnew B() // B\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>new.target</code>\u6307\u5411\u5f53\u524d\u6b63\u5728\u6267\u884c\u7684\u51fd\u6570\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u5728<code>super()</code>\u6267\u884c\u65f6\uff08<code>new B()</code>\uff09\uff0c\u5b83\u6307\u5411\u7684\u662f\u5b50\u7c7b<code>B</code>\u7684\u6784\u9020\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u7236\u7c7b<code>A</code>\u7684\u6784\u9020\u51fd\u6570\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>super()</code>\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u7684\u662f<code>B</code>\u3002</p> <p>\u4e0d\u8fc7\uff0c\u7531\u4e8e<code>super()</code>\u5728\u5b50\u7c7b\u6784\u9020\u65b9\u6cd5\u4e2d\u6267\u884c\u65f6\uff0c\u5b50\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u8fd8\u6ca1\u6709\u7ed1\u5b9a\u5230<code>this</code>\uff0c\u6240\u4ee5\u5982\u679c\u5b58\u5728\u540c\u540d\u5c5e\u6027\uff0c\u6b64\u65f6\u62ff\u5230\u7684\u662f\u7236\u7c7b\u7684\u5c5e\u6027\u3002</p> <pre><code>class A {\n  name = 'A';\n  constructor() {\n    console.log('My name is ' + this.name);\n  }\n}\n\nclass B extends A {\n  name = 'B';\n}\n\nconst b = new B(); // My name is A\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6700\u540e\u4e00\u884c\u8f93\u51fa\u7684\u662f<code>A</code>\uff0c\u800c\u4e0d\u662f<code>B</code>\uff0c\u539f\u56e0\u5c31\u5728\u4e8e<code>super()</code>\u6267\u884c\u65f6\uff0c<code>B</code>\u7684<code>name</code>\u5c5e\u6027\u8fd8\u6ca1\u6709\u7ed1\u5b9a\u5230<code>this</code>\uff0c\u6240\u4ee5<code>this.name</code>\u62ff\u5230\u7684\u662f<code>A</code>\u7c7b\u7684<code>name</code>\u5c5e\u6027\u3002</p> <p>\u4f5c\u4e3a\u51fd\u6570\u65f6\uff0c<code>super()</code>\u53ea\u80fd\u7528\u5728\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e4b\u4e2d\uff0c\u7528\u5728\u5176\u4ed6\u5730\u65b9\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  m() {\n    super(); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super()</code>\u7528\u5728<code>B</code>\u7c7b\u7684<code>m</code>\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u5c31\u4f1a\u9020\u6210\u8bed\u6cd5\u9519\u8bef\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c<code>super</code>\u4f5c\u4e3a\u5bf9\u8c61\u65f6\uff0c\u5728\u666e\u901a\u65b9\u6cd5\u4e2d\uff0c\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff1b\u5728\u9759\u6001\u65b9\u6cd5\u4e2d\uff0c\u6307\u5411\u7236\u7c7b\u3002</p> <pre><code>class A {\n  p() {\n    return 2;\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.p()); // 2\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u5f53\u4e2d\u7684<code>super.p()</code>\uff0c\u5c31\u662f\u5c06<code>super</code>\u5f53\u4f5c\u4e00\u4e2a\u5bf9\u8c61\u4f7f\u7528\u3002\u8fd9\u65f6\uff0c<code>super</code>\u5728\u666e\u901a\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u6307\u5411<code>A.prototype</code>\uff0c\u6240\u4ee5<code>super.p()</code>\u5c31\u76f8\u5f53\u4e8e<code>A.prototype.p()</code>\u3002</p> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0c\u7531\u4e8e<code>super</code>\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u6240\u4ee5\u5b9a\u4e49\u5728\u7236\u7c7b\u5b9e\u4f8b\u4e0a\u7684\u65b9\u6cd5\u6216\u5c5e\u6027\uff0c\u662f\u65e0\u6cd5\u901a\u8fc7<code>super</code>\u8c03\u7528\u7684\u3002</p> <pre><code>class A {\n  constructor() {\n    this.p = 2;\n  }\n}\n\nclass B extends A {\n  get m() {\n    return super.p;\n  }\n}\n\nlet b = new B();\nb.m // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>p</code>\u662f\u7236\u7c7b<code>A</code>\u5b9e\u4f8b\u7684\u5c5e\u6027\uff0c<code>super.p</code>\u5c31\u5f15\u7528\u4e0d\u5230\u5b83\u3002</p> <p>\u5982\u679c\u5c5e\u6027\u5b9a\u4e49\u5728\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u4e0a\uff0c<code>super</code>\u5c31\u53ef\u4ee5\u53d6\u5230\u3002</p> <pre><code>class A {}\nA.prototype.x = 2;\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.x) // 2\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5c5e\u6027<code>x</code>\u662f\u5b9a\u4e49\u5728<code>A.prototype</code>\u4e0a\u9762\u7684\uff0c\u6240\u4ee5<code>super.x</code>\u53ef\u4ee5\u53d6\u5230\u5b83\u7684\u503c\u3002</p> <p>ES6 \u89c4\u5b9a\uff0c\u5728\u5b50\u7c7b\u666e\u901a\u65b9\u6cd5\u4e2d\u901a\u8fc7<code>super</code>\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\uff0c\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5f53\u524d\u7684\u5b50\u7c7b\u5b9e\u4f8b\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n  print() {\n    console.log(this.x);\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n  }\n  m() {\n    super.print();\n  }\n}\n\nlet b = new B();\nb.m() // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.print()</code>\u867d\u7136\u8c03\u7528\u7684\u662f<code>A.prototype.print()</code>\uff0c\u4f46\u662f<code>A.prototype.print()</code>\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5b50\u7c7b<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u5bfc\u81f4\u8f93\u51fa\u7684\u662f<code>2</code>\uff0c\u800c\u4e0d\u662f<code>1</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f<code>super.print.call(this)</code>\u3002</p> <p>\u7531\u4e8e<code>this</code>\u6307\u5411\u5b50\u7c7b\u5b9e\u4f8b\uff0c\u6240\u4ee5\u5982\u679c\u901a\u8fc7<code>super</code>\u5bf9\u67d0\u4e2a\u5c5e\u6027\u8d4b\u503c\uff0c\u8fd9\u65f6<code>super</code>\u5c31\u662f<code>this</code>\uff0c\u8d4b\u503c\u7684\u5c5e\u6027\u4f1a\u53d8\u6210\u5b50\u7c7b\u5b9e\u4f8b\u7684\u5c5e\u6027\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n    super.x = 3;\n    console.log(super.x); // undefined\n    console.log(this.x); // 3\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.x</code>\u8d4b\u503c\u4e3a<code>3</code>\uff0c\u8fd9\u65f6\u7b49\u540c\u4e8e\u5bf9<code>this.x</code>\u8d4b\u503c\u4e3a<code>3</code>\u3002\u800c\u5f53\u8bfb\u53d6<code>super.x</code>\u7684\u65f6\u5019\uff0c\u8bfb\u7684\u662f<code>A.prototype.x</code>\uff0c\u6240\u4ee5\u8fd4\u56de<code>undefined</code>\u3002</p> <p>\u5982\u679c<code>super</code>\u4f5c\u4e3a\u5bf9\u8c61\uff0c\u7528\u5728\u9759\u6001\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u8fd9\u65f6<code>super</code>\u5c06\u6307\u5411\u7236\u7c7b\uff0c\u800c\u4e0d\u662f\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <pre><code>class Parent {\n  static myMethod(msg) {\n    console.log('static', msg);\n  }\n\n  myMethod(msg) {\n    console.log('instance', msg);\n  }\n}\n\nclass Child extends Parent {\n  static myMethod(msg) {\n    super.myMethod(msg);\n  }\n\n  myMethod(msg) {\n    super.myMethod(msg);\n  }\n}\n\nChild.myMethod(1); // static 1\n\nvar child = new Child();\nchild.myMethod(2); // instance 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super</code>\u5728\u9759\u6001\u65b9\u6cd5\u4e4b\u4e2d\u6307\u5411\u7236\u7c7b\uff0c\u5728\u666e\u901a\u65b9\u6cd5\u4e4b\u4e2d\u6307\u5411\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u5728\u5b50\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u4e2d\u901a\u8fc7<code>super</code>\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u65f6\uff0c\u65b9\u6cd5\u5185\u90e8\u7684<code>this</code>\u6307\u5411\u5f53\u524d\u7684\u5b50\u7c7b\uff0c\u800c\u4e0d\u662f\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002</p> <pre><code>class A {\n  constructor() {\n    this.x = 1;\n  }\n  static print() {\n    console.log(this.x);\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    this.x = 2;\n  }\n  static m() {\n    super.print();\n  }\n}\n\nB.x = 3;\nB.m() // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9759\u6001\u65b9\u6cd5<code>B.m</code>\u91cc\u9762\uff0c<code>super.print</code>\u6307\u5411\u7236\u7c7b\u7684\u9759\u6001\u65b9\u6cd5\u3002\u8fd9\u4e2a\u65b9\u6cd5\u91cc\u9762\u7684<code>this</code>\u6307\u5411\u7684\u662f<code>B</code>\uff0c\u800c\u4e0d\u662f<code>B</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u6ce8\u610f\uff0c\u4f7f\u7528<code>super</code>\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u662f\u4f5c\u4e3a\u51fd\u6570\u3001\u8fd8\u662f\u4f5c\u4e3a\u5bf9\u8c61\u4f7f\u7528\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super); // \u62a5\u9519\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log(super)</code>\u5f53\u4e2d\u7684<code>super</code>\uff0c\u65e0\u6cd5\u770b\u51fa\u662f\u4f5c\u4e3a\u51fd\u6570\u4f7f\u7528\uff0c\u8fd8\u662f\u4f5c\u4e3a\u5bf9\u8c61\u4f7f\u7528\uff0c\u6240\u4ee5 JavaScript \u5f15\u64ce\u89e3\u6790\u4ee3\u7801\u7684\u65f6\u5019\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u65f6\uff0c\u5982\u679c\u80fd\u6e05\u6670\u5730\u8868\u660e<code>super</code>\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002</p> <pre><code>class A {}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log(super.valueOf() instanceof B); // true\n  }\n}\n\nlet b = new B();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>super.valueOf()</code>\u8868\u660e<code>super</code>\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u56e0\u6b64\u5c31\u4e0d\u4f1a\u62a5\u9519\u3002\u540c\u65f6\uff0c\u7531\u4e8e<code>super</code>\u4f7f\u5f97<code>this</code>\u6307\u5411<code>B</code>\u7684\u5b9e\u4f8b\uff0c\u6240\u4ee5<code>super.valueOf()</code>\u8fd4\u56de\u7684\u662f\u4e00\u4e2a<code>B</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u6700\u540e\uff0c\u7531\u4e8e\u5bf9\u8c61\u603b\u662f\u7ee7\u627f\u5176\u4ed6\u5bf9\u8c61\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728\u4efb\u610f\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u4f7f\u7528<code>super</code>\u5173\u952e\u5b57\u3002</p> <pre><code>var obj = {\n  toString() {\n    return \"MyObject: \" + super.toString();\n  }\n};\n\nobj.toString(); // MyObject: [object Object]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#prototype-__proto__","title":"\u7c7b\u7684 prototype \u5c5e\u6027\u548c__proto__\u5c5e\u6027","text":"<p>\u5927\u591a\u6570\u6d4f\u89c8\u5668\u7684 ES5 \u5b9e\u73b0\u4e4b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u6709<code>__proto__</code>\u5c5e\u6027\uff0c\u6307\u5411\u5bf9\u5e94\u7684\u6784\u9020\u51fd\u6570\u7684<code>prototype</code>\u5c5e\u6027\u3002Class \u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\uff0c\u540c\u65f6\u6709<code>prototype</code>\u5c5e\u6027\u548c<code>__proto__</code>\u5c5e\u6027\uff0c\u56e0\u6b64\u540c\u65f6\u5b58\u5728\u4e24\u6761\u7ee7\u627f\u94fe\u3002</p> <p>\uff081\uff09\u5b50\u7c7b\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u8868\u793a\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f\uff0c\u603b\u662f\u6307\u5411\u7236\u7c7b\u3002</p> <p>\uff082\uff09\u5b50\u7c7b<code>prototype</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u8868\u793a\u65b9\u6cd5\u7684\u7ee7\u627f\uff0c\u603b\u662f\u6307\u5411\u7236\u7c7b\u7684<code>prototype</code>\u5c5e\u6027\u3002</p> <pre><code>class A {\n}\n\nclass B extends A {\n}\n\nB.__proto__ === A // true\nB.prototype.__proto__ === A.prototype // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b50\u7c7b<code>B</code>\u7684<code>__proto__</code>\u5c5e\u6027\u6307\u5411\u7236\u7c7b<code>A</code>\uff0c\u5b50\u7c7b<code>B</code>\u7684<code>prototype</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\u6307\u5411\u7236\u7c7b<code>A</code>\u7684<code>prototype</code>\u5c5e\u6027\u3002</p> <p>\u8fd9\u6837\u7684\u7ed3\u679c\u662f\u56e0\u4e3a\uff0c\u7c7b\u7684\u7ee7\u627f\u662f\u6309\u7167\u4e0b\u9762\u7684\u6a21\u5f0f\u5b9e\u73b0\u7684\u3002</p> <pre><code>class A {\n}\n\nclass B {\n}\n\n// B \u7684\u5b9e\u4f8b\u7ee7\u627f A \u7684\u5b9e\u4f8b\nObject.setPrototypeOf(B.prototype, A.prototype);\n\n// B \u7ee7\u627f A \u7684\u9759\u6001\u5c5e\u6027\nObject.setPrototypeOf(B, A);\n\nconst b = new B();\n</code></pre> <p>\u300a\u5bf9\u8c61\u7684\u6269\u5c55\u300b\u4e00\u7ae0\u7ed9\u51fa\u8fc7<code>Object.setPrototypeOf</code>\u65b9\u6cd5\u7684\u5b9e\u73b0\u3002</p> <pre><code>Object.setPrototypeOf = function (obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n</code></pre> <p>\u56e0\u6b64\uff0c\u5c31\u5f97\u5230\u4e86\u4e0a\u9762\u7684\u7ed3\u679c\u3002</p> <pre><code>Object.setPrototypeOf(B.prototype, A.prototype);\n// \u7b49\u540c\u4e8e\nB.prototype.__proto__ = A.prototype;\n\nObject.setPrototypeOf(B, A);\n// \u7b49\u540c\u4e8e\nB.__proto__ = A;\n</code></pre> <p>\u8fd9\u4e24\u6761\u7ee7\u627f\u94fe\uff0c\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1a\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b50\u7c7b\uff08<code>B</code>\uff09\u7684\u539f\u578b\uff08<code>__proto__</code>\u5c5e\u6027\uff09\u662f\u7236\u7c7b\uff08<code>A</code>\uff09\uff1b\u4f5c\u4e3a\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u5b50\u7c7b\uff08<code>B</code>\uff09\u7684\u539f\u578b\u5bf9\u8c61\uff08<code>prototype</code>\u5c5e\u6027\uff09\u662f\u7236\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff08<code>prototype</code>\u5c5e\u6027\uff09\u7684\u5b9e\u4f8b\u3002</p> <pre><code>B.prototype = Object.create(A.prototype);\n// \u7b49\u540c\u4e8e\nB.prototype.__proto__ = A.prototype;\n</code></pre> <p><code>extends</code>\u5173\u952e\u5b57\u540e\u9762\u53ef\u4ee5\u8ddf\u591a\u79cd\u7c7b\u578b\u7684\u503c\u3002</p> <pre><code>class B extends A {\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>A</code>\uff0c\u53ea\u8981\u662f\u4e00\u4e2a\u6709<code>prototype</code>\u5c5e\u6027\u7684\u51fd\u6570\uff0c\u5c31\u80fd\u88ab<code>B</code>\u7ee7\u627f\u3002\u7531\u4e8e\u51fd\u6570\u90fd\u6709<code>prototype</code>\u5c5e\u6027\uff08\u9664\u4e86<code>Function.prototype</code>\u51fd\u6570\uff09\uff0c\u56e0\u6b64<code>A</code>\u53ef\u4ee5\u662f\u4efb\u610f\u51fd\u6570\u3002</p> <p>\u4e0b\u9762\uff0c\u8ba8\u8bba\u4e24\u79cd\u60c5\u51b5\u3002\u7b2c\u4e00\u79cd\uff0c\u5b50\u7c7b\u7ee7\u627f<code>Object</code>\u7c7b\u3002</p> <pre><code>class A extends Object {\n}\n\nA.__proto__ === Object // true\nA.prototype.__proto__ === Object.prototype // true\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>A</code>\u5176\u5b9e\u5c31\u662f\u6784\u9020\u51fd\u6570<code>Object</code>\u7684\u590d\u5236\uff0c<code>A</code>\u7684\u5b9e\u4f8b\u5c31\u662f<code>Object</code>\u7684\u5b9e\u4f8b\u3002</p> <p>\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u4e0d\u5b58\u5728\u4efb\u4f55\u7ee7\u627f\u3002</p> <pre><code>class A {\n}\n\nA.__proto__ === Function.prototype // true\nA.prototype.__proto__ === Object.prototype // true\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>A</code>\u4f5c\u4e3a\u4e00\u4e2a\u57fa\u7c7b\uff08\u5373\u4e0d\u5b58\u5728\u4efb\u4f55\u7ee7\u627f\uff09\uff0c\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u6240\u4ee5\u76f4\u63a5\u7ee7\u627f<code>Function.prototype</code>\u3002\u4f46\u662f\uff0c<code>A</code>\u8c03\u7528\u540e\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff08\u5373<code>Object</code>\u5b9e\u4f8b\uff09\uff0c\u6240\u4ee5<code>A.prototype.__proto__</code>\u6307\u5411\u6784\u9020\u51fd\u6570\uff08<code>Object</code>\uff09\u7684<code>prototype</code>\u5c5e\u6027\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#__proto__","title":"\u5b9e\u4f8b\u7684 __proto__ \u5c5e\u6027","text":"<p>\u5b50\u7c7b\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u7684<code>__proto__</code>\u5c5e\u6027\uff0c\u6307\u5411\u7236\u7c7b\u5b9e\u4f8b\u7684<code>__proto__</code>\u5c5e\u6027\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b50\u7c7b\u7684\u539f\u578b\u7684\u539f\u578b\uff0c\u662f\u7236\u7c7b\u7684\u539f\u578b\u3002</p> <pre><code>var p1 = new Point(2, 3);\nvar p2 = new ColorPoint(2, 3, 'red');\n\np2.__proto__ === p1.__proto__ // false\np2.__proto__.__proto__ === p1.__proto__ // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ColorPoint</code>\u7ee7\u627f\u4e86<code>Point</code>\uff0c\u5bfc\u81f4\u524d\u8005\u539f\u578b\u7684\u539f\u578b\u662f\u540e\u8005\u7684\u539f\u578b\u3002</p> <p>\u56e0\u6b64\uff0c\u901a\u8fc7\u5b50\u7c7b\u5b9e\u4f8b\u7684<code>__proto__.__proto__</code>\u5c5e\u6027\uff0c\u53ef\u4ee5\u4fee\u6539\u7236\u7c7b\u5b9e\u4f8b\u7684\u884c\u4e3a\u3002</p> <pre><code>p2.__proto__.__proto__.printName = function () {\n  console.log('Ha');\n};\n\np1.printName() // \"Ha\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>ColorPoint</code>\u7684\u5b9e\u4f8b<code>p2</code>\u4e0a\u5411<code>Point</code>\u7c7b\u6dfb\u52a0\u65b9\u6cd5\uff0c\u7ed3\u679c\u5f71\u54cd\u5230\u4e86<code>Point</code>\u7684\u5b9e\u4f8b<code>p1</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#_4","title":"\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u7ee7\u627f","text":"<p>\u539f\u751f\u6784\u9020\u51fd\u6570\u662f\u6307\u8bed\u8a00\u5185\u7f6e\u7684\u6784\u9020\u51fd\u6570\uff0c\u901a\u5e38\u7528\u6765\u751f\u6210\u6570\u636e\u7ed3\u6784\u3002ECMAScript \u7684\u539f\u751f\u6784\u9020\u51fd\u6570\u5927\u81f4\u6709\u4e0b\u9762\u8fd9\u4e9b\u3002</p> <ul> <li>Boolean()</li> <li>Number()</li> <li>String()</li> <li>Array()</li> <li>Date()</li> <li>Function()</li> <li>RegExp()</li> <li>Error()</li> <li>Object()</li> </ul> <p>\u4ee5\u524d\uff0c\u8fd9\u4e9b\u539f\u751f\u6784\u9020\u51fd\u6570\u662f\u65e0\u6cd5\u7ee7\u627f\u7684\uff0c\u6bd4\u5982\uff0c\u4e0d\u80fd\u81ea\u5df1\u5b9a\u4e49\u4e00\u4e2a<code>Array</code>\u7684\u5b50\u7c7b\u3002</p> <pre><code>function MyArray() {\n  Array.apply(this, arguments);\n}\n\nMyArray.prototype = Object.create(Array.prototype, {\n  constructor: {\n    value: MyArray,\n    writable: true,\n    configurable: true,\n    enumerable: true\n  }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7ee7\u627f Array \u7684<code>MyArray</code>\u7c7b\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u7c7b\u7684\u884c\u4e3a\u4e0e<code>Array</code>\u5b8c\u5168\u4e0d\u4e00\u81f4\u3002</p> <pre><code>var colors = new MyArray();\ncolors[0] = \"red\";\ncolors.length  // 0\n\ncolors.length = 0;\ncolors[0]  // \"red\"\n</code></pre> <p>\u4e4b\u6240\u4ee5\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u662f\u56e0\u4e3a\u5b50\u7c7b\u65e0\u6cd5\u83b7\u5f97\u539f\u751f\u6784\u9020\u51fd\u6570\u7684\u5185\u90e8\u5c5e\u6027\uff0c\u901a\u8fc7<code>Array.apply()</code>\u6216\u8005\u5206\u914d\u7ed9\u539f\u578b\u5bf9\u8c61\u90fd\u4e0d\u884c\u3002\u539f\u751f\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565<code>apply</code>\u65b9\u6cd5\u4f20\u5165\u7684<code>this</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u539f\u751f\u6784\u9020\u51fd\u6570\u7684<code>this</code>\u65e0\u6cd5\u7ed1\u5b9a\uff0c\u5bfc\u81f4\u62ff\u4e0d\u5230\u5185\u90e8\u5c5e\u6027\u3002</p> <p>ES5 \u662f\u5148\u65b0\u5efa\u5b50\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61<code>this</code>\uff0c\u518d\u5c06\u7236\u7c7b\u7684\u5c5e\u6027\u6dfb\u52a0\u5230\u5b50\u7c7b\u4e0a\uff0c\u7531\u4e8e\u7236\u7c7b\u7684\u5185\u90e8\u5c5e\u6027\u65e0\u6cd5\u83b7\u53d6\uff0c\u5bfc\u81f4\u65e0\u6cd5\u7ee7\u627f\u539f\u751f\u7684\u6784\u9020\u51fd\u6570\u3002\u6bd4\u5982\uff0c<code>Array</code>\u6784\u9020\u51fd\u6570\u6709\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027<code>[[DefineOwnProperty]]</code>\uff0c\u7528\u6765\u5b9a\u4e49\u65b0\u5c5e\u6027\u65f6\uff0c\u66f4\u65b0<code>length</code>\u5c5e\u6027\uff0c\u8fd9\u4e2a\u5185\u90e8\u5c5e\u6027\u65e0\u6cd5\u5728\u5b50\u7c7b\u83b7\u53d6\uff0c\u5bfc\u81f4\u5b50\u7c7b\u7684<code>length</code>\u5c5e\u6027\u884c\u4e3a\u4e0d\u6b63\u5e38\u3002</p> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u60f3\u8ba9\u4e00\u4e2a\u666e\u901a\u5bf9\u8c61\u7ee7\u627f<code>Error</code>\u5bf9\u8c61\u3002</p> <pre><code>var e = {};\n\nObject.getOwnPropertyNames(Error.call(e))\n// [ 'stack' ]\n\nObject.getOwnPropertyNames(e)\n// []\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u60f3\u901a\u8fc7<code>Error.call(e)</code>\u8fd9\u79cd\u5199\u6cd5\uff0c\u8ba9\u666e\u901a\u5bf9\u8c61<code>e</code>\u5177\u6709<code>Error</code>\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5c5e\u6027\u3002\u4f46\u662f\uff0c<code>Error.call()</code>\u5b8c\u5168\u5ffd\u7565\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c<code>e</code>\u672c\u8eab\u6ca1\u6709\u4efb\u4f55\u53d8\u5316\u3002\u8fd9\u8bc1\u660e\u4e86<code>Error.call(e)</code>\u8fd9\u79cd\u5199\u6cd5\uff0c\u65e0\u6cd5\u7ee7\u627f\u539f\u751f\u6784\u9020\u51fd\u6570\u3002</p> <p>ES6 \u5141\u8bb8\u7ee7\u627f\u539f\u751f\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u5b50\u7c7b\uff0c\u56e0\u4e3a ES6 \u662f\u5148\u65b0\u5efa\u7236\u7c7b\u7684\u5b9e\u4f8b\u5bf9\u8c61<code>this</code>\uff0c\u7136\u540e\u518d\u7528\u5b50\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4fee\u9970<code>this</code>\uff0c\u4f7f\u5f97\u7236\u7c7b\u7684\u6240\u6709\u884c\u4e3a\u90fd\u53ef\u4ee5\u7ee7\u627f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7ee7\u627f<code>Array</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>class MyArray extends Array {\n  constructor(...args) {\n    super(...args);\n  }\n}\n\nvar arr = new MyArray();\narr[0] = 12;\narr.length // 1\n\narr.length = 0;\narr[0] // undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a<code>MyArray</code>\u7c7b\uff0c\u7ee7\u627f\u4e86<code>Array</code>\u6784\u9020\u51fd\u6570\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u4ece<code>MyArray</code>\u751f\u6210\u6570\u7ec4\u7684\u5b9e\u4f8b\u3002\u8fd9\u610f\u5473\u7740\uff0cES6 \u53ef\u4ee5\u81ea\u5b9a\u4e49\u539f\u751f\u6570\u636e\u7ed3\u6784\uff08\u6bd4\u5982<code>Array</code>\u3001<code>String</code>\u7b49\uff09\u7684\u5b50\u7c7b\uff0c\u8fd9\u662f ES5 \u65e0\u6cd5\u505a\u5230\u7684\u3002</p> <p>\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u8bf4\u660e\uff0c<code>extends</code>\u5173\u952e\u5b57\u4e0d\u4ec5\u53ef\u4ee5\u7528\u6765\u7ee7\u627f\u7c7b\uff0c\u8fd8\u53ef\u4ee5\u7528\u6765\u7ee7\u627f\u539f\u751f\u7684\u6784\u9020\u51fd\u6570\u3002\u56e0\u6b64\u53ef\u4ee5\u5728\u539f\u751f\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u4e0a\uff0c\u5b9a\u4e49\u81ea\u5df1\u7684\u6570\u636e\u7ed3\u6784\u3002\u4e0b\u9762\u5c31\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e26\u7248\u672c\u529f\u80fd\u7684\u6570\u7ec4\u3002</p> <pre><code>class VersionedArray extends Array {\n  constructor() {\n    super();\n    this.history = [[]];\n  }\n  commit() {\n    this.history.push(this.slice());\n  }\n  revert() {\n    this.splice(0, this.length, ...this.history[this.history.length - 1]);\n  }\n}\n\nvar x = new VersionedArray();\n\nx.push(1);\nx.push(2);\nx // [1, 2]\nx.history // [[]]\n\nx.commit();\nx.history // [[], [1, 2]]\n\nx.push(3);\nx // [1, 2, 3]\nx.history // [[], [1, 2]]\n\nx.revert();\nx // [1, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>VersionedArray</code>\u4f1a\u901a\u8fc7<code>commit</code>\u65b9\u6cd5\uff0c\u5c06\u81ea\u5df1\u7684\u5f53\u524d\u72b6\u6001\u751f\u6210\u4e00\u4e2a\u7248\u672c\u5feb\u7167\uff0c\u5b58\u5165<code>history</code>\u5c5e\u6027\u3002<code>revert</code>\u65b9\u6cd5\u7528\u6765\u5c06\u6570\u7ec4\u91cd\u7f6e\u4e3a\u6700\u65b0\u4e00\u6b21\u4fdd\u5b58\u7684\u7248\u672c\u3002\u9664\u6b64\u4e4b\u5916\uff0c<code>VersionedArray</code>\u4f9d\u7136\u662f\u4e00\u4e2a\u666e\u901a\u6570\u7ec4\uff0c\u6240\u6709\u539f\u751f\u7684\u6570\u7ec4\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5728\u5b83\u4e0a\u9762\u8c03\u7528\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49<code>Error</code>\u5b50\u7c7b\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u7528\u6765\u5b9a\u5236\u62a5\u9519\u65f6\u7684\u884c\u4e3a\u3002</p> <pre><code>class ExtendableError extends Error {\n  constructor(message) {\n    super();\n    this.message = message;\n    this.stack = (new Error()).stack;\n    this.name = this.constructor.name;\n  }\n}\n\nclass MyError extends ExtendableError {\n  constructor(m) {\n    super(m);\n  }\n}\n\nvar myerror = new MyError('ll');\nmyerror.message // \"ll\"\nmyerror instanceof Error // true\nmyerror.name // \"MyError\"\nmyerror.stack\n// Error\n//     at MyError.ExtendableError\n//     ...\n</code></pre> <p>\u6ce8\u610f\uff0c\u7ee7\u627f<code>Object</code>\u7684\u5b50\u7c7b\uff0c\u6709\u4e00\u4e2a\u884c\u4e3a\u5dee\u5f02\u3002</p> <pre><code>class NewObj extends Object{\n  constructor(){\n    super(...arguments);\n  }\n}\nvar o = new NewObj({attr: true});\no.attr === true  // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>NewObj</code>\u7ee7\u627f\u4e86<code>Object</code>\uff0c\u4f46\u662f\u65e0\u6cd5\u901a\u8fc7<code>super</code>\u65b9\u6cd5\u5411\u7236\u7c7b<code>Object</code>\u4f20\u53c2\u3002\u8fd9\u662f\u56e0\u4e3a ES6 \u6539\u53d8\u4e86<code>Object</code>\u6784\u9020\u51fd\u6570\u7684\u884c\u4e3a\uff0c\u4e00\u65e6\u53d1\u73b0<code>Object</code>\u65b9\u6cd5\u4e0d\u662f\u901a\u8fc7<code>new Object()</code>\u8fd9\u79cd\u5f62\u5f0f\u8c03\u7528\uff0cES6 \u89c4\u5b9a<code>Object</code>\u6784\u9020\u51fd\u6570\u4f1a\u5ffd\u7565\u53c2\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/23-class-extends/#mixin","title":"Mixin \u6a21\u5f0f\u7684\u5b9e\u73b0","text":"<p>Mixin \u6307\u7684\u662f\u591a\u4e2a\u5bf9\u8c61\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u65b0\u5bf9\u8c61\u5177\u6709\u5404\u4e2a\u7ec4\u6210\u6210\u5458\u7684\u63a5\u53e3\u3002\u5b83\u7684\u6700\u7b80\u5355\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>const a = {\n  a: 'a'\n};\nconst b = {\n  b: 'b'\n};\nconst c = {...a, ...b}; // {a: 'a', b: 'b'}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>c</code>\u5bf9\u8c61\u662f<code>a</code>\u5bf9\u8c61\u548c<code>b</code>\u5bf9\u8c61\u7684\u5408\u6210\uff0c\u5177\u6709\u4e24\u8005\u7684\u63a5\u53e3\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u66f4\u5b8c\u5907\u7684\u5b9e\u73b0\uff0c\u5c06\u591a\u4e2a\u7c7b\u7684\u63a5\u53e3\u201c\u6df7\u5165\u201d\uff08mix in\uff09\u53e6\u4e00\u4e2a\u7c7b\u3002</p> <pre><code>function mix(...mixins) {\n  class Mix {\n    constructor() {\n      for (let mixin of mixins) {\n        copyProperties(this, new mixin()); // \u62f7\u8d1d\u5b9e\u4f8b\u5c5e\u6027\n      }\n    }\n  }\n\n  for (let mixin of mixins) {\n    copyProperties(Mix, mixin); // \u62f7\u8d1d\u9759\u6001\u5c5e\u6027\n    copyProperties(Mix.prototype, mixin.prototype); // \u62f7\u8d1d\u539f\u578b\u5c5e\u6027\n  }\n\n  return Mix;\n}\n\nfunction copyProperties(target, source) {\n  for (let key of Reflect.ownKeys(source)) {\n    if ( key !== 'constructor'\n      &amp;&amp; key !== 'prototype'\n      &amp;&amp; key !== 'name'\n    ) {\n      let desc = Object.getOwnPropertyDescriptor(source, key);\n      Object.defineProperty(target, key, desc);\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>mix</code>\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2a\u5bf9\u8c61\u5408\u6210\u4e3a\u4e00\u4e2a\u7c7b\u3002\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ea\u8981\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u5373\u53ef\u3002</p> <pre><code>class DistributedEdit extends mix(Loggable, Serializable) {\n  // ...\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/","title":"24-Module \u7684\u8bed\u6cd5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_1","title":"\u6982\u8ff0","text":"<p>\u5386\u53f2\u4e0a\uff0cJavaScript \u4e00\u76f4\u6ca1\u6709\u6a21\u5757\uff08module\uff09\u4f53\u7cfb\uff0c\u65e0\u6cd5\u5c06\u4e00\u4e2a\u5927\u7a0b\u5e8f\u62c6\u5206\u6210\u4e92\u76f8\u4f9d\u8d56\u7684\u5c0f\u6587\u4ef6\uff0c\u518d\u7528\u7b80\u5355\u7684\u65b9\u6cd5\u62fc\u88c5\u8d77\u6765\u3002\u5176\u4ed6\u8bed\u8a00\u90fd\u6709\u8fd9\u9879\u529f\u80fd\uff0c\u6bd4\u5982 Ruby \u7684<code>require</code>\u3001Python \u7684<code>import</code>\uff0c\u751a\u81f3\u5c31\u8fde CSS \u90fd\u6709<code>@import</code>\uff0c\u4f46\u662f JavaScript \u4efb\u4f55\u8fd9\u65b9\u9762\u7684\u652f\u6301\u90fd\u6ca1\u6709\uff0c\u8fd9\u5bf9\u5f00\u53d1\u5927\u578b\u7684\u3001\u590d\u6742\u7684\u9879\u76ee\u5f62\u6210\u4e86\u5de8\u5927\u969c\u788d\u3002</p> <p>\u5728 ES6 \u4e4b\u524d\uff0c\u793e\u533a\u5236\u5b9a\u4e86\u4e00\u4e9b\u6a21\u5757\u52a0\u8f7d\u65b9\u6848\uff0c\u6700\u4e3b\u8981\u7684\u6709 CommonJS \u548c AMD \u4e24\u79cd\u3002\u524d\u8005\u7528\u4e8e\u670d\u52a1\u5668\uff0c\u540e\u8005\u7528\u4e8e\u6d4f\u89c8\u5668\u3002ES6 \u5728\u8bed\u8a00\u6807\u51c6\u7684\u5c42\u9762\u4e0a\uff0c\u5b9e\u73b0\u4e86\u6a21\u5757\u529f\u80fd\uff0c\u800c\u4e14\u5b9e\u73b0\u5f97\u76f8\u5f53\u7b80\u5355\uff0c\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3 CommonJS \u548c AMD \u89c4\u8303\uff0c\u6210\u4e3a\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u901a\u7528\u7684\u6a21\u5757\u89e3\u51b3\u65b9\u6848\u3002</p> <p>ES6 \u6a21\u5757\u7684\u8bbe\u8ba1\u601d\u60f3\u662f\u5c3d\u91cf\u7684\u9759\u6001\u5316\uff0c\u4f7f\u5f97\u7f16\u8bd1\u65f6\u5c31\u80fd\u786e\u5b9a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ee5\u53ca\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53d8\u91cf\u3002CommonJS \u548c AMD \u6a21\u5757\uff0c\u90fd\u53ea\u80fd\u5728\u8fd0\u884c\u65f6\u786e\u5b9a\u8fd9\u4e9b\u4e1c\u897f\u3002\u6bd4\u5982\uff0cCommonJS \u6a21\u5757\u5c31\u662f\u5bf9\u8c61\uff0c\u8f93\u5165\u65f6\u5fc5\u987b\u67e5\u627e\u5bf9\u8c61\u5c5e\u6027\u3002</p> <pre><code>// CommonJS\u6a21\u5757\nlet { stat, exists, readfile } = require('fs');\n\n// \u7b49\u540c\u4e8e\nlet _fs = require('fs');\nlet stat = _fs.stat;\nlet exists = _fs.exists;\nlet readfile = _fs.readfile;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5b9e\u8d28\u662f\u6574\u4f53\u52a0\u8f7d<code>fs</code>\u6a21\u5757\uff08\u5373\u52a0\u8f7d<code>fs</code>\u7684\u6240\u6709\u65b9\u6cd5\uff09\uff0c\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\uff08<code>_fs</code>\uff09\uff0c\u7136\u540e\u518d\u4ece\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u8bfb\u53d6 3 \u4e2a\u65b9\u6cd5\u3002\u8fd9\u79cd\u52a0\u8f7d\u79f0\u4e3a\u201c\u8fd0\u884c\u65f6\u52a0\u8f7d\u201d\uff0c\u56e0\u4e3a\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u80fd\u5f97\u5230\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u5bfc\u81f4\u5b8c\u5168\u6ca1\u529e\u6cd5\u5728\u7f16\u8bd1\u65f6\u505a\u201c\u9759\u6001\u4f18\u5316\u201d\u3002</p> <p>ES6 \u6a21\u5757\u4e0d\u662f\u5bf9\u8c61\uff0c\u800c\u662f\u901a\u8fc7<code>export</code>\u547d\u4ee4\u663e\u5f0f\u6307\u5b9a\u8f93\u51fa\u7684\u4ee3\u7801\uff0c\u518d\u901a\u8fc7<code>import</code>\u547d\u4ee4\u8f93\u5165\u3002</p> <pre><code>// ES6\u6a21\u5757\nimport { stat, exists, readFile } from 'fs';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5b9e\u8d28\u662f\u4ece<code>fs</code>\u6a21\u5757\u52a0\u8f7d 3 \u4e2a\u65b9\u6cd5\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e0d\u52a0\u8f7d\u3002\u8fd9\u79cd\u52a0\u8f7d\u79f0\u4e3a\u201c\u7f16\u8bd1\u65f6\u52a0\u8f7d\u201d\u6216\u8005\u9759\u6001\u52a0\u8f7d\uff0c\u5373 ES6 \u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u5c31\u5b8c\u6210\u6a21\u5757\u52a0\u8f7d\uff0c\u6548\u7387\u8981\u6bd4 CommonJS \u6a21\u5757\u7684\u52a0\u8f7d\u65b9\u5f0f\u9ad8\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6ca1\u6cd5\u5f15\u7528 ES6 \u6a21\u5757\u672c\u8eab\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f\u5bf9\u8c61\u3002</p> <p>\u7531\u4e8e ES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u52a0\u8f7d\uff0c\u4f7f\u5f97\u9759\u6001\u5206\u6790\u6210\u4e3a\u53ef\u80fd\u3002\u6709\u4e86\u5b83\uff0c\u5c31\u80fd\u8fdb\u4e00\u6b65\u62d3\u5bbd JavaScript \u7684\u8bed\u6cd5\uff0c\u6bd4\u5982\u5f15\u5165\u5b8f\uff08macro\uff09\u548c\u7c7b\u578b\u68c0\u9a8c\uff08type system\uff09\u8fd9\u4e9b\u53ea\u80fd\u9760\u9759\u6001\u5206\u6790\u5b9e\u73b0\u7684\u529f\u80fd\u3002</p> <p>\u9664\u4e86\u9759\u6001\u52a0\u8f7d\u5e26\u6765\u7684\u5404\u79cd\u597d\u5904\uff0cES6 \u6a21\u5757\u8fd8\u6709\u4ee5\u4e0b\u597d\u5904\u3002</p> <ul> <li>\u4e0d\u518d\u9700\u8981<code>UMD</code>\u6a21\u5757\u683c\u5f0f\u4e86\uff0c\u5c06\u6765\u670d\u52a1\u5668\u548c\u6d4f\u89c8\u5668\u90fd\u4f1a\u652f\u6301 ES6 \u6a21\u5757\u683c\u5f0f\u3002\u76ee\u524d\uff0c\u901a\u8fc7\u5404\u79cd\u5de5\u5177\u5e93\uff0c\u5176\u5b9e\u5df2\u7ecf\u505a\u5230\u4e86\u8fd9\u4e00\u70b9\u3002</li> <li>\u5c06\u6765\u6d4f\u89c8\u5668\u7684\u65b0 API \u5c31\u80fd\u7528\u6a21\u5757\u683c\u5f0f\u63d0\u4f9b\uff0c\u4e0d\u518d\u5fc5\u987b\u505a\u6210\u5168\u5c40\u53d8\u91cf\u6216\u8005<code>navigator</code>\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</li> <li>\u4e0d\u518d\u9700\u8981\u5bf9\u8c61\u4f5c\u4e3a\u547d\u540d\u7a7a\u95f4\uff08\u6bd4\u5982<code>Math</code>\u5bf9\u8c61\uff09\uff0c\u672a\u6765\u8fd9\u4e9b\u529f\u80fd\u53ef\u4ee5\u901a\u8fc7\u6a21\u5757\u63d0\u4f9b\u3002</li> </ul> <p>\u672c\u7ae0\u4ecb\u7ecd ES6 \u6a21\u5757\u7684\u8bed\u6cd5\uff0c\u4e0b\u4e00\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u6d4f\u89c8\u5668\u548c Node \u4e4b\u4e2d\uff0c\u52a0\u8f7d ES6 \u6a21\u5757\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_2","title":"\u4e25\u683c\u6a21\u5f0f","text":"<p>ES6 \u7684\u6a21\u5757\u81ea\u52a8\u91c7\u7528\u4e25\u683c\u6a21\u5f0f\uff0c\u4e0d\u7ba1\u4f60\u6709\u6ca1\u6709\u5728\u6a21\u5757\u5934\u90e8\u52a0\u4e0a<code>\"use strict\";</code>\u3002</p> <p>\u4e25\u683c\u6a21\u5f0f\u4e3b\u8981\u6709\u4ee5\u4e0b\u9650\u5236\u3002</p> <ul> <li>\u53d8\u91cf\u5fc5\u987b\u58f0\u660e\u540e\u518d\u4f7f\u7528</li> <li>\u51fd\u6570\u7684\u53c2\u6570\u4e0d\u80fd\u6709\u540c\u540d\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>with</code>\u8bed\u53e5</li> <li>\u4e0d\u80fd\u5bf9\u53ea\u8bfb\u5c5e\u6027\u8d4b\u503c\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u4f7f\u7528\u524d\u7f00 0 \u8868\u793a\u516b\u8fdb\u5236\u6570\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u5220\u9664\u4e0d\u53ef\u5220\u9664\u7684\u5c5e\u6027\uff0c\u5426\u5219\u62a5\u9519</li> <li>\u4e0d\u80fd\u5220\u9664\u53d8\u91cf<code>delete prop</code>\uff0c\u4f1a\u62a5\u9519\uff0c\u53ea\u80fd\u5220\u9664\u5c5e\u6027<code>delete global[prop]</code></li> <li><code>eval</code>\u4e0d\u4f1a\u5728\u5b83\u7684\u5916\u5c42\u4f5c\u7528\u57df\u5f15\u5165\u53d8\u91cf</li> <li><code>eval</code>\u548c<code>arguments</code>\u4e0d\u80fd\u88ab\u91cd\u65b0\u8d4b\u503c</li> <li><code>arguments</code>\u4e0d\u4f1a\u81ea\u52a8\u53cd\u6620\u51fd\u6570\u53c2\u6570\u7684\u53d8\u5316</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>arguments.callee</code></li> <li>\u4e0d\u80fd\u4f7f\u7528<code>arguments.caller</code></li> <li>\u7981\u6b62<code>this</code>\u6307\u5411\u5168\u5c40\u5bf9\u8c61</li> <li>\u4e0d\u80fd\u4f7f\u7528<code>fn.caller</code>\u548c<code>fn.arguments</code>\u83b7\u53d6\u51fd\u6570\u8c03\u7528\u7684\u5806\u6808</li> <li>\u589e\u52a0\u4e86\u4fdd\u7559\u5b57\uff08\u6bd4\u5982<code>protected</code>\u3001<code>static</code>\u548c<code>interface</code>\uff09</li> </ul> <p>\u4e0a\u9762\u8fd9\u4e9b\u9650\u5236\uff0c\u6a21\u5757\u90fd\u5fc5\u987b\u9075\u5b88\u3002\u7531\u4e8e\u4e25\u683c\u6a21\u5f0f\u662f ES5 \u5f15\u5165\u7684\uff0c\u4e0d\u5c5e\u4e8e ES6\uff0c\u6240\u4ee5\u8bf7\u53c2\u9605\u76f8\u5173 ES5 \u4e66\u7c4d\uff0c\u672c\u4e66\u4e0d\u518d\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u3002</p> <p>\u5176\u4e2d\uff0c\u5c24\u5176\u9700\u8981\u6ce8\u610f<code>this</code>\u7684\u9650\u5236\u3002ES6 \u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u6307\u5411<code>undefined</code>\uff0c\u5373\u4e0d\u5e94\u8be5\u5728\u9876\u5c42\u4ee3\u7801\u4f7f\u7528<code>this</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#export","title":"export \u547d\u4ee4","text":"<p>\u6a21\u5757\u529f\u80fd\u4e3b\u8981\u7531\u4e24\u4e2a\u547d\u4ee4\u6784\u6210\uff1a<code>export</code>\u548c<code>import</code>\u3002<code>export</code>\u547d\u4ee4\u7528\u4e8e\u89c4\u5b9a\u6a21\u5757\u7684\u5bf9\u5916\u63a5\u53e3\uff0c<code>import</code>\u547d\u4ee4\u7528\u4e8e\u8f93\u5165\u5176\u4ed6\u6a21\u5757\u63d0\u4f9b\u7684\u529f\u80fd\u3002</p> <p>\u4e00\u4e2a\u6a21\u5757\u5c31\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u5185\u90e8\u7684\u6240\u6709\u53d8\u91cf\uff0c\u5916\u90e8\u65e0\u6cd5\u83b7\u53d6\u3002\u5982\u679c\u4f60\u5e0c\u671b\u5916\u90e8\u80fd\u591f\u8bfb\u53d6\u6a21\u5757\u5185\u90e8\u7684\u67d0\u4e2a\u53d8\u91cf\uff0c\u5c31\u5fc5\u987b\u4f7f\u7528<code>export</code>\u5173\u952e\u5b57\u8f93\u51fa\u8be5\u53d8\u91cf\u3002\u4e0b\u9762\u662f\u4e00\u4e2a JS \u6587\u4ef6\uff0c\u91cc\u9762\u4f7f\u7528<code>export</code>\u547d\u4ee4\u8f93\u51fa\u53d8\u91cf\u3002</p> <pre><code>// profile.js\nexport var firstName = 'Michael';\nexport var lastName = 'Jackson';\nexport var year = 1958;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f<code>profile.js</code>\u6587\u4ef6\uff0c\u4fdd\u5b58\u4e86\u7528\u6237\u4fe1\u606f\u3002ES6 \u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u6a21\u5757\uff0c\u91cc\u9762\u7528<code>export</code>\u547d\u4ee4\u5bf9\u5916\u90e8\u8f93\u51fa\u4e86\u4e09\u4e2a\u53d8\u91cf\u3002</p> <p><code>export</code>\u7684\u5199\u6cd5\uff0c\u9664\u4e86\u50cf\u4e0a\u9762\u8fd9\u6837\uff0c\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u3002</p> <pre><code>// profile.js\nvar firstName = 'Michael';\nvar lastName = 'Jackson';\nvar year = 1958;\n\nexport { firstName, lastName, year };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728<code>export</code>\u547d\u4ee4\u540e\u9762\uff0c\u4f7f\u7528\u5927\u62ec\u53f7\u6307\u5b9a\u6240\u8981\u8f93\u51fa\u7684\u4e00\u7ec4\u53d8\u91cf\u3002\u5b83\u4e0e\u524d\u4e00\u79cd\u5199\u6cd5\uff08\u76f4\u63a5\u653e\u7f6e\u5728<code>var</code>\u8bed\u53e5\u524d\uff09\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u662f\u5e94\u8be5\u4f18\u5148\u8003\u8651\u4f7f\u7528\u8fd9\u79cd\u5199\u6cd5\u3002\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u811a\u672c\u5c3e\u90e8\uff0c\u4e00\u773c\u770b\u6e05\u695a\u8f93\u51fa\u4e86\u54ea\u4e9b\u53d8\u91cf\u3002</p> <p><code>export</code>\u547d\u4ee4\u9664\u4e86\u8f93\u51fa\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u8f93\u51fa\u51fd\u6570\u6216\u7c7b\uff08class\uff09\u3002</p> <pre><code>export function multiply(x, y) {\n  return x * y;\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u5916\u8f93\u51fa\u4e00\u4e2a\u51fd\u6570<code>multiply</code>\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c<code>export</code>\u8f93\u51fa\u7684\u53d8\u91cf\u5c31\u662f\u672c\u6765\u7684\u540d\u5b57\uff0c\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\u91cd\u547d\u540d\u3002</p> <pre><code>function v1() { ... }\nfunction v2() { ... }\n\nexport {\n  v1 as streamV1,\n  v2 as streamV2,\n  v2 as streamLatestVersion\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\uff0c\u91cd\u547d\u540d\u4e86\u51fd\u6570<code>v1</code>\u548c<code>v2</code>\u7684\u5bf9\u5916\u63a5\u53e3\u3002\u91cd\u547d\u540d\u540e\uff0c<code>v2</code>\u53ef\u4ee5\u7528\u4e0d\u540c\u7684\u540d\u5b57\u8f93\u51fa\u4e24\u6b21\u3002</p> <p>\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c<code>export</code>\u547d\u4ee4\u89c4\u5b9a\u7684\u662f\u5bf9\u5916\u7684\u63a5\u53e3\uff0c\u5fc5\u987b\u4e0e\u6a21\u5757\u5185\u90e8\u7684\u53d8\u91cf\u5efa\u7acb\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u3002</p> <pre><code>// \u62a5\u9519\nexport 1;\n\n// \u62a5\u9519\nvar m = 1;\nexport m;\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6ca1\u6709\u63d0\u4f9b\u5bf9\u5916\u7684\u63a5\u53e3\u3002\u7b2c\u4e00\u79cd\u5199\u6cd5\u76f4\u63a5\u8f93\u51fa 1\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u901a\u8fc7\u53d8\u91cf<code>m</code>\uff0c\u8fd8\u662f\u76f4\u63a5\u8f93\u51fa 1\u3002<code>1</code>\u53ea\u662f\u4e00\u4e2a\u503c\uff0c\u4e0d\u662f\u63a5\u53e3\u3002\u6b63\u786e\u7684\u5199\u6cd5\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>// \u5199\u6cd5\u4e00\nexport var m = 1;\n\n// \u5199\u6cd5\u4e8c\nvar m = 1;\nexport {m};\n\n// \u5199\u6cd5\u4e09\nvar n = 1;\nexport {n as m};\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u5199\u6cd5\u90fd\u662f\u6b63\u786e\u7684\uff0c\u89c4\u5b9a\u4e86\u5bf9\u5916\u7684\u63a5\u53e3<code>m</code>\u3002\u5176\u4ed6\u811a\u672c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\uff0c\u53d6\u5230\u503c<code>1</code>\u3002\u5b83\u4eec\u7684\u5b9e\u8d28\u662f\uff0c\u5728\u63a5\u53e3\u540d\u4e0e\u6a21\u5757\u5185\u90e8\u53d8\u91cf\u4e4b\u95f4\uff0c\u5efa\u7acb\u4e86\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\u3002</p> <p>\u540c\u6837\u7684\uff0c<code>function</code>\u548c<code>class</code>\u7684\u8f93\u51fa\uff0c\u4e5f\u5fc5\u987b\u9075\u5b88\u8fd9\u6837\u7684\u5199\u6cd5\u3002</p> <pre><code>// \u62a5\u9519\nfunction f() {}\nexport f;\n\n// \u6b63\u786e\nexport function f() {};\n\n// \u6b63\u786e\nfunction f() {}\nexport {f};\n</code></pre> <p>\u76ee\u524d\uff0cexport \u547d\u4ee4\u80fd\u591f\u5bf9\u5916\u8f93\u51fa\u7684\u5c31\u662f\u4e09\u79cd\u63a5\u53e3\uff1a\u51fd\u6570\uff08Functions\uff09\uff0c \u7c7b\uff08Classes\uff09\uff0cvar\u3001let\u3001const \u58f0\u660e\u7684\u53d8\u91cf\uff08Variables\uff09\u3002</p> <p>\u53e6\u5916\uff0c<code>export</code>\u8bed\u53e5\u8f93\u51fa\u7684\u63a5\u53e3\uff0c\u4e0e\u5176\u5bf9\u5e94\u7684\u503c\u662f\u52a8\u6001\u7ed1\u5b9a\u5173\u7cfb\uff0c\u5373\u901a\u8fc7\u8be5\u63a5\u53e3\uff0c\u53ef\u4ee5\u53d6\u5230\u6a21\u5757\u5185\u90e8\u5b9e\u65f6\u7684\u503c\u3002</p> <pre><code>export var foo = 'bar';\nsetTimeout(() =&gt; foo = 'baz', 500);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8f93\u51fa\u53d8\u91cf<code>foo</code>\uff0c\u503c\u4e3a<code>bar</code>\uff0c500 \u6beb\u79d2\u4e4b\u540e\u53d8\u6210<code>baz</code>\u3002</p> <p>\u8fd9\u4e00\u70b9\u4e0e CommonJS \u89c4\u8303\u5b8c\u5168\u4e0d\u540c\u3002CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u7f13\u5b58\uff0c\u4e0d\u5b58\u5728\u52a8\u6001\u66f4\u65b0\uff0c\u8be6\u89c1\u4e0b\u6587\u300aModule \u7684\u52a0\u8f7d\u5b9e\u73b0\u300b\u4e00\u8282\u3002</p> <p>\u6700\u540e\uff0c<code>export</code>\u547d\u4ee4\u53ef\u4ee5\u51fa\u73b0\u5728\u6a21\u5757\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u53ea\u8981\u5904\u4e8e\u6a21\u5757\u9876\u5c42\u5c31\u53ef\u4ee5\u3002\u5982\u679c\u5904\u4e8e\u5757\u7ea7\u4f5c\u7528\u57df\u5185\uff0c\u5c31\u4f1a\u62a5\u9519\uff0c\u4e0b\u4e00\u8282\u7684<code>import</code>\u547d\u4ee4\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u662f\u56e0\u4e3a\u5904\u4e8e\u6761\u4ef6\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u5c31\u6ca1\u6cd5\u505a\u9759\u6001\u4f18\u5316\u4e86\uff0c\u8fdd\u80cc\u4e86 ES6 \u6a21\u5757\u7684\u8bbe\u8ba1\u521d\u8877\u3002</p> <pre><code>function foo() {\n  export default 'bar' // SyntaxError\n}\nfoo()\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export</code>\u8bed\u53e5\u653e\u5728\u51fd\u6570\u4e4b\u4e2d\uff0c\u7ed3\u679c\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#import","title":"import \u547d\u4ee4","text":"<p>\u4f7f\u7528<code>export</code>\u547d\u4ee4\u5b9a\u4e49\u4e86\u6a21\u5757\u7684\u5bf9\u5916\u63a5\u53e3\u4ee5\u540e\uff0c\u5176\u4ed6 JS \u6587\u4ef6\u5c31\u53ef\u4ee5\u901a\u8fc7<code>import</code>\u547d\u4ee4\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// main.js\nimport { firstName, lastName, year } from './profile.js';\n\nfunction setName(element) {\n  element.textContent = firstName + ' ' + lastName;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>import</code>\u547d\u4ee4\uff0c\u7528\u4e8e\u52a0\u8f7d<code>profile.js</code>\u6587\u4ef6\uff0c\u5e76\u4ece\u4e2d\u8f93\u5165\u53d8\u91cf\u3002<code>import</code>\u547d\u4ee4\u63a5\u53d7\u4e00\u5bf9\u5927\u62ec\u53f7\uff0c\u91cc\u9762\u6307\u5b9a\u8981\u4ece\u5176\u4ed6\u6a21\u5757\u5bfc\u5165\u7684\u53d8\u91cf\u540d\u3002\u5927\u62ec\u53f7\u91cc\u9762\u7684\u53d8\u91cf\u540d\uff0c\u5fc5\u987b\u4e0e\u88ab\u5bfc\u5165\u6a21\u5757\uff08<code>profile.js</code>\uff09\u5bf9\u5916\u63a5\u53e3\u7684\u540d\u79f0\u76f8\u540c\u3002</p> <p>\u5982\u679c\u60f3\u4e3a\u8f93\u5165\u7684\u53d8\u91cf\u91cd\u65b0\u53d6\u4e00\u4e2a\u540d\u5b57\uff0c<code>import</code>\u547d\u4ee4\u8981\u4f7f\u7528<code>as</code>\u5173\u952e\u5b57\uff0c\u5c06\u8f93\u5165\u7684\u53d8\u91cf\u91cd\u547d\u540d\u3002</p> <pre><code>import { lastName as surname } from './profile.js';\n</code></pre> <p><code>import</code>\u547d\u4ee4\u8f93\u5165\u7684\u53d8\u91cf\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u672c\u8d28\u662f\u8f93\u5165\u63a5\u53e3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u5141\u8bb8\u5728\u52a0\u8f7d\u6a21\u5757\u7684\u811a\u672c\u91cc\u9762\uff0c\u6539\u5199\u63a5\u53e3\u3002</p> <pre><code>import {a} from './xxx.js'\n\na = {}; // Syntax Error : 'a' is read-only;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u811a\u672c\u52a0\u8f7d\u4e86\u53d8\u91cf<code>a</code>\uff0c\u5bf9\u5176\u91cd\u65b0\u8d4b\u503c\u5c31\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>a</code>\u662f\u4e00\u4e2a\u53ea\u8bfb\u7684\u63a5\u53e3\u3002\u4f46\u662f\uff0c\u5982\u679c<code>a</code>\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6539\u5199<code>a</code>\u7684\u5c5e\u6027\u662f\u5141\u8bb8\u7684\u3002</p> <pre><code>import {a} from './xxx.js'\n\na.foo = 'hello'; // \u5408\u6cd5\u64cd\u4f5c\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u7684\u5c5e\u6027\u53ef\u4ee5\u6210\u529f\u6539\u5199\uff0c\u5e76\u4e14\u5176\u4ed6\u6a21\u5757\u4e5f\u53ef\u4ee5\u8bfb\u5230\u6539\u5199\u540e\u7684\u503c\u3002\u4e0d\u8fc7\uff0c\u8fd9\u79cd\u5199\u6cd5\u5f88\u96be\u67e5\u9519\uff0c\u5efa\u8bae\u51e1\u662f\u8f93\u5165\u7684\u53d8\u91cf\uff0c\u90fd\u5f53\u4f5c\u5b8c\u5168\u53ea\u8bfb\uff0c\u4e0d\u8981\u8f7b\u6613\u6539\u53d8\u5b83\u7684\u5c5e\u6027\u3002</p> <p><code>import</code>\u540e\u9762\u7684<code>from</code>\u6307\u5b9a\u6a21\u5757\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\u3002\u5982\u679c\u4e0d\u5e26\u6709\u8def\u5f84\uff0c\u53ea\u662f\u4e00\u4e2a\u6a21\u5757\u540d\uff0c\u90a3\u4e48\u5fc5\u987b\u6709\u914d\u7f6e\u6587\u4ef6\uff0c\u544a\u8bc9 JavaScript \u5f15\u64ce\u8be5\u6a21\u5757\u7684\u4f4d\u7f6e\u3002</p> <pre><code>import { myMethod } from 'util';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>util</code>\u662f\u6a21\u5757\u6587\u4ef6\u540d\uff0c\u7531\u4e8e\u4e0d\u5e26\u6709\u8def\u5f84\uff0c\u5fc5\u987b\u901a\u8fc7\u914d\u7f6e\uff0c\u544a\u8bc9\u5f15\u64ce\u600e\u4e48\u53d6\u5230\u8fd9\u4e2a\u6a21\u5757\u3002</p> <p>\u6ce8\u610f\uff0c<code>import</code>\u547d\u4ee4\u5177\u6709\u63d0\u5347\u6548\u679c\uff0c\u4f1a\u63d0\u5347\u5230\u6574\u4e2a\u6a21\u5757\u7684\u5934\u90e8\uff0c\u9996\u5148\u6267\u884c\u3002</p> <pre><code>foo();\n\nimport { foo } from 'my_module';\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e0d\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a<code>import</code>\u7684\u6267\u884c\u65e9\u4e8e<code>foo</code>\u7684\u8c03\u7528\u3002\u8fd9\u79cd\u884c\u4e3a\u7684\u672c\u8d28\u662f\uff0c<code>import</code>\u547d\u4ee4\u662f\u7f16\u8bd1\u9636\u6bb5\u6267\u884c\u7684\uff0c\u5728\u4ee3\u7801\u8fd0\u884c\u4e4b\u524d\u3002</p> <p>\u7531\u4e8e<code>import</code>\u662f\u9759\u6001\u6267\u884c\uff0c\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528\u8868\u8fbe\u5f0f\u548c\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u5f97\u5230\u7ed3\u679c\u7684\u8bed\u6cd5\u7ed3\u6784\u3002</p> <pre><code>// \u62a5\u9519\nimport { 'f' + 'oo' } from 'my_module';\n\n// \u62a5\u9519\nlet module = 'my_module';\nimport { foo } from module;\n\n// \u62a5\u9519\nif (x === 1) {\n  import { foo } from 'module1';\n} else {\n  import { foo } from 'module2';\n}\n</code></pre> <p>\u4e0a\u9762\u4e09\u79cd\u5199\u6cd5\u90fd\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u5b83\u4eec\u7528\u5230\u4e86\u8868\u8fbe\u5f0f\u3001\u53d8\u91cf\u548c<code>if</code>\u7ed3\u6784\u3002\u5728\u9759\u6001\u5206\u6790\u9636\u6bb5\uff0c\u8fd9\u4e9b\u8bed\u6cd5\u90fd\u662f\u6ca1\u6cd5\u5f97\u5230\u503c\u7684\u3002</p> <p>\u6700\u540e\uff0c<code>import</code>\u8bed\u53e5\u4f1a\u6267\u884c\u6240\u52a0\u8f7d\u7684\u6a21\u5757\uff0c\u56e0\u6b64\u53ef\u4ee5\u6709\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>import 'lodash';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4ec5\u4ec5\u6267\u884c<code>lodash</code>\u6a21\u5757\uff0c\u4f46\u662f\u4e0d\u8f93\u5165\u4efb\u4f55\u503c\u3002</p> <p>\u5982\u679c\u591a\u6b21\u91cd\u590d\u6267\u884c\u540c\u4e00\u53e5<code>import</code>\u8bed\u53e5\uff0c\u90a3\u4e48\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u800c\u4e0d\u4f1a\u6267\u884c\u591a\u6b21\u3002</p> <pre><code>import 'lodash';\nimport 'lodash';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u52a0\u8f7d\u4e86\u4e24\u6b21<code>lodash</code>\uff0c\u4f46\u662f\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u3002</p> <pre><code>import { foo } from 'my_module';\nimport { bar } from 'my_module';\n\n// \u7b49\u540c\u4e8e\nimport { foo, bar } from 'my_module';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u867d\u7136<code>foo</code>\u548c<code>bar</code>\u5728\u4e24\u4e2a\u8bed\u53e5\u4e2d\u52a0\u8f7d\uff0c\u4f46\u662f\u5b83\u4eec\u5bf9\u5e94\u7684\u662f\u540c\u4e00\u4e2a<code>my_module</code>\u6a21\u5757\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>import</code>\u8bed\u53e5\u662f Singleton \u6a21\u5f0f\u3002</p> <p>\u76ee\u524d\u9636\u6bb5\uff0c\u901a\u8fc7 Babel \u8f6c\u7801\uff0cCommonJS \u6a21\u5757\u7684<code>require</code>\u547d\u4ee4\u548c ES6 \u6a21\u5757\u7684<code>import</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u5199\u5728\u540c\u4e00\u4e2a\u6a21\u5757\u91cc\u9762\uff0c\u4f46\u662f\u6700\u597d\u4e0d\u8981\u8fd9\u6837\u505a\u3002\u56e0\u4e3a<code>import</code>\u5728\u9759\u6001\u89e3\u6790\u9636\u6bb5\u6267\u884c\uff0c\u6240\u4ee5\u5b83\u662f\u4e00\u4e2a\u6a21\u5757\u4e4b\u4e2d\u6700\u65e9\u6267\u884c\u7684\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002</p> <pre><code>require('core-js/modules/es6.symbol');\nrequire('core-js/modules/es6.promise');\nimport React from 'React';\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_3","title":"\u6a21\u5757\u7684\u6574\u4f53\u52a0\u8f7d","text":"<p>\u9664\u4e86\u6307\u5b9a\u52a0\u8f7d\u67d0\u4e2a\u8f93\u51fa\u503c\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6574\u4f53\u52a0\u8f7d\uff0c\u5373\u7528\u661f\u53f7\uff08<code>*</code>\uff09\u6307\u5b9a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u6709\u8f93\u51fa\u503c\u90fd\u52a0\u8f7d\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e0a\u9762\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a<code>circle.js</code>\u6587\u4ef6\uff0c\u5b83\u8f93\u51fa\u4e24\u4e2a\u65b9\u6cd5<code>area</code>\u548c<code>circumference</code>\u3002</p> <pre><code>// circle.js\n\nexport function area(radius) {\n  return Math.PI * radius * radius;\n}\n\nexport function circumference(radius) {\n  return 2 * Math.PI * radius;\n}\n</code></pre> <p>\u73b0\u5728\uff0c\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// main.js\n\nimport { area, circumference } from './circle';\n\nconsole.log('\u5706\u9762\u79ef\uff1a' + area(4));\nconsole.log('\u5706\u5468\u957f\uff1a' + circumference(14));\n</code></pre> <p>\u4e0a\u9762\u5199\u6cd5\u662f\u9010\u4e00\u6307\u5b9a\u8981\u52a0\u8f7d\u7684\u65b9\u6cd5\uff0c\u6574\u4f53\u52a0\u8f7d\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>import * as circle from './circle';\n\nconsole.log('\u5706\u9762\u79ef\uff1a' + circle.area(4));\nconsole.log('\u5706\u5468\u957f\uff1a' + circle.circumference(14));\n</code></pre> <p>\u6ce8\u610f\uff0c\u6a21\u5757\u6574\u4f53\u52a0\u8f7d\u6240\u5728\u7684\u90a3\u4e2a\u5bf9\u8c61\uff08\u4e0a\u4f8b\u662f<code>circle</code>\uff09\uff0c\u5e94\u8be5\u662f\u53ef\u4ee5\u9759\u6001\u5206\u6790\u7684\uff0c\u6240\u4ee5\u4e0d\u5141\u8bb8\u8fd0\u884c\u65f6\u6539\u53d8\u3002\u4e0b\u9762\u7684\u5199\u6cd5\u90fd\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> <pre><code>import * as circle from './circle';\n\n// \u4e0b\u9762\u4e24\u884c\u90fd\u662f\u4e0d\u5141\u8bb8\u7684\ncircle.foo = 'hello';\ncircle.area = function () {};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#export-default","title":"export default \u547d\u4ee4","text":"<p>\u4ece\u524d\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0c\u4f7f\u7528<code>import</code>\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u7528\u6237\u9700\u8981\u77e5\u9053\u6240\u8981\u52a0\u8f7d\u7684\u53d8\u91cf\u540d\u6216\u51fd\u6570\u540d\uff0c\u5426\u5219\u65e0\u6cd5\u52a0\u8f7d\u3002\u4f46\u662f\uff0c\u7528\u6237\u80af\u5b9a\u5e0c\u671b\u5feb\u901f\u4e0a\u624b\uff0c\u672a\u5fc5\u613f\u610f\u9605\u8bfb\u6587\u6863\uff0c\u53bb\u4e86\u89e3\u6a21\u5757\u6709\u54ea\u4e9b\u5c5e\u6027\u548c\u65b9\u6cd5\u3002</p> <p>\u4e3a\u4e86\u7ed9\u7528\u6237\u63d0\u4f9b\u65b9\u4fbf\uff0c\u8ba9\u4ed6\u4eec\u4e0d\u7528\u9605\u8bfb\u6587\u6863\u5c31\u80fd\u52a0\u8f7d\u6a21\u5757\uff0c\u5c31\u8981\u7528\u5230<code>export default</code>\u547d\u4ee4\uff0c\u4e3a\u6a21\u5757\u6307\u5b9a\u9ed8\u8ba4\u8f93\u51fa\u3002</p> <pre><code>// export-default.js\nexport default function () {\n  console.log('foo');\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u662f\u4e00\u4e2a\u6a21\u5757\u6587\u4ef6<code>export-default.js</code>\uff0c\u5b83\u7684\u9ed8\u8ba4\u8f93\u51fa\u662f\u4e00\u4e2a\u51fd\u6570\u3002</p> <p>\u5176\u4ed6\u6a21\u5757\u52a0\u8f7d\u8be5\u6a21\u5757\u65f6\uff0c<code>import</code>\u547d\u4ee4\u53ef\u4ee5\u4e3a\u8be5\u533f\u540d\u51fd\u6570\u6307\u5b9a\u4efb\u610f\u540d\u5b57\u3002</p> <pre><code>// import-default.js\nimport customName from './export-default';\ncustomName(); // 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>import</code>\u547d\u4ee4\uff0c\u53ef\u4ee5\u7528\u4efb\u610f\u540d\u79f0\u6307\u5411<code>export-default.js</code>\u8f93\u51fa\u7684\u65b9\u6cd5\uff0c\u8fd9\u65f6\u5c31\u4e0d\u9700\u8981\u77e5\u9053\u539f\u6a21\u5757\u8f93\u51fa\u7684\u51fd\u6570\u540d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u65f6<code>import</code>\u547d\u4ee4\u540e\u9762\uff0c\u4e0d\u4f7f\u7528\u5927\u62ec\u53f7\u3002</p> <p><code>export default</code>\u547d\u4ee4\u7528\u5728\u975e\u533f\u540d\u51fd\u6570\u524d\uff0c\u4e5f\u662f\u53ef\u4ee5\u7684\u3002</p> <pre><code>// export-default.js\nexport default function foo() {\n  console.log('foo');\n}\n\n// \u6216\u8005\u5199\u6210\n\nfunction foo() {\n  console.log('foo');\n}\n\nexport default foo;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>foo</code>\u51fd\u6570\u7684\u51fd\u6570\u540d<code>foo</code>\uff0c\u5728\u6a21\u5757\u5916\u90e8\u662f\u65e0\u6548\u7684\u3002\u52a0\u8f7d\u7684\u65f6\u5019\uff0c\u89c6\u540c\u533f\u540d\u51fd\u6570\u52a0\u8f7d\u3002</p> <p>\u4e0b\u9762\u6bd4\u8f83\u4e00\u4e0b\u9ed8\u8ba4\u8f93\u51fa\u548c\u6b63\u5e38\u8f93\u51fa\u3002</p> <pre><code>// \u7b2c\u4e00\u7ec4\nexport default function crc32() { // \u8f93\u51fa\n  // ...\n}\n\nimport crc32 from 'crc32'; // \u8f93\u5165\n\n// \u7b2c\u4e8c\u7ec4\nexport function crc32() { // \u8f93\u51fa\n  // ...\n};\n\nimport {crc32} from 'crc32'; // \u8f93\u5165\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u4e24\u7ec4\u5199\u6cd5\uff0c\u7b2c\u4e00\u7ec4\u662f\u4f7f\u7528<code>export default</code>\u65f6\uff0c\u5bf9\u5e94\u7684<code>import</code>\u8bed\u53e5\u4e0d\u9700\u8981\u4f7f\u7528\u5927\u62ec\u53f7\uff1b\u7b2c\u4e8c\u7ec4\u662f\u4e0d\u4f7f\u7528<code>export default</code>\u65f6\uff0c\u5bf9\u5e94\u7684<code>import</code>\u8bed\u53e5\u9700\u8981\u4f7f\u7528\u5927\u62ec\u53f7\u3002</p> <p><code>export default</code>\u547d\u4ee4\u7528\u4e8e\u6307\u5b9a\u6a21\u5757\u7684\u9ed8\u8ba4\u8f93\u51fa\u3002\u663e\u7136\uff0c\u4e00\u4e2a\u6a21\u5757\u53ea\u80fd\u6709\u4e00\u4e2a\u9ed8\u8ba4\u8f93\u51fa\uff0c\u56e0\u6b64<code>export default</code>\u547d\u4ee4\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u3002\u6240\u4ee5\uff0cimport\u547d\u4ee4\u540e\u9762\u624d\u4e0d\u7528\u52a0\u5927\u62ec\u53f7\uff0c\u56e0\u4e3a\u53ea\u53ef\u80fd\u552f\u4e00\u5bf9\u5e94<code>export default</code>\u547d\u4ee4\u3002</p> <p>\u672c\u8d28\u4e0a\uff0c<code>export default</code>\u5c31\u662f\u8f93\u51fa\u4e00\u4e2a\u53eb\u505a<code>default</code>\u7684\u53d8\u91cf\u6216\u65b9\u6cd5\uff0c\u7136\u540e\u7cfb\u7edf\u5141\u8bb8\u4f60\u4e3a\u5b83\u53d6\u4efb\u610f\u540d\u5b57\u3002\u6240\u4ee5\uff0c\u4e0b\u9762\u7684\u5199\u6cd5\u662f\u6709\u6548\u7684\u3002</p> <pre><code>// modules.js\nfunction add(x, y) {\n  return x * y;\n}\nexport {add as default};\n// \u7b49\u540c\u4e8e\n// export default add;\n\n// app.js\nimport { default as foo } from 'modules';\n// \u7b49\u540c\u4e8e\n// import foo from 'modules';\n</code></pre> <p>\u6b63\u662f\u56e0\u4e3a<code>export default</code>\u547d\u4ee4\u5176\u5b9e\u53ea\u662f\u8f93\u51fa\u4e00\u4e2a\u53eb\u505a<code>default</code>\u7684\u53d8\u91cf\uff0c\u6240\u4ee5\u5b83\u540e\u9762\u4e0d\u80fd\u8ddf\u53d8\u91cf\u58f0\u660e\u8bed\u53e5\u3002</p> <pre><code>// \u6b63\u786e\nexport var a = 1;\n\n// \u6b63\u786e\nvar a = 1;\nexport default a;\n\n// \u9519\u8bef\nexport default var a = 1;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export default a</code>\u7684\u542b\u4e49\u662f\u5c06\u53d8\u91cf<code>a</code>\u7684\u503c\u8d4b\u7ed9\u53d8\u91cf<code>default</code>\u3002\u6240\u4ee5\uff0c\u6700\u540e\u4e00\u79cd\u5199\u6cd5\u4f1a\u62a5\u9519\u3002</p> <p>\u540c\u6837\u5730\uff0c\u56e0\u4e3a<code>export default</code>\u547d\u4ee4\u7684\u672c\u8d28\u662f\u5c06\u540e\u9762\u7684\u503c\uff0c\u8d4b\u7ed9<code>default</code>\u53d8\u91cf\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5c06\u4e00\u4e2a\u503c\u5199\u5728<code>export default</code>\u4e4b\u540e\u3002</p> <pre><code>// \u6b63\u786e\nexport default 42;\n\n// \u62a5\u9519\nexport 42;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u540e\u4e00\u53e5\u62a5\u9519\u662f\u56e0\u4e3a\u6ca1\u6709\u6307\u5b9a\u5bf9\u5916\u7684\u63a5\u53e3\uff0c\u800c\u524d\u4e00\u53e5\u6307\u5b9a\u5bf9\u5916\u63a5\u53e3\u4e3a<code>default</code>\u3002</p> <p>\u6709\u4e86<code>export default</code>\u547d\u4ee4\uff0c\u8f93\u5165\u6a21\u5757\u65f6\u5c31\u975e\u5e38\u76f4\u89c2\u4e86\uff0c\u4ee5\u8f93\u5165 lodash \u6a21\u5757\u4e3a\u4f8b\u3002</p> <pre><code>import _ from 'lodash';\n</code></pre> <p>\u5982\u679c\u60f3\u5728\u4e00\u6761<code>import</code>\u8bed\u53e5\u4e2d\uff0c\u540c\u65f6\u8f93\u5165\u9ed8\u8ba4\u65b9\u6cd5\u548c\u5176\u4ed6\u63a5\u53e3\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>import _, { each, forEach } from 'lodash';\n</code></pre> <p>\u5bf9\u5e94\u4e0a\u9762\u4ee3\u7801\u7684<code>export</code>\u8bed\u53e5\u5982\u4e0b\u3002</p> <pre><code>export default function (obj) {\n  // \u00b7\u00b7\u00b7\n}\n\nexport function each(obj, iterator, context) {\n  // \u00b7\u00b7\u00b7\n}\n\nexport { each as forEach };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u6700\u540e\u4e00\u884c\u7684\u610f\u601d\u662f\uff0c\u66b4\u9732\u51fa<code>forEach</code>\u63a5\u53e3\uff0c\u9ed8\u8ba4\u6307\u5411<code>each</code>\u63a5\u53e3\uff0c\u5373<code>forEach</code>\u548c<code>each</code>\u6307\u5411\u540c\u4e00\u4e2a\u65b9\u6cd5\u3002</p> <p><code>export default</code>\u4e5f\u53ef\u4ee5\u7528\u6765\u8f93\u51fa\u7c7b\u3002</p> <pre><code>// MyClass.js\nexport default class { ... }\n\n// main.js\nimport MyClass from 'MyClass';\nlet o = new MyClass();\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#export-import","title":"export \u4e0e import \u7684\u590d\u5408\u5199\u6cd5","text":"<p>\u5982\u679c\u5728\u4e00\u4e2a\u6a21\u5757\u4e4b\u4e2d\uff0c\u5148\u8f93\u5165\u540e\u8f93\u51fa\u540c\u4e00\u4e2a\u6a21\u5757\uff0c<code>import</code>\u8bed\u53e5\u53ef\u4ee5\u4e0e<code>export</code>\u8bed\u53e5\u5199\u5728\u4e00\u8d77\u3002</p> <pre><code>export { foo, bar } from 'my_module';\n\n// \u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\nimport { foo, bar } from 'my_module';\nexport { foo, bar };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export</code>\u548c<code>import</code>\u8bed\u53e5\u53ef\u4ee5\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u5199\u6210\u4e00\u884c\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5199\u6210\u4e00\u884c\u4ee5\u540e\uff0c<code>foo</code>\u548c<code>bar</code>\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u88ab\u5bfc\u5165\u5f53\u524d\u6a21\u5757\uff0c\u53ea\u662f\u76f8\u5f53\u4e8e\u5bf9\u5916\u8f6c\u53d1\u4e86\u8fd9\u4e24\u4e2a\u63a5\u53e3\uff0c\u5bfc\u81f4\u5f53\u524d\u6a21\u5757\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528<code>foo</code>\u548c<code>bar</code>\u3002</p> <p>\u6a21\u5757\u7684\u63a5\u53e3\u6539\u540d\u548c\u6574\u4f53\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u8fd9\u79cd\u5199\u6cd5\u3002</p> <pre><code>// \u63a5\u53e3\u6539\u540d\nexport { foo as myFoo } from 'my_module';\n\n// \u6574\u4f53\u8f93\u51fa\nexport * from 'my_module';\n</code></pre> <p>\u9ed8\u8ba4\u63a5\u53e3\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>export { default } from 'foo';\n</code></pre> <p>\u5177\u540d\u63a5\u53e3\u6539\u4e3a\u9ed8\u8ba4\u63a5\u53e3\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>export { es6 as default } from './someModule';\n\n// \u7b49\u540c\u4e8e\nimport { es6 } from './someModule';\nexport default es6;\n</code></pre> <p>\u540c\u6837\u5730\uff0c\u9ed8\u8ba4\u63a5\u53e3\u4e5f\u53ef\u4ee5\u6539\u540d\u4e3a\u5177\u540d\u63a5\u53e3\u3002</p> <pre><code>export { default as es6 } from './someModule';\n</code></pre> <p>ES2020 \u4e4b\u524d\uff0c\u6709\u4e00\u79cd<code>import</code>\u8bed\u53e5\uff0c\u6ca1\u6709\u5bf9\u5e94\u7684\u590d\u5408\u5199\u6cd5\u3002</p> <pre><code>import * as someIdentifier from \"someModule\";\n</code></pre> <p>ES2020\u8865\u4e0a\u4e86\u8fd9\u4e2a\u5199\u6cd5\u3002</p> <pre><code>export * as ns from \"mod\";\n\n// \u7b49\u540c\u4e8e\nimport * as ns from \"mod\";\nexport {ns};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_4","title":"\u6a21\u5757\u7684\u7ee7\u627f","text":"<p>\u6a21\u5757\u4e4b\u95f4\u4e5f\u53ef\u4ee5\u7ee7\u627f\u3002</p> <p>\u5047\u8bbe\u6709\u4e00\u4e2a<code>circleplus</code>\u6a21\u5757\uff0c\u7ee7\u627f\u4e86<code>circle</code>\u6a21\u5757\u3002</p> <pre><code>// circleplus.js\n\nexport * from 'circle';\nexport var e = 2.71828182846;\nexport default function(x) {\n  return Math.exp(x);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684<code>export *</code>\uff0c\u8868\u793a\u518d\u8f93\u51fa<code>circle</code>\u6a21\u5757\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u6ce8\u610f\uff0c<code>export *</code>\u547d\u4ee4\u4f1a\u5ffd\u7565<code>circle</code>\u6a21\u5757\u7684<code>default</code>\u65b9\u6cd5\u3002\u7136\u540e\uff0c\u4e0a\u9762\u4ee3\u7801\u53c8\u8f93\u51fa\u4e86\u81ea\u5b9a\u4e49\u7684<code>e</code>\u53d8\u91cf\u548c\u9ed8\u8ba4\u65b9\u6cd5\u3002</p> <p>\u8fd9\u65f6\uff0c\u4e5f\u53ef\u4ee5\u5c06<code>circle</code>\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u6539\u540d\u540e\u518d\u8f93\u51fa\u3002</p> <pre><code>// circleplus.js\n\nexport { area as circleArea } from 'circle';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u793a\uff0c\u53ea\u8f93\u51fa<code>circle</code>\u6a21\u5757\u7684<code>area</code>\u65b9\u6cd5\uff0c\u4e14\u5c06\u5176\u6539\u540d\u4e3a<code>circleArea</code>\u3002</p> <p>\u52a0\u8f7d\u4e0a\u9762\u6a21\u5757\u7684\u5199\u6cd5\u5982\u4e0b\u3002</p> <pre><code>// main.js\n\nimport * as math from 'circleplus';\nimport exp from 'circleplus';\nconsole.log(exp(math.e));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684<code>import exp</code>\u8868\u793a\uff0c\u5c06<code>circleplus</code>\u6a21\u5757\u7684\u9ed8\u8ba4\u65b9\u6cd5\u52a0\u8f7d\u4e3a<code>exp</code>\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_5","title":"\u8de8\u6a21\u5757\u5e38\u91cf","text":"<p>\u672c\u4e66\u4ecb\u7ecd<code>const</code>\u547d\u4ee4\u7684\u65f6\u5019\u8bf4\u8fc7\uff0c<code>const</code>\u58f0\u660e\u7684\u5e38\u91cf\u53ea\u5728\u5f53\u524d\u4ee3\u7801\u5757\u6709\u6548\u3002\u5982\u679c\u60f3\u8bbe\u7f6e\u8de8\u6a21\u5757\u7684\u5e38\u91cf\uff08\u5373\u8de8\u591a\u4e2a\u6587\u4ef6\uff09\uff0c\u6216\u8005\u8bf4\u4e00\u4e2a\u503c\u8981\u88ab\u591a\u4e2a\u6a21\u5757\u5171\u4eab\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>// constants.js \u6a21\u5757\nexport const A = 1;\nexport const B = 3;\nexport const C = 4;\n\n// test1.js \u6a21\u5757\nimport * as constants from './constants';\nconsole.log(constants.A); // 1\nconsole.log(constants.B); // 3\n\n// test2.js \u6a21\u5757\nimport {A, B} from './constants';\nconsole.log(A); // 1\nconsole.log(B); // 3\n</code></pre> <p>\u5982\u679c\u8981\u4f7f\u7528\u7684\u5e38\u91cf\u975e\u5e38\u591a\uff0c\u53ef\u4ee5\u5efa\u4e00\u4e2a\u4e13\u95e8\u7684<code>constants</code>\u76ee\u5f55\uff0c\u5c06\u5404\u79cd\u5e38\u91cf\u5199\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u91cc\u9762\uff0c\u4fdd\u5b58\u5728\u8be5\u76ee\u5f55\u4e0b\u3002</p> <pre><code>// constants/db.js\nexport const db = {\n  url: 'http://my.couchdbserver.local:5984',\n  admin_username: 'admin',\n  admin_password: 'admin password'\n};\n\n// constants/user.js\nexport const users = ['root', 'admin', 'staff', 'ceo', 'chief', 'moderator'];\n</code></pre> <p>\u7136\u540e\uff0c\u5c06\u8fd9\u4e9b\u6587\u4ef6\u8f93\u51fa\u7684\u5e38\u91cf\uff0c\u5408\u5e76\u5728<code>index.js</code>\u91cc\u9762\u3002</p> <pre><code>// constants/index.js\nexport {db} from './db';\nexport {users} from './users';\n</code></pre> <p>\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u52a0\u8f7d<code>index.js</code>\u5c31\u53ef\u4ee5\u4e86\u3002</p> <pre><code>// script.js\nimport {db, users} from './constants/index';\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#import_1","title":"import()","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_6","title":"\u7b80\u4ecb","text":"<p>\u524d\u9762\u4ecb\u7ecd\u8fc7\uff0c<code>import</code>\u547d\u4ee4\u4f1a\u88ab JavaScript \u5f15\u64ce\u9759\u6001\u5206\u6790\uff0c\u5148\u4e8e\u6a21\u5757\u5185\u7684\u5176\u4ed6\u8bed\u53e5\u6267\u884c\uff08<code>import</code>\u547d\u4ee4\u53eb\u505a\u201c\u8fde\u63a5\u201d binding \u5176\u5b9e\u66f4\u5408\u9002\uff09\u3002\u6240\u4ee5\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\u3002</p> <pre><code>// \u62a5\u9519\nif (x === 2) {\n  import MyModual from './myModual';\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f15\u64ce\u5904\u7406<code>import</code>\u8bed\u53e5\u662f\u5728\u7f16\u8bd1\u65f6\uff0c\u8fd9\u65f6\u4e0d\u4f1a\u53bb\u5206\u6790\u6216\u6267\u884c<code>if</code>\u8bed\u53e5\uff0c\u6240\u4ee5<code>import</code>\u8bed\u53e5\u653e\u5728<code>if</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\u6beb\u65e0\u610f\u4e49\uff0c\u56e0\u6b64\u4f1a\u62a5\u53e5\u6cd5\u9519\u8bef\uff0c\u800c\u4e0d\u662f\u6267\u884c\u65f6\u9519\u8bef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>import</code>\u548c<code>export</code>\u547d\u4ee4\u53ea\u80fd\u5728\u6a21\u5757\u7684\u9876\u5c42\uff0c\u4e0d\u80fd\u5728\u4ee3\u7801\u5757\u4e4b\u4e2d\uff08\u6bd4\u5982\uff0c\u5728<code>if</code>\u4ee3\u7801\u5757\u4e4b\u4e2d\uff0c\u6216\u5728\u51fd\u6570\u4e4b\u4e2d\uff09\u3002</p> <p>\u8fd9\u6837\u7684\u8bbe\u8ba1\uff0c\u56fa\u7136\u6709\u5229\u4e8e\u7f16\u8bd1\u5668\u63d0\u9ad8\u6548\u7387\uff0c\u4f46\u4e5f\u5bfc\u81f4\u65e0\u6cd5\u5728\u8fd0\u884c\u65f6\u52a0\u8f7d\u6a21\u5757\u3002\u5728\u8bed\u6cd5\u4e0a\uff0c\u6761\u4ef6\u52a0\u8f7d\u5c31\u4e0d\u53ef\u80fd\u5b9e\u73b0\u3002\u5982\u679c<code>import</code>\u547d\u4ee4\u8981\u53d6\u4ee3 Node \u7684<code>require</code>\u65b9\u6cd5\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u4e00\u4e2a\u969c\u788d\u3002\u56e0\u4e3a<code>require</code>\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\u6a21\u5757\uff0c<code>import</code>\u547d\u4ee4\u65e0\u6cd5\u53d6\u4ee3<code>require</code>\u7684\u52a8\u6001\u52a0\u8f7d\u529f\u80fd\u3002</p> <pre><code>const path = './' + fileName;\nconst myModual = require(path);\n</code></pre> <p>\u4e0a\u9762\u7684\u8bed\u53e5\u5c31\u662f\u52a8\u6001\u52a0\u8f7d\uff0c<code>require</code>\u5230\u5e95\u52a0\u8f7d\u54ea\u4e00\u4e2a\u6a21\u5757\uff0c\u53ea\u6709\u8fd0\u884c\u65f6\u624d\u77e5\u9053\u3002<code>import</code>\u547d\u4ee4\u505a\u4e0d\u5230\u8fd9\u4e00\u70b9\u3002</p> <p>ES2020\u63d0\u6848 \u5f15\u5165<code>import()</code>\u51fd\u6570\uff0c\u652f\u6301\u52a8\u6001\u52a0\u8f7d\u6a21\u5757\u3002</p> <pre><code>import(specifier)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>import</code>\u51fd\u6570\u7684\u53c2\u6570<code>specifier</code>\uff0c\u6307\u5b9a\u6240\u8981\u52a0\u8f7d\u7684\u6a21\u5757\u7684\u4f4d\u7f6e\u3002<code>import</code>\u547d\u4ee4\u80fd\u591f\u63a5\u53d7\u4ec0\u4e48\u53c2\u6570\uff0c<code>import()</code>\u51fd\u6570\u5c31\u80fd\u63a5\u53d7\u4ec0\u4e48\u53c2\u6570\uff0c\u4e24\u8005\u533a\u522b\u4e3b\u8981\u662f\u540e\u8005\u4e3a\u52a8\u6001\u52a0\u8f7d\u3002</p> <p><code>import()</code>\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const main = document.querySelector('main');\n\nimport(`./section-modules/${someVariable}.js`)\n  .then(module =&gt; {\n    module.loadPageInto(main);\n  })\n  .catch(err =&gt; {\n    main.textContent = err.message;\n  });\n</code></pre> <p><code>import()</code>\u51fd\u6570\u53ef\u4ee5\u7528\u5728\u4efb\u4f55\u5730\u65b9\uff0c\u4e0d\u4ec5\u4ec5\u662f\u6a21\u5757\uff0c\u975e\u6a21\u5757\u7684\u811a\u672c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002\u5b83\u662f\u8fd0\u884c\u65f6\u6267\u884c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ec0\u4e48\u65f6\u5019\u8fd0\u884c\u5230\u8fd9\u4e00\u53e5\uff0c\u5c31\u4f1a\u52a0\u8f7d\u6307\u5b9a\u7684\u6a21\u5757\u3002\u53e6\u5916\uff0c<code>import()</code>\u51fd\u6570\u4e0e\u6240\u52a0\u8f7d\u7684\u6a21\u5757\u6ca1\u6709\u9759\u6001\u8fde\u63a5\u5173\u7cfb\uff0c\u8fd9\u70b9\u4e5f\u662f\u4e0e<code>import</code>\u8bed\u53e5\u4e0d\u76f8\u540c\u3002<code>import()</code>\u7c7b\u4f3c\u4e8e Node.js \u7684<code>require()</code>\u65b9\u6cd5\uff0c\u533a\u522b\u4e3b\u8981\u662f\u524d\u8005\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u540e\u8005\u662f\u540c\u6b65\u52a0\u8f7d\u3002</p> <p>\u7531\u4e8e<code>import()</code>\u8fd4\u56de Promise \u5bf9\u8c61\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528<code>then()</code>\u65b9\u6cd5\u6307\u5b9a\u5904\u7406\u51fd\u6570\u3002\u8003\u8651\u5230\u4ee3\u7801\u7684\u6e05\u6670\uff0c\u66f4\u63a8\u8350\u4f7f\u7528<code>await</code>\u547d\u4ee4\u3002</p> <pre><code>async function renderWidget() {\n  const container = document.getElementById('widget');\n  if (container !== null) {\n    // \u7b49\u540c\u4e8e\n    // import(\"./widget\").then(widget =&gt; {\n    //   widget.render(container);\n    // });\n    const widget = await import('./widget.js');\n    widget.render(container);\n  }\n}\n\nrenderWidget();\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>await</code>\u547d\u4ee4\u540e\u9762\u5c31\u662f\u4f7f\u7528<code>import()</code>\uff0c\u5bf9\u6bd4<code>then()</code>\u7684\u5199\u6cd5\u660e\u663e\u66f4\u7b80\u6d01\u6613\u8bfb\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_7","title":"\u9002\u7528\u573a\u5408","text":"<p>\u4e0b\u9762\u662f<code>import()</code>\u7684\u4e00\u4e9b\u9002\u7528\u573a\u5408\u3002</p> <p>\uff081\uff09\u6309\u9700\u52a0\u8f7d\u3002</p> <p><code>import()</code>\u53ef\u4ee5\u5728\u9700\u8981\u7684\u65f6\u5019\uff0c\u518d\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\u3002</p> <pre><code>button.addEventListener('click', event =&gt; {\n  import('./dialogBox.js')\n  .then(dialogBox =&gt; {\n    dialogBox.open();\n  })\n  .catch(error =&gt; {\n    /* Error handling */\n  })\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>import()</code>\u65b9\u6cd5\u653e\u5728<code>click</code>\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4e4b\u4e2d\uff0c\u53ea\u6709\u7528\u6237\u70b9\u51fb\u4e86\u6309\u94ae\uff0c\u624d\u4f1a\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <p>\uff082\uff09\u6761\u4ef6\u52a0\u8f7d</p> <p><code>import()</code>\u53ef\u4ee5\u653e\u5728<code>if</code>\u4ee3\u7801\u5757\uff0c\u6839\u636e\u4e0d\u540c\u7684\u60c5\u51b5\uff0c\u52a0\u8f7d\u4e0d\u540c\u7684\u6a21\u5757\u3002</p> <pre><code>if (condition) {\n  import('moduleA').then(...);\n} else {\n  import('moduleB').then(...);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u52a0\u8f7d\u6a21\u5757 A\uff0c\u5426\u5219\u52a0\u8f7d\u6a21\u5757 B\u3002</p> <p>\uff083\uff09\u52a8\u6001\u7684\u6a21\u5757\u8def\u5f84</p> <p><code>import()</code>\u5141\u8bb8\u6a21\u5757\u8def\u5f84\u52a8\u6001\u751f\u6210\u3002</p> <pre><code>import(f())\n.then(...);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6839\u636e\u51fd\u6570<code>f</code>\u7684\u8fd4\u56de\u7ed3\u679c\uff0c\u52a0\u8f7d\u4e0d\u540c\u7684\u6a21\u5757\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#_8","title":"\u6ce8\u610f\u70b9","text":"<p><code>import()</code>\u52a0\u8f7d\u6a21\u5757\u6210\u529f\u4ee5\u540e\uff0c\u8fd9\u4e2a\u6a21\u5757\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u4f5c<code>then</code>\u65b9\u6cd5\u7684\u53c2\u6570\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u89e3\u6784\u8d4b\u503c\u7684\u8bed\u6cd5\uff0c\u83b7\u53d6\u8f93\u51fa\u63a5\u53e3\u3002</p> <pre><code>import('./myModule.js')\n.then(({export1, export2}) =&gt; {\n  // ...\u00b7\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>export1</code>\u548c<code>export2</code>\u90fd\u662f<code>myModule.js</code>\u7684\u8f93\u51fa\u63a5\u53e3\uff0c\u53ef\u4ee5\u89e3\u6784\u83b7\u5f97\u3002</p> <p>\u5982\u679c\u6a21\u5757\u6709<code>default</code>\u8f93\u51fa\u63a5\u53e3\uff0c\u53ef\u4ee5\u7528\u53c2\u6570\u76f4\u63a5\u83b7\u5f97\u3002</p> <pre><code>import('./myModule.js')\n.then(myModule =&gt; {\n  console.log(myModule.default);\n});\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5177\u540d\u8f93\u5165\u7684\u5f62\u5f0f\u3002</p> <pre><code>import('./myModule.js')\n.then(({default: theDefault}) =&gt; {\n  console.log(theDefault);\n});\n</code></pre> <p>\u5982\u679c\u60f3\u540c\u65f6\u52a0\u8f7d\u591a\u4e2a\u6a21\u5757\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>Promise.all([\n  import('./module1.js'),\n  import('./module2.js'),\n  import('./module3.js'),\n])\n.then(([module1, module2, module3]) =&gt; {\n   \u00b7\u00b7\u00b7\n});\n</code></pre> <p><code>import()</code>\u4e5f\u53ef\u4ee5\u7528\u5728 async \u51fd\u6570\u4e4b\u4e2d\u3002</p> <pre><code>async function main() {\n  const myModule = await import('./myModule.js');\n  const {export1, export2} = await import('./myModule.js');\n  const [module1, module2, module3] =\n    await Promise.all([\n      import('./module1.js'),\n      import('./module2.js'),\n      import('./module3.js'),\n    ]);\n}\nmain();\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/24-module/#importmeta","title":"import.meta","text":"<p>\u5f00\u53d1\u8005\u4f7f\u7528\u4e00\u4e2a\u6a21\u5757\u65f6\uff0c\u6709\u65f6\u9700\u8981\u77e5\u9053\u6a21\u677f\u672c\u8eab\u7684\u4e00\u4e9b\u4fe1\u606f\uff08\u6bd4\u5982\u6a21\u5757\u7684\u8def\u5f84\uff09\u3002ES2020 \u4e3a import \u547d\u4ee4\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5143\u5c5e\u6027<code>import.meta</code>\uff0c\u8fd4\u56de\u5f53\u524d\u6a21\u5757\u7684\u5143\u4fe1\u606f\u3002</p> <p><code>import.meta</code>\u53ea\u80fd\u5728\u6a21\u5757\u5185\u90e8\u4f7f\u7528\uff0c\u5982\u679c\u5728\u6a21\u5757\u5916\u90e8\u4f7f\u7528\u4f1a\u62a5\u9519\u3002</p> <p>\u8fd9\u4e2a\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684\u5404\u79cd\u5c5e\u6027\u5c31\u662f\u5f53\u524d\u8fd0\u884c\u7684\u811a\u672c\u7684\u5143\u4fe1\u606f\u3002\u5177\u4f53\u5305\u542b\u54ea\u4e9b\u5c5e\u6027\uff0c\u6807\u51c6\u6ca1\u6709\u89c4\u5b9a\uff0c\u7531\u5404\u4e2a\u8fd0\u884c\u73af\u5883\u81ea\u884c\u51b3\u5b9a\u3002\u4e00\u822c\u6765\u8bf4\uff0c<code>import.meta</code>\u81f3\u5c11\u4f1a\u6709\u4e0b\u9762\u4e24\u4e2a\u5c5e\u6027\u3002</p> <p>\uff081\uff09import.meta.url</p> <p><code>import.meta.url</code>\u8fd4\u56de\u5f53\u524d\u6a21\u5757\u7684 URL \u8def\u5f84\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5f53\u524d\u6a21\u5757\u4e3b\u6587\u4ef6\u7684\u8def\u5f84\u662f<code>https://foo.com/main.js</code>\uff0c<code>import.meta.url</code>\u5c31\u8fd4\u56de\u8fd9\u4e2a\u8def\u5f84\u3002\u5982\u679c\u6a21\u5757\u91cc\u9762\u8fd8\u6709\u4e00\u4e2a\u6570\u636e\u6587\u4ef6<code>data.txt</code>\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u83b7\u53d6\u8fd9\u4e2a\u6570\u636e\u6587\u4ef6\u7684\u8def\u5f84\u3002</p> <pre><code>new URL('data.txt', import.meta.url)\n</code></pre> <p>\u6ce8\u610f\uff0cNode.js \u73af\u5883\u4e2d\uff0c<code>import.meta.url</code>\u8fd4\u56de\u7684\u603b\u662f\u672c\u5730\u8def\u5f84\uff0c\u5373<code>file:URL</code>\u534f\u8bae\u7684\u5b57\u7b26\u4e32\uff0c\u6bd4\u5982<code>file:///home/user/foo.js</code>\u3002</p> <p>\uff082\uff09import.meta.scriptElement</p> <p><code>import.meta.scriptElement</code>\u662f\u6d4f\u89c8\u5668\u7279\u6709\u7684\u5143\u5c5e\u6027\uff0c\u8fd4\u56de\u52a0\u8f7d\u6a21\u5757\u7684\u90a3\u4e2a<code>&lt;script&gt;</code>\u5143\u7d20\uff0c\u76f8\u5f53\u4e8e<code>document.currentScript</code>\u5c5e\u6027\u3002</p> <pre><code>// HTML \u4ee3\u7801\u4e3a\n// &lt;script type=\"module\" src=\"my-module.js\" data-foo=\"abc\"&gt;&lt;/script&gt;\n\n// my-module.js \u5185\u90e8\u6267\u884c\u4e0b\u9762\u7684\u4ee3\u7801\nimport.meta.scriptElement.dataset.foo\n// \"abc\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/","title":"25-Module \u7684\u52a0\u8f7d\u5b9e\u73b0","text":"<p>\u4e0a\u4e00\u7ae0\u4ecb\u7ecd\u4e86\u6a21\u5757\u7684\u8bed\u6cd5\uff0c\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u5728\u6d4f\u89c8\u5668\u548c Node.js \u4e4b\u4e2d\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4ee5\u53ca\u5b9e\u9645\u5f00\u53d1\u4e2d\u7ecf\u5e38\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff08\u6bd4\u5982\u5faa\u73af\u52a0\u8f7d\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_1","title":"\u6d4f\u89c8\u5668\u52a0\u8f7d","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_2","title":"\u4f20\u7edf\u65b9\u6cd5","text":"<p>HTML \u7f51\u9875\u4e2d\uff0c\u6d4f\u89c8\u5668\u901a\u8fc7<code>&lt;script&gt;</code>\u6807\u7b7e\u52a0\u8f7d JavaScript \u811a\u672c\u3002</p> <pre><code>&lt;!-- \u9875\u9762\u5185\u5d4c\u7684\u811a\u672c --&gt;\n&lt;script type=\"application/javascript\"&gt;\n  // module code\n&lt;/script&gt;\n\n&lt;!-- \u5916\u90e8\u811a\u672c --&gt;\n&lt;script type=\"application/javascript\" src=\"path/to/myModule.js\"&gt;\n&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u6d4f\u89c8\u5668\u811a\u672c\u7684\u9ed8\u8ba4\u8bed\u8a00\u662f JavaScript\uff0c\u56e0\u6b64<code>type=\"application/javascript\"</code>\u53ef\u4ee5\u7701\u7565\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6d4f\u89c8\u5668\u662f\u540c\u6b65\u52a0\u8f7d JavaScript \u811a\u672c\uff0c\u5373\u6e32\u67d3\u5f15\u64ce\u9047\u5230<code>&lt;script&gt;</code>\u6807\u7b7e\u5c31\u4f1a\u505c\u4e0b\u6765\uff0c\u7b49\u5230\u6267\u884c\u5b8c\u811a\u672c\uff0c\u518d\u7ee7\u7eed\u5411\u4e0b\u6e32\u67d3\u3002\u5982\u679c\u662f\u5916\u90e8\u811a\u672c\uff0c\u8fd8\u5fc5\u987b\u52a0\u5165\u811a\u672c\u4e0b\u8f7d\u7684\u65f6\u95f4\u3002</p> <p>\u5982\u679c\u811a\u672c\u4f53\u79ef\u5f88\u5927\uff0c\u4e0b\u8f7d\u548c\u6267\u884c\u7684\u65f6\u95f4\u5c31\u4f1a\u5f88\u957f\uff0c\u56e0\u6b64\u9020\u6210\u6d4f\u89c8\u5668\u5835\u585e\uff0c\u7528\u6237\u4f1a\u611f\u89c9\u5230\u6d4f\u89c8\u5668\u201c\u5361\u6b7b\u201d\u4e86\uff0c\u6ca1\u6709\u4efb\u4f55\u54cd\u5e94\u3002\u8fd9\u663e\u7136\u662f\u5f88\u4e0d\u597d\u7684\u4f53\u9a8c\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u5141\u8bb8\u811a\u672c\u5f02\u6b65\u52a0\u8f7d\uff0c\u4e0b\u9762\u5c31\u662f\u4e24\u79cd\u5f02\u6b65\u52a0\u8f7d\u7684\u8bed\u6cd5\u3002</p> <pre><code>&lt;script src=\"path/to/myModule.js\" defer&gt;&lt;/script&gt;\n&lt;script src=\"path/to/myModule.js\" async&gt;&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>&lt;script&gt;</code>\u6807\u7b7e\u6253\u5f00<code>defer</code>\u6216<code>async</code>\u5c5e\u6027\uff0c\u811a\u672c\u5c31\u4f1a\u5f02\u6b65\u52a0\u8f7d\u3002\u6e32\u67d3\u5f15\u64ce\u9047\u5230\u8fd9\u4e00\u884c\u547d\u4ee4\uff0c\u5c31\u4f1a\u5f00\u59cb\u4e0b\u8f7d\u5916\u90e8\u811a\u672c\uff0c\u4f46\u4e0d\u4f1a\u7b49\u5b83\u4e0b\u8f7d\u548c\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u6267\u884c\u540e\u9762\u7684\u547d\u4ee4\u3002</p> <p><code>defer</code>\u4e0e<code>async</code>\u7684\u533a\u522b\u662f\uff1a<code>defer</code>\u8981\u7b49\u5230\u6574\u4e2a\u9875\u9762\u5728\u5185\u5b58\u4e2d\u6b63\u5e38\u6e32\u67d3\u7ed3\u675f\uff08DOM \u7ed3\u6784\u5b8c\u5168\u751f\u6210\uff0c\u4ee5\u53ca\u5176\u4ed6\u811a\u672c\u6267\u884c\u5b8c\u6210\uff09\uff0c\u624d\u4f1a\u6267\u884c\uff1b<code>async</code>\u4e00\u65e6\u4e0b\u8f7d\u5b8c\uff0c\u6e32\u67d3\u5f15\u64ce\u5c31\u4f1a\u4e2d\u65ad\u6e32\u67d3\uff0c\u6267\u884c\u8fd9\u4e2a\u811a\u672c\u4ee5\u540e\uff0c\u518d\u7ee7\u7eed\u6e32\u67d3\u3002\u4e00\u53e5\u8bdd\uff0c<code>defer</code>\u662f\u201c\u6e32\u67d3\u5b8c\u518d\u6267\u884c\u201d\uff0c<code>async</code>\u662f\u201c\u4e0b\u8f7d\u5b8c\u5c31\u6267\u884c\u201d\u3002\u53e6\u5916\uff0c\u5982\u679c\u6709\u591a\u4e2a<code>defer</code>\u811a\u672c\uff0c\u4f1a\u6309\u7167\u5b83\u4eec\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u52a0\u8f7d\uff0c\u800c\u591a\u4e2a<code>async</code>\u811a\u672c\u662f\u4e0d\u80fd\u4fdd\u8bc1\u52a0\u8f7d\u987a\u5e8f\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_3","title":"\u52a0\u8f7d\u89c4\u5219","text":"<p>\u6d4f\u89c8\u5668\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4e5f\u4f7f\u7528<code>&lt;script&gt;</code>\u6807\u7b7e\uff0c\u4f46\u662f\u8981\u52a0\u5165<code>type=\"module\"</code>\u5c5e\u6027\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u7f51\u9875\u4e2d\u63d2\u5165\u4e00\u4e2a\u6a21\u5757<code>foo.js</code>\uff0c\u7531\u4e8e<code>type</code>\u5c5e\u6027\u8bbe\u4e3a<code>module</code>\uff0c\u6240\u4ee5\u6d4f\u89c8\u5668\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a ES6 \u6a21\u5757\u3002</p> <p>\u6d4f\u89c8\u5668\u5bf9\u4e8e\u5e26\u6709<code>type=\"module\"</code>\u7684<code>&lt;script&gt;</code>\uff0c\u90fd\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u4e0d\u4f1a\u9020\u6210\u5835\u585e\u6d4f\u89c8\u5668\uff0c\u5373\u7b49\u5230\u6574\u4e2a\u9875\u9762\u6e32\u67d3\u5b8c\uff0c\u518d\u6267\u884c\u6a21\u5757\u811a\u672c\uff0c\u7b49\u540c\u4e8e\u6253\u5f00\u4e86<code>&lt;script&gt;</code>\u6807\u7b7e\u7684<code>defer</code>\u5c5e\u6027\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\"&gt;&lt;/script&gt;\n&lt;!-- \u7b49\u540c\u4e8e --&gt;\n&lt;script type=\"module\" src=\"./foo.js\" defer&gt;&lt;/script&gt;\n</code></pre> <p>\u5982\u679c\u7f51\u9875\u6709\u591a\u4e2a<code>&lt;script type=\"module\"&gt;</code>\uff0c\u5b83\u4eec\u4f1a\u6309\u7167\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\u3002</p> <p><code>&lt;script&gt;</code>\u6807\u7b7e\u7684<code>async</code>\u5c5e\u6027\u4e5f\u53ef\u4ee5\u6253\u5f00\uff0c\u8fd9\u65f6\u53ea\u8981\u52a0\u8f7d\u5b8c\u6210\uff0c\u6e32\u67d3\u5f15\u64ce\u5c31\u4f1a\u4e2d\u65ad\u6e32\u67d3\u7acb\u5373\u6267\u884c\u3002\u6267\u884c\u5b8c\u6210\u540e\uff0c\u518d\u6062\u590d\u6e32\u67d3\u3002</p> <pre><code>&lt;script type=\"module\" src=\"./foo.js\" async&gt;&lt;/script&gt;\n</code></pre> <p>\u4e00\u65e6\u4f7f\u7528\u4e86<code>async</code>\u5c5e\u6027\uff0c<code>&lt;script type=\"module\"&gt;</code>\u5c31\u4e0d\u4f1a\u6309\u7167\u5728\u9875\u9762\u51fa\u73b0\u7684\u987a\u5e8f\u6267\u884c\uff0c\u800c\u662f\u53ea\u8981\u8be5\u6a21\u5757\u52a0\u8f7d\u5b8c\u6210\uff0c\u5c31\u6267\u884c\u8be5\u6a21\u5757\u3002</p> <p>ES6 \u6a21\u5757\u4e5f\u5141\u8bb8\u5185\u5d4c\u5728\u7f51\u9875\u4e2d\uff0c\u8bed\u6cd5\u884c\u4e3a\u4e0e\u52a0\u8f7d\u5916\u90e8\u811a\u672c\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>&lt;script type=\"module\"&gt;\n  import utils from \"./utils.js\";\n\n  // other code\n&lt;/script&gt;\n</code></pre> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0cjQuery \u5c31\u652f\u6301\u6a21\u5757\u52a0\u8f7d\u3002</p> <pre><code>&lt;script type=\"module\"&gt;\n  import $ from \"./jquery/src/jquery.js\";\n  $('#message').text('Hi from jQuery!');\n&lt;/script&gt;\n</code></pre> <p>\u5bf9\u4e8e\u5916\u90e8\u7684\u6a21\u5757\u811a\u672c\uff08\u4e0a\u4f8b\u662f<code>foo.js</code>\uff09\uff0c\u6709\u51e0\u70b9\u9700\u8981\u6ce8\u610f\u3002</p> <ul> <li>\u4ee3\u7801\u662f\u5728\u6a21\u5757\u4f5c\u7528\u57df\u4e4b\u4e2d\u8fd0\u884c\uff0c\u800c\u4e0d\u662f\u5728\u5168\u5c40\u4f5c\u7528\u57df\u8fd0\u884c\u3002\u6a21\u5757\u5185\u90e8\u7684\u9876\u5c42\u53d8\u91cf\uff0c\u5916\u90e8\u4e0d\u53ef\u89c1\u3002</li> <li>\u6a21\u5757\u811a\u672c\u81ea\u52a8\u91c7\u7528\u4e25\u683c\u6a21\u5f0f\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u58f0\u660e<code>use strict</code>\u3002</li> <li>\u6a21\u5757\u4e4b\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528<code>import</code>\u547d\u4ee4\u52a0\u8f7d\u5176\u4ed6\u6a21\u5757\uff08<code>.js</code>\u540e\u7f00\u4e0d\u53ef\u7701\u7565\uff0c\u9700\u8981\u63d0\u4f9b\u7edd\u5bf9 URL \u6216\u76f8\u5bf9 URL\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>export</code>\u547d\u4ee4\u8f93\u51fa\u5bf9\u5916\u63a5\u53e3\u3002</li> <li>\u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u5173\u952e\u5b57\u8fd4\u56de<code>undefined</code>\uff0c\u800c\u4e0d\u662f\u6307\u5411<code>window</code>\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u6a21\u5757\u9876\u5c42\u4f7f\u7528<code>this</code>\u5173\u952e\u5b57\uff0c\u662f\u65e0\u610f\u4e49\u7684\u3002</li> <li>\u540c\u4e00\u4e2a\u6a21\u5757\u5982\u679c\u52a0\u8f7d\u591a\u6b21\uff0c\u5c06\u53ea\u6267\u884c\u4e00\u6b21\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\u6a21\u5757\u3002</p> <pre><code>import utils from 'https://example.com/js/utils.js';\n\nconst x = 1;\n\nconsole.log(x === window.x); //false\nconsole.log(this === undefined); // true\n</code></pre> <p>\u5229\u7528\u9876\u5c42\u7684<code>this</code>\u7b49\u4e8e<code>undefined</code>\u8fd9\u4e2a\u8bed\u6cd5\u70b9\uff0c\u53ef\u4ee5\u4fa6\u6d4b\u5f53\u524d\u4ee3\u7801\u662f\u5426\u5728 ES6 \u6a21\u5757\u4e4b\u4e2d\u3002</p> <pre><code>const isNotModuleScript = this !== undefined;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#es6-commonjs","title":"ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u7684\u5dee\u5f02","text":"<p>\u8ba8\u8bba Node.js \u52a0\u8f7d ES6 \u6a21\u5757\u4e4b\u524d\uff0c\u5fc5\u987b\u4e86\u89e3 ES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u5b8c\u5168\u4e0d\u540c\u3002</p> <p>\u5b83\u4eec\u6709\u4e09\u4e2a\u91cd\u5927\u5dee\u5f02\u3002</p> <ul> <li>CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u503c\u7684\u62f7\u8d1d\uff0cES6 \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u5f15\u7528\u3002</li> <li>CommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d\uff0cES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3\u3002</li> <li>CommonJS \u6a21\u5757\u7684<code>require()</code>\u662f\u540c\u6b65\u52a0\u8f7d\u6a21\u5757\uff0cES6 \u6a21\u5757\u7684<code>import</code>\u547d\u4ee4\u662f\u5f02\u6b65\u52a0\u8f7d\uff0c\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\u4f9d\u8d56\u7684\u89e3\u6790\u9636\u6bb5\u3002</li> </ul> <p>\u7b2c\u4e8c\u4e2a\u5dee\u5f02\u662f\u56e0\u4e3a CommonJS \u52a0\u8f7d\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u5373<code>module.exports</code>\u5c5e\u6027\uff09\uff0c\u8be5\u5bf9\u8c61\u53ea\u6709\u5728\u811a\u672c\u8fd0\u884c\u5b8c\u624d\u4f1a\u751f\u6210\u3002\u800c ES6 \u6a21\u5757\u4e0d\u662f\u5bf9\u8c61\uff0c\u5b83\u7684\u5bf9\u5916\u63a5\u53e3\u53ea\u662f\u4e00\u79cd\u9759\u6001\u5b9a\u4e49\uff0c\u5728\u4ee3\u7801\u9759\u6001\u89e3\u6790\u9636\u6bb5\u5c31\u4f1a\u751f\u6210\u3002</p> <p>\u4e0b\u9762\u91cd\u70b9\u89e3\u91ca\u7b2c\u4e00\u4e2a\u5dee\u5f02\u3002</p> <p>CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u503c\u7684\u62f7\u8d1d\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u8f93\u51fa\u4e00\u4e2a\u503c\uff0c\u6a21\u5757\u5185\u90e8\u7684\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8fd9\u4e2a\u503c\u3002\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u6a21\u5757\u6587\u4ef6<code>lib.js</code>\u7684\u4f8b\u5b50\u3002</p> <pre><code>// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  counter: counter,\n  incCounter: incCounter,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8f93\u51fa\u5185\u90e8\u53d8\u91cf<code>counter</code>\u548c\u6539\u5199\u8fd9\u4e2a\u53d8\u91cf\u7684\u5185\u90e8\u65b9\u6cd5<code>incCounter</code>\u3002\u7136\u540e\uff0c\u5728<code>main.js</code>\u91cc\u9762\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// main.js\nvar mod = require('./lib');\n\nconsole.log(mod.counter);  // 3\nmod.incCounter();\nconsole.log(mod.counter); // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c<code>lib.js</code>\u6a21\u5757\u52a0\u8f7d\u4ee5\u540e\uff0c\u5b83\u7684\u5185\u90e8\u53d8\u5316\u5c31\u5f71\u54cd\u4e0d\u5230\u8f93\u51fa\u7684<code>mod.counter</code>\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a<code>mod.counter</code>\u662f\u4e00\u4e2a\u539f\u59cb\u7c7b\u578b\u7684\u503c\uff0c\u4f1a\u88ab\u7f13\u5b58\u3002\u9664\u975e\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u624d\u80fd\u5f97\u5230\u5185\u90e8\u53d8\u52a8\u540e\u7684\u503c\u3002</p> <pre><code>// lib.js\nvar counter = 3;\nfunction incCounter() {\n  counter++;\n}\nmodule.exports = {\n  get counter() {\n    return counter\n  },\n  incCounter: incCounter,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8f93\u51fa\u7684<code>counter</code>\u5c5e\u6027\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u53d6\u503c\u5668\u51fd\u6570\u3002\u73b0\u5728\u518d\u6267\u884c<code>main.js</code>\uff0c\u5c31\u53ef\u4ee5\u6b63\u786e\u8bfb\u53d6\u5185\u90e8\u53d8\u91cf<code>counter</code>\u7684\u53d8\u52a8\u4e86\u3002</p> <pre><code>$ node main.js\n3\n4\n</code></pre> <p>ES6 \u6a21\u5757\u7684\u8fd0\u884c\u673a\u5236\u4e0e CommonJS \u4e0d\u4e00\u6837\u3002JS \u5f15\u64ce\u5bf9\u811a\u672c\u9759\u6001\u5206\u6790\u7684\u65f6\u5019\uff0c\u9047\u5230\u6a21\u5757\u52a0\u8f7d\u547d\u4ee4<code>import</code>\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4e2a\u53ea\u8bfb\u5f15\u7528\u3002\u7b49\u5230\u811a\u672c\u771f\u6b63\u6267\u884c\u65f6\uff0c\u518d\u6839\u636e\u8fd9\u4e2a\u53ea\u8bfb\u5f15\u7528\uff0c\u5230\u88ab\u52a0\u8f7d\u7684\u90a3\u4e2a\u6a21\u5757\u91cc\u9762\u53bb\u53d6\u503c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cES6 \u7684<code>import</code>\u6709\u70b9\u50cf Unix \u7cfb\u7edf\u7684\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u539f\u59cb\u503c\u53d8\u4e86\uff0c<code>import</code>\u52a0\u8f7d\u7684\u503c\u4e5f\u4f1a\u8ddf\u7740\u53d8\u3002\u56e0\u6b64\uff0cES6 \u6a21\u5757\u662f\u52a8\u6001\u5f15\u7528\uff0c\u5e76\u4e14\u4e0d\u4f1a\u7f13\u5b58\u503c\uff0c\u6a21\u5757\u91cc\u9762\u7684\u53d8\u91cf\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002</p> <p>\u8fd8\u662f\u4e3e\u4e0a\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>// lib.js\nexport let counter = 3;\nexport function incCounter() {\n  counter++;\n}\n\n// main.js\nimport { counter, incCounter } from './lib';\nconsole.log(counter); // 3\nincCounter();\nconsole.log(counter); // 4\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0cES6 \u6a21\u5757\u8f93\u5165\u7684\u53d8\u91cf<code>counter</code>\u662f\u6d3b\u7684\uff0c\u5b8c\u5168\u53cd\u5e94\u5176\u6240\u5728\u6a21\u5757<code>lib.js</code>\u5185\u90e8\u7684\u53d8\u5316\u3002</p> <p>\u518d\u4e3e\u4e00\u4e2a\u51fa\u73b0\u5728<code>export</code>\u4e00\u8282\u4e2d\u7684\u4f8b\u5b50\u3002</p> <pre><code>// m1.js\nexport var foo = 'bar';\nsetTimeout(() =&gt; foo = 'baz', 500);\n\n// m2.js\nimport {foo} from './m1.js';\nconsole.log(foo);\nsetTimeout(() =&gt; console.log(foo), 500);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>m1.js</code>\u7684\u53d8\u91cf<code>foo</code>\uff0c\u5728\u521a\u52a0\u8f7d\u65f6\u7b49\u4e8e<code>bar</code>\uff0c\u8fc7\u4e86 500 \u6beb\u79d2\uff0c\u53c8\u53d8\u4e3a\u7b49\u4e8e<code>baz</code>\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u770b\uff0c<code>m2.js</code>\u80fd\u5426\u6b63\u786e\u8bfb\u53d6\u8fd9\u4e2a\u53d8\u5316\u3002</p> <pre><code>$ babel-node m2.js\n\nbar\nbaz\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8868\u660e\uff0cES6 \u6a21\u5757\u4e0d\u4f1a\u7f13\u5b58\u8fd0\u884c\u7ed3\u679c\uff0c\u800c\u662f\u52a8\u6001\u5730\u53bb\u88ab\u52a0\u8f7d\u7684\u6a21\u5757\u53d6\u503c\uff0c\u5e76\u4e14\u53d8\u91cf\u603b\u662f\u7ed1\u5b9a\u5176\u6240\u5728\u7684\u6a21\u5757\u3002</p> <p>\u7531\u4e8e ES6 \u8f93\u5165\u7684\u6a21\u5757\u53d8\u91cf\uff0c\u53ea\u662f\u4e00\u4e2a\u201c\u7b26\u53f7\u8fde\u63a5\u201d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u53d8\u91cf\u662f\u53ea\u8bfb\u7684\uff0c\u5bf9\u5b83\u8fdb\u884c\u91cd\u65b0\u8d4b\u503c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// lib.js\nexport let obj = {};\n\n// main.js\nimport { obj } from './lib';\n\nobj.prop = 123; // OK\nobj = {}; // TypeError\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>main.js</code>\u4ece<code>lib.js</code>\u8f93\u5165\u53d8\u91cf<code>obj</code>\uff0c\u53ef\u4ee5\u5bf9<code>obj</code>\u6dfb\u52a0\u5c5e\u6027\uff0c\u4f46\u662f\u91cd\u65b0\u8d4b\u503c\u5c31\u4f1a\u62a5\u9519\u3002\u56e0\u4e3a\u53d8\u91cf<code>obj</code>\u6307\u5411\u7684\u5730\u5740\u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u80fd\u91cd\u65b0\u8d4b\u503c\uff0c\u8fd9\u5c31\u597d\u6bd4<code>main.js</code>\u521b\u9020\u4e86\u4e00\u4e2a\u540d\u4e3a<code>obj</code>\u7684<code>const</code>\u53d8\u91cf\u3002</p> <p>\u6700\u540e\uff0c<code>export</code>\u901a\u8fc7\u63a5\u53e3\uff0c\u8f93\u51fa\u7684\u662f\u540c\u4e00\u4e2a\u503c\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u6837\u7684\u5b9e\u4f8b\u3002</p> <pre><code>// mod.js\nfunction C() {\n  this.sum = 0;\n  this.add = function () {\n    this.sum += 1;\n  };\n  this.show = function () {\n    console.log(this.sum);\n  };\n}\n\nexport let c = new C();\n</code></pre> <p>\u4e0a\u9762\u7684\u811a\u672c<code>mod.js</code>\uff0c\u8f93\u51fa\u7684\u662f\u4e00\u4e2a<code>C</code>\u7684\u5b9e\u4f8b\u3002\u4e0d\u540c\u7684\u811a\u672c\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\uff0c\u5f97\u5230\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p> <pre><code>// x.js\nimport {c} from './mod';\nc.add();\n\n// y.js\nimport {c} from './mod';\nc.show();\n\n// main.js\nimport './x';\nimport './y';\n</code></pre> <p>\u73b0\u5728\u6267\u884c<code>main.js</code>\uff0c\u8f93\u51fa\u7684\u662f<code>1</code>\u3002</p> <pre><code>$ babel-node main.js\n1\n</code></pre> <p>\u8fd9\u5c31\u8bc1\u660e\u4e86<code>x.js</code>\u548c<code>y.js</code>\u52a0\u8f7d\u7684\u90fd\u662f<code>C</code>\u7684\u540c\u4e00\u4e2a\u5b9e\u4f8b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#nodejs","title":"Node.js \u7684\u6a21\u5757\u52a0\u8f7d\u65b9\u6cd5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_4","title":"\u6982\u8ff0","text":"<p>JavaScript \u73b0\u5728\u6709\u4e24\u79cd\u6a21\u5757\u3002\u4e00\u79cd\u662f ES6 \u6a21\u5757\uff0c\u7b80\u79f0 ESM\uff1b\u53e6\u4e00\u79cd\u662f CommonJS \u6a21\u5757\uff0c\u7b80\u79f0 CJS\u3002</p> <p>CommonJS \u6a21\u5757\u662f Node.js \u4e13\u7528\u7684\uff0c\u4e0e ES6 \u6a21\u5757\u4e0d\u517c\u5bb9\u3002\u8bed\u6cd5\u4e0a\u9762\uff0c\u4e24\u8005\u6700\u660e\u663e\u7684\u5dee\u5f02\u662f\uff0cCommonJS \u6a21\u5757\u4f7f\u7528<code>require()</code>\u548c<code>module.exports</code>\uff0cES6 \u6a21\u5757\u4f7f\u7528<code>import</code>\u548c<code>export</code>\u3002</p> <p>\u5b83\u4eec\u91c7\u7528\u4e0d\u540c\u7684\u52a0\u8f7d\u65b9\u6848\u3002\u4ece Node.js v13.2 \u7248\u672c\u5f00\u59cb\uff0cNode.js \u5df2\u7ecf\u9ed8\u8ba4\u6253\u5f00\u4e86 ES6 \u6a21\u5757\u652f\u6301\u3002</p> <p>Node.js \u8981\u6c42 ES6 \u6a21\u5757\u91c7\u7528<code>.mjs</code>\u540e\u7f00\u6587\u4ef6\u540d\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u811a\u672c\u6587\u4ef6\u91cc\u9762\u4f7f\u7528<code>import</code>\u6216\u8005<code>export</code>\u547d\u4ee4\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u91c7\u7528<code>.mjs</code>\u540e\u7f00\u540d\u3002Node.js \u9047\u5230<code>.mjs</code>\u6587\u4ef6\uff0c\u5c31\u8ba4\u4e3a\u5b83\u662f ES6 \u6a21\u5757\uff0c\u9ed8\u8ba4\u542f\u7528\u4e25\u683c\u6a21\u5f0f\uff0c\u4e0d\u5fc5\u5728\u6bcf\u4e2a\u6a21\u5757\u6587\u4ef6\u9876\u90e8\u6307\u5b9a<code>\"use strict\"</code>\u3002</p> <p>\u5982\u679c\u4e0d\u5e0c\u671b\u5c06\u540e\u7f00\u540d\u6539\u6210<code>.mjs</code>\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u7684<code>package.json</code>\u6587\u4ef6\u4e2d\uff0c\u6307\u5b9a<code>type</code>\u5b57\u6bb5\u4e3a<code>module</code>\u3002</p> <pre><code>{\n   \"type\": \"module\"\n}\n</code></pre> <p>\u4e00\u65e6\u8bbe\u7f6e\u4e86\u4ee5\u540e\uff0c\u8be5\u9879\u76ee\u7684 JS \u811a\u672c\uff0c\u5c31\u88ab\u89e3\u91ca\u6210 ES6 \u6a21\u5757\u3002</p> <pre><code># \u89e3\u91ca\u6210 ES6 \u6a21\u5757\n$ node my-app.js\n</code></pre> <p>\u5982\u679c\u8fd9\u65f6\u8fd8\u8981\u4f7f\u7528 CommonJS \u6a21\u5757\uff0c\u90a3\u4e48\u9700\u8981\u5c06 CommonJS \u811a\u672c\u7684\u540e\u7f00\u540d\u90fd\u6539\u6210<code>.cjs</code>\u3002\u5982\u679c\u6ca1\u6709<code>type</code>\u5b57\u6bb5\uff0c\u6216\u8005<code>type</code>\u5b57\u6bb5\u4e3a<code>commonjs</code>\uff0c\u5219<code>.js</code>\u811a\u672c\u4f1a\u88ab\u89e3\u91ca\u6210 CommonJS \u6a21\u5757\u3002</p> <p>\u603b\u7ed3\u4e3a\u4e00\u53e5\u8bdd\uff1a<code>.mjs</code>\u6587\u4ef6\u603b\u662f\u4ee5 ES6 \u6a21\u5757\u52a0\u8f7d\uff0c<code>.cjs</code>\u6587\u4ef6\u603b\u662f\u4ee5 CommonJS \u6a21\u5757\u52a0\u8f7d\uff0c<code>.js</code>\u6587\u4ef6\u7684\u52a0\u8f7d\u53d6\u51b3\u4e8e<code>package.json</code>\u91cc\u9762<code>type</code>\u5b57\u6bb5\u7684\u8bbe\u7f6e\u3002</p> <p>\u6ce8\u610f\uff0cES6 \u6a21\u5757\u4e0e CommonJS \u6a21\u5757\u5c3d\u91cf\u4e0d\u8981\u6df7\u7528\u3002<code>require</code>\u547d\u4ee4\u4e0d\u80fd\u52a0\u8f7d<code>.mjs</code>\u6587\u4ef6\uff0c\u4f1a\u62a5\u9519\uff0c\u53ea\u6709<code>import</code>\u547d\u4ee4\u624d\u53ef\u4ee5\u52a0\u8f7d<code>.mjs</code>\u6587\u4ef6\u3002\u53cd\u8fc7\u6765\uff0c<code>.mjs</code>\u6587\u4ef6\u91cc\u9762\u4e5f\u4e0d\u80fd\u4f7f\u7528<code>require</code>\u547d\u4ee4\uff0c\u5fc5\u987b\u4f7f\u7528<code>import</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#packagejson-main","title":"package.json \u7684 main \u5b57\u6bb5","text":"<p><code>package.json</code>\u6587\u4ef6\u6709\u4e24\u4e2a\u5b57\u6bb5\u53ef\u4ee5\u6307\u5b9a\u6a21\u5757\u7684\u5165\u53e3\u6587\u4ef6\uff1a<code>main</code>\u548c<code>exports</code>\u3002\u6bd4\u8f83\u7b80\u5355\u7684\u6a21\u5757\uff0c\u53ef\u4ee5\u53ea\u4f7f\u7528<code>main</code>\u5b57\u6bb5\uff0c\u6307\u5b9a\u6a21\u5757\u52a0\u8f7d\u7684\u5165\u53e3\u6587\u4ef6\u3002</p> <pre><code>// ./node_modules/es-module-package/package.json\n{\n  \"type\": \"module\",\n  \"main\": \"./src/index.js\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a\u9879\u76ee\u7684\u5165\u53e3\u811a\u672c\u4e3a<code>./src/index.js</code>\uff0c\u5b83\u7684\u683c\u5f0f\u4e3a ES6 \u6a21\u5757\u3002\u5982\u679c\u6ca1\u6709<code>type</code>\u5b57\u6bb5\uff0c<code>index.js</code>\u5c31\u4f1a\u88ab\u89e3\u91ca\u4e3a CommonJS \u6a21\u5757\u3002</p> <p>\u7136\u540e\uff0c<code>import</code>\u547d\u4ee4\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd9\u4e2a\u6a21\u5757\u3002</p> <pre><code>// ./my-app.mjs\n\nimport { something } from 'es-module-package';\n// \u5b9e\u9645\u52a0\u8f7d\u7684\u662f ./node_modules/es-module-package/src/index.js\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8fd0\u884c\u8be5\u811a\u672c\u4ee5\u540e\uff0cNode.js \u5c31\u4f1a\u5230<code>./node_modules</code>\u76ee\u5f55\u4e0b\u9762\uff0c\u5bfb\u627e<code>es-module-package</code>\u6a21\u5757\uff0c\u7136\u540e\u6839\u636e\u8be5\u6a21\u5757<code>package.json</code>\u7684<code>main</code>\u5b57\u6bb5\u53bb\u6267\u884c\u5165\u53e3\u6587\u4ef6\u3002</p> <p>\u8fd9\u65f6\uff0c\u5982\u679c\u7528 CommonJS \u6a21\u5757\u7684<code>require()</code>\u547d\u4ee4\u53bb\u52a0\u8f7d<code>es-module-package</code>\u6a21\u5757\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a CommonJS \u6a21\u5757\u4e0d\u80fd\u5904\u7406<code>export</code>\u547d\u4ee4\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#packagejson-exports","title":"package.json \u7684 exports \u5b57\u6bb5","text":"<p><code>exports</code>\u5b57\u6bb5\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e<code>main</code>\u5b57\u6bb5\u3002\u5b83\u6709\u591a\u79cd\u7528\u6cd5\u3002</p> <p>\uff081\uff09\u5b50\u76ee\u5f55\u522b\u540d</p> <p><code>package.json</code>\u6587\u4ef6\u7684<code>exports</code>\u5b57\u6bb5\u53ef\u4ee5\u6307\u5b9a\u811a\u672c\u6216\u5b50\u76ee\u5f55\u7684\u522b\u540d\u3002</p> <pre><code>// ./node_modules/es-module-package/package.json\n{\n  \"exports\": {\n    \"./submodule\": \"./src/submodule.js\"\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u6307\u5b9a<code>src/submodule.js</code>\u522b\u540d\u4e3a<code>submodule</code>\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4ece\u522b\u540d\u52a0\u8f7d\u8fd9\u4e2a\u6587\u4ef6\u3002</p> <pre><code>import submodule from 'es-module-package/submodule';\n// \u52a0\u8f7d ./node_modules/es-module-package/src/submodule.js\n</code></pre> <p>\u4e0b\u9762\u662f\u5b50\u76ee\u5f55\u522b\u540d\u7684\u4f8b\u5b50\u3002</p> <pre><code>// ./node_modules/es-module-package/package.json\n{\n  \"exports\": {\n    \"./features/\": \"./src/features/\"\n  }\n}\n\nimport feature from 'es-module-package/features/x.js';\n// \u52a0\u8f7d ./node_modules/es-module-package/src/features/x.js\n</code></pre> <p>\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u522b\u540d\uff0c\u5c31\u4e0d\u80fd\u7528\u201c\u6a21\u5757+\u811a\u672c\u540d\u201d\u8fd9\u79cd\u5f62\u5f0f\u52a0\u8f7d\u811a\u672c\u3002</p> <pre><code>// \u62a5\u9519\nimport submodule from 'es-module-package/private-module.js';\n\n// \u4e0d\u62a5\u9519\nimport submodule from './node_modules/es-module-package/private-module.js';\n</code></pre> <p>\uff082\uff09main \u7684\u522b\u540d</p> <p><code>exports</code>\u5b57\u6bb5\u7684\u522b\u540d\u5982\u679c\u662f<code>.</code>\uff0c\u5c31\u4ee3\u8868\u6a21\u5757\u7684\u4e3b\u5165\u53e3\uff0c\u4f18\u5148\u7ea7\u9ad8\u4e8e<code>main</code>\u5b57\u6bb5\uff0c\u5e76\u4e14\u53ef\u4ee5\u76f4\u63a5\u7b80\u5199\u6210<code>exports</code>\u5b57\u6bb5\u7684\u503c\u3002</p> <pre><code>{\n  \"exports\": {\n    \".\": \"./main.js\"\n  }\n}\n\n// \u7b49\u540c\u4e8e\n{\n  \"exports\": \"./main.js\"\n}\n</code></pre> <p>\u7531\u4e8e<code>exports</code>\u5b57\u6bb5\u53ea\u6709\u652f\u6301 ES6 \u7684 Node.js \u624d\u8ba4\u8bc6\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6765\u517c\u5bb9\u65e7\u7248\u672c\u7684 Node.js\u3002</p> <pre><code>{\n  \"main\": \"./main-legacy.cjs\",\n  \"exports\": {\n    \".\": \"./main-modern.cjs\"\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u8001\u7248\u672c\u7684 Node.js \uff08\u4e0d\u652f\u6301 ES6 \u6a21\u5757\uff09\u7684\u5165\u53e3\u6587\u4ef6\u662f<code>main-legacy.cjs</code>\uff0c\u65b0\u7248\u672c\u7684 Node.js \u7684\u5165\u53e3\u6587\u4ef6\u662f<code>main-modern.cjs</code>\u3002</p> <p>\uff083\uff09\u6761\u4ef6\u52a0\u8f7d</p> <p>\u5229\u7528<code>.</code>\u8fd9\u4e2a\u522b\u540d\uff0c\u53ef\u4ee5\u4e3a ES6 \u6a21\u5757\u548c CommonJS \u6307\u5b9a\u4e0d\u540c\u7684\u5165\u53e3\u3002</p> <pre><code>{\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"require\": \"./main.cjs\",\n      \"default\": \"./main.js\"\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u522b\u540d<code>.</code>\u7684<code>require</code>\u6761\u4ef6\u6307\u5b9a<code>require()</code>\u547d\u4ee4\u7684\u5165\u53e3\u6587\u4ef6\uff08\u5373 CommonJS \u7684\u5165\u53e3\uff09\uff0c<code>default</code>\u6761\u4ef6\u6307\u5b9a\u5176\u4ed6\u60c5\u51b5\u7684\u5165\u53e3\uff08\u5373 ES6 \u7684\u5165\u53e3\uff09\u3002</p> <p>\u4e0a\u9762\u7684\u5199\u6cd5\u53ef\u4ee5\u7b80\u5199\u5982\u4e0b\u3002</p> <pre><code>{\n  \"exports\": {\n    \"require\": \"./main.cjs\",\n    \"default\": \"./main.js\"\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679c\u540c\u65f6\u8fd8\u6709\u5176\u4ed6\u522b\u540d\uff0c\u5c31\u4e0d\u80fd\u91c7\u7528\u7b80\u5199\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>{\n  // \u62a5\u9519\n  \"exports\": {\n    \"./feature\": \"./lib/feature.js\",\n    \"require\": \"./main.cjs\",\n    \"default\": \"./main.js\"\n  }\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#commonjs-es6","title":"CommonJS \u6a21\u5757\u52a0\u8f7d ES6 \u6a21\u5757","text":"<p>CommonJS \u7684<code>require()</code>\u547d\u4ee4\u4e0d\u80fd\u52a0\u8f7d ES6 \u6a21\u5757\uff0c\u4f1a\u62a5\u9519\uff0c\u53ea\u80fd\u4f7f\u7528<code>import()</code>\u8fd9\u4e2a\u65b9\u6cd5\u52a0\u8f7d\u3002</p> <pre><code>(async () =&gt; {\n  await import('./my-app.mjs');\n})();\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u53ef\u4ee5\u5728 CommonJS \u6a21\u5757\u4e2d\u8fd0\u884c\u3002</p> <p><code>require()</code>\u4e0d\u652f\u6301 ES6 \u6a21\u5757\u7684\u4e00\u4e2a\u539f\u56e0\u662f\uff0c\u5b83\u662f\u540c\u6b65\u52a0\u8f7d\uff0c\u800c ES6 \u6a21\u5757\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528\u9876\u5c42<code>await</code>\u547d\u4ee4\uff0c\u5bfc\u81f4\u65e0\u6cd5\u88ab\u540c\u6b65\u52a0\u8f7d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#es6-commonjs_1","title":"ES6 \u6a21\u5757\u52a0\u8f7d CommonJS \u6a21\u5757","text":"<p>ES6 \u6a21\u5757\u7684<code>import</code>\u547d\u4ee4\u53ef\u4ee5\u52a0\u8f7d CommonJS \u6a21\u5757\uff0c\u4f46\u662f\u53ea\u80fd\u6574\u4f53\u52a0\u8f7d\uff0c\u4e0d\u80fd\u53ea\u52a0\u8f7d\u5355\u4e00\u7684\u8f93\u51fa\u9879\u3002</p> <pre><code>// \u6b63\u786e\nimport packageMain from 'commonjs-package';\n\n// \u62a5\u9519\nimport { method } from 'commonjs-package';\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a ES6 \u6a21\u5757\u9700\u8981\u652f\u6301\u9759\u6001\u4ee3\u7801\u5206\u6790\uff0c\u800c CommonJS \u6a21\u5757\u7684\u8f93\u51fa\u63a5\u53e3\u662f<code>module.exports</code>\uff0c\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u65e0\u6cd5\u88ab\u9759\u6001\u5206\u6790\uff0c\u6240\u4ee5\u53ea\u80fd\u6574\u4f53\u52a0\u8f7d\u3002</p> <p>\u52a0\u8f7d\u5355\u4e00\u7684\u8f93\u51fa\u9879\uff0c\u53ef\u4ee5\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>import packageMain from 'commonjs-package';\nconst { method } = packageMain;\n</code></pre> <p>\u8fd8\u6709\u4e00\u79cd\u53d8\u901a\u7684\u52a0\u8f7d\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528 Node.js \u5185\u7f6e\u7684<code>module.createRequire()</code>\u65b9\u6cd5\u3002</p> <pre><code>// cjs.cjs\nmodule.exports = 'cjs';\n\n// esm.mjs\nimport { createRequire } from 'module';\n\nconst require = createRequire(import.meta.url);\n\nconst cjs = require('./cjs.cjs');\ncjs === 'cjs'; // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cES6 \u6a21\u5757\u901a\u8fc7<code>module.createRequire()</code>\u65b9\u6cd5\u53ef\u4ee5\u52a0\u8f7d CommonJS \u6a21\u5757\u3002\u4f46\u662f\uff0c\u8fd9\u79cd\u5199\u6cd5\u7b49\u4e8e\u5c06 ES6 \u548c CommonJS \u6df7\u5728\u4e00\u8d77\u4e86\uff0c\u6240\u4ee5\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_5","title":"\u540c\u65f6\u652f\u6301\u4e24\u79cd\u683c\u5f0f\u7684\u6a21\u5757","text":"<p>\u4e00\u4e2a\u6a21\u5757\u540c\u65f6\u8981\u652f\u6301 CommonJS \u548c ES6 \u4e24\u79cd\u683c\u5f0f\uff0c\u4e5f\u5f88\u5bb9\u6613\u3002</p> <p>\u5982\u679c\u539f\u59cb\u6a21\u5757\u662f ES6 \u683c\u5f0f\uff0c\u90a3\u4e48\u9700\u8981\u7ed9\u51fa\u4e00\u4e2a\u6574\u4f53\u8f93\u51fa\u63a5\u53e3\uff0c\u6bd4\u5982<code>export default obj</code>\uff0c\u4f7f\u5f97 CommonJS \u53ef\u4ee5\u7528<code>import()</code>\u8fdb\u884c\u52a0\u8f7d\u3002</p> <p>\u5982\u679c\u539f\u59cb\u6a21\u5757\u662f CommonJS \u683c\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u52a0\u4e00\u4e2a\u5305\u88c5\u5c42\u3002</p> <pre><code>import cjsModule from '../index.js';\nexport const foo = cjsModule.foo;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u6574\u4f53\u8f93\u5165 CommonJS \u6a21\u5757\uff0c\u7136\u540e\u518d\u6839\u636e\u9700\u8981\u8f93\u51fa\u5177\u540d\u63a5\u53e3\u3002</p> <p>\u4f60\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6587\u4ef6\u7684\u540e\u7f00\u540d\u6539\u4e3a<code>.mjs</code>\uff0c\u6216\u8005\u5c06\u5b83\u653e\u5728\u4e00\u4e2a\u5b50\u76ee\u5f55\uff0c\u518d\u5728\u8fd9\u4e2a\u5b50\u76ee\u5f55\u91cc\u9762\u653e\u4e00\u4e2a\u5355\u72ec\u7684<code>package.json</code>\u6587\u4ef6\uff0c\u6307\u660e<code>{ type: \"module\" }</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u505a\u6cd5\u662f\u5728<code>package.json</code>\u6587\u4ef6\u7684<code>exports</code>\u5b57\u6bb5\uff0c\u6307\u660e\u4e24\u79cd\u683c\u5f0f\u6a21\u5757\u5404\u81ea\u7684\u52a0\u8f7d\u5165\u53e3\u3002</p> <pre><code>\"exports\"\uff1a{\n  \"require\": \"./index.js\"\uff0c\n  \"import\": \"./esm/wrapper.js\"\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6307\u5b9a<code>require()</code>\u548c<code>import</code>\uff0c\u52a0\u8f7d\u8be5\u6a21\u5757\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u4e0d\u4e00\u6837\u7684\u5165\u53e3\u6587\u4ef6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#nodejs_1","title":"Node.js \u7684\u5185\u7f6e\u6a21\u5757","text":"<p>Node.js \u7684\u5185\u7f6e\u6a21\u5757\u53ef\u4ee5\u6574\u4f53\u52a0\u8f7d\uff0c\u4e5f\u53ef\u4ee5\u52a0\u8f7d\u6307\u5b9a\u7684\u8f93\u51fa\u9879\u3002</p> <pre><code>// \u6574\u4f53\u52a0\u8f7d\nimport EventEmitter from 'events';\nconst e = new EventEmitter();\n\n// \u52a0\u8f7d\u6307\u5b9a\u7684\u8f93\u51fa\u9879\nimport { readFile } from 'fs';\nreadFile('./foo.txt', (err, source) =&gt; {\n  if (err) {\n    console.error(err);\n  } else {\n    console.log(source);\n  }\n});\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_6","title":"\u52a0\u8f7d\u8def\u5f84","text":"<p>ES6 \u6a21\u5757\u7684\u52a0\u8f7d\u8def\u5f84\u5fc5\u987b\u7ed9\u51fa\u811a\u672c\u7684\u5b8c\u6574\u8def\u5f84\uff0c\u4e0d\u80fd\u7701\u7565\u811a\u672c\u7684\u540e\u7f00\u540d\u3002<code>import</code>\u547d\u4ee4\u548c<code>package.json</code>\u6587\u4ef6\u7684<code>main</code>\u5b57\u6bb5\u5982\u679c\u7701\u7565\u811a\u672c\u7684\u540e\u7f00\u540d\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// ES6 \u6a21\u5757\u4e2d\u5c06\u62a5\u9519\nimport { something } from './index';\n</code></pre> <p>\u4e3a\u4e86\u4e0e\u6d4f\u89c8\u5668\u7684<code>import</code>\u52a0\u8f7d\u89c4\u5219\u76f8\u540c\uff0cNode.js \u7684<code>.mjs</code>\u6587\u4ef6\u652f\u6301 URL \u8def\u5f84\u3002</p> <pre><code>import './foo.mjs?query=1'; // \u52a0\u8f7d ./foo \u4f20\u5165\u53c2\u6570 ?query=1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u811a\u672c\u8def\u5f84\u5e26\u6709\u53c2\u6570<code>?query=1</code>\uff0cNode \u4f1a\u6309 URL \u89c4\u5219\u89e3\u8bfb\u3002\u540c\u4e00\u4e2a\u811a\u672c\u53ea\u8981\u53c2\u6570\u4e0d\u540c\uff0c\u5c31\u4f1a\u88ab\u52a0\u8f7d\u591a\u6b21\uff0c\u5e76\u4e14\u4fdd\u5b58\u6210\u4e0d\u540c\u7684\u7f13\u5b58\u3002\u7531\u4e8e\u8fd9\u4e2a\u539f\u56e0\uff0c\u53ea\u8981\u6587\u4ef6\u540d\u4e2d\u542b\u6709<code>:</code>\u3001<code>%</code>\u3001<code>#</code>\u3001<code>?</code>\u7b49\u7279\u6b8a\u5b57\u7b26\uff0c\u6700\u597d\u5bf9\u8fd9\u4e9b\u5b57\u7b26\u8fdb\u884c\u8f6c\u4e49\u3002</p> <p>\u76ee\u524d\uff0cNode.js \u7684<code>import</code>\u547d\u4ee4\u53ea\u652f\u6301\u52a0\u8f7d\u672c\u5730\u6a21\u5757\uff08<code>file:</code>\u534f\u8bae\uff09\u548c<code>data:</code>\u534f\u8bae\uff0c\u4e0d\u652f\u6301\u52a0\u8f7d\u8fdc\u7a0b\u6a21\u5757\u3002\u53e6\u5916\uff0c\u811a\u672c\u8def\u5f84\u53ea\u652f\u6301\u76f8\u5bf9\u8def\u5f84\uff0c\u4e0d\u652f\u6301\u7edd\u5bf9\u8def\u5f84\uff08\u5373\u4ee5<code>/</code>\u6216<code>//</code>\u5f00\u5934\u7684\u8def\u5f84\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_7","title":"\u5185\u90e8\u53d8\u91cf","text":"<p>ES6 \u6a21\u5757\u5e94\u8be5\u662f\u901a\u7528\u7684\uff0c\u540c\u4e00\u4e2a\u6a21\u5757\u4e0d\u7528\u4fee\u6539\uff0c\u5c31\u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u73af\u5883\u548c\u670d\u52a1\u5668\u73af\u5883\u3002\u4e3a\u4e86\u8fbe\u5230\u8fd9\u4e2a\u76ee\u6807\uff0cNode.js \u89c4\u5b9a ES6 \u6a21\u5757\u4e4b\u4e2d\u4e0d\u80fd\u4f7f\u7528 CommonJS \u6a21\u5757\u7684\u7279\u6709\u7684\u4e00\u4e9b\u5185\u90e8\u53d8\u91cf\u3002</p> <p>\u9996\u5148\uff0c\u5c31\u662f<code>this</code>\u5173\u952e\u5b57\u3002ES6 \u6a21\u5757\u4e4b\u4e2d\uff0c\u9876\u5c42\u7684<code>this</code>\u6307\u5411<code>undefined</code>\uff1bCommonJS \u6a21\u5757\u7684\u9876\u5c42<code>this</code>\u6307\u5411\u5f53\u524d\u6a21\u5757\uff0c\u8fd9\u662f\u4e24\u8005\u7684\u4e00\u4e2a\u91cd\u5927\u5dee\u5f02\u3002</p> <p>\u5176\u6b21\uff0c\u4ee5\u4e0b\u8fd9\u4e9b\u9876\u5c42\u53d8\u91cf\u5728 ES6 \u6a21\u5757\u4e4b\u4e2d\u90fd\u662f\u4e0d\u5b58\u5728\u7684\u3002</p> <ul> <li><code>arguments</code></li> <li><code>require</code></li> <li><code>module</code></li> <li><code>exports</code></li> <li><code>__filename</code></li> <li><code>__dirname</code></li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#_8","title":"\u5faa\u73af\u52a0\u8f7d","text":"<p>\u201c\u5faa\u73af\u52a0\u8f7d\u201d\uff08circular dependency\uff09\u6307\u7684\u662f\uff0c<code>a</code>\u811a\u672c\u7684\u6267\u884c\u4f9d\u8d56<code>b</code>\u811a\u672c\uff0c\u800c<code>b</code>\u811a\u672c\u7684\u6267\u884c\u53c8\u4f9d\u8d56<code>a</code>\u811a\u672c\u3002</p> <pre><code>// a.js\nvar b = require('b');\n\n// b.js\nvar a = require('a');\n</code></pre> <p>\u901a\u5e38\uff0c\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u8868\u793a\u5b58\u5728\u5f3a\u8026\u5408\uff0c\u5982\u679c\u5904\u7406\u4e0d\u597d\uff0c\u8fd8\u53ef\u80fd\u5bfc\u81f4\u9012\u5f52\u52a0\u8f7d\uff0c\u4f7f\u5f97\u7a0b\u5e8f\u65e0\u6cd5\u6267\u884c\uff0c\u56e0\u6b64\u5e94\u8be5\u907f\u514d\u51fa\u73b0\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u8fd9\u662f\u5f88\u96be\u907f\u514d\u7684\uff0c\u5c24\u5176\u662f\u4f9d\u8d56\u5173\u7cfb\u590d\u6742\u7684\u5927\u9879\u76ee\uff0c\u5f88\u5bb9\u6613\u51fa\u73b0<code>a</code>\u4f9d\u8d56<code>b</code>\uff0c<code>b</code>\u4f9d\u8d56<code>c</code>\uff0c<code>c</code>\u53c8\u4f9d\u8d56<code>a</code>\u8fd9\u6837\u7684\u60c5\u51b5\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6a21\u5757\u52a0\u8f7d\u673a\u5236\u5fc5\u987b\u8003\u8651\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u7684\u60c5\u51b5\u3002</p> <p>\u5bf9\u4e8e JavaScript \u8bed\u8a00\u6765\u8bf4\uff0c\u76ee\u524d\u6700\u5e38\u89c1\u7684\u4e24\u79cd\u6a21\u5757\u683c\u5f0f CommonJS \u548c ES6\uff0c\u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u7684\u65b9\u6cd5\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u4e0d\u4e00\u6837\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#commonjs","title":"CommonJS \u6a21\u5757\u7684\u52a0\u8f7d\u539f\u7406","text":"<p>\u4ecb\u7ecd ES6 \u5982\u4f55\u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u4e4b\u524d\uff0c\u5148\u4ecb\u7ecd\u76ee\u524d\u6700\u6d41\u884c\u7684 CommonJS \u6a21\u5757\u683c\u5f0f\u7684\u52a0\u8f7d\u539f\u7406\u3002</p> <p>CommonJS \u7684\u4e00\u4e2a\u6a21\u5757\uff0c\u5c31\u662f\u4e00\u4e2a\u811a\u672c\u6587\u4ef6\u3002<code>require</code>\u547d\u4ee4\u7b2c\u4e00\u6b21\u52a0\u8f7d\u8be5\u811a\u672c\uff0c\u5c31\u4f1a\u6267\u884c\u6574\u4e2a\u811a\u672c\uff0c\u7136\u540e\u5728\u5185\u5b58\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>{\n  id: '...',\n  exports: { ... },\n  loaded: true,\n  ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c31\u662f Node \u5185\u90e8\u52a0\u8f7d\u6a21\u5757\u540e\u751f\u6210\u7684\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684<code>id</code>\u5c5e\u6027\u662f\u6a21\u5757\u540d\uff0c<code>exports</code>\u5c5e\u6027\u662f\u6a21\u5757\u8f93\u51fa\u7684\u5404\u4e2a\u63a5\u53e3\uff0c<code>loaded</code>\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5\u6a21\u5757\u7684\u811a\u672c\u662f\u5426\u6267\u884c\u5b8c\u6bd5\u3002\u5176\u4ed6\u8fd8\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u8fd9\u91cc\u90fd\u7701\u7565\u4e86\u3002</p> <p>\u4ee5\u540e\u9700\u8981\u7528\u5230\u8fd9\u4e2a\u6a21\u5757\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5230<code>exports</code>\u5c5e\u6027\u4e0a\u9762\u53d6\u503c\u3002\u5373\u4f7f\u518d\u6b21\u6267\u884c<code>require</code>\u547d\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u518d\u6b21\u6267\u884c\u8be5\u6a21\u5757\uff0c\u800c\u662f\u5230\u7f13\u5b58\u4e4b\u4e2d\u53d6\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cCommonJS \u6a21\u5757\u65e0\u8bba\u52a0\u8f7d\u591a\u5c11\u6b21\uff0c\u90fd\u53ea\u4f1a\u5728\u7b2c\u4e00\u6b21\u52a0\u8f7d\u65f6\u8fd0\u884c\u4e00\u6b21\uff0c\u4ee5\u540e\u518d\u52a0\u8f7d\uff0c\u5c31\u8fd4\u56de\u7b2c\u4e00\u6b21\u8fd0\u884c\u7684\u7ed3\u679c\uff0c\u9664\u975e\u624b\u52a8\u6e05\u9664\u7cfb\u7edf\u7f13\u5b58\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#commonjs_1","title":"CommonJS \u6a21\u5757\u7684\u5faa\u73af\u52a0\u8f7d","text":"<p>CommonJS \u6a21\u5757\u7684\u91cd\u8981\u7279\u6027\u662f\u52a0\u8f7d\u65f6\u6267\u884c\uff0c\u5373\u811a\u672c\u4ee3\u7801\u5728<code>require</code>\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5168\u90e8\u6267\u884c\u3002\u4e00\u65e6\u51fa\u73b0\u67d0\u4e2a\u6a21\u5757\u88ab\"\u5faa\u73af\u52a0\u8f7d\"\uff0c\u5c31\u53ea\u8f93\u51fa\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u8fd8\u672a\u6267\u884c\u7684\u90e8\u5206\u4e0d\u4f1a\u8f93\u51fa\u3002</p> <p>\u8ba9\u6211\u4eec\u6765\u770b\uff0cNode \u5b98\u65b9\u6587\u6863\u91cc\u9762\u7684\u4f8b\u5b50\u3002\u811a\u672c\u6587\u4ef6<code>a.js</code>\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>exports.done = false;\nvar b = require('./b.js');\nconsole.log('\u5728 a.js \u4e4b\u4e2d\uff0cb.done = %j', b.done);\nexports.done = true;\nconsole.log('a.js \u6267\u884c\u5b8c\u6bd5');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c<code>a.js</code>\u811a\u672c\u5148\u8f93\u51fa\u4e00\u4e2a<code>done</code>\u53d8\u91cf\uff0c\u7136\u540e\u52a0\u8f7d\u53e6\u4e00\u4e2a\u811a\u672c\u6587\u4ef6<code>b.js</code>\u3002\u6ce8\u610f\uff0c\u6b64\u65f6<code>a.js</code>\u4ee3\u7801\u5c31\u505c\u5728\u8fd9\u91cc\uff0c\u7b49\u5f85<code>b.js</code>\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u5f80\u4e0b\u6267\u884c\u3002</p> <p>\u518d\u770b<code>b.js</code>\u7684\u4ee3\u7801\u3002</p> <pre><code>exports.done = false;\nvar a = require('./a.js');\nconsole.log('\u5728 b.js \u4e4b\u4e2d\uff0ca.done = %j', a.done);\nexports.done = true;\nconsole.log('b.js \u6267\u884c\u5b8c\u6bd5');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c<code>b.js</code>\u6267\u884c\u5230\u7b2c\u4e8c\u884c\uff0c\u5c31\u4f1a\u53bb\u52a0\u8f7d<code>a.js</code>\uff0c\u8fd9\u65f6\uff0c\u5c31\u53d1\u751f\u4e86\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u3002\u7cfb\u7edf\u4f1a\u53bb<code>a.js</code>\u6a21\u5757\u5bf9\u5e94\u5bf9\u8c61\u7684<code>exports</code>\u5c5e\u6027\u53d6\u503c\uff0c\u53ef\u662f\u56e0\u4e3a<code>a.js</code>\u8fd8\u6ca1\u6709\u6267\u884c\u5b8c\uff0c\u4ece<code>exports</code>\u5c5e\u6027\u53ea\u80fd\u53d6\u56de\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6700\u540e\u7684\u503c\u3002</p> <p><code>a.js</code>\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff0c\u53ea\u6709\u4e00\u884c\u3002</p> <pre><code>exports.done = false;\n</code></pre> <p>\u56e0\u6b64\uff0c\u5bf9\u4e8e<code>b.js</code>\u6765\u8bf4\uff0c\u5b83\u4ece<code>a.js</code>\u53ea\u8f93\u5165\u4e00\u4e2a\u53d8\u91cf<code>done</code>\uff0c\u503c\u4e3a<code>false</code>\u3002</p> <p>\u7136\u540e\uff0c<code>b.js</code>\u63a5\u7740\u5f80\u4e0b\u6267\u884c\uff0c\u7b49\u5230\u5168\u90e8\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u628a\u6267\u884c\u6743\u4ea4\u8fd8\u7ed9<code>a.js</code>\u3002\u4e8e\u662f\uff0c<code>a.js</code>\u63a5\u7740\u5f80\u4e0b\u6267\u884c\uff0c\u76f4\u5230\u6267\u884c\u5b8c\u6bd5\u3002\u6211\u4eec\u5199\u4e00\u4e2a\u811a\u672c<code>main.js</code>\uff0c\u9a8c\u8bc1\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p> <pre><code>var a = require('./a.js');\nvar b = require('./b.js');\nconsole.log('\u5728 main.js \u4e4b\u4e2d, a.done=%j, b.done=%j', a.done, b.done);\n</code></pre> <p>\u6267\u884c<code>main.js</code>\uff0c\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ node main.js\n\n\u5728 b.js \u4e4b\u4e2d\uff0ca.done = false\nb.js \u6267\u884c\u5b8c\u6bd5\n\u5728 a.js \u4e4b\u4e2d\uff0cb.done = true\na.js \u6267\u884c\u5b8c\u6bd5\n\u5728 main.js \u4e4b\u4e2d, a.done=true, b.done=true\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8bc1\u660e\u4e86\u4e24\u4ef6\u4e8b\u3002\u4e00\u662f\uff0c\u5728<code>b.js</code>\u4e4b\u4e2d\uff0c<code>a.js</code>\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\uff0c\u53ea\u6267\u884c\u4e86\u7b2c\u4e00\u884c\u3002\u4e8c\u662f\uff0c<code>main.js</code>\u6267\u884c\u5230\u7b2c\u4e8c\u884c\u65f6\uff0c\u4e0d\u4f1a\u518d\u6b21\u6267\u884c<code>b.js</code>\uff0c\u800c\u662f\u8f93\u51fa\u7f13\u5b58\u7684<code>b.js</code>\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5373\u5b83\u7684\u7b2c\u56db\u884c\u3002</p> <pre><code>exports.done = true;\n</code></pre> <p>\u603b\u4e4b\uff0cCommonJS \u8f93\u5165\u7684\u662f\u88ab\u8f93\u51fa\u503c\u7684\u62f7\u8d1d\uff0c\u4e0d\u662f\u5f15\u7528\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e CommonJS \u6a21\u5757\u9047\u5230\u5faa\u73af\u52a0\u8f7d\u65f6\uff0c\u8fd4\u56de\u7684\u662f\u5f53\u524d\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\u7684\u503c\uff0c\u800c\u4e0d\u662f\u4ee3\u7801\u5168\u90e8\u6267\u884c\u540e\u7684\u503c\uff0c\u4e24\u8005\u53ef\u80fd\u4f1a\u6709\u5dee\u5f02\u3002\u6240\u4ee5\uff0c\u8f93\u5165\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3\u3002</p> <pre><code>var a = require('a'); // \u5b89\u5168\u7684\u5199\u6cd5\nvar foo = require('a').foo; // \u5371\u9669\u7684\u5199\u6cd5\n\nexports.good = function (arg) {\n  return a.foo('good', arg); // \u4f7f\u7528\u7684\u662f a.foo \u7684\u6700\u65b0\u503c\n};\n\nexports.bad = function (arg) {\n  return foo('bad', arg); // \u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u90e8\u5206\u52a0\u8f7d\u65f6\u7684\u503c\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u53d1\u751f\u5faa\u73af\u52a0\u8f7d\uff0c<code>require('a').foo</code>\u7684\u503c\u5f88\u53ef\u80fd\u540e\u9762\u4f1a\u88ab\u6539\u5199\uff0c\u6539\u7528<code>require('a')</code>\u4f1a\u66f4\u4fdd\u9669\u4e00\u70b9\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/25-module-loader/#es6","title":"ES6 \u6a21\u5757\u7684\u5faa\u73af\u52a0\u8f7d","text":"<p>ES6 \u5904\u7406\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u4e0e CommonJS \u6709\u672c\u8d28\u7684\u4e0d\u540c\u3002ES6 \u6a21\u5757\u662f\u52a8\u6001\u5f15\u7528\uff0c\u5982\u679c\u4f7f\u7528<code>import</code>\u4ece\u4e00\u4e2a\u6a21\u5757\u52a0\u8f7d\u53d8\u91cf\uff08\u5373<code>import foo from 'foo'</code>\uff09\uff0c\u90a3\u4e9b\u53d8\u91cf\u4e0d\u4f1a\u88ab\u7f13\u5b58\uff0c\u800c\u662f\u6210\u4e3a\u4e00\u4e2a\u6307\u5411\u88ab\u52a0\u8f7d\u6a21\u5757\u7684\u5f15\u7528\uff0c\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u4fdd\u8bc1\uff0c\u771f\u6b63\u53d6\u503c\u7684\u65f6\u5019\u80fd\u591f\u53d6\u5230\u503c\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar);\nexport let foo = 'foo';\n\n// b.mjs\nimport {foo} from './a';\nconsole.log('b.mjs');\nconsole.log(foo);\nexport let bar = 'bar';\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a.mjs</code>\u52a0\u8f7d<code>b.mjs</code>\uff0c<code>b.mjs</code>\u53c8\u52a0\u8f7d<code>a.mjs</code>\uff0c\u6784\u6210\u5faa\u73af\u52a0\u8f7d\u3002\u6267\u884c<code>a.mjs</code>\uff0c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ node --experimental-modules a.mjs\nb.mjs\nReferenceError: foo is not defined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6267\u884c<code>a.mjs</code>\u4ee5\u540e\u4f1a\u62a5\u9519\uff0c<code>foo</code>\u53d8\u91cf\u672a\u5b9a\u4e49\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\uff1f</p> <p>\u8ba9\u6211\u4eec\u4e00\u884c\u884c\u6765\u770b\uff0cES6 \u5faa\u73af\u52a0\u8f7d\u662f\u600e\u4e48\u5904\u7406\u7684\u3002\u9996\u5148\uff0c\u6267\u884c<code>a.mjs</code>\u4ee5\u540e\uff0c\u5f15\u64ce\u53d1\u73b0\u5b83\u52a0\u8f7d\u4e86<code>b.mjs</code>\uff0c\u56e0\u6b64\u4f1a\u4f18\u5148\u6267\u884c<code>b.mjs</code>\uff0c\u7136\u540e\u518d\u6267\u884c<code>a.mjs</code>\u3002\u63a5\u7740\uff0c\u6267\u884c<code>b.mjs</code>\u7684\u65f6\u5019\uff0c\u5df2\u77e5\u5b83\u4ece<code>a.mjs</code>\u8f93\u5165\u4e86<code>foo</code>\u63a5\u53e3\uff0c\u8fd9\u65f6\u4e0d\u4f1a\u53bb\u6267\u884c<code>a.mjs</code>\uff0c\u800c\u662f\u8ba4\u4e3a\u8fd9\u4e2a\u63a5\u53e3\u5df2\u7ecf\u5b58\u5728\u4e86\uff0c\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u3002\u6267\u884c\u5230\u7b2c\u4e09\u884c<code>console.log(foo)</code>\u7684\u65f6\u5019\uff0c\u624d\u53d1\u73b0\u8fd9\u4e2a\u63a5\u53e3\u6839\u672c\u6ca1\u5b9a\u4e49\uff0c\u56e0\u6b64\u62a5\u9519\u3002</p> <p>\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u8ba9<code>b.mjs</code>\u8fd0\u884c\u7684\u65f6\u5019\uff0c<code>foo</code>\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5c06<code>foo</code>\u5199\u6210\u51fd\u6570\u6765\u89e3\u51b3\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar());\nfunction foo() { return 'foo' }\nexport {foo};\n\n// b.mjs\nimport {foo} from './a';\nconsole.log('b.mjs');\nconsole.log(foo());\nfunction bar() { return 'bar' }\nexport {bar};\n</code></pre> <p>\u8fd9\u65f6\u518d\u6267\u884c<code>a.mjs</code>\u5c31\u53ef\u4ee5\u5f97\u5230\u9884\u671f\u7ed3\u679c\u3002</p> <pre><code>$ node --experimental-modules a.mjs\nb.mjs\nfoo\na.mjs\nbar\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a\u51fd\u6570\u5177\u6709\u63d0\u5347\u4f5c\u7528\uff0c\u5728\u6267\u884c<code>import {bar} from './b'</code>\u65f6\uff0c\u51fd\u6570<code>foo</code>\u5c31\u5df2\u7ecf\u6709\u5b9a\u4e49\u4e86\uff0c\u6240\u4ee5<code>b.mjs</code>\u52a0\u8f7d\u7684\u65f6\u5019\u4e0d\u4f1a\u62a5\u9519\u3002\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u5982\u679c\u628a\u51fd\u6570<code>foo</code>\u6539\u5199\u6210\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u4e5f\u4f1a\u62a5\u9519\u3002</p> <pre><code>// a.mjs\nimport {bar} from './b';\nconsole.log('a.mjs');\nconsole.log(bar());\nconst foo = () =&gt; 'foo';\nexport {foo};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u7b2c\u56db\u884c\uff0c\u6539\u6210\u4e86\u51fd\u6570\u8868\u8fbe\u5f0f\uff0c\u5c31\u4e0d\u5177\u6709\u63d0\u5347\u4f5c\u7528\uff0c\u6267\u884c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u6211\u4eec\u518d\u6765\u770b ES6 \u6a21\u5757\u52a0\u8f7d\u5668SystemJS\u7ed9\u51fa\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// even.js\nimport { odd } from './odd'\nexport var counter = 0;\nexport function even(n) {\n  counter++;\n  return n === 0 || odd(n - 1);\n}\n\n// odd.js\nimport { even } from './even';\nexport function odd(n) {\n  return n !== 0 &amp;&amp; even(n - 1);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>even.js</code>\u91cc\u9762\u7684\u51fd\u6570<code>even</code>\u6709\u4e00\u4e2a\u53c2\u6570<code>n</code>\uff0c\u53ea\u8981\u4e0d\u7b49\u4e8e 0\uff0c\u5c31\u4f1a\u51cf\u53bb 1\uff0c\u4f20\u5165\u52a0\u8f7d\u7684<code>odd()</code>\u3002<code>odd.js</code>\u4e5f\u4f1a\u505a\u7c7b\u4f3c\u64cd\u4f5c\u3002</p> <p>\u8fd0\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\uff0c\u7ed3\u679c\u5982\u4e0b\u3002</p> <pre><code>$ babel-node\n&gt; import * as m from './even.js';\n&gt; m.even(10);\ntrue\n&gt; m.counter\n6\n&gt; m.even(20)\ntrue\n&gt; m.counter\n17\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53c2\u6570<code>n</code>\u4ece 10 \u53d8\u4e3a 0 \u7684\u8fc7\u7a0b\u4e2d\uff0c<code>even()</code>\u4e00\u5171\u4f1a\u6267\u884c 6 \u6b21\uff0c\u6240\u4ee5\u53d8\u91cf<code>counter</code>\u7b49\u4e8e 6\u3002\u7b2c\u4e8c\u6b21\u8c03\u7528<code>even()</code>\u65f6\uff0c\u53c2\u6570<code>n</code>\u4ece 20 \u53d8\u4e3a 0\uff0c<code>even()</code>\u4e00\u5171\u4f1a\u6267\u884c 11 \u6b21\uff0c\u52a0\u4e0a\u524d\u9762\u7684 6 \u6b21\uff0c\u6240\u4ee5\u53d8\u91cf<code>counter</code>\u7b49\u4e8e 17\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u8981\u662f\u6539\u5199\u6210 CommonJS\uff0c\u5c31\u6839\u672c\u65e0\u6cd5\u6267\u884c\uff0c\u4f1a\u62a5\u9519\u3002</p> <pre><code>// even.js\nvar odd = require('./odd');\nvar counter = 0;\nexports.counter = counter;\nexports.even = function (n) {\n  counter++;\n  return n == 0 || odd(n - 1);\n}\n\n// odd.js\nvar even = require('./even').even;\nmodule.exports = function (n) {\n  return n != 0 &amp;&amp; even(n - 1);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>even.js</code>\u52a0\u8f7d<code>odd.js</code>\uff0c\u800c<code>odd.js</code>\u53c8\u53bb\u52a0\u8f7d<code>even.js</code>\uff0c\u5f62\u6210\u201c\u5faa\u73af\u52a0\u8f7d\u201d\u3002\u8fd9\u65f6\uff0c\u6267\u884c\u5f15\u64ce\u5c31\u4f1a\u8f93\u51fa<code>even.js</code>\u5df2\u7ecf\u6267\u884c\u7684\u90e8\u5206\uff08\u4e0d\u5b58\u5728\u4efb\u4f55\u7ed3\u679c\uff09\uff0c\u6240\u4ee5\u5728<code>odd.js</code>\u4e4b\u4e2d\uff0c\u53d8\u91cf<code>even</code>\u7b49\u4e8e<code>undefined</code>\uff0c\u7b49\u5230\u540e\u9762\u8c03\u7528<code>even(n - 1)</code>\u5c31\u4f1a\u62a5\u9519\u3002</p> <pre><code>$ node\n&gt; var m = require('./even');\n&gt; m.even(10)\nTypeError: even is not a function\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/","title":"26-\u7f16\u7a0b\u98ce\u683c","text":"<p>\u672c\u7ae0\u63a2\u8ba8\u5982\u4f55\u5c06 ES6 \u7684\u65b0\u8bed\u6cd5\uff0c\u8fd0\u7528\u5230\u7f16\u7801\u5b9e\u8df5\u4e4b\u4e2d\uff0c\u4e0e\u4f20\u7edf\u7684 JavaScript \u8bed\u6cd5\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u5199\u51fa\u5408\u7406\u7684\u3001\u6613\u4e8e\u9605\u8bfb\u548c\u7ef4\u62a4\u7684\u4ee3\u7801\u3002</p> <p>\u591a\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u5df2\u7ecf\u516c\u5f00\u4e86\u5b83\u4eec\u7684\u98ce\u683c\u89c4\u8303\uff0c\u4e0b\u9762\u7684\u5185\u5bb9\u4e3b\u8981\u53c2\u8003\u4e86 Airbnb \u516c\u53f8\u7684 JavaScript \u98ce\u683c\u89c4\u8303\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_1","title":"\u5757\u7ea7\u4f5c\u7528\u57df","text":"<p>\uff081\uff09let \u53d6\u4ee3 var</p> <p>ES6 \u63d0\u51fa\u4e86\u4e24\u4e2a\u65b0\u7684\u58f0\u660e\u53d8\u91cf\u7684\u547d\u4ee4\uff1a<code>let</code>\u548c<code>const</code>\u3002\u5176\u4e2d\uff0c<code>let</code>\u5b8c\u5168\u53ef\u4ee5\u53d6\u4ee3<code>var</code>\uff0c\u56e0\u4e3a\u4e24\u8005\u8bed\u4e49\u76f8\u540c\uff0c\u800c\u4e14<code>let</code>\u6ca1\u6709\u526f\u4f5c\u7528\u3002</p> <pre><code>'use strict';\n\nif (true) {\n  let x = 'hello';\n}\n\nfor (let i = 0; i &lt; 10; i++) {\n  console.log(i);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5982\u679c\u7528<code>var</code>\u66ff\u4ee3<code>let</code>\uff0c\u5b9e\u9645\u4e0a\u5c31\u58f0\u660e\u4e86\u4e24\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u8fd9\u663e\u7136\u4e0d\u662f\u672c\u610f\u3002\u53d8\u91cf\u5e94\u8be5\u53ea\u5728\u5176\u58f0\u660e\u7684\u4ee3\u7801\u5757\u5185\u6709\u6548\uff0c<code>var</code>\u547d\u4ee4\u505a\u4e0d\u5230\u8fd9\u4e00\u70b9\u3002</p> <p><code>var</code>\u547d\u4ee4\u5b58\u5728\u53d8\u91cf\u63d0\u5347\u6548\u7528\uff0c<code>let</code>\u547d\u4ee4\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002</p> <pre><code>'use strict';\n\nif (true) {\n  console.log(x); // ReferenceError\n  let x = 'hello';\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5982\u679c\u4f7f\u7528<code>var</code>\u66ff\u4ee3<code>let</code>\uff0c<code>console.log</code>\u90a3\u4e00\u884c\u5c31\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u4f1a\u8f93\u51fa<code>undefined</code>\uff0c\u56e0\u4e3a\u53d8\u91cf\u58f0\u660e\u63d0\u5347\u5230\u4ee3\u7801\u5757\u7684\u5934\u90e8\u3002\u8fd9\u8fdd\u53cd\u4e86\u53d8\u91cf\u5148\u58f0\u660e\u540e\u4f7f\u7528\u7684\u539f\u5219\u3002</p> <p>\u6240\u4ee5\uff0c\u5efa\u8bae\u4e0d\u518d\u4f7f\u7528<code>var</code>\u547d\u4ee4\uff0c\u800c\u662f\u4f7f\u7528<code>let</code>\u547d\u4ee4\u53d6\u4ee3\u3002</p> <p>\uff082\uff09\u5168\u5c40\u5e38\u91cf\u548c\u7ebf\u7a0b\u5b89\u5168</p> <p>\u5728<code>let</code>\u548c<code>const</code>\u4e4b\u95f4\uff0c\u5efa\u8bae\u4f18\u5148\u4f7f\u7528<code>const</code>\uff0c\u5c24\u5176\u662f\u5728\u5168\u5c40\u73af\u5883\uff0c\u4e0d\u5e94\u8be5\u8bbe\u7f6e\u53d8\u91cf\uff0c\u53ea\u5e94\u8bbe\u7f6e\u5e38\u91cf\u3002</p> <p><code>const</code>\u4f18\u4e8e<code>let</code>\u6709\u51e0\u4e2a\u539f\u56e0\u3002\u4e00\u4e2a\u662f<code>const</code>\u53ef\u4ee5\u63d0\u9192\u9605\u8bfb\u7a0b\u5e8f\u7684\u4eba\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e0d\u5e94\u8be5\u6539\u53d8\uff1b\u53e6\u4e00\u4e2a\u662f<code>const</code>\u6bd4\u8f83\u7b26\u5408\u51fd\u6570\u5f0f\u7f16\u7a0b\u601d\u60f3\uff0c\u8fd0\u7b97\u4e0d\u6539\u53d8\u503c\uff0c\u53ea\u662f\u65b0\u5efa\u503c\uff0c\u800c\u4e14\u8fd9\u6837\u4e5f\u6709\u5229\u4e8e\u5c06\u6765\u7684\u5206\u5e03\u5f0f\u8fd0\u7b97\uff1b\u6700\u540e\u4e00\u4e2a\u539f\u56e0\u662f JavaScript \u7f16\u8bd1\u5668\u4f1a\u5bf9<code>const</code>\u8fdb\u884c\u4f18\u5316\uff0c\u6240\u4ee5\u591a\u4f7f\u7528<code>const</code>\uff0c\u6709\u5229\u4e8e\u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\uff0c\u4e5f\u5c31\u662f\u8bf4<code>let</code>\u548c<code>const</code>\u7684\u672c\u8d28\u533a\u522b\uff0c\u5176\u5b9e\u662f\u7f16\u8bd1\u5668\u5185\u90e8\u7684\u5904\u7406\u4e0d\u540c\u3002</p> <pre><code>// bad\nvar a = 1, b = 2, c = 3;\n\n// good\nconst a = 1;\nconst b = 2;\nconst c = 3;\n\n// best\nconst [a, b, c] = [1, 2, 3];\n</code></pre> <p><code>const</code>\u58f0\u660e\u5e38\u91cf\u8fd8\u6709\u4e24\u4e2a\u597d\u5904\uff0c\u4e00\u662f\u9605\u8bfb\u4ee3\u7801\u7684\u4eba\u7acb\u523b\u4f1a\u610f\u8bc6\u5230\u4e0d\u5e94\u8be5\u4fee\u6539\u8fd9\u4e2a\u503c\uff0c\u4e8c\u662f\u9632\u6b62\u4e86\u65e0\u610f\u95f4\u4fee\u6539\u53d8\u91cf\u503c\u6240\u5bfc\u81f4\u7684\u9519\u8bef\u3002</p> <p>\u6240\u6709\u7684\u51fd\u6570\u90fd\u5e94\u8be5\u8bbe\u7f6e\u4e3a\u5e38\u91cf\u3002</p> <p>\u957f\u8fdc\u6765\u770b\uff0cJavaScript \u53ef\u80fd\u4f1a\u6709\u591a\u7ebf\u7a0b\u7684\u5b9e\u73b0\uff08\u6bd4\u5982 Intel \u516c\u53f8\u7684 River Trail \u90a3\u4e00\u7c7b\u7684\u9879\u76ee\uff09\uff0c\u8fd9\u65f6<code>let</code>\u8868\u793a\u7684\u53d8\u91cf\uff0c\u53ea\u5e94\u51fa\u73b0\u5728\u5355\u7ebf\u7a0b\u8fd0\u884c\u7684\u4ee3\u7801\u4e2d\uff0c\u4e0d\u80fd\u662f\u591a\u7ebf\u7a0b\u5171\u4eab\u7684\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_2","title":"\u5b57\u7b26\u4e32","text":"<p>\u9759\u6001\u5b57\u7b26\u4e32\u4e00\u5f8b\u4f7f\u7528\u5355\u5f15\u53f7\u6216\u53cd\u5f15\u53f7\uff0c\u4e0d\u4f7f\u7528\u53cc\u5f15\u53f7\u3002\u52a8\u6001\u5b57\u7b26\u4e32\u4f7f\u7528\u53cd\u5f15\u53f7\u3002</p> <pre><code>// bad\nconst a = \"foobar\";\nconst b = 'foo' + a + 'bar';\n\n// acceptable\nconst c = `foobar`;\n\n// good\nconst a = 'foobar';\nconst b = `foo${a}bar`;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_3","title":"\u89e3\u6784\u8d4b\u503c","text":"<p>\u4f7f\u7528\u6570\u7ec4\u6210\u5458\u5bf9\u53d8\u91cf\u8d4b\u503c\u65f6\uff0c\u4f18\u5148\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>const arr = [1, 2, 3, 4];\n\n// bad\nconst first = arr[0];\nconst second = arr[1];\n\n// good\nconst [first, second] = arr;\n</code></pre> <p>\u51fd\u6570\u7684\u53c2\u6570\u5982\u679c\u662f\u5bf9\u8c61\u7684\u6210\u5458\uff0c\u4f18\u5148\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u3002</p> <pre><code>// bad\nfunction getFullName(user) {\n  const firstName = user.firstName;\n  const lastName = user.lastName;\n}\n\n// good\nfunction getFullName(obj) {\n  const { firstName, lastName } = obj;\n}\n\n// best\nfunction getFullName({ firstName, lastName }) {\n}\n</code></pre> <p>\u5982\u679c\u51fd\u6570\u8fd4\u56de\u591a\u4e2a\u503c\uff0c\u4f18\u5148\u4f7f\u7528\u5bf9\u8c61\u7684\u89e3\u6784\u8d4b\u503c\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\u7684\u89e3\u6784\u8d4b\u503c\u3002\u8fd9\u6837\u4fbf\u4e8e\u4ee5\u540e\u6dfb\u52a0\u8fd4\u56de\u503c\uff0c\u4ee5\u53ca\u66f4\u6539\u8fd4\u56de\u503c\u7684\u987a\u5e8f\u3002</p> <pre><code>// bad\nfunction processInput(input) {\n  return [left, right, top, bottom];\n}\n\n// good\nfunction processInput(input) {\n  return { left, right, top, bottom };\n}\n\nconst { left, right } = processInput(input);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_4","title":"\u5bf9\u8c61","text":"<p>\u5355\u884c\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c\u6700\u540e\u4e00\u4e2a\u6210\u5458\u4e0d\u4ee5\u9017\u53f7\u7ed3\u5c3e\u3002\u591a\u884c\u5b9a\u4e49\u7684\u5bf9\u8c61\uff0c\u6700\u540e\u4e00\u4e2a\u6210\u5458\u4ee5\u9017\u53f7\u7ed3\u5c3e\u3002</p> <pre><code>// bad\nconst a = { k1: v1, k2: v2, };\nconst b = {\n  k1: v1,\n  k2: v2\n};\n\n// good\nconst a = { k1: v1, k2: v2 };\nconst b = {\n  k1: v1,\n  k2: v2,\n};\n</code></pre> <p>\u5bf9\u8c61\u5c3d\u91cf\u9759\u6001\u5316\uff0c\u4e00\u65e6\u5b9a\u4e49\uff0c\u5c31\u4e0d\u5f97\u968f\u610f\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\u3002\u5982\u679c\u6dfb\u52a0\u5c5e\u6027\u4e0d\u53ef\u907f\u514d\uff0c\u8981\u4f7f\u7528<code>Object.assign</code>\u65b9\u6cd5\u3002</p> <pre><code>// bad\nconst a = {};\na.x = 3;\n\n// if reshape unavoidable\nconst a = {};\nObject.assign(a, { x: 3 });\n\n// good\nconst a = { x: null };\na.x = 3;\n</code></pre> <p>\u5982\u679c\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u662f\u52a8\u6001\u7684\uff0c\u53ef\u4ee5\u5728\u521b\u9020\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u5c5e\u6027\u8868\u8fbe\u5f0f\u5b9a\u4e49\u3002</p> <pre><code>// bad\nconst obj = {\n  id: 5,\n  name: 'San Francisco',\n};\nobj[getKey('enabled')] = true;\n\n// good\nconst obj = {\n  id: 5,\n  name: 'San Francisco',\n  [getKey('enabled')]: true,\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5bf9\u8c61<code>obj</code>\u7684\u6700\u540e\u4e00\u4e2a\u5c5e\u6027\u540d\uff0c\u9700\u8981\u8ba1\u7b97\u5f97\u5230\u3002\u8fd9\u65f6\u6700\u597d\u91c7\u7528\u5c5e\u6027\u8868\u8fbe\u5f0f\uff0c\u5728\u65b0\u5efa<code>obj</code>\u7684\u65f6\u5019\uff0c\u5c06\u8be5\u5c5e\u6027\u4e0e\u5176\u4ed6\u5c5e\u6027\u5b9a\u4e49\u5728\u4e00\u8d77\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u6240\u6709\u5c5e\u6027\u5c31\u5728\u4e00\u4e2a\u5730\u65b9\u5b9a\u4e49\u4e86\u3002</p> <p>\u53e6\u5916\uff0c\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5c3d\u91cf\u91c7\u7528\u7b80\u6d01\u8868\u8fbe\u6cd5\uff0c\u8fd9\u6837\u6613\u4e8e\u63cf\u8ff0\u548c\u4e66\u5199\u3002</p> <pre><code>var ref = 'some value';\n\n// bad\nconst atom = {\n  ref: ref,\n\n  value: 1,\n\n  addValue: function (value) {\n    return atom.value + value;\n  },\n};\n\n// good\nconst atom = {\n  ref,\n\n  value: 1,\n\n  addValue(value) {\n    return atom.value + value;\n  },\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_5","title":"\u6570\u7ec4","text":"<p>\u4f7f\u7528\u6269\u5c55\u8fd0\u7b97\u7b26\uff08...\uff09\u62f7\u8d1d\u6570\u7ec4\u3002</p> <pre><code>// bad\nconst len = items.length;\nconst itemsCopy = [];\nlet i;\n\nfor (i = 0; i &lt; len; i++) {\n  itemsCopy[i] = items[i];\n}\n\n// good\nconst itemsCopy = [...items];\n</code></pre> <p>\u4f7f\u7528 Array.from \u65b9\u6cd5\uff0c\u5c06\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u8f6c\u4e3a\u6570\u7ec4\u3002</p> <pre><code>const foo = document.querySelectorAll('.foo');\nconst nodes = Array.from(foo);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_6","title":"\u51fd\u6570","text":"<p>\u7acb\u5373\u6267\u884c\u51fd\u6570\u53ef\u4ee5\u5199\u6210\u7bad\u5934\u51fd\u6570\u7684\u5f62\u5f0f\u3002</p> <pre><code>(() =&gt; {\n  console.log('Welcome to the Internet.');\n})();\n</code></pre> <p>\u90a3\u4e9b\u4f7f\u7528\u533f\u540d\u51fd\u6570\u5f53\u4f5c\u53c2\u6570\u7684\u573a\u5408\uff0c\u5c3d\u91cf\u7528\u7bad\u5934\u51fd\u6570\u4ee3\u66ff\u3002\u56e0\u4e3a\u8fd9\u6837\u66f4\u7b80\u6d01\uff0c\u800c\u4e14\u7ed1\u5b9a\u4e86 this\u3002</p> <pre><code>// bad\n[1, 2, 3].map(function (x) {\n  return x * x;\n});\n\n// good\n[1, 2, 3].map((x) =&gt; {\n  return x * x;\n});\n\n// best\n[1, 2, 3].map(x =&gt; x * x);\n</code></pre> <p>\u7bad\u5934\u51fd\u6570\u53d6\u4ee3<code>Function.prototype.bind</code>\uff0c\u4e0d\u5e94\u518d\u7528 self/_this/that \u7ed1\u5b9a this\u3002</p> <pre><code>// bad\nconst self = this;\nconst boundMethod = function(...params) {\n  return method.apply(self, params);\n}\n\n// acceptable\nconst boundMethod = method.bind(this);\n\n// best\nconst boundMethod = (...params) =&gt; method.apply(this, params);\n</code></pre> <p>\u7b80\u5355\u7684\u3001\u5355\u884c\u7684\u3001\u4e0d\u4f1a\u590d\u7528\u7684\u51fd\u6570\uff0c\u5efa\u8bae\u91c7\u7528\u7bad\u5934\u51fd\u6570\u3002\u5982\u679c\u51fd\u6570\u4f53\u8f83\u4e3a\u590d\u6742\uff0c\u884c\u6570\u8f83\u591a\uff0c\u8fd8\u662f\u5e94\u8be5\u91c7\u7528\u4f20\u7edf\u7684\u51fd\u6570\u5199\u6cd5\u3002</p> <p>\u6240\u6709\u914d\u7f6e\u9879\u90fd\u5e94\u8be5\u96c6\u4e2d\u5728\u4e00\u4e2a\u5bf9\u8c61\uff0c\u653e\u5728\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u5e03\u5c14\u503c\u6700\u597d\u4e0d\u8981\u76f4\u63a5\u4f5c\u4e3a\u53c2\u6570\uff0c\u56e0\u4e3a\u4ee3\u7801\u8bed\u4e49\u4f1a\u5f88\u5dee\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5c06\u6765\u589e\u52a0\u5176\u4ed6\u914d\u7f6e\u9879\u3002</p> <pre><code>// bad\nfunction divide(a, b, option = false ) {\n}\n\n// good\nfunction divide(a, b, { option = false } = {}) {\n}\n</code></pre> <p>\u4e0d\u8981\u5728\u51fd\u6570\u4f53\u5185\u4f7f\u7528 arguments \u53d8\u91cf\uff0c\u4f7f\u7528 rest \u8fd0\u7b97\u7b26\uff08...\uff09\u4ee3\u66ff\u3002\u56e0\u4e3a rest \u8fd0\u7b97\u7b26\u663e\u5f0f\u8868\u660e\u4f60\u60f3\u8981\u83b7\u53d6\u53c2\u6570\uff0c\u800c\u4e14 arguments \u662f\u4e00\u4e2a\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\uff0c\u800c rest \u8fd0\u7b97\u7b26\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u771f\u6b63\u7684\u6570\u7ec4\u3002</p> <pre><code>// bad\nfunction concatenateAll() {\n  const args = Array.prototype.slice.call(arguments);\n  return args.join('');\n}\n\n// good\nfunction concatenateAll(...args) {\n  return args.join('');\n}\n</code></pre> <p>\u4f7f\u7528\u9ed8\u8ba4\u503c\u8bed\u6cd5\u8bbe\u7f6e\u51fd\u6570\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u3002</p> <pre><code>// bad\nfunction handleThings(opts) {\n  opts = opts || {};\n}\n\n// good\nfunction handleThings(opts = {}) {\n  // ...\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#map","title":"Map \u7ed3\u6784","text":"<p>\u6ce8\u610f\u533a\u5206 Object \u548c Map\uff0c\u53ea\u6709\u6a21\u62df\u73b0\u5b9e\u4e16\u754c\u7684\u5b9e\u4f53\u5bf9\u8c61\u65f6\uff0c\u624d\u4f7f\u7528 Object\u3002\u5982\u679c\u53ea\u662f\u9700\u8981<code>key: value</code>\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f7f\u7528 Map \u7ed3\u6784\u3002\u56e0\u4e3a Map \u6709\u5185\u5efa\u7684\u904d\u5386\u673a\u5236\u3002</p> <pre><code>let map = new Map(arr);\n\nfor (let key of map.keys()) {\n  console.log(key);\n}\n\nfor (let value of map.values()) {\n  console.log(value);\n}\n\nfor (let item of map.entries()) {\n  console.log(item[0], item[1]);\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#class","title":"Class","text":"<p>\u603b\u662f\u7528 Class\uff0c\u53d6\u4ee3\u9700\u8981 prototype \u7684\u64cd\u4f5c\u3002\u56e0\u4e3a Class \u7684\u5199\u6cd5\u66f4\u7b80\u6d01\uff0c\u66f4\u6613\u4e8e\u7406\u89e3\u3002</p> <pre><code>// bad\nfunction Queue(contents = []) {\n  this._queue = [...contents];\n}\nQueue.prototype.pop = function() {\n  const value = this._queue[0];\n  this._queue.splice(0, 1);\n  return value;\n}\n\n// good\nclass Queue {\n  constructor(contents = []) {\n    this._queue = [...contents];\n  }\n  pop() {\n    const value = this._queue[0];\n    this._queue.splice(0, 1);\n    return value;\n  }\n}\n</code></pre> <p>\u4f7f\u7528<code>extends</code>\u5b9e\u73b0\u7ee7\u627f\uff0c\u56e0\u4e3a\u8fd9\u6837\u66f4\u7b80\u5355\uff0c\u4e0d\u4f1a\u6709\u7834\u574f<code>instanceof</code>\u8fd0\u7b97\u7684\u5371\u9669\u3002</p> <pre><code>// bad\nconst inherits = require('inherits');\nfunction PeekableQueue(contents) {\n  Queue.apply(this, contents);\n}\ninherits(PeekableQueue, Queue);\nPeekableQueue.prototype.peek = function() {\n  return this._queue[0];\n}\n\n// good\nclass PeekableQueue extends Queue {\n  peek() {\n    return this._queue[0];\n  }\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#_7","title":"\u6a21\u5757","text":"<p>ES6 \u6a21\u5757\u8bed\u6cd5\u662f JavaScript \u6a21\u5757\u7684\u6807\u51c6\u5199\u6cd5\uff0c\u575a\u6301\u4f7f\u7528\u8fd9\u79cd\u5199\u6cd5\uff0c\u53d6\u4ee3 Node.js \u7684 CommonJS \u8bed\u6cd5\u3002</p> <p>\u9996\u5148\uff0c\u4f7f\u7528<code>import</code>\u53d6\u4ee3<code>require()</code>\u3002</p> <pre><code>// CommonJS \u7684\u5199\u6cd5\nconst moduleA = require('moduleA');\nconst func1 = moduleA.func1;\nconst func2 = moduleA.func2;\n\n// ES6 \u7684\u5199\u6cd5\nimport { func1, func2 } from 'moduleA';\n</code></pre> <p>\u5176\u6b21\uff0c\u4f7f\u7528<code>export</code>\u53d6\u4ee3<code>module.exports</code>\u3002</p> <pre><code>// commonJS \u7684\u5199\u6cd5\nvar React = require('react');\n\nvar Breadcrumbs = React.createClass({\n  render() {\n    return &lt;nav /&gt;;\n  }\n});\n\nmodule.exports = Breadcrumbs;\n\n// ES6 \u7684\u5199\u6cd5\nimport React from 'react';\n\nclass Breadcrumbs extends React.Component {\n  render() {\n    return &lt;nav /&gt;;\n  }\n};\n\nexport default Breadcrumbs;\n</code></pre> <p>\u5982\u679c\u6a21\u5757\u53ea\u6709\u4e00\u4e2a\u8f93\u51fa\u503c\uff0c\u5c31\u4f7f\u7528<code>export default</code>\uff0c\u5982\u679c\u6a21\u5757\u6709\u591a\u4e2a\u8f93\u51fa\u503c\uff0c\u9664\u975e\u5176\u4e2d\u67d0\u4e2a\u8f93\u51fa\u503c\u7279\u522b\u91cd\u8981\uff0c\u5426\u5219\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528<code>export default</code>\uff0c\u5373\u591a\u4e2a\u8f93\u51fa\u503c\u5982\u679c\u662f\u5e73\u7b49\u5173\u7cfb\uff0c<code>export default</code>\u4e0e\u666e\u901a\u7684<code>export</code>\u5c31\u4e0d\u8981\u540c\u65f6\u4f7f\u7528\u3002</p> <p>\u5982\u679c\u6a21\u5757\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a\u51fd\u6570\uff0c\u51fd\u6570\u540d\u7684\u9996\u5b57\u6bcd\u5e94\u8be5\u5c0f\u5199\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u5de5\u5177\u65b9\u6cd5\u3002</p> <pre><code>function makeStyleGuide() {\n}\n\nexport default makeStyleGuide;\n</code></pre> <p>\u5982\u679c\u6a21\u5757\u9ed8\u8ba4\u8f93\u51fa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5bf9\u8c61\u540d\u7684\u9996\u5b57\u6bcd\u5e94\u8be5\u5927\u5199\uff0c\u8868\u793a\u8fd9\u662f\u4e00\u4e2a\u914d\u7f6e\u503c\u5bf9\u8c61\u3002</p> <pre><code>const StyleGuide = {\n  es6: {\n  }\n};\n\nexport default StyleGuide;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/26-style/#eslint","title":"ESLint \u7684\u4f7f\u7528","text":"<p>ESLint \u662f\u4e00\u4e2a\u8bed\u6cd5\u89c4\u5219\u548c\u4ee3\u7801\u98ce\u683c\u7684\u68c0\u67e5\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u6765\u4fdd\u8bc1\u5199\u51fa\u8bed\u6cd5\u6b63\u786e\u3001\u98ce\u683c\u7edf\u4e00\u7684\u4ee3\u7801\u3002</p> <p>\u9996\u5148\uff0c\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u5b89\u88c5 ESLint\u3002</p> <pre><code>$ npm install --save-dev eslint\n</code></pre> <p>\u7136\u540e\uff0c\u5b89\u88c5 Airbnb \u8bed\u6cd5\u89c4\u5219\uff0c\u4ee5\u53ca import\u3001a11y\u3001react \u63d2\u4ef6\u3002</p> <pre><code>$ npm install --save-dev eslint-config-airbnb\n$ npm install --save-dev eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react\n</code></pre> <p>\u6700\u540e\uff0c\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a<code>.eslintrc</code>\u6587\u4ef6\uff0c\u914d\u7f6e ESLint\u3002</p> <pre><code>{\n  \"extends\": \"eslint-config-airbnb\"\n}\n</code></pre> <p>\u73b0\u5728\u5c31\u53ef\u4ee5\u68c0\u67e5\uff0c\u5f53\u524d\u9879\u76ee\u7684\u4ee3\u7801\u662f\u5426\u7b26\u5408\u9884\u8bbe\u7684\u89c4\u5219\u3002</p> <p><code>index.js</code>\u6587\u4ef6\u7684\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>var unused = 'I have no purpose!';\n\nfunction greet() {\n    var message = 'Hello, World!';\n    console.log(message);\n}\n\ngreet();\n</code></pre> <p>\u4f7f\u7528 ESLint \u68c0\u67e5\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5c31\u4f1a\u62a5\u51fa\u9519\u8bef\u3002</p> <pre><code>$ npx eslint index.js\nindex.js\n  1:1  error  Unexpected var, use let or const instead          no-var\n  1:5  error  unused is defined but never used                 no-unused-vars\n  4:5  error  Expected indentation of 2 characters but found 4  indent\n  4:5  error  Unexpected var, use let or const instead          no-var\n  5:5  error  Expected indentation of 2 characters but found 4  indent\n\n\u2716 5 problems (5 errors, 0 warnings)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u539f\u6587\u4ef6\u6709\u4e94\u4e2a\u9519\u8bef\uff0c\u5176\u4e2d\u4e24\u4e2a\u662f\u4e0d\u5e94\u8be5\u4f7f\u7528<code>var</code>\u547d\u4ee4\uff0c\u800c\u8981\u4f7f\u7528<code>let</code>\u6216<code>const</code>\uff1b\u4e00\u4e2a\u662f\u5b9a\u4e49\u4e86\u53d8\u91cf\uff0c\u5374\u6ca1\u6709\u4f7f\u7528\uff1b\u53e6\u5916\u4e24\u4e2a\u662f\u884c\u9996\u7f29\u8fdb\u4e3a 4 \u4e2a\u7a7a\u683c\uff0c\u800c\u4e0d\u662f\u89c4\u5b9a\u7684 2 \u4e2a\u7a7a\u683c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/","title":"27-\u8bfb\u61c2 ECMAScript \u89c4\u683c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_1","title":"\u6982\u8ff0","text":"<p>\u89c4\u683c\u6587\u4ef6\u662f\u8ba1\u7b97\u673a\u8bed\u8a00\u7684\u5b98\u65b9\u6807\u51c6\uff0c\u8be6\u7ec6\u63cf\u8ff0\u8bed\u6cd5\u89c4\u5219\u548c\u5b9e\u73b0\u65b9\u6cd5\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u6ca1\u6709\u5fc5\u8981\u9605\u8bfb\u89c4\u683c\uff0c\u9664\u975e\u4f60\u8981\u5199\u7f16\u8bd1\u5668\u3002\u56e0\u4e3a\u89c4\u683c\u5199\u5f97\u975e\u5e38\u62bd\u8c61\u548c\u7cbe\u70bc\uff0c\u53c8\u7f3a\u4e4f\u5b9e\u4f8b\uff0c\u4e0d\u5bb9\u6613\u7406\u89e3\uff0c\u800c\u4e14\u5bf9\u4e8e\u89e3\u51b3\u5b9e\u9645\u7684\u5e94\u7528\u95ee\u9898\uff0c\u5e2e\u52a9\u4e0d\u5927\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u9047\u5230\u7591\u96be\u7684\u8bed\u6cd5\u95ee\u9898\uff0c\u5b9e\u5728\u627e\u4e0d\u5230\u7b54\u6848\uff0c\u8fd9\u65f6\u53ef\u4ee5\u53bb\u67e5\u770b\u89c4\u683c\u6587\u4ef6\uff0c\u4e86\u89e3\u8bed\u8a00\u6807\u51c6\u662f\u600e\u4e48\u8bf4\u7684\u3002\u89c4\u683c\u662f\u89e3\u51b3\u95ee\u9898\u7684\u201c\u6700\u540e\u4e00\u62db\u201d\u3002</p> <p>\u8fd9\u5bf9 JavaScript \u8bed\u8a00\u5f88\u6709\u5fc5\u8981\u3002\u56e0\u4e3a\u5b83\u7684\u4f7f\u7528\u573a\u666f\u590d\u6742\uff0c\u8bed\u6cd5\u89c4\u5219\u4e0d\u7edf\u4e00\uff0c\u4f8b\u5916\u5f88\u591a\uff0c\u5404\u79cd\u8fd0\u884c\u73af\u5883\u7684\u884c\u4e3a\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u5947\u602a\u7684\u8bed\u6cd5\u95ee\u9898\u5c42\u51fa\u4e0d\u7a77\uff0c\u4efb\u4f55\u8bed\u6cd5\u4e66\u90fd\u4e0d\u53ef\u80fd\u56ca\u62ec\u6240\u6709\u60c5\u51b5\u3002\u67e5\u770b\u89c4\u683c\uff0c\u4e0d\u5931\u4e3a\u4e00\u79cd\u89e3\u51b3\u8bed\u6cd5\u95ee\u9898\u7684\u6700\u53ef\u9760\u3001\u6700\u6743\u5a01\u7684\u7ec8\u6781\u65b9\u6cd5\u3002</p> <p>\u672c\u7ae0\u4ecb\u7ecd\u5982\u4f55\u8bfb\u61c2 ECMAScript 6 \u7684\u89c4\u683c\u6587\u4ef6\u3002</p> <p>ECMAScript 6 \u7684\u89c4\u683c\uff0c\u53ef\u4ee5\u5728 ECMA \u56fd\u9645\u6807\u51c6\u7ec4\u7ec7\u7684\u5b98\u65b9\u7f51\u7ad9\uff08www.ecma-international.org/ecma-262/6.0/\uff09\u514d\u8d39\u4e0b\u8f7d\u548c\u5728\u7ebf\u9605\u8bfb\u3002</p> <p>\u8fd9\u4e2a\u89c4\u683c\u6587\u4ef6\u76f8\u5f53\u5e9e\u5927\uff0c\u4e00\u5171\u6709 26 \u7ae0\uff0cA4 \u6253\u5370\u7684\u8bdd\uff0c\u8db3\u8db3\u6709 545 \u9875\u3002\u5b83\u7684\u7279\u70b9\u5c31\u662f\u89c4\u5b9a\u5f97\u975e\u5e38\u7ec6\u81f4\uff0c\u6bcf\u4e00\u4e2a\u8bed\u6cd5\u884c\u4e3a\u3001\u6bcf\u4e00\u4e2a\u51fd\u6570\u7684\u5b9e\u73b0\u90fd\u505a\u4e86\u8be6\u5c3d\u7684\u6e05\u6670\u7684\u63cf\u8ff0\u3002\u57fa\u672c\u4e0a\uff0c\u7f16\u8bd1\u5668\u4f5c\u8005\u53ea\u8981\u628a\u6bcf\u4e00\u6b65\u7ffb\u8bd1\u6210\u4ee3\u7801\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u5f88\u5927\u7a0b\u5ea6\u4e0a\uff0c\u4fdd\u8bc1\u4e86\u6240\u6709 ES6 \u5b9e\u73b0\u90fd\u6709\u4e00\u81f4\u7684\u884c\u4e3a\u3002</p> <p>ECMAScript 6 \u89c4\u683c\u7684 26 \u7ae0\u4e4b\u4e2d\uff0c\u7b2c 1 \u7ae0\u5230\u7b2c 3 \u7ae0\u662f\u5bf9\u6587\u4ef6\u672c\u8eab\u7684\u4ecb\u7ecd\uff0c\u4e0e\u8bed\u8a00\u5173\u7cfb\u4e0d\u5927\u3002\u7b2c 4 \u7ae0\u662f\u5bf9\u8fd9\u95e8\u8bed\u8a00\u603b\u4f53\u8bbe\u8ba1\u7684\u63cf\u8ff0\uff0c\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u8bfb\u4e00\u4e0b\u3002\u7b2c 5 \u7ae0\u5230\u7b2c 8 \u7ae0\u662f\u8bed\u8a00\u5b8f\u89c2\u5c42\u9762\u7684\u63cf\u8ff0\u3002\u7b2c 5 \u7ae0\u662f\u89c4\u683c\u7684\u540d\u8bcd\u89e3\u91ca\u548c\u5199\u6cd5\u7684\u4ecb\u7ecd\uff0c\u7b2c 6 \u7ae0\u4ecb\u7ecd\u6570\u636e\u7c7b\u578b\uff0c\u7b2c 7 \u7ae0\u4ecb\u7ecd\u8bed\u8a00\u5185\u90e8\u7528\u5230\u7684\u62bd\u8c61\u64cd\u4f5c\uff0c\u7b2c 8 \u7ae0\u4ecb\u7ecd\u4ee3\u7801\u5982\u4f55\u8fd0\u884c\u3002\u7b2c 9 \u7ae0\u5230\u7b2c 26 \u7ae0\u4ecb\u7ecd\u5177\u4f53\u7684\u8bed\u6cd5\u3002</p> <p>\u5bf9\u4e8e\u4e00\u822c\u7528\u6237\u6765\u8bf4\uff0c\u9664\u4e86\u7b2c 4 \u7ae0\uff0c\u5176\u4ed6\u7ae0\u8282\u90fd\u6d89\u53ca\u67d0\u4e00\u65b9\u9762\u7684\u7ec6\u8282\uff0c\u4e0d\u7528\u901a\u8bfb\uff0c\u53ea\u8981\u5728\u7528\u5230\u7684\u65f6\u5019\uff0c\u67e5\u9605\u76f8\u5173\u7ae0\u8282\u5373\u53ef\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_2","title":"\u672f\u8bed","text":"<p>ES6 \u89c4\u683c\u4f7f\u7528\u4e86\u4e00\u4e9b\u4e13\u95e8\u7684\u672f\u8bed\uff0c\u4e86\u89e3\u8fd9\u4e9b\u672f\u8bed\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u8bfb\u61c2\u89c4\u683c\u3002\u672c\u8282\u4ecb\u7ecd\u5176\u4e2d\u7684\u51e0\u4e2a\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_3","title":"\u62bd\u8c61\u64cd\u4f5c","text":"<p>\u6240\u8c13\u201c\u62bd\u8c61\u64cd\u4f5c\u201d\uff08abstract operations\uff09\u5c31\u662f\u5f15\u64ce\u7684\u4e00\u4e9b\u5185\u90e8\u65b9\u6cd5\uff0c\u5916\u90e8\u4e0d\u80fd\u8c03\u7528\u3002\u89c4\u683c\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u62bd\u8c61\u64cd\u4f5c\uff0c\u89c4\u5b9a\u4e86\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u7559\u7ed9\u5404\u79cd\u5f15\u64ce\u81ea\u5df1\u53bb\u5b9e\u73b0\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c<code>Boolean(value)</code>\u7684\u7b97\u6cd5\uff0c\u7b2c\u4e00\u6b65\u662f\u8fd9\u6837\u7684\u3002</p> <ol> <li>Let <code>b</code> be <code>ToBoolean(value)</code>.</li> </ol> <p>\u8fd9\u91cc\u7684<code>ToBoolean</code>\u5c31\u662f\u4e00\u4e2a\u62bd\u8c61\u64cd\u4f5c\uff0c\u662f\u5f15\u64ce\u5185\u90e8\u6c42\u51fa\u5e03\u5c14\u503c\u7684\u7b97\u6cd5\u3002</p> <p>\u8bb8\u591a\u51fd\u6570\u7684\u7b97\u6cd5\u90fd\u4f1a\u591a\u6b21\u7528\u5230\u540c\u6837\u7684\u6b65\u9aa4\uff0c\u6240\u4ee5 ES6 \u89c4\u683c\u5c06\u5b83\u4eec\u62bd\u51fa\u6765\uff0c\u5b9a\u4e49\u6210\u201c\u62bd\u8c61\u64cd\u4f5c\u201d\uff0c\u65b9\u4fbf\u63cf\u8ff0\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#record-field","title":"Record \u548c field","text":"<p>ES6 \u89c4\u683c\u5c06\u952e\u503c\u5bf9\uff08key-value map\uff09\u7684\u6570\u636e\u7ed3\u6784\u79f0\u4e3a Record\uff0c\u5176\u4e2d\u7684\u6bcf\u4e00\u7ec4\u952e\u503c\u5bf9\u79f0\u4e3a field\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a Record \u7531\u591a\u4e2a field \u7ec4\u6210\uff0c\u800c\u6bcf\u4e2a field \u90fd\u5305\u542b\u4e00\u4e2a\u952e\u540d\uff08key\uff09\u548c\u4e00\u4e2a\u952e\u503c\uff08value\uff09\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#notation","title":"[[Notation]]","text":"<p>ES6 \u89c4\u683c\u5927\u91cf\u4f7f\u7528<code>[[Notation]]</code>\u8fd9\u79cd\u4e66\u5199\u6cd5\uff0c\u6bd4\u5982<code>[[Value]]</code>\u3001<code>[[Writable]]</code>\u3001<code>[[Get]]</code>\u3001<code>[[Set]]</code>\u7b49\u7b49\u3002\u5b83\u7528\u6765\u6307\u4ee3 field \u7684\u952e\u540d\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c<code>obj</code>\u662f\u4e00\u4e2a Record\uff0c\u5b83\u6709\u4e00\u4e2a<code>Prototype</code>\u5c5e\u6027\u3002ES6 \u89c4\u683c\u4e0d\u4f1a\u5199<code>obj.Prototype</code>\uff0c\u800c\u662f\u5199<code>obj.[[Prototype]]</code>\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4f7f\u7528<code>[[Notation]]</code>\u8fd9\u79cd\u4e66\u5199\u6cd5\u7684\u5c5e\u6027\uff0c\u90fd\u662f\u5bf9\u8c61\u7684\u5185\u90e8\u5c5e\u6027\u3002</p> <p>\u6240\u6709\u7684 JavaScript \u51fd\u6570\u90fd\u6709\u4e00\u4e2a\u5185\u90e8\u5c5e\u6027<code>[[Call]]</code>\uff0c\u7528\u6765\u8fd0\u884c\u8be5\u51fd\u6570\u3002</p> <pre><code>F.[[Call]](V, argumentsList)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>F</code>\u662f\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\uff0c<code>[[Call]]</code>\u662f\u5b83\u7684\u5185\u90e8\u65b9\u6cd5\uff0c<code>F.[[call]]()</code>\u8868\u793a\u8fd0\u884c\u8be5\u51fd\u6570\uff0c<code>V</code>\u8868\u793a<code>[[Call]]</code>\u8fd0\u884c\u65f6<code>this</code>\u7684\u503c\uff0c<code>argumentsList</code>\u5219\u662f\u8c03\u7528\u65f6\u4f20\u5165\u51fd\u6570\u7684\u53c2\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#completion-record","title":"Completion Record","text":"<p>\u6bcf\u4e00\u4e2a\u8bed\u53e5\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a Completion Record\uff0c\u8868\u793a\u8fd0\u884c\u7ed3\u679c\u3002\u6bcf\u4e2a Completion Record \u6709\u4e00\u4e2a<code>[[Type]]</code>\u5c5e\u6027\uff0c\u8868\u793a\u8fd0\u884c\u7ed3\u679c\u7684\u7c7b\u578b\u3002</p> <p><code>[[Type]]</code>\u5c5e\u6027\u6709\u4e94\u79cd\u53ef\u80fd\u7684\u503c\u3002</p> <ul> <li>normal</li> <li>return</li> <li>throw</li> <li>break</li> <li>continue</li> </ul> <p>\u5982\u679c<code>[[Type]]</code>\u7684\u503c\u662f<code>normal</code>\uff0c\u5c31\u79f0\u4e3a normal completion\uff0c\u8868\u793a\u8fd0\u884c\u6b63\u5e38\u3002\u5176\u4ed6\u7684\u503c\uff0c\u90fd\u79f0\u4e3a abrupt completion\u3002\u5176\u4e2d\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5173\u6ce8<code>[[Type]]</code>\u4e3a<code>throw</code>\u7684\u60c5\u51b5\uff0c\u5373\u8fd0\u884c\u51fa\u9519\uff1b<code>break</code>\u3001<code>continue</code>\u3001<code>return</code>\u8fd9\u4e09\u4e2a\u503c\u90fd\u53ea\u51fa\u73b0\u5728\u7279\u5b9a\u573a\u666f\uff0c\u53ef\u4ee5\u4e0d\u7528\u8003\u8651\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_4","title":"\u62bd\u8c61\u64cd\u4f5c\u7684\u6807\u51c6\u6d41\u7a0b","text":"<p>\u62bd\u8c61\u64cd\u4f5c\u7684\u8fd0\u884c\u6d41\u7a0b\uff0c\u4e00\u822c\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <ol> <li>Let <code>result</code> be <code>AbstractOp()</code>.</li> <li>If <code>result</code> is an abrupt completion, return <code>result</code>.</li> <li>Set <code>result</code> to <code>result.[[Value]]</code>.</li> <li>return <code>result</code>.</li> </ol> <p>\u4e0a\u9762\u7684\u7b2c\u4e00\u6b65\u8c03\u7528\u4e86\u62bd\u8c61\u64cd\u4f5c<code>AbstractOp()</code>\uff0c\u5f97\u5230<code>result</code>\uff0c\u8fd9\u662f\u4e00\u4e2a Completion Record\u3002\u7b2c\u4e8c\u6b65\uff0c\u5982\u679c<code>result</code>\u5c5e\u4e8e abrupt completion\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u3002\u5982\u679c\u6b64\u5904\u6ca1\u6709\u8fd4\u56de\uff0c\u8868\u793a<code>result</code>\u5c5e\u4e8e normal completion\u3002\u7b2c\u4e09\u6b65\uff0c\u5c06<code>result</code>\u7684\u503c\u8bbe\u7f6e\u4e3a<code>resultCompletionRecord.[[Value]]</code>\u3002\u7b2c\u56db\u6b65\uff0c\u8fd4\u56de<code>result</code>\u3002</p> <p>ES6 \u89c4\u683c\u5c06\u8fd9\u4e2a\u6807\u51c6\u6d41\u7a0b\uff0c\u4f7f\u7528\u7b80\u5199\u7684\u65b9\u5f0f\u8868\u8fbe\u3002</p> <ol> <li>Let <code>result</code> be <code>AbstractOp()</code>.</li> <li><code>ReturnIfAbrupt(result)</code>.</li> <li>return <code>result</code>.</li> </ol> <p>\u8fd9\u4e2a\u7b80\u5199\u65b9\u5f0f\u91cc\u9762\u7684<code>ReturnIfAbrupt(result)</code>\uff0c\u5c31\u4ee3\u8868\u4e86\u4e0a\u9762\u7684\u7b2c\u4e8c\u6b65\u548c\u7b2c\u4e09\u6b65\uff0c\u5373\u5982\u679c\u6709\u62a5\u9519\uff0c\u5c31\u8fd4\u56de\u9519\u8bef\uff0c\u5426\u5219\u53d6\u51fa\u503c\u3002</p> <p>\u751a\u81f3\u8fd8\u6709\u8fdb\u4e00\u6b65\u7684\u7b80\u5199\u683c\u5f0f\u3002</p> <ol> <li>Let <code>result</code> be <code>? AbstractOp()</code>.</li> <li>return <code>result</code>.</li> </ol> <p>\u4e0a\u9762\u6d41\u7a0b\u7684<code>?</code>\uff0c\u5c31\u4ee3\u8868<code>AbstractOp()</code>\u53ef\u80fd\u4f1a\u62a5\u9519\u3002\u4e00\u65e6\u62a5\u9519\uff0c\u5c31\u8fd4\u56de\u9519\u8bef\uff0c\u5426\u5219\u53d6\u51fa\u503c\u3002</p> <p>\u9664\u4e86<code>?</code>\uff0cES 6 \u89c4\u683c\u8fd8\u4f7f\u7528\u53e6\u4e00\u4e2a\u7b80\u5199\u7b26\u53f7<code>!</code>\u3002</p> <ol> <li>Let <code>result</code> be <code>! AbstractOp()</code>.</li> <li>return <code>result</code>.</li> </ol> <p>\u4e0a\u9762\u6d41\u7a0b\u7684<code>!</code>\uff0c\u4ee3\u8868<code>AbstractOp()</code>\u4e0d\u4f1a\u62a5\u9519\uff0c\u8fd4\u56de\u7684\u4e00\u5b9a\u662f normal completion\uff0c\u603b\u662f\u53ef\u4ee5\u53d6\u51fa\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_5","title":"\u76f8\u7b49\u8fd0\u7b97\u7b26","text":"<p>\u4e0b\u9762\u901a\u8fc7\u4e00\u4e9b\u4f8b\u5b50\uff0c\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u8fd9\u4efd\u89c4\u683c\u3002</p> <p>\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>==</code>\uff09\u662f\u4e00\u4e2a\u5f88\u8ba9\u4eba\u5934\u75db\u7684\u8fd0\u7b97\u7b26\uff0c\u5b83\u7684\u8bed\u6cd5\u884c\u4e3a\u591a\u53d8\uff0c\u4e0d\u7b26\u5408\u76f4\u89c9\u3002\u8fd9\u4e2a\u5c0f\u8282\u5c31\u770b\u770b\u89c4\u683c\u600e\u4e48\u89c4\u5b9a\u5b83\u7684\u884c\u4e3a\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u8fd9\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8bf7\u95ee\u5b83\u7684\u503c\u662f\u591a\u5c11\u3002</p> <pre><code>0 == null\n</code></pre> <p>\u5982\u679c\u4f60\u4e0d\u786e\u5b9a\u7b54\u6848\uff0c\u6216\u8005\u60f3\u77e5\u9053\u8bed\u8a00\u5185\u90e8\u600e\u4e48\u5904\u7406\uff0c\u5c31\u53ef\u4ee5\u53bb\u67e5\u770b\u89c4\u683c\uff0c7.2.12 \u5c0f\u8282\u662f\u5bf9\u76f8\u7b49\u8fd0\u7b97\u7b26\uff08<code>==</code>\uff09\u7684\u63cf\u8ff0\u3002</p> <p>\u89c4\u683c\u5bf9\u6bcf\u4e00\u79cd\u8bed\u6cd5\u884c\u4e3a\u7684\u63cf\u8ff0\uff0c\u90fd\u5206\u6210\u4e24\u90e8\u5206\uff1a\u5148\u662f\u603b\u4f53\u7684\u884c\u4e3a\u63cf\u8ff0\uff0c\u7136\u540e\u662f\u5b9e\u73b0\u7684\u7b97\u6cd5\u7ec6\u8282\u3002\u76f8\u7b49\u8fd0\u7b97\u7b26\u7684\u603b\u4f53\u63cf\u8ff0\uff0c\u53ea\u6709\u4e00\u53e5\u8bdd\u3002</p> <p>\u201cThe comparison <code>x == y</code>, where <code>x</code> and <code>y</code> are values, produces <code>true</code> or <code>false</code>.\u201d</p> <p>\u4e0a\u9762\u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u662f\uff0c\u76f8\u7b49\u8fd0\u7b97\u7b26\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u503c\uff0c\u8fd4\u56de<code>true</code>\u6216<code>false</code>\u3002</p> <p>\u4e0b\u9762\u662f\u7b97\u6cd5\u7ec6\u8282\u3002</p> <ol> <li>ReturnIfAbrupt(x).</li> <li>ReturnIfAbrupt(y).</li> <li>If <code>Type(x)</code> is the same as <code>Type(y)</code>, then</li> <li>Return the result of performing Strict Equality Comparison <code>x === y</code>.</li> <li>If <code>x</code> is <code>null</code> and <code>y</code> is <code>undefined</code>, return <code>true</code>.</li> <li>If <code>x</code> is <code>undefined</code> and <code>y</code> is <code>null</code>, return <code>true</code>.</li> <li>If <code>Type(x)</code> is Number and <code>Type(y)</code> is String,    return the result of the comparison <code>x == ToNumber(y)</code>.</li> <li>If <code>Type(x)</code> is String and <code>Type(y)</code> is Number,    return the result of the comparison <code>ToNumber(x) == y</code>.</li> <li>If <code>Type(x)</code> is Boolean, return the result of the comparison <code>ToNumber(x) == y</code>.</li> <li>If <code>Type(y)</code> is Boolean, return the result of the comparison <code>x == ToNumber(y)</code>.</li> <li>If <code>Type(x)</code> is either String, Number, or Symbol and <code>Type(y)</code> is Object, then    return the result of the comparison <code>x == ToPrimitive(y)</code>.</li> <li>If <code>Type(x)</code> is Object and <code>Type(y)</code> is either String, Number, or Symbol, then    return the result of the comparison <code>ToPrimitive(x) == y</code>.</li> <li>Return <code>false</code>.</li> </ol> <p>\u4e0a\u9762\u8fd9\u6bb5\u7b97\u6cd5\uff0c\u4e00\u5171\u6709 12 \u6b65\uff0c\u7ffb\u8bd1\u5982\u4e0b\u3002</p> <ol> <li>\u5982\u679c<code>x</code>\u4e0d\u662f\u6b63\u5e38\u503c\uff08\u6bd4\u5982\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\uff09\uff0c\u4e2d\u65ad\u6267\u884c\u3002</li> <li>\u5982\u679c<code>y</code>\u4e0d\u662f\u6b63\u5e38\u503c\uff0c\u4e2d\u65ad\u6267\u884c\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u4e0e<code>Type(y)</code>\u76f8\u540c\uff0c\u6267\u884c\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97<code>x === y</code>\u3002</li> <li>\u5982\u679c<code>x</code>\u662f<code>null</code>\uff0c<code>y</code>\u662f<code>undefined</code>\uff0c\u8fd4\u56de<code>true</code>\u3002</li> <li>\u5982\u679c<code>x</code>\u662f<code>undefined</code>\uff0c<code>y</code>\u662f<code>null</code>\uff0c\u8fd4\u56de<code>true</code>\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u662f\u6570\u503c\uff0c<code>Type(y)</code>\u662f\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de<code>x == ToNumber(y)</code>\u7684\u7ed3\u679c\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u662f\u5b57\u7b26\u4e32\uff0c<code>Type(y)</code>\u662f\u6570\u503c\uff0c\u8fd4\u56de<code>ToNumber(x) == y</code>\u7684\u7ed3\u679c\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u662f\u5e03\u5c14\u503c\uff0c\u8fd4\u56de<code>ToNumber(x) == y</code>\u7684\u7ed3\u679c\u3002</li> <li>\u5982\u679c<code>Type(y)</code>\u662f\u5e03\u5c14\u503c\uff0c\u8fd4\u56de<code>x == ToNumber(y)</code>\u7684\u7ed3\u679c\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u662f\u5b57\u7b26\u4e32\u6216\u6570\u503c\u6216<code>Symbol</code>\u503c\uff0c<code>Type(y)</code>\u662f\u5bf9\u8c61\uff0c\u8fd4\u56de<code>x == ToPrimitive(y)</code>\u7684\u7ed3\u679c\u3002</li> <li>\u5982\u679c<code>Type(x)</code>\u662f\u5bf9\u8c61\uff0c<code>Type(y)</code>\u662f\u5b57\u7b26\u4e32\u6216\u6570\u503c\u6216<code>Symbol</code>\u503c\uff0c\u8fd4\u56de<code>ToPrimitive(x) == y</code>\u7684\u7ed3\u679c\u3002</li> <li>\u8fd4\u56de<code>false</code>\u3002</li> </ol> <p>\u7531\u4e8e<code>0</code>\u7684\u7c7b\u578b\u662f\u6570\u503c\uff0c<code>null</code>\u7684\u7c7b\u578b\u662f Null\uff08\u8fd9\u662f\u89c4\u683c4.3.13 \u5c0f\u8282\u7684\u89c4\u5b9a\uff0c\u662f\u5185\u90e8 Type \u8fd0\u7b97\u7684\u7ed3\u679c\uff0c\u8ddf<code>typeof</code>\u8fd0\u7b97\u7b26\u65e0\u5173\uff09\u3002\u56e0\u6b64\u4e0a\u9762\u7684\u524d 11 \u6b65\u90fd\u5f97\u4e0d\u5230\u7ed3\u679c\uff0c\u8981\u5230\u7b2c 12 \u6b65\u624d\u80fd\u5f97\u5230<code>false</code>\u3002</p> <pre><code>0 == null // false\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#_6","title":"\u6570\u7ec4\u7684\u7a7a\u4f4d","text":"<p>\u4e0b\u9762\u518d\u770b\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const a1 = [undefined, undefined, undefined];\nconst a2 = [, , ,];\n\na1.length // 3\na2.length // 3\n\na1[0] // undefined\na2[0] // undefined\n\na1[0] === a2[0] // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>a1</code>\u7684\u6210\u5458\u662f\u4e09\u4e2a<code>undefined</code>\uff0c\u6570\u7ec4<code>a2</code>\u7684\u6210\u5458\u662f\u4e09\u4e2a\u7a7a\u4f4d\u3002\u8fd9\u4e24\u4e2a\u6570\u7ec4\u5f88\u76f8\u4f3c\uff0c\u957f\u5ea6\u90fd\u662f 3\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u6210\u5458\u8bfb\u53d6\u51fa\u6765\u90fd\u662f<code>undefined</code>\u3002</p> <p>\u4f46\u662f\uff0c\u5b83\u4eec\u5b9e\u9645\u4e0a\u5b58\u5728\u91cd\u5927\u5dee\u5f02\u3002</p> <pre><code>0 in a1 // true\n0 in a2 // false\n\na1.hasOwnProperty(0) // true\na2.hasOwnProperty(0) // false\n\nObject.keys(a1) // [\"0\", \"1\", \"2\"]\nObject.keys(a2) // []\n\na1.map(n =&gt; 1) // [1, 1, 1]\na2.map(n =&gt; 1) // [, , ,]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e00\u5171\u5217\u51fa\u4e86\u56db\u79cd\u8fd0\u7b97\uff0c\u6570\u7ec4<code>a1</code>\u548c<code>a2</code>\u7684\u7ed3\u679c\u90fd\u4e0d\u4e00\u6837\u3002\u524d\u4e09\u79cd\u8fd0\u7b97\uff08<code>in</code>\u8fd0\u7b97\u7b26\u3001\u6570\u7ec4\u7684<code>hasOwnProperty</code>\u65b9\u6cd5\u3001<code>Object.keys</code>\u65b9\u6cd5\uff09\u90fd\u8bf4\u660e\uff0c\u6570\u7ec4<code>a2</code>\u53d6\u4e0d\u5230\u5c5e\u6027\u540d\u3002\u6700\u540e\u4e00\u79cd\u8fd0\u7b97\uff08\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\uff09\u8bf4\u660e\uff0c\u6570\u7ec4<code>a2</code>\u6ca1\u6709\u53d1\u751f\u904d\u5386\u3002</p> <p>\u4e3a\u4ec0\u4e48<code>a1</code>\u4e0e<code>a2</code>\u6210\u5458\u7684\u884c\u4e3a\u4e0d\u4e00\u81f4\uff1f\u6570\u7ec4\u7684\u6210\u5458\u662f<code>undefined</code>\u6216\u7a7a\u4f4d\uff0c\u5230\u5e95\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f</p> <p>\u89c4\u683c\u768412.2.5 \u5c0f\u8282\u300a\u6570\u7ec4\u7684\u521d\u59cb\u5316\u300b\u7ed9\u51fa\u4e86\u7b54\u6848\u3002</p> <p>\u201cArray elements may be elided at the beginning, middle or end of the element list. Whenever a comma in the element list is not preceded by an AssignmentExpression (i.e., a comma at the beginning or after another comma), the missing array element contributes to the length of the Array and increases the index of subsequent elements. Elided array elements are not defined. If an element is elided at the end of an array, that element does not contribute to the length of the Array.\u201d</p> <p>\u7ffb\u8bd1\u5982\u4e0b\u3002</p> <p>\"\u6570\u7ec4\u6210\u5458\u53ef\u4ee5\u7701\u7565\u3002\u53ea\u8981\u9017\u53f7\u524d\u9762\u6ca1\u6709\u4efb\u4f55\u8868\u8fbe\u5f0f\uff0c\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027\u5c31\u4f1a\u52a0 1\uff0c\u5e76\u4e14\u76f8\u5e94\u589e\u52a0\u5176\u540e\u6210\u5458\u7684\u4f4d\u7f6e\u7d22\u5f15\u3002\u88ab\u7701\u7565\u7684\u6210\u5458\u4e0d\u4f1a\u88ab\u5b9a\u4e49\u3002\u5982\u679c\u88ab\u7701\u7565\u7684\u6210\u5458\u662f\u6570\u7ec4\u6700\u540e\u4e00\u4e2a\u6210\u5458\uff0c\u5219\u4e0d\u4f1a\u5bfc\u81f4\u6570\u7ec4<code>length</code>\u5c5e\u6027\u589e\u52a0\u3002\u201d</p> <p>\u4e0a\u9762\u7684\u89c4\u683c\u8bf4\u5f97\u5f88\u6e05\u695a\uff0c\u6570\u7ec4\u7684\u7a7a\u4f4d\u4f1a\u53cd\u6620\u5728<code>length</code>\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u8bf4\u7a7a\u4f4d\u6709\u81ea\u5df1\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u503c\u662f\u672a\u5b9a\u4e49\uff0c\u5373\u8fd9\u4e2a\u503c\u662f\u4e0d\u5b58\u5728\u7684\u3002\u5982\u679c\u4e00\u5b9a\u8981\u8bfb\u53d6\uff0c\u7ed3\u679c\u5c31\u662f<code>undefined</code>\uff08\u56e0\u4e3a<code>undefined</code>\u5728 JavaScript \u8bed\u8a00\u4e2d\u8868\u793a\u4e0d\u5b58\u5728\uff09\u3002</p> <p>\u8fd9\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48<code>in</code>\u8fd0\u7b97\u7b26\u3001\u6570\u7ec4\u7684<code>hasOwnProperty</code>\u65b9\u6cd5\u3001<code>Object.keys</code>\u65b9\u6cd5\uff0c\u90fd\u53d6\u4e0d\u5230\u7a7a\u4f4d\u7684\u5c5e\u6027\u540d\u3002\u56e0\u4e3a\u8fd9\u4e2a\u5c5e\u6027\u540d\u6839\u672c\u5c31\u4e0d\u5b58\u5728\uff0c\u89c4\u683c\u91cc\u9762\u6ca1\u8bf4\u8981\u4e3a\u7a7a\u4f4d\u5206\u914d\u5c5e\u6027\u540d(\u4f4d\u7f6e\u7d22\u5f15\uff09\uff0c\u53ea\u8bf4\u8981\u4e3a\u4e0b\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\u7d22\u5f15\u52a0 1\u3002</p> <p>\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\u4f1a\u8df3\u8fc7\u7a7a\u4f4d\uff0c\u8bf7\u770b\u4e0b\u4e00\u8282\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/27-spec/#map","title":"\u6570\u7ec4\u7684 map \u65b9\u6cd5","text":"<p>\u89c4\u683c\u768422.1.3.15 \u5c0f\u8282\u5b9a\u4e49\u4e86\u6570\u7ec4\u7684<code>map</code>\u65b9\u6cd5\u3002\u8be5\u5c0f\u8282\u5148\u662f\u603b\u4f53\u63cf\u8ff0<code>map</code>\u65b9\u6cd5\u7684\u884c\u4e3a\uff0c\u91cc\u9762\u6ca1\u6709\u63d0\u5230\u6570\u7ec4\u7a7a\u4f4d\u3002</p> <p>\u540e\u9762\u7684\u7b97\u6cd5\u63cf\u8ff0\u662f\u8fd9\u6837\u7684\u3002</p> <ol> <li>Let <code>O</code> be <code>ToObject(this value)</code>.</li> <li><code>ReturnIfAbrupt(O)</code>.</li> <li>Let <code>len</code> be <code>ToLength(Get(O, \"length\"))</code>.</li> <li><code>ReturnIfAbrupt(len)</code>.</li> <li>If <code>IsCallable(callbackfn)</code> is <code>false</code>, throw a TypeError exception.</li> <li>If <code>thisArg</code> was supplied, let <code>T</code> be <code>thisArg</code>; else let <code>T</code> be <code>undefined</code>.</li> <li>Let <code>A</code> be <code>ArraySpeciesCreate(O, len)</code>.</li> <li><code>ReturnIfAbrupt(A)</code>.</li> <li>Let <code>k</code> be 0.</li> <li>Repeat, while <code>k</code> &lt; <code>len</code></li> <li>Let <code>Pk</code> be <code>ToString(k)</code>.</li> <li>Let <code>kPresent</code> be <code>HasProperty(O, Pk)</code>.</li> <li><code>ReturnIfAbrupt(kPresent)</code>.</li> <li>If <code>kPresent</code> is <code>true</code>, then<ol> <li>Let <code>kValue</code> be <code>Get(O, Pk)</code>.</li> <li><code>ReturnIfAbrupt(kValue)</code>.</li> <li>Let <code>mappedValue</code> be <code>Call(callbackfn, T, \u00abkValue, k, O\u00bb)</code>.</li> <li><code>ReturnIfAbrupt(mappedValue)</code>.</li> <li>Let <code>status</code> be <code>CreateDataPropertyOrThrow (A, Pk, mappedValue)</code>.</li> <li><code>ReturnIfAbrupt(status)</code>.</li> </ol> </li> <li>Increase <code>k</code> by 1.</li> <li>Return <code>A</code>.</li> </ol> <p>\u7ffb\u8bd1\u5982\u4e0b\u3002</p> <ol> <li>\u5f97\u5230\u5f53\u524d\u6570\u7ec4\u7684<code>this</code>\u5bf9\u8c61</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u6c42\u51fa\u5f53\u524d\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u5982\u679c map \u65b9\u6cd5\u7684\u53c2\u6570<code>callbackfn</code>\u4e0d\u53ef\u6267\u884c\uff0c\u5c31\u62a5\u9519</li> <li>\u5982\u679c map \u65b9\u6cd5\u7684\u53c2\u6570\u4e4b\u4e2d\uff0c\u6307\u5b9a\u4e86<code>this</code>\uff0c\u5c31\u8ba9<code>T</code>\u7b49\u4e8e\u8be5\u53c2\u6570\uff0c\u5426\u5219<code>T</code>\u4e3a<code>undefined</code></li> <li>\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4<code>A</code>\uff0c\u8ddf\u5f53\u524d\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027\u4fdd\u6301\u4e00\u81f4</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u8bbe\u5b9a<code>k</code>\u7b49\u4e8e 0</li> <li>\u53ea\u8981<code>k</code>\u5c0f\u4e8e\u5f53\u524d\u6570\u7ec4\u7684<code>length</code>\u5c5e\u6027\uff0c\u5c31\u91cd\u590d\u4e0b\u9762\u6b65\u9aa4</li> <li>\u8bbe\u5b9a<code>Pk</code>\u7b49\u4e8e<code>ToString(k)</code>\uff0c\u5373\u5c06<code>K</code>\u8f6c\u4e3a\u5b57\u7b26\u4e32</li> <li>\u8bbe\u5b9a<code>kPresent</code>\u7b49\u4e8e<code>HasProperty(O, Pk)</code>\uff0c\u5373\u6c42\u5f53\u524d\u6570\u7ec4\u6709\u6ca1\u6709\u6307\u5b9a\u5c5e\u6027</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u5982\u679c<code>kPresent</code>\u7b49\u4e8e<code>true</code>\uff0c\u5219\u8fdb\u884c\u4e0b\u9762\u6b65\u9aa4<ol> <li>\u8bbe\u5b9a<code>kValue</code>\u7b49\u4e8e<code>Get(O, Pk)</code>\uff0c\u53d6\u51fa\u5f53\u524d\u6570\u7ec4\u7684\u6307\u5b9a\u5c5e\u6027</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u8bbe\u5b9a<code>mappedValue</code>\u7b49\u4e8e<code>Call(callbackfn, T, \u00abkValue, k, O\u00bb)</code>\uff0c\u5373\u6267\u884c\u56de\u8c03\u51fd\u6570</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> <li>\u8bbe\u5b9a<code>status</code>\u7b49\u4e8e<code>CreateDataPropertyOrThrow (A, Pk, mappedValue)</code>\uff0c\u5373\u5c06\u56de\u8c03\u51fd\u6570\u7684\u503c\u653e\u5165<code>A</code>\u6570\u7ec4\u7684\u6307\u5b9a\u4f4d\u7f6e</li> <li>\u5982\u679c\u62a5\u9519\u5c31\u8fd4\u56de</li> </ol> </li> <li><code>k</code>\u589e\u52a0 1</li> <li>\u8fd4\u56de<code>A</code></li> </ol> <p>\u4ed4\u7ec6\u67e5\u770b\u4e0a\u9762\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53\u5904\u7406\u4e00\u4e2a\u5168\u662f\u7a7a\u4f4d\u7684\u6570\u7ec4\u65f6\uff0c\u524d\u9762\u6b65\u9aa4\u90fd\u6ca1\u6709\u95ee\u9898\u3002\u8fdb\u5165\u7b2c 10 \u6b65\u4e2d\u7b2c 2 \u6b65\u65f6\uff0c<code>kPresent</code>\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u7a7a\u4f4d\u5bf9\u5e94\u7684\u5c5e\u6027\u540d\uff0c\u5bf9\u4e8e\u6570\u7ec4\u6765\u8bf4\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u56e0\u6b64\u5c31\u4f1a\u8fd4\u56de\uff0c\u4e0d\u4f1a\u8fdb\u884c\u540e\u9762\u7684\u6b65\u9aa4\u3002</p> <pre><code>const arr = [, , ,];\narr.map(n =&gt; {\n  console.log(n);\n  return 1;\n}) // [, , ,]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>arr</code>\u662f\u4e00\u4e2a\u5168\u662f\u7a7a\u4f4d\u7684\u6570\u7ec4\uff0c<code>map</code>\u65b9\u6cd5\u904d\u5386\u6210\u5458\u65f6\uff0c\u53d1\u73b0\u662f\u7a7a\u4f4d\uff0c\u5c31\u76f4\u63a5\u8df3\u8fc7\uff0c\u4e0d\u4f1a\u8fdb\u5165\u56de\u8c03\u51fd\u6570\u3002\u56e0\u6b64\uff0c\u56de\u8c03\u51fd\u6570\u91cc\u9762\u7684<code>console.log</code>\u8bed\u53e5\u6839\u672c\u4e0d\u4f1a\u6267\u884c\uff0c\u6574\u4e2a<code>map</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5168\u662f\u7a7a\u4f4d\u7684\u65b0\u6570\u7ec4\u3002</p> <p>V8 \u5f15\u64ce\u5bf9<code>map</code>\u65b9\u6cd5\u7684\u5b9e\u73b0\u5982\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u8ddf\u89c4\u683c\u7684\u7b97\u6cd5\u63cf\u8ff0\u5b8c\u5168\u4e00\u81f4\u3002</p> <pre><code>function ArrayMap(f, receiver) {\n  CHECK_OBJECT_COERCIBLE(this, \"Array.prototype.map\");\n\n  // Pull out the length so that modifications to the length in the\n  // loop will not affect the looping and side effects are visible.\n  var array = TO_OBJECT(this);\n  var length = TO_LENGTH_OR_UINT32(array.length);\n  return InnerArrayMap(f, receiver, array, length);\n}\n\nfunction InnerArrayMap(f, receiver, array, length) {\n  if (!IS_CALLABLE(f)) throw MakeTypeError(kCalledNonCallable, f);\n\n  var accumulator = new InternalArray(length);\n  var is_array = IS_ARRAY(array);\n  var stepping = DEBUG_IS_STEPPING(f);\n  for (var i = 0; i &lt; length; i++) {\n    if (HAS_INDEX(array, i, is_array)) {\n      var element = array[i];\n      // Prepare break slots for debugger step in.\n      if (stepping) %DebugPrepareStepInIfStepping(f);\n      accumulator[i] = %_Call(f, receiver, element, i, array);\n    }\n  }\n  var result = new GlobalArray();\n  %MoveArrayContents(accumulator, result);\n  return result;\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/","title":"28-\u5f02\u6b65\u904d\u5386\u5668","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/#_1","title":"\u540c\u6b65\u904d\u5386\u5668\u7684\u95ee\u9898","text":"<p>\u300a\u904d\u5386\u5668\u300b\u4e00\u7ae0\u8bf4\u8fc7\uff0cIterator \u63a5\u53e3\u662f\u4e00\u79cd\u6570\u636e\u904d\u5386\u7684\u534f\u8bae\uff0c\u53ea\u8981\u8c03\u7528\u904d\u5386\u5668\u5bf9\u8c61\u7684<code>next</code>\u65b9\u6cd5\uff0c\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u904d\u5386\u6307\u9488\u6240\u5728\u7684\u90a3\u4e2a\u4f4d\u7f6e\u7684\u4fe1\u606f\u3002<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u5bf9\u8c61\u7684\u7ed3\u6784\u662f<code>{value, done}</code>\uff0c\u5176\u4e2d<code>value</code>\u8868\u793a\u5f53\u524d\u7684\u6570\u636e\u7684\u503c\uff0c<code>done</code>\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u904d\u5386\u662f\u5426\u7ed3\u675f\u3002</p> <pre><code>function idMaker() {\n  let index = 0;\n\n  return {\n    next: function() {\n      return { value: index++, done: false };\n    }\n  };\n}\n\nconst it = idMaker();\n\nit.next().value // 0\nit.next().value // 1\nit.next().value // 2\n// ...\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>it</code>\u662f\u4e00\u4e2a\u904d\u5386\u5668\uff08iterator\uff09\u3002\u6bcf\u6b21\u8c03\u7528<code>it.next()</code>\u65b9\u6cd5\uff0c\u5c31\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u5f53\u524d\u904d\u5386\u4f4d\u7f6e\u7684\u4fe1\u606f\u3002</p> <p>\u8fd9\u91cc\u9690\u542b\u7740\u4e00\u4e2a\u89c4\u5b9a\uff0c<code>it.next()</code>\u65b9\u6cd5\u5fc5\u987b\u662f\u540c\u6b65\u7684\uff0c\u53ea\u8981\u8c03\u7528\u5c31\u5fc5\u987b\u7acb\u523b\u8fd4\u56de\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u65e6\u6267\u884c<code>it.next()</code>\u65b9\u6cd5\uff0c\u5c31\u5fc5\u987b\u540c\u6b65\u5730\u5f97\u5230<code>value</code>\u548c<code>done</code>\u8fd9\u4e24\u4e2a\u5c5e\u6027\u3002\u5982\u679c\u904d\u5386\u6307\u9488\u6b63\u597d\u6307\u5411\u540c\u6b65\u64cd\u4f5c\uff0c\u5f53\u7136\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u5bf9\u4e8e\u5f02\u6b65\u64cd\u4f5c\uff0c\u5c31\u4e0d\u592a\u5408\u9002\u4e86\u3002</p> <pre><code>function idMaker() {\n  let index = 0;\n\n  return {\n    next: function() {\n      return new Promise(function (resolve, reject) {\n        setTimeout(() =&gt; {\n          resolve({ value: index++, done: false });\n        }, 1000);\n      });\n    }\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>next()</code>\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u8fd9\u6837\u5c31\u4e0d\u884c\uff0c\u4e0d\u7b26\u5408 Iterator \u534f\u8bae\uff0c\u53ea\u8981\u4ee3\u7801\u91cc\u9762\u5305\u542b\u5f02\u6b65\u64cd\u4f5c\u90fd\u4e0d\u884c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cIterator \u534f\u8bae\u91cc\u9762<code>next()</code>\u65b9\u6cd5\u53ea\u80fd\u5305\u542b\u540c\u6b65\u64cd\u4f5c\u3002</p> <p>\u76ee\u524d\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5c06\u5f02\u6b65\u64cd\u4f5c\u5305\u88c5\u6210 Thunk \u51fd\u6570\u6216\u8005 Promise \u5bf9\u8c61\uff0c\u5373<code>next()</code>\u65b9\u6cd5\u8fd4\u56de\u503c\u7684<code>value</code>\u5c5e\u6027\u662f\u4e00\u4e2a Thunk \u51fd\u6570\u6216\u8005 Promise \u5bf9\u8c61\uff0c\u7b49\u5f85\u4ee5\u540e\u8fd4\u56de\u771f\u6b63\u7684\u503c\uff0c\u800c<code>done</code>\u5c5e\u6027\u5219\u8fd8\u662f\u540c\u6b65\u4ea7\u751f\u7684\u3002</p> <pre><code>function idMaker() {\n  let index = 0;\n\n  return {\n    next: function() {\n      return {\n        value: new Promise(resolve =&gt; setTimeout(() =&gt; resolve(index++), 1000)),\n        done: false\n      };\n    }\n  };\n}\n\nconst it = idMaker();\n\nit.next().value.then(o =&gt; console.log(o)) // 0\nit.next().value.then(o =&gt; console.log(o)) // 1\nit.next().value.then(o =&gt; console.log(o)) // 2\n// ...\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>value</code>\u5c5e\u6027\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u7528\u6765\u653e\u7f6e\u5f02\u6b65\u64cd\u4f5c\u3002\u4f46\u662f\u8fd9\u6837\u5199\u5f88\u9ebb\u70e6\uff0c\u4e0d\u592a\u7b26\u5408\u76f4\u89c9\uff0c\u8bed\u4e49\u4e5f\u6bd4\u8f83\u7ed5\u3002</p> <p>ES2018 \u5f15\u5165\u4e86\u201c\u5f02\u6b65\u904d\u5386\u5668\u201d\uff08Async Iterator\uff09\uff0c\u4e3a\u5f02\u6b65\u64cd\u4f5c\u63d0\u4f9b\u539f\u751f\u7684\u904d\u5386\u5668\u63a5\u53e3\uff0c\u5373<code>value</code>\u548c<code>done</code>\u8fd9\u4e24\u4e2a\u5c5e\u6027\u90fd\u662f\u5f02\u6b65\u4ea7\u751f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/#_2","title":"\u5f02\u6b65\u904d\u5386\u7684\u63a5\u53e3","text":"<p>\u5f02\u6b65\u904d\u5386\u5668\u7684\u6700\u5927\u7684\u8bed\u6cd5\u7279\u70b9\uff0c\u5c31\u662f\u8c03\u7528\u904d\u5386\u5668\u7684<code>next</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>asyncIterator\n  .next()\n  .then(\n    ({ value, done }) =&gt; /* ... */\n  );\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>asyncIterator</code>\u662f\u4e00\u4e2a\u5f02\u6b65\u904d\u5386\u5668\uff0c\u8c03\u7528<code>next</code>\u65b9\u6cd5\u4ee5\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u6307\u5b9a\uff0c\u8fd9\u4e2a Promise \u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u4e3a<code>resolve</code>\u4ee5\u540e\u7684\u56de\u8c03\u51fd\u6570\u3002\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\uff0c\u5219\u662f\u4e00\u4e2a\u5177\u6709<code>value</code>\u548c<code>done</code>\u4e24\u4e2a\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u8ddf\u540c\u6b65\u904d\u5386\u5668\u662f\u4e00\u6837\u7684\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u4e00\u4e2a\u5bf9\u8c61\u7684\u540c\u6b65\u904d\u5386\u5668\u7684\u63a5\u53e3\uff0c\u90e8\u7f72\u5728<code>Symbol.iterator</code>\u5c5e\u6027\u4e0a\u9762\u3002\u540c\u6837\u5730\uff0c\u5bf9\u8c61\u7684\u5f02\u6b65\u904d\u5386\u5668\u63a5\u53e3\uff0c\u90e8\u7f72\u5728<code>Symbol.asyncIterator</code>\u5c5e\u6027\u4e0a\u9762\u3002\u4e0d\u7ba1\u662f\u4ec0\u4e48\u6837\u7684\u5bf9\u8c61\uff0c\u53ea\u8981\u5b83\u7684<code>Symbol.asyncIterator</code>\u5c5e\u6027\u6709\u503c\uff0c\u5c31\u8868\u793a\u5e94\u8be5\u5bf9\u5b83\u8fdb\u884c\u5f02\u6b65\u904d\u5386\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5f02\u6b65\u904d\u5386\u5668\u7684\u4f8b\u5b50\u3002</p> <pre><code>const asyncIterable = createAsyncIterable(['a', 'b']);\nconst asyncIterator = asyncIterable[Symbol.asyncIterator]();\n\nasyncIterator\n.next()\n.then(iterResult1 =&gt; {\n  console.log(iterResult1); // { value: 'a', done: false }\n  return asyncIterator.next();\n})\n.then(iterResult2 =&gt; {\n  console.log(iterResult2); // { value: 'b', done: false }\n  return asyncIterator.next();\n})\n.then(iterResult3 =&gt; {\n  console.log(iterResult3); // { value: undefined, done: true }\n});\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f02\u6b65\u904d\u5386\u5668\u5176\u5b9e\u8fd4\u56de\u4e86\u4e24\u6b21\u503c\u3002\u7b2c\u4e00\u6b21\u8c03\u7528\u7684\u65f6\u5019\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff1b\u7b49\u5230 Promise \u5bf9\u8c61<code>resolve</code>\u4e86\uff0c\u518d\u8fd4\u56de\u4e00\u4e2a\u8868\u793a\u5f53\u524d\u6570\u636e\u6210\u5458\u4fe1\u606f\u7684\u5bf9\u8c61\u3002\u8fd9\u5c31\u662f\u8bf4\uff0c\u5f02\u6b65\u904d\u5386\u5668\u4e0e\u540c\u6b65\u904d\u5386\u5668\u6700\u7ec8\u884c\u4e3a\u662f\u4e00\u81f4\u7684\uff0c\u53ea\u662f\u4f1a\u5148\u8fd4\u56de Promise \u5bf9\u8c61\uff0c\u4f5c\u4e3a\u4e2d\u4ecb\u3002</p> <p>\u7531\u4e8e\u5f02\u6b65\u904d\u5386\u5668\u7684<code>next</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u628a\u5b83\u653e\u5728<code>await</code>\u547d\u4ee4\u540e\u9762\u3002</p> <pre><code>async function f() {\n  const asyncIterable = createAsyncIterable(['a', 'b']);\n  const asyncIterator = asyncIterable[Symbol.asyncIterator]();\n  console.log(await asyncIterator.next());\n  // { value: 'a', done: false }\n  console.log(await asyncIterator.next());\n  // { value: 'b', done: false }\n  console.log(await asyncIterator.next());\n  // { value: undefined, done: true }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>next</code>\u65b9\u6cd5\u7528<code>await</code>\u5904\u7406\u4ee5\u540e\uff0c\u5c31\u4e0d\u5fc5\u4f7f\u7528<code>then</code>\u65b9\u6cd5\u4e86\u3002\u6574\u4e2a\u6d41\u7a0b\u5df2\u7ecf\u5f88\u63a5\u8fd1\u540c\u6b65\u5904\u7406\u4e86\u3002</p> <p>\u6ce8\u610f\uff0c\u5f02\u6b65\u904d\u5386\u5668\u7684<code>next</code>\u65b9\u6cd5\u662f\u53ef\u4ee5\u8fde\u7eed\u8c03\u7528\u7684\uff0c\u4e0d\u5fc5\u7b49\u5230\u4e0a\u4e00\u6b65\u4ea7\u751f\u7684 Promise \u5bf9\u8c61<code>resolve</code>\u4ee5\u540e\u518d\u8c03\u7528\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>next</code>\u65b9\u6cd5\u4f1a\u7d2f\u79ef\u8d77\u6765\uff0c\u81ea\u52a8\u6309\u7167\u6bcf\u4e00\u6b65\u7684\u987a\u5e8f\u8fd0\u884c\u4e0b\u53bb\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u628a\u6240\u6709\u7684<code>next</code>\u65b9\u6cd5\u653e\u5728<code>Promise.all</code>\u65b9\u6cd5\u91cc\u9762\u3002</p> <pre><code>const asyncIterable = createAsyncIterable(['a', 'b']);\nconst asyncIterator = asyncIterable[Symbol.asyncIterator]();\nconst [{value: v1}, {value: v2}] = await Promise.all([\n  asyncIterator.next(), asyncIterator.next()\n]);\n\nconsole.log(v1, v2); // a b\n</code></pre> <p>\u53e6\u4e00\u79cd\u7528\u6cd5\u662f\u4e00\u6b21\u6027\u8c03\u7528\u6240\u6709\u7684<code>next</code>\u65b9\u6cd5\uff0c\u7136\u540e<code>await</code>\u6700\u540e\u4e00\u6b65\u64cd\u4f5c\u3002</p> <pre><code>async function runner() {\n  const writer = openFile('someFile.txt');\n  writer.next('hello');\n  writer.next('world');\n  await writer.return();\n}\n\nrunner();\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/#for-awaitof","title":"for await...of","text":"<p>\u524d\u9762\u4ecb\u7ecd\u8fc7\uff0c<code>for...of</code>\u5faa\u73af\u7528\u4e8e\u904d\u5386\u540c\u6b65\u7684 Iterator \u63a5\u53e3\u3002\u65b0\u5f15\u5165\u7684<code>for await...of</code>\u5faa\u73af\uff0c\u5219\u662f\u7528\u4e8e\u904d\u5386\u5f02\u6b65\u7684 Iterator \u63a5\u53e3\u3002</p> <pre><code>async function f() {\n  for await (const x of createAsyncIterable(['a', 'b'])) {\n    console.log(x);\n  }\n}\n// a\n// b\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>createAsyncIterable()</code>\u8fd4\u56de\u4e00\u4e2a\u62e5\u6709\u5f02\u6b65\u904d\u5386\u5668\u63a5\u53e3\u7684\u5bf9\u8c61\uff0c<code>for...of</code>\u5faa\u73af\u81ea\u52a8\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5f02\u6b65\u904d\u5386\u5668\u7684<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u5f97\u5230\u4e00\u4e2a Promise \u5bf9\u8c61\u3002<code>await</code>\u7528\u6765\u5904\u7406\u8fd9\u4e2a Promise \u5bf9\u8c61\uff0c\u4e00\u65e6<code>resolve</code>\uff0c\u5c31\u628a\u5f97\u5230\u7684\u503c\uff08<code>x</code>\uff09\u4f20\u5165<code>for...of</code>\u7684\u5faa\u73af\u4f53\u3002</p> <p><code>for await...of</code>\u5faa\u73af\u7684\u4e00\u4e2a\u7528\u9014\uff0c\u662f\u90e8\u7f72\u4e86 asyncIterable \u64cd\u4f5c\u7684\u5f02\u6b65\u63a5\u53e3\uff0c\u53ef\u4ee5\u76f4\u63a5\u653e\u5165\u8fd9\u4e2a\u5faa\u73af\u3002</p> <pre><code>let body = '';\n\nasync function f() {\n  for await(const data of req) body += data;\n  const parsed = JSON.parse(body);\n  console.log('got', parsed);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>req</code>\u662f\u4e00\u4e2a asyncIterable \u5bf9\u8c61\uff0c\u7528\u6765\u5f02\u6b65\u8bfb\u53d6\u6570\u636e\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u4f7f\u7528<code>for await...of</code>\u5faa\u73af\u4ee5\u540e\uff0c\u4ee3\u7801\u4f1a\u975e\u5e38\u7b80\u6d01\u3002</p> <p>\u5982\u679c<code>next</code>\u65b9\u6cd5\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u88ab<code>reject</code>\uff0c<code>for await...of</code>\u5c31\u4f1a\u62a5\u9519\uff0c\u8981\u7528<code>try...catch</code>\u6355\u6349\u3002</p> <pre><code>async function () {\n  try {\n    for await (const x of createRejectingIterable()) {\n      console.log(x);\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c<code>for await...of</code>\u5faa\u73af\u4e5f\u53ef\u4ee5\u7528\u4e8e\u540c\u6b65\u904d\u5386\u5668\u3002</p> <pre><code>(async function () {\n  for await (const x of ['a', 'b']) {\n    console.log(x);\n  }\n})();\n// a\n// b\n</code></pre> <p>Node v10 \u652f\u6301\u5f02\u6b65\u904d\u5386\u5668\uff0cStream \u5c31\u90e8\u7f72\u4e86\u8fd9\u4e2a\u63a5\u53e3\u3002\u4e0b\u9762\u662f\u8bfb\u53d6\u6587\u4ef6\u7684\u4f20\u7edf\u5199\u6cd5\u4e0e\u5f02\u6b65\u904d\u5386\u5668\u5199\u6cd5\u7684\u5dee\u5f02\u3002</p> <pre><code>// \u4f20\u7edf\u5199\u6cd5\nfunction main(inputFilePath) {\n  const readStream = fs.createReadStream(\n    inputFilePath,\n    { encoding: 'utf8', highWaterMark: 1024 }\n  );\n  readStream.on('data', (chunk) =&gt; {\n    console.log('&gt;&gt;&gt; '+chunk);\n  });\n  readStream.on('end', () =&gt; {\n    console.log('### DONE ###');\n  });\n}\n\n// \u5f02\u6b65\u904d\u5386\u5668\u5199\u6cd5\nasync function main(inputFilePath) {\n  const readStream = fs.createReadStream(\n    inputFilePath,\n    { encoding: 'utf8', highWaterMark: 1024 }\n  );\n\n  for await (const chunk of readStream) {\n    console.log('&gt;&gt;&gt; '+chunk);\n  }\n  console.log('### DONE ###');\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/#generator","title":"\u5f02\u6b65 Generator \u51fd\u6570","text":"<p>\u5c31\u50cf Generator \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u540c\u6b65\u904d\u5386\u5668\u5bf9\u8c61\u4e00\u6837\uff0c\u5f02\u6b65 Generator \u51fd\u6570\u7684\u4f5c\u7528\uff0c\u662f\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u904d\u5386\u5668\u5bf9\u8c61\u3002</p> <p>\u5728\u8bed\u6cd5\u4e0a\uff0c\u5f02\u6b65 Generator \u51fd\u6570\u5c31\u662f<code>async</code>\u51fd\u6570\u4e0e Generator \u51fd\u6570\u7684\u7ed3\u5408\u3002</p> <pre><code>async function* gen() {\n  yield 'hello';\n}\nconst genObj = gen();\ngenObj.next().then(x =&gt; console.log(x));\n// { value: 'hello', done: false }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>gen</code>\u662f\u4e00\u4e2a\u5f02\u6b65 Generator \u51fd\u6570\uff0c\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65 Iterator \u5bf9\u8c61\u3002\u5bf9\u8be5\u5bf9\u8c61\u8c03\u7528<code>next</code>\u65b9\u6cd5\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <p>\u5f02\u6b65\u904d\u5386\u5668\u7684\u8bbe\u8ba1\u76ee\u7684\u4e4b\u4e00\uff0c\u5c31\u662f Generator \u51fd\u6570\u5904\u7406\u540c\u6b65\u64cd\u4f5c\u548c\u5f02\u6b65\u64cd\u4f5c\u65f6\uff0c\u80fd\u591f\u4f7f\u7528\u540c\u4e00\u5957\u63a5\u53e3\u3002</p> <pre><code>// \u540c\u6b65 Generator \u51fd\u6570\nfunction* map(iterable, func) {\n  const iter = iterable[Symbol.iterator]();\n  while (true) {\n    const {value, done} = iter.next();\n    if (done) break;\n    yield func(value);\n  }\n}\n\n// \u5f02\u6b65 Generator \u51fd\u6570\nasync function* map(iterable, func) {\n  const iter = iterable[Symbol.asyncIterator]();\n  while (true) {\n    const {value, done} = await iter.next();\n    if (done) break;\n    yield func(value);\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>map</code>\u662f\u4e00\u4e2a Generator \u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u53ef\u904d\u5386\u5bf9\u8c61<code>iterable</code>\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570<code>func</code>\u3002<code>map</code>\u7684\u4f5c\u7528\u662f\u5c06<code>iterable</code>\u6bcf\u4e00\u6b65\u8fd4\u56de\u7684\u503c\uff0c\u4f7f\u7528<code>func</code>\u8fdb\u884c\u5904\u7406\u3002\u4e0a\u9762\u6709\u4e24\u4e2a\u7248\u672c\u7684<code>map</code>\uff0c\u524d\u4e00\u4e2a\u5904\u7406\u540c\u6b65\u904d\u5386\u5668\uff0c\u540e\u4e00\u4e2a\u5904\u7406\u5f02\u6b65\u904d\u5386\u5668\uff0c\u53ef\u4ee5\u770b\u5230\u4e24\u4e2a\u7248\u672c\u7684\u5199\u6cd5\u57fa\u672c\u4e0a\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u5f02\u6b65 Generator \u51fd\u6570\u7684\u4f8b\u5b50\u3002</p> <pre><code>async function* readLines(path) {\n  let file = await fileOpen(path);\n\n  try {\n    while (!file.EOF) {\n      yield await file.readLine();\n    }\n  } finally {\n    await file.close();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f02\u6b65\u64cd\u4f5c\u524d\u9762\u4f7f\u7528<code>await</code>\u5173\u952e\u5b57\u6807\u660e\uff0c\u5373<code>await</code>\u540e\u9762\u7684\u64cd\u4f5c\uff0c\u5e94\u8be5\u8fd4\u56de Promise \u5bf9\u8c61\u3002\u51e1\u662f\u4f7f\u7528<code>yield</code>\u5173\u952e\u5b57\u7684\u5730\u65b9\uff0c\u5c31\u662f<code>next</code>\u65b9\u6cd5\u505c\u4e0b\u6765\u7684\u5730\u65b9\uff0c\u5b83\u540e\u9762\u7684\u8868\u8fbe\u5f0f\u7684\u503c\uff08\u5373<code>await file.readLine()</code>\u7684\u503c\uff09\uff0c\u4f1a\u4f5c\u4e3a<code>next()</code>\u8fd4\u56de\u5bf9\u8c61\u7684<code>value</code>\u5c5e\u6027\uff0c\u8fd9\u4e00\u70b9\u662f\u4e0e\u540c\u6b65 Generator \u51fd\u6570\u4e00\u81f4\u7684\u3002</p> <p>\u5f02\u6b65 Generator \u51fd\u6570\u5185\u90e8\uff0c\u80fd\u591f\u540c\u65f6\u4f7f\u7528<code>await</code>\u548c<code>yield</code>\u547d\u4ee4\u3002\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff0c<code>await</code>\u547d\u4ee4\u7528\u4e8e\u5c06\u5916\u90e8\u64cd\u4f5c\u4ea7\u751f\u7684\u503c\u8f93\u5165\u51fd\u6570\u5185\u90e8\uff0c<code>yield</code>\u547d\u4ee4\u7528\u4e8e\u5c06\u51fd\u6570\u5185\u90e8\u7684\u503c\u8f93\u51fa\u3002</p> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u7684\u5f02\u6b65 Generator \u51fd\u6570\u7684\u7528\u6cd5\u5982\u4e0b\u3002</p> <pre><code>(async function () {\n  for await (const line of readLines(filePath)) {\n    console.log(line);\n  }\n})()\n</code></pre> <p>\u5f02\u6b65 Generator \u51fd\u6570\u53ef\u4ee5\u4e0e<code>for await...of</code>\u5faa\u73af\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u3002</p> <pre><code>async function* prefixLines(asyncIterable) {\n  for await (const line of asyncIterable) {\n    yield '&gt; ' + line;\n  }\n}\n</code></pre> <p>\u5f02\u6b65 Generator \u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5f02\u6b65 Iterator\uff0c\u5373\u6bcf\u6b21\u8c03\u7528\u5b83\u7684<code>next</code>\u65b9\u6cd5\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ddf\u5728<code>yield</code>\u547d\u4ee4\u540e\u9762\u7684\uff0c\u5e94\u8be5\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u5982\u679c\u50cf\u4e0a\u9762\u90a3\u4e2a\u4f8b\u5b50\u90a3\u6837\uff0c<code>yield</code>\u547d\u4ee4\u540e\u9762\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f1a\u88ab\u81ea\u52a8\u5305\u88c5\u6210\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</p> <pre><code>function fetchRandom() {\n  const url = 'https://www.random.org/decimal-fractions/'\n    + '?num=1&amp;dec=10&amp;col=1&amp;format=plain&amp;rnd=new';\n  return fetch(url);\n}\n\nasync function* asyncGenerator() {\n  console.log('Start');\n  const result = await fetchRandom(); // (A)\n  yield 'Result: ' + await result.text(); // (B)\n  console.log('Done');\n}\n\nconst ag = asyncGenerator();\nag.next().then(({value, done}) =&gt; {\n  console.log(value);\n})\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ag</code>\u662f<code>asyncGenerator</code>\u51fd\u6570\u8fd4\u56de\u7684\u5f02\u6b65\u904d\u5386\u5668\u5bf9\u8c61\u3002\u8c03\u7528<code>ag.next()</code>\u4ee5\u540e\uff0c\u4e0a\u9762\u4ee3\u7801\u7684\u6267\u884c\u987a\u5e8f\u5982\u4e0b\u3002</p> <ol> <li><code>ag.next()</code>\u7acb\u523b\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002</li> <li><code>asyncGenerator</code>\u51fd\u6570\u5f00\u59cb\u6267\u884c\uff0c\u6253\u5370\u51fa<code>Start</code>\u3002</li> <li><code>await</code>\u547d\u4ee4\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c<code>asyncGenerator</code>\u51fd\u6570\u505c\u5728\u8fd9\u91cc\u3002</li> <li>A \u5904\u53d8\u6210 fulfilled \u72b6\u6001\uff0c\u4ea7\u751f\u7684\u503c\u653e\u5165<code>result</code>\u53d8\u91cf\uff0c<code>asyncGenerator</code>\u51fd\u6570\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\u3002</li> <li>\u51fd\u6570\u5728 B \u5904\u7684<code>yield</code>\u6682\u505c\u6267\u884c\uff0c\u4e00\u65e6<code>yield</code>\u547d\u4ee4\u53d6\u5230\u503c\uff0c<code>ag.next()</code>\u8fd4\u56de\u7684\u90a3\u4e2a Promise \u5bf9\u8c61\u53d8\u6210 fulfilled \u72b6\u6001\u3002</li> <li><code>ag.next()</code>\u540e\u9762\u7684<code>then</code>\u65b9\u6cd5\u6307\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u5f00\u59cb\u6267\u884c\u3002\u8be5\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61<code>{value, done}</code>\uff0c\u5176\u4e2d<code>value</code>\u7684\u503c\u662f<code>yield</code>\u547d\u4ee4\u540e\u9762\u7684\u90a3\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c\uff0c<code>done</code>\u7684\u503c\u662f<code>false</code>\u3002</li> </ol> <p>A \u548c B \u4e24\u884c\u7684\u4f5c\u7528\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>return new Promise((resolve, reject) =&gt; {\n  fetchRandom()\n  .then(result =&gt; result.text())\n  .then(result =&gt; {\n     resolve({\n       value: 'Result: ' + result,\n       done: false,\n     });\n  });\n});\n</code></pre> <p>\u5982\u679c\u5f02\u6b65 Generator \u51fd\u6570\u629b\u51fa\u9519\u8bef\uff0c\u4f1a\u5bfc\u81f4 Promise \u5bf9\u8c61\u7684\u72b6\u6001\u53d8\u4e3a<code>reject</code>\uff0c\u7136\u540e\u629b\u51fa\u7684\u9519\u8bef\u88ab<code>catch</code>\u65b9\u6cd5\u6355\u83b7\u3002</p> <pre><code>async function* asyncGenerator() {\n  throw new Error('Problem!');\n}\n\nasyncGenerator()\n.next()\n.catch(err =&gt; console.log(err)); // Error: Problem!\n</code></pre> <p>\u6ce8\u610f\uff0c\u666e\u901a\u7684 async \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u800c\u5f02\u6b65 Generator \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5f02\u6b65 Iterator \u5bf9\u8c61\u3002\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff0casync \u51fd\u6570\u548c\u5f02\u6b65 Generator \u51fd\u6570\uff0c\u662f\u5c01\u88c5\u5f02\u6b65\u64cd\u4f5c\u7684\u4e24\u79cd\u65b9\u6cd5\uff0c\u90fd\u7528\u6765\u8fbe\u5230\u540c\u4e00\u79cd\u76ee\u7684\u3002\u533a\u522b\u5728\u4e8e\uff0c\u524d\u8005\u81ea\u5e26\u6267\u884c\u5668\uff0c\u540e\u8005\u901a\u8fc7<code>for await...of</code>\u6267\u884c\uff0c\u6216\u8005\u81ea\u5df1\u7f16\u5199\u6267\u884c\u5668\u3002\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u5f02\u6b65 Generator \u51fd\u6570\u7684\u6267\u884c\u5668\u3002</p> <pre><code>async function takeAsync(asyncIterable, count = Infinity) {\n  const result = [];\n  const iterator = asyncIterable[Symbol.asyncIterator]();\n  while (result.length &lt; count) {\n    const {value, done} = await iterator.next();\n    if (done) break;\n    result.push(value);\n  }\n  return result;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5f02\u6b65 Generator \u51fd\u6570\u4ea7\u751f\u7684\u5f02\u6b65\u904d\u5386\u5668\uff0c\u4f1a\u901a\u8fc7<code>while</code>\u5faa\u73af\u81ea\u52a8\u6267\u884c\uff0c\u6bcf\u5f53<code>await iterator.next()</code>\u5b8c\u6210\uff0c\u5c31\u4f1a\u8fdb\u5165\u4e0b\u4e00\u8f6e\u5faa\u73af\u3002\u4e00\u65e6<code>done</code>\u5c5e\u6027\u53d8\u4e3a<code>true</code>\uff0c\u5c31\u4f1a\u8df3\u51fa\u5faa\u73af\uff0c\u5f02\u6b65\u904d\u5386\u5668\u6267\u884c\u7ed3\u675f\u3002</p> <p>\u4e0b\u9762\u662f\u8fd9\u4e2a\u81ea\u52a8\u6267\u884c\u5668\u7684\u4e00\u4e2a\u4f7f\u7528\u5b9e\u4f8b\u3002</p> <pre><code>async function f() {\n  async function* gen() {\n    yield 'a';\n    yield 'b';\n    yield 'c';\n  }\n\n  return await takeAsync(gen());\n}\n\nf().then(function (result) {\n  console.log(result); // ['a', 'b', 'c']\n})\n</code></pre> <p>\u5f02\u6b65 Generator \u51fd\u6570\u51fa\u73b0\u4ee5\u540e\uff0cJavaScript \u5c31\u6709\u4e86\u56db\u79cd\u51fd\u6570\u5f62\u5f0f\uff1a\u666e\u901a\u51fd\u6570\u3001async \u51fd\u6570\u3001Generator \u51fd\u6570\u548c\u5f02\u6b65 Generator \u51fd\u6570\u3002\u8bf7\u6ce8\u610f\u533a\u5206\u6bcf\u79cd\u51fd\u6570\u7684\u4e0d\u540c\u4e4b\u5904\u3002\u57fa\u672c\u4e0a\uff0c\u5982\u679c\u662f\u4e00\u7cfb\u5217\u6309\u7167\u987a\u5e8f\u6267\u884c\u7684\u5f02\u6b65\u64cd\u4f5c\uff08\u6bd4\u5982\u8bfb\u53d6\u6587\u4ef6\uff0c\u7136\u540e\u5199\u5165\u65b0\u5185\u5bb9\uff0c\u518d\u5b58\u5165\u786c\u76d8\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528 async \u51fd\u6570\uff1b\u5982\u679c\u662f\u4e00\u7cfb\u5217\u4ea7\u751f\u76f8\u540c\u6570\u636e\u7ed3\u6784\u7684\u5f02\u6b65\u64cd\u4f5c\uff08\u6bd4\u5982\u4e00\u884c\u4e00\u884c\u8bfb\u53d6\u6587\u4ef6\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65 Generator \u51fd\u6570\u3002</p> <p>\u5f02\u6b65 Generator \u51fd\u6570\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>next</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u63a5\u6536\u5916\u90e8\u4f20\u5165\u7684\u6570\u636e\u3002</p> <pre><code>const writer = openFile('someFile.txt');\nwriter.next('hello'); // \u7acb\u5373\u6267\u884c\nwriter.next('world'); // \u7acb\u5373\u6267\u884c\nawait writer.return(); // \u7b49\u5f85\u5199\u5165\u7ed3\u675f\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>openFile</code>\u662f\u4e00\u4e2a\u5f02\u6b65 Generator \u51fd\u6570\u3002<code>next</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5411\u8be5\u51fd\u6570\u5185\u90e8\u7684\u64cd\u4f5c\u4f20\u5165\u6570\u636e\u3002\u6bcf\u6b21<code>next</code>\u65b9\u6cd5\u90fd\u662f\u540c\u6b65\u6267\u884c\u7684\uff0c\u6700\u540e\u7684<code>await</code>\u547d\u4ee4\u7528\u4e8e\u7b49\u5f85\u6574\u4e2a\u5199\u5165\u64cd\u4f5c\u7ed3\u675f\u3002</p> <p>\u6700\u540e\uff0c\u540c\u6b65\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65 Generator \u51fd\u6570\u3002</p> <pre><code>async function* createAsyncIterable(syncIterable) {\n  for (const elem of syncIterable) {\n    yield elem;\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7531\u4e8e\u6ca1\u6709\u5f02\u6b65\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e5f\u5c31\u6ca1\u6709\u4f7f\u7528<code>await</code>\u5173\u952e\u5b57\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/28-async-iterator/#yield","title":"yield* \u8bed\u53e5","text":"<p><code>yield*</code>\u8bed\u53e5\u4e5f\u53ef\u4ee5\u8ddf\u4e00\u4e2a\u5f02\u6b65\u904d\u5386\u5668\u3002</p> <pre><code>async function* gen1() {\n  yield 'a';\n  yield 'b';\n  return 2;\n}\n\nasync function* gen2() {\n  // result \u6700\u7ec8\u4f1a\u7b49\u4e8e 2\n  const result = yield* gen1();\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>gen2</code>\u51fd\u6570\u91cc\u9762\u7684<code>result</code>\u53d8\u91cf\uff0c\u6700\u540e\u7684\u503c\u662f<code>2</code>\u3002</p> <p>\u4e0e\u540c\u6b65 Generator \u51fd\u6570\u4e00\u6837\uff0c<code>for await...of</code>\u5faa\u73af\u4f1a\u5c55\u5f00<code>yield*</code>\u3002</p> <pre><code>(async function () {\n  for await (const x of gen2()) {\n    console.log(x);\n  }\n})();\n// a\n// b\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/","title":"29-ArrayBuffer","text":"<p><code>ArrayBuffer</code>\u5bf9\u8c61\u3001<code>TypedArray</code>\u89c6\u56fe\u548c<code>DataView</code>\u89c6\u56fe\u662f JavaScript \u64cd\u4f5c\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4e00\u4e2a\u63a5\u53e3\u3002\u8fd9\u4e9b\u5bf9\u8c61\u65e9\u5c31\u5b58\u5728\uff0c\u5c5e\u4e8e\u72ec\u7acb\u7684\u89c4\u683c\uff082011 \u5e74 2 \u6708\u53d1\u5e03\uff09\uff0cES6 \u5c06\u5b83\u4eec\u7eb3\u5165\u4e86 ECMAScript \u89c4\u683c\uff0c\u5e76\u4e14\u589e\u52a0\u4e86\u65b0\u7684\u65b9\u6cd5\u3002\u5b83\u4eec\u90fd\u662f\u4ee5\u6570\u7ec4\u7684\u8bed\u6cd5\u5904\u7406\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u6240\u4ee5\u7edf\u79f0\u4e3a\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002</p> <p>\u8fd9\u4e2a\u63a5\u53e3\u7684\u539f\u59cb\u8bbe\u8ba1\u76ee\u7684\uff0c\u4e0e WebGL \u9879\u76ee\u6709\u5173\u3002\u6240\u8c13 WebGL\uff0c\u5c31\u662f\u6307\u6d4f\u89c8\u5668\u4e0e\u663e\u5361\u4e4b\u95f4\u7684\u901a\u4fe1\u63a5\u53e3\uff0c\u4e3a\u4e86\u6ee1\u8db3 JavaScript \u4e0e\u663e\u5361\u4e4b\u95f4\u5927\u91cf\u7684\u3001\u5b9e\u65f6\u7684\u6570\u636e\u4ea4\u6362\uff0c\u5b83\u4eec\u4e4b\u95f4\u7684\u6570\u636e\u901a\u4fe1\u5fc5\u987b\u662f\u4e8c\u8fdb\u5236\u7684\uff0c\u800c\u4e0d\u80fd\u662f\u4f20\u7edf\u7684\u6587\u672c\u683c\u5f0f\u3002\u6587\u672c\u683c\u5f0f\u4f20\u9012\u4e00\u4e2a 32 \u4f4d\u6574\u6570\uff0c\u4e24\u7aef\u7684 JavaScript \u811a\u672c\u4e0e\u663e\u5361\u90fd\u8981\u8fdb\u884c\u683c\u5f0f\u8f6c\u5316\uff0c\u5c06\u975e\u5e38\u8017\u65f6\u3002\u8fd9\u65f6\u8981\u662f\u5b58\u5728\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u50cf C \u8bed\u8a00\u90a3\u6837\uff0c\u76f4\u63a5\u64cd\u4f5c\u5b57\u8282\uff0c\u5c06 4 \u4e2a\u5b57\u8282\u7684 32 \u4f4d\u6574\u6570\uff0c\u4ee5\u4e8c\u8fdb\u5236\u5f62\u5f0f\u539f\u5c01\u4e0d\u52a8\u5730\u9001\u5165\u663e\u5361\uff0c\u811a\u672c\u7684\u6027\u80fd\u5c31\u4f1a\u5927\u5e45\u63d0\u5347\u3002</p> <p>\u4e8c\u8fdb\u5236\u6570\u7ec4\u5c31\u662f\u5728\u8fd9\u79cd\u80cc\u666f\u4e0b\u8bde\u751f\u7684\u3002\u5b83\u5f88\u50cf C \u8bed\u8a00\u7684\u6570\u7ec4\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u4ee5\u6570\u7ec4\u4e0b\u6807\u7684\u5f62\u5f0f\uff0c\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58\uff0c\u5927\u5927\u589e\u5f3a\u4e86 JavaScript \u5904\u7406\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u80fd\u529b\uff0c\u4f7f\u5f97\u5f00\u53d1\u8005\u6709\u53ef\u80fd\u901a\u8fc7 JavaScript \u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7684\u539f\u751f\u63a5\u53e3\u8fdb\u884c\u4e8c\u8fdb\u5236\u901a\u4fe1\u3002</p> <p>\u4e8c\u8fdb\u5236\u6570\u7ec4\u7531\u4e09\u7c7b\u5bf9\u8c61\u7ec4\u6210\u3002</p> <p>\uff081\uff09<code>ArrayBuffer</code>\u5bf9\u8c61\uff1a\u4ee3\u8868\u5185\u5b58\u4e4b\u4e2d\u7684\u4e00\u6bb5\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u201c\u89c6\u56fe\u201d\u8fdb\u884c\u64cd\u4f5c\u3002\u201c\u89c6\u56fe\u201d\u90e8\u7f72\u4e86\u6570\u7ec4\u63a5\u53e3\uff0c\u8fd9\u610f\u5473\u7740\uff0c\u53ef\u4ee5\u7528\u6570\u7ec4\u7684\u65b9\u6cd5\u64cd\u4f5c\u5185\u5b58\u3002</p> <p>\uff082\uff09<code>TypedArray</code>\u89c6\u56fe\uff1a\u5171\u5305\u62ec 9 \u79cd\u7c7b\u578b\u7684\u89c6\u56fe\uff0c\u6bd4\u5982<code>Uint8Array</code>\uff08\u65e0\u7b26\u53f7 8 \u4f4d\u6574\u6570\uff09\u6570\u7ec4\u89c6\u56fe, <code>Int16Array</code>\uff0816 \u4f4d\u6574\u6570\uff09\u6570\u7ec4\u89c6\u56fe, <code>Float32Array</code>\uff0832 \u4f4d\u6d6e\u70b9\u6570\uff09\u6570\u7ec4\u89c6\u56fe\u7b49\u7b49\u3002</p> <p>\uff083\uff09<code>DataView</code>\u89c6\u56fe\uff1a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u590d\u5408\u683c\u5f0f\u7684\u89c6\u56fe\uff0c\u6bd4\u5982\u7b2c\u4e00\u4e2a\u5b57\u8282\u662f Uint8\uff08\u65e0\u7b26\u53f7 8 \u4f4d\u6574\u6570\uff09\u3001\u7b2c\u4e8c\u3001\u4e09\u4e2a\u5b57\u8282\u662f Int16\uff0816 \u4f4d\u6574\u6570\uff09\u3001\u7b2c\u56db\u4e2a\u5b57\u8282\u5f00\u59cb\u662f Float32\uff0832 \u4f4d\u6d6e\u70b9\u6570\uff09\u7b49\u7b49\uff0c\u6b64\u5916\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5b57\u8282\u5e8f\u3002</p> <p>\u7b80\u5355\u8bf4\uff0c<code>ArrayBuffer</code>\u5bf9\u8c61\u4ee3\u8868\u539f\u59cb\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c<code>TypedArray</code>\u89c6\u56fe\u7528\u6765\u8bfb\u5199\u7b80\u5355\u7c7b\u578b\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c<code>DataView</code>\u89c6\u56fe\u7528\u6765\u8bfb\u5199\u590d\u6742\u7c7b\u578b\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</p> <p><code>TypedArray</code>\u89c6\u56fe\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u4e00\u5171\u6709 9 \u79cd\uff08<code>DataView</code>\u89c6\u56fe\u652f\u6301\u9664<code>Uint8C</code>\u4ee5\u5916\u7684\u5176\u4ed6 8 \u79cd\uff09\u3002</p> \u6570\u636e\u7c7b\u578b \u5b57\u8282\u957f\u5ea6 \u542b\u4e49 \u5bf9\u5e94\u7684 C \u8bed\u8a00\u7c7b\u578b Int8 1 8 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570 signed char Uint8 1 8 \u4f4d\u4e0d\u5e26\u7b26\u53f7\u6574\u6570 unsigned char Uint8C 1 8 \u4f4d\u4e0d\u5e26\u7b26\u53f7\u6574\u6570\uff08\u81ea\u52a8\u8fc7\u6ee4\u6ea2\u51fa\uff09 unsigned char Int16 2 16 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570 short Uint16 2 16 \u4f4d\u4e0d\u5e26\u7b26\u53f7\u6574\u6570 unsigned short Int32 4 32 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570 int Uint32 4 32 \u4f4d\u4e0d\u5e26\u7b26\u53f7\u7684\u6574\u6570 unsigned int Float32 4 32 \u4f4d\u6d6e\u70b9\u6570 float Float64 8 64 \u4f4d\u6d6e\u70b9\u6570 double <p>\u6ce8\u610f\uff0c\u4e8c\u8fdb\u5236\u6570\u7ec4\u5e76\u4e0d\u662f\u771f\u6b63\u7684\u6570\u7ec4\uff0c\u800c\u662f\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61\u3002</p> <p>\u5f88\u591a\u6d4f\u89c8\u5668\u64cd\u4f5c\u7684 API\uff0c\u7528\u5230\u4e86\u4e8c\u8fdb\u5236\u6570\u7ec4\u64cd\u4f5c\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4e0b\u9762\u662f\u5176\u4e2d\u7684\u51e0\u4e2a\u3002</p> <ul> <li>Canvas</li> <li>Fetch API</li> <li>File API</li> <li>WebSockets</li> <li>XMLHttpRequest</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#arraybuffer","title":"ArrayBuffer \u5bf9\u8c61","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_1","title":"\u6982\u8ff0","text":"<p><code>ArrayBuffer</code>\u5bf9\u8c61\u4ee3\u8868\u50a8\u5b58\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4e00\u6bb5\u5185\u5b58\uff0c\u5b83\u4e0d\u80fd\u76f4\u63a5\u8bfb\u5199\uff0c\u53ea\u80fd\u901a\u8fc7\u89c6\u56fe\uff08<code>TypedArray</code>\u89c6\u56fe\u548c<code>DataView</code>\u89c6\u56fe)\u6765\u8bfb\u5199\uff0c\u89c6\u56fe\u7684\u4f5c\u7528\u662f\u4ee5\u6307\u5b9a\u683c\u5f0f\u89e3\u8bfb\u4e8c\u8fdb\u5236\u6570\u636e\u3002</p> <p><code>ArrayBuffer</code>\u4e5f\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u5206\u914d\u4e00\u6bb5\u53ef\u4ee5\u5b58\u653e\u6570\u636e\u7684\u8fde\u7eed\u5185\u5b58\u533a\u57df\u3002</p> <pre><code>const buf = new ArrayBuffer(32);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e86\u4e00\u6bb5 32 \u5b57\u8282\u7684\u5185\u5b58\u533a\u57df\uff0c\u6bcf\u4e2a\u5b57\u8282\u7684\u503c\u9ed8\u8ba4\u90fd\u662f 0\u3002\u53ef\u4ee5\u770b\u5230\uff0c<code>ArrayBuffer</code>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u662f\u6240\u9700\u8981\u7684\u5185\u5b58\u5927\u5c0f\uff08\u5355\u4f4d\u5b57\u8282\uff09\u3002</p> <p>\u4e3a\u4e86\u8bfb\u5199\u8fd9\u6bb5\u5185\u5bb9\uff0c\u9700\u8981\u4e3a\u5b83\u6307\u5b9a\u89c6\u56fe\u3002<code>DataView</code>\u89c6\u56fe\u7684\u521b\u5efa\uff0c\u9700\u8981\u63d0\u4f9b<code>ArrayBuffer</code>\u5bf9\u8c61\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>const buf = new ArrayBuffer(32);\nconst dataView = new DataView(buf);\ndataView.getUint8(0) // 0\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u4e00\u6bb5 32 \u5b57\u8282\u7684\u5185\u5b58\uff0c\u5efa\u7acb<code>DataView</code>\u89c6\u56fe\uff0c\u7136\u540e\u4ee5\u4e0d\u5e26\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\u683c\u5f0f\uff0c\u4ece\u5934\u8bfb\u53d6 8 \u4f4d\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u7ed3\u679c\u5f97\u5230 0\uff0c\u56e0\u4e3a\u539f\u59cb\u5185\u5b58\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u9ed8\u8ba4\u6240\u6709\u4f4d\u90fd\u662f 0\u3002</p> <p>\u53e6\u4e00\u79cd<code>TypedArray</code>\u89c6\u56fe\uff0c\u4e0e<code>DataView</code>\u89c6\u56fe\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff0c\u5b83\u4e0d\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u800c\u662f\u4e00\u7ec4\u6784\u9020\u51fd\u6570\uff0c\u4ee3\u8868\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f\u3002</p> <pre><code>const buffer = new ArrayBuffer(12);\n\nconst x1 = new Int32Array(buffer);\nx1[0] = 1;\nconst x2 = new Uint8Array(buffer);\nx2[0]  = 2;\n\nx1[0] // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5bf9\u540c\u4e00\u6bb5\u5185\u5b58\uff0c\u5206\u522b\u5efa\u7acb\u4e24\u79cd\u89c6\u56fe\uff1a32 \u4f4d\u5e26\u7b26\u53f7\u6574\u6570\uff08<code>Int32Array</code>\u6784\u9020\u51fd\u6570\uff09\u548c 8 \u4f4d\u4e0d\u5e26\u7b26\u53f7\u6574\u6570\uff08<code>Uint8Array</code>\u6784\u9020\u51fd\u6570\uff09\u3002\u7531\u4e8e\u4e24\u4e2a\u89c6\u56fe\u5bf9\u5e94\u7684\u662f\u540c\u4e00\u6bb5\u5185\u5b58\uff0c\u4e00\u4e2a\u89c6\u56fe\u4fee\u6539\u5e95\u5c42\u5185\u5b58\uff0c\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u89c6\u56fe\u3002</p> <p><code>TypedArray</code>\u89c6\u56fe\u7684\u6784\u9020\u51fd\u6570\uff0c\u9664\u4e86\u63a5\u53d7<code>ArrayBuffer</code>\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u63a5\u53d7\u666e\u901a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u76f4\u63a5\u5206\u914d\u5185\u5b58\u751f\u6210\u5e95\u5c42\u7684<code>ArrayBuffer</code>\u5b9e\u4f8b\uff0c\u5e76\u540c\u65f6\u5b8c\u6210\u5bf9\u8fd9\u6bb5\u5185\u5b58\u7684\u8d4b\u503c\u3002</p> <pre><code>const typedArray = new Uint8Array([0,1,2]);\ntypedArray.length // 3\n\ntypedArray[0] = 5;\ntypedArray // [5, 1, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528<code>TypedArray</code>\u89c6\u56fe\u7684<code>Uint8Array</code>\u6784\u9020\u51fd\u6570\uff0c\u65b0\u5efa\u4e00\u4e2a\u4e0d\u5e26\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\u89c6\u56fe\u3002\u53ef\u4ee5\u770b\u5230\uff0c<code>Uint8Array</code>\u76f4\u63a5\u4f7f\u7528\u666e\u901a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u5bf9\u5e95\u5c42\u5185\u5b58\u7684\u8d4b\u503c\u540c\u65f6\u5b8c\u6210\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#arraybufferprototypebytelength","title":"ArrayBuffer.prototype.byteLength","text":"<p><code>ArrayBuffer</code>\u5b9e\u4f8b\u7684<code>byteLength</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u6240\u5206\u914d\u7684\u5185\u5b58\u533a\u57df\u7684\u5b57\u8282\u957f\u5ea6\u3002</p> <pre><code>const buffer = new ArrayBuffer(32);\nbuffer.byteLength\n// 32\n</code></pre> <p>\u5982\u679c\u8981\u5206\u914d\u7684\u5185\u5b58\u533a\u57df\u5f88\u5927\uff0c\u6709\u53ef\u80fd\u5206\u914d\u5931\u8d25\uff08\u56e0\u4e3a\u6ca1\u6709\u90a3\u4e48\u591a\u7684\u8fde\u7eed\u7a7a\u4f59\u5185\u5b58\uff09\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u68c0\u67e5\u662f\u5426\u5206\u914d\u6210\u529f\u3002</p> <pre><code>if (buffer.byteLength === n) {\n  // \u6210\u529f\n} else {\n  // \u5931\u8d25\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#arraybufferprototypeslice","title":"ArrayBuffer.prototype.slice()","text":"<p><code>ArrayBuffer</code>\u5b9e\u4f8b\u6709\u4e00\u4e2a<code>slice</code>\u65b9\u6cd5\uff0c\u5141\u8bb8\u5c06\u5185\u5b58\u533a\u57df\u7684\u4e00\u90e8\u5206\uff0c\u62f7\u8d1d\u751f\u6210\u4e00\u4e2a\u65b0\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\u3002</p> <pre><code>const buffer = new ArrayBuffer(8);\nconst newBuffer = buffer.slice(0, 3);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u62f7\u8d1d<code>buffer</code>\u5bf9\u8c61\u7684\u524d 3 \u4e2a\u5b57\u8282\uff08\u4ece 0 \u5f00\u59cb\uff0c\u5230\u7b2c 3 \u4e2a\u5b57\u8282\u524d\u9762\u7ed3\u675f\uff09\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\u3002<code>slice</code>\u65b9\u6cd5\u5176\u5b9e\u5305\u542b\u4e24\u6b65\uff0c\u7b2c\u4e00\u6b65\u662f\u5148\u5206\u914d\u4e00\u6bb5\u65b0\u5185\u5b58\uff0c\u7b2c\u4e8c\u6b65\u662f\u5c06\u539f\u6765\u90a3\u4e2a<code>ArrayBuffer</code>\u5bf9\u8c61\u62f7\u8d1d\u8fc7\u53bb\u3002</p> <p><code>slice</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u62f7\u8d1d\u5f00\u59cb\u7684\u5b57\u8282\u5e8f\u53f7\uff08\u542b\u8be5\u5b57\u8282\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u62f7\u8d1d\u622a\u6b62\u7684\u5b57\u8282\u5e8f\u53f7\uff08\u4e0d\u542b\u8be5\u5b57\u8282\uff09\u3002\u5982\u679c\u7701\u7565\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u5230\u539f<code>ArrayBuffer</code>\u5bf9\u8c61\u7684\u7ed3\u5c3e\u3002</p> <p>\u9664\u4e86<code>slice</code>\u65b9\u6cd5\uff0c<code>ArrayBuffer</code>\u5bf9\u8c61\u4e0d\u63d0\u4f9b\u4efb\u4f55\u76f4\u63a5\u8bfb\u5199\u5185\u5b58\u7684\u65b9\u6cd5\uff0c\u53ea\u5141\u8bb8\u5728\u5176\u4e0a\u65b9\u5efa\u7acb\u89c6\u56fe\uff0c\u7136\u540e\u901a\u8fc7\u89c6\u56fe\u8bfb\u5199\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#arraybufferisview","title":"ArrayBuffer.isView()","text":"<p><code>ArrayBuffer</code>\u6709\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5<code>isView</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u53c2\u6570\u662f\u5426\u4e3a<code>ArrayBuffer</code>\u7684\u89c6\u56fe\u5b9e\u4f8b\u3002\u8fd9\u4e2a\u65b9\u6cd5\u5927\u81f4\u76f8\u5f53\u4e8e\u5224\u65ad\u53c2\u6570\uff0c\u662f\u5426\u4e3a<code>TypedArray</code>\u5b9e\u4f8b\u6216<code>DataView</code>\u5b9e\u4f8b\u3002</p> <pre><code>const buffer = new ArrayBuffer(8);\nArrayBuffer.isView(buffer) // false\n\nconst v = new Int32Array(buffer);\nArrayBuffer.isView(v) // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarray","title":"TypedArray \u89c6\u56fe","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_2","title":"\u6982\u8ff0","text":"<p><code>ArrayBuffer</code>\u5bf9\u8c61\u4f5c\u4e3a\u5185\u5b58\u533a\u57df\uff0c\u53ef\u4ee5\u5b58\u653e\u591a\u79cd\u7c7b\u578b\u7684\u6570\u636e\u3002\u540c\u4e00\u6bb5\u5185\u5b58\uff0c\u4e0d\u540c\u6570\u636e\u6709\u4e0d\u540c\u7684\u89e3\u8bfb\u65b9\u5f0f\uff0c\u8fd9\u5c31\u53eb\u505a\u201c\u89c6\u56fe\u201d\uff08view\uff09\u3002<code>ArrayBuffer</code>\u6709\u4e24\u79cd\u89c6\u56fe\uff0c\u4e00\u79cd\u662f<code>TypedArray</code>\u89c6\u56fe\uff0c\u53e6\u4e00\u79cd\u662f<code>DataView</code>\u89c6\u56fe\u3002\u524d\u8005\u7684\u6570\u7ec4\u6210\u5458\u90fd\u662f\u540c\u4e00\u4e2a\u6570\u636e\u7c7b\u578b\uff0c\u540e\u8005\u7684\u6570\u7ec4\u6210\u5458\u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u76ee\u524d\uff0c<code>TypedArray</code>\u89c6\u56fe\u4e00\u5171\u5305\u62ec 9 \u79cd\u7c7b\u578b\uff0c\u6bcf\u4e00\u79cd\u89c6\u56fe\u90fd\u662f\u4e00\u79cd\u6784\u9020\u51fd\u6570\u3002</p> <ul> <li><code>Int8Array</code>\uff1a8 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 1 \u4e2a\u5b57\u8282\u3002</li> <li><code>Uint8Array</code>\uff1a8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 1 \u4e2a\u5b57\u8282\u3002</li> <li><code>Uint8ClampedArray</code>\uff1a8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 1 \u4e2a\u5b57\u8282\uff0c\u6ea2\u51fa\u5904\u7406\u4e0d\u540c\u3002</li> <li><code>Int16Array</code>\uff1a16 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 2 \u4e2a\u5b57\u8282\u3002</li> <li><code>Uint16Array</code>\uff1a16 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 2 \u4e2a\u5b57\u8282\u3002</li> <li><code>Int32Array</code>\uff1a32 \u4f4d\u6709\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 4 \u4e2a\u5b57\u8282\u3002</li> <li><code>Uint32Array</code>\uff1a32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u957f\u5ea6 4 \u4e2a\u5b57\u8282\u3002</li> <li><code>Float32Array</code>\uff1a32 \u4f4d\u6d6e\u70b9\u6570\uff0c\u957f\u5ea6 4 \u4e2a\u5b57\u8282\u3002</li> <li><code>Float64Array</code>\uff1a64 \u4f4d\u6d6e\u70b9\u6570\uff0c\u957f\u5ea6 8 \u4e2a\u5b57\u8282\u3002</li> </ul> <p>\u8fd9 9 \u4e2a\u6784\u9020\u51fd\u6570\u751f\u6210\u7684\u6570\u7ec4\uff0c\u7edf\u79f0\u4e3a<code>TypedArray</code>\u89c6\u56fe\u3002\u5b83\u4eec\u5f88\u50cf\u666e\u901a\u6570\u7ec4\uff0c\u90fd\u6709<code>length</code>\u5c5e\u6027\uff0c\u90fd\u80fd\u7528\u65b9\u62ec\u53f7\u8fd0\u7b97\u7b26\uff08<code>[]</code>\uff09\u83b7\u53d6\u5355\u4e2a\u5143\u7d20\uff0c\u6240\u6709\u6570\u7ec4\u7684\u65b9\u6cd5\uff0c\u5728\u5b83\u4eec\u4e0a\u9762\u90fd\u80fd\u4f7f\u7528\u3002\u666e\u901a\u6570\u7ec4\u4e0e TypedArray \u6570\u7ec4\u7684\u5dee\u5f02\u4e3b\u8981\u5728\u4ee5\u4e0b\u65b9\u9762\u3002</p> <ul> <li>TypedArray \u6570\u7ec4\u7684\u6240\u6709\u6210\u5458\uff0c\u90fd\u662f\u540c\u4e00\u79cd\u7c7b\u578b\u3002</li> <li>TypedArray \u6570\u7ec4\u7684\u6210\u5458\u662f\u8fde\u7eed\u7684\uff0c\u4e0d\u4f1a\u6709\u7a7a\u4f4d\u3002</li> <li>TypedArray \u6570\u7ec4\u6210\u5458\u7684\u9ed8\u8ba4\u503c\u4e3a 0\u3002\u6bd4\u5982\uff0c<code>new Array(10)</code>\u8fd4\u56de\u4e00\u4e2a\u666e\u901a\u6570\u7ec4\uff0c\u91cc\u9762\u6ca1\u6709\u4efb\u4f55\u6210\u5458\uff0c\u53ea\u662f 10 \u4e2a\u7a7a\u4f4d\uff1b<code>new Uint8Array(10)</code>\u8fd4\u56de\u4e00\u4e2a TypedArray \u6570\u7ec4\uff0c\u91cc\u9762 10 \u4e2a\u6210\u5458\u90fd\u662f 0\u3002</li> <li>TypedArray \u6570\u7ec4\u53ea\u662f\u4e00\u5c42\u89c6\u56fe\uff0c\u672c\u8eab\u4e0d\u50a8\u5b58\u6570\u636e\uff0c\u5b83\u7684\u6570\u636e\u90fd\u50a8\u5b58\u5728\u5e95\u5c42\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\u4e4b\u4e2d\uff0c\u8981\u83b7\u53d6\u5e95\u5c42\u5bf9\u8c61\u5fc5\u987b\u4f7f\u7528<code>buffer</code>\u5c5e\u6027\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_3","title":"\u6784\u9020\u51fd\u6570","text":"<p>TypedArray \u6570\u7ec4\u63d0\u4f9b 9 \u79cd\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210\u76f8\u5e94\u7c7b\u578b\u7684\u6570\u7ec4\u5b9e\u4f8b\u3002</p> <p>\u6784\u9020\u51fd\u6570\u6709\u591a\u79cd\u7528\u6cd5\u3002</p> <p>\uff081\uff09TypedArray(buffer, byteOffset=0, length?)</p> <p>\u540c\u4e00\u4e2a<code>ArrayBuffer</code>\u5bf9\u8c61\u4e4b\u4e0a\uff0c\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5efa\u7acb\u591a\u4e2a\u89c6\u56fe\u3002</p> <pre><code>// \u521b\u5efa\u4e00\u4e2a8\u5b57\u8282\u7684ArrayBuffer\nconst b = new ArrayBuffer(8);\n\n// \u521b\u5efa\u4e00\u4e2a\u6307\u5411b\u7684Int32\u89c6\u56fe\uff0c\u5f00\u59cb\u4e8e\u5b57\u82820\uff0c\u76f4\u5230\u7f13\u51b2\u533a\u7684\u672b\u5c3e\nconst v1 = new Int32Array(b);\n\n// \u521b\u5efa\u4e00\u4e2a\u6307\u5411b\u7684Uint8\u89c6\u56fe\uff0c\u5f00\u59cb\u4e8e\u5b57\u82822\uff0c\u76f4\u5230\u7f13\u51b2\u533a\u7684\u672b\u5c3e\nconst v2 = new Uint8Array(b, 2);\n\n// \u521b\u5efa\u4e00\u4e2a\u6307\u5411b\u7684Int16\u89c6\u56fe\uff0c\u5f00\u59cb\u4e8e\u5b57\u82822\uff0c\u957f\u5ea6\u4e3a2\nconst v3 = new Int16Array(b, 2, 2);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5728\u4e00\u6bb5\u957f\u5ea6\u4e3a 8 \u4e2a\u5b57\u8282\u7684\u5185\u5b58\uff08<code>b</code>\uff09\u4e4b\u4e0a\uff0c\u751f\u6210\u4e86\u4e09\u4e2a\u89c6\u56fe\uff1a<code>v1</code>\u3001<code>v2</code>\u548c<code>v3</code>\u3002</p> <p>\u89c6\u56fe\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a</p> <ul> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08\u5fc5\u9700\uff09\uff1a\u89c6\u56fe\u5bf9\u5e94\u7684\u5e95\u5c42<code>ArrayBuffer</code>\u5bf9\u8c61\u3002</li> <li>\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff08\u53ef\u9009\uff09\uff1a\u89c6\u56fe\u5f00\u59cb\u7684\u5b57\u8282\u5e8f\u53f7\uff0c\u9ed8\u8ba4\u4ece 0 \u5f00\u59cb\u3002</li> <li>\u7b2c\u4e09\u4e2a\u53c2\u6570\uff08\u53ef\u9009\uff09\uff1a\u89c6\u56fe\u5305\u542b\u7684\u6570\u636e\u4e2a\u6570\uff0c\u9ed8\u8ba4\u76f4\u5230\u672c\u6bb5\u5185\u5b58\u533a\u57df\u7ed3\u675f\u3002</li> </ul> <p>\u56e0\u6b64\uff0c<code>v1</code>\u3001<code>v2</code>\u548c<code>v3</code>\u662f\u91cd\u53e0\u7684\uff1a<code>v1[0]</code>\u662f\u4e00\u4e2a 32 \u4f4d\u6574\u6570\uff0c\u6307\u5411\u5b57\u8282 0 \uff5e\u5b57\u8282 3\uff1b<code>v2[0]</code>\u662f\u4e00\u4e2a 8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u6307\u5411\u5b57\u8282 2\uff1b<code>v3[0]</code>\u662f\u4e00\u4e2a 16 \u4f4d\u6574\u6570\uff0c\u6307\u5411\u5b57\u8282 2 \uff5e\u5b57\u8282 3\u3002\u53ea\u8981\u4efb\u4f55\u4e00\u4e2a\u89c6\u56fe\u5bf9\u5185\u5b58\u6709\u6240\u4fee\u6539\uff0c\u5c31\u4f1a\u5728\u53e6\u5916\u4e24\u4e2a\u89c6\u56fe\u4e0a\u53cd\u5e94\u51fa\u6765\u3002</p> <p>\u6ce8\u610f\uff0c<code>byteOffset</code>\u5fc5\u987b\u4e0e\u6240\u8981\u5efa\u7acb\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>const buffer = new ArrayBuffer(8);\nconst i16 = new Int16Array(buffer, 1);\n// Uncaught RangeError: start offset of Int16Array should be a multiple of 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u65b0\u751f\u6210\u4e00\u4e2a 8 \u4e2a\u5b57\u8282\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u5bf9\u8c61\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\uff0c\u5efa\u7acb\u5e26\u7b26\u53f7\u7684 16 \u4f4d\u6574\u6570\u89c6\u56fe\uff0c\u7ed3\u679c\u62a5\u9519\u3002\u56e0\u4e3a\uff0c\u5e26\u7b26\u53f7\u7684 16 \u4f4d\u6574\u6570\u9700\u8981\u4e24\u4e2a\u5b57\u8282\uff0c\u6240\u4ee5<code>byteOffset</code>\u53c2\u6570\u5fc5\u987b\u80fd\u591f\u88ab 2 \u6574\u9664\u3002</p> <p>\u5982\u679c\u60f3\u4ece\u4efb\u610f\u5b57\u8282\u5f00\u59cb\u89e3\u8bfb<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u5fc5\u987b\u4f7f\u7528<code>DataView</code>\u89c6\u56fe\uff0c\u56e0\u4e3a<code>TypedArray</code>\u89c6\u56fe\u53ea\u63d0\u4f9b 9 \u79cd\u56fa\u5b9a\u7684\u89e3\u8bfb\u683c\u5f0f\u3002</p> <p>\uff082\uff09TypedArray(length)</p> <p>\u89c6\u56fe\u8fd8\u53ef\u4ee5\u4e0d\u901a\u8fc7<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u76f4\u63a5\u5206\u914d\u5185\u5b58\u800c\u751f\u6210\u3002</p> <pre><code>const f64a = new Float64Array(8);\nf64a[0] = 10;\nf64a[1] = 20;\nf64a[2] = f64a[0] + f64a[1];\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a 8 \u4e2a\u6210\u5458\u7684<code>Float64Array</code>\u6570\u7ec4\uff08\u5171 64 \u5b57\u8282\uff09\uff0c\u7136\u540e\u4f9d\u6b21\u5bf9\u6bcf\u4e2a\u6210\u5458\u8d4b\u503c\u3002\u8fd9\u65f6\uff0c\u89c6\u56fe\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5c31\u662f\u6210\u5458\u7684\u4e2a\u6570\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u89c6\u56fe\u6570\u7ec4\u7684\u8d4b\u503c\u64cd\u4f5c\u4e0e\u666e\u901a\u6570\u7ec4\u7684\u64cd\u4f5c\u6beb\u65e0\u4e24\u6837\u3002</p> <p>\uff083\uff09TypedArray(typedArray)</p> <p>TypedArray \u6570\u7ec4\u7684\u6784\u9020\u51fd\u6570\uff0c\u53ef\u4ee5\u63a5\u53d7\u53e6\u4e00\u4e2a<code>TypedArray</code>\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>const typedArray = new Int8Array(new Uint8Array(4));\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Int8Array</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a<code>Uint8Array</code>\u5b9e\u4f8b\u4f5c\u4e3a\u53c2\u6570\u3002</p> <p>\u6ce8\u610f\uff0c\u6b64\u65f6\u751f\u6210\u7684\u65b0\u6570\u7ec4\uff0c\u53ea\u662f\u590d\u5236\u4e86\u53c2\u6570\u6570\u7ec4\u7684\u503c\uff0c\u5bf9\u5e94\u7684\u5e95\u5c42\u5185\u5b58\u662f\u4e0d\u4e00\u6837\u7684\u3002\u65b0\u6570\u7ec4\u4f1a\u5f00\u8f9f\u4e00\u6bb5\u65b0\u7684\u5185\u5b58\u50a8\u5b58\u6570\u636e\uff0c\u4e0d\u4f1a\u5728\u539f\u6570\u7ec4\u7684\u5185\u5b58\u4e4b\u4e0a\u5efa\u7acb\u89c6\u56fe\u3002</p> <pre><code>const x = new Int8Array([1, 1]);\nconst y = new Int8Array(x);\nx[0] // 1\ny[0] // 1\n\nx[0] = 2;\ny[0] // 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>y</code>\u662f\u4ee5\u6570\u7ec4<code>x</code>\u4e3a\u6a21\u677f\u800c\u751f\u6210\u7684\uff0c\u5f53<code>x</code>\u53d8\u52a8\u7684\u65f6\u5019\uff0c<code>y</code>\u5e76\u6ca1\u6709\u53d8\u52a8\u3002</p> <p>\u5982\u679c\u60f3\u57fa\u4e8e\u540c\u4e00\u6bb5\u5185\u5b58\uff0c\u6784\u9020\u4e0d\u540c\u7684\u89c6\u56fe\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5199\u6cd5\u3002</p> <pre><code>const x = new Int8Array([1, 1]);\nconst y = new Int8Array(x.buffer);\nx[0] // 1\ny[0] // 1\n\nx[0] = 2;\ny[0] // 2\n</code></pre> <p>\uff084\uff09TypedArray(arrayLikeObject)</p> <p>\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u666e\u901a\u6570\u7ec4\uff0c\u7136\u540e\u76f4\u63a5\u751f\u6210<code>TypedArray</code>\u5b9e\u4f8b\u3002</p> <pre><code>const typedArray = new Uint8Array([1, 2, 3, 4]);\n</code></pre> <p>\u6ce8\u610f\uff0c\u8fd9\u65f6<code>TypedArray</code>\u89c6\u56fe\u4f1a\u91cd\u65b0\u5f00\u8f9f\u5185\u5b58\uff0c\u4e0d\u4f1a\u5728\u539f\u6570\u7ec4\u7684\u5185\u5b58\u4e0a\u5efa\u7acb\u89c6\u56fe\u3002</p> <p>\u4e0a\u9762\u4ee3\u7801\u4ece\u4e00\u4e2a\u666e\u901a\u7684\u6570\u7ec4\uff0c\u751f\u6210\u4e00\u4e2a 8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u7684<code>TypedArray</code>\u5b9e\u4f8b\u3002</p> <p>TypedArray \u6570\u7ec4\u4e5f\u53ef\u4ee5\u8f6c\u6362\u56de\u666e\u901a\u6570\u7ec4\u3002</p> <pre><code>const normalArray = [...typedArray];\n// or\nconst normalArray = Array.from(typedArray);\n// or\nconst normalArray = Array.prototype.slice.call(typedArray);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_4","title":"\u6570\u7ec4\u65b9\u6cd5","text":"<p>\u666e\u901a\u6570\u7ec4\u7684\u64cd\u4f5c\u65b9\u6cd5\u548c\u5c5e\u6027\uff0c\u5bf9 TypedArray \u6570\u7ec4\u5b8c\u5168\u9002\u7528\u3002</p> <ul> <li><code>TypedArray.prototype.copyWithin(target, start[, end = this.length])</code></li> <li><code>TypedArray.prototype.entries()</code></li> <li><code>TypedArray.prototype.every(callbackfn, thisArg?)</code></li> <li><code>TypedArray.prototype.fill(value, start=0, end=this.length)</code></li> <li><code>TypedArray.prototype.filter(callbackfn, thisArg?)</code></li> <li><code>TypedArray.prototype.find(predicate, thisArg?)</code></li> <li><code>TypedArray.prototype.findIndex(predicate, thisArg?)</code></li> <li><code>TypedArray.prototype.forEach(callbackfn, thisArg?)</code></li> <li><code>TypedArray.prototype.indexOf(searchElement, fromIndex=0)</code></li> <li><code>TypedArray.prototype.join(separator)</code></li> <li><code>TypedArray.prototype.keys()</code></li> <li><code>TypedArray.prototype.lastIndexOf(searchElement, fromIndex?)</code></li> <li><code>TypedArray.prototype.map(callbackfn, thisArg?)</code></li> <li><code>TypedArray.prototype.reduce(callbackfn, initialValue?)</code></li> <li><code>TypedArray.prototype.reduceRight(callbackfn, initialValue?)</code></li> <li><code>TypedArray.prototype.reverse()</code></li> <li><code>TypedArray.prototype.slice(start=0, end=this.length)</code></li> <li><code>TypedArray.prototype.some(callbackfn, thisArg?)</code></li> <li><code>TypedArray.prototype.sort(comparefn)</code></li> <li><code>TypedArray.prototype.toLocaleString(reserved1?, reserved2?)</code></li> <li><code>TypedArray.prototype.toString()</code></li> <li><code>TypedArray.prototype.values()</code></li> </ul> <p>\u4e0a\u9762\u6240\u6709\u65b9\u6cd5\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u9605\u6570\u7ec4\u65b9\u6cd5\u7684\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u4e86\u3002</p> <p>\u6ce8\u610f\uff0cTypedArray \u6570\u7ec4\u6ca1\u6709<code>concat</code>\u65b9\u6cd5\u3002\u5982\u679c\u60f3\u8981\u5408\u5e76\u591a\u4e2a TypedArray \u6570\u7ec4\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u3002</p> <pre><code>function concatenate(resultConstructor, ...arrays) {\n  let totalLength = 0;\n  for (let arr of arrays) {\n    totalLength += arr.length;\n  }\n  let result = new resultConstructor(totalLength);\n  let offset = 0;\n  for (let arr of arrays) {\n    result.set(arr, offset);\n    offset += arr.length;\n  }\n  return result;\n}\n\nconcatenate(Uint8Array, Uint8Array.of(1, 2), Uint8Array.of(3, 4))\n// Uint8Array [1, 2, 3, 4]\n</code></pre> <p>\u53e6\u5916\uff0cTypedArray \u6570\u7ec4\u4e0e\u666e\u901a\u6570\u7ec4\u4e00\u6837\uff0c\u90e8\u7f72\u4e86 Iterator \u63a5\u53e3\uff0c\u6240\u4ee5\u53ef\u4ee5\u88ab\u904d\u5386\u3002</p> <pre><code>let ui8 = Uint8Array.of(0, 1, 2);\nfor (let byte of ui8) {\n  console.log(byte);\n}\n// 0\n// 1\n// 2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_5","title":"\u5b57\u8282\u5e8f","text":"<p>\u5b57\u8282\u5e8f\u6307\u7684\u662f\u6570\u503c\u5728\u5185\u5b58\u4e2d\u7684\u8868\u793a\u65b9\u5f0f\u3002</p> <pre><code>const buffer = new ArrayBuffer(16);\nconst int32View = new Int32Array(buffer);\n\nfor (let i = 0; i &lt; int32View.length; i++) {\n  int32View[i] = i * 2;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u751f\u6210\u4e00\u4e2a 16 \u5b57\u8282\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u7136\u540e\u5728\u5b83\u7684\u57fa\u7840\u4e0a\uff0c\u5efa\u7acb\u4e86\u4e00\u4e2a 32 \u4f4d\u6574\u6570\u7684\u89c6\u56fe\u3002\u7531\u4e8e\u6bcf\u4e2a 32 \u4f4d\u6574\u6570\u5360\u636e 4 \u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u4e00\u5171\u53ef\u4ee5\u5199\u5165 4 \u4e2a\u6574\u6570\uff0c\u4f9d\u6b21\u4e3a 0\uff0c2\uff0c4\uff0c6\u3002</p> <p>\u5982\u679c\u5728\u8fd9\u6bb5\u6570\u636e\u4e0a\u63a5\u7740\u5efa\u7acb\u4e00\u4e2a 16 \u4f4d\u6574\u6570\u7684\u89c6\u56fe\uff0c\u5219\u53ef\u4ee5\u8bfb\u51fa\u5b8c\u5168\u4e0d\u4e00\u6837\u7684\u7ed3\u679c\u3002</p> <pre><code>const int16View = new Int16Array(buffer);\n\nfor (let i = 0; i &lt; int16View.length; i++) {\n  console.log(\"Entry \" + i + \": \" + int16View[i]);\n}\n// Entry 0: 0\n// Entry 1: 0\n// Entry 2: 2\n// Entry 3: 0\n// Entry 4: 4\n// Entry 5: 0\n// Entry 6: 6\n// Entry 7: 0\n</code></pre> <p>\u7531\u4e8e\u6bcf\u4e2a 16 \u4f4d\u6574\u6570\u5360\u636e 2 \u4e2a\u5b57\u8282\uff0c\u6240\u4ee5\u6574\u4e2a<code>ArrayBuffer</code>\u5bf9\u8c61\u73b0\u5728\u5206\u6210 8 \u6bb5\u3002\u7136\u540e\uff0c\u7531\u4e8e x86 \u4f53\u7cfb\u7684\u8ba1\u7b97\u673a\u90fd\u91c7\u7528\u5c0f\u7aef\u5b57\u8282\u5e8f\uff08little endian\uff09\uff0c\u76f8\u5bf9\u91cd\u8981\u7684\u5b57\u8282\u6392\u5728\u540e\u9762\u7684\u5185\u5b58\u5730\u5740\uff0c\u76f8\u5bf9\u4e0d\u91cd\u8981\u5b57\u8282\u6392\u5728\u524d\u9762\u7684\u5185\u5b58\u5730\u5740\uff0c\u6240\u4ee5\u5c31\u5f97\u5230\u4e86\u4e0a\u9762\u7684\u7ed3\u679c\u3002</p> <p>\u6bd4\u5982\uff0c\u4e00\u4e2a\u5360\u636e\u56db\u4e2a\u5b57\u8282\u7684 16 \u8fdb\u5236\u6570<code>0x12345678</code>\uff0c\u51b3\u5b9a\u5176\u5927\u5c0f\u7684\u6700\u91cd\u8981\u7684\u5b57\u8282\u662f\u201c12\u201d\uff0c\u6700\u4e0d\u91cd\u8981\u7684\u662f\u201c78\u201d\u3002\u5c0f\u7aef\u5b57\u8282\u5e8f\u5c06\u6700\u4e0d\u91cd\u8981\u7684\u5b57\u8282\u6392\u5728\u524d\u9762\uff0c\u50a8\u5b58\u987a\u5e8f\u5c31\u662f<code>78563412</code>\uff1b\u5927\u7aef\u5b57\u8282\u5e8f\u5219\u5b8c\u5168\u76f8\u53cd\uff0c\u5c06\u6700\u91cd\u8981\u7684\u5b57\u8282\u6392\u5728\u524d\u9762\uff0c\u50a8\u5b58\u987a\u5e8f\u5c31\u662f<code>12345678</code>\u3002\u76ee\u524d\uff0c\u6240\u6709\u4e2a\u4eba\u7535\u8111\u51e0\u4e4e\u90fd\u662f\u5c0f\u7aef\u5b57\u8282\u5e8f\uff0c\u6240\u4ee5 TypedArray \u6570\u7ec4\u5185\u90e8\u4e5f\u91c7\u7528\u5c0f\u7aef\u5b57\u8282\u5e8f\u8bfb\u5199\u6570\u636e\uff0c\u6216\u8005\u66f4\u51c6\u786e\u7684\u8bf4\uff0c\u6309\u7167\u672c\u673a\u64cd\u4f5c\u7cfb\u7edf\u8bbe\u5b9a\u7684\u5b57\u8282\u5e8f\u8bfb\u5199\u6570\u636e\u3002</p> <p>\u8fd9\u5e76\u4e0d\u610f\u5473\u5927\u7aef\u5b57\u8282\u5e8f\u4e0d\u91cd\u8981\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u5f88\u591a\u7f51\u7edc\u8bbe\u5907\u548c\u7279\u5b9a\u7684\u64cd\u4f5c\u7cfb\u7edf\u91c7\u7528\u7684\u662f\u5927\u7aef\u5b57\u8282\u5e8f\u3002\u8fd9\u5c31\u5e26\u6765\u4e00\u4e2a\u4e25\u91cd\u7684\u95ee\u9898\uff1a\u5982\u679c\u4e00\u6bb5\u6570\u636e\u662f\u5927\u7aef\u5b57\u8282\u5e8f\uff0cTypedArray \u6570\u7ec4\u5c06\u65e0\u6cd5\u6b63\u786e\u89e3\u6790\uff0c\u56e0\u4e3a\u5b83\u53ea\u80fd\u5904\u7406\u5c0f\u7aef\u5b57\u8282\u5e8f\uff01\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cJavaScript \u5f15\u5165<code>DataView</code>\u5bf9\u8c61\uff0c\u53ef\u4ee5\u8bbe\u5b9a\u5b57\u8282\u5e8f\uff0c\u4e0b\u6587\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u5047\u5b9a\u67d0\u6bb5buffer\u5305\u542b\u5982\u4e0b\u5b57\u8282 [0x02, 0x01, 0x03, 0x07]\nconst buffer = new ArrayBuffer(4);\nconst v1 = new Uint8Array(buffer);\nv1[0] = 2;\nv1[1] = 1;\nv1[2] = 3;\nv1[3] = 7;\n\nconst uInt16View = new Uint16Array(buffer);\n\n// \u8ba1\u7b97\u673a\u91c7\u7528\u5c0f\u7aef\u5b57\u8282\u5e8f\n// \u6240\u4ee5\u5934\u4e24\u4e2a\u5b57\u8282\u7b49\u4e8e258\nif (uInt16View[0] === 258) {\n  console.log('OK'); // \"OK\"\n}\n\n// \u8d4b\u503c\u8fd0\u7b97\nuInt16View[0] = 255;    // \u5b57\u8282\u53d8\u4e3a[0xFF, 0x00, 0x03, 0x07]\nuInt16View[0] = 0xff05; // \u5b57\u8282\u53d8\u4e3a[0x05, 0xFF, 0x03, 0x07]\nuInt16View[1] = 0x0210; // \u5b57\u8282\u53d8\u4e3a[0x05, 0xFF, 0x10, 0x02]\n</code></pre> <p>\u4e0b\u9762\u7684\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u5224\u65ad\uff0c\u5f53\u524d\u89c6\u56fe\u662f\u5c0f\u7aef\u5b57\u8282\u5e8f\uff0c\u8fd8\u662f\u5927\u7aef\u5b57\u8282\u5e8f\u3002</p> <pre><code>const BIG_ENDIAN = Symbol('BIG_ENDIAN');\nconst LITTLE_ENDIAN = Symbol('LITTLE_ENDIAN');\n\nfunction getPlatformEndianness() {\n  let arr32 = Uint32Array.of(0x12345678);\n  let arr8 = new Uint8Array(arr32.buffer);\n  switch ((arr8[0]*0x1000000) + (arr8[1]*0x10000) + (arr8[2]*0x100) + (arr8[3])) {\n    case 0x12345678:\n      return BIG_ENDIAN;\n    case 0x78563412:\n      return LITTLE_ENDIAN;\n    default:\n      throw new Error('Unknown endianness');\n  }\n}\n</code></pre> <p>\u603b\u4e4b\uff0c\u4e0e\u666e\u901a\u6570\u7ec4\u76f8\u6bd4\uff0cTypedArray \u6570\u7ec4\u7684\u6700\u5927\u4f18\u70b9\u5c31\u662f\u53ef\u4ee5\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58\uff0c\u4e0d\u9700\u8981\u6570\u636e\u7c7b\u578b\u8f6c\u6362\uff0c\u6240\u4ee5\u901f\u5ea6\u5feb\u5f97\u591a\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#bytes_per_element","title":"BYTES_PER_ELEMENT \u5c5e\u6027","text":"<p>\u6bcf\u4e00\u79cd\u89c6\u56fe\u7684\u6784\u9020\u51fd\u6570\uff0c\u90fd\u6709\u4e00\u4e2a<code>BYTES_PER_ELEMENT</code>\u5c5e\u6027\uff0c\u8868\u793a\u8fd9\u79cd\u6570\u636e\u7c7b\u578b\u5360\u636e\u7684\u5b57\u8282\u6570\u3002</p> <pre><code>Int8Array.BYTES_PER_ELEMENT // 1\nUint8Array.BYTES_PER_ELEMENT // 1\nUint8ClampedArray.BYTES_PER_ELEMENT // 1\nInt16Array.BYTES_PER_ELEMENT // 2\nUint16Array.BYTES_PER_ELEMENT // 2\nInt32Array.BYTES_PER_ELEMENT // 4\nUint32Array.BYTES_PER_ELEMENT // 4\nFloat32Array.BYTES_PER_ELEMENT // 4\nFloat64Array.BYTES_PER_ELEMENT // 8\n</code></pre> <p>\u8fd9\u4e2a\u5c5e\u6027\u5728<code>TypedArray</code>\u5b9e\u4f8b\u4e0a\u4e5f\u80fd\u83b7\u53d6\uff0c\u5373\u6709<code>TypedArray.prototype.BYTES_PER_ELEMENT</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#arraybuffer_1","title":"ArrayBuffer \u4e0e\u5b57\u7b26\u4e32\u7684\u4e92\u76f8\u8f6c\u6362","text":"<p><code>ArrayBuffer</code> \u548c\u5b57\u7b26\u4e32\u7684\u76f8\u4e92\u8f6c\u6362\uff0c\u4f7f\u7528\u539f\u751f <code>TextEncoder</code> \u548c <code>TextDecoder</code> \u65b9\u6cd5\u3002\u4e3a\u4e86\u4fbf\u4e8e\u8bf4\u660e\u7528\u6cd5\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u90fd\u6309\u7167 TypeScript \u7684\u7528\u6cd5\uff0c\u7ed9\u51fa\u4e86\u7c7b\u578b\u7b7e\u540d\u3002</p> <pre><code>/**\n * Convert ArrayBuffer/TypedArray to String via TextDecoder\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder\n */\nfunction ab2str(\n  input: ArrayBuffer | Uint8Array | Int8Array | Uint16Array | Int16Array | Uint32Array | Int32Array,\n  outputEncoding: string = 'utf8',\n): string {\n  const decoder = new TextDecoder(outputEncoding)\n  return decoder.decode(input)\n}\n\n/**\n * Convert String to ArrayBuffer via TextEncoder\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/TextEncoder\n */\nfunction str2ab(input: string): ArrayBuffer {\n  const view = str2Uint8Array(input)\n  return view.buffer\n}\n\n/** Convert String to Uint8Array */\nfunction str2Uint8Array(input: string): Uint8Array {\n  const encoder = new TextEncoder()\n  const view = encoder.encode(input)\n  return view\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ab2str()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570<code>outputEncoding</code>\u7ed9\u51fa\u4e86\u8f93\u51fa\u7f16\u7801\u7684\u7f16\u7801\uff0c\u4e00\u822c\u4fdd\u6301\u9ed8\u8ba4\u503c\uff08<code>utf-8</code>\uff09\uff0c\u5176\u4ed6\u53ef\u9009\u503c\u53c2\u89c1\u5b98\u65b9\u6587\u6863\u6216 Node.js \u6587\u6863\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_6","title":"\u6ea2\u51fa","text":"<p>\u4e0d\u540c\u7684\u89c6\u56fe\u7c7b\u578b\uff0c\u6240\u80fd\u5bb9\u7eb3\u7684\u6570\u503c\u8303\u56f4\u662f\u786e\u5b9a\u7684\u3002\u8d85\u51fa\u8fd9\u4e2a\u8303\u56f4\uff0c\u5c31\u4f1a\u51fa\u73b0\u6ea2\u51fa\u3002\u6bd4\u5982\uff0c8 \u4f4d\u89c6\u56fe\u53ea\u80fd\u5bb9\u7eb3\u4e00\u4e2a 8 \u4f4d\u7684\u4e8c\u8fdb\u5236\u503c\uff0c\u5982\u679c\u653e\u5165\u4e00\u4e2a 9 \u4f4d\u7684\u503c\uff0c\u5c31\u4f1a\u6ea2\u51fa\u3002</p> <p>TypedArray \u6570\u7ec4\u7684\u6ea2\u51fa\u5904\u7406\u89c4\u5219\uff0c\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u629b\u5f03\u6ea2\u51fa\u7684\u4f4d\uff0c\u7136\u540e\u6309\u7167\u89c6\u56fe\u7c7b\u578b\u8fdb\u884c\u89e3\u91ca\u3002</p> <pre><code>const uint8 = new Uint8Array(1);\n\nuint8[0] = 256;\nuint8[0] // 0\n\nuint8[0] = -1;\nuint8[0] // 255\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>uint8</code>\u662f\u4e00\u4e2a 8 \u4f4d\u89c6\u56fe\uff0c\u800c 256 \u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f\u4e00\u4e2a 9 \u4f4d\u7684\u503c<code>100000000</code>\uff0c\u8fd9\u65f6\u5c31\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u6839\u636e\u89c4\u5219\uff0c\u53ea\u4f1a\u4fdd\u7559\u540e 8 \u4f4d\uff0c\u5373<code>00000000</code>\u3002<code>uint8</code>\u89c6\u56fe\u7684\u89e3\u91ca\u89c4\u5219\u662f\u65e0\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\uff0c\u6240\u4ee5<code>00000000</code>\u5c31\u662f<code>0</code>\u3002</p> <p>\u8d1f\u6570\u5728\u8ba1\u7b97\u673a\u5185\u90e8\u91c7\u7528\u201c2 \u7684\u8865\u7801\u201d\u8868\u793a\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5c06\u5bf9\u5e94\u7684\u6b63\u6570\u503c\u8fdb\u884c\u5426\u8fd0\u7b97\uff0c\u7136\u540e\u52a0<code>1</code>\u3002\u6bd4\u5982\uff0c<code>-1</code>\u5bf9\u5e94\u7684\u6b63\u503c\u662f<code>1</code>\uff0c\u8fdb\u884c\u5426\u8fd0\u7b97\u4ee5\u540e\uff0c\u5f97\u5230<code>11111110</code>\uff0c\u518d\u52a0\u4e0a<code>1</code>\u5c31\u662f\u8865\u7801\u5f62\u5f0f<code>11111111</code>\u3002<code>uint8</code>\u6309\u7167\u65e0\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\u89e3\u91ca<code>11111111</code>\uff0c\u8fd4\u56de\u7ed3\u679c\u5c31\u662f<code>255</code>\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355\u8f6c\u6362\u89c4\u5219\uff0c\u53ef\u4ee5\u8fd9\u6837\u8868\u793a\u3002</p> <ul> <li>\u6b63\u5411\u6ea2\u51fa\uff08overflow\uff09\uff1a\u5f53\u8f93\u5165\u503c\u5927\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5927\u503c\uff0c\u7ed3\u679c\u7b49\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5c0f\u503c\u52a0\u4e0a\u4f59\u503c\uff0c\u518d\u51cf\u53bb 1\u3002</li> <li>\u8d1f\u5411\u6ea2\u51fa\uff08underflow\uff09\uff1a\u5f53\u8f93\u5165\u503c\u5c0f\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5c0f\u503c\uff0c\u7ed3\u679c\u7b49\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5927\u503c\u51cf\u53bb\u4f59\u503c\u7684\u7edd\u5bf9\u503c\uff0c\u518d\u52a0\u4e0a 1\u3002</li> </ul> <p>\u4e0a\u9762\u7684\u201c\u4f59\u503c\u201d\u5c31\u662f\u6a21\u8fd0\u7b97\u7684\u7ed3\u679c\uff0c\u5373 JavaScript \u91cc\u9762\u7684<code>%</code>\u8fd0\u7b97\u7b26\u7684\u7ed3\u679c\u3002</p> <pre><code>12 % 4 // 0\n12 % 5 // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c12 \u9664\u4ee5 4 \u662f\u6ca1\u6709\u4f59\u503c\u7684\uff0c\u800c\u9664\u4ee5 5 \u4f1a\u5f97\u5230\u4f59\u503c 2\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const int8 = new Int8Array(1);\n\nint8[0] = 128;\nint8[0] // -128\n\nint8[0] = -129;\nint8[0] // 127\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>int8</code>\u662f\u4e00\u4e2a\u5e26\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\u89c6\u56fe\uff0c\u5b83\u7684\u6700\u5927\u503c\u662f 127\uff0c\u6700\u5c0f\u503c\u662f-128\u3002\u8f93\u5165\u503c\u4e3a<code>128</code>\u65f6\uff0c\u76f8\u5f53\u4e8e\u6b63\u5411\u6ea2\u51fa<code>1</code>\uff0c\u6839\u636e\u201c\u6700\u5c0f\u503c\u52a0\u4e0a\u4f59\u503c\uff08128 \u9664\u4ee5 127 \u7684\u4f59\u503c\u662f 1\uff09\uff0c\u518d\u51cf\u53bb 1\u201d\u7684\u89c4\u5219\uff0c\u5c31\u4f1a\u8fd4\u56de<code>-128</code>\uff1b\u8f93\u5165\u503c\u4e3a<code>-129</code>\u65f6\uff0c\u76f8\u5f53\u4e8e\u8d1f\u5411\u6ea2\u51fa<code>1</code>\uff0c\u6839\u636e\u201c\u6700\u5927\u503c\u51cf\u53bb\u4f59\u503c\u7684\u7edd\u5bf9\u503c\uff08-129 \u9664\u4ee5-128 \u7684\u4f59\u503c\u7684\u7edd\u5bf9\u503c\u662f 1\uff09\uff0c\u518d\u52a0\u4e0a 1\u201d\u7684\u89c4\u5219\uff0c\u5c31\u4f1a\u8fd4\u56de<code>127</code>\u3002</p> <p><code>Uint8ClampedArray</code>\u89c6\u56fe\u7684\u6ea2\u51fa\u89c4\u5219\uff0c\u4e0e\u4e0a\u9762\u7684\u89c4\u5219\u4e0d\u540c\u3002\u5b83\u89c4\u5b9a\uff0c\u51e1\u662f\u53d1\u751f\u6b63\u5411\u6ea2\u51fa\uff0c\u8be5\u503c\u4e00\u5f8b\u7b49\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5927\u503c\uff0c\u5373 255\uff1b\u5982\u679c\u53d1\u751f\u8d1f\u5411\u6ea2\u51fa\uff0c\u8be5\u503c\u4e00\u5f8b\u7b49\u4e8e\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u6700\u5c0f\u503c\uff0c\u5373 0\u3002</p> <pre><code>const uint8c = new Uint8ClampedArray(1);\n\nuint8c[0] = 256;\nuint8c[0] // 255\n\nuint8c[0] = -1;\nuint8c[0] // 0\n</code></pre> <p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code>uint8C</code>\u662f\u4e00\u4e2a<code>Uint8ClampedArray</code>\u89c6\u56fe\uff0c\u6b63\u5411\u6ea2\u51fa\u65f6\u90fd\u8fd4\u56de 255\uff0c\u8d1f\u5411\u6ea2\u51fa\u90fd\u8fd4\u56de 0\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypebuffer","title":"TypedArray.prototype.buffer","text":"<p><code>TypedArray</code>\u5b9e\u4f8b\u7684<code>buffer</code>\u5c5e\u6027\uff0c\u8fd4\u56de\u6574\u6bb5\u5185\u5b58\u533a\u57df\u5bf9\u5e94\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\u3002\u8be5\u5c5e\u6027\u4e3a\u53ea\u8bfb\u5c5e\u6027\u3002</p> <pre><code>const a = new Float32Array(64);\nconst b = new Uint8Array(a.buffer);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>a</code>\u89c6\u56fe\u5bf9\u8c61\u548c<code>b</code>\u89c6\u56fe\u5bf9\u8c61\uff0c\u5bf9\u5e94\u540c\u4e00\u4e2a<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u5373\u540c\u4e00\u6bb5\u5185\u5b58\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypebytelengthtypedarrayprototypebyteoffset","title":"TypedArray.prototype.byteLength\uff0cTypedArray.prototype.byteOffset","text":"<p><code>byteLength</code>\u5c5e\u6027\u8fd4\u56de TypedArray \u6570\u7ec4\u5360\u636e\u7684\u5185\u5b58\u957f\u5ea6\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282\u3002<code>byteOffset</code>\u5c5e\u6027\u8fd4\u56de TypedArray \u6570\u7ec4\u4ece\u5e95\u5c42<code>ArrayBuffer</code>\u5bf9\u8c61\u7684\u54ea\u4e2a\u5b57\u8282\u5f00\u59cb\u3002\u8fd9\u4e24\u4e2a\u5c5e\u6027\u90fd\u662f\u53ea\u8bfb\u5c5e\u6027\u3002</p> <pre><code>const b = new ArrayBuffer(8);\n\nconst v1 = new Int32Array(b);\nconst v2 = new Uint8Array(b, 2);\nconst v3 = new Int16Array(b, 2, 2);\n\nv1.byteLength // 8\nv2.byteLength // 6\nv3.byteLength // 4\n\nv1.byteOffset // 0\nv2.byteOffset // 2\nv3.byteOffset // 2\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypelength","title":"TypedArray.prototype.length","text":"<p><code>length</code>\u5c5e\u6027\u8868\u793a <code>TypedArray</code> \u6570\u7ec4\u542b\u6709\u591a\u5c11\u4e2a\u6210\u5458\u3002\u6ce8\u610f\u5c06 <code>length</code> \u5c5e\u6027\u548c <code>byteLength</code> \u5c5e\u6027\u533a\u5206\uff0c\u524d\u8005\u662f\u6210\u5458\u957f\u5ea6\uff0c\u540e\u8005\u662f\u5b57\u8282\u957f\u5ea6\u3002</p> <pre><code>const a = new Int16Array(8);\n\na.length // 8\na.byteLength // 16\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypeset","title":"TypedArray.prototype.set()","text":"<p>TypedArray \u6570\u7ec4\u7684<code>set</code>\u65b9\u6cd5\u7528\u4e8e\u590d\u5236\u6570\u7ec4\uff08\u666e\u901a\u6570\u7ec4\u6216 TypedArray \u6570\u7ec4\uff09\uff0c\u4e5f\u5c31\u662f\u5c06\u4e00\u6bb5\u5185\u5bb9\u5b8c\u5168\u590d\u5236\u5230\u53e6\u4e00\u6bb5\u5185\u5b58\u3002</p> <pre><code>const a = new Uint8Array(8);\nconst b = new Uint8Array(8);\n\nb.set(a);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u590d\u5236<code>a</code>\u6570\u7ec4\u7684\u5185\u5bb9\u5230<code>b</code>\u6570\u7ec4\uff0c\u5b83\u662f\u6574\u6bb5\u5185\u5b58\u7684\u590d\u5236\uff0c\u6bd4\u4e00\u4e2a\u4e2a\u62f7\u8d1d\u6210\u5458\u7684\u90a3\u79cd\u590d\u5236\u5feb\u5f97\u591a\u3002</p> <p><code>set</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u4ece<code>b</code>\u5bf9\u8c61\u7684\u54ea\u4e00\u4e2a\u6210\u5458\u5f00\u59cb\u590d\u5236<code>a</code>\u5bf9\u8c61\u3002</p> <pre><code>const a = new Uint16Array(8);\nconst b = new Uint16Array(10);\n\nb.set(a, 2)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684<code>b</code>\u6570\u7ec4\u6bd4<code>a</code>\u6570\u7ec4\u591a\u4e24\u4e2a\u6210\u5458\uff0c\u6240\u4ee5\u4ece<code>b[2]</code>\u5f00\u59cb\u590d\u5236\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypesubarray","title":"TypedArray.prototype.subarray()","text":"<p><code>subarray</code>\u65b9\u6cd5\u662f\u5bf9\u4e8e TypedArray \u6570\u7ec4\u7684\u4e00\u90e8\u5206\uff0c\u518d\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u89c6\u56fe\u3002</p> <pre><code>const a = new Uint16Array(8);\nconst b = a.subarray(2,3);\n\na.byteLength // 16\nb.byteLength // 2\n</code></pre> <p><code>subarray</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8d77\u59cb\u7684\u6210\u5458\u5e8f\u53f7\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u7ed3\u675f\u7684\u6210\u5458\u5e8f\u53f7\uff08\u4e0d\u542b\u8be5\u6210\u5458\uff09\uff0c\u5982\u679c\u7701\u7565\u5219\u5305\u542b\u5269\u4f59\u7684\u5168\u90e8\u6210\u5458\u3002\u6240\u4ee5\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>a.subarray(2,3)</code>\uff0c\u610f\u5473\u7740 b \u53ea\u5305\u542b<code>a[2]</code>\u4e00\u4e2a\u6210\u5458\uff0c\u5b57\u8282\u957f\u5ea6\u4e3a 2\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayprototypeslice","title":"TypedArray.prototype.slice()","text":"<p>TypeArray \u5b9e\u4f8b\u7684<code>slice</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u6307\u5b9a\u4f4d\u7f6e\u7684\u65b0\u7684<code>TypedArray</code>\u5b9e\u4f8b\u3002</p> <pre><code>let ui8 = Uint8Array.of(0, 1, 2);\nui8.slice(-1)\n// Uint8Array [ 2 ]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>ui8</code>\u662f 8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u6570\u7ec4\u89c6\u56fe\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002\u5b83\u7684<code>slice</code>\u65b9\u6cd5\u53ef\u4ee5\u4ece\u5f53\u524d\u89c6\u56fe\u4e4b\u4e2d\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u89c6\u56fe\u5b9e\u4f8b\u3002</p> <p><code>slice</code>\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u8868\u793a\u539f\u6570\u7ec4\u7684\u5177\u4f53\u4f4d\u7f6e\uff0c\u5f00\u59cb\u751f\u6210\u65b0\u6570\u7ec4\u3002\u8d1f\u503c\u8868\u793a\u9006\u5411\u7684\u4f4d\u7f6e\uff0c\u5373-1 \u4e3a\u5012\u6570\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\uff0c-2 \u8868\u793a\u5012\u6570\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayof","title":"TypedArray.of()","text":"<p>TypedArray \u6570\u7ec4\u7684\u6240\u6709\u6784\u9020\u51fd\u6570\uff0c\u90fd\u6709\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5<code>of</code>\uff0c\u7528\u4e8e\u5c06\u53c2\u6570\u8f6c\u4e3a\u4e00\u4e2a<code>TypedArray</code>\u5b9e\u4f8b\u3002</p> <pre><code>Float32Array.of(0.151, -8, 3.7)\n// Float32Array [ 0.151, -8, 3.7 ]\n</code></pre> <p>\u4e0b\u9762\u4e09\u79cd\u65b9\u6cd5\u90fd\u4f1a\u751f\u6210\u540c\u6837\u4e00\u4e2a TypedArray \u6570\u7ec4\u3002</p> <pre><code>// \u65b9\u6cd5\u4e00\nlet tarr = new Uint8Array([1,2,3]);\n\n// \u65b9\u6cd5\u4e8c\nlet tarr = Uint8Array.of(1,2,3);\n\n// \u65b9\u6cd5\u4e09\nlet tarr = new Uint8Array(3);\ntarr[0] = 1;\ntarr[1] = 2;\ntarr[2] = 3;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#typedarrayfrom","title":"TypedArray.from()","text":"<p>\u9759\u6001\u65b9\u6cd5<code>from</code>\u63a5\u53d7\u4e00\u4e2a\u53ef\u904d\u5386\u7684\u6570\u636e\u7ed3\u6784\uff08\u6bd4\u5982\u6570\u7ec4\uff09\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u57fa\u4e8e\u8fd9\u4e2a\u7ed3\u6784\u7684<code>TypedArray</code>\u5b9e\u4f8b\u3002</p> <pre><code>Uint16Array.from([0, 1, 2])\n// Uint16Array [ 0, 1, 2 ]\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u5c06\u4e00\u79cd<code>TypedArray</code>\u5b9e\u4f8b\uff0c\u8f6c\u4e3a\u53e6\u4e00\u79cd\u3002</p> <pre><code>const ui16 = Uint16Array.from(Uint8Array.of(0, 1, 2));\nui16 instanceof Uint16Array // true\n</code></pre> <p><code>from</code>\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\uff0c\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u7528\u6765\u5bf9\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u904d\u5386\uff0c\u529f\u80fd\u7c7b\u4f3c<code>map</code>\u65b9\u6cd5\u3002</p> <pre><code>Int8Array.of(127, 126, 125).map(x =&gt; 2 * x)\n// Int8Array [ -2, -4, -6 ]\n\nInt16Array.from(Int8Array.of(127, 126, 125), x =&gt; 2 * x)\n// Int16Array [ 254, 252, 250 ]\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code>from</code>\u65b9\u6cd5\u6ca1\u6709\u53d1\u751f\u6ea2\u51fa\uff0c\u8fd9\u8bf4\u660e\u904d\u5386\u4e0d\u662f\u9488\u5bf9\u539f\u6765\u7684 8 \u4f4d\u6574\u6570\u6570\u7ec4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code>from</code>\u4f1a\u5c06\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u7684 TypedArray \u6570\u7ec4\uff0c\u62f7\u8d1d\u5230\u53e6\u4e00\u6bb5\u5185\u5b58\u4e4b\u4e2d\uff0c\u5904\u7406\u4e4b\u540e\u518d\u5c06\u7ed3\u679c\u8f6c\u6210\u6307\u5b9a\u7684\u6570\u7ec4\u683c\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_7","title":"\u590d\u5408\u89c6\u56fe","text":"<p>\u7531\u4e8e\u89c6\u56fe\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u6307\u5b9a\u8d77\u59cb\u4f4d\u7f6e\u548c\u957f\u5ea6\uff0c\u6240\u4ee5\u5728\u540c\u4e00\u6bb5\u5185\u5b58\u4e4b\u4e2d\uff0c\u53ef\u4ee5\u4f9d\u6b21\u5b58\u653e\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u8fd9\u53eb\u505a\u201c\u590d\u5408\u89c6\u56fe\u201d\u3002</p> <pre><code>const buffer = new ArrayBuffer(24);\n\nconst idView = new Uint32Array(buffer, 0, 1);\nconst usernameView = new Uint8Array(buffer, 4, 16);\nconst amountDueView = new Float32Array(buffer, 20, 1);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u4e00\u4e2a 24 \u5b57\u8282\u957f\u5ea6\u7684<code>ArrayBuffer</code>\u5bf9\u8c61\uff0c\u5206\u6210\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u5b57\u8282 0 \u5230\u5b57\u8282 3\uff1a1 \u4e2a 32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570</li> <li>\u5b57\u8282 4 \u5230\u5b57\u8282 19\uff1a16 \u4e2a 8 \u4f4d\u6574\u6570</li> <li>\u5b57\u8282 20 \u5230\u5b57\u8282 23\uff1a1 \u4e2a 32 \u4f4d\u6d6e\u70b9\u6570</li> </ul> <p>\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u7528\u5982\u4e0b\u7684 C \u8bed\u8a00\u63cf\u8ff0\uff1a</p> <pre><code>struct someStruct {\n  unsigned long id;\n  char username[16];\n  float amountDue;\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#dataview","title":"DataView \u89c6\u56fe","text":"<p>\u5982\u679c\u4e00\u6bb5\u6570\u636e\u5305\u62ec\u591a\u79cd\u7c7b\u578b\uff08\u6bd4\u5982\u670d\u52a1\u5668\u4f20\u6765\u7684 HTTP \u6570\u636e\uff09\uff0c\u8fd9\u65f6\u9664\u4e86\u5efa\u7acb<code>ArrayBuffer</code>\u5bf9\u8c61\u7684\u590d\u5408\u89c6\u56fe\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7<code>DataView</code>\u89c6\u56fe\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p><code>DataView</code>\u89c6\u56fe\u63d0\u4f9b\u66f4\u591a\u64cd\u4f5c\u9009\u9879\uff0c\u800c\u4e14\u652f\u6301\u8bbe\u5b9a\u5b57\u8282\u5e8f\u3002\u672c\u6765\uff0c\u5728\u8bbe\u8ba1\u76ee\u7684\u4e0a\uff0c<code>ArrayBuffer</code>\u5bf9\u8c61\u7684\u5404\u79cd<code>TypedArray</code>\u89c6\u56fe\uff0c\u662f\u7528\u6765\u5411\u7f51\u5361\u3001\u58f0\u5361\u4e4b\u7c7b\u7684\u672c\u673a\u8bbe\u5907\u4f20\u9001\u6570\u636e\uff0c\u6240\u4ee5\u4f7f\u7528\u672c\u673a\u7684\u5b57\u8282\u5e8f\u5c31\u53ef\u4ee5\u4e86\uff1b\u800c<code>DataView</code>\u89c6\u56fe\u7684\u8bbe\u8ba1\u76ee\u7684\uff0c\u662f\u7528\u6765\u5904\u7406\u7f51\u7edc\u8bbe\u5907\u4f20\u6765\u7684\u6570\u636e\uff0c\u6240\u4ee5\u5927\u7aef\u5b57\u8282\u5e8f\u6216\u5c0f\u7aef\u5b57\u8282\u5e8f\u662f\u53ef\u4ee5\u81ea\u884c\u8bbe\u5b9a\u7684\u3002</p> <p><code>DataView</code>\u89c6\u56fe\u672c\u8eab\u4e5f\u662f\u6784\u9020\u51fd\u6570\uff0c\u63a5\u53d7\u4e00\u4e2a<code>ArrayBuffer</code>\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u751f\u6210\u89c6\u56fe\u3002</p> <pre><code>new DataView(ArrayBuffer buffer [, \u5b57\u8282\u8d77\u59cb\u4f4d\u7f6e [, \u957f\u5ea6]]);\n</code></pre> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>const buffer = new ArrayBuffer(24);\nconst dv = new DataView(buffer);\n</code></pre> <p><code>DataView</code>\u5b9e\u4f8b\u6709\u4ee5\u4e0b\u5c5e\u6027\uff0c\u542b\u4e49\u4e0e<code>TypedArray</code>\u5b9e\u4f8b\u7684\u540c\u540d\u65b9\u6cd5\u76f8\u540c\u3002</p> <ul> <li><code>DataView.prototype.buffer</code>\uff1a\u8fd4\u56de\u5bf9\u5e94\u7684 ArrayBuffer \u5bf9\u8c61</li> <li><code>DataView.prototype.byteLength</code>\uff1a\u8fd4\u56de\u5360\u636e\u7684\u5185\u5b58\u5b57\u8282\u957f\u5ea6</li> <li><code>DataView.prototype.byteOffset</code>\uff1a\u8fd4\u56de\u5f53\u524d\u89c6\u56fe\u4ece\u5bf9\u5e94\u7684 ArrayBuffer \u5bf9\u8c61\u7684\u54ea\u4e2a\u5b57\u8282\u5f00\u59cb</li> </ul> <p><code>DataView</code>\u5b9e\u4f8b\u63d0\u4f9b10\u4e2a\u65b9\u6cd5\u8bfb\u53d6\u5185\u5b58\u3002</p> <ul> <li><code>getInt8</code>\uff1a\u8bfb\u53d6 1 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 8 \u4f4d\u6574\u6570\u3002</li> <li><code>getUint8</code>\uff1a\u8bfb\u53d6 1 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\u3002</li> <li><code>getInt16</code>\uff1a\u8bfb\u53d6 2 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 16 \u4f4d\u6574\u6570\u3002</li> <li><code>getUint16</code>\uff1a\u8bfb\u53d6 2 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 16 \u4f4d\u6574\u6570\u3002</li> <li><code>getInt32</code>\uff1a\u8bfb\u53d6 4 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 32 \u4f4d\u6574\u6570\u3002</li> <li><code>getUint32</code>\uff1a\u8bfb\u53d6 4 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 32 \u4f4d\u6574\u6570\u3002</li> <li><code>getBigInt64</code>\uff1a\u8bfb\u53d6 8 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 64 \u4f4d\u6574\u6570\u3002</li> <li><code>getBigUint64</code>\uff1a\u8bfb\u53d6 8 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a\u65e0\u7b26\u53f7\u7684 64 \u4f4d\u6574\u6570\u3002</li> <li><code>getFloat32</code>\uff1a\u8bfb\u53d6 4 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 32 \u4f4d\u6d6e\u70b9\u6570\u3002</li> <li><code>getFloat64</code>\uff1a\u8bfb\u53d6 8 \u4e2a\u5b57\u8282\uff0c\u8fd4\u56de\u4e00\u4e2a 64 \u4f4d\u6d6e\u70b9\u6570\u3002</li> </ul> <p>\u8fd9\u4e00\u7cfb\u5217<code>get</code>\u65b9\u6cd5\u7684\u53c2\u6570\u90fd\u662f\u4e00\u4e2a\u5b57\u8282\u5e8f\u53f7\uff08\u4e0d\u80fd\u662f\u8d1f\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff09\uff0c\u8868\u793a\u4ece\u54ea\u4e2a\u5b57\u8282\u5f00\u59cb\u8bfb\u53d6\u3002</p> <pre><code>const buffer = new ArrayBuffer(24);\nconst dv = new DataView(buffer);\n\n// \u4ece\u7b2c1\u4e2a\u5b57\u8282\u8bfb\u53d6\u4e00\u4e2a8\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\nconst v1 = dv.getUint8(0);\n\n// \u4ece\u7b2c2\u4e2a\u5b57\u8282\u8bfb\u53d6\u4e00\u4e2a16\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\nconst v2 = dv.getUint16(1);\n\n// \u4ece\u7b2c4\u4e2a\u5b57\u8282\u8bfb\u53d6\u4e00\u4e2a16\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\nconst v3 = dv.getUint16(3);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u8bfb\u53d6\u4e86<code>ArrayBuffer</code>\u5bf9\u8c61\u7684\u524d 5 \u4e2a\u5b57\u8282\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a 8 \u4f4d\u6574\u6570\u548c\u4e24\u4e2a\u5341\u516d\u4f4d\u6574\u6570\u3002</p> <p>\u5982\u679c\u4e00\u6b21\u8bfb\u53d6\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u5b57\u8282\uff0c\u5c31\u5fc5\u987b\u660e\u786e\u6570\u636e\u7684\u5b58\u50a8\u65b9\u5f0f\uff0c\u5230\u5e95\u662f\u5c0f\u7aef\u5b57\u8282\u5e8f\u8fd8\u662f\u5927\u7aef\u5b57\u8282\u5e8f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>DataView</code>\u7684<code>get</code>\u65b9\u6cd5\u4f7f\u7528\u5927\u7aef\u5b57\u8282\u5e8f\u89e3\u8bfb\u6570\u636e\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u5c0f\u7aef\u5b57\u8282\u5e8f\u89e3\u8bfb\uff0c\u5fc5\u987b\u5728<code>get</code>\u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a<code>true</code>\u3002</p> <pre><code>// \u5c0f\u7aef\u5b57\u8282\u5e8f\nconst v1 = dv.getUint16(1, true);\n\n// \u5927\u7aef\u5b57\u8282\u5e8f\nconst v2 = dv.getUint16(3, false);\n\n// \u5927\u7aef\u5b57\u8282\u5e8f\nconst v3 = dv.getUint16(3);\n</code></pre> <p>DataView \u89c6\u56fe\u63d0\u4f9b10\u4e2a\u65b9\u6cd5\u5199\u5165\u5185\u5b58\u3002</p> <ul> <li><code>setInt8</code>\uff1a\u5199\u5165 1 \u4e2a\u5b57\u8282\u7684 8 \u4f4d\u6574\u6570\u3002</li> <li><code>setUint8</code>\uff1a\u5199\u5165 1 \u4e2a\u5b57\u8282\u7684 8 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li><code>setInt16</code>\uff1a\u5199\u5165 2 \u4e2a\u5b57\u8282\u7684 16 \u4f4d\u6574\u6570\u3002</li> <li><code>setUint16</code>\uff1a\u5199\u5165 2 \u4e2a\u5b57\u8282\u7684 16 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li><code>setInt32</code>\uff1a\u5199\u5165 4 \u4e2a\u5b57\u8282\u7684 32 \u4f4d\u6574\u6570\u3002</li> <li><code>setUint32</code>\uff1a\u5199\u5165 4 \u4e2a\u5b57\u8282\u7684 32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li><code>setBigInt64</code>\uff1a\u5199\u5165 8 \u4e2a\u5b57\u8282\u7684 64 \u4f4d\u6574\u6570\u3002</li> <li><code>setBigUint64</code>\uff1a\u5199\u5165 8 \u4e2a\u5b57\u8282\u7684 64 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u3002</li> <li><code>setFloat32</code>\uff1a\u5199\u5165 4 \u4e2a\u5b57\u8282\u7684 32 \u4f4d\u6d6e\u70b9\u6570\u3002</li> <li><code>setFloat64</code>\uff1a\u5199\u5165 8 \u4e2a\u5b57\u8282\u7684 64 \u4f4d\u6d6e\u70b9\u6570\u3002</li> </ul> <p>\u8fd9\u4e00\u7cfb\u5217<code>set</code>\u65b9\u6cd5\uff0c\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5b57\u8282\u5e8f\u53f7\uff0c\u8868\u793a\u4ece\u54ea\u4e2a\u5b57\u8282\u5f00\u59cb\u5199\u5165\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5199\u5165\u7684\u6570\u636e\u3002\u5bf9\u4e8e\u90a3\u4e9b\u5199\u5165\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u5b57\u8282\u7684\u65b9\u6cd5\uff0c\u9700\u8981\u6307\u5b9a\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0c<code>false</code>\u6216\u8005<code>undefined</code>\u8868\u793a\u4f7f\u7528\u5927\u7aef\u5b57\u8282\u5e8f\u5199\u5165\uff0c<code>true</code>\u8868\u793a\u4f7f\u7528\u5c0f\u7aef\u5b57\u8282\u5e8f\u5199\u5165\u3002</p> <pre><code>// \u5728\u7b2c1\u4e2a\u5b57\u8282\uff0c\u4ee5\u5927\u7aef\u5b57\u8282\u5e8f\u5199\u5165\u503c\u4e3a25\u768432\u4f4d\u6574\u6570\ndv.setInt32(0, 25, false);\n\n// \u5728\u7b2c5\u4e2a\u5b57\u8282\uff0c\u4ee5\u5927\u7aef\u5b57\u8282\u5e8f\u5199\u5165\u503c\u4e3a25\u768432\u4f4d\u6574\u6570\ndv.setInt32(4, 25);\n\n// \u5728\u7b2c9\u4e2a\u5b57\u8282\uff0c\u4ee5\u5c0f\u7aef\u5b57\u8282\u5e8f\u5199\u5165\u503c\u4e3a2.5\u768432\u4f4d\u6d6e\u70b9\u6570\ndv.setFloat32(8, 2.5, true);\n</code></pre> <p>\u5982\u679c\u4e0d\u786e\u5b9a\u6b63\u5728\u4f7f\u7528\u7684\u8ba1\u7b97\u673a\u7684\u5b57\u8282\u5e8f\uff0c\u53ef\u4ee5\u91c7\u7528\u4e0b\u9762\u7684\u5224\u65ad\u65b9\u5f0f\u3002</p> <pre><code>const littleEndian = (function() {\n  const buffer = new ArrayBuffer(2);\n  new DataView(buffer).setInt16(0, 256, true);\n  return new Int16Array(buffer)[0] === 256;\n})();\n</code></pre> <p>\u5982\u679c\u8fd4\u56de<code>true</code>\uff0c\u5c31\u662f\u5c0f\u7aef\u5b57\u8282\u5e8f\uff1b\u5982\u679c\u8fd4\u56de<code>false</code>\uff0c\u5c31\u662f\u5927\u7aef\u5b57\u8282\u5e8f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#_8","title":"\u4e8c\u8fdb\u5236\u6570\u7ec4\u7684\u5e94\u7528","text":"<p>\u5927\u91cf\u7684 Web API \u7528\u5230\u4e86<code>ArrayBuffer</code>\u5bf9\u8c61\u548c\u5b83\u7684\u89c6\u56fe\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#ajax","title":"AJAX","text":"<p>\u4f20\u7edf\u4e0a\uff0c\u670d\u52a1\u5668\u901a\u8fc7 AJAX \u64cd\u4f5c\u53ea\u80fd\u8fd4\u56de\u6587\u672c\u6570\u636e\uff0c\u5373<code>responseType</code>\u5c5e\u6027\u9ed8\u8ba4\u4e3a<code>text</code>\u3002<code>XMLHttpRequest</code>\u7b2c\u4e8c\u7248<code>XHR2</code>\u5141\u8bb8\u670d\u52a1\u5668\u8fd4\u56de\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u8fd9\u65f6\u5206\u6210\u4e24\u79cd\u60c5\u51b5\u3002\u5982\u679c\u660e\u786e\u77e5\u9053\u8fd4\u56de\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u628a\u8fd4\u56de\u7c7b\u578b\uff08<code>responseType</code>\uff09\u8bbe\u4e3a<code>arraybuffer</code>\uff1b\u5982\u679c\u4e0d\u77e5\u9053\uff0c\u5c31\u8bbe\u4e3a<code>blob</code>\u3002</p> <pre><code>let xhr = new XMLHttpRequest();\nxhr.open('GET', someUrl);\nxhr.responseType = 'arraybuffer';\n\nxhr.onload = function () {\n  let arrayBuffer = xhr.response;\n  // \u00b7\u00b7\u00b7\n};\n\nxhr.send();\n</code></pre> <p>\u5982\u679c\u77e5\u9053\u4f20\u56de\u6765\u7684\u662f 32 \u4f4d\u6574\u6570\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5904\u7406\u3002</p> <pre><code>xhr.onreadystatechange = function () {\n  if (req.readyState === 4 ) {\n    const arrayResponse = xhr.response;\n    const dataView = new DataView(arrayResponse);\n    const ints = new Uint32Array(dataView.byteLength / 4);\n\n    xhrDiv.style.backgroundColor = \"#00FF00\";\n    xhrDiv.innerText = \"Array is \" + ints.length + \"uints long\";\n  }\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#canvas","title":"Canvas","text":"<p>\u7f51\u9875<code>Canvas</code>\u5143\u7d20\u8f93\u51fa\u7684\u4e8c\u8fdb\u5236\u50cf\u7d20\u6570\u636e\uff0c\u5c31\u662f TypedArray \u6570\u7ec4\u3002</p> <pre><code>const canvas = document.getElementById('myCanvas');\nconst ctx = canvas.getContext('2d');\n\nconst imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\nconst uint8ClampedArray = imageData.data;\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u9762\u4ee3\u7801\u7684<code>uint8ClampedArray</code>\u867d\u7136\u662f\u4e00\u4e2a TypedArray \u6570\u7ec4\uff0c\u4f46\u662f\u5b83\u7684\u89c6\u56fe\u7c7b\u578b\u662f\u4e00\u79cd\u9488\u5bf9<code>Canvas</code>\u5143\u7d20\u7684\u4e13\u6709\u7c7b\u578b<code>Uint8ClampedArray</code>\u3002\u8fd9\u4e2a\u89c6\u56fe\u7c7b\u578b\u7684\u7279\u70b9\uff0c\u5c31\u662f\u4e13\u95e8\u9488\u5bf9\u989c\u8272\uff0c\u628a\u6bcf\u4e2a\u5b57\u8282\u89e3\u8bfb\u4e3a\u65e0\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570\uff0c\u5373\u53ea\u80fd\u53d6\u503c 0 \uff5e 255\uff0c\u800c\u4e14\u53d1\u751f\u8fd0\u7b97\u7684\u65f6\u5019\u81ea\u52a8\u8fc7\u6ee4\u9ad8\u4f4d\u6ea2\u51fa\u3002\u8fd9\u4e3a\u56fe\u50cf\u5904\u7406\u5e26\u6765\u4e86\u5de8\u5927\u7684\u65b9\u4fbf\u3002</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5982\u679c\u628a\u50cf\u7d20\u7684\u989c\u8272\u503c\u8bbe\u4e3a<code>Uint8Array</code>\u7c7b\u578b\uff0c\u90a3\u4e48\u4e58\u4ee5\u4e00\u4e2a gamma \u503c\u7684\u65f6\u5019\uff0c\u5c31\u5fc5\u987b\u8fd9\u6837\u8ba1\u7b97\uff1a</p> <pre><code>u8[i] = Math.min(255, Math.max(0, u8[i] * gamma));\n</code></pre> <p>\u56e0\u4e3a<code>Uint8Array</code>\u7c7b\u578b\u5bf9\u4e8e\u5927\u4e8e 255 \u7684\u8fd0\u7b97\u7ed3\u679c\uff08\u6bd4\u5982<code>0xFF+1</code>\uff09\uff0c\u4f1a\u81ea\u52a8\u53d8\u4e3a<code>0x00</code>\uff0c\u6240\u4ee5\u56fe\u50cf\u5904\u7406\u5fc5\u987b\u8981\u50cf\u4e0a\u9762\u8fd9\u6837\u7b97\u3002\u8fd9\u6837\u505a\u5f88\u9ebb\u70e6\uff0c\u800c\u4e14\u5f71\u54cd\u6027\u80fd\u3002\u5982\u679c\u5c06\u989c\u8272\u503c\u8bbe\u4e3a<code>Uint8ClampedArray</code>\u7c7b\u578b\uff0c\u8ba1\u7b97\u5c31\u7b80\u5316\u8bb8\u591a\u3002</p> <pre><code>pixels[i] *= gamma;\n</code></pre> <p><code>Uint8ClampedArray</code>\u7c7b\u578b\u786e\u4fdd\u5c06\u5c0f\u4e8e 0 \u7684\u503c\u8bbe\u4e3a 0\uff0c\u5c06\u5927\u4e8e 255 \u7684\u503c\u8bbe\u4e3a 255\u3002\u6ce8\u610f\uff0cIE 10 \u4e0d\u652f\u6301\u8be5\u7c7b\u578b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#websocket","title":"WebSocket","text":"<p><code>WebSocket</code>\u53ef\u4ee5\u901a\u8fc7<code>ArrayBuffer</code>\uff0c\u53d1\u9001\u6216\u63a5\u6536\u4e8c\u8fdb\u5236\u6570\u636e\u3002</p> <pre><code>let socket = new WebSocket('ws://127.0.0.1:8081');\nsocket.binaryType = 'arraybuffer';\n\n// Wait until socket is open\nsocket.addEventListener('open', function (event) {\n  // Send binary data\n  const typedArray = new Uint8Array(4);\n  socket.send(typedArray.buffer);\n});\n\n// Receive binary data\nsocket.addEventListener('message', function (event) {\n  const arrayBuffer = event.data;\n  // \u00b7\u00b7\u00b7\n});\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#fetch-api","title":"Fetch API","text":"<p>Fetch API \u53d6\u56de\u7684\u6570\u636e\uff0c\u5c31\u662f<code>ArrayBuffer</code>\u5bf9\u8c61\u3002</p> <pre><code>fetch(url)\n.then(function(response){\n  return response.arrayBuffer()\n})\n.then(function(arrayBuffer){\n  // ...\n});\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#file-api","title":"File API","text":"<p>\u5982\u679c\u77e5\u9053\u4e00\u4e2a\u6587\u4ef6\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u6587\u4ef6\u8bfb\u53d6\u4e3a<code>ArrayBuffer</code>\u5bf9\u8c61\u3002</p> <pre><code>const fileInput = document.getElementById('fileInput');\nconst file = fileInput.files[0];\nconst reader = new FileReader();\nreader.readAsArrayBuffer(file);\nreader.onload = function () {\n  const arrayBuffer = reader.result;\n  // \u00b7\u00b7\u00b7\n};\n</code></pre> <p>\u4e0b\u9762\u4ee5\u5904\u7406 bmp \u6587\u4ef6\u4e3a\u4f8b\u3002\u5047\u5b9a<code>file</code>\u53d8\u91cf\u662f\u4e00\u4e2a\u6307\u5411 bmp \u6587\u4ef6\u7684\u6587\u4ef6\u5bf9\u8c61\uff0c\u9996\u5148\u8bfb\u53d6\u6587\u4ef6\u3002</p> <pre><code>const reader = new FileReader();\nreader.addEventListener(\"load\", processimage, false);\nreader.readAsArrayBuffer(file);\n</code></pre> <p>\u7136\u540e\uff0c\u5b9a\u4e49\u5904\u7406\u56fe\u50cf\u7684\u56de\u8c03\u51fd\u6570\uff1a\u5148\u5728\u4e8c\u8fdb\u5236\u6570\u636e\u4e4b\u4e0a\u5efa\u7acb\u4e00\u4e2a<code>DataView</code>\u89c6\u56fe\uff0c\u518d\u5efa\u7acb\u4e00\u4e2a<code>bitmap</code>\u5bf9\u8c61\uff0c\u7528\u4e8e\u5b58\u653e\u5904\u7406\u540e\u7684\u6570\u636e\uff0c\u6700\u540e\u5c06\u56fe\u50cf\u5c55\u793a\u5728<code>Canvas</code>\u5143\u7d20\u4e4b\u4e2d\u3002</p> <pre><code>function processimage(e) {\n  const buffer = e.target.result;\n  const datav = new DataView(buffer);\n  const bitmap = {};\n  // \u5177\u4f53\u7684\u5904\u7406\u6b65\u9aa4\n}\n</code></pre> <p>\u5177\u4f53\u5904\u7406\u56fe\u50cf\u6570\u636e\u65f6\uff0c\u5148\u5904\u7406 bmp \u7684\u6587\u4ef6\u5934\u3002\u5177\u4f53\u6bcf\u4e2a\u6587\u4ef6\u5934\u7684\u683c\u5f0f\u548c\u5b9a\u4e49\uff0c\u8bf7\u53c2\u9605\u6709\u5173\u8d44\u6599\u3002</p> <pre><code>bitmap.fileheader = {};\nbitmap.fileheader.bfType = datav.getUint16(0, true);\nbitmap.fileheader.bfSize = datav.getUint32(2, true);\nbitmap.fileheader.bfReserved1 = datav.getUint16(6, true);\nbitmap.fileheader.bfReserved2 = datav.getUint16(8, true);\nbitmap.fileheader.bfOffBits = datav.getUint32(10, true);\n</code></pre> <p>\u63a5\u7740\u5904\u7406\u56fe\u50cf\u5143\u4fe1\u606f\u90e8\u5206\u3002</p> <pre><code>bitmap.infoheader = {};\nbitmap.infoheader.biSize = datav.getUint32(14, true);\nbitmap.infoheader.biWidth = datav.getUint32(18, true);\nbitmap.infoheader.biHeight = datav.getUint32(22, true);\nbitmap.infoheader.biPlanes = datav.getUint16(26, true);\nbitmap.infoheader.biBitCount = datav.getUint16(28, true);\nbitmap.infoheader.biCompression = datav.getUint32(30, true);\nbitmap.infoheader.biSizeImage = datav.getUint32(34, true);\nbitmap.infoheader.biXPelsPerMeter = datav.getUint32(38, true);\nbitmap.infoheader.biYPelsPerMeter = datav.getUint32(42, true);\nbitmap.infoheader.biClrUsed = datav.getUint32(46, true);\nbitmap.infoheader.biClrImportant = datav.getUint32(50, true);\n</code></pre> <p>\u6700\u540e\u5904\u7406\u56fe\u50cf\u672c\u8eab\u7684\u50cf\u7d20\u4fe1\u606f\u3002</p> <pre><code>const start = bitmap.fileheader.bfOffBits;\nbitmap.pixels = new Uint8Array(buffer, start);\n</code></pre> <p>\u81f3\u6b64\uff0c\u56fe\u50cf\u6587\u4ef6\u7684\u6570\u636e\u5168\u90e8\u5904\u7406\u5b8c\u6210\u3002\u4e0b\u4e00\u6b65\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u8fdb\u884c\u56fe\u50cf\u53d8\u5f62\uff0c\u6216\u8005\u8f6c\u6362\u683c\u5f0f\uff0c\u6216\u8005\u5c55\u793a\u5728<code>Canvas</code>\u7f51\u9875\u5143\u7d20\u4e4b\u4e2d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#sharedarraybuffer","title":"SharedArrayBuffer","text":"<p>JavaScript \u662f\u5355\u7ebf\u7a0b\u7684\uff0cWeb worker \u5f15\u5165\u4e86\u591a\u7ebf\u7a0b\uff1a\u4e3b\u7ebf\u7a0b\u7528\u6765\u4e0e\u7528\u6237\u4e92\u52a8\uff0cWorker \u7ebf\u7a0b\u7528\u6765\u627f\u62c5\u8ba1\u7b97\u4efb\u52a1\u3002\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u6570\u636e\u90fd\u662f\u9694\u79bb\u7684\uff0c\u901a\u8fc7<code>postMessage()</code>\u901a\u4fe1\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nconst w = new Worker('myworker.js');\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u65b0\u5efa\u4e86\u4e00\u4e2a Worker \u7ebf\u7a0b\u3002\u8be5\u7ebf\u7a0b\u4e0e\u4e3b\u7ebf\u7a0b\u4e4b\u95f4\u4f1a\u6709\u4e00\u4e2a\u901a\u4fe1\u6e20\u9053\uff0c\u4e3b\u7ebf\u7a0b\u901a\u8fc7<code>w.postMessage</code>\u5411 Worker \u7ebf\u7a0b\u53d1\u6d88\u606f\uff0c\u540c\u65f6\u901a\u8fc7<code>message</code>\u4e8b\u4ef6\u76d1\u542c Worker \u7ebf\u7a0b\u7684\u56de\u5e94\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nw.postMessage('hi');\nw.onmessage = function (ev) {\n  console.log(ev.data);\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u5148\u53d1\u4e00\u4e2a\u6d88\u606f<code>hi</code>\uff0c\u7136\u540e\u5728\u76d1\u542c\u5230 Worker \u7ebf\u7a0b\u7684\u56de\u5e94\u540e\uff0c\u5c31\u5c06\u5176\u6253\u5370\u51fa\u6765\u3002</p> <p>Worker \u7ebf\u7a0b\u4e5f\u662f\u901a\u8fc7\u76d1\u542c<code>message</code>\u4e8b\u4ef6\uff0c\u6765\u83b7\u53d6\u4e3b\u7ebf\u7a0b\u53d1\u6765\u7684\u6d88\u606f\uff0c\u5e76\u4f5c\u51fa\u53cd\u5e94\u3002</p> <pre><code>// Worker \u7ebf\u7a0b\nonmessage = function (ev) {\n  console.log(ev.data);\n  postMessage('ho');\n}\n</code></pre> <p>\u7ebf\u7a0b\u4e4b\u95f4\u7684\u6570\u636e\u4ea4\u6362\u53ef\u4ee5\u662f\u5404\u79cd\u683c\u5f0f\uff0c\u4e0d\u4ec5\u4ec5\u662f\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u8fd9\u79cd\u4ea4\u6362\u91c7\u7528\u7684\u662f\u590d\u5236\u673a\u5236\uff0c\u5373\u4e00\u4e2a\u8fdb\u7a0b\u5c06\u9700\u8981\u5206\u4eab\u7684\u6570\u636e\u590d\u5236\u4e00\u4efd\uff0c\u901a\u8fc7<code>postMessage</code>\u65b9\u6cd5\u4ea4\u7ed9\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3002\u5982\u679c\u6570\u636e\u91cf\u6bd4\u8f83\u5927\uff0c\u8fd9\u79cd\u901a\u4fe1\u7684\u6548\u7387\u663e\u7136\u6bd4\u8f83\u4f4e\u3002\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u8fd9\u65f6\u53ef\u4ee5\u7559\u51fa\u4e00\u5757\u5185\u5b58\u533a\u57df\uff0c\u7531\u4e3b\u7ebf\u7a0b\u4e0e Worker \u7ebf\u7a0b\u5171\u4eab\uff0c\u4e24\u65b9\u90fd\u53ef\u4ee5\u8bfb\u5199\uff0c\u90a3\u4e48\u5c31\u4f1a\u5927\u5927\u63d0\u9ad8\u6548\u7387\uff0c\u534f\u4f5c\u8d77\u6765\u4e5f\u4f1a\u6bd4\u8f83\u7b80\u5355\uff08\u4e0d\u50cf<code>postMessage</code>\u90a3\u4e48\u9ebb\u70e6\uff09\u3002</p> <p>ES2017 \u5f15\u5165<code>SharedArrayBuffer</code>\uff0c\u5141\u8bb8 Worker \u7ebf\u7a0b\u4e0e\u4e3b\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u5757\u5185\u5b58\u3002<code>SharedArrayBuffer</code>\u7684 API \u4e0e<code>ArrayBuffer</code>\u4e00\u6a21\u4e00\u6837\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u540e\u8005\u65e0\u6cd5\u5171\u4eab\u6570\u636e\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\n\n// \u65b0\u5efa 1KB \u5171\u4eab\u5185\u5b58\nconst sharedBuffer = new SharedArrayBuffer(1024);\n\n// \u4e3b\u7ebf\u7a0b\u5c06\u5171\u4eab\u5185\u5b58\u7684\u5730\u5740\u53d1\u9001\u51fa\u53bb\nw.postMessage(sharedBuffer);\n\n// \u5728\u5171\u4eab\u5185\u5b58\u4e0a\u5efa\u7acb\u89c6\u56fe\uff0c\u4f9b\u5199\u5165\u6570\u636e\nconst sharedArray = new Int32Array(sharedBuffer);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>postMessage</code>\u65b9\u6cd5\u7684\u53c2\u6570\u662f<code>SharedArrayBuffer</code>\u5bf9\u8c61\u3002</p> <p>Worker \u7ebf\u7a0b\u4ece\u4e8b\u4ef6\u7684<code>data</code>\u5c5e\u6027\u4e0a\u9762\u53d6\u5230\u6570\u636e\u3002</p> <pre><code>// Worker \u7ebf\u7a0b\nonmessage = function (ev) {\n  // \u4e3b\u7ebf\u7a0b\u5171\u4eab\u7684\u6570\u636e\uff0c\u5c31\u662f 1KB \u7684\u5171\u4eab\u5185\u5b58\n  const sharedBuffer = ev.data;\n\n  // \u5728\u5171\u4eab\u5185\u5b58\u4e0a\u5efa\u7acb\u89c6\u56fe\uff0c\u65b9\u4fbf\u8bfb\u5199\n  const sharedArray = new Int32Array(sharedBuffer);\n\n  // ...\n};\n</code></pre> <p>\u5171\u4eab\u5185\u5b58\u4e5f\u53ef\u4ee5\u5728 Worker \u7ebf\u7a0b\u521b\u5efa\uff0c\u53d1\u7ed9\u4e3b\u7ebf\u7a0b\u3002</p> <p><code>SharedArrayBuffer</code>\u4e0e<code>ArrayBuffer</code>\u4e00\u6837\uff0c\u672c\u8eab\u662f\u65e0\u6cd5\u8bfb\u5199\u7684\uff0c\u5fc5\u987b\u5728\u4e0a\u9762\u5efa\u7acb\u89c6\u56fe\uff0c\u7136\u540e\u901a\u8fc7\u89c6\u56fe\u8bfb\u5199\u3002</p> <pre><code>// \u5206\u914d 10 \u4e07\u4e2a 32 \u4f4d\u6574\u6570\u5360\u636e\u7684\u5185\u5b58\u7a7a\u95f4\nconst sab = new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT * 100000);\n\n// \u5efa\u7acb 32 \u4f4d\u6574\u6570\u89c6\u56fe\nconst ia = new Int32Array(sab);  // ia.length == 100000\n\n// \u65b0\u5efa\u4e00\u4e2a\u8d28\u6570\u751f\u6210\u5668\nconst primes = new PrimeGenerator();\n\n// \u5c06 10 \u4e07\u4e2a\u8d28\u6570\uff0c\u5199\u5165\u8fd9\u6bb5\u5185\u5b58\u7a7a\u95f4\nfor ( let i=0 ; i &lt; ia.length ; i++ )\n  ia[i] = primes.next();\n\n// \u5411 Worker \u7ebf\u7a0b\u53d1\u9001\u8fd9\u6bb5\u5171\u4eab\u5185\u5b58\nw.postMessage(ia);\n</code></pre> <p>Worker \u7ebf\u7a0b\u6536\u5230\u6570\u636e\u540e\u7684\u5904\u7406\u5982\u4e0b\u3002</p> <pre><code>// Worker \u7ebf\u7a0b\nlet ia;\nonmessage = function (ev) {\n  ia = ev.data;\n  console.log(ia.length); // 100000\n  console.log(ia[37]); // \u8f93\u51fa 163\uff0c\u56e0\u4e3a\u8fd9\u662f\u7b2c38\u4e2a\u8d28\u6570\n};\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/29-arraybuffer/#atomics","title":"Atomics \u5bf9\u8c61","text":"<p>\u591a\u7ebf\u7a0b\u5171\u4eab\u5185\u5b58\uff0c\u6700\u5927\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u9632\u6b62\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u4fee\u6539\u67d0\u4e2a\u5730\u5740\uff0c\u6216\u8005\u8bf4\uff0c\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u4fee\u6539\u5171\u4eab\u5185\u5b58\u4ee5\u540e\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u673a\u5236\u8ba9\u5176\u4ed6\u7ebf\u7a0b\u540c\u6b65\u3002SharedArrayBuffer API \u63d0\u4f9b<code>Atomics</code>\u5bf9\u8c61\uff0c\u4fdd\u8bc1\u6240\u6709\u5171\u4eab\u5185\u5b58\u7684\u64cd\u4f5c\u90fd\u662f\u201c\u539f\u5b50\u6027\u201d\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6240\u6709\u7ebf\u7a0b\u5185\u540c\u6b65\u3002</p> <p>\u4ec0\u4e48\u53eb\u201c\u539f\u5b50\u6027\u64cd\u4f5c\u201d\u5462\uff1f\u73b0\u4ee3\u7f16\u7a0b\u8bed\u8a00\u4e2d\uff0c\u4e00\u6761\u666e\u901a\u7684\u547d\u4ee4\u88ab\u7f16\u8bd1\u5668\u5904\u7406\u4ee5\u540e\uff0c\u4f1a\u53d8\u6210\u591a\u6761\u673a\u5668\u6307\u4ee4\u3002\u5982\u679c\u662f\u5355\u7ebf\u7a0b\u8fd0\u884c\uff0c\u8fd9\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff1b\u591a\u7ebf\u7a0b\u73af\u5883\u5e76\u4e14\u5171\u4eab\u5185\u5b58\u65f6\uff0c\u5c31\u4f1a\u51fa\u95ee\u9898\uff0c\u56e0\u4e3a\u8fd9\u4e00\u7ec4\u673a\u5668\u6307\u4ee4\u7684\u8fd0\u884c\u671f\u95f4\uff0c\u53ef\u80fd\u4f1a\u63d2\u5165\u5176\u4ed6\u7ebf\u7a0b\u7684\u6307\u4ee4\uff0c\u4ece\u800c\u5bfc\u81f4\u8fd0\u884c\u7ed3\u679c\u51fa\u9519\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nia[42] = 314159;  // \u539f\u5148\u7684\u503c 191\nia[37] = 123456;  // \u539f\u5148\u7684\u503c 163\n\n// Worker \u7ebf\u7a0b\nconsole.log(ia[37]);\nconsole.log(ia[42]);\n// \u53ef\u80fd\u7684\u7ed3\u679c\n// 123456\n// 191\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u7684\u539f\u59cb\u987a\u5e8f\u662f\u5148\u5bf9 42 \u53f7\u4f4d\u7f6e\u8d4b\u503c\uff0c\u518d\u5bf9 37 \u53f7\u4f4d\u7f6e\u8d4b\u503c\u3002\u4f46\u662f\uff0c\u7f16\u8bd1\u5668\u548c CPU \u4e3a\u4e86\u4f18\u5316\uff0c\u53ef\u80fd\u4f1a\u6539\u53d8\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u7684\u6267\u884c\u987a\u5e8f\uff08\u56e0\u4e3a\u5b83\u4eec\u4e4b\u95f4\u4e92\u4e0d\u4f9d\u8d56\uff09\uff0c\u5148\u5bf9 37 \u53f7\u4f4d\u7f6e\u8d4b\u503c\uff0c\u518d\u5bf9 42 \u53f7\u4f4d\u7f6e\u8d4b\u503c\u3002\u800c\u6267\u884c\u5230\u4e00\u534a\u7684\u65f6\u5019\uff0cWorker \u7ebf\u7a0b\u53ef\u80fd\u5c31\u4f1a\u6765\u8bfb\u53d6\u6570\u636e\uff0c\u5bfc\u81f4\u6253\u5370\u51fa<code>123456</code>\u548c<code>191</code>\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nconst sab = new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT * 100000);\nconst ia = new Int32Array(sab);\n\nfor (let i = 0; i &lt; ia.length; i++) {\n  ia[i] = primes.next(); // \u5c06\u8d28\u6570\u653e\u5165 ia\n}\n\n// worker \u7ebf\u7a0b\nia[112]++; // \u9519\u8bef\nAtomics.add(ia, 112, 1); // \u6b63\u786e\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cWorker \u7ebf\u7a0b\u76f4\u63a5\u6539\u5199\u5171\u4eab\u5185\u5b58<code>ia[112]++</code>\u662f\u4e0d\u6b63\u786e\u7684\u3002\u56e0\u4e3a\u8fd9\u884c\u8bed\u53e5\u4f1a\u88ab\u7f16\u8bd1\u6210\u591a\u6761\u673a\u5668\u6307\u4ee4\uff0c\u8fd9\u4e9b\u6307\u4ee4\u4e4b\u95f4\u65e0\u6cd5\u4fdd\u8bc1\u4e0d\u4f1a\u63d2\u5165\u5176\u4ed6\u8fdb\u7a0b\u7684\u6307\u4ee4\u3002\u8bf7\u8bbe\u60f3\u5982\u679c\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6<code>ia[112]++</code>\uff0c\u5f88\u53ef\u80fd\u5b83\u4eec\u5f97\u5230\u7684\u7ed3\u679c\u90fd\u662f\u4e0d\u6b63\u786e\u7684\u3002</p> <p><code>Atomics</code>\u5bf9\u8c61\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u63d0\u51fa\uff0c\u5b83\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u4e2a\u64cd\u4f5c\u6240\u5bf9\u5e94\u7684\u591a\u6761\u673a\u5668\u6307\u4ee4\uff0c\u4e00\u5b9a\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u8fd0\u884c\u7684\uff0c\u4e2d\u95f4\u4e0d\u4f1a\u88ab\u6253\u65ad\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u6240\u6d89\u53ca\u7684\u64cd\u4f5c\u90fd\u53ef\u4ee5\u770b\u4f5c\u662f\u539f\u5b50\u6027\u7684\u5355\u64cd\u4f5c\uff0c\u8fd9\u53ef\u4ee5\u907f\u514d\u7ebf\u7a0b\u7ade\u4e89\uff0c\u63d0\u9ad8\u591a\u7ebf\u7a0b\u5171\u4eab\u5185\u5b58\u65f6\u7684\u64cd\u4f5c\u5b89\u5168\u3002\u6240\u4ee5\uff0c<code>ia[112]++</code>\u8981\u6539\u5199\u6210<code>Atomics.add(ia, 112, 1)</code>\u3002</p> <p><code>Atomics</code>\u5bf9\u8c61\u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u3002</p> <p>\uff081\uff09Atomics.store()\uff0cAtomics.load()</p> <p><code>store()</code>\u65b9\u6cd5\u7528\u6765\u5411\u5171\u4eab\u5185\u5b58\u5199\u5165\u6570\u636e\uff0c<code>load()</code>\u65b9\u6cd5\u7528\u6765\u4ece\u5171\u4eab\u5185\u5b58\u8bfb\u51fa\u6570\u636e\u3002\u6bd4\u8d77\u76f4\u63a5\u7684\u8bfb\u5199\u64cd\u4f5c\uff0c\u5b83\u4eec\u7684\u597d\u5904\u662f\u4fdd\u8bc1\u4e86\u8bfb\u5199\u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002</p> <p>\u6b64\u5916\uff0c\u5b83\u4eec\u8fd8\u7528\u6765\u89e3\u51b3\u4e00\u4e2a\u95ee\u9898\uff1a\u591a\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u5171\u4eab\u5185\u5b58\u7684\u67d0\u4e2a\u4f4d\u7f6e\u4f5c\u4e3a\u5f00\u5173\uff08flag\uff09\uff0c\u4e00\u65e6\u8be5\u4f4d\u7f6e\u7684\u503c\u53d8\u4e86\uff0c\u5c31\u6267\u884c\u7279\u5b9a\u64cd\u4f5c\u3002\u8fd9\u65f6\uff0c\u5fc5\u987b\u4fdd\u8bc1\u8be5\u4f4d\u7f6e\u7684\u8d4b\u503c\u64cd\u4f5c\uff0c\u4e00\u5b9a\u662f\u5728\u5b83\u524d\u9762\u7684\u6240\u6709\u53ef\u80fd\u4f1a\u6539\u5199\u5185\u5b58\u7684\u64cd\u4f5c\u7ed3\u675f\u540e\u6267\u884c\uff1b\u800c\u8be5\u4f4d\u7f6e\u7684\u53d6\u503c\u64cd\u4f5c\uff0c\u4e00\u5b9a\u662f\u5728\u5b83\u540e\u9762\u6240\u6709\u53ef\u80fd\u4f1a\u8bfb\u53d6\u8be5\u4f4d\u7f6e\u7684\u64cd\u4f5c\u5f00\u59cb\u4e4b\u524d\u6267\u884c\u3002<code>store()</code>\u65b9\u6cd5\u548c<code>load()</code>\u65b9\u6cd5\u5c31\u80fd\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u7f16\u8bd1\u5668\u4e0d\u4f1a\u4e3a\u4e86\u4f18\u5316\uff0c\u800c\u6253\u4e71\u673a\u5668\u6307\u4ee4\u7684\u6267\u884c\u987a\u5e8f\u3002</p> <pre><code>Atomics.load(typedArray, index)\nAtomics.store(typedArray, index, value)\n</code></pre> <p><code>store()</code>\u65b9\u6cd5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a<code>typedArray</code>\u5bf9\u8c61\uff08SharedArrayBuffer \u7684\u89c6\u56fe\uff09\u3001\u4f4d\u7f6e\u7d22\u5f15\u548c\u503c\uff0c\u8fd4\u56de<code>typedArray[index]</code>\u7684\u503c\u3002<code>load()</code>\u65b9\u6cd5\u53ea\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a<code>typedArray</code>\u5bf9\u8c61\uff08SharedArrayBuffer \u7684\u89c6\u56fe\uff09\u548c\u4f4d\u7f6e\u7d22\u5f15\uff0c\u4e5f\u662f\u8fd4\u56de<code>typedArray[index]</code>\u7684\u503c\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b main.js\nia[42] = 314159;  // \u539f\u5148\u7684\u503c 191\nAtomics.store(ia, 37, 123456);  // \u539f\u5148\u7684\u503c\u662f 163\n\n// Worker \u7ebf\u7a0b worker.js\nwhile (Atomics.load(ia, 37) == 163);\nconsole.log(ia[37]);  // 123456\nconsole.log(ia[42]);  // 314159\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u7684<code>Atomics.store()</code>\u5411 42 \u53f7\u4f4d\u7f6e\u7684\u8d4b\u503c\uff0c\u4e00\u5b9a\u662f\u65e9\u4e8e 37 \u4f4d\u7f6e\u7684\u8d4b\u503c\u3002\u53ea\u8981 37 \u53f7\u4f4d\u7f6e\u7b49\u4e8e 163\uff0cWorker \u7ebf\u7a0b\u5c31\u4e0d\u4f1a\u7ec8\u6b62\u5faa\u73af\uff0c\u800c\u5bf9 37 \u53f7\u4f4d\u7f6e\u548c 42 \u53f7\u4f4d\u7f6e\u7684\u53d6\u503c\uff0c\u4e00\u5b9a\u662f\u5728<code>Atomics.load()</code>\u64cd\u4f5c\u4e4b\u540e\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nconst worker = new Worker('worker.js');\nconst length = 10;\nconst size = Int32Array.BYTES_PER_ELEMENT * length;\n// \u65b0\u5efa\u4e00\u6bb5\u5171\u4eab\u5185\u5b58\nconst sharedBuffer = new SharedArrayBuffer(size);\nconst sharedArray = new Int32Array(sharedBuffer);\nfor (let i = 0; i &lt; 10; i++) {\n  // \u5411\u5171\u4eab\u5185\u5b58\u5199\u5165 10 \u4e2a\u6574\u6570\n  Atomics.store(sharedArray, i, 0);\n}\nworker.postMessage(sharedBuffer);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u7528<code>Atomics.store()</code>\u65b9\u6cd5\u5199\u5165\u6570\u636e\u3002\u4e0b\u9762\u662f Worker \u7ebf\u7a0b\u7528<code>Atomics.load()</code>\u65b9\u6cd5\u8bfb\u53d6\u6570\u636e\u3002</p> <pre><code>// worker.js\nself.addEventListener('message', (event) =&gt; {\n  const sharedArray = new Int32Array(event.data);\n  for (let i = 0; i &lt; 10; i++) {\n    const arrayValue = Atomics.load(sharedArray, i);\n    console.log(`The item at array index ${i} is ${arrayValue}`);\n  }\n}, false);\n</code></pre> <p>\uff082\uff09Atomics.exchange()</p> <p>Worker \u7ebf\u7a0b\u5982\u679c\u8981\u5199\u5165\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u7684<code>Atomics.store()</code>\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>Atomics.exchange()</code>\u65b9\u6cd5\u3002\u5b83\u4eec\u7684\u533a\u522b\u662f\uff0c<code>Atomics.store()</code>\u8fd4\u56de\u5199\u5165\u7684\u503c\uff0c\u800c<code>Atomics.exchange()</code>\u8fd4\u56de\u88ab\u66ff\u6362\u7684\u503c\u3002</p> <pre><code>// Worker \u7ebf\u7a0b\nself.addEventListener('message', (event) =&gt; {\n  const sharedArray = new Int32Array(event.data);\n  for (let i = 0; i &lt; 10; i++) {\n    if (i % 2 === 0) {\n      const storedValue = Atomics.store(sharedArray, i, 1);\n      console.log(`The item at array index ${i} is now ${storedValue}`);\n    } else {\n      const exchangedValue = Atomics.exchange(sharedArray, i, 2);\n      console.log(`The item at array index ${i} was ${exchangedValue}, now 2`);\n    }\n  }\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06\u5171\u4eab\u5185\u5b58\u7684\u5076\u6570\u4f4d\u7f6e\u7684\u503c\u6539\u6210<code>1</code>\uff0c\u5947\u6570\u4f4d\u7f6e\u7684\u503c\u6539\u6210<code>2</code>\u3002</p> <p>\uff083\uff09Atomics.wait()\uff0cAtomics.notify()</p> <p>\u4f7f\u7528<code>while</code>\u5faa\u73af\u7b49\u5f85\u4e3b\u7ebf\u7a0b\u7684\u901a\u77e5\uff0c\u4e0d\u662f\u5f88\u9ad8\u6548\uff0c\u5982\u679c\u7528\u5728\u4e3b\u7ebf\u7a0b\uff0c\u5c31\u4f1a\u9020\u6210\u5361\u987f\uff0c<code>Atomics</code>\u5bf9\u8c61\u63d0\u4f9b\u4e86<code>wait()</code>\u548c<code>notify()</code>\u4e24\u4e2a\u65b9\u6cd5\u7528\u4e8e\u7b49\u5f85\u901a\u77e5\u3002\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u76f8\u5f53\u4e8e\u9501\u5185\u5b58\uff0c\u5373\u5728\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u8ba9\u5176\u4ed6\u7ebf\u7a0b\u4f11\u7720\uff08\u5efa\u7acb\u9501\uff09\uff0c\u7b49\u5230\u64cd\u4f5c\u7ed3\u675f\uff0c\u518d\u5524\u9192\u90a3\u4e9b\u4f11\u7720\u7684\u7ebf\u7a0b\uff08\u89e3\u9664\u9501\uff09\u3002</p> <p><code>Atomics.notify()</code>\u65b9\u6cd5\u4ee5\u524d\u53eb\u505a<code>Atomics.wake()</code>\uff0c\u540e\u6765\u8fdb\u884c\u4e86\u6539\u540d\u3002</p> <pre><code>// Worker \u7ebf\u7a0b\nself.addEventListener('message', (event) =&gt; {\n  const sharedArray = new Int32Array(event.data);\n  const arrayIndex = 0;\n  const expectedStoredValue = 50;\n  Atomics.wait(sharedArray, arrayIndex, expectedStoredValue);\n  console.log(Atomics.load(sharedArray, arrayIndex));\n}, false);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Atomics.wait()</code>\u65b9\u6cd5\u7b49\u540c\u4e8e\u544a\u8bc9 Worker \u7ebf\u7a0b\uff0c\u53ea\u8981\u6ee1\u8db3\u7ed9\u5b9a\u6761\u4ef6\uff08<code>sharedArray</code>\u7684<code>0</code>\u53f7\u4f4d\u7f6e\u7b49\u4e8e<code>50</code>\uff09\uff0c\u5c31\u5728\u8fd9\u4e00\u884c Worker \u7ebf\u7a0b\u8fdb\u5165\u4f11\u7720\u3002</p> <p>\u4e3b\u7ebf\u7a0b\u4e00\u65e6\u66f4\u6539\u4e86\u6307\u5b9a\u4f4d\u7f6e\u7684\u503c\uff0c\u5c31\u53ef\u4ee5\u5524\u9192 Worker \u7ebf\u7a0b\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nconst newArrayValue = 100;\nAtomics.store(sharedArray, 0, newArrayValue);\nconst arrayIndex = 0;\nconst queuePos = 1;\nAtomics.notify(sharedArray, arrayIndex, queuePos);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>sharedArray</code>\u7684<code>0</code>\u53f7\u4f4d\u7f6e\u6539\u4e3a<code>100</code>\uff0c\u7136\u540e\u5c31\u6267\u884c<code>Atomics.notify()</code>\u65b9\u6cd5\uff0c\u5524\u9192\u5728<code>sharedArray</code>\u7684<code>0</code>\u53f7\u4f4d\u7f6e\u4f11\u7720\u961f\u5217\u91cc\u7684\u4e00\u4e2a\u7ebf\u7a0b\u3002</p> <p><code>Atomics.wait()</code>\u65b9\u6cd5\u7684\u4f7f\u7528\u683c\u5f0f\u5982\u4e0b\u3002</p> <pre><code>Atomics.wait(sharedArray, index, value, timeout)\n</code></pre> <p>\u5b83\u7684\u56db\u4e2a\u53c2\u6570\u542b\u4e49\u5982\u4e0b\u3002</p> <ul> <li>sharedArray\uff1a\u5171\u4eab\u5185\u5b58\u7684\u89c6\u56fe\u6570\u7ec4\u3002</li> <li>index\uff1a\u89c6\u56fe\u6570\u636e\u7684\u4f4d\u7f6e\uff08\u4ece0\u5f00\u59cb\uff09\u3002</li> <li>value\uff1a\u8be5\u4f4d\u7f6e\u7684\u9884\u671f\u503c\u3002\u4e00\u65e6\u5b9e\u9645\u503c\u7b49\u4e8e\u9884\u671f\u503c\uff0c\u5c31\u8fdb\u5165\u4f11\u7720\u3002</li> <li>timeout\uff1a\u6574\u6570\uff0c\u8868\u793a\u8fc7\u4e86\u8fd9\u4e2a\u65f6\u95f4\u4ee5\u540e\uff0c\u5c31\u81ea\u52a8\u5524\u9192\uff0c\u5355\u4f4d\u6beb\u79d2\u3002\u8be5\u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u503c\u662f<code>Infinity</code>\uff0c\u5373\u65e0\u9650\u671f\u7684\u4f11\u7720\uff0c\u53ea\u6709\u901a\u8fc7<code>Atomics.notify()</code>\u65b9\u6cd5\u624d\u80fd\u5524\u9192\u3002</li> </ul> <p><code>Atomics.wait()</code>\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5171\u6709\u4e09\u79cd\u53ef\u80fd\u7684\u503c\u3002\u5982\u679c<code>sharedArray[index]</code>\u4e0d\u7b49\u4e8e<code>value</code>\uff0c\u5c31\u8fd4\u56de\u5b57\u7b26\u4e32<code>not-equal</code>\uff0c\u5426\u5219\u5c31\u8fdb\u5165\u4f11\u7720\u3002\u5982\u679c<code>Atomics.notify()</code>\u65b9\u6cd5\u5524\u9192\uff0c\u5c31\u8fd4\u56de\u5b57\u7b26\u4e32<code>ok</code>\uff1b\u5982\u679c\u56e0\u4e3a\u8d85\u65f6\u5524\u9192\uff0c\u5c31\u8fd4\u56de\u5b57\u7b26\u4e32<code>timed-out</code>\u3002</p> <p><code>Atomics.notify()</code>\u65b9\u6cd5\u7684\u4f7f\u7528\u683c\u5f0f\u5982\u4e0b\u3002</p> <pre><code>Atomics.notify(sharedArray, index, count)\n</code></pre> <p>\u5b83\u7684\u4e09\u4e2a\u53c2\u6570\u542b\u4e49\u5982\u4e0b\u3002</p> <ul> <li>sharedArray\uff1a\u5171\u4eab\u5185\u5b58\u7684\u89c6\u56fe\u6570\u7ec4\u3002</li> <li>index\uff1a\u89c6\u56fe\u6570\u636e\u7684\u4f4d\u7f6e\uff08\u4ece0\u5f00\u59cb\uff09\u3002</li> <li>count\uff1a\u9700\u8981\u5524\u9192\u7684 Worker \u7ebf\u7a0b\u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a<code>Infinity</code>\u3002</li> </ul> <p><code>Atomics.notify()</code>\u65b9\u6cd5\u4e00\u65e6\u5524\u9192\u4f11\u7720\u7684 Worker \u7ebf\u7a0b\uff0c\u5c31\u4f1a\u8ba9\u5b83\u7ee7\u7eed\u5f80\u4e0b\u8fd0\u884c\u3002</p> <p>\u8bf7\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// \u4e3b\u7ebf\u7a0b\nconsole.log(ia[37]);  // 163\nAtomics.store(ia, 37, 123456);\nAtomics.notify(ia, 37, 1);\n\n// Worker \u7ebf\u7a0b\nAtomics.wait(ia, 37, 163);\nconsole.log(ia[37]);  // 123456\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u89c6\u56fe\u6570\u7ec4<code>ia</code>\u7684\u7b2c 37 \u53f7\u4f4d\u7f6e\uff0c\u539f\u6765\u7684\u503c\u662f<code>163</code>\u3002Worker \u7ebf\u7a0b\u4f7f\u7528<code>Atomics.wait()</code>\u65b9\u6cd5\uff0c\u6307\u5b9a\u53ea\u8981<code>ia[37]</code>\u7b49\u4e8e<code>163</code>\uff0c\u5c31\u8fdb\u5165\u4f11\u7720\u72b6\u6001\u3002\u4e3b\u7ebf\u7a0b\u4f7f\u7528<code>Atomics.store()</code>\u65b9\u6cd5\uff0c\u5c06<code>123456</code>\u5199\u5165<code>ia[37]</code>\uff0c\u7136\u540e\u4f7f\u7528<code>Atomics.notify()</code>\u65b9\u6cd5\u5524\u9192 Worker \u7ebf\u7a0b\u3002</p> <p>\u53e6\u5916\uff0c\u57fa\u4e8e<code>wait</code>\u548c<code>notify</code>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u7684\u9501\u5185\u5b58\u5b9e\u73b0\uff0c\u53ef\u4ee5\u770b Lars T Hansen \u7684 js-lock-and-condition \u8fd9\u4e2a\u5e93\u3002</p> <p>\u6ce8\u610f\uff0c\u6d4f\u89c8\u5668\u7684\u4e3b\u7ebf\u7a0b\u4e0d\u5b9c\u8bbe\u7f6e\u4f11\u7720\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7528\u6237\u5931\u53bb\u54cd\u5e94\u3002\u800c\u4e14\uff0c\u4e3b\u7ebf\u7a0b\u5b9e\u9645\u4e0a\u4f1a\u62d2\u7edd\u8fdb\u5165\u4f11\u7720\u3002</p> <p>\uff084\uff09\u8fd0\u7b97\u65b9\u6cd5</p> <p>\u5171\u4eab\u5185\u5b58\u4e0a\u9762\u7684\u67d0\u4e9b\u8fd0\u7b97\u662f\u4e0d\u80fd\u88ab\u6253\u65ad\u7684\uff0c\u5373\u4e0d\u80fd\u5728\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\uff0c\u8ba9\u5176\u4ed6\u7ebf\u7a0b\u6539\u5199\u5185\u5b58\u4e0a\u9762\u7684\u503c\u3002Atomics \u5bf9\u8c61\u63d0\u4f9b\u4e86\u4e00\u4e9b\u8fd0\u7b97\u65b9\u6cd5\uff0c\u9632\u6b62\u6570\u636e\u88ab\u6539\u5199\u3002</p> <pre><code>Atomics.add(sharedArray, index, value)\n</code></pre> <p><code>Atomics.add</code>\u7528\u4e8e\u5c06<code>value</code>\u52a0\u5230<code>sharedArray[index]</code>\uff0c\u8fd4\u56de<code>sharedArray[index]</code>\u65e7\u7684\u503c\u3002</p> <pre><code>Atomics.sub(sharedArray, index, value)\n</code></pre> <p><code>Atomics.sub</code>\u7528\u4e8e\u5c06<code>value</code>\u4ece<code>sharedArray[index]</code>\u51cf\u53bb\uff0c\u8fd4\u56de<code>sharedArray[index]</code>\u65e7\u7684\u503c\u3002</p> <pre><code>Atomics.and(sharedArray, index, value)\n</code></pre> <p><code>Atomics.and</code>\u7528\u4e8e\u5c06<code>value</code>\u4e0e<code>sharedArray[index]</code>\u8fdb\u884c\u4f4d\u8fd0\u7b97<code>and</code>\uff0c\u653e\u5165<code>sharedArray[index]</code>\uff0c\u5e76\u8fd4\u56de\u65e7\u7684\u503c\u3002</p> <pre><code>Atomics.or(sharedArray, index, value)\n</code></pre> <p><code>Atomics.or</code>\u7528\u4e8e\u5c06<code>value</code>\u4e0e<code>sharedArray[index]</code>\u8fdb\u884c\u4f4d\u8fd0\u7b97<code>or</code>\uff0c\u653e\u5165<code>sharedArray[index]</code>\uff0c\u5e76\u8fd4\u56de\u65e7\u7684\u503c\u3002</p> <pre><code>Atomics.xor(sharedArray, index, value)\n</code></pre> <p><code>Atomic.xor</code>\u7528\u4e8e\u5c06<code>vaule</code>\u4e0e<code>sharedArray[index]</code>\u8fdb\u884c\u4f4d\u8fd0\u7b97<code>xor</code>\uff0c\u653e\u5165<code>sharedArray[index]</code>\uff0c\u5e76\u8fd4\u56de\u65e7\u7684\u503c\u3002</p> <p>\uff085\uff09\u5176\u4ed6\u65b9\u6cd5</p> <p><code>Atomics</code>\u5bf9\u8c61\u8fd8\u6709\u4ee5\u4e0b\u65b9\u6cd5\u3002</p> <ul> <li><code>Atomics.compareExchange(sharedArray, index, oldval, newval)</code>\uff1a\u5982\u679c<code>sharedArray[index]</code>\u7b49\u4e8e<code>oldval</code>\uff0c\u5c31\u5199\u5165<code>newval</code>\uff0c\u8fd4\u56de<code>oldval</code>\u3002</li> <li><code>Atomics.isLockFree(size)</code>\uff1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a<code>Atomics</code>\u5bf9\u8c61\u662f\u5426\u53ef\u4ee5\u5904\u7406\u67d0\u4e2a<code>size</code>\u7684\u5185\u5b58\u9501\u5b9a\u3002\u5982\u679c\u8fd4\u56de<code>false</code>\uff0c\u5e94\u7528\u7a0b\u5e8f\u5c31\u9700\u8981\u81ea\u5df1\u6765\u5b9e\u73b0\u9501\u5b9a\u3002</li> </ul> <p><code>Atomics.compareExchange</code>\u7684\u4e00\u4e2a\u7528\u9014\u662f\uff0c\u4ece SharedArrayBuffer \u8bfb\u53d6\u4e00\u4e2a\u503c\uff0c\u7136\u540e\u5bf9\u8be5\u503c\u8fdb\u884c\u67d0\u4e2a\u64cd\u4f5c\uff0c\u64cd\u4f5c\u7ed3\u675f\u4ee5\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b SharedArrayBuffer \u91cc\u9762\u539f\u6765\u90a3\u4e2a\u503c\u662f\u5426\u53d1\u751f\u53d8\u5316\uff08\u5373\u88ab\u5176\u4ed6\u7ebf\u7a0b\u6539\u5199\u8fc7\uff09\u3002\u5982\u679c\u6ca1\u6709\u6539\u5199\u8fc7\uff0c\u5c31\u5c06\u5b83\u5199\u56de\u539f\u6765\u7684\u4f4d\u7f6e\uff0c\u5426\u5219\u8bfb\u53d6\u65b0\u7684\u503c\uff0c\u518d\u91cd\u5934\u8fdb\u884c\u4e00\u6b21\u64cd\u4f5c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/","title":"30-\u6700\u65b0\u63d0\u6848","text":"<p>\u672c\u7ae0\u4ecb\u7ecd\u4e00\u4e9b\u5c1a\u672a\u8fdb\u5165\u6807\u51c6\u3001\u4f46\u5f88\u6709\u5e0c\u671b\u7684\u6700\u65b0\u63d0\u6848\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#do","title":"do \u8868\u8fbe\u5f0f","text":"<p>\u672c\u8d28\u4e0a\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u662f\u4e00\u4e2a\u8bed\u53e5\uff0c\u5c06\u591a\u4e2a\u64cd\u4f5c\u5c01\u88c5\u5728\u4e00\u8d77\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002</p> <pre><code>{\n  let t = f();\n  t = t * t + 1;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u5c06\u4e24\u4e2a\u8bed\u53e5\u5c01\u88c5\u5728\u4e00\u8d77\u3002\u4f46\u662f\uff0c\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4ee5\u5916\uff0c\u6ca1\u6709\u529e\u6cd5\u5f97\u5230<code>t</code>\u7684\u503c\uff0c\u56e0\u4e3a\u5757\u7ea7\u4f5c\u7528\u57df\u4e0d\u8fd4\u56de\u503c\uff0c\u9664\u975e<code>t</code>\u662f\u5168\u5c40\u53d8\u91cf\u3002</p> <p>\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u4f7f\u5f97\u5757\u7ea7\u4f5c\u7528\u57df\u53ef\u4ee5\u53d8\u4e3a\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u8fd4\u56de\u503c\uff0c\u529e\u6cd5\u5c31\u662f\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u524d\u52a0\u4e0a<code>do</code>\uff0c\u4f7f\u5b83\u53d8\u4e3a<code>do</code>\u8868\u8fbe\u5f0f\uff0c\u7136\u540e\u5c31\u4f1a\u8fd4\u56de\u5185\u90e8\u6700\u540e\u6267\u884c\u7684\u8868\u8fbe\u5f0f\u7684\u503c\u3002</p> <pre><code>let x = do {\n  let t = f();\n  t * t + 1;\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>x</code>\u4f1a\u5f97\u5230\u6574\u4e2a\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u8fd4\u56de\u503c\uff08<code>t * t + 1</code>\uff09\u3002</p> <p><code>do</code>\u8868\u8fbe\u5f0f\u7684\u903b\u8f91\u975e\u5e38\u7b80\u5355\uff1a\u5c01\u88c5\u7684\u662f\u4ec0\u4e48\uff0c\u5c31\u4f1a\u8fd4\u56de\u4ec0\u4e48\u3002</p> <pre><code>// \u7b49\u540c\u4e8e &lt;\u8868\u8fbe\u5f0f&gt;\ndo { &lt;\u8868\u8fbe\u5f0f&gt;; }\n\n// \u7b49\u540c\u4e8e &lt;\u8bed\u53e5&gt;\ndo { &lt;\u8bed\u53e5&gt; }\n</code></pre> <p><code>do</code>\u8868\u8fbe\u5f0f\u7684\u597d\u5904\u662f\u53ef\u4ee5\u5c01\u88c5\u591a\u4e2a\u8bed\u53e5\uff0c\u8ba9\u7a0b\u5e8f\u66f4\u52a0\u6a21\u5757\u5316\uff0c\u5c31\u50cf\u4e50\u9ad8\u79ef\u6728\u90a3\u6837\u4e00\u5757\u5757\u62fc\u88c5\u8d77\u6765\u3002</p> <pre><code>let x = do {\n  if (foo()) { f() }\n  else if (bar()) { g() }\n  else { h() }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u672c\u8d28\uff0c\u5c31\u662f\u6839\u636e\u51fd\u6570<code>foo</code>\u7684\u6267\u884c\u7ed3\u679c\uff0c\u8c03\u7528\u4e0d\u540c\u7684\u51fd\u6570\uff0c\u5c06\u8fd4\u56de\u7ed3\u679c\u8d4b\u7ed9\u53d8\u91cf<code>x</code>\u3002\u4f7f\u7528<code>do</code>\u8868\u8fbe\u5f0f\uff0c\u5c31\u5c06\u8fd9\u4e2a\u64cd\u4f5c\u7684\u610f\u56fe\u8868\u8fbe\u5f97\u975e\u5e38\u7b80\u6d01\u6e05\u6670\u3002\u800c\u4e14\uff0c<code>do</code>\u5757\u7ea7\u4f5c\u7528\u57df\u63d0\u4f9b\u4e86\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u5185\u90e8\u64cd\u4f5c\u53ef\u4ee5\u4e0e\u5168\u5c40\u4f5c\u7528\u57df\u9694\u7edd\u3002</p> <p>\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c<code>do</code>\u8868\u8fbe\u5f0f\u5728 JSX \u8bed\u6cd5\u4e2d\u975e\u5e38\u597d\u7528\u3002</p> <pre><code>return (\n  &lt;nav&gt;\n    &lt;Home /&gt;\n    {\n      do {\n        if (loggedIn) {\n          &lt;LogoutButton /&gt;\n        } else {\n          &lt;LoginButton /&gt;\n        }\n      }\n    }\n  &lt;/nav&gt;\n)\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u7528<code>do</code>\u8868\u8fbe\u5f0f\uff0c\u5c31\u53ea\u80fd\u7528\u4e09\u5143\u5224\u65ad\u8fd0\u7b97\u7b26\uff08<code>?:</code>\uff09\u3002\u90a3\u6837\u7684\u8bdd\uff0c\u4e00\u65e6\u5224\u65ad\u903b\u8f91\u590d\u6742\uff0c\u4ee3\u7801\u5c31\u4f1a\u53d8\u5f97\u5f88\u4e0d\u6613\u8bfb\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#throw","title":"throw \u8868\u8fbe\u5f0f","text":"<p>JavaScript \u8bed\u6cd5\u89c4\u5b9a<code>throw</code>\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u7528\u6765\u629b\u51fa\u9519\u8bef\uff0c\u4e0d\u80fd\u7528\u4e8e\u8868\u8fbe\u5f0f\u4e4b\u4e2d\u3002</p> <pre><code>// \u62a5\u9519\nconsole.log(throw new Error());\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>console.log</code>\u7684\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u662f\u4e00\u4e2a<code>throw</code>\u8bed\u53e5\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5141\u8bb8<code>throw</code>\u7528\u4e8e\u8868\u8fbe\u5f0f\u3002</p> <pre><code>// \u53c2\u6570\u7684\u9ed8\u8ba4\u503c\nfunction save(filename = throw new TypeError(\"Argument required\")) {\n}\n\n// \u7bad\u5934\u51fd\u6570\u7684\u8fd4\u56de\u503c\nlint(ast, {\n  with: () =&gt; throw new Error(\"avoid using 'with' statements.\")\n});\n\n// \u6761\u4ef6\u8868\u8fbe\u5f0f\nfunction getEncoder(encoding) {\n  const encoder = encoding === \"utf8\" ?\n    new UTF8Encoder() :\n    encoding === \"utf16le\" ?\n      new UTF16Encoder(false) :\n      encoding === \"utf16be\" ?\n        new UTF16Encoder(true) :\n        throw new Error(\"Unsupported encoding\");\n}\n\n// \u903b\u8f91\u8868\u8fbe\u5f0f\nclass Product {\n  get id() {\n    return this._id;\n  }\n  set id(value) {\n    this._id = value || throw new Error(\"Invalid value\");\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>throw</code>\u90fd\u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u91cc\u9762\u3002</p> <p>\u8bed\u6cd5\u4e0a\uff0c<code>throw</code>\u8868\u8fbe\u5f0f\u91cc\u9762\u7684<code>throw</code>\u4e0d\u518d\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u800c\u662f\u4e00\u4e2a\u8fd0\u7b97\u7b26\u3002\u4e3a\u4e86\u907f\u514d\u4e0e<code>throw</code>\u547d\u4ee4\u6df7\u6dc6\uff0c\u89c4\u5b9a<code>throw</code>\u51fa\u73b0\u5728\u884c\u9996\uff0c\u4e00\u5f8b\u89e3\u91ca\u4e3a<code>throw</code>\u8bed\u53e5\uff0c\u800c\u4e0d\u662f<code>throw</code>\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#_1","title":"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#_2","title":"\u8bed\u6cd5","text":"<p>\u591a\u53c2\u6570\u7684\u51fd\u6570\u6709\u65f6\u9700\u8981\u7ed1\u5b9a\u5176\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u3002</p> <pre><code>function add(x, y) { return x + y; }\nfunction add7(x) { return x + 7; }\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>add7</code>\u51fd\u6570\u5176\u5b9e\u662f<code>add</code>\u51fd\u6570\u7684\u4e00\u4e2a\u7279\u6b8a\u7248\u672c\uff0c\u901a\u8fc7\u5c06\u4e00\u4e2a\u53c2\u6570\u7ed1\u5b9a\u4e3a<code>7</code>\uff0c\u5c31\u53ef\u4ee5\u4ece<code>add</code>\u5f97\u5230<code>add7</code>\u3002</p> <pre><code>// bind \u65b9\u6cd5\nconst add7 = add.bind(null, 7);\n\n// \u7bad\u5934\u51fd\u6570\nconst add7 = x =&gt; add(x, 7);\n</code></pre> <p>\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u90fd\u6709\u4e9b\u5197\u4f59\u3002\u5176\u4e2d\uff0c<code>bind</code>\u65b9\u6cd5\u7684\u5c40\u9650\u66f4\u52a0\u660e\u663e\uff0c\u5b83\u5fc5\u987b\u63d0\u4f9b<code>this</code>\uff0c\u5e76\u4e14\u53ea\u80fd\u4ece\u524d\u5230\u540e\u4e00\u4e2a\u4e2a\u7ed1\u5b9a\u53c2\u6570\uff0c\u65e0\u6cd5\u53ea\u7ed1\u5b9a\u975e\u5934\u90e8\u7684\u53c2\u6570\u3002</p> <p>\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u4f7f\u5f97\u7ed1\u5b9a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u66f4\u52a0\u5bb9\u6613\u3002\u8fd9\u53eb\u505a\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\uff08partial application\uff09\u3002</p> <pre><code>const add = (x, y) =&gt; x + y;\nconst addOne = add(1, ?);\n\nconst maxGreaterThanZero = Math.max(0, ...);\n</code></pre> <p>\u6839\u636e\u65b0\u63d0\u6848\uff0c<code>?</code>\u662f\u5355\u4e2a\u53c2\u6570\u7684\u5360\u4f4d\u7b26\uff0c<code>...</code>\u662f\u591a\u4e2a\u53c2\u6570\u7684\u5360\u4f4d\u7b26\u3002\u4ee5\u4e0b\u7684\u5f62\u5f0f\u90fd\u5c5e\u4e8e\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u3002</p> <pre><code>f(x, ?)\nf(x, ...)\nf(?, x)\nf(..., x)\nf(?, x, ?)\nf(..., x, ...)\n</code></pre> <p><code>?</code>\u548c<code>...</code>\u53ea\u80fd\u51fa\u73b0\u5728\u51fd\u6570\u7684\u8c03\u7528\u4e4b\u4e2d\uff0c\u5e76\u4e14\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u3002</p> <pre><code>const g = f(?, 1, ...);\n// \u7b49\u540c\u4e8e\nconst g = (x, ...y) =&gt; f(x, 1, ...y);\n</code></pre> <p>\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <pre><code>let obj = {\n  f(x, y) { return x + y; },\n};\n\nconst g = obj.f(?, 3);\ng(1) // 4\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#_3","title":"\u6ce8\u610f\u70b9","text":"<p>\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u6709\u4e00\u4e9b\u7279\u522b\u6ce8\u610f\u7684\u5730\u65b9\u3002</p> <p>\uff081\uff09\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u662f\u57fa\u4e8e\u539f\u51fd\u6570\u7684\u3002\u5982\u679c\u539f\u51fd\u6570\u53d1\u751f\u53d8\u5316\uff0c\u90e8\u5206\u6267\u884c\u751f\u6210\u7684\u65b0\u51fd\u6570\u4e5f\u4f1a\u7acb\u5373\u53cd\u6620\u8fd9\u79cd\u53d8\u5316\u3002</p> <pre><code>let f = (x, y) =&gt; x + y;\n\nconst g = f(?, 3);\ng(1); // 4\n\n// \u66ff\u6362\u51fd\u6570 f\nf = (x, y) =&gt; x * y;\n\ng(1); // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9a\u4e49\u4e86\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u4ee5\u540e\uff0c\u66f4\u6362\u539f\u51fd\u6570\u4f1a\u7acb\u5373\u5f71\u54cd\u5230\u65b0\u51fd\u6570\u3002</p> <p>\uff082\uff09\u5982\u679c\u9884\u5148\u63d0\u4f9b\u7684\u90a3\u4e2a\u503c\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5e76\u4e0d\u4f1a\u5728\u5b9a\u4e49\u65f6\u6c42\u503c\uff0c\u800c\u662f\u5728\u6bcf\u6b21\u8c03\u7528\u65f6\u6c42\u503c\u3002</p> <pre><code>let a = 3;\nconst f = (x, y) =&gt; x + y;\n\nconst g = f(?, a);\ng(1); // 4\n\n// \u6539\u53d8 a \u7684\u503c\na = 10;\ng(1); // 11\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9884\u5148\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u53d8\u91cf<code>a</code>\uff0c\u90a3\u4e48\u6bcf\u6b21\u8c03\u7528\u51fd\u6570<code>g</code>\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5bf9<code>a</code>\u8fdb\u884c\u6c42\u503c\u3002</p> <p>\uff083\uff09\u5982\u679c\u65b0\u51fd\u6570\u7684\u53c2\u6570\u591a\u4e8e\u5360\u4f4d\u7b26\u7684\u6570\u91cf\uff0c\u90a3\u4e48\u591a\u4f59\u7684\u53c2\u6570\u5c06\u88ab\u5ffd\u7565\u3002</p> <pre><code>const f = (x, ...y) =&gt; [x, ...y];\nconst g = f(?, 1);\ng(2, 3, 4); // [2, 1]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>g</code>\u53ea\u6709\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u5b83\u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u591a\u4f59\u7684\u53c2\u6570\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002</p> <p>\u5199\u6210\u4e0b\u9762\u8fd9\u6837\uff0c\u591a\u4f59\u7684\u53c2\u6570\u5c31\u6ca1\u6709\u95ee\u9898\u3002</p> <pre><code>const f = (x, ...y) =&gt; [x, ...y];\nconst g = f(?, 1, ...);\ng(2, 3, 4); // [2, 1, 3, 4];\n</code></pre> <p>\uff084\uff09<code>...</code>\u53ea\u4f1a\u88ab\u91c7\u96c6\u4e00\u6b21\uff0c\u5982\u679c\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u4f7f\u7528\u4e86\u591a\u4e2a<code>...</code>\uff0c\u90a3\u4e48\u6bcf\u4e2a<code>...</code>\u7684\u503c\u90fd\u5c06\u76f8\u540c\u3002</p> <pre><code>const f = (...x) =&gt; x;\nconst g = f(..., 9, ...);\ng(1, 2, 3); // [1, 2, 3, 9, 1, 2, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>g</code>\u5b9a\u4e49\u4e86\u4e24\u4e2a<code>...</code>\u5360\u4f4d\u7b26\uff0c\u771f\u6b63\u6267\u884c\u7684\u65f6\u5019\uff0c\u5b83\u4eec\u7684\u503c\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#_4","title":"\u7ba1\u9053\u8fd0\u7b97\u7b26","text":"<p>Unix \u64cd\u4f5c\u7cfb\u7edf\u6709\u4e00\u4e2a\u7ba1\u9053\u673a\u5236\uff08pipeline\uff09\uff0c\u53ef\u4ee5\u628a\u524d\u4e00\u4e2a\u64cd\u4f5c\u7684\u503c\u4f20\u7ed9\u540e\u4e00\u4e2a\u64cd\u4f5c\u3002\u8fd9\u4e2a\u673a\u5236\u975e\u5e38\u6709\u7528\uff0c\u4f7f\u5f97\u7b80\u5355\u7684\u64cd\u4f5c\u53ef\u4ee5\u7ec4\u5408\u6210\u4e3a\u590d\u6742\u7684\u64cd\u4f5c\u3002\u8bb8\u591a\u8bed\u8a00\u90fd\u6709\u7ba1\u9053\u7684\u5b9e\u73b0\uff0c\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u8ba9 JavaScript \u4e5f\u62e5\u6709\u7ba1\u9053\u673a\u5236\u3002</p> <p>JavaScript \u7684\u7ba1\u9053\u662f\u4e00\u4e2a\u8fd0\u7b97\u7b26\uff0c\u5199\u4f5c<code>|&gt;</code>\u3002\u5b83\u7684\u5de6\u8fb9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u7ba1\u9053\u8fd0\u7b97\u7b26\u628a\u5de6\u8fb9\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4f20\u5165\u53f3\u8fb9\u7684\u51fd\u6570\u8fdb\u884c\u6c42\u503c\u3002</p> <pre><code>x |&gt; f\n// \u7b49\u540c\u4e8e\nf(x)\n</code></pre> <p>\u7ba1\u9053\u8fd0\u7b97\u7b26\u6700\u5927\u7684\u597d\u5904\uff0c\u5c31\u662f\u53ef\u4ee5\u628a\u5d4c\u5957\u7684\u51fd\u6570\uff0c\u5199\u6210\u4ece\u5de6\u5230\u53f3\u7684\u94fe\u5f0f\u8868\u8fbe\u5f0f\u3002</p> <pre><code>function doubleSay (str) {\n  return str + \", \" + str;\n}\n\nfunction capitalize (str) {\n  return str[0].toUpperCase() + str.substring(1);\n}\n\nfunction exclaim (str) {\n  return str + '!';\n}\n</code></pre> <p>\u4e0a\u9762\u662f\u4e09\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u3002\u5982\u679c\u8981\u5d4c\u5957\u6267\u884c\uff0c\u4f20\u7edf\u7684\u5199\u6cd5\u548c\u7ba1\u9053\u7684\u5199\u6cd5\u5206\u522b\u5982\u4e0b\u3002</p> <pre><code>// \u4f20\u7edf\u7684\u5199\u6cd5\nexclaim(capitalize(doubleSay('hello')))\n// \"Hello, hello!\"\n\n// \u7ba1\u9053\u7684\u5199\u6cd5\n'hello'\n  |&gt; doubleSay\n  |&gt; capitalize\n  |&gt; exclaim\n// \"Hello, hello!\"\n</code></pre> <p>\u7ba1\u9053\u8fd0\u7b97\u7b26\u53ea\u80fd\u4f20\u9012\u4e00\u4e2a\u503c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53f3\u8fb9\u7684\u51fd\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\u3002\u5982\u679c\u662f\u591a\u53c2\u6570\u51fd\u6570\uff0c\u5c31\u5fc5\u987b\u8fdb\u884c\u67ef\u91cc\u5316\uff0c\u6539\u6210\u5355\u53c2\u6570\u7684\u7248\u672c\u3002</p> <pre><code>function double (x) { return x + x; }\nfunction add (x, y) { return x + y; }\n\nlet person = { score: 25 };\nperson.score\n  |&gt; double\n  |&gt; (_ =&gt; add(7, _))\n// 57\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>add</code>\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\u3002\u4f46\u662f\uff0c\u7ba1\u9053\u8fd0\u7b97\u7b26\u53ea\u80fd\u4f20\u5165\u4e00\u4e2a\u503c\uff0c\u56e0\u6b64\u9700\u8981\u4e8b\u5148\u63d0\u4f9b\u53e6\u4e00\u4e2a\u53c2\u6570\uff0c\u5e76\u5c06\u5176\u6539\u6210\u5355\u53c2\u6570\u7684\u7bad\u5934\u51fd\u6570<code>_ =&gt; add(7, _)</code>\u3002\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u7684\u4e0b\u5212\u7ebf\u5e76\u6ca1\u6709\u7279\u522b\u7684\u542b\u4e49\uff0c\u53ef\u4ee5\u7528\u5176\u4ed6\u7b26\u53f7\u4ee3\u66ff\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\u53ea\u662f\u56e0\u4e3a\uff0c\u5b83\u80fd\u591f\u5f62\u8c61\u5730\u8868\u793a\u8fd9\u91cc\u662f\u5360\u4f4d\u7b26\u3002</p> <p>\u7ba1\u9053\u8fd0\u7b97\u7b26\u5bf9\u4e8e<code>await</code>\u51fd\u6570\u4e5f\u9002\u7528\u3002</p> <pre><code>x |&gt; await f\n// \u7b49\u540c\u4e8e\nawait f(x)\n\nconst userAge = userId |&gt; await fetchUserById |&gt; getAgeFromUser;\n// \u7b49\u540c\u4e8e\nconst userAge = getAgeFromUser(await fetchUserById(userId));\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#mathsignbit","title":"Math.signbit()","text":"<p>JavaScript \u5185\u90e8\u4f7f\u752864\u4f4d\u6d6e\u70b9\u6570\uff08\u56fd\u9645\u6807\u51c6 IEEE 754\uff09\u8868\u793a\u6570\u503c\u3002IEEE 754 \u89c4\u5b9a\uff0c64\u4f4d\u6d6e\u70b9\u6570\u7684\u7b2c\u4e00\u4f4d\u662f\u7b26\u53f7\u4f4d\uff0c<code>0</code>\u8868\u793a\u6b63\u6570\uff0c<code>1</code>\u8868\u793a\u8d1f\u6570\u3002\u6240\u4ee5\u4f1a\u6709\u4e24\u79cd\u96f6\uff0c<code>+0</code>\u662f\u7b26\u53f7\u4f4d\u4e3a<code>0</code>\u65f6\u7684\u96f6\uff0c<code>-0</code>\u662f\u7b26\u53f7\u4f4d\u4e3a<code>1</code>\u65f6\u7684\u96f6\u3002\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u5224\u65ad\u4e00\u4e2a\u503c\u662f<code>+0</code>\u8fd8\u662f<code>-0</code>\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u76f8\u7b49\u7684\u3002</p> <pre><code>+0 === -0 // true\n</code></pre> <p>ES6 \u65b0\u589e\u7684<code>Math.sign()</code>\u65b9\u6cd5\uff0c\u53ea\u80fd\u7528\u6765\u5224\u65ad\u6570\u503c\u7684\u6b63\u8d1f\uff0c\u5bf9\u4e8e\u5224\u65ad\u6570\u503c\u7684\u7b26\u53f7\u4f4d\u7528\u5904\u4e0d\u5927\u3002\u56e0\u4e3a\u5982\u679c\u53c2\u6570\u662f<code>-0</code>\uff0c\u5b83\u4f1a\u8fd4\u56de<code>-0</code>\uff0c\u8fd8\u662f\u4e0d\u80fd\u76f4\u63a5\u77e5\u9053\u7b26\u53f7\u4f4d\u662f<code>1</code>\u8fd8\u662f<code>0</code>\u3002</p> <pre><code>Math.sign(-0) // -0\n</code></pre> <p>\u76ee\u524d\uff0c\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5f15\u5165\u4e86<code>Math.signbit()</code>\u65b9\u6cd5\u5224\u65ad\u4e00\u4e2a\u6570\u7684\u7b26\u53f7\u4f4d\u662f\u5426\u8bbe\u7f6e\u4e86\u3002</p> <pre><code>Math.signbit(2) //false\nMath.signbit(-2) //true\nMath.signbit(0) //false\nMath.signbit(-0) //true\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u65b9\u6cd5\u6b63\u786e\u8fd4\u56de\u4e86<code>-0</code>\u7684\u7b26\u53f7\u4f4d\u662f\u8bbe\u7f6e\u4e86\u7684\u3002</p> <p>\u8be5\u65b9\u6cd5\u7684\u7b97\u6cd5\u5982\u4e0b\u3002</p> <ul> <li>\u5982\u679c\u53c2\u6570\u662f<code>NaN</code>\uff0c\u8fd4\u56de<code>false</code></li> <li>\u5982\u679c\u53c2\u6570\u662f<code>-0</code>\uff0c\u8fd4\u56de<code>true</code></li> <li>\u5982\u679c\u53c2\u6570\u662f\u8d1f\u503c\uff0c\u8fd4\u56de<code>true</code></li> <li>\u5176\u4ed6\u60c5\u51b5\u8fd4\u56de<code>false</code></li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#_5","title":"\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26","text":"<p>\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u7ed1\u5b9a<code>this</code>\u5bf9\u8c61\uff0c\u5927\u5927\u51cf\u5c11\u4e86\u663e\u5f0f\u7ed1\u5b9a<code>this</code>\u5bf9\u8c61\u7684\u5199\u6cd5\uff08<code>call()</code>\u3001<code>apply()</code>\u3001<code>bind()</code>\uff09\u3002\u4f46\u662f\uff0c\u7bad\u5934\u51fd\u6570\u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u573a\u5408\uff0c\u6240\u4ee5\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u63d0\u51fa\u4e86\u201c\u51fd\u6570\u7ed1\u5b9a\u201d\uff08function bind\uff09\u8fd0\u7b97\u7b26\uff0c\u7528\u6765\u53d6\u4ee3<code>call()</code>\u3001<code>apply()</code>\u3001<code>bind()</code>\u8c03\u7528\u3002</p> <p>\u51fd\u6570\u7ed1\u5b9a\u8fd0\u7b97\u7b26\u662f\u5e76\u6392\u7684\u4e24\u4e2a\u5192\u53f7\uff08<code>::</code>\uff09\uff0c\u53cc\u5192\u53f7\u5de6\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u8be5\u8fd0\u7b97\u7b26\u4f1a\u81ea\u52a8\u5c06\u5de6\u8fb9\u7684\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u73af\u5883\uff08\u5373<code>this</code>\u5bf9\u8c61\uff09\uff0c\u7ed1\u5b9a\u5230\u53f3\u8fb9\u7684\u51fd\u6570\u4e0a\u9762\u3002</p> <pre><code>foo::bar;\n// \u7b49\u540c\u4e8e\nbar.bind(foo);\n\nfoo::bar(...arguments);\n// \u7b49\u540c\u4e8e\nbar.apply(foo, arguments);\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj, key) {\n  return obj::hasOwnProperty(key);\n}\n</code></pre> <p>\u5982\u679c\u53cc\u5192\u53f7\u5de6\u8fb9\u4e3a\u7a7a\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u5219\u7b49\u4e8e\u5c06\u8be5\u65b9\u6cd5\u7ed1\u5b9a\u5728\u8be5\u5bf9\u8c61\u4e0a\u9762\u3002</p> <pre><code>var method = obj::obj.foo;\n// \u7b49\u540c\u4e8e\nvar method = ::obj.foo;\n\nlet log = ::console.log;\n// \u7b49\u540c\u4e8e\nvar log = console.log.bind(console);\n</code></pre> <p>\u5982\u679c\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26\u7684\u8fd0\u7b97\u7ed3\u679c\uff0c\u8fd8\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\u3002</p> <pre><code>import { map, takeWhile, forEach } from \"iterlib\";\n\ngetPlayers()\n::map(x =&gt; x.character())\n::takeWhile(x =&gt; x.strength &gt; 100)\n::forEach(x =&gt; console.log(x));\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#realm-api","title":"Realm API","text":"<p>Realm API \u63d0\u4f9b\u6c99\u7bb1\u529f\u80fd\uff08sandbox\uff09\uff0c\u5141\u8bb8\u9694\u79bb\u4ee3\u7801\uff0c\u9632\u6b62\u90a3\u4e9b\u88ab\u9694\u79bb\u7684\u4ee3\u7801\u62ff\u5230\u5168\u5c40\u5bf9\u8c61\u3002</p> <p>\u4ee5\u524d\uff0c\u7ecf\u5e38\u4f7f\u7528<code>&lt;iframe&gt;</code>\u4f5c\u4e3a\u6c99\u7bb1\u3002</p> <pre><code>const globalOne = window;\nlet iframe = document.createElement('iframe');\ndocument.body.appendChild(iframe);\nconst globalTwo = iframe.contentWindow;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>&lt;iframe&gt;</code>\u7684\u5168\u5c40\u5bf9\u8c61\u662f\u72ec\u7acb\u7684\uff08<code>iframe.contentWindow</code>\uff09\u3002Realm API \u53ef\u4ee5\u53d6\u4ee3\u8fd9\u4e2a\u529f\u80fd\u3002</p> <pre><code>const globalOne = window;\nconst globalTwo = new Realm().global;\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Realm API</code>\u5355\u72ec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5168\u5c40\u5bf9\u8c61<code>new Realm().global</code>\u3002</p> <p>Realm API \u63d0\u4f9b\u4e00\u4e2a<code>Realm()</code>\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210\u4e00\u4e2a Realm \u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684<code>global</code>\u5c5e\u6027\u6307\u5411\u4e00\u4e2a\u65b0\u7684\u9876\u5c42\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u9876\u5c42\u5bf9\u8c61\u8ddf\u539f\u59cb\u7684\u9876\u5c42\u5bf9\u8c61\u7c7b\u4f3c\u3002</p> <pre><code>const globalOne = window;\nconst globalTwo = new Realm().global;\n\nglobalOne.evaluate('1 + 2') // 3\nglobalTwo.evaluate('1 + 2') // 3\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u751f\u6210\u7684\u9876\u5c42\u5bf9\u8c61\u7684<code>evaluate()</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee3\u7801\u3002</p> <p>\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u8bc1\u660e\uff0cRealm \u9876\u5c42\u5bf9\u8c61\u4e0e\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u662f\u4e24\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>let a1 = globalOne.evaluate('[1,2,3]');\nlet a2 = globalTwo.evaluate('[1,2,3]');\na1.prototype === a2.prototype; // false\na1 instanceof globalTwo.Array; // false\na2 instanceof globalOne.Array; // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u6c99\u7bb1\u91cc\u9762\u7684\u6570\u7ec4\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u8ddf\u539f\u59cb\u73af\u5883\u91cc\u9762\u7684\u6570\u7ec4\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <p>Realm \u6c99\u7bb1\u91cc\u9762\u53ea\u80fd\u8fd0\u884c ECMAScript \u8bed\u6cd5\u63d0\u4f9b\u7684 API\uff0c\u4e0d\u80fd\u8fd0\u884c\u5bbf\u4e3b\u73af\u5883\u63d0\u4f9b\u7684 API\u3002</p> <pre><code>globalTwo.evaluate('console.log(1)')\n// throw an error: console is undefined\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u6c99\u7bb1\u91cc\u9762\u6ca1\u6709<code>console</code>\u5bf9\u8c61\uff0c\u5bfc\u81f4\u62a5\u9519\u3002\u56e0\u4e3a<code>console</code>\u4e0d\u662f\u8bed\u6cd5\u6807\u51c6\uff0c\u662f\u5bbf\u4e3b\u73af\u5883\u63d0\u4f9b\u7684\u3002</p> <p>\u5982\u679c\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>globalTwo.console = globalOne.console;\n</code></pre> <p><code>Realm()</code>\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u5bf9\u8c61\uff0c\u8be5\u53c2\u6570\u5bf9\u8c61\u7684<code>intrinsics</code>\u5c5e\u6027\u53ef\u4ee5\u6307\u5b9a Realm \u6c99\u7bb1\u7ee7\u627f\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <pre><code>const r1 = new Realm();\nr1.global === this;\nr1.global.JSON === JSON; // false\n\nconst r2 = new Realm({ intrinsics: 'inherit' });\nr2.global === this; // false\nr2.global.JSON === JSON; // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6c99\u7bb1\u7684<code>JSON</code>\u65b9\u6cd5\u4e0d\u540c\u4e8e\u539f\u59cb\u7684<code>JSON</code>\u5bf9\u8c61\u3002\u4f46\u662f\uff0c<code>Realm()</code>\u6784\u9020\u51fd\u6570\u63a5\u53d7<code>{ intrinsics: 'inherit' }</code>\u4f5c\u4e3a\u53c2\u6570\u4ee5\u540e\uff0c\u5c31\u4f1a\u7ee7\u627f\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49<code>Realm</code>\u7684\u5b50\u7c7b\uff0c\u7528\u6765\u5b9a\u5236\u81ea\u5df1\u7684\u6c99\u7bb1\u3002</p> <pre><code>class FakeWindow extends Realm {\n  init() {\n    super.init();\n    let global = this.global;\n\n    global.document = new FakeDocument(...);\n    global.alert = new Proxy(fakeAlert, { ... });\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>FakeWindow</code>\u6a21\u62df\u4e86\u4e00\u4e2a\u5047\u7684\u9876\u5c42\u5bf9\u8c61<code>window</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/30-proposals/#json","title":"JSON \u6a21\u5757","text":"<p>import \u547d\u4ee4\u76ee\u524d\u53ea\u80fd\u7528\u4e8e\u52a0\u8f7d ES \u6a21\u5757\uff0c\u73b0\u5728\u6709\u4e00\u4e2a\u63d0\u6848\uff0c\u5141\u8bb8\u52a0\u8f7d JSON \u6a21\u5757\u3002</p> <p>\u5047\u5b9a\u6709\u4e00\u4e2a JSON \u6a21\u5757\u6587\u4ef6<code>config.json</code>\u3002</p> <pre><code>{\n  \"appName\": \"My App\"\n}\n</code></pre> <p>\u76ee\u524d\uff0c\u53ea\u80fd\u4f7f\u7528<code>fetch()</code>\u52a0\u8f7d JSON \u6a21\u5757\u3002</p> <pre><code>const response = await fetch('./config.json');\nconst json = await response.json();\n</code></pre> <p>import \u547d\u4ee4\u80fd\u591f\u76f4\u63a5\u52a0\u8f7d JSON \u6a21\u5757\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002</p> <pre><code>import configData from './config.json' assert { type: \"json\" };\nconsole.log(configData.appName);\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6574\u4e2a JSON \u5bf9\u8c61\u88ab\u5bfc\u5165\u4e3a<code>configData</code>\u5bf9\u8c61\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4ece\u8be5\u5bf9\u8c61\u83b7\u53d6 JSON \u6570\u636e\u3002</p> <p><code>import</code>\u547d\u4ee4\u5bfc\u5165 JSON \u6a21\u5757\u65f6\uff0c\u547d\u4ee4\u7ed3\u5c3e\u7684<code>assert {type: \"json\"}</code>\u4e0d\u53ef\u7f3a\u5c11\u3002\u8fd9\u53eb\u505a\u5bfc\u5165\u65ad\u8a00\uff0c\u7528\u6765\u544a\u8bc9 JavaScript \u5f15\u64ce\uff0c\u73b0\u5728\u52a0\u8f7d\u7684\u662f JSON \u6a21\u5757\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u901a\u8fc7<code>.json</code>\u540e\u7f00\u540d\u5224\u65ad\u5462\uff1f\u56e0\u4e3a\u6d4f\u89c8\u5668\u7684\u4f20\u7edf\u662f\u4e0d\u901a\u8fc7\u540e\u7f00\u540d\u5224\u65ad\u6587\u4ef6\u7c7b\u578b\uff0c\u6807\u51c6\u59d4\u5458\u4f1a\u5e0c\u671b\u9075\u5faa\u8fd9\u79cd\u505a\u6cd5\uff0c\u8fd9\u6837\u4e5f\u53ef\u4ee5\u907f\u514d\u4e00\u4e9b\u5b89\u5168\u95ee\u9898\u3002</p> <p>\u5bfc\u5165\u65ad\u8a00\u662f JavaScript \u5bfc\u5165\u5176\u4ed6\u683c\u5f0f\u6a21\u5757\u7684\u6807\u51c6\u5199\u6cd5\uff0cJSON \u6a21\u5757\u5c06\u662f\u7b2c\u4e00\u4e2a\u4f7f\u7528\u8fd9\u79cd\u8bed\u6cd5\u5bfc\u5165\u7684\u6a21\u5757\u3002\u4ee5\u540e\uff0c\u8fd8\u4f1a\u652f\u6301\u5bfc\u5165 CSS \u6a21\u5757\u3001HTML \u6a21\u5757\u7b49\u7b49\u3002</p> <p>\u52a8\u6001\u52a0\u8f7d\u6a21\u5757\u7684<code>import()</code>\u51fd\u6570\u4e5f\u652f\u6301\u52a0\u8f7d JSON \u6a21\u5757\u3002</p> <pre><code>import('./config.json', { assert: { type: 'json' } })\n</code></pre> <p>\u811a\u672c\u52a0\u8f7d JSON \u6a21\u5757\u4ee5\u540e\uff0c\u8fd8\u53ef\u4ee5\u518d\u7528 export \u547d\u4ee4\u8f93\u51fa\u3002\u8fd9\u65f6\uff0c\u53ef\u4ee5\u5c06 export \u548c import \u7ed3\u5408\u6210\u4e00\u4e2a\u8bed\u53e5\u3002</p> <pre><code>export { config } from './config.json' assert { type: 'json' };\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/","title":"31-\u88c5\u9970\u5668","text":"<p>[\u8bf4\u660e] Decorator \u63d0\u6848\u7ecf\u5386\u4e86\u91cd\u5927\u7684\u8bed\u6cd5\u53d8\u5316\uff0c\u76ee\u524d\u5904\u4e8e\u7b2c\u4e09\u9636\u6bb5\uff0c\u5b9a\u6848\u4e4b\u524d\u4e0d\u77e5\u9053\u662f\u5426\u8fd8\u6709\u53d8\u5316\u3002\u672c\u7ae0\u73b0\u5728\u5c5e\u4e8e\u8349\u7a3f\u9636\u6bb5\uff0c\u51e1\u662f\u6807\u6ce8\u201c\u65b0\u8bed\u6cd5\u201d\u7684\u7ae0\u8282\uff0c\u90fd\u662f\u57fa\u4e8e\u5f53\u524d\u7684\u8bed\u6cd5\uff0c\u4e0d\u8fc7\u6ca1\u6709\u8be6\u7ec6\u6574\u7406\uff0c\u53ea\u662f\u4e00\u4e9b\u539f\u59cb\u6750\u6599\uff1b\u672a\u6807\u6ce8\u201c\u65b0\u8bed\u6cd5\u201d\u7684\u7ae0\u8282\u57fa\u4e8e\u4ee5\u524d\u7684\u8bed\u6cd5\uff0c\u662f\u8fc7\u53bb\u9057\u7559\u7684\u7a3f\u5b50\u3002\u4e4b\u6240\u4ee5\u4fdd\u7559\u4ee5\u524d\u7684\u5185\u5bb9\uff0c\u6709\u4e24\u4e2a\u539f\u56e0\uff0c\u4e00\u662f TypeScript \u88c5\u9970\u5668\u4f1a\u7528\u5230\u8fd9\u4e9b\u8bed\u6cd5\uff0c\u4e8c\u662f\u91cc\u9762\u5305\u542b\u4e0d\u5c11\u6709\u4ef7\u503c\u7684\u5185\u5bb9\u3002\u7b49\u5230\u6807\u51c6\u5b8c\u5168\u5b9a\u6848\uff0c\u672c\u7ae0\u5c06\u5f7b\u5e95\u91cd\u5199\uff1a\u5220\u53bb\u8fc7\u65f6\u5185\u5bb9\uff0c\u8865\u5145\u6750\u6599\uff0c\u589e\u52a0\u89e3\u91ca\u3002\uff082022\u5e746\u6708\uff09</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_1","title":"\u7b80\u4ecb\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u88c5\u9970\u5668\uff08Decorator\uff09\u7528\u6765\u589e\u5f3a JavaScript \u7c7b\uff08class\uff09\u7684\u529f\u80fd\uff0c\u8bb8\u591a\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u90fd\u6709\u8fd9\u79cd\u8bed\u6cd5\uff0c\u76ee\u524d\u6709\u4e00\u4e2a\u63d0\u6848\u5c06\u5176\u5f15\u5165\u4e86 ECMAScript\u3002</p> <p>\u88c5\u9970\u5668\u662f\u4e00\u79cd\u51fd\u6570\uff0c\u5199\u6210<code>@ + \u51fd\u6570\u540d</code>\uff0c\u53ef\u4ee5\u7528\u6765\u88c5\u9970\u56db\u79cd\u7c7b\u578b\u7684\u503c\u3002</p> <ul> <li>\u7c7b</li> <li>\u7c7b\u7684\u5c5e\u6027</li> <li>\u7c7b\u7684\u65b9\u6cd5</li> <li>\u5c5e\u6027\u5b58\u53d6\u5668\uff08accessor\uff09</li> </ul> <p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u88c5\u9970\u5668\u653e\u5728\u7c7b\u540d\u548c\u7c7b\u65b9\u6cd5\u540d\u4e4b\u524d\uff0c\u5927\u5bb6\u53ef\u4ee5\u611f\u53d7\u4e00\u4e0b\u5199\u6cd5\u3002</p> <pre><code>@frozen class Foo {\n  @configurable(false)\n  @enumerable(true)\n  method() {}\n\n  @throttle(500)\n  expensiveMethod() {}\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e00\u5171\u4f7f\u7528\u4e86\u56db\u4e2a\u88c5\u9970\u5668\uff0c\u4e00\u4e2a\u7528\u5728\u7c7b\u672c\u8eab\uff08@frozen\uff09\uff0c\u53e6\u5916\u4e09\u4e2a\u7528\u5728\u7c7b\u65b9\u6cd5\uff08@configurable()\u3001@enumerable()\u3001@throttle()\uff09\u3002\u5b83\u4eec\u4e0d\u4ec5\u589e\u52a0\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\uff0c\u6e05\u6670\u5730\u8868\u8fbe\u4e86\u610f\u56fe\uff0c\u800c\u4e14\u63d0\u4f9b\u4e00\u79cd\u65b9\u4fbf\u7684\u624b\u6bb5\uff0c\u589e\u52a0\u6216\u4fee\u6539\u7c7b\u7684\u529f\u80fd\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#api","title":"\u88c5\u9970\u5668 API\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u51fd\u6570\uff0cAPI \u7684\u7c7b\u578b\u63cf\u8ff0\u5982\u4e0b\uff08TypeScript \u5199\u6cd5\uff09\u3002</p> <pre><code>type Decorator = (value: Input, context: {\n  kind: string;\n  name: string | symbol;\n  access: {\n    get?(): unknown;\n    set?(value: unknown): void;\n  };\n  private?: boolean;\n  static?: boolean;\n  addInitializer?(initializer: () =&gt; void): void;\n}) =&gt; Output | void;\n</code></pre> <p>\u88c5\u9970\u5668\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\u3002\u8fd0\u884c\u65f6\uff0cJavaScript \u5f15\u64ce\u4f1a\u63d0\u4f9b\u8fd9\u4e24\u4e2a\u53c2\u6570\u3002</p> <ul> <li><code>value</code>\uff1a\u6240\u8981\u88c5\u9970\u7684\u503c\uff0c\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u662f<code>undefined</code>\uff08\u88c5\u9970\u5c5e\u6027\u65f6\uff09\u3002</li> <li><code>context</code>\uff1a\u4e0a\u4e0b\u6587\u4fe1\u606f\u5bf9\u8c61\u3002</li> </ul> <p>\u88c5\u9970\u5668\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u662f\u4e00\u4e2a\u65b0\u7248\u672c\u7684\u88c5\u9970\u5bf9\u8c61\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\uff08void\uff09\u3002</p> <p><code>context</code>\u5bf9\u8c61\u6709\u5f88\u591a\u5c5e\u6027\uff0c\u5176\u4e2d<code>kind</code>\u5c5e\u6027\u8868\u793a\u5c5e\u4e8e\u54ea\u4e00\u79cd\u88c5\u9970\uff0c\u5176\u4ed6\u5c5e\u6027\u7684\u542b\u4e49\u5982\u4e0b\u3002</p> <ul> <li><code>kind</code>\uff1a\u5b57\u7b26\u4e32\uff0c\u8868\u793a\u88c5\u9970\u7c7b\u578b\uff0c\u53ef\u80fd\u7684\u53d6\u503c\u6709<code>class</code>\u3001<code>method</code>\u3001<code>getter</code>\u3001<code>setter</code>\u3001<code>field</code>\u3001<code>accessor</code>\u3002</li> <li><code>name</code>\uff1a\u88ab\u88c5\u9970\u7684\u503c\u7684\u540d\u79f0: The name of the value, or in the case of private elements the description of it (e.g. the readable name).</li> <li><code>access</code>\uff1a\u5bf9\u8c61\uff0c\u5305\u542b\u8bbf\u95ee\u8fd9\u4e2a\u503c\u7684\u65b9\u6cd5\uff0c\u5373\u5b58\u503c\u5668\u548c\u53d6\u503c\u5668\u3002</li> <li><code>static</code>: \u5e03\u5c14\u503c\uff0c\u8be5\u503c\u662f\u5426\u4e3a\u9759\u6001\u5143\u7d20\u3002</li> <li><code>private</code>\uff1a\u5e03\u5c14\u503c\uff0c\u8be5\u503c\u662f\u5426\u4e3a\u79c1\u6709\u5143\u7d20\u3002</li> <li><code>addInitializer</code>\uff1a\u51fd\u6570\uff0c\u5141\u8bb8\u7528\u6237\u589e\u52a0\u521d\u59cb\u5316\u903b\u8f91\u3002</li> </ul> <p>\u88c5\u9970\u5668\u7684\u6267\u884c\u6b65\u9aa4\u5982\u4e0b\u3002</p> <ol> <li>\u8ba1\u7b97\u5404\u4e2a\u88c5\u9970\u5668\u7684\u503c\uff0c\u6309\u7167\u4ece\u5de6\u5230\u53f3\uff0c\u4ece\u4e0a\u5230\u4e0b\u7684\u987a\u5e8f\u3002</li> <li>\u8c03\u7528\u65b9\u6cd5\u88c5\u9970\u5668\u3002</li> <li>\u8c03\u7528\u7c7b\u88c5\u9970\u5668\u3002</li> </ol>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_2","title":"\u7c7b\u7684\u88c5\u9970","text":"<p>\u88c5\u9970\u5668\u53ef\u4ee5\u7528\u6765\u88c5\u9970\u6574\u4e2a\u7c7b\u3002</p> <pre><code>@testable\nclass MyTestableClass {\n  // ...\n}\n\nfunction testable(target) {\n  target.isTestable = true;\n}\n\nMyTestableClass.isTestable // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>@testable</code>\u5c31\u662f\u4e00\u4e2a\u88c5\u9970\u5668\u3002\u5b83\u4fee\u6539\u4e86<code>MyTestableClass</code>\u8fd9\u4e2a\u7c7b\u7684\u884c\u4e3a\uff0c\u4e3a\u5b83\u52a0\u4e0a\u4e86\u9759\u6001\u5c5e\u6027<code>isTestable</code>\u3002<code>testable</code>\u51fd\u6570\u7684\u53c2\u6570<code>target</code>\u662f<code>MyTestableClass</code>\u7c7b\u672c\u8eab\u3002</p> <p>\u57fa\u672c\u4e0a\uff0c\u88c5\u9970\u5668\u7684\u884c\u4e3a\u5c31\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>@decorator\nclass A {}\n\n// \u7b49\u540c\u4e8e\n\nclass A {}\nA = decorator(A) || A;\n</code></pre> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u5bf9\u7c7b\u8fdb\u884c\u5904\u7406\u7684\u51fd\u6570\u3002\u88c5\u9970\u5668\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u6240\u8981\u88c5\u9970\u7684\u76ee\u6807\u7c7b\u3002</p> <pre><code>function testable(target) {\n  // ...\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>testable</code>\u51fd\u6570\u7684\u53c2\u6570<code>target</code>\uff0c\u5c31\u662f\u4f1a\u88ab\u88c5\u9970\u7684\u7c7b\u3002</p> <p>\u5982\u679c\u89c9\u5f97\u4e00\u4e2a\u53c2\u6570\u4e0d\u591f\u7528\uff0c\u53ef\u4ee5\u5728\u88c5\u9970\u5668\u5916\u9762\u518d\u5c01\u88c5\u4e00\u5c42\u51fd\u6570\u3002</p> <pre><code>function testable(isTestable) {\n  return function(target) {\n    target.isTestable = isTestable;\n  }\n}\n\n@testable(true)\nclass MyTestableClass {}\nMyTestableClass.isTestable // true\n\n@testable(false)\nclass MyClass {}\nMyClass.isTestable // false\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u88c5\u9970\u5668<code>testable</code>\u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\uff0c\u8fd9\u5c31\u7b49\u4e8e\u53ef\u4ee5\u4fee\u6539\u88c5\u9970\u5668\u7684\u884c\u4e3a\u3002</p> <p>\u524d\u9762\u7684\u4f8b\u5b50\u662f\u4e3a\u7c7b\u6dfb\u52a0\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u5982\u679c\u60f3\u6dfb\u52a0\u5b9e\u4f8b\u5c5e\u6027\uff0c\u53ef\u4ee5\u901a\u8fc7\u76ee\u6807\u7c7b\u7684<code>prototype</code>\u5bf9\u8c61\u64cd\u4f5c\u3002</p> <pre><code>function testable(target) {\n  target.prototype.isTestable = true;\n}\n\n@testable\nclass MyTestableClass {}\n\nlet obj = new MyTestableClass();\nobj.isTestable // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u88c5\u9970\u5668\u51fd\u6570<code>testable</code>\u662f\u5728\u76ee\u6807\u7c7b\u7684<code>prototype</code>\u5bf9\u8c61\u4e0a\u6dfb\u52a0\u5c5e\u6027\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u5728\u5b9e\u4f8b\u4e0a\u8c03\u7528\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>// mixins.js\nexport function mixins(...list) {\n  return function (target) {\n    Object.assign(target.prototype, ...list)\n  }\n}\n\n// main.js\nimport { mixins } from './mixins.js'\n\nconst Foo = {\n  foo() { console.log('foo') }\n};\n\n@mixins(Foo)\nclass MyClass {}\n\nlet obj = new MyClass();\nobj.foo() // 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7\u88c5\u9970\u5668<code>mixins</code>\uff0c\u628a<code>Foo</code>\u5bf9\u8c61\u7684\u65b9\u6cd5\u6dfb\u52a0\u5230\u4e86<code>MyClass</code>\u7684\u5b9e\u4f8b\u4e0a\u9762\u3002\u53ef\u4ee5\u7528<code>Object.assign()</code>\u6a21\u62df\u8fd9\u4e2a\u529f\u80fd\u3002</p> <pre><code>const Foo = {\n  foo() { console.log('foo') }\n};\n\nclass MyClass {}\n\nObject.assign(MyClass.prototype, Foo);\n\nlet obj = new MyClass();\nobj.foo() // 'foo'\n</code></pre> <p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0cReact \u4e0e Redux \u5e93\u7ed3\u5408\u4f7f\u7528\u65f6\uff0c\u5e38\u5e38\u9700\u8981\u5199\u6210\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>class MyReactComponent extends React.Component {}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MyReactComponent);\n</code></pre> <p>\u6709\u4e86\u88c5\u9970\u5668\uff0c\u5c31\u53ef\u4ee5\u6539\u5199\u4e0a\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>@connect(mapStateToProps, mapDispatchToProps)\nexport default class MyReactComponent extends React.Component {}\n</code></pre> <p>\u76f8\u5bf9\u6765\u8bf4\uff0c\u540e\u4e00\u79cd\u5199\u6cd5\u770b\u4e0a\u53bb\u66f4\u5bb9\u6613\u7406\u89e3\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_3","title":"\u7c7b\u88c5\u9970\u5668\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u7c7b\u88c5\u9970\u5668\u7684\u7c7b\u578b\u63cf\u8ff0\u5982\u4e0b\u3002</p> <pre><code>type ClassDecorator = (value: Function, context: {\n  kind: \"class\";\n  name: string | undefined;\n  addInitializer(initializer: () =&gt; void): void;\n}) =&gt; Function | void;\n</code></pre> <p>\u7c7b\u88c5\u9970\u5668\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5c31\u662f\u88ab\u88c5\u9970\u7684\u7c7b\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e0a\u4e0b\u6587\u5bf9\u8c61\uff0c\u5982\u679c\u88ab\u88c5\u9970\u7684\u7c7b\u662f\u4e00\u4e2a\u533f\u540d\u7c7b\uff0c<code>name</code>\u5c5e\u6027\u5c31\u4e3a<code>undefined</code>\u3002</p> <p>\u7c7b\u88c5\u9970\u5668\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u7c7b\uff0c\u53d6\u4ee3\u539f\u6765\u7684\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\u3002\u5982\u679c\u8fd4\u56de\u7684\u4e0d\u662f\u6784\u9020\u51fd\u6570\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function logged(value, { kind, name }) {\n  if (kind === \"class\") {\n    return class extends value {\n      constructor(...args) {\n        super(...args);\n        console.log(`constructing an instance of ${name} with arguments ${args.join(\", \")}`);\n      }\n    }\n  }\n\n  // ...\n}\n\n@logged\nclass C {}\n\nnew C(1);\n// constructing an instance of C with arguments 1\n</code></pre> <p>\u5982\u679c\u4e0d\u4f7f\u7528\u88c5\u9970\u5668\uff0c\u7c7b\u88c5\u9970\u5668\u5b9e\u9645\u4e0a\u6267\u884c\u7684\u662f\u4e0b\u9762\u7684\u8bed\u6cd5\u3002</p> <pre><code>class C {}\n\nC = logged(C, {\n  kind: \"class\",\n  name: \"C\",\n}) ?? C;\n\nnew C(1);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_4","title":"\u65b9\u6cd5\u88c5\u9970\u5668\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u65b9\u6cd5\u88c5\u9970\u5668\u4f1a\u4fee\u6539\u7c7b\u7684\u65b9\u6cd5\u3002</p> <pre><code>class C {\n  @trace\n  toString() {\n    return 'C';\n  }\n}\n\n// \u76f8\u5f53\u4e8e\nC.prototype.toString = trace(C.prototype.toString);\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>@trace</code>\u88c5\u9970<code>toString()</code>\u65b9\u6cd5\uff0c\u5c31\u76f8\u5f53\u4e8e\u4fee\u6539\u4e86\u8be5\u65b9\u6cd5\u3002</p> <p>\u65b9\u6cd5\u88c5\u9970\u5668\u4f7f\u7528 TypeScript \u63cf\u8ff0\u7c7b\u578b\u5982\u4e0b\u3002</p> <pre><code>type ClassMethodDecorator = (value: Function, context: {\n  kind: \"method\";\n  name: string | symbol;\n  access: { get(): unknown };\n  static: boolean;\n  private: boolean;\n  addInitializer(initializer: () =&gt; void): void;\n}) =&gt; Function | void;\n</code></pre> <p>\u65b9\u6cd5\u88c5\u9970\u5668\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570<code>value</code>\uff0c\u5c31\u662f\u6240\u8981\u88c5\u9970\u7684\u65b9\u6cd5\u3002</p> <p>\u65b9\u6cd5\u88c5\u9970\u5668\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\uff0c\u53d6\u4ee3\u539f\u6765\u7684\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u503c\uff0c\u8868\u793a\u4f9d\u7136\u4f7f\u7528\u539f\u6765\u7684\u65b9\u6cd5\u3002\u5982\u679c\u8fd4\u56de\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c\u5c31\u4f1a\u62a5\u9519\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function replaceMethod() {\n  return function () {\n    return `How are you, ${this.name}?`;\n  }\n}\n\nclass Person {\n  constructor(name) {\n    this.name = name;\n  }\n  @replaceMethod\n  hello() {\n    return `Hi ${this.name}!`;\n  }\n}\n\nconst robin = new Person('Robin');\n\nrobin.hello(), 'How are you, Robin?'\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c<code>@replaceMethod</code>\u8fd4\u56de\u4e86\u4e00\u4e2a\u65b0\u51fd\u6570\uff0c\u53d6\u4ee3\u4e86\u539f\u6765\u7684<code>hello()</code>\u65b9\u6cd5\u3002</p> <pre><code>function logged(value, { kind, name }) {\n  if (kind === \"method\") {\n    return function (...args) {\n      console.log(`starting ${name} with arguments ${args.join(\", \")}`);\n      const ret = value.call(this, ...args);\n      console.log(`ending ${name}`);\n      return ret;\n    };\n  }\n}\n\nclass C {\n  @logged\n  m(arg) {}\n}\n\nnew C().m(1);\n// starting m with arguments 1\n// ending m\n</code></pre> <p>\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u88c5\u9970\u5668<code>@logged</code>\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u4ee3\u66ff\u539f\u6765\u7684<code>m()</code>\u65b9\u6cd5\u3002</p> <p>\u8fd9\u91cc\u7684\u88c5\u9970\u5668\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u771f\u6b63\u7684\u64cd\u4f5c\u662f\u50cf\u4e0b\u9762\u8fd9\u6837\uff0c\u6539\u6389\u539f\u578b\u94fe\u4e0a\u9762<code>m()</code>\u65b9\u6cd5\u3002</p> <pre><code>class C {\n  m(arg) {}\n}\n\nC.prototype.m = logged(C.prototype.m, {\n  kind: \"method\",\n  name: \"m\",\n  static: false,\n  private: false,\n}) ?? C.prototype.m;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_5","title":"\u65b9\u6cd5\u7684\u88c5\u9970","text":"<p>\u88c5\u9970\u5668\u4e0d\u4ec5\u53ef\u4ee5\u88c5\u9970\u7c7b\uff0c\u8fd8\u53ef\u4ee5\u88c5\u9970\u7c7b\u7684\u5c5e\u6027\u3002</p> <pre><code>class Person {\n  @readonly\n  name() { return `${this.first} ${this.last}` }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u88c5\u9970\u5668<code>readonly</code>\u7528\u6765\u88c5\u9970\u201c\u7c7b\u201d\u7684<code>name</code>\u65b9\u6cd5\u3002</p> <p>\u88c5\u9970\u5668\u51fd\u6570<code>readonly</code>\u4e00\u5171\u53ef\u4ee5\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\u3002</p> <pre><code>function readonly(target, name, descriptor){\n  // descriptor\u5bf9\u8c61\u539f\u6765\u7684\u503c\u5982\u4e0b\n  // {\n  //   value: specifiedFunction,\n  //   enumerable: false,\n  //   configurable: true,\n  //   writable: true\n  // };\n  descriptor.writable = false;\n  return descriptor;\n}\n\nreadonly(Person.prototype, 'name', descriptor);\n// \u7c7b\u4f3c\u4e8e\nObject.defineProperty(Person.prototype, 'name', descriptor);\n</code></pre> <p>\u88c5\u9970\u5668\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u4e0a\u4f8b\u662f<code>Person.prototype</code>\uff0c\u88c5\u9970\u5668\u7684\u672c\u610f\u662f\u8981\u201c\u88c5\u9970\u201d\u7c7b\u7684\u5b9e\u4f8b\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\u5b9e\u4f8b\u8fd8\u6ca1\u751f\u6210\uff0c\u6240\u4ee5\u53ea\u80fd\u53bb\u88c5\u9970\u539f\u578b\uff08\u8fd9\u4e0d\u540c\u4e8e\u7c7b\u7684\u88c5\u9970\uff0c\u90a3\u79cd\u60c5\u51b5\u65f6<code>target</code>\u53c2\u6570\u6307\u7684\u662f\u7c7b\u672c\u8eab\uff09\uff1b\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6240\u8981\u88c5\u9970\u7684\u5c5e\u6027\u540d\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u8be5\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\u3002</p> <p>\u53e6\u5916\uff0c\u4e0a\u9762\u4ee3\u7801\u8bf4\u660e\uff0c\u88c5\u9970\u5668\uff08readonly\uff09\u4f1a\u4fee\u6539\u5c5e\u6027\u7684\u63cf\u8ff0\u5bf9\u8c61\uff08descriptor\uff09\uff0c\u7136\u540e\u88ab\u4fee\u6539\u7684\u63cf\u8ff0\u5bf9\u8c61\u518d\u7528\u6765\u5b9a\u4e49\u5c5e\u6027\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4fee\u6539\u5c5e\u6027\u63cf\u8ff0\u5bf9\u8c61\u7684<code>enumerable</code>\u5c5e\u6027\uff0c\u4f7f\u5f97\u8be5\u5c5e\u6027\u4e0d\u53ef\u904d\u5386\u3002</p> <pre><code>class Person {\n  @nonenumerable\n  get kidCount() { return this.children.length; }\n}\n\nfunction nonenumerable(target, name, descriptor) {\n  descriptor.enumerable = false;\n  return descriptor;\n}\n</code></pre> <p>\u4e0b\u9762\u7684<code>@log</code>\u88c5\u9970\u5668\uff0c\u53ef\u4ee5\u8d77\u5230\u8f93\u51fa\u65e5\u5fd7\u7684\u4f5c\u7528\u3002</p> <pre><code>class Math {\n  @log\n  add(a, b) {\n    return a + b;\n  }\n}\n\nfunction log(target, name, descriptor) {\n  var oldValue = descriptor.value;\n\n  descriptor.value = function() {\n    console.log(`Calling ${name} with`, arguments);\n    return oldValue.apply(this, arguments);\n  };\n\n  return descriptor;\n}\n\nconst math = new Math();\n\n// passed parameters should get logged now\nmath.add(2, 4);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>@log</code>\u88c5\u9970\u5668\u7684\u4f5c\u7528\u5c31\u662f\u5728\u6267\u884c\u539f\u59cb\u7684\u64cd\u4f5c\u4e4b\u524d\uff0c\u6267\u884c\u4e00\u6b21<code>console.log</code>\uff0c\u4ece\u800c\u8fbe\u5230\u8f93\u51fa\u65e5\u5fd7\u7684\u76ee\u7684\u3002</p> <p>\u88c5\u9970\u5668\u6709\u6ce8\u91ca\u7684\u4f5c\u7528\u3002</p> <pre><code>@testable\nclass Person {\n  @readonly\n  @nonenumerable\n  name() { return `${this.first} ${this.last}` }\n}\n</code></pre> <p>\u4ece\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4e00\u773c\u5c31\u80fd\u770b\u51fa\uff0c<code>Person</code>\u7c7b\u662f\u53ef\u6d4b\u8bd5\u7684\uff0c\u800c<code>name</code>\u65b9\u6cd5\u662f\u53ea\u8bfb\u548c\u4e0d\u53ef\u679a\u4e3e\u7684\u3002</p> <p>\u4e0b\u9762\u662f\u4f7f\u7528 Decorator \u5199\u6cd5\u7684\u7ec4\u4ef6\uff0c\u770b\u4e0a\u53bb\u4e00\u76ee\u4e86\u7136\u3002</p> <pre><code>@Component({\n  tag: 'my-component',\n  styleUrl: 'my-component.scss'\n})\nexport class MyComponent {\n  @Prop() first: string;\n  @Prop() last: string;\n  @State() isVisible: boolean = true;\n\n  render() {\n    return (\n      &lt;p&gt;Hello, my name is {this.first} {this.last}&lt;/p&gt;\n    );\n  }\n}\n</code></pre> <p>\u5982\u679c\u540c\u4e00\u4e2a\u65b9\u6cd5\u6709\u591a\u4e2a\u88c5\u9970\u5668\uff0c\u4f1a\u50cf\u5265\u6d0b\u8471\u4e00\u6837\uff0c\u5148\u4ece\u5916\u5230\u5185\u8fdb\u5165\uff0c\u7136\u540e\u7531\u5185\u5411\u5916\u6267\u884c\u3002</p> <pre><code>function dec(id){\n  console.log('evaluated', id);\n  return (target, property, descriptor) =&gt; console.log('executed', id);\n}\n\nclass Example {\n    @dec(1)\n    @dec(2)\n    method(){}\n}\n// evaluated 1\n// evaluated 2\n// executed 2\n// executed 1\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5916\u5c42\u88c5\u9970\u5668<code>@dec(1)</code>\u5148\u8fdb\u5165\uff0c\u4f46\u662f\u5185\u5c42\u88c5\u9970\u5668<code>@dec(2)</code>\u5148\u6267\u884c\u3002</p> <p>\u9664\u4e86\u6ce8\u91ca\uff0c\u88c5\u9970\u5668\u8fd8\u80fd\u7528\u6765\u7c7b\u578b\u68c0\u67e5\u3002\u6240\u4ee5\uff0c\u5bf9\u4e8e\u7c7b\u6765\u8bf4\uff0c\u8fd9\u9879\u529f\u80fd\u76f8\u5f53\u6709\u7528\u3002\u4ece\u957f\u671f\u6765\u770b\uff0c\u5b83\u5c06\u662f JavaScript \u4ee3\u7801\u9759\u6001\u5206\u6790\u7684\u91cd\u8981\u5de5\u5177\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_6","title":"\u4e3a\u4ec0\u4e48\u88c5\u9970\u5668\u4e0d\u80fd\u7528\u4e8e\u51fd\u6570\uff1f","text":"<p>\u88c5\u9970\u5668\u53ea\u80fd\u7528\u4e8e\u7c7b\u548c\u7c7b\u7684\u65b9\u6cd5\uff0c\u4e0d\u80fd\u7528\u4e8e\u51fd\u6570\uff0c\u56e0\u4e3a\u5b58\u5728\u51fd\u6570\u63d0\u5347\u3002</p> <pre><code>var counter = 0;\n\nvar add = function () {\n  counter++;\n};\n\n@add\nfunction foo() {\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u610f\u56fe\u662f\u6267\u884c\u540e<code>counter</code>\u7b49\u4e8e 1\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u7ed3\u679c\u662f<code>counter</code>\u7b49\u4e8e 0\u3002\u56e0\u4e3a\u51fd\u6570\u63d0\u5347\uff0c\u4f7f\u5f97\u5b9e\u9645\u6267\u884c\u7684\u4ee3\u7801\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>var counter;\nvar add;\n\n@add\nfunction foo() {\n}\n\ncounter = 0;\n\nadd = function () {\n  counter++;\n};\n</code></pre> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var readOnly = require(\"some-decorator\");\n\n@readOnly\nfunction foo() {\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e5f\u6709\u95ee\u9898\uff0c\u56e0\u4e3a\u5b9e\u9645\u6267\u884c\u662f\u4e0b\u9762\u8fd9\u6837\u3002</p> <pre><code>var readOnly;\n\n@readOnly\nfunction foo() {\n}\n\nreadOnly = require(\"some-decorator\");\n</code></pre> <p>\u603b\u4e4b\uff0c\u7531\u4e8e\u5b58\u5728\u51fd\u6570\u63d0\u5347\uff0c\u4f7f\u5f97\u88c5\u9970\u5668\u4e0d\u80fd\u7528\u4e8e\u51fd\u6570\u3002\u7c7b\u662f\u4e0d\u4f1a\u63d0\u5347\u7684\uff0c\u6240\u4ee5\u5c31\u6ca1\u6709\u8fd9\u65b9\u9762\u7684\u95ee\u9898\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u4e00\u5b9a\u8981\u88c5\u9970\u51fd\u6570\uff0c\u53ef\u4ee5\u91c7\u7528\u9ad8\u9636\u51fd\u6570\u7684\u5f62\u5f0f\u76f4\u63a5\u6267\u884c\u3002</p> <pre><code>function doSomething(name) {\n  console.log('Hello, ' + name);\n}\n\nfunction loggingDecorator(wrapped) {\n  return function() {\n    console.log('Starting');\n    const result = wrapped.apply(this, arguments);\n    console.log('Finished');\n    return result;\n  }\n}\n\nconst wrapped = loggingDecorator(doSomething);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_7","title":"\u5b58\u53d6\u5668\u88c5\u9970\u5668\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u5b58\u53d6\u5668\u88c5\u9970\u5668\u4f7f\u7528 TypeScript \u63cf\u8ff0\u7684\u7c7b\u578b\u5982\u4e0b\u3002</p> <pre><code>type ClassGetterDecorator = (value: Function, context: {\n  kind: \"getter\";\n  name: string | symbol;\n  access: { get(): unknown };\n  static: boolean;\n  private: boolean;\n  addInitializer(initializer: () =&gt; void): void;\n}) =&gt; Function | void;\n\ntype ClassSetterDecorator = (value: Function, context: {\n  kind: \"setter\";\n  name: string | symbol;\n  access: { set(value: unknown): void };\n  static: boolean;\n  private: boolean;\n  addInitializer(initializer: () =&gt; void): void;\n}) =&gt; Function | void;\n</code></pre> <p>\u5b58\u53d6\u5668\u88c5\u9970\u5668\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5c31\u662f\u539f\u59cb\u7684\u5b58\u503c\u5668\uff08setter\uff09\u548c\u53d6\u503c\u5668\uff08getter\uff09\u3002</p> <p>\u5b58\u53d6\u5668\u88c5\u9970\u5668\u7684\u8fd4\u56de\u503c\u5982\u679c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5c31\u4f1a\u53d6\u4ee3\u539f\u6765\u7684\u5b58\u53d6\u5668\u3002\u672c\u8d28\u4e0a\uff0c\u5c31\u50cf\u65b9\u6cd5\u88c5\u9970\u5668\u4e00\u6837\uff0c\u4fee\u6539\u53d1\u751f\u5728\u7c7b\u7684\u539f\u578b\u5bf9\u8c61\u4e0a\u3002\u5b83\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\uff0c\u7ee7\u7eed\u4f7f\u7528\u539f\u6765\u7684\u5b58\u53d6\u5668\u3002\u5982\u679c\u8fd4\u56de\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p> <p>\u5b58\u53d6\u5668\u88c5\u9970\u5668\u5bf9\u5b58\u503c\u5668\uff08setter\uff09\u548c\u53d6\u503c\u5668\uff08getter\uff09\u662f\u5206\u5f00\u4f5c\u7528\u7684\u3002\u4e0b\u9762\u7684\u4f8b\u5b50\u91cc\u9762\uff0c<code>@foo</code>\u53ea\u88c5\u9970<code>get x()</code>\uff0c\u4e0d\u88c5\u9970<code>set x()</code>\u3002</p> <pre><code>class C {\n  @foo\n  get x() {\n    // ...\n  }\n\n  set x(val) {\n    // ...\n  }\n}\n</code></pre> <p>\u4e0a\u4e00\u8282\u7684<code>@logged</code>\u88c5\u9970\u5668\u7a0d\u52a0\u4fee\u6539\uff0c\u5c31\u53ef\u4ee5\u7528\u5728\u5b58\u53d6\u88c5\u9970\u5668\u3002</p> <pre><code>function logged(value, { kind, name }) {\n  if (kind === \"method\" || kind === \"getter\" || kind === \"setter\") {\n    return function (...args) {\n      console.log(`starting ${name} with arguments ${args.join(\", \")}`);\n      const ret = value.call(this, ...args);\n      console.log(`ending ${name}`);\n      return ret;\n    };\n  }\n}\n\nclass C {\n  @logged\n  set x(arg) {}\n}\n\nnew C().x = 1\n// starting x with arguments 1\n// ending x\n</code></pre> <p>\u5982\u679c\u53bb\u6389\u8bed\u6cd5\u7cd6\uff0c\u4f7f\u7528\u4f20\u7edf\u8bed\u6cd5\u6765\u5199\uff0c\u5c31\u662f\u6539\u6389\u4e86\u7c7b\u7684\u539f\u578b\u94fe\u3002</p> <pre><code>class C {\n  set x(arg) {}\n}\n\nlet { set } = Object.getOwnPropertyDescriptor(C.prototype, \"x\");\nset = logged(set, {\n  kind: \"setter\",\n  name: \"x\",\n  static: false,\n  private: false,\n}) ?? set;\n\nObject.defineProperty(C.prototype, \"x\", { set });\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_8","title":"\u5c5e\u6027\u88c5\u9970\u5668\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u5c5e\u6027\u88c5\u9970\u5668\u7684\u7c7b\u578b\u63cf\u8ff0\u5982\u4e0b\u3002</p> <pre><code>type ClassFieldDecorator = (value: undefined, context: {\n  kind: \"field\";\n  name: string | symbol;\n  access: { get(): unknown, set(value: unknown): void };\n  static: boolean;\n  private: boolean;\n}) =&gt; (initialValue: unknown) =&gt; unknown | void;\n</code></pre> <p>\u5c5e\u6027\u88c5\u9970\u5668\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f<code>undefined</code>\uff0c\u5373\u4e0d\u8f93\u5165\u503c\u3002\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u8ba9\u88c5\u9970\u5668\u8fd4\u56de\u4e00\u4e2a\u521d\u59cb\u5316\u51fd\u6570\uff0c\u5f53\u8be5\u5c5e\u6027\u88ab\u8d4b\u503c\u65f6\uff0c\u8fd9\u4e2a\u521d\u59cb\u5316\u51fd\u6570\u4f1a\u81ea\u52a8\u8fd0\u884c\uff0c\u5b83\u4f1a\u6536\u5230\u5c5e\u6027\u7684\u521d\u59cb\u503c\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u521d\u59cb\u503c\u3002\u5c5e\u6027\u88c5\u9970\u5668\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\u3002\u9664\u4e86\u8fd9\u4e24\u79cd\u60c5\u51b5\uff0c\u8fd4\u56de\u5176\u4ed6\u7c7b\u578b\u7684\u503c\u90fd\u4f1a\u62a5\u9519\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function logged(value, { kind, name }) {\n  if (kind === \"field\") {\n    return function (initialValue) {\n      console.log(`initializing ${name} with value ${initialValue}`);\n      return initialValue;\n    };\n  }\n\n  // ...\n}\n\nclass C {\n  @logged x = 1;\n}\n\nnew C();\n// initializing x with value 1\n</code></pre> <p>\u5982\u679c\u4e0d\u4f7f\u7528\u88c5\u9970\u5668\u8bed\u6cd5\uff0c\u5c5e\u6027\u88c5\u9970\u5668\u7684\u5b9e\u9645\u4f5c\u7528\u5982\u4e0b\u3002</p> <pre><code>let initializeX = logged(undefined, {\n  kind: \"field\",\n  name: \"x\",\n  static: false,\n  private: false,\n}) ?? (initialValue) =&gt; initialValue;\n\nclass C {\n  x = initializeX.call(this, 1);\n}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#accessor","title":"accessor \u547d\u4ee4\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u7c7b\u88c5\u9970\u5668\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u547d\u4ee4<code>accessor</code>\uff0c\u7528\u6765\u5c5e\u6027\u7684\u524d\u7f00\u3002</p> <pre><code>class C {\n  accessor x = 1;\n}\n</code></pre> <p>\u5b83\u662f\u4e00\u79cd\u7b80\u5199\u5f62\u5f0f\uff0c\u76f8\u5f53\u4e8e\u58f0\u660e\u5c5e\u6027<code>x</code>\u662f\u79c1\u6709\u5c5e\u6027<code>#x</code>\u7684\u5b58\u53d6\u63a5\u53e3\u3002\u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code>class C {\n  #x = 1;\n\n  get x() {\n    return this.#x;\n  }\n\n  set x(val) {\n    this.#x = val;\n  }\n}\n</code></pre> <p><code>accessor</code>\u547d\u4ee4\u524d\u9762\uff0c\u8fd8\u53ef\u4ee5\u52a0\u4e0a<code>static</code>\u547d\u4ee4\u548c<code>private</code>\u547d\u4ee4\u3002</p> <pre><code>class C {\n  static accessor x = 1;\n  accessor #y = 2;\n}\n</code></pre> <p><code>accessor</code>\u547d\u4ee4\u524d\u9762\u8fd8\u53ef\u4ee5\u63a5\u53d7\u5c5e\u6027\u88c5\u9970\u5668\u3002</p> <pre><code>function logged(value, { kind, name }) {\n  if (kind === \"accessor\") {\n    let { get, set } = value;\n\n    return {\n      get() {\n        console.log(`getting ${name}`);\n\n        return get.call(this);\n      },\n\n      set(val) {\n        console.log(`setting ${name} to ${val}`);\n\n        return set.call(this, val);\n      },\n\n      init(initialValue) {\n        console.log(`initializing ${name} with value ${initialValue}`);\n        return initialValue;\n      }\n    };\n  }\n\n  // ...\n}\n\nclass C {\n  @logged accessor x = 1;\n}\n\nlet c = new C();\n// initializing x with value 1\nc.x;\n// getting x\nc.x = 123;\n// setting x to 123\n</code></pre> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u7b49\u540c\u4e8e\u4f7f\u7528<code>@logged</code>\u88c5\u9970\u5668\uff0c\u6539\u5199<code>accessor</code>\u5c5e\u6027\u7684 getter \u548c setter \u65b9\u6cd5\u3002</p> <p>\u7528\u4e8e<code>accessor</code>\u7684\u5c5e\u6027\u88c5\u9970\u5668\u7684\u7c7b\u578b\u63cf\u8ff0\u5982\u4e0b\u3002</p> <pre><code>type ClassAutoAccessorDecorator = (\n  value: {\n    get: () =&gt; unknown;\n    set(value: unknown) =&gt; void;\n  },\n  context: {\n    kind: \"accessor\";\n    name: string | symbol;\n    access: { get(): unknown, set(value: unknown): void };\n    static: boolean;\n    private: boolean;\n    addInitializer(initializer: () =&gt; void): void;\n  }\n) =&gt; {\n  get?: () =&gt; unknown;\n  set?: (value: unknown) =&gt; void;\n  initialize?: (initialValue: unknown) =&gt; unknown;\n} | void;\n</code></pre> <p><code>accessor</code>\u547d\u4ee4\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u63a5\u6536\u5230\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5305\u542b\u4e86<code>accessor</code>\u547d\u4ee4\u5b9a\u4e49\u7684\u5c5e\u6027\u7684\u5b58\u53d6\u5668 get \u548c set\u3002\u5c5e\u6027\u88c5\u9970\u5668\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u65b0\u7684\u5b58\u53d6\u5668\uff0c\u7528\u6765\u53d6\u4ee3\u539f\u6765\u7684\uff0c\u5373\u76f8\u5f53\u4e8e\u62e6\u622a\u4e86\u539f\u6765\u7684\u5b58\u53d6\u5668\u3002\u6b64\u5916\uff0c\u8fd4\u56de\u7684\u5bf9\u8c61\u8fd8\u53ef\u4ee5\u5305\u62ec\u4e00\u4e2a<code>initialize</code>\u51fd\u6570\uff0c\u7528\u6765\u6539\u53d8\u79c1\u6709\u5c5e\u6027\u7684\u521d\u59cb\u503c\u3002\u88c5\u9970\u5668\u4e5f\u53ef\u4ee5\u4e0d\u8fd4\u56de\u503c\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u5176\u4ed6\u7c7b\u578b\u7684\u503c\uff0c\u6216\u8005\u5305\u542b\u5176\u4ed6\u5c5e\u6027\u7684\u5bf9\u8c61\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#addinitializer","title":"addInitializer() \u65b9\u6cd5\uff08\u65b0\u8bed\u6cd5\uff09","text":"<p>\u9664\u4e86\u5c5e\u6027\u88c5\u9970\u5668\uff0c\u5176\u4ed6\u88c5\u9970\u5668\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\u8fd8\u5305\u62ec\u4e00\u4e2a<code>addInitializer()</code>\u65b9\u6cd5\uff0c\u7528\u6765\u5b8c\u6210\u521d\u59cb\u5316\u64cd\u4f5c\u3002</p> <p>\u5b83\u7684\u8fd0\u884c\u65f6\u95f4\u5982\u4e0b\u3002</p> <ul> <li>\u7c7b\u88c5\u9970\u5668\uff1a\u5728\u7c7b\u88ab\u5b8c\u5168\u5b9a\u4e49\u4e4b\u540e\u3002</li> <li>\u65b9\u6cd5\u88c5\u9970\u5668\uff1a\u5728\u7c7b\u6784\u9020\u671f\u95f4\u8fd0\u884c\uff0c\u5728\u5c5e\u6027\u521d\u59cb\u5316\u4e4b\u524d\u3002</li> <li>\u9759\u6001\u65b9\u6cd5\u88c5\u9970\u5668\uff1a\u5728\u7c7b\u5b9a\u4e49\u671f\u95f4\u8fd0\u884c\uff0c\u65e9\u4e8e\u9759\u6001\u5c5e\u6027\u5b9a\u4e49\uff0c\u4f46\u665a\u4e8e\u7c7b\u65b9\u6cd5\u7684\u5b9a\u4e49\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>function customElement(name) {\n  return (value, { addInitializer }) =&gt; {\n    addInitializer(function() {\n      customElements.define(name, this);\n    });\n  }\n}\n\n@customElement('my-element')\nclass MyElement extends HTMLElement {\n  static get observedAttributes() {\n    return ['some', 'attrs'];\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e\u4e0b\u9762\u4e0d\u4f7f\u7528\u88c5\u9970\u5668\u7684\u4ee3\u7801\u3002</p> <pre><code>class MyElement {\n  static get observedAttributes() {\n    return ['some', 'attrs'];\n  }\n}\n\nlet initializersForMyElement = [];\n\nMyElement = customElement('my-element')(MyElement, {\n  kind: \"class\",\n  name: \"MyElement\",\n  addInitializer(fn) {\n    initializersForMyElement.push(fn);\n  },\n}) ?? MyElement;\n\nfor (let initializer of initializersForMyElement) {\n  initializer.call(MyElement);\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u65b9\u6cd5\u88c5\u9970\u5668\u7684\u4f8b\u5b50\u3002</p> <pre><code>function bound(value, { name, addInitializer }) {\n  addInitializer(function () {\n    this[name] = this[name].bind(this);\n  });\n}\n\nclass C {\n  message = \"hello!\";\n\n  @bound\n  m() {\n    console.log(this.message);\n  }\n}\n\nlet { m } = new C();\n\nm(); // hello!\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e\u4e0b\u9762\u4e0d\u4f7f\u7528\u88c5\u9970\u5668\u7684\u4ee3\u7801\u3002</p> <pre><code>class C {\n  constructor() {\n    for (let initializer of initializersForM) {\n      initializer.call(this);\n    }\n\n    this.message = \"hello!\";\n  }\n\n  m() {}\n}\n\nlet initializersForM = []\n\nC.prototype.m = bound(\n  C.prototype.m,\n  {\n    kind: \"method\",\n    name: \"m\",\n    static: false,\n    private: false,\n    addInitializer(fn) {\n      initializersForM.push(fn);\n    },\n  }\n) ?? C.prototype.m;\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#core-decoratorsjs","title":"core-decorators.js","text":"<p>core-decorators.js\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u63d0\u4f9b\u4e86\u51e0\u4e2a\u5e38\u89c1\u7684\u88c5\u9970\u5668\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u88c5\u9970\u5668\u3002</p> <p>\uff081\uff09@autobind</p> <p><code>autobind</code>\u88c5\u9970\u5668\u4f7f\u5f97\u65b9\u6cd5\u4e2d\u7684<code>this</code>\u5bf9\u8c61\uff0c\u7ed1\u5b9a\u539f\u59cb\u5bf9\u8c61\u3002</p> <pre><code>import { autobind } from 'core-decorators';\n\nclass Person {\n  @autobind\n  getPerson() {\n    return this;\n  }\n}\n\nlet person = new Person();\nlet getPerson = person.getPerson;\n\ngetPerson() === person;\n// true\n</code></pre> <p>\uff082\uff09@readonly</p> <p><code>readonly</code>\u88c5\u9970\u5668\u4f7f\u5f97\u5c5e\u6027\u6216\u65b9\u6cd5\u4e0d\u53ef\u5199\u3002</p> <pre><code>import { readonly } from 'core-decorators';\n\nclass Meal {\n  @readonly\n  entree = 'steak';\n}\n\nvar dinner = new Meal();\ndinner.entree = 'salmon';\n// Cannot assign to read only property 'entree' of [object Object]\n</code></pre> <p>\uff083\uff09@override</p> <p><code>override</code>\u88c5\u9970\u5668\u68c0\u67e5\u5b50\u7c7b\u7684\u65b9\u6cd5\uff0c\u662f\u5426\u6b63\u786e\u8986\u76d6\u4e86\u7236\u7c7b\u7684\u540c\u540d\u65b9\u6cd5\uff0c\u5982\u679c\u4e0d\u6b63\u786e\u4f1a\u62a5\u9519\u3002</p> <pre><code>import { override } from 'core-decorators';\n\nclass Parent {\n  speak(first, second) {}\n}\n\nclass Child extends Parent {\n  @override\n  speak() {}\n  // SyntaxError: Child#speak() does not properly override Parent#speak(first, second)\n}\n\n// or\n\nclass Child extends Parent {\n  @override\n  speaks() {}\n  // SyntaxError: No descriptor matching Child#speaks() was found on the prototype chain.\n  //\n  //   Did you mean \"speak\"?\n}\n</code></pre> <p>\uff084\uff09@deprecate (\u522b\u540d@deprecated)</p> <p><code>deprecate</code>\u6216<code>deprecated</code>\u88c5\u9970\u5668\u5728\u63a7\u5236\u53f0\u663e\u793a\u4e00\u6761\u8b66\u544a\uff0c\u8868\u793a\u8be5\u65b9\u6cd5\u5c06\u5e9f\u9664\u3002</p> <pre><code>import { deprecate } from 'core-decorators';\n\nclass Person {\n  @deprecate\n  facepalm() {}\n\n  @deprecate('We stopped facepalming')\n  facepalmHard() {}\n\n  @deprecate('We stopped facepalming', { url: 'http://knowyourmeme.com/memes/facepalm' })\n  facepalmHarder() {}\n}\n\nlet person = new Person();\n\nperson.facepalm();\n// DEPRECATION Person#facepalm: This function will be removed in future versions.\n\nperson.facepalmHard();\n// DEPRECATION Person#facepalmHard: We stopped facepalming\n\nperson.facepalmHarder();\n// DEPRECATION Person#facepalmHarder: We stopped facepalming\n//\n//     See http://knowyourmeme.com/memes/facepalm for more details.\n//\n</code></pre> <p>\uff085\uff09@suppressWarnings</p> <p><code>suppressWarnings</code>\u88c5\u9970\u5668\u6291\u5236<code>deprecated</code>\u88c5\u9970\u5668\u5bfc\u81f4\u7684<code>console.warn()</code>\u8c03\u7528\u3002\u4f46\u662f\uff0c\u5f02\u6b65\u4ee3\u7801\u53d1\u51fa\u7684\u8c03\u7528\u9664\u5916\u3002</p> <pre><code>import { suppressWarnings } from 'core-decorators';\n\nclass Person {\n  @deprecated\n  facepalm() {}\n\n  @suppressWarnings\n  facepalmWithoutWarning() {\n    this.facepalm();\n  }\n}\n\nlet person = new Person();\n\nperson.facepalmWithoutWarning();\n// no warning is logged\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#_9","title":"\u4f7f\u7528\u88c5\u9970\u5668\u5b9e\u73b0\u81ea\u52a8\u53d1\u5e03\u4e8b\u4ef6","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u88c5\u9970\u5668\uff0c\u4f7f\u5f97\u5bf9\u8c61\u7684\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u81ea\u52a8\u53d1\u51fa\u4e00\u4e2a\u4e8b\u4ef6\u3002</p> <pre><code>const postal = require(\"postal/lib/postal.lodash\");\n\nexport default function publish(topic, channel) {\n  const channelName = channel || '/';\n  const msgChannel = postal.channel(channelName);\n  msgChannel.subscribe(topic, v =&gt; {\n    console.log('\u9891\u9053: ', channelName);\n    console.log('\u4e8b\u4ef6: ', topic);\n    console.log('\u6570\u636e: ', v);\n  });\n\n  return function(target, name, descriptor) {\n    const fn = descriptor.value;\n\n    descriptor.value = function() {\n      let value = fn.apply(this, arguments);\n      msgChannel.publish(topic, value);\n    };\n  };\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a<code>publish</code>\u7684\u88c5\u9970\u5668\uff0c\u5b83\u901a\u8fc7\u6539\u5199<code>descriptor.value</code>\uff0c\u4f7f\u5f97\u539f\u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff0c\u4f1a\u81ea\u52a8\u53d1\u51fa\u4e00\u4e2a\u4e8b\u4ef6\u3002\u5b83\u4f7f\u7528\u7684\u4e8b\u4ef6\u201c\u53d1\u5e03/\u8ba2\u9605\u201d\u5e93\u662fPostal.js\u3002</p> <p>\u5b83\u7684\u7528\u6cd5\u5982\u4e0b\u3002</p> <pre><code>// index.js\nimport publish from './publish';\n\nclass FooComponent {\n  @publish('foo.some.message', 'component')\n  someMethod() {\n    return { my: 'data' };\n  }\n  @publish('foo.some.other')\n  anotherMethod() {\n    // ...\n  }\n}\n\nlet foo = new FooComponent();\n\nfoo.someMethod();\nfoo.anotherMethod();\n</code></pre> <p>\u4ee5\u540e\uff0c\u53ea\u8981\u8c03\u7528<code>someMethod</code>\u6216\u8005<code>anotherMethod</code>\uff0c\u5c31\u4f1a\u81ea\u52a8\u53d1\u51fa\u4e00\u4e2a\u4e8b\u4ef6\u3002</p> <pre><code>$ bash-node index.js\n\u9891\u9053:  component\n\u4e8b\u4ef6:  foo.some.message\n\u6570\u636e:  { my: 'data' }\n\n\u9891\u9053:  /\n\u4e8b\u4ef6:  foo.some.other\n\u6570\u636e:  undefined\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#mixin","title":"Mixin","text":"<p>\u5728\u88c5\u9970\u5668\u7684\u57fa\u7840\u4e0a\uff0c\u53ef\u4ee5\u5b9e\u73b0<code>Mixin</code>\u6a21\u5f0f\u3002\u6240\u8c13<code>Mixin</code>\u6a21\u5f0f\uff0c\u5c31\u662f\u5bf9\u8c61\u7ee7\u627f\u7684\u4e00\u79cd\u66ff\u4ee3\u65b9\u6848\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u6df7\u5165\u201d\uff08mix in\uff09\uff0c\u610f\u4e3a\u5728\u4e00\u4e2a\u5bf9\u8c61\u4e4b\u4e2d\u6df7\u5165\u53e6\u5916\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002</p> <p>\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>const Foo = {\n  foo() { console.log('foo') }\n};\n\nclass MyClass {}\n\nObject.assign(MyClass.prototype, Foo);\n\nlet obj = new MyClass();\nobj.foo() // 'foo'\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c\u5bf9\u8c61<code>Foo</code>\u6709\u4e00\u4e2a<code>foo</code>\u65b9\u6cd5\uff0c\u901a\u8fc7<code>Object.assign</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06<code>foo</code>\u65b9\u6cd5\u201c\u6df7\u5165\u201d<code>MyClass</code>\u7c7b\uff0c\u5bfc\u81f4<code>MyClass</code>\u7684\u5b9e\u4f8b<code>obj</code>\u5bf9\u8c61\u90fd\u5177\u6709<code>foo</code>\u65b9\u6cd5\u3002\u8fd9\u5c31\u662f\u201c\u6df7\u5165\u201d\u6a21\u5f0f\u7684\u4e00\u4e2a\u7b80\u5355\u5b9e\u73b0\u3002</p> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u90e8\u7f72\u4e00\u4e2a\u901a\u7528\u811a\u672c<code>mixins.js</code>\uff0c\u5c06 Mixin \u5199\u6210\u4e00\u4e2a\u88c5\u9970\u5668\u3002</p> <pre><code>export function mixins(...list) {\n  return function (target) {\n    Object.assign(target.prototype, ...list);\n  };\n}\n</code></pre> <p>\u7136\u540e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u4e3a\u7c7b\u201c\u6df7\u5165\u201d\u5404\u79cd\u65b9\u6cd5\u3002</p> <pre><code>import { mixins } from './mixins.js';\n\nconst Foo = {\n  foo() { console.log('foo') }\n};\n\n@mixins(Foo)\nclass MyClass {}\n\nlet obj = new MyClass();\nobj.foo() // \"foo\"\n</code></pre> <p>\u901a\u8fc7<code>mixins</code>\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u5b9e\u73b0\u4e86\u5728<code>MyClass</code>\u7c7b\u4e0a\u9762\u201c\u6df7\u5165\u201d<code>Foo</code>\u5bf9\u8c61\u7684<code>foo</code>\u65b9\u6cd5\u3002</p> <p>\u4e0d\u8fc7\uff0c\u4e0a\u9762\u7684\u65b9\u6cd5\u4f1a\u6539\u5199<code>MyClass</code>\u7c7b\u7684<code>prototype</code>\u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u559c\u6b22\u8fd9\u4e00\u70b9\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7c7b\u7684\u7ee7\u627f\u5b9e\u73b0 Mixin\u3002</p> <pre><code>class MyClass extends MyBaseClass {\n  /* ... */\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>MyClass</code>\u7ee7\u627f\u4e86<code>MyBaseClass</code>\u3002\u5982\u679c\u6211\u4eec\u60f3\u5728<code>MyClass</code>\u91cc\u9762\u201c\u6df7\u5165\u201d\u4e00\u4e2a<code>foo</code>\u65b9\u6cd5\uff0c\u4e00\u4e2a\u529e\u6cd5\u662f\u5728<code>MyClass</code>\u548c<code>MyBaseClass</code>\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a\u6df7\u5165\u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u5177\u6709<code>foo</code>\u65b9\u6cd5\uff0c\u5e76\u4e14\u7ee7\u627f\u4e86<code>MyBaseClass</code>\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u7136\u540e<code>MyClass</code>\u518d\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u3002</p> <pre><code>let MyMixin = (superclass) =&gt; class extends superclass {\n  foo() {\n    console.log('foo from MyMixin');\n  }\n};\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>MyMixin</code>\u662f\u4e00\u4e2a\u6df7\u5165\u7c7b\u751f\u6210\u5668\uff0c\u63a5\u53d7<code>superclass</code>\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u7ee7\u627f<code>superclass</code>\u7684\u5b50\u7c7b\uff0c\u8be5\u5b50\u7c7b\u5305\u542b\u4e00\u4e2a<code>foo</code>\u65b9\u6cd5\u3002</p> <p>\u63a5\u7740\uff0c\u76ee\u6807\u7c7b\u518d\u53bb\u7ee7\u627f\u8fd9\u4e2a\u6df7\u5165\u7c7b\uff0c\u5c31\u8fbe\u5230\u4e86\u201c\u6df7\u5165\u201d<code>foo</code>\u65b9\u6cd5\u7684\u76ee\u7684\u3002</p> <pre><code>class MyClass extends MyMixin(MyBaseClass) {\n  /* ... */\n}\n\nlet c = new MyClass();\nc.foo(); // \"foo from MyMixin\"\n</code></pre> <p>\u5982\u679c\u9700\u8981\u201c\u6df7\u5165\u201d\u591a\u4e2a\u65b9\u6cd5\uff0c\u5c31\u751f\u6210\u591a\u4e2a\u6df7\u5165\u7c7b\u3002</p> <pre><code>class MyClass extends Mixin1(Mixin2(MyBaseClass)) {\n  /* ... */\n}\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u7684\u4e00\u4e2a\u597d\u5904\uff0c\u662f\u53ef\u4ee5\u8c03\u7528<code>super</code>\uff0c\u56e0\u6b64\u53ef\u4ee5\u907f\u514d\u5728\u201c\u6df7\u5165\u201d\u8fc7\u7a0b\u4e2d\u8986\u76d6\u7236\u7c7b\u7684\u540c\u540d\u65b9\u6cd5\u3002</p> <pre><code>let Mixin1 = (superclass) =&gt; class extends superclass {\n  foo() {\n    console.log('foo from Mixin1');\n    if (super.foo) super.foo();\n  }\n};\n\nlet Mixin2 = (superclass) =&gt; class extends superclass {\n  foo() {\n    console.log('foo from Mixin2');\n    if (super.foo) super.foo();\n  }\n};\n\nclass S {\n  foo() {\n    console.log('foo from S');\n  }\n}\n\nclass C extends Mixin1(Mixin2(S)) {\n  foo() {\n    console.log('foo from C');\n    super.foo();\n  }\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6bcf\u4e00\u6b21<code>\u6df7\u5165</code>\u53d1\u751f\u65f6\uff0c\u90fd\u8c03\u7528\u4e86\u7236\u7c7b\u7684<code>super.foo</code>\u65b9\u6cd5\uff0c\u5bfc\u81f4\u7236\u7c7b\u7684\u540c\u540d\u65b9\u6cd5\u6ca1\u6709\u88ab\u8986\u76d6\uff0c\u884c\u4e3a\u88ab\u4fdd\u7559\u4e86\u4e0b\u6765\u3002</p> <pre><code>new C().foo()\n// foo from C\n// foo from Mixin1\n// foo from Mixin2\n// foo from S\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/31-decorator/#trait","title":"Trait","text":"<p>Trait \u4e5f\u662f\u4e00\u79cd\u88c5\u9970\u5668\uff0c\u6548\u679c\u4e0e Mixin \u7c7b\u4f3c\uff0c\u4f46\u662f\u63d0\u4f9b\u66f4\u591a\u529f\u80fd\uff0c\u6bd4\u5982\u9632\u6b62\u540c\u540d\u65b9\u6cd5\u7684\u51b2\u7a81\u3001\u6392\u9664\u6df7\u5165\u67d0\u4e9b\u65b9\u6cd5\u3001\u4e3a\u6df7\u5165\u7684\u65b9\u6cd5\u8d77\u522b\u540d\u7b49\u7b49\u3002</p> <p>\u4e0b\u9762\u91c7\u7528traits-decorator\u8fd9\u4e2a\u7b2c\u4e09\u65b9\u6a21\u5757\u4f5c\u4e3a\u4f8b\u5b50\u3002\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u7684<code>traits</code>\u88c5\u9970\u5668\uff0c\u4e0d\u4ec5\u53ef\u4ee5\u63a5\u53d7\u5bf9\u8c61\uff0c\u8fd8\u53ef\u4ee5\u63a5\u53d7 ES6 \u7c7b\u4f5c\u4e3a\u53c2\u6570\u3002</p> <pre><code>import { traits } from 'traits-decorator';\n\nclass TFoo {\n  foo() { console.log('foo') }\n}\n\nconst TBar = {\n  bar() { console.log('bar') }\n};\n\n@traits(TFoo, TBar)\nclass MyClass { }\n\nlet obj = new MyClass();\nobj.foo() // foo\nobj.bar() // bar\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u901a\u8fc7<code>traits</code>\u88c5\u9970\u5668\uff0c\u5728<code>MyClass</code>\u7c7b\u4e0a\u9762\u201c\u6df7\u5165\u201d\u4e86<code>TFoo</code>\u7c7b\u7684<code>foo</code>\u65b9\u6cd5\u548c<code>TBar</code>\u5bf9\u8c61\u7684<code>bar</code>\u65b9\u6cd5\u3002</p> <p>Trait \u4e0d\u5141\u8bb8\u201c\u6df7\u5165\u201d\u540c\u540d\u65b9\u6cd5\u3002</p> <pre><code>import { traits } from 'traits-decorator';\n\nclass TFoo {\n  foo() { console.log('foo') }\n}\n\nconst TBar = {\n  bar() { console.log('bar') },\n  foo() { console.log('foo') }\n};\n\n@traits(TFoo, TBar)\nclass MyClass { }\n// \u62a5\u9519\n// throw new Error('Method named: ' + methodName + ' is defined twice.');\n//        ^\n// Error: Method named: foo is defined twice.\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>TFoo</code>\u548c<code>TBar</code>\u90fd\u6709<code>foo</code>\u65b9\u6cd5\uff0c\u7ed3\u679c<code>traits</code>\u88c5\u9970\u5668\u62a5\u9519\u3002</p> <p>\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f\u6392\u9664<code>TBar</code>\u7684<code>foo</code>\u65b9\u6cd5\u3002</p> <pre><code>import { traits, excludes } from 'traits-decorator';\n\nclass TFoo {\n  foo() { console.log('foo') }\n}\n\nconst TBar = {\n  bar() { console.log('bar') },\n  foo() { console.log('foo') }\n};\n\n@traits(TFoo, TBar::excludes('foo'))\nclass MyClass { }\n\nlet obj = new MyClass();\nobj.foo() // foo\nobj.bar() // bar\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4f7f\u7528\u7ed1\u5b9a\u8fd0\u7b97\u7b26\uff08::\uff09\u5728<code>TBar</code>\u4e0a\u6392\u9664<code>foo</code>\u65b9\u6cd5\uff0c\u6df7\u5165\u65f6\u5c31\u4e0d\u4f1a\u62a5\u9519\u4e86\u3002</p> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4e3a<code>TBar</code>\u7684<code>foo</code>\u65b9\u6cd5\u8d77\u4e00\u4e2a\u522b\u540d\u3002</p> <pre><code>import { traits, alias } from 'traits-decorator';\n\nclass TFoo {\n  foo() { console.log('foo') }\n}\n\nconst TBar = {\n  bar() { console.log('bar') },\n  foo() { console.log('foo') }\n};\n\n@traits(TFoo, TBar::alias({foo: 'aliasFoo'}))\nclass MyClass { }\n\nlet obj = new MyClass();\nobj.foo() // foo\nobj.aliasFoo() // foo\nobj.bar() // bar\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e3a<code>TBar</code>\u7684<code>foo</code>\u65b9\u6cd5\u8d77\u4e86\u522b\u540d<code>aliasFoo</code>\uff0c\u4e8e\u662f<code>MyClass</code>\u4e5f\u53ef\u4ee5\u6df7\u5165<code>TBar</code>\u7684<code>foo</code>\u65b9\u6cd5\u4e86\u3002</p> <p><code>alias</code>\u548c<code>excludes</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u7ed3\u5408\u8d77\u6765\u4f7f\u7528\u3002</p> <pre><code>@traits(TExample::excludes('foo','bar')::alias({baz:'exampleBaz'}))\nclass MyClass {}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u6392\u9664\u4e86<code>TExample</code>\u7684<code>foo</code>\u65b9\u6cd5\u548c<code>bar</code>\u65b9\u6cd5\uff0c\u4e3a<code>baz</code>\u65b9\u6cd5\u8d77\u4e86\u522b\u540d<code>exampleBaz</code>\u3002</p> <p><code>as</code>\u65b9\u6cd5\u5219\u4e3a\u4e0a\u9762\u7684\u4ee3\u7801\u63d0\u4f9b\u4e86\u53e6\u4e00\u79cd\u5199\u6cd5\u3002</p> <pre><code>@traits(TExample::as({excludes:['foo', 'bar'], alias: {baz: 'exampleBaz'}}))\nclass MyClass {}\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/","title":"32-\u53c2\u8003\u94fe\u63a5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_1","title":"\u5b98\u65b9\u6587\u4ef6","text":"<ul> <li>ECMAScript\u00ae 2015 Language Specification: ECMAScript 2015 \u89c4\u683c</li> <li>ECMAScript\u00ae 2016 Language Specification: ECMAScript 2016 \u89c4\u683c</li> <li>ECMAScript\u00ae 2017 Language Specification\uff1aECMAScript 2017 \u89c4\u683c\uff08\u8349\u6848\uff09</li> <li>ECMAScript Current Proposals: ECMAScript \u5f53\u524d\u7684\u6240\u6709\u63d0\u6848</li> <li>ECMAScript Active Proposals: \u5df2\u7ecf\u8fdb\u5165\u6b63\u5f0f\u6d41\u7a0b\u7684\u63d0\u6848</li> <li>ECMAScript proposals\uff1a\u4ece\u9636\u6bb5 0 \u5230\u9636\u6bb5 4 \u7684\u6240\u6709\u63d0\u6848\u5217\u8868</li> <li>TC39 meeting agendas: TC39 \u59d4\u5458\u4f1a\u5386\u5e74\u7684\u4f1a\u8bae\u8bb0\u5f55</li> <li>ECMAScript Daily: TC39 \u59d4\u5458\u4f1a\u7684\u52a8\u6001</li> <li>The TC39 Process: \u63d0\u6848\u8fdb\u5165\u6b63\u5f0f\u89c4\u683c\u7684\u6d41\u7a0b</li> <li>TC39: A Process Sketch, Stages 0 and 1: Stage 0 \u548c Stage 1 \u7684\u542b\u4e49</li> <li>TC39 Process Sketch, Stage 2: Stage 2 \u7684\u542b\u4e49</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_2","title":"\u7efc\u5408\u4ecb\u7ecd","text":"<ul> <li>Axel Rauschmayer, Exploring ES6: Upgrade to the next version of JavaScript: ES6 \u7684\u4e13\u8457\uff0c\u672c\u4e66\u7684\u8bb8\u591a\u4ee3\u7801\u5b9e\u4f8b\u6765\u81ea\u8be5\u4e66</li> <li>Sayanee Basu, Use ECMAScript 6 Today</li> <li>Ariya Hidayat, Toward Modern Web Apps with ECMAScript 6</li> <li>Dale Schouten, 10 Ecmascript-6 tricks you can perform right now</li> <li>Colin Toh, Lightweight ES6 Features That Pack A Punch: ES6 \u7684\u4e00\u4e9b\u201c\u8f7b\u91cf\u7ea7\u201d\u7684\u7279\u6027\u4ecb\u7ecd</li> <li>Domenic Denicola, ES6: The Awesome Parts</li> <li>Nicholas C. Zakas, Understanding ECMAScript 6</li> <li>Justin Drake, ECMAScript 6 in Node.JS</li> <li>Ryan Dao, Summary of ECMAScript 6 major features</li> <li>Luke Hoban, ES6 features: ES6 \u65b0\u8bed\u6cd5\u70b9\u7684\u7f57\u5217</li> <li>Traceur-compiler, Language Features: Traceur \u6587\u6863\u5217\u51fa\u7684\u4e00\u4e9b ES6 \u4f8b\u5b50</li> <li>Axel Rauschmayer, ECMAScript 6: what\u2019s next for JavaScript?: \u5173\u4e8e ES6 \u65b0\u589e\u8bed\u6cd5\u7684\u7efc\u5408\u4ecb\u7ecd\uff0c\u6709\u5f88\u591a\u4f8b\u5b50</li> <li>Axel Rauschmayer, Getting started with ECMAScript 6: ES6 \u8bed\u6cd5\u70b9\u7684\u7efc\u5408\u4ecb\u7ecd</li> <li>Toby Ho, ES6 in io.js</li> <li>Guillermo Rauch, ECMAScript 6</li> <li>Benjamin De Cock, Frontend Guidelines: ES6 \u6700\u4f73\u5b9e\u8df5</li> <li>Jani Hartikainen, ES6: What are the benefits of the new features in practice?</li> <li>kangax, JavaScript quiz. ES6 edition: ES6 \u5c0f\u6d4b\u8bd5</li> <li>Jeremy Fairbank, HTML5DevConf ES7 and Beyond!: ES7 \u65b0\u589e\u8bed\u6cd5\u70b9\u4ecb\u7ecd</li> <li>Timothy Gu, How to Read the ECMAScript Specification: \u5982\u4f55\u8bfb\u61c2 ES6 \u89c4\u683c</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#let-const","title":"let \u548c const","text":"<ul> <li>Kyle Simpson, For and against let: \u8ba8\u8bba let \u547d\u4ee4\u7684\u4f5c\u7528\u57df</li> <li>kangax, Why typeof is no longer \u201csafe\u201d: \u8ba8\u8bba\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5185\uff0clet \u547d\u4ee4\u7684\u53d8\u91cf\u58f0\u660e\u548c\u8d4b\u503c\u7684\u884c\u4e3a</li> <li>Axel Rauschmayer, Variables and scoping in ECMAScript 6: \u8ba8\u8bba\u5757\u7ea7\u4f5c\u7528\u57df\u4e0e let \u548c const \u7684\u884c\u4e3a</li> <li>Nicolas Bevacqua, ES6 Let, Const and the \u201cTemporal Dead Zone\u201d (TDZ) in Depth</li> <li>acorn, Function statements in strict mode: \u5757\u7ea7\u4f5c\u7528\u57df\u5bf9\u4e25\u683c\u6a21\u5f0f\u7684\u51fd\u6570\u58f0\u660e\u7684\u5f71\u54cd</li> <li>Axel Rauschmayer, ES proposal: global: \u9876\u5c42\u5bf9\u8c61<code>global</code></li> <li>Mathias Bynens, A horrifying <code>globalThis</code> polyfill in universal JavaScript\uff1a\u5982\u4f55\u5199 globalThis \u7684\u57ab\u7247\u5e93</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_3","title":"\u89e3\u6784\u8d4b\u503c","text":"<ul> <li>Nick Fitzgerald, Destructuring Assignment in ECMAScript 6: \u8be6\u7ec6\u4ecb\u7ecd\u89e3\u6784\u8d4b\u503c\u7684\u7528\u6cd5</li> <li>Nicholas C. Zakas, ECMAScript 6 destructuring gotcha</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_4","title":"\u5b57\u7b26\u4e32","text":"<ul> <li>Nicholas C. Zakas, A critical review of ECMAScript 6 quasi-literals</li> <li>Mozilla Developer Network, Template strings</li> <li>Addy Osmani, Getting Literal With ES6 Template Strings: \u6a21\u677f\u5b57\u7b26\u4e32\u7684\u4ecb\u7ecd</li> <li>Blake Winton, ES6 Templates: \u6a21\u677f\u5b57\u7b26\u4e32\u7684\u4ecb\u7ecd</li> <li>Peter Jaszkowiak, How to write a template compiler in JavaScript: \u4f7f\u7528\u6a21\u677f\u5b57\u7b26\u4e32\uff0c\u7f16\u5199\u4e00\u4e2a\u6a21\u677f\u7f16\u8bd1\u51fd\u6570</li> <li>Axel Rauschmayer, ES.stage3: string padding</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_5","title":"\u6b63\u5219","text":"<ul> <li>Mathias Bynens, Unicode-aware regular expressions in ES6: \u8be6\u7ec6\u4ecb\u7ecd\u6b63\u5219\u8868\u8fbe\u5f0f\u7684 u \u4fee\u9970\u7b26</li> <li>Axel Rauschmayer, New regular expression features in ECMAScript 6\uff1aES6 \u6b63\u5219\u7279\u6027\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Yang Guo, RegExp lookbehind assertions\uff1a\u4ecb\u7ecd\u540e\u884c\u65ad\u8a00</li> <li>Axel Rauschmayer, ES proposal: RegExp named capture groups: \u5177\u540d\u7ec4\u5339\u914d\u7684\u4ecb\u7ecd</li> <li>Mathias Bynens, ECMAScript regular expressions are getting better!: \u4ecb\u7ecd ES2018 \u6dfb\u52a0\u7684\u591a\u9879\u6b63\u5219\u8bed\u6cd5</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_6","title":"\u6570\u503c","text":"<ul> <li>Nicolas Bevacqua, ES6 Number Improvements in Depth</li> <li>Axel Rauschmayer, ES proposal: arbitrary precision integers</li> <li>Mathias Bynens, BigInt: arbitrary-precision integers in JavaScript</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_7","title":"\u6570\u7ec4","text":"<ul> <li>Axel Rauschmayer, ECMAScript 6\u2019s new array methods: \u5bf9 ES6 \u65b0\u589e\u7684\u6570\u7ec4\u65b9\u6cd5\u7684\u5168\u9762\u4ecb\u7ecd</li> <li>TC39, Array.prototype.includes: \u6570\u7ec4\u7684 includes \u65b9\u6cd5\u7684\u89c4\u683c</li> <li>Axel Rauschmayer, ECMAScript 6: holes in Arrays: \u6570\u7ec4\u7684\u7a7a\u4f4d\u95ee\u9898</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_8","title":"\u51fd\u6570","text":"<ul> <li>Nicholas C. Zakas, Understanding ECMAScript 6 arrow functions</li> <li>Jack Franklin, Real Life ES6 - Arrow Functions</li> <li>Axel Rauschmayer, Handling required parameters in ECMAScript 6</li> <li>Dmitry Soshnikov, ES6 Notes: Default values of parameters: \u4ecb\u7ecd\u53c2\u6570\u7684\u9ed8\u8ba4\u503c</li> <li>Ragan Wald, Destructuring and Recursion in ES6: rest \u53c2\u6570\u548c\u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Axel Rauschmayer, The names of functions in ES6: \u51fd\u6570\u7684 name \u5c5e\u6027\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Kyle Simpson, Arrow This: \u7bad\u5934\u51fd\u6570\u5e76\u6ca1\u6709\u81ea\u5df1\u7684 this</li> <li>Derick Bailey, Do ES6 Arrow Functions Really Solve \u201cthis\u201d In JavaScript?\uff1a\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5904\u7406 this \u6307\u5411\uff0c\u5fc5\u987b\u975e\u5e38\u5c0f\u5fc3</li> <li>Mark McDonnell, Understanding recursion in functional JavaScript programming: \u5982\u4f55\u81ea\u5df1\u5b9e\u73b0\u5c3e\u9012\u5f52\u4f18\u5316</li> <li>Nicholas C. Zakas, The ECMAScript 2016 change you probably don't know: \u4f7f\u7528\u53c2\u6570\u9ed8\u8ba4\u503c\u65f6\uff0c\u4e0d\u80fd\u5728\u51fd\u6570\u5185\u90e8\u663e\u5f0f\u5f00\u542f\u4e25\u683c\u6a21\u5f0f</li> <li>Axel Rauschmayer, ES proposal: optional catch binding</li> <li>Cynthia Lee, When you should use ES6 arrow functions\u200a\u2014\u200aand when you shouldn\u2019t: \u8ba8\u8bba\u7bad\u5934\u51fd\u6570\u7684\u9002\u7528\u573a\u5408</li> <li>Eric Elliott, What is this?: \u7bad\u5934\u51fd\u6570\u5185\u90e8\u7684 this \u7684\u89e3\u91ca\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_9","title":"\u5bf9\u8c61","text":"<ul> <li>Addy Osmani, Data-binding Revolutions with Object.observe(): \u4ecb\u7ecd Object.observe()\u7684\u6982\u5ff5</li> <li>Sella Rafaeli, Native JavaScript Data-Binding: \u5982\u4f55\u4f7f\u7528 Object.observe \u65b9\u6cd5\uff0c\u5b9e\u73b0\u6570\u636e\u5bf9\u8c61\u4e0e DOM \u5bf9\u8c61\u7684\u53cc\u5411\u7ed1\u5b9a</li> <li>Axel Rauschmayer, <code>__proto__</code> in ECMAScript 6</li> <li>Axel Rauschmayer, Enumerability in ECMAScript 6</li> <li>Axel Rauschmayer, ES proposal: Object.getOwnPropertyDescriptors()</li> <li>TC39, Object.getOwnPropertyDescriptors Proposal</li> <li>David Titarenco, How Spread Syntax Breaks JavaScript: \u6269\u5c55\u8fd0\u7b97\u7b26\u7684\u4e00\u4e9b\u4e0d\u5408\u7406\u7684\u5730\u65b9</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#symbol","title":"Symbol","text":"<ul> <li>Axel Rauschmayer, Symbols in ECMAScript 6: Symbol \u7b80\u4ecb</li> <li>MDN, Symbol: Symbol \u7c7b\u578b\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Jason Orendorff, ES6 In Depth: Symbols</li> <li>Keith Cirkel, Metaprogramming in ES6: Symbols and why they're awesome: Symbol \u7684\u6df1\u5165\u4ecb\u7ecd</li> <li>Axel Rauschmayer, Customizing ES6 via well-known symbols</li> <li>Derick Bailey, Creating A True Singleton In Node.js, With ES6 Symbols</li> <li>Das Surma, How to read web specs Part IIa \u2013 Or: ECMAScript Symbols: \u4ecb\u7ecd Symbol \u7684\u89c4\u683c</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#set-map","title":"Set \u548c Map","text":"<ul> <li>Mozilla Developer Network, WeakSet\uff1a\u4ecb\u7ecd WeakSet \u6570\u636e\u7ed3\u6784</li> <li>Dwayne Charrington, What Are Weakmaps In ES6?: WeakMap \u6570\u636e\u7ed3\u6784\u4ecb\u7ecd</li> <li>Axel Rauschmayer, ECMAScript 6: maps and sets: Set \u548c Map \u7ed3\u6784\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Jason Orendorff, ES6 In Depth: Collections\uff1aSet \u548c Map \u7ed3\u6784\u7684\u8bbe\u8ba1\u601d\u60f3</li> <li>Axel Rauschmayer, Converting ES6 Maps to and from JSON: \u5982\u4f55\u5c06 Map \u4e0e\u5176\u4ed6\u6570\u636e\u7ed3\u6784\u4e92\u76f8\u8f6c\u6362</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#proxy-reflect","title":"Proxy \u548c Reflect","text":"<ul> <li>Nicholas C. Zakas, Creating defensive objects with ES6 proxies</li> <li>Axel Rauschmayer, Meta programming with ECMAScript 6 proxies: Proxy \u8be6\u89e3</li> <li>Daniel Zautner, Meta-programming JavaScript Using Proxies: \u4f7f\u7528 Proxy \u5b9e\u73b0\u5143\u7f16\u7a0b</li> <li>Tom Van Cutsem, Harmony-reflect: Reflect \u5bf9\u8c61\u7684\u8bbe\u8ba1\u76ee\u7684</li> <li>Tom Van Cutsem, Proxy Traps: Proxy \u62e6\u622a\u64cd\u4f5c\u4e00\u89c8</li> <li>Tom Van Cutsem, Reflect API</li> <li>Tom Van Cutsem, Proxy Handler API</li> <li>Nicolas Bevacqua, ES6 Proxies in Depth</li> <li>Nicolas Bevacqua, ES6 Proxy Traps in Depth</li> <li>Nicolas Bevacqua, More ES6 Proxy Traps in Depth</li> <li>Axel Rauschmayer, Pitfall: not all objects can be wrapped transparently by proxies</li> <li>Bertalan Miklos, Writing a JavaScript Framework - Data Binding with ES6 Proxies: \u4f7f\u7528 Proxy \u5b9e\u73b0\u89c2\u5bdf\u8005\u6a21\u5f0f</li> <li>Keith Cirkel, Metaprogramming in ES6: Part 2 - Reflect: Reflect API \u7684\u8be6\u7ec6\u4ecb\u7ecd</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#promise","title":"Promise \u5bf9\u8c61","text":"<ul> <li>Jake Archibald, JavaScript Promises: There and back again</li> <li>Jake Archibald, Tasks, microtasks, queues and schedules</li> <li>Tilde, rsvp.js</li> <li>Sandeep Panda, An Overview of JavaScript Promises: ES6 Promise \u5165\u95e8\u4ecb\u7ecd</li> <li>Dave Atchley, ES6 Promises: Promise \u7684\u8bed\u6cd5\u4ecb\u7ecd</li> <li>Axel Rauschmayer, ECMAScript 6 promises (2/2): the API: \u5bf9 ES6 Promise \u89c4\u683c\u548c\u7528\u6cd5\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Jack Franklin, Embracing Promises in JavaScript: catch \u65b9\u6cd5\u7684\u4f8b\u5b50</li> <li>Ronald Chen, How to escape Promise Hell: \u5982\u4f55\u4f7f\u7528<code>Promise.all</code>\u65b9\u6cd5\u7684\u4e00\u4e9b\u5f88\u597d\u7684\u4f8b\u5b50</li> <li>Jordan Harband, proposal-promise-try: Promise.try() \u65b9\u6cd5\u7684\u63d0\u6848</li> <li>Sven Slootweg, What is Promise.try, and why does it matter?: Promise.try() \u65b9\u6cd5\u7684\u4f18\u70b9</li> <li>Yehuda Katz, TC39: Promises, Promises: Promise.try() \u7684\u7528\u5904</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#iterator","title":"Iterator","text":"<ul> <li>Mozilla Developer Network, Iterators and generators</li> <li>Mozilla Developer Network, The Iterator protocol</li> <li>Jason Orendorff, ES6 In Depth: Iterators and the for-of loop: \u904d\u5386\u5668\u4e0e for...of \u5faa\u73af\u7684\u4ecb\u7ecd</li> <li>Axel Rauschmayer, Iterators and generators in ECMAScript 6: \u63a2\u8ba8 Iterator \u548c Generator \u7684\u8bbe\u8ba1\u76ee\u7684</li> <li>Axel Rauschmayer, Iterables and iterators in ECMAScript 6: Iterator \u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Kyle Simpson, Iterating ES6 Numbers: \u5728\u6570\u503c\u5bf9\u8c61\u4e0a\u90e8\u7f72\u904d\u5386\u5668</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#generator","title":"Generator","text":"<ul> <li>Matt Baker, Replacing callbacks with ES6 Generators</li> <li>Steven Sanderson, Experiments with Koa and JavaScript Generators</li> <li>jmar777, What's the Big Deal with Generators?</li> <li>Marc Harter, Generators in Node.js: Common Misconceptions and Three Good Use Cases: \u8ba8\u8bba Generator \u51fd\u6570\u7684\u4f5c\u7528</li> <li>StackOverflow, ES6 yield : what happens to the arguments of the first call next()?: \u7b2c\u4e00\u6b21\u4f7f\u7528 next \u65b9\u6cd5\u65f6\u4e0d\u80fd\u5e26\u6709\u53c2\u6570</li> <li>Kyle Simpson, ES6 Generators: Complete Series: \u7531\u6d45\u5165\u6df1\u63a2\u8ba8 Generator \u7684\u7cfb\u5217\u6587\u7ae0\uff0c\u5171\u56db\u7bc7</li> <li>Gajus Kuizinas, The Definitive Guide to the JavaScript Generators: \u5bf9 Generator \u7684\u7efc\u5408\u4ecb\u7ecd</li> <li>Jan Krems, Generators Are Like Arrays: \u8ba8\u8bba Generator \u53ef\u4ee5\u88ab\u5f53\u4f5c\u6570\u636e\u7ed3\u6784\u770b\u5f85</li> <li>Harold Cooper, Coroutine Event Loops in JavaScript: Generator \u7528\u4e8e\u5b9e\u73b0\u72b6\u6001\u673a</li> <li>Ruslan Ismagilov, learn-generators: \u7f16\u7a0b\u7ec3\u4e60\uff0c\u5171 6 \u9053\u9898</li> <li>Steven Sanderson, Experiments with Koa and JavaScript Generators: Generator \u5165\u95e8\u4ecb\u7ecd\uff0c\u4ee5 Koa \u6846\u67b6\u4e3a\u4f8b</li> <li>Mahdi Dibaiee, ES7 Array and Generator comprehensions\uff1aES7 \u7684 Generator \u63a8\u5bfc</li> <li>Nicolas Bevacqua, ES6 Generators in Depth</li> <li>Axel Rauschmayer, ES6 generators in depth: Generator \u89c4\u683c\u7684\u8be6\u5c3d\u8bb2\u89e3</li> <li>Derick Bailey, Using ES6 Generators To Short-Circuit Hierarchical Data Iteration\uff1a\u4f7f\u7528 for...of \u5faa\u73af\u5b8c\u6210\u9884\u5b9a\u7684\u64cd\u4f5c\u6b65\u9aa4</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#async","title":"\u5f02\u6b65\u64cd\u4f5c\u548c Async \u51fd\u6570","text":"<ul> <li>Luke Hoban, Async Functions for ECMAScript: Async \u51fd\u6570\u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u4e0e Promise\u3001Gernerator \u51fd\u6570\u7684\u5173\u7cfb</li> <li>Jafar Husain, Asynchronous Generators for ES7: Async \u51fd\u6570\u7684\u6df1\u5165\u8ba8\u8bba</li> <li>Nolan Lawson, Taming the asynchronous beast with ES7: async \u51fd\u6570\u901a\u4fd7\u7684\u5b9e\u4f8b\u8bb2\u89e3</li> <li>Jafar Husain, Async Generators: \u5bf9 async \u4e0e Generator \u6df7\u5408\u4f7f\u7528\u7684\u4e00\u4e9b\u8ba8\u8bba</li> <li>Daniel Brain, Understand promises before you start using async/await: \u8ba8\u8bba async/await \u4e0e Promise \u7684\u5173\u7cfb</li> <li>Jake Archibald, Async functions - making promises friendly</li> <li>Axel Rauschmayer, ES proposal: asynchronous iteration: \u5f02\u6b65\u904d\u5386\u5668\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Dima Grossman, How to write async await without try-catch blocks in JavaScript: \u9664\u4e86 try/catch \u4ee5\u5916\u7684 async \u51fd\u6570\u5185\u90e8\u6355\u6349\u9519\u8bef\u7684\u65b9\u6cd5</li> <li>Mostafa Gaafa, 6 Reasons Why JavaScript\u2019s Async/Await Blows Promises Away: Async \u51fd\u6570\u76846\u4e2a\u597d\u5904</li> <li>Mathias Bynens, Asynchronous stack traces: why await beats Promise#then(): async \u51fd\u6570\u53ef\u4ee5\u4fdd\u7559\u9519\u8bef\u5806\u6808</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#class","title":"Class","text":"<ul> <li>Sebastian Porto, ES6 classes and JavaScript prototypes: ES6 Class \u7684\u5199\u6cd5\u4e0e ES5 Prototype \u7684\u5199\u6cd5\u5bf9\u6bd4</li> <li>Jack Franklin, An introduction to ES6 classes: ES6 class \u7684\u5165\u95e8\u4ecb\u7ecd</li> <li>Axel Rauschmayer, ECMAScript 6: new OOP features besides classes</li> <li>Axel Rauschmayer, Classes in ECMAScript 6 (final semantics): Class \u8bed\u6cd5\u7684\u8be6\u7ec6\u4ecb\u7ecd\u548c\u8bbe\u8ba1\u601d\u60f3\u5206\u6790</li> <li>Eric Faust, ES6 In Depth: Subclassing: Class \u8bed\u6cd5\u7684\u6df1\u5165\u4ecb\u7ecd</li> <li>Nicol\u00e1s Bevacqua, Binding Methods to Class Instance Objects: \u5982\u4f55\u7ed1\u5b9a\u7c7b\u7684\u5b9e\u4f8b\u4e2d\u7684 this</li> <li>Jamie Kyle, JavaScript's new #private class fields\uff1a\u79c1\u6709\u5c5e\u6027\u7684\u4ecb\u7ecd\u3002</li> <li>Mathias Bynens, Public and private class fields\uff1a\u5b9e\u4f8b\u5c5e\u6027\u7684\u65b0\u5199\u6cd5\u7684\u4ecb\u7ecd\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#decorator","title":"Decorator","text":"<ul> <li>Maximiliano Fierro, Declarative vs Imperative: Decorators \u548c Mixin \u4ecb\u7ecd</li> <li>Justin Fagnani, \"Real\" Mixins with JavaScript Classes: \u4f7f\u7528\u7c7b\u7684\u7ee7\u627f\u5b9e\u73b0 Mixin</li> <li>Addy Osmani, Exploring ES2016 Decorators: Decorator \u7684\u6df1\u5165\u4ecb\u7ecd</li> <li>Sebastian McKenzie, Allow decorators for functions as well: \u4e3a\u4ec0\u4e48\u4fee\u9970\u5668\u4e0d\u80fd\u7528\u4e8e\u51fd\u6570</li> <li>Maximiliano Fierro, Traits with ES7 Decorators: Trait \u7684\u7528\u6cd5\u4ecb\u7ecd</li> <li>Jonathan Creamer: Using ES2016 Decorators to Publish on an Event Bus: \u4f7f\u7528\u4fee\u9970\u5668\u5b9e\u73b0\u81ea\u52a8\u53d1\u5e03\u4e8b\u4ef6</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#module","title":"Module","text":"<ul> <li>Jack Franklin, JavaScript Modules the ES6 Way: ES6 \u6a21\u5757\u5165\u95e8</li> <li>Axel Rauschmayer, ECMAScript 6 modules: the final syntax: ES6 \u6a21\u5757\u7684\u4ecb\u7ecd\uff0c\u4ee5\u53ca\u4e0e CommonJS \u89c4\u683c\u7684\u8be6\u7ec6\u6bd4\u8f83</li> <li>Dave Herman, Static module resolution: ES6 \u6a21\u5757\u7684\u9759\u6001\u5316\u8bbe\u8ba1\u601d\u60f3</li> <li>Jason Orendorff, ES6 In Depth: Modules: ES6 \u6a21\u5757\u8bbe\u8ba1\u601d\u60f3\u7684\u4ecb\u7ecd</li> <li>Ben Newman, The Importance of import and export: ES6 \u6a21\u5757\u7684\u8bbe\u8ba1\u601d\u60f3</li> <li>ESDiscuss, Why is \"export default var a = 1;\" invalid syntax?</li> <li>Bradley Meck, ES6 Module Interoperability: \u4ecb\u7ecd Node \u5982\u4f55\u5904\u7406 ES6 \u8bed\u6cd5\u52a0\u8f7d CommonJS \u6a21\u5757</li> <li>Axel Rauschmayer, Making transpiled ES modules more spec-compliant: ES6 \u6a21\u5757\u7f16\u8bd1\u6210 CommonJS \u6a21\u5757\u7684\u8be6\u7ec6\u4ecb\u7ecd</li> <li>Axel Rauschmayer, ES proposal: import() \u2013 dynamically importing ES modules: import() \u7684\u7528\u6cd5</li> <li>Node EPS, ES Module Interoperability: Node \u5bf9 ES6 \u6a21\u5757\u7684\u5904\u7406\u89c4\u683c</li> <li>Dan Fabulich, Why CommonJS and ES Modules Can\u2019t Get Along: Node.js \u5bf9 ES6 \u6a21\u5757\u7684\u5904\u7406</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_10","title":"\u4e8c\u8fdb\u5236\u6570\u7ec4","text":"<ul> <li>Ilmari Heikkinen, Typed Arrays: Binary Data in the Browser</li> <li>Khronos, Typed Array Specification</li> <li>Ian Elliot, Reading A BMP File In JavaScript</li> <li>Renato Mangini, How to convert ArrayBuffer to and from String</li> <li>Axel Rauschmayer, Typed Arrays in ECMAScript 6</li> <li>Axel Rauschmayer, ES proposal: Shared memory and atomics</li> <li>Lin Clark, Avoiding race conditions in SharedArrayBuffers with Atomics: Atomics \u5bf9\u8c61\u4f7f\u7528\u573a\u666f\u7684\u89e3\u91ca</li> <li>Lars T Hansen, Shared memory - a brief tutorial</li> <li>James Milner, The Return of SharedArrayBuffers and Atomics</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#simd","title":"SIMD","text":"<ul> <li>TC39, SIMD.js Stage 2</li> <li>MDN, SIMD</li> <li>TC39, ECMAScript SIMD</li> <li>Axel Rauschmayer, JavaScript gains support for SIMD</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/32-reference/#_11","title":"\u5de5\u5177","text":"<ul> <li>Babel, Babel Handbook: Babel \u7684\u7528\u6cd5\u4ecb\u7ecd</li> <li>Google, traceur-compiler: Traceur \u7f16\u8bd1\u5668</li> <li>Casper Beyer, ECMAScript 6 Features and Tools</li> <li>Stoyan Stefanov, Writing ES6 today with jstransform</li> <li>ES6 Module Loader, ES6 Module Loader Polyfill: \u5728\u6d4f\u89c8\u5668\u548c node.js \u52a0\u8f7d ES6 \u6a21\u5757\u7684\u4e00\u4e2a\u5e93\uff0c\u6587\u6863\u91cc\u5bf9 ES6 \u6a21\u5757\u6709\u8be6\u7ec6\u89e3\u91ca</li> <li>Paul Miller, es6-shim: \u4e00\u4e2a\u9488\u5bf9\u8001\u5f0f\u6d4f\u89c8\u5668\uff0c\u6a21\u62df ES6 \u90e8\u5206\u529f\u80fd\u7684\u57ab\u7247\u5e93\uff08shim\uff09</li> <li>army8735, JavaScript Downcast: \u56fd\u4ea7\u7684 ES6 \u5230 ES5 \u7684\u8f6c\u7801\u5668</li> <li>esnext, ES6 Module Transpiler\uff1a\u57fa\u4e8e node.js \u7684\u5c06 ES6 \u6a21\u5757\u8f6c\u4e3a ES5 \u4ee3\u7801\u7684\u547d\u4ee4\u884c\u5de5\u5177</li> <li>Sebastian McKenzie, BabelJS: ES6 \u8f6c\u8bd1\u5668</li> <li>SystemJS, SystemJS: \u5728\u6d4f\u89c8\u5668\u4e2d\u52a0\u8f7d AMD\u3001CJS\u3001ES6 \u6a21\u5757\u7684\u4e00\u4e2a\u57ab\u7247\u5e93</li> <li>Modernizr, HTML5 Cross Browser Polyfills: ES6 \u57ab\u7247\u5e93\u6e05\u5355</li> <li>Facebook, regenerator: \u5c06 Generator \u51fd\u6570\u8f6c\u4e3a ES5 \u7684\u8f6c\u7801\u5668</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/acknowledgment/","title":"\u9e23\u8c22","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/acknowledgment/#generator","title":"Generator","text":"<p>\u7f51\u53cb vision57 \u63d0\u51fa\uff0c<code>next()</code>\u3001<code>throw()</code>\u3001<code>return()</code>\u8fd9\u4e09\u4e2a\u65b9\u6cd5\u672c\u8d28\u4e0a\u662f\u540c\u4e00\u4ef6\u4e8b\uff0c\u53ef\u4ee5\u653e\u5728\u4e00\u8d77\u7406\u89e3\u3002\u5b83\u4eec\u7684\u4f5c\u7528\u90fd\u662f\u8ba9 Generator \u51fd\u6570\u6062\u590d\u6267\u884c\uff0c\u5e76\u4e14\u4f7f\u7528\u4e0d\u540c\u7684\u8bed\u53e5\u66ff\u6362<code>yield</code>\u8868\u8fbe\u5f0f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/","title":"\u51fd\u6570\u5f0f\u7f16\u7a0b","text":"<p>JavaScript \u8bed\u8a00\u4ece\u4e00\u8bde\u751f\uff0c\u5c31\u5177\u6709\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u70d9\u5370\u3002\u5b83\u5c06\u51fd\u6570\u4f5c\u4e3a\u4e00\u79cd\u72ec\u7acb\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e0e\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u5904\u4e8e\u5b8c\u5168\u5e73\u7b49\u7684\u5730\u4f4d\u3002\u5728 JavaScript \u8bed\u8a00\u4e2d\uff0c\u4f60\u53ef\u4ee5\u91c7\u7528\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u51fd\u6570\u5f0f\u7f16\u7a0b\u3002\u6709\u4eba\u751a\u81f3\u8bf4\uff0cJavaScript \u662f\u6709\u53f2\u4ee5\u6765\u7b2c\u4e00\u79cd\u88ab\u5927\u89c4\u6a21\u91c7\u7528\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u3002</p> <p>ES6 \u7684\u79cd\u79cd\u65b0\u589e\u529f\u80fd\uff0c\u4f7f\u5f97\u51fd\u6570\u5f0f\u7f16\u7a0b\u53d8\u5f97\u66f4\u65b9\u4fbf\u3001\u66f4\u5f3a\u5927\u3002\u672c\u7ae0\u4ecb\u7ecd ES6 \u5982\u4f55\u8fdb\u884c\u51fd\u6570\u5f0f\u7f16\u7a0b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_2","title":"\u67ef\u91cc\u5316","text":"<p>\u67ef\u91cc\u5316\uff08currying\uff09\u6307\u7684\u662f\u5c06\u4e00\u4e2a\u591a\u53c2\u6570\u7684\u51fd\u6570\u62c6\u5206\u6210\u4e00\u7cfb\u5217\u51fd\u6570\uff0c\u6bcf\u4e2a\u62c6\u5206\u540e\u7684\u51fd\u6570\u90fd\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff08unary\uff09\u3002</p> <pre><code>function add (a, b) {\n  return a + b;\n}\n\nadd(1, 1) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>add</code>\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570<code>a</code>\u548c<code>b</code>\u3002</p> <p>\u67ef\u91cc\u5316\u5c31\u662f\u5c06\u4e0a\u9762\u7684\u51fd\u6570\u62c6\u5206\u6210\u4e24\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u3002</p> <pre><code>function add (a) {\n  return function (b) {\n    return a + b;\n  }\n}\n// \u6216\u8005\u91c7\u7528\u7bad\u5934\u51fd\u6570\u5199\u6cd5\nconst add = x =&gt; y =&gt; x + y;\n\nconst f = add(1);\nf(1) // 2\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570<code>add</code>\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570<code>a</code>\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570<code>f</code>\u3002\u51fd\u6570<code>f</code>\u4e5f\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570<code>b</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_3","title":"\u51fd\u6570\u5408\u6210","text":"<p>\u51fd\u6570\u5408\u6210\uff08function composition\uff09\u6307\u7684\u662f\uff0c\u5c06\u591a\u4e2a\u51fd\u6570\u5408\u6210\u4e00\u4e2a\u51fd\u6570\u3002</p> <pre><code>const compose = f =&gt; g =&gt; x =&gt; f(g(x));\n\nconst f = compose (x =&gt; x * 4) (x =&gt; x + 3);\nf(2) // 20\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>compose</code>\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u5408\u6210\u5668\uff0c\u7528\u4e8e\u5c06\u4e24\u4e2a\u51fd\u6570\u5408\u6210\u4e00\u4e2a\u51fd\u6570\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u67ef\u91cc\u5316\u4e0e\u51fd\u6570\u5408\u6210\u6709\u7740\u5bc6\u5207\u7684\u8054\u7cfb\u3002\u524d\u8005\u7528\u4e8e\u5c06\u4e00\u4e2a\u51fd\u6570\u62c6\u6210\u591a\u4e2a\u51fd\u6570\uff0c\u540e\u8005\u7528\u4e8e\u5c06\u591a\u4e2a\u51fd\u6570\u5408\u5e76\u6210\u4e00\u4e2a\u51fd\u6570\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_4","title":"\u53c2\u6570\u5012\u7f6e","text":"<p>\u53c2\u6570\u5012\u7f6e\uff08flip\uff09\u6307\u7684\u662f\u6539\u53d8\u51fd\u6570\u524d\u4e24\u4e2a\u53c2\u6570\u7684\u987a\u5e8f\u3002</p> <pre><code>var divide = (a, b) =&gt; a / b;\nvar flip = f.flip(divide);\n\nflip(10, 5) // 0.5\nflip(1, 10) // 10\n\nvar three = (a, b, c) =&gt; [a, b, c];\nvar flip = f.flip(three);\nflip(1, 2, 3); // =&gt; [2, 1, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u6309\u7167\u6b63\u5e38\u7684\u53c2\u6570\u987a\u5e8f\uff0c10 \u9664\u4ee5 5 \u7b49\u4e8e 2\u3002\u4f46\u662f\uff0c\u53c2\u6570\u5012\u7f6e\u4ee5\u540e\u5f97\u5230\u7684\u65b0\u51fd\u6570\uff0c\u7ed3\u679c\u5c31\u662f 5 \u9664\u4ee5 10\uff0c\u7ed3\u679c\u5f97\u5230 0.5\u3002\u5982\u679c\u539f\u51fd\u6570\u6709 3 \u4e2a\u53c2\u6570\uff0c\u5219\u53ea\u98a0\u5012\u524d\u4e24\u4e2a\u53c2\u6570\u7684\u4f4d\u7f6e\u3002</p> <p>\u53c2\u6570\u5012\u7f6e\u7684\u4ee3\u7801\u975e\u5e38\u7b80\u5355\u3002</p> <pre><code>let f = {};\nf.flip =\n  fn =&gt;\n    (a, b, ...args) =&gt; fn(b, a, ...args.reverse());\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_5","title":"\u6267\u884c\u8fb9\u754c","text":"<p>\u6267\u884c\u8fb9\u754c\uff08until\uff09\u6307\u7684\u662f\u51fd\u6570\u6267\u884c\u5230\u6ee1\u8db3\u6761\u4ef6\u4e3a\u6b62\u3002</p> <pre><code>let condition = x =&gt; x &gt; 100;\nlet inc = x =&gt; x + 1;\nlet until = f.until(condition, inc);\n\nuntil(0) // 101\n\ncondition = x =&gt; x === 5;\nuntil = f.until(condition, inc);\n\nuntil(3) // 5\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7b2c\u4e00\u6bb5\u7684\u6761\u4ef6\u662f\u6267\u884c\u5230<code>x</code>\u5927\u4e8e 100 \u4e3a\u6b62\uff0c\u6240\u4ee5<code>x</code>\u521d\u503c\u4e3a 0 \u65f6\uff0c\u4f1a\u4e00\u76f4\u6267\u884c\u5230 101\u3002\u7b2c\u4e8c\u6bb5\u7684\u6761\u4ef6\u662f\u6267\u884c\u5230\u7b49\u4e8e 5 \u4e3a\u6b62\uff0c\u6240\u4ee5<code>x</code>\u6700\u540e\u7684\u503c\u662f 5\u3002</p> <p>\u6267\u884c\u8fb9\u754c\u7684\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>let f = {};\nf.until = (condition, f) =&gt;\n  (...args) =&gt; {\n    var r = f.apply(null, args);\n    return condition(r) ? r : f.until(condition, f)(r);\n  };\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u7684\u5173\u952e\u5c31\u662f\uff0c\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\u5c31\u8fd4\u56de\u7ed3\u679c\uff0c\u5426\u5219\u4e0d\u65ad\u9012\u5f52\u6267\u884c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_6","title":"\u961f\u5217\u64cd\u4f5c","text":"<p>\u961f\u5217\uff08list\uff09\u64cd\u4f5c\u5305\u62ec\u4ee5\u4e0b\u51e0\u79cd\u3002</p> <ul> <li><code>head</code>\uff1a \u53d6\u51fa\u961f\u5217\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u6210\u5458\u3002</li> <li><code>last</code>\uff1a \u53d6\u51fa\u6709\u9650\u961f\u5217\u7684\u6700\u540e\u4e00\u4e2a\u975e\u7a7a\u6210\u5458\u3002</li> <li><code>tail</code>\uff1a \u53d6\u51fa\u9664\u4e86\u201c\u961f\u5217\u5934\u201d\u4ee5\u5916\u7684\u5176\u4ed6\u975e\u7a7a\u6210\u5458\u3002</li> <li><code>init</code>\uff1a \u53d6\u51fa\u9664\u4e86\u201c\u961f\u5217\u5c3e\u201d\u4ee5\u5916\u7684\u5176\u4ed6\u975e\u7a7a\u6210\u5458\u3002</li> </ul> <p>\u4e0b\u9762\u662f\u4f8b\u5b50\u3002</p> <pre><code>f.head(5, 27, 3, 1) // 5\nf.last(5, 27, 3, 1) // 1\nf.tail(5, 27, 3, 1) // [27, 3, 1]\nf.init(5, 27, 3, 1) // [5, 27, 3]\n</code></pre> <p>\u8fd9\u4e9b\u65b9\u6cd5\u7684\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>let f = {};\nf.head = (...xs) =&gt; xs[0];\nf.last = (...xs) =&gt; xs.slice(-1);\nf.tail = (...xs) =&gt; Array.prototype.slice.call(xs, 1);\nf.init = (...xs) =&gt; xs.slice(0, -1);\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_7","title":"\u5408\u5e76\u64cd\u4f5c","text":"<p>\u5408\u5e76\u64cd\u4f5c\u5206\u4e3a<code>concat</code>\u548c<code>concatMap</code>\u4e24\u79cd\u3002\u524d\u8005\u5c31\u662f\u5c06\u591a\u4e2a\u6570\u7ec4\u5408\u6210\u4e00\u4e2a\uff0c\u540e\u8005\u5219\u662f\u5148\u5904\u7406\u4e00\u4e0b\u53c2\u6570\uff0c\u7136\u540e\u518d\u5c06\u5904\u7406\u7ed3\u679c\u5408\u6210\u4e00\u4e2a\u6570\u7ec4\u3002</p> <pre><code>f.concat([5], [27], [3]) // [5, 27, 3]\nf.concatMap(x =&gt; 'hi ' + x, 1, [[2]], 3) // ['hi 1', 'hi 2', 'hi 3']\n</code></pre> <p>\u8fd9\u4e24\u79cd\u65b9\u6cd5\u7684\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\u3002</p> <pre><code>let f = {};\nf.concat =\n  (...xs) =&gt; xs.reduce((a, b) =&gt; a.concat(b));\nf.concatMap =\n  (f, ...xs) =&gt; f.concat(xs.map(f));\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_8","title":"\u914d\u5bf9\u64cd\u4f5c","text":"<p>\u914d\u5bf9\u64cd\u4f5c\u5206\u4e3a<code>zip</code>\u548c<code>zipWith</code>\u4e24\u79cd\u65b9\u6cd5\u3002<code>zip</code>\u64cd\u4f5c\u5c06\u4e24\u4e2a\u961f\u5217\u7684\u6210\u5458\uff0c\u4e00\u4e00\u914d\u5bf9\uff0c\u5408\u6210\u4e00\u4e2a\u65b0\u7684\u961f\u5217\u3002\u5982\u679c\u4e24\u4e2a\u961f\u5217\u4e0d\u7b49\u957f\uff0c\u8f83\u957f\u7684\u90a3\u4e2a\u961f\u5217\u591a\u51fa\u6765\u7684\u6210\u5458\uff0c\u4f1a\u88ab\u5ffd\u7565\u3002<code>zipWith</code>\u64cd\u4f5c\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7136\u540e\u4f1a\u5c06\u540e\u9762\u7684\u961f\u5217\u6210\u5458\u4e00\u4e00\u914d\u5bf9\uff0c\u8f93\u5165\u8be5\u51fd\u6570\uff0c\u8fd4\u56de\u503c\u5c31\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684\u961f\u5217\u3002</p> <p>\u4e0b\u9762\u662f\u4f8b\u5b50\u3002</p> <pre><code>let a = [0, 1, 2];\nlet b = [3, 4, 5];\nlet c = [6, 7, 8];\n\nf.zip(a, b) // [[0, 3], [1, 4], [2, 5]]\nf.zipWith((a, b) =&gt; a + b, a, b, c) // [9, 12, 15]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>zipWith</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u6c42\u548c\u51fd\u6570\uff0c\u5b83\u5c06\u540e\u9762\u4e09\u4e2a\u961f\u5217\u7684\u6210\u5458\uff0c\u4e00\u4e00\u914d\u5bf9\u8fdb\u884c\u76f8\u52a0\u3002</p> <p>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u7684\u5b9e\u73b0\u5982\u4e0b\u3002</p> <pre><code>let f = {};\n\nf.zip = (...xs) =&gt; {\n  let r = [];\n  let nple = [];\n  let length = Math.min.apply(null, xs.map(x =&gt; x.length));\n\n  for (var i = 0; i &lt; length; i++) {\n    xs.forEach(\n      x =&gt; nple.push(x[i])\n    );\n\n    r.push(nple);\n    nple = [];\n  }\n\n  return r;\n};\n\nf.zipWith = (op, ...xs) =&gt;\n  f.zip.apply(null, xs).map(\n    (x) =&gt; x.reduce(op)\n  );\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/fp/#_9","title":"\u53c2\u8003\u94fe\u63a5","text":"<ul> <li>Mateo Gianolio, Haskell in ES6: Part 1</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/mixin/","title":"Mixin","text":"<p>JavaScript \u8bed\u8a00\u7684\u8bbe\u8ba1\u662f\u5355\u4e00\u7ee7\u627f\uff0c\u5373\u5b50\u7c7b\u53ea\u80fd\u7ee7\u627f\u4e00\u4e2a\u7236\u7c7b\uff0c\u4e0d\u5141\u8bb8\u7ee7\u627f\u591a\u4e2a\u7236\u7c7b\u3002\u8fd9\u79cd\u8bbe\u8ba1\u4fdd\u8bc1\u4e86\u5bf9\u8c61\u7ee7\u627f\u7684\u5c42\u6b21\u7ed3\u6784\u662f\u6811\u72b6\u7684\uff0c\u800c\u4e0d\u662f\u590d\u6742\u7684\u7f51\u72b6\u7ed3\u6784\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u5927\u5927\u964d\u4f4e\u4e86\u7f16\u7a0b\u7684\u7075\u6d3b\u6027\u3002\u56e0\u4e3a\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u6709\u65f6\u4e0d\u53ef\u907f\u514d\uff0c\u5b50\u7c7b\u9700\u8981\u7ee7\u627f\u591a\u4e2a\u7236\u7c7b\u3002\u4e3e\u4f8b\u6765\u8bf4\uff0c\u201c\u732b\u201d\u53ef\u4ee5\u7ee7\u627f\u201c\u54fa\u4e73\u7c7b\u52a8\u7269\u201d\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u627f\u201c\u5ba0\u7269\u201d\u3002</p> <p>\u5404\u79cd\u5355\u4e00\u7ee7\u627f\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u6709\u4e0d\u540c\u7684\u591a\u91cd\u7ee7\u627f\u89e3\u51b3\u65b9\u6848\u3002\u6bd4\u5982\uff0cJava \u8bed\u8a00\u4e5f\u662f\u5b50\u7c7b\u53ea\u80fd\u7ee7\u627f\u4e00\u4e2a\u7236\u7c7b\uff0c\u4f46\u662f\u8fd8\u5141\u8bb8\u7ee7\u627f\u591a\u4e2a\u754c\u9762\uff08interface\uff09\uff0c\u8fd9\u6837\u5c31\u95f4\u63a5\u5b9e\u73b0\u4e86\u591a\u91cd\u7ee7\u627f\u3002Interface \u4e0e\u7236\u7c7b\u4e00\u6837\uff0c\u4e5f\u662f\u4e00\u4e2a\u7c7b\uff0c\u53ea\u4e0d\u8fc7\u5b83\u53ea\u5b9a\u4e49\u63a5\u53e3\uff08method signature\uff09\uff0c\u4e0d\u5b9a\u4e49\u5b9e\u73b0\uff0c\u56e0\u6b64\u53c8\u88ab\u79f0\u4e3a\u201c\u62bd\u8c61\u7c7b\u201d\u3002\u51e1\u662f\u7ee7\u627f\u4e8e Interface \u7684\u65b9\u6cd5\uff0c\u90fd\u5fc5\u987b\u81ea\u5df1\u5b9a\u4e49\u5b9e\u73b0\uff0c\u5426\u5219\u5c31\u4f1a\u62a5\u9519\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u591a\u91cd\u7ee7\u627f\u7684\u6700\u5927\u95ee\u9898\uff1a\u591a\u4e2a\u7236\u7c7b\u7684\u540c\u540d\u65b9\u6cd5\u7684\u78b0\u649e\uff08naming collision\uff09\u3002</p> <p>JavaScript \u8bed\u8a00\u6ca1\u6709\u91c7\u7528 Interface \u7684\u65b9\u6848\uff0c\u800c\u662f\u901a\u8fc7\u4ee3\u7406\uff08delegation\uff09\u5b9e\u73b0\u4e86\u4ece\u5176\u4ed6\u7c7b\u5f15\u5165\u65b9\u6cd5\u3002</p> <pre><code>var Enumerable_first = function () {\n  this.first = function () {\n    return this[0];\n  };\n};\n\nvar list = [\"foo\", \"bar\", \"baz\"];\nEnumerable_first.call(list); // explicit delegation\nlist.first() // \"foo\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>list</code>\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u672c\u8eab\u5e76\u6ca1\u6709<code>first</code>\u65b9\u6cd5\u3002\u901a\u8fc7<code>call</code>\u65b9\u6cd5\uff0c\u53ef\u4ee5\u628a<code>Enumerable_first</code>\u91cc\u9762\u7684\u65b9\u6cd5\uff0c\u7ed1\u5b9a\u5230<code>list</code>\uff0c\u4ece\u800c<code>list</code>\u5c31\u5177\u6709<code>first</code>\u65b9\u6cd5\u3002\u8fd9\u5c31\u53eb\u505a\u201c\u4ee3\u7406\u201d\uff08delegation\uff09\uff0c<code>list</code>\u5bf9\u8c61\u4ee3\u7406\u4e86<code>Enumerable_first</code>\u7684<code>first</code>\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/mixin/#_1","title":"\u542b\u4e49","text":"<p>Mixin \u8fd9\u4e2a\u540d\u5b57\u6765\u81ea\u4e8e\u51b0\u6dc7\u6dcb\uff0c\u5728\u57fa\u672c\u53e3\u5473\u7684\u51b0\u6dc7\u6dcb\u4e0a\u9762\u6df7\u5165\u5176\u4ed6\u53e3\u5473\uff0c\u8fd9\u5c31\u53eb\u505a Mix-in\u3002</p> <p>\u5b83\u5141\u8bb8\u5411\u4e00\u4e2a\u7c7b\u91cc\u9762\u6ce8\u5165\u4e00\u4e9b\u4ee3\u7801\uff0c\u4f7f\u5f97\u4e00\u4e2a\u7c7b\u7684\u529f\u80fd\u80fd\u591f\u201c\u6df7\u5165\u201d\u53e6\u4e00\u4e2a\u7c7b\u3002\u5b9e\u8d28\u4e0a\u662f\u591a\u91cd\u7ee7\u627f\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u4f46\u662f\u907f\u514d\u4e86\u591a\u91cd\u7ee7\u627f\u7684\u590d\u6742\u6027\uff0c\u800c\u4e14\u6709\u5229\u4e8e\u4ee3\u7801\u590d\u7528\u3002</p> <p>Mixin \u5c31\u662f\u4e00\u4e2a\u6b63\u5e38\u7684\u7c7b\uff0c\u4e0d\u4ec5\u5b9a\u4e49\u4e86\u63a5\u53e3\uff0c\u8fd8\u5b9a\u4e49\u4e86\u63a5\u53e3\u7684\u5b9e\u73b0\u3002</p> <p>\u5b50\u7c7b\u901a\u8fc7\u5728<code>this</code>\u5bf9\u8c61\u4e0a\u9762\u7ed1\u5b9a\u65b9\u6cd5\uff0c\u8fbe\u5230\u591a\u91cd\u7ee7\u627f\u7684\u76ee\u7684\u3002</p> <p>\u5f88\u591a\u5e93\u63d0\u4f9b\u4e86 Mixin \u529f\u80fd\u3002\u4e0b\u9762\u4ee5 Lodash \u4e3a\u4f8b\u3002</p> <pre><code>function vowels(string) {\n  return /[aeiou]/i.test(this.value);\n}\n\nvar obj = { value: 'hello' };\n_.mixin(obj, {vowels: vowels})\nobj.vowels() // true\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7 Lodash \u5e93\u7684<code>_.mixin</code>\u65b9\u6cd5\uff0c\u8ba9<code>obj</code>\u5bf9\u8c61\u7ee7\u627f\u4e86<code>vowels</code>\u65b9\u6cd5\u3002</p> <p>Underscore \u7684\u7c7b\u4f3c\u65b9\u6cd5\u662f<code>_.extend</code>\u3002</p> <pre><code>var Person = function (fName, lName) {\n  this.firstName = fName;\n  this.lastName = lName;\n}\n\nvar sam = new Person('Sam', 'Lowry');\n\nvar NameMixin = {\n  fullName: function () {\n    return this.firstName + ' ' + this.lastName;\n  },\n  rename: function(first, last) {\n    this.firstName = first;\n    this.lastName = last;\n    return this;\n  }\n};\n_.extend(Person.prototype, NameMixin);\nsam.rename('Samwise', 'Gamgee');\nsam.fullName() // \"Samwise Gamgee\"\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u901a\u8fc7<code>_.extend</code>\u65b9\u6cd5\uff0c\u5728<code>sam</code>\u5bf9\u8c61\u4e0a\u9762\uff08\u51c6\u786e\u8bf4\u662f\u5b83\u7684\u539f\u578b\u5bf9\u8c61<code>Person.prototype</code>\u4e0a\u9762\uff09\uff0c\u6df7\u5165\u4e86<code>NameMixin</code>\u7c7b\u3002</p> <p><code>extend</code>\u65b9\u6cd5\u7684\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\u3002</p> <pre><code>function extend(destination, source) {\n  for (var k in source) {\n    if (source.hasOwnProperty(k)) {\n      destination[k] = source[k];\n    }\n  }\n  return destination;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5c06<code>source</code>\u5bf9\u8c61\u7684\u6240\u6709\u65b9\u6cd5\uff0c\u6dfb\u52a0\u5230<code>destination</code>\u5bf9\u8c61\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/mixin/#trait","title":"Trait","text":"<p>Trait \u662f\u53e6\u5916\u4e00\u79cd\u591a\u91cd\u7ee7\u627f\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5b83\u4e0e Mixin \u5f88\u76f8\u4f3c\uff0c\u4f46\u662f\u6709\u4e00\u4e9b\u7ec6\u5fae\u7684\u5dee\u522b\u3002</p> <ul> <li>Mixin \u53ef\u4ee5\u5305\u542b\u72b6\u6001\uff08state\uff09\uff0cTrait \u4e0d\u5305\u542b\uff0c\u5373 Trait \u91cc\u9762\u7684\u65b9\u6cd5\u90fd\u662f\u4e92\u4e0d\u76f8\u5e72\uff0c\u53ef\u4ee5\u7ebf\u6027\u5305\u542b\u7684\u3002\u6bd4\u5982\uff0c<code>Trait1</code>\u5305\u542b\u65b9\u6cd5<code>A</code>\u548c<code>B</code>\uff0c<code>Trait2</code>\u7ee7\u627f\u4e86<code>Trait1</code>\uff0c\u540c\u65f6\u8fd8\u5305\u542b\u4e00\u4e2a\u81ea\u5df1\u7684\u65b9\u6cd5<code>C</code>\uff0c\u5b9e\u9645\u4e0a\u5c31\u7b49\u540c\u4e8e\u76f4\u63a5\u5305\u542b\u65b9\u6cd5<code>A</code>\u3001<code>B</code>\u3001<code>C</code>\u3002</li> <li>\u5bf9\u4e8e\u540c\u540d\u65b9\u6cd5\u7684\u78b0\u649e\uff0cMixin \u5305\u542b\u4e86\u89e3\u51b3\u89c4\u5219\uff0cTrait \u5219\u662f\u62a5\u9519\u3002</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/","title":"SIMD","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_1","title":"\u6982\u8ff0","text":"<p>SIMD\uff08\u53d1\u97f3<code>/sim-dee/</code>\uff09\u662f\u201cSingle Instruction/Multiple Data\u201d\u7684\u7f29\u5199\uff0c\u610f\u4e3a\u201c\u5355\u6307\u4ee4\uff0c\u591a\u6570\u636e\u201d\u3002\u5b83\u662f JavaScript \u64cd\u4f5c CPU \u5bf9\u5e94\u6307\u4ee4\u7684\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u770b\u505a\u8fd9\u662f\u4e00\u79cd\u4e0d\u540c\u7684\u8fd0\u7b97\u6267\u884c\u6a21\u5f0f\u3002\u4e0e\u5b83\u76f8\u5bf9\u7684\u662f SISD\uff08\u201cSingle Instruction/Single Data\u201d\uff09\uff0c\u5373\u201c\u5355\u6307\u4ee4\uff0c\u5355\u6570\u636e\u201d\u3002</p> <p>SIMD \u7684\u542b\u4e49\u662f\u4f7f\u7528\u4e00\u4e2a\u6307\u4ee4\uff0c\u5b8c\u6210\u591a\u4e2a\u6570\u636e\u7684\u8fd0\u7b97\uff1bSISD \u7684\u542b\u4e49\u662f\u4f7f\u7528\u4e00\u4e2a\u6307\u4ee4\uff0c\u5b8c\u6210\u5355\u4e2a\u6570\u636e\u7684\u8fd0\u7b97\uff0c\u8fd9\u662f JavaScript \u7684\u9ed8\u8ba4\u8fd0\u7b97\u6a21\u5f0f\u3002\u663e\u800c\u6613\u89c1\uff0cSIMD \u7684\u6267\u884c\u6548\u7387\u8981\u9ad8\u4e8e SISD\uff0c\u6240\u4ee5\u88ab\u5e7f\u6cdb\u7528\u4e8e 3D \u56fe\u5f62\u8fd0\u7b97\u3001\u7269\u7406\u6a21\u62df\u7b49\u8fd0\u7b97\u91cf\u8d85\u5927\u7684\u9879\u76ee\u4e4b\u4e2d\u3002</p> <p>\u4e3a\u4e86\u7406\u89e3 SIMD\uff0c\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002</p> <pre><code>var a = [1, 2, 3, 4];\nvar b = [5, 6, 7, 8];\nvar c = [];\n\nc[0] = a[0] + b[0];\nc[1] = a[1] + b[1];\nc[2] = a[2] + b[2];\nc[3] = a[3] + b[3];\nc // Array[6, 8, 10, 12]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6570\u7ec4<code>a</code>\u548c<code>b</code>\u7684\u5bf9\u5e94\u6210\u5458\u76f8\u52a0\uff0c\u7ed3\u679c\u653e\u5165\u6570\u7ec4<code>c</code>\u3002\u5b83\u7684\u8fd0\u7b97\u6a21\u5f0f\u662f\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a\u6570\u7ec4\u6210\u5458\uff0c\u4e00\u5171\u6709\u56db\u4e2a\u6570\u7ec4\u6210\u5458\uff0c\u6240\u4ee5\u9700\u8981\u8fd0\u7b97 4 \u6b21\u3002</p> <p>\u5982\u679c\u91c7\u7528 SIMD \u6a21\u5f0f\uff0c\u53ea\u8981\u8fd0\u7b97\u4e00\u6b21\u5c31\u591f\u4e86\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 4);\nvar b = SIMD.Float32x4(5, 6, 7, 8);\nvar c = SIMD.Float32x4.add(a, b); // Float32x4[6, 8, 10, 12]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e4b\u4e2d\uff0c\u6570\u7ec4<code>a</code>\u548c<code>b</code>\u7684\u56db\u4e2a\u6210\u5458\u7684\u5404\u81ea\u76f8\u52a0\uff0c\u53ea\u7528\u4e00\u6761\u6307\u4ee4\u5c31\u5b8c\u6210\u4e86\u3002\u56e0\u6b64\uff0c\u901f\u5ea6\u6bd4\u4e0a\u4e00\u79cd\u5199\u6cd5\u63d0\u9ad8\u4e86 4 \u500d\u3002</p> <p>\u4e00\u6b21 SIMD \u8fd0\u7b97\uff0c\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u88ab\u79f0\u4e3a\u201c\u901a\u9053\u201d\uff08lane\uff09\u3002\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4e00\u6b21\u8fd0\u7b97\u4e86\u56db\u4e2a\u6570\u636e\uff0c\u56e0\u6b64\u5c31\u662f\u56db\u4e2a\u901a\u9053\u3002</p> <p>SIMD \u901a\u5e38\u7528\u4e8e\u77e2\u91cf\u8fd0\u7b97\u3002</p> <pre><code>v + w = \u2329v1, \u2026, vn\u232a+ \u2329w1, \u2026, wn\u232a\n      = \u2329v1+w1, \u2026, vn+wn\u232a\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>v</code>\u548c<code>w</code>\u662f\u4e24\u4e2a\u591a\u5143\u77e2\u91cf\u3002\u5b83\u4eec\u7684\u52a0\u8fd0\u7b97\uff0c\u5728 SIMD \u4e0b\u662f\u4e00\u4e2a\u6307\u4ee4\u3001\u800c\u4e0d\u662f n \u4e2a\u6307\u4ee4\u5b8c\u6210\u7684\uff0c\u8fd9\u5c31\u5927\u5927\u63d0\u9ad8\u4e86\u6548\u7387\u3002\u8fd9\u5bf9\u4e8e 3D \u52a8\u753b\u3001\u56fe\u50cf\u5904\u7406\u3001\u4fe1\u53f7\u5904\u7406\u3001\u6570\u503c\u5904\u7406\u3001\u52a0\u5bc6\u7b49\u8fd0\u7b97\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002\u6bd4\u5982\uff0cCanvas \u7684<code>getImageData()</code>\u4f1a\u5c06\u56fe\u50cf\u6587\u4ef6\u8bfb\u6210\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0cSIMD \u5c31\u5f88\u9002\u5408\u5bf9\u4e8e\u8fd9\u79cd\u6570\u7ec4\u7684\u5904\u7406\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0cSIMD \u662f\u6570\u636e\u5e76\u884c\u5904\u7406\uff08parallelism\uff09\u7684\u4e00\u79cd\u624b\u6bb5\uff0c\u53ef\u4ee5\u52a0\u901f\u4e00\u4e9b\u8fd0\u7b97\u5bc6\u96c6\u578b\u64cd\u4f5c\u7684\u901f\u5ea6\u3002\u5c06\u6765\u4e0e WebAssembly \u7ed3\u5408\u4ee5\u540e\uff0c\u53ef\u4ee5\u8ba9 JavaScript \u8fbe\u5230\u4e8c\u8fdb\u5236\u4ee3\u7801\u7684\u8fd0\u884c\u901f\u5ea6\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_2","title":"\u6570\u636e\u7c7b\u578b","text":"<p>SIMD \u63d0\u4f9b 12 \u79cd\u6570\u636e\u7c7b\u578b\uff0c\u603b\u957f\u5ea6\u90fd\u662f 128 \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u3002</p> <ul> <li>Float32x4\uff1a\u56db\u4e2a 32 \u4f4d\u6d6e\u70b9\u6570</li> <li>Float64x2\uff1a\u4e24\u4e2a 64 \u4f4d\u6d6e\u70b9\u6570</li> <li>Int32x4\uff1a\u56db\u4e2a 32 \u4f4d\u6574\u6570</li> <li>Int16x8\uff1a\u516b\u4e2a 16 \u4f4d\u6574\u6570</li> <li>Int8x16\uff1a\u5341\u516d\u4e2a 8 \u4f4d\u6574\u6570</li> <li>Uint32x4\uff1a\u56db\u4e2a\u65e0\u7b26\u53f7\u7684 32 \u4f4d\u6574\u6570</li> <li>Uint16x8\uff1a\u516b\u4e2a\u65e0\u7b26\u53f7\u7684 16 \u4f4d\u6574\u6570</li> <li>Uint8x16\uff1a\u5341\u516d\u4e2a\u65e0\u7b26\u53f7\u7684 8 \u4f4d\u6574\u6570</li> <li>Bool32x4\uff1a\u56db\u4e2a 32 \u4f4d\u5e03\u5c14\u503c</li> <li>Bool16x8\uff1a\u516b\u4e2a 16 \u4f4d\u5e03\u5c14\u503c</li> <li>Bool8x16\uff1a\u5341\u516d\u4e2a 8 \u4f4d\u5e03\u5c14\u503c</li> <li>Bool64x2\uff1a\u4e24\u4e2a 64 \u4f4d\u5e03\u5c14\u503c</li> </ul> <p>\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u88ab<code>x</code>\u7b26\u53f7\u5206\u9694\u6210\u4e24\u90e8\u5206\uff0c\u540e\u9762\u7684\u90e8\u5206\u8868\u793a\u901a\u9053\u6570\uff0c\u524d\u9762\u7684\u90e8\u5206\u8868\u793a\u6bcf\u4e2a\u901a\u9053\u7684\u5bbd\u5ea6\u548c\u7c7b\u578b\u3002\u6bd4\u5982\uff0c<code>Float32x4</code>\u5c31\u8868\u793a\u8fd9\u4e2a\u503c\u6709 4 \u4e2a\u901a\u9053\uff0c\u6bcf\u4e2a\u901a\u9053\u662f\u4e00\u4e2a 32 \u4f4d\u6d6e\u70b9\u6570\u3002</p> <p>\u6bcf\u4e2a\u901a\u9053\u4e4b\u4e2d\uff0c\u53ef\u4ee5\u653e\u7f6e\u56db\u79cd\u6570\u636e\u3002</p> <ul> <li>\u6d6e\u70b9\u6570\uff08float\uff0c\u6bd4\u5982 1.0\uff09</li> <li>\u5e26\u7b26\u53f7\u7684\u6574\u6570\uff08Int\uff0c\u6bd4\u5982-1\uff09</li> <li>\u65e0\u7b26\u53f7\u7684\u6574\u6570\uff08Uint\uff0c\u6bd4\u5982 1\uff09</li> <li>\u5e03\u5c14\u503c\uff08Bool\uff0c\u5305\u542b<code>true</code>\u548c<code>false</code>\u4e24\u79cd\u503c\uff09</li> </ul> <p>\u6bcf\u79cd SIMD \u7684\u6570\u636e\u7c7b\u578b\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f20\u5165\u53c2\u6570\uff0c\u751f\u6210\u5bf9\u5e94\u7684\u503c\u3002</p> <pre><code>var a = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf<code>a</code>\u5c31\u662f\u4e00\u4e2a 128 \u4f4d\u3001\u5305\u542b\u56db\u4e2a 32 \u4f4d\u6d6e\u70b9\u6570\uff08\u5373\u56db\u4e2a\u901a\u9053\uff09\u7684\u503c\u3002</p> <p>\u6ce8\u610f\uff0c\u8fd9\u4e9b\u6570\u636e\u7c7b\u578b\u65b9\u6cd5\u90fd\u4e0d\u662f\u6784\u9020\u51fd\u6570\uff0c\u524d\u9762\u4e0d\u80fd\u52a0<code>new</code>\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <pre><code>var v = new SIMD.Float32x4(0, 1, 2, 3);\n// TypeError: SIMD.Float32x4 is not a constructor\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_3","title":"\u9759\u6001\u65b9\u6cd5\uff1a\u6570\u5b66\u8fd0\u7b97","text":"<p>\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u90fd\u6709\u4e00\u7cfb\u5217\u8fd0\u7b97\u7b26\uff0c\u652f\u6301\u57fa\u672c\u7684\u6570\u5b66\u8fd0\u7b97\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeabssimdtypeneg","title":"SIMD.%type%.abs()\uff0cSIMD.%type%.neg()","text":"<p><code>abs</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u7684\u6bcf\u4e2a\u901a\u9053\u90fd\u8f6c\u6210\u7edd\u5bf9\u503c\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 0, NaN);\nSIMD.Float32x4.abs(a)\n// Float32x4[1, 2, 0, NaN]\n</code></pre> <p><code>neg</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u7684\u6bcf\u4e2a\u901a\u9053\u90fd\u8f6c\u6210\u8d1f\u503c\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 3, 0);\nSIMD.Float32x4.neg(a)\n// Float32x4[1, 2, -3, -0]\n\nvar b = SIMD.Float64x2(NaN, Infinity);\nSIMD.Float64x2.neg(b)\n// Float64x2[NaN, -Infinity]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeaddsimdtypeaddsaturate","title":"SIMD.%type%.add()\uff0cSIMD.%type%.addSaturate()","text":"<p><code>add</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u4eec\u7684\u6bcf\u4e2a\u901a\u9053\u76f8\u52a0\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\nvar b = SIMD.Float32x4(5.0, 10.0, 15.0, 20.0);\nvar c = SIMD.Float32x4.add(a, b);\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u7ecf\u8fc7\u52a0\u6cd5\u8fd0\u7b97\uff0c\u65b0\u7684 SIMD \u503c\u4e3a<code>(6.0, 12.0, 18.0. 24.0)</code>\u3002</p> <p><code>addSaturate</code>\u65b9\u6cd5\u8ddf<code>add</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u76f8\u540c\uff0c\u90fd\u662f\u4e24\u4e2a\u901a\u9053\u76f8\u52a0\uff0c\u4f46\u662f\u6ea2\u51fa\u7684\u5904\u7406\u4e0d\u4e00\u81f4\u3002\u5bf9\u4e8e<code>add</code>\u65b9\u6cd5\uff0c\u5982\u679c\u4e24\u4e2a\u503c\u76f8\u52a0\u53d1\u751f\u6ea2\u51fa\uff0c\u6ea2\u51fa\u7684\u4e8c\u8fdb\u5236\u4f4d\u4f1a\u88ab\u4e22\u5f03; <code>addSaturate</code>\u65b9\u6cd5\u5219\u662f\u8fd4\u56de\u8be5\u6570\u636e\u7c7b\u578b\u7684\u6700\u5927\u503c\u3002</p> <pre><code>var a = SIMD.Uint16x8(65533, 65534, 65535, 65535, 1, 1, 1, 1);\nvar b = SIMD.Uint16x8(1, 1, 1, 5000, 1, 1, 1, 1);\nSIMD.Uint16x8.addSaturate(a, b);\n// Uint16x8[65534, 65535, 65535, 65535, 2, 2, 2, 2]\n\nvar c = SIMD.Int16x8(32765, 32766, 32767, 32767, 1, 1, 1, 1);\nvar d = SIMD.Int16x8(1, 1, 1, 5000, 1, 1, 1, 1);\nSIMD.Int16x8.addSaturate(c, d);\n// Int16x8[32766, 32767, 32767, 32767, 2, 2, 2, 2]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Uint16</code>\u7684\u6700\u5927\u503c\u662f 65535\uff0c<code>Int16</code>\u7684\u6700\u5927\u503c\u662f 32767\u3002\u4e00\u65e6\u53d1\u751f\u6ea2\u51fa\uff0c\u5c31\u8fd4\u56de\u8fd9\u4e24\u4e2a\u503c\u3002</p> <p>\u6ce8\u610f\uff0c<code>Uint32x4</code>\u548c<code>Int32x4</code>\u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u6ca1\u6709<code>addSaturate</code>\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypesubsimdtypesubsaturate","title":"SIMD.%type%.sub()\uff0cSIMD.%type%.subSaturate()","text":"<p><code>sub</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u4eec\u7684\u6bcf\u4e2a\u901a\u9053\u76f8\u51cf\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 3, 4);\nvar b = SIMD.Float32x4(3, 3, 3, 3);\nSIMD.Float32x4.sub(a, b)\n// Float32x4[-4, -5, 0, 1]\n</code></pre> <p><code>subSaturate</code>\u65b9\u6cd5\u8ddf<code>sub</code>\u65b9\u6cd5\u7684\u4f5c\u7528\u76f8\u540c\uff0c\u90fd\u662f\u4e24\u4e2a\u901a\u9053\u76f8\u51cf\uff0c\u4f46\u662f\u6ea2\u51fa\u7684\u5904\u7406\u4e0d\u4e00\u81f4\u3002\u5bf9\u4e8e<code>sub</code>\u65b9\u6cd5\uff0c\u5982\u679c\u4e24\u4e2a\u503c\u76f8\u51cf\u53d1\u751f\u6ea2\u51fa\uff0c\u6ea2\u51fa\u7684\u4e8c\u8fdb\u5236\u4f4d\u4f1a\u88ab\u4e22\u5f03; <code>subSaturate</code>\u65b9\u6cd5\u5219\u662f\u8fd4\u56de\u8be5\u6570\u636e\u7c7b\u578b\u7684\u6700\u5c0f\u503c\u3002</p> <pre><code>var a = SIMD.Uint16x8(5, 1, 1, 1, 1, 1, 1, 1);\nvar b = SIMD.Uint16x8(10, 1, 1, 1, 1, 1, 1, 1);\nSIMD.Uint16x8.subSaturate(a, b)\n// Uint16x8[0, 0, 0, 0, 0, 0, 0, 0]\n\nvar c = SIMD.Int16x8(-100, 0, 0, 0, 0, 0, 0, 0);\nvar d = SIMD.Int16x8(32767, 0, 0, 0, 0, 0, 0, 0);\nSIMD.Int16x8.subSaturate(c, d)\n// Int16x8[-32768, 0, 0, 0, 0, 0, 0, 0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>Uint16</code>\u7684\u6700\u5c0f\u503c\u662f<code>0</code>\uff0c<code>Int16</code>\u7684\u6700\u5c0f\u503c\u662f<code>-32678</code>\u3002\u4e00\u65e6\u8fd0\u7b97\u53d1\u751f\u6ea2\u51fa\uff0c\u5c31\u8fd4\u56de\u6700\u5c0f\u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypemulsimdtypedivsimdtypesqrt","title":"SIMD.%type%.mul()\uff0cSIMD.%type%.div()\uff0cSIMD.%type%.sqrt()","text":"<p><code>mul</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u4eec\u7684\u6bcf\u4e2a\u901a\u9053\u76f8\u4e58\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 3, 4);\nvar b = SIMD.Float32x4(3, 3, 3, 3);\nSIMD.Float32x4.mul(a, b)\n// Float32x4[-3, -6, 9, 12]\n</code></pre> <p><code>div</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u5b83\u4eec\u7684\u6bcf\u4e2a\u901a\u9053\u76f8\u9664\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(2, 2, 2, 2);\nvar b = SIMD.Float32x4(4, 4, 4, 4);\nSIMD.Float32x4.div(a, b)\n// Float32x4[0.5, 0.5, 0.5, 0.5]\n</code></pre> <p><code>sqrt</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u6c42\u51fa\u6bcf\u4e2a\u901a\u9053\u7684\u5e73\u65b9\u6839\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var b = SIMD.Float64x2(4, 8);\nSIMD.Float64x2.sqrt(b)\n// Float64x2[2, 2.8284271247461903]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdfloattypereciprocalapproximationsimdtypereciprocalsqrtapproximation","title":"SIMD.%FloatType%.reciprocalApproximation()\uff0cSIMD.%type%.reciprocalSqrtApproximation()","text":"<p><code>reciprocalApproximation</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u6c42\u51fa\u6bcf\u4e2a\u901a\u9053\u7684\u5012\u6570\uff08<code>1 / x</code>\uff09\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 4);\nSIMD.Float32x4.reciprocalApproximation(a);\n// Float32x4[1, 0.5, 0.3333333432674408, 0.25]\n</code></pre> <p><code>reciprocalSqrtApproximation</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u6c42\u51fa\u6bcf\u4e2a\u901a\u9053\u7684\u5e73\u65b9\u6839\u7684\u5012\u6570\uff08<code>1 / (x^0.5)</code>\uff09\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 4);\nSIMD.Float32x4.reciprocalSqrtApproximation(a)\n// Float32x4[1, 0.7071067690849304, 0.5773502588272095, 0.5]\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u6d6e\u70b9\u6570\u7684\u6570\u636e\u7c7b\u578b\u624d\u6709\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdintegertypeshiftleftbyscalar","title":"SIMD.%IntegerType%.shiftLeftByScalar()","text":"<p><code>shiftLeftByScalar</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u5c06\u6bcf\u4e2a\u901a\u9053\u7684\u503c\u5de6\u79fb\u6307\u5b9a\u7684\u4f4d\u6570\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, 8);\nSIMD.Int32x4.shiftLeftByScalar(a, 1);\n// Int32x4[2, 4, 8, 16]\n</code></pre> <p>\u5982\u679c\u5de6\u79fb\u540e\uff0c\u65b0\u7684\u503c\u8d85\u51fa\u4e86\u5f53\u524d\u6570\u636e\u7c7b\u578b\u7684\u4f4d\u6570\uff0c\u6ea2\u51fa\u7684\u90e8\u5206\u4f1a\u88ab\u4e22\u5f03\u3002</p> <pre><code>var ix4 = SIMD.Int32x4(1, 2, 3, 4);\nvar jx4 = SIMD.Int32x4.shiftLeftByScalar(ix4, 32);\n// Int32x4[0, 0, 0, 0]\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u6574\u6570\u7684\u6570\u636e\u7c7b\u578b\u624d\u6709\u8fd9\u4e2a\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdintegertypeshiftrightbyscalar","title":"SIMD.%IntegerType%.shiftRightByScalar()","text":"<p><code>shiftRightByScalar</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u5c06\u6bcf\u4e2a\u901a\u9053\u7684\u503c\u53f3\u79fb\u6307\u5b9a\u7684\u4f4d\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, -8);\nSIMD.Int32x4.shiftRightByScalar(a, 1);\n// Int32x4[0, 1, 2, -4]\n</code></pre> <p>\u5982\u679c\u539f\u6765\u901a\u9053\u7684\u503c\u662f\u5e26\u7b26\u53f7\u7684\u503c\uff0c\u5219\u7b26\u53f7\u4f4d\u4fdd\u6301\u4e0d\u53d8\uff0c\u4e0d\u53d7\u53f3\u79fb\u5f71\u54cd\u3002\u5982\u679c\u662f\u4e0d\u5e26\u7b26\u53f7\u4f4d\u7684\u503c\uff0c\u5219\u53f3\u79fb\u540e\u5934\u90e8\u4f1a\u8865<code>0</code>\u3002</p> <pre><code>var a = SIMD.Uint32x4(1, 2, 4, -8);\nSIMD.Uint32x4.shiftRightByScalar(a, 1);\n// Uint32x4[0, 1, 2, 2147483644]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>-8</code>\u53f3\u79fb\u4e00\u4f4d\u53d8\u6210\u4e86<code>2147483644</code>\uff0c\u662f\u56e0\u4e3a\u5bf9\u4e8e 32 \u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u6765\u8bf4\uff0c<code>-8</code>\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>11111111111111111111111111111000</code>\uff0c\u53f3\u79fb\u4e00\u4f4d\u5c31\u53d8\u6210\u4e86<code>01111111111111111111111111111100</code>\uff0c\u76f8\u5f53\u4e8e<code>2147483644</code>\u3002</p> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u6574\u6570\u7684\u6570\u636e\u7c7b\u578b\u624d\u6709\u8fd9\u4e2a\u65b9\u6cd5\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_4","title":"\u9759\u6001\u65b9\u6cd5\uff1a\u901a\u9053\u5904\u7406","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypecheck","title":"SIMD.%type%.check()","text":"<p><code>check</code>\u65b9\u6cd5\u7528\u4e8e\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a\u5f53\u524d\u7c7b\u578b\u7684 SIMD \u503c\u3002\u5982\u679c\u662f\u7684\uff0c\u5c31\u8fd4\u56de\u8fd9\u4e2a\u503c\uff0c\u5426\u5219\u5c31\u62a5\u9519\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 9);\n\nSIMD.Float32x4.check(a);\n// Float32x4[1, 2, 3, 9]\n\nSIMD.Float32x4.check([1,2,3,4]) // \u62a5\u9519\nSIMD.Int32x4.check(a) // \u62a5\u9519\nSIMD.Int32x4.check('hello world') // \u62a5\u9519\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeextractlanesimdtypereplacelane","title":"SIMD.%type%.extractLane()\uff0cSIMD.%type%.replaceLane()","text":"<p><code>extractLane</code>\u65b9\u6cd5\u7528\u4e8e\u8fd4\u56de\u7ed9\u5b9a\u901a\u9053\u7684\u503c\u3002\u5b83\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f SIMD \u503c\u548c\u901a\u9053\u7f16\u53f7\u3002</p> <pre><code>var t = SIMD.Float32x4(1, 2, 3, 4);\nSIMD.Float32x4.extractLane(t, 2) // 3\n</code></pre> <p><code>replaceLane</code>\u65b9\u6cd5\u7528\u4e8e\u66ff\u6362\u6307\u5b9a\u901a\u9053\u7684\u503c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u539f\u6765\u7684 SIMD \u503c\u3001\u901a\u9053\u7f16\u53f7\u548c\u65b0\u7684\u901a\u9053\u503c\u3002</p> <pre><code>var t = SIMD.Float32x4(1, 2, 3, 4);\nSIMD.Float32x4.replaceLane(t, 2, 42)\n// Float32x4[1, 2, 42, 4]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeload","title":"SIMD.%type%.load()","text":"<p><code>load</code>\u65b9\u6cd5\u7528\u4e8e\u4ece\u4e8c\u8fdb\u5236\u6570\u7ec4\u8bfb\u5165\u6570\u636e\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = new Int32Array([1,2,3,4,5,6,7,8]);\nSIMD.Int32x4.load(a, 0);\n// Int32x4[1, 2, 3, 4]\n\nvar b = new Int32Array([1,2,3,4,5,6,7,8]);\nSIMD.Int32x4.load(a, 2);\n// Int32x4[3, 4, 5, 6]\n</code></pre> <p><code>load</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\u548c\u5f00\u59cb\u8bfb\u53d6\u7684\u4f4d\u7f6e\uff08\u4ece 0 \u5f00\u59cb\uff09\u3002\u5982\u679c\u4f4d\u7f6e\u4e0d\u5408\u6cd5\uff08\u6bd4\u5982<code>-1</code>\u6216\u8005\u8d85\u51fa\u4e8c\u8fdb\u5236\u6570\u7ec4\u7684\u5927\u5c0f\uff09\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u6709\u4e09\u4e2a\u53d8\u79cd<code>load1()</code>\u3001<code>load2()</code>\u3001<code>load3()</code>\uff0c\u8868\u793a\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5f00\u59cb\uff0c\u53ea\u52a0\u8f7d\u4e00\u4e2a\u901a\u9053\u3001\u4e8c\u4e2a\u901a\u9053\u3001\u4e09\u4e2a\u901a\u9053\u7684\u503c\u3002</p> <pre><code>// \u683c\u5f0f\nSIMD.Int32x4.load(tarray, index)\nSIMD.Int32x4.load1(tarray, index)\nSIMD.Int32x4.load2(tarray, index)\nSIMD.Int32x4.load3(tarray, index)\n\n// \u5b9e\u4f8b\nvar a = new Int32Array([1,2,3,4,5,6,7,8]);\nSIMD.Int32x4.load1(a, 0);\n// Int32x4[1, 0, 0, 0]\nSIMD.Int32x4.load2(a, 0);\n// Int32x4[1, 2, 0, 0]\nSIMD.Int32x4.load3(a, 0);\n// Int32x4[1, 2, 3,0]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypestore","title":"SIMD.%type%.store()","text":"<p><code>store</code>\u65b9\u6cd5\u7528\u4e8e\u5c06\u4e00\u4e2a SIMD \u503c\uff0c\u5199\u5165\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u4e8c\u8fdb\u5236\u6570\u7ec4\u3001\u5f00\u59cb\u5199\u5165\u7684\u6570\u7ec4\u4f4d\u7f6e\u3001SIMD \u503c\u3002\u5b83\u8fd4\u56de\u5199\u5165\u503c\u4ee5\u540e\u7684\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002</p> <pre><code>var t1 = new Int32Array(8);\nvar v1 = SIMD.Int32x4(1, 2, 3, 4);\nSIMD.Int32x4.store(t1, 0, v1)\n// Int32Array[1, 2, 3, 4, 0, 0, 0, 0]\n\nvar t2 = new Int32Array(8);\nvar v2 = SIMD.Int32x4(1, 2, 3, 4);\nSIMD.Int32x4.store(t2, 2, v2)\n// Int32Array[0, 0, 1, 2, 3, 4, 0, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>t1</code>\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0c<code>v1</code>\u662f\u4e00\u4e2a SIMD \u503c\uff0c\u53ea\u6709\u56db\u4e2a\u901a\u9053\u3002\u6240\u4ee5\u5199\u5165<code>t1</code>\u4ee5\u540e\uff0c\u53ea\u6709\u524d\u56db\u4e2a\u4f4d\u7f6e\u6709\u503c\uff0c\u540e\u56db\u4e2a\u4f4d\u7f6e\u90fd\u662f 0\u3002\u800c<code>t2</code>\u662f\u4ece 2 \u53f7\u4f4d\u7f6e\u5f00\u59cb\u5199\u5165\uff0c\u6240\u4ee5\u524d\u4e24\u4e2a\u4f4d\u7f6e\u548c\u540e\u4e24\u4e2a\u4f4d\u7f6e\u90fd\u662f 0\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u6709\u4e09\u4e2a\u53d8\u79cd<code>store1()</code>\u3001<code>store2()</code>\u548c<code>store3()</code>\uff0c\u8868\u793a\u53ea\u5199\u5165\u4e00\u4e2a\u901a\u9053\u3001\u4e8c\u4e2a\u901a\u9053\u548c\u4e09\u4e2a\u901a\u9053\u7684\u503c\u3002</p> <pre><code>var tarray = new Int32Array(8);\nvar value = SIMD.Int32x4(1, 2, 3, 4);\nSIMD.Int32x4.store1(tarray, 0, value);\n// Int32Array[1, 0, 0, 0, 0, 0, 0, 0]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypesplat","title":"SIMD.%type%.splat()","text":"<p><code>splat</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\uff0c\u8be5\u503c\u7684\u6240\u6709\u901a\u9053\u90fd\u4f1a\u8bbe\u6210\u540c\u4e00\u4e2a\u9884\u5148\u7ed9\u5b9a\u7684\u503c\u3002</p> <pre><code>SIMD.Float32x4.splat(3);\n// Float32x4[3, 3, 3, 3]\nSIMD.Float64x2.splat(3);\n// Float64x2[3, 3]\n</code></pre> <p>\u5982\u679c\u7701\u7565\u53c2\u6570\uff0c\u6240\u6709\u6574\u6570\u578b\u7684 SIMD \u503c\u90fd\u4f1a\u8bbe\u5b9a<code>0</code>\uff0c\u6d6e\u70b9\u578b\u7684 SIMD \u503c\u90fd\u4f1a\u8bbe\u6210<code>NaN</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeswizzle","title":"SIMD.%type%.swizzle()","text":"<p><code>swizzle</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\uff0c\u91cd\u65b0\u6392\u5217\u539f\u6709\u7684 SIMD \u503c\u7684\u901a\u9053\u987a\u5e8f\u3002</p> <pre><code>var t = SIMD.Float32x4(1, 2, 3, 4);\nSIMD.Float32x4.swizzle(t, 1, 2, 0, 3);\n// Float32x4[2,3,1,4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>swizzle</code>\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u539f\u6709\u7684 SIMD \u503c\uff0c\u540e\u9762\u7684\u53c2\u6570\u5bf9\u5e94\u5c06\u8981\u8fd4\u56de\u7684 SIMD \u503c\u7684\u56db\u4e2a\u901a\u9053\u3002\u5b83\u7684\u610f\u601d\u662f\u65b0\u7684 SIMD \u7684\u56db\u4e2a\u901a\u9053\uff0c\u4f9d\u6b21\u662f\u539f\u6765 SIMD \u503c\u7684 1 \u53f7\u901a\u9053\u30012 \u53f7\u901a\u9053\u30010 \u53f7\u901a\u9053\u30013 \u53f7\u901a\u9053\u3002\u7531\u4e8e SIMD \u503c\u6700\u591a\u53ef\u4ee5\u6709 16 \u4e2a\u901a\u9053\uff0c\u6240\u4ee5<code>swizzle</code>\u65b9\u6cd5\u9664\u4e86\u7b2c\u4e00\u4e2a\u53c2\u6570\u4ee5\u5916\uff0c\u6700\u591a\u8fd8\u53ef\u4ee5\u63a5\u53d7 16 \u4e2a\u53c2\u6570\u3002</p> <p>\u4e0b\u9762\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>var a = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\n// Float32x4[1.0, 2.0, 3.0, 4.0]\n\nvar b = SIMD.Float32x4.swizzle(a, 0, 0, 1, 1);\n// Float32x4[1.0, 1.0, 2.0, 2.0]\n\nvar c = SIMD.Float32x4.swizzle(a, 3, 3, 3, 3);\n// Float32x4[4.0, 4.0, 4.0, 4.0]\n\nvar d = SIMD.Float32x4.swizzle(a, 3, 2, 1, 0);\n// Float32x4[4.0, 3.0, 2.0, 1.0]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeshuffle","title":"SIMD.%type%.shuffle()","text":"<p><code>shuffle</code>\u65b9\u6cd5\u4ece\u4e24\u4e2a SIMD \u503c\u4e4b\u4e2d\u53d6\u51fa\u6307\u5b9a\u901a\u9053\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 4);\nvar b = SIMD.Float32x4(5, 6, 7, 8);\n\nSIMD.Float32x4.shuffle(a, b, 1, 5, 7, 2);\n// Float32x4[2, 6, 8, 3]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>a</code>\u548c<code>b</code>\u4e00\u5171\u6709 8 \u4e2a\u901a\u9053\uff0c\u4f9d\u6b21\u7f16\u53f7\u4e3a 0 \u5230 7\u3002<code>shuffle</code>\u6839\u636e\u7f16\u53f7\uff0c\u53d6\u51fa\u76f8\u5e94\u7684\u901a\u9053\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_5","title":"\u9759\u6001\u65b9\u6cd5\uff1a\u6bd4\u8f83\u8fd0\u7b97","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeequalsimdtypenotequal","title":"SIMD.%type%.equal()\uff0cSIMD.%type%.notEqual()","text":"<p><code>equal</code>\u65b9\u6cd5\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a SIMD \u503c<code>a</code>\u548c<code>b</code>\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\uff0c\u6839\u636e\u4e24\u8005\u662f\u5426\u7cbe\u786e\u76f8\u7b49\uff08<code>a === b</code>\uff09\uff0c\u5f97\u5230\u4e00\u4e2a\u5e03\u5c14\u503c\u3002\u6700\u540e\uff0c\u6240\u6709\u901a\u9053\u7684\u6bd4\u8f83\u7ed3\u679c\uff0c\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\uff0c\u4f5c\u4e3a\u63a9\u7801\u8fd4\u56de\u3002<code>notEqual</code>\u65b9\u6cd5\u5219\u662f\u6bd4\u8f83\u4e24\u4e2a\u901a\u9053\u662f\u5426\u4e0d\u76f8\u7b49\uff08<code>a !== b</code>\uff09\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 9);\nvar b = SIMD.Float32x4(1, 4, 7, 9);\n\nSIMD.Float32x4.equal(a,b)\n// Bool32x4[true, false, false, true]\n\nSIMD.Float32x4.notEqual(a,b);\n// Bool32x4[false, true, true, false]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypegreaterthansimdtypegreaterthanorequal","title":"SIMD.%type%.greaterThan()\uff0cSIMD.%type%.greaterThanOrEqual()","text":"<p><code>greatThan</code>\u65b9\u6cd5\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a SIMD \u503c<code>a</code>\u548c<code>b</code>\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\uff0c\u5982\u679c\u5728\u8be5\u901a\u9053\u4e2d\uff0c<code>a</code>\u8f83\u5927\u5c31\u5f97\u5230<code>true</code>\uff0c\u5426\u5219\u5f97\u5230<code>false</code>\u3002\u6700\u540e\uff0c\u6240\u6709\u901a\u9053\u7684\u6bd4\u8f83\u7ed3\u679c\uff0c\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\uff0c\u4f5c\u4e3a\u63a9\u7801\u8fd4\u56de\u3002<code>greaterThanOrEqual</code>\u5219\u662f\u6bd4\u8f83<code>a</code>\u662f\u5426\u5927\u4e8e\u7b49\u4e8e<code>b</code>\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 6, 3, 11);\nvar b = SIMD.Float32x4(1, 4, 7, 9);\n\nSIMD.Float32x4.greaterThan(a, b)\n// Bool32x4[false, true, false, true]\n\nSIMD.Float32x4.greaterThanOrEqual(a, b)\n// Bool32x4[true, true, false, true]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypelessthansimdtypelessthanorequal","title":"SIMD.%type%.lessThan()\uff0cSIMD.%type%.lessThanOrEqual()","text":"<p><code>lessThan</code>\u65b9\u6cd5\u7528\u6765\u6bd4\u8f83\u4e24\u4e2a SIMD \u503c<code>a</code>\u548c<code>b</code>\u7684\u6bcf\u4e00\u4e2a\u901a\u9053\uff0c\u5982\u679c\u5728\u8be5\u901a\u9053\u4e2d\uff0c<code>a</code>\u8f83\u5c0f\u5c31\u5f97\u5230<code>true</code>\uff0c\u5426\u5219\u5f97\u5230<code>false</code>\u3002\u6700\u540e\uff0c\u6240\u6709\u901a\u9053\u7684\u6bd4\u8f83\u7ed3\u679c\uff0c\u4f1a\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\uff0c\u4f5c\u4e3a\u63a9\u7801\u8fd4\u56de\u3002<code>lessThanOrEqual</code>\u65b9\u6cd5\u5219\u662f\u6bd4\u8f83<code>a</code>\u662f\u5426\u7b49\u4e8e<code>b</code>\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 11);\nvar b = SIMD.Float32x4(1, 4, 7, 9);\n\nSIMD.Float32x4.lessThan(a, b)\n// Bool32x4[false, true, true, false]\n\nSIMD.Float32x4.lessThanOrEqual(a, b)\n// Bool32x4[true, true, true, false]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeselect","title":"SIMD.%type%.select()","text":"<p><code>select</code>\u65b9\u6cd5\u901a\u8fc7\u63a9\u7801\u751f\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u3002\u5b83\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u63a9\u7801\u548c\u4e24\u4e2a SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Float32x4(1, 2, 3, 4);\nvar b = SIMD.Float32x4(5, 6, 7, 8);\n\nvar mask = SIMD.Bool32x4(true, false, false, true);\n\nSIMD.Float32x4.select(mask, a, b);\n// Float32x4[1, 6, 7, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>select</code>\u65b9\u6cd5\u63a5\u53d7\u63a9\u7801\u548c\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\u3002\u5f53\u67d0\u4e2a\u901a\u9053\u5bf9\u5e94\u7684\u63a9\u7801\u4e3a<code>true</code>\u65f6\uff0c\u4f1a\u9009\u62e9\u7b2c\u4e00\u4e2a SIMD \u503c\u7684\u5bf9\u5e94\u901a\u9053\uff0c\u5426\u5219\u9009\u62e9\u7b2c\u4e8c\u4e2a SIMD \u503c\u7684\u5bf9\u5e94\u901a\u9053\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u901a\u5e38\u4e0e\u6bd4\u8f83\u8fd0\u7b97\u7b26\u7ed3\u5408\u4f7f\u7528\u3002</p> <pre><code>var a = SIMD.Float32x4(0, 12, 3, 4);\nvar b = SIMD.Float32x4(0, 6, 7, 50);\n\nvar mask = SIMD.Float32x4.lessThan(a,b);\n// Bool32x4[false, false, true, true]\n\nvar result = SIMD.Float32x4.select(mask, a, b);\n// Float32x4[0, 6, 3, 4]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5148\u901a\u8fc7<code>lessThan</code>\u65b9\u6cd5\u751f\u6210\u4e00\u4e2a\u63a9\u7801\uff0c\u7136\u540e\u901a\u8fc7<code>select</code>\u65b9\u6cd5\u751f\u6210\u4e00\u4e2a\u7531\u6bcf\u4e2a\u901a\u9053\u7684\u8f83\u5c0f\u503c\u7ec4\u6210\u7684\u65b0\u7684 SIMD \u503c\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdbooleantypealltruesimdbooleantypeanytrue","title":"SIMD.%BooleanType%.allTrue()\uff0cSIMD.%BooleanType%.anyTrue()","text":"<p><code>allTrue</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8be5 SIMD \u503c\u7684\u6240\u6709\u901a\u9053\u662f\u5426\u90fd\u4e3a<code>true</code>\u3002</p> <pre><code>var a = SIMD.Bool32x4(true, true, true, true);\nvar b = SIMD.Bool32x4(true, false, true, true);\n\nSIMD.Bool32x4.allTrue(a); // true\nSIMD.Bool32x4.allTrue(b); // false\n</code></pre> <p><code>anyTrue</code>\u65b9\u6cd5\u5219\u662f\u53ea\u8981\u6709\u4e00\u4e2a\u901a\u9053\u4e3a<code>true</code>\uff0c\u5c31\u8fd4\u56de<code>true</code>\uff0c\u5426\u5219\u8fd4\u56de<code>false</code>\u3002</p> <pre><code>var a = SIMD.Bool32x4(false, false, false, false);\nvar b = SIMD.Bool32x4(false, false, true, false);\n\nSIMD.Bool32x4.anyTrue(a); // false\nSIMD.Bool32x4.anyTrue(b); // true\n</code></pre> <p>\u6ce8\u610f\uff0c\u53ea\u6709\u56db\u79cd\u5e03\u5c14\u503c\u6570\u636e\u7c7b\u578b\uff08<code>Bool32x4</code>\u3001<code>Bool16x8</code>\u3001<code>Bool8x16</code>\u3001<code>Bool64x2</code>\uff09\u624d\u6709\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u3002</p> <p>\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u901a\u5e38\u4e0e\u6bd4\u8f83\u8fd0\u7b97\u7b26\u7ed3\u5408\u4f7f\u7528\u3002</p> <pre><code>var ax4    = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\nvar bx4    = SIMD.Float32x4(0.0, 6.0, 7.0, 8.0);\nvar ix4    = SIMD.Float32x4.lessThan(ax4, bx4);\nvar b1     = SIMD.Int32x4.allTrue(ix4); // false\nvar b2     = SIMD.Int32x4.anyTrue(ix4); // true\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeminsimdtypeminnum","title":"SIMD.%type%.min()\uff0cSIMD.%type%.minNum()","text":"<p><code>min</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u4e24\u8005\u7684\u5bf9\u5e94\u901a\u9053\u7684\u8f83\u5c0f\u503c\uff0c\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 3, 5.2);\nvar b = SIMD.Float32x4(0, -4, 6, 5.5);\nSIMD.Float32x4.min(a, b);\n// Float32x4[-1, -4, 3, 5.2]\n</code></pre> <p>\u5982\u679c\u6709\u4e00\u4e2a\u901a\u9053\u7684\u503c\u662f<code>NaN</code>\uff0c\u5219\u4f1a\u4f18\u5148\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>var c = SIMD.Float64x2(NaN, Infinity)\nvar d = SIMD.Float64x2(1337, 42);\nSIMD.Float64x2.min(c, d);\n// Float64x2[NaN, 42]\n</code></pre> <p><code>minNum</code>\u65b9\u6cd5\u4e0e<code>min</code>\u7684\u4f5c\u7528\u4e00\u6a21\u4e00\u6837\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u5982\u679c\u6709\u4e00\u4e2a\u901a\u9053\u7684\u503c\u662f<code>NaN</code>\uff0c\u5219\u4f1a\u4f18\u5148\u8fd4\u56de\u53e6\u4e00\u4e2a\u901a\u9053\u7684\u503c\u3002</p> <pre><code>var ax4 = SIMD.Float32x4(1.0, 2.0, NaN, NaN);\nvar bx4 = SIMD.Float32x4(2.0, 1.0, 3.0, NaN);\nvar cx4 = SIMD.Float32x4.min(ax4, bx4);\n// Float32x4[1.0, 1.0, NaN, NaN]\nvar dx4 = SIMD.Float32x4.minNum(ax4, bx4);\n// Float32x4[1.0, 1.0, 3.0, NaN]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypemaxsimdtypemaxnum","title":"SIMD.%type%.max()\uff0cSIMD.%type%.maxNum()","text":"<p><code>max</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5c06\u4e24\u8005\u7684\u5bf9\u5e94\u901a\u9053\u7684\u8f83\u5927\u503c\uff0c\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684 SIMD \u503c\u8fd4\u56de\u3002</p> <pre><code>var a = SIMD.Float32x4(-1, -2, 3, 5.2);\nvar b = SIMD.Float32x4(0, -4, 6, 5.5);\nSIMD.Float32x4.max(a, b);\n// Float32x4[0, -2, 6, 5.5]\n</code></pre> <p>\u5982\u679c\u6709\u4e00\u4e2a\u901a\u9053\u7684\u503c\u662f<code>NaN</code>\uff0c\u5219\u4f1a\u4f18\u5148\u8fd4\u56de<code>NaN</code>\u3002</p> <pre><code>var c = SIMD.Float64x2(NaN, Infinity)\nvar d = SIMD.Float64x2(1337, 42);\nSIMD.Float64x2.max(c, d)\n// Float64x2[NaN, Infinity]\n</code></pre> <p><code>maxNum</code>\u65b9\u6cd5\u4e0e<code>max</code>\u7684\u4f5c\u7528\u4e00\u6a21\u4e00\u6837\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u5982\u679c\u6709\u4e00\u4e2a\u901a\u9053\u7684\u503c\u662f<code>NaN</code>\uff0c\u5219\u4f1a\u4f18\u5148\u8fd4\u56de\u53e6\u4e00\u4e2a\u901a\u9053\u7684\u503c\u3002</p> <pre><code>var c = SIMD.Float64x2(NaN, Infinity)\nvar d = SIMD.Float64x2(1337, 42);\nSIMD.Float64x2.maxNum(c, d)\n// Float64x2[1337, Infinity]\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_6","title":"\u9759\u6001\u65b9\u6cd5\uff1a\u4f4d\u8fd0\u7b97","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeandsimdtypeorsimdtypexorsimdtypenot","title":"SIMD.%type%.and()\uff0cSIMD.%type%.or()\uff0cSIMD.%type%.xor()\uff0cSIMD.%type%.not()","text":"<p><code>and</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e24\u8005\u5bf9\u5e94\u7684\u901a\u9053\u8fdb\u884c\u4e8c\u8fdb\u5236<code>AND</code>\u8fd0\u7b97\uff08<code>&amp;</code>\uff09\u540e\u5f97\u5230\u7684\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, 8);\nvar b = SIMD.Int32x4(5, 5, 5, 5);\nSIMD.Int32x4.and(a, b)\n// Int32x4[1, 0, 4, 0]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u4ee5\u901a\u9053<code>0</code>\u4e3a\u4f8b\uff0c<code>1</code>\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>0001</code>\uff0c<code>5</code>\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u662f<code>01001</code>\uff0c\u6240\u4ee5\u8fdb\u884c<code>AND</code>\u8fd0\u7b97\u4ee5\u540e\uff0c\u5f97\u5230<code>0001</code>\u3002</p> <p><code>or</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e24\u8005\u5bf9\u5e94\u7684\u901a\u9053\u8fdb\u884c\u4e8c\u8fdb\u5236<code>OR</code>\u8fd0\u7b97\uff08<code>|</code>\uff09\u540e\u5f97\u5230\u7684\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, 8);\nvar b = SIMD.Int32x4(5, 5, 5, 5);\nSIMD.Int32x4.or(a, b)\n// Int32x4[5, 7, 5, 13]\n</code></pre> <p><code>xor</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e24\u8005\u5bf9\u5e94\u7684\u901a\u9053\u8fdb\u884c\u4e8c\u8fdb\u5236\u201c\u5f02\u6216\u201d\u8fd0\u7b97\uff08<code>^</code>\uff09\u540e\u5f97\u5230\u7684\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, 8);\nvar b = SIMD.Int32x4(5, 5, 5, 5);\nSIMD.Int32x4.xor(a, b)\n// Int32x4[4, 7, 1, 13]\n</code></pre> <p><code>not</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a SIMD \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u6bcf\u4e2a\u901a\u9053\u8fdb\u884c\u4e8c\u8fdb\u5236\u201c\u5426\u201d\u8fd0\u7b97\uff08<code>~</code>\uff09\u540e\u5f97\u5230\u7684\u65b0\u7684 SIMD \u503c\u3002</p> <pre><code>var a = SIMD.Int32x4(1, 2, 4, 8);\nSIMD.Int32x4.not(a)\n// Int32x4[-2, -3, -5, -9]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>1</code>\u7684\u5426\u8fd0\u7b97\u4e4b\u6240\u4ee5\u5f97\u5230<code>-2</code>\uff0c\u662f\u56e0\u4e3a\u5728\u8ba1\u7b97\u673a\u5185\u90e8\uff0c\u8d1f\u6570\u91c7\u7528\u201d2 \u7684\u8865\u7801\u201c\u8fd9\u79cd\u5f62\u5f0f\u8fdb\u884c\u8868\u793a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6574\u6570<code>n</code>\u7684\u8d1f\u6570\u5f62\u5f0f<code>-n</code>\uff0c\u662f\u5bf9\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u53d6\u53cd\u4ee5\u540e\uff0c\u518d\u52a0\u4e0a 1\u3002\u56e0\u6b64\uff0c\u76f4\u63a5\u53d6\u53cd\u5c31\u76f8\u5f53\u4e8e\u8d1f\u6570\u5f62\u5f0f\u518d\u51cf\u53bb 1\uff0c\u6bd4\u5982<code>1</code>\u7684\u8d1f\u6570\u5f62\u5f0f\u662f<code>-1</code>\uff0c\u518d\u51cf\u53bb 1\uff0c\u5c31\u5f97\u5230\u4e86<code>-2</code>\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_7","title":"\u9759\u6001\u65b9\u6cd5\uff1a\u6570\u636e\u7c7b\u578b\u8f6c\u6362","text":"<p>SIMD \u63d0\u4f9b\u4ee5\u4e0b\u65b9\u6cd5\uff0c\u7528\u6765\u5c06\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u8f6c\u4e3a\u53e6\u4e00\u79cd\u6570\u636e\u7c7b\u578b\u3002</p> <ul> <li><code>SIMD.%type%.fromFloat32x4()</code></li> <li><code>SIMD.%type%.fromFloat32x4Bits()</code></li> <li><code>SIMD.%type%.fromFloat64x2Bits()</code></li> <li><code>SIMD.%type%.fromInt32x4()</code></li> <li><code>SIMD.%type%.fromInt32x4Bits()</code></li> <li><code>SIMD.%type%.fromInt16x8Bits()</code></li> <li><code>SIMD.%type%.fromInt8x16Bits()</code></li> <li><code>SIMD.%type%.fromUint32x4()</code></li> <li><code>SIMD.%type%.fromUint32x4Bits()</code></li> <li><code>SIMD.%type%.fromUint16x8Bits()</code></li> <li><code>SIMD.%type%.fromUint8x16Bits()</code></li> </ul> <p>\u5e26\u6709<code>Bits</code>\u540e\u7f00\u7684\u65b9\u6cd5\uff0c\u4f1a\u539f\u5c01\u4e0d\u52a8\u5730\u5c06\u4e8c\u8fdb\u5236\u4f4d\u62f7\u8d1d\u5230\u65b0\u7684\u6570\u636e\u7c7b\u578b\uff1b\u4e0d\u5e26\u540e\u7f00\u7684\u65b9\u6cd5\uff0c\u5219\u4f1a\u8fdb\u884c\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u3002</p> <pre><code>var t = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\nSIMD.Int32x4.fromFloat32x4(t);\n// Int32x4[1, 2, 3, 4]\n\nSIMD.Int32x4.fromFloat32x4Bits(t);\n// Int32x4[1065353216, 1073741824, 1077936128, 1082130432]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c<code>fromFloat32x4</code>\u662f\u5c06\u6d6e\u70b9\u6570\u8f6c\u4e3a\u6574\u6570\uff0c\u7136\u540e\u5b58\u5165\u65b0\u7684\u6570\u636e\u7c7b\u578b\uff1b<code>fromFloat32x4Bits</code>\u5219\u662f\u5c06\u4e8c\u8fdb\u5236\u4f4d\u539f\u5c01\u4e0d\u52a8\u5730\u62f7\u8d1d\u8fdb\u5165\u65b0\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7136\u540e\u8fdb\u884c\u89e3\u8bfb\u3002</p> <p><code>Bits</code>\u540e\u7f00\u7684\u65b9\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u901a\u9053\u6570\u76ee\u4e0d\u5bf9\u7b49\u7684\u62f7\u8d1d\u3002</p> <pre><code>var t = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);\nSIMD.Int16x8.fromFloat32x4Bits(t);\n// Int16x8[0, 16256, 0, 16384, 0, 16448, 0, 16512]\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u539f\u59cb SIMD \u503c<code>t</code>\u662f 4 \u901a\u9053\u7684\uff0c\u800c\u76ee\u6807\u503c\u662f 8 \u901a\u9053\u7684\u3002</p> <p>\u5982\u679c\u6570\u636e\u8f6c\u6362\u65f6\uff0c\u539f\u901a\u9053\u7684\u6570\u636e\u5927\u5c0f\uff0c\u8d85\u8fc7\u4e86\u76ee\u6807\u901a\u9053\u7684\u6700\u5927\u5bbd\u5ea6\uff0c\u5c31\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_8","title":"\u5b9e\u4f8b\u65b9\u6cd5","text":""},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#simdtypeprototypetostring","title":"SIMD.%type%.prototype.toString()","text":"<p><code>toString</code>\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a SIMD \u503c\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002</p> <pre><code>var a = SIMD.Float32x4(11, 22, 33, 44);\na.toString() // \"SIMD.Float32x4(11, 22, 33, 44)\"\n</code></pre>"},{"location":"%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/%E9%98%AE%E4%B8%80%E5%B3%B0/ECMAScript6/simd/#_9","title":"\u5b9e\u4f8b\uff1a\u6c42\u5e73\u5747\u503c","text":"<p>\u6b63\u5e38\u6a21\u5f0f\u4e0b\uff0c\u8ba1\u7b97<code>n</code>\u4e2a\u503c\u7684\u5e73\u5747\u503c\uff0c\u9700\u8981\u8fd0\u7b97<code>n</code>\u6b21\u3002</p> <pre><code>function average(list) {\n  var n = list.length;\n  var sum = 0.0;\n  for (var i = 0; i &lt; n; i++) {\n    sum += list[i];\n  }\n  return sum / n;\n}\n</code></pre> <p>\u4f7f\u7528 SIMD\uff0c\u53ef\u4ee5\u5c06\u8ba1\u7b97\u6b21\u6570\u51cf\u5c11\u5230<code>n</code>\u6b21\u7684\u56db\u5206\u4e4b\u4e00\u3002</p> <pre><code>function average(list) {\n  var n = list.length;\n  var sum = SIMD.Float32x4.splat(0.0);\n  for (var i = 0; i &lt; n; i += 4) {\n    sum = SIMD.Float32x4.add(\n      sum,\n      SIMD.Float32x4.load(list, i)\n    );\n  }\n  var total = SIMD.Float32x4.extractLane(sum, 0) +\n              SIMD.Float32x4.extractLane(sum, 1) +\n              SIMD.Float32x4.extractLane(sum, 2) +\n              SIMD.Float32x4.extractLane(sum, 3);\n  return total / n;\n}\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u5148\u662f\u6bcf\u9694\u56db\u4f4d\uff0c\u5c06\u6240\u6709\u7684\u503c\u8bfb\u5165\u4e00\u4e2a SIMD\uff0c\u7136\u540e\u7acb\u523b\u7d2f\u52a0\u3002\u7136\u540e\uff0c\u5f97\u5230\u7d2f\u52a0\u503c\u56db\u4e2a\u901a\u9053\u7684\u603b\u548c\uff0c\u518d\u9664\u4ee5<code>n</code>\u5c31\u53ef\u4ee5\u4e86\u3002</p>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/","title":"markdown\u8bed\u6cd5\u6d4b\u8bd5","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_1","title":"\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_2","title":"\u4e00\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_3","title":"\u4e8c\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_4","title":"\u4e09\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_5","title":"\u56db\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_6","title":"\u4e94\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_7","title":"\u516d\u7ea7\u6807\u9898","text":""},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_8","title":"\u6587\u672c","text":"<p>\u659c\u4f53</p> <p>\u7c97\u4f53</p> <p>\u7c97\u659c\u4f53</p> <p>~~\u5220\u9664\u7ebf~~</p> <p>\u5f15\u7528</p>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_9","title":"\u5217\u8868","text":"<ul> <li>\u65e0\u5e8f\u5217\u88681</li> <li>\u65e0\u5e8f\u5217\u88681-1</li> <li>\u65e0\u5e8f\u5217\u8868</li> </ul> <p>MWeb \u662f\u4e13\u4e1a\u7684 Markdown \u5199\u4f5c\u3001\u8bb0\u7b14\u8bb0\u3001\u9759\u6001\u535a\u5ba2\u751f\u6210\u8f6f\u4ef6\uff0c\u76ee\u524d\u5df2\u652f\u6301 Mac\uff0ciPad \u548c iPhone\u3002MWeb \u6709\u4ee5\u4e0b\u7279\u8272\uff1a</p>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#_10","title":"\u8f6f\u4ef6\u672c\u8eab\uff1a","text":"<ul> <li>\u4f7f\u7528\u539f\u751f\u7684 macOS \u6280\u672f\u6253\u9020\uff0c\u8ffd\u6c42\u4e0e\u7cfb\u7edf\u7684\u5b8c\u7f8e\u7ed3\u5408\u3002</li> <li>\u539f\u5219\u4e0a\uff0c\u9996\u5148\u662f\u8ffd\u6c42\u754c\u9762\u7b80\u6d01\u548c\u9ad8\u6027\u80fd\uff0c\u7136\u540e\u624d\u662f\u5f3a\u5927\u6613\u7528\uff0c\u529f\u80fd\u5168\u9762\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#markdown_1","title":"Markdown \u8bed\u6cd5\uff1a","text":"<ul> <li>\u4f7f\u7528 GitHub Flavored Markdown \u8bed\u6cd5\uff0c\u7b80\u79f0 GFM \u8bed\u6cd5\u3002</li> <li>\u652f\u6301\u8868\u683c\u3001TOC\u3001LaTeX\u3001\u4ee3\u7801\u5757\u3001\u4efb\u52a1\u5217\u8868\u3001\u811a\u6ce8\u7b49\u3002</li> <li>\u753b\u56fe\u5e93\u652f\u6301 mermaid, viz, ECharts, PlantUML, Sequence, Flow\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#markdown_2","title":"Markdown \u8f85\u52a9\uff1a","text":"<ul> <li>\u652f\u6301\u622a\u56fe\u5e76\u7c98\u8d34\u3001\u590d\u5236\u5e76\u7c98\u8d34\u3001\u62d6\u62fd\u7b49\u65b9\u5f0f\u63d2\u5165\u56fe\u7247\u5e76\u76f4\u63a5\u663e\u793a\u5728\u7f16\u8f91\u5668\u5185\u3002</li> <li>\u5728\u517c\u5bb9 Markdown \u8bed\u6cd5\u7684\u60c5\u51b5\u4e0b\u652f\u6301\u8bbe\u7f6e\u56fe\u7247\u5bbd\u5ea6\u3002</li> <li>\u597d\u7528\u7684\u8868\u683c\u63d2\u5165\u548c LaTeX \u4e66\u5199\u8f85\u52a9\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#markdown_3","title":"Markdown \u8f93\u51fa\uff1a","text":"<ul> <li>\u652f\u6301\u5bfc\u51fa\u4e3a\u56fe\u7247\u3001HTML\u3001Epub\u3001PDF\u3001RTF\u3001Docx\u3002</li> <li>\u652f\u6301\u53d1\u5e03\u5230 WordPress\u3001\u652f\u6301 Metaweblog API \u534f\u8bae\u7684\u670d\u52a1\u3001Wordpress.com\u3001\u5370\u8c61\u7b14\u8bb0\uff08Evernote\uff09\u3001Blogger\u3001Medium\u3001Tumblr\u3001\u8bed\u96c0\u3001Ghost\u3001\u5c11\u6570\u6d3e Matrix\u3002</li> <li>\u56fe\u7247\u4e0a\u4f20\u670d\u52a1\uff08\u56fe\u5e8a\uff09\u652f\u6301 Imgur\u3001\u4e03\u725b\u4e91\u3001\u53c8\u62cd\u4e91\u3001\u817e\u8baf\u4e91 COS\u3001\u963f\u91cc\u4e91 OSS\u3001SM.MS\u548c\u81ea\u5b9a\u4e49\u7684\u56fe\u5e8a\u670d\u52a1\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#markdown_4","title":"Markdown \u7b14\u8bb0\uff1a","text":"<ul> <li>\u5f3a\u5927\u7684\u6587\u6863\u5e93\u652f\u6301\u5206\u7c7b\u6811\u548c\u6807\u7b7e\u7ba1\u7406\u6587\u6863\uff0c\u6587\u6863\u53ef\u5f52\u7c7b\u4e8e\u591a\u4e2a\u5206\u7c7b\uff0c\u53ef\u4ee5\u628a\u5206\u7c7b\u6574\u4e2a\u5bfc\u51fa\u4e3a Epub\u3001PDF \u548c\u751f\u6210\u9759\u6001\u7f51\u7ad9\u3002\u975e\u5e38\u5408\u9002\u7528\u4e8e\u7b14\u8bb0\u3001\u4e2a\u4eba\u77e5\u8bc6\u6536\u96c6\u3001\u7ba1\u7406\u548c\u8f93\u51fa\u3002</li> <li>\u5feb\u901f\u7b14\u8bb0\uff1a\u968f\u610f\u589e\u52a0\u7b14\u8bb0\u53ca\u56fe\u7247\u7b49\u7d20\u6750\uff0c\u652f\u6301\u4ee5\u5929\u4e3a\u5355\u4f4d\u628a\u589e\u52a0\u7684\u7d20\u6750\u7ec4\u5408\u5728\u4e00\u4e2a\u6587\u6863\u5185\uff0c\u65b9\u4fbf\u6574\u7406\u53ca\u8bb0\u5f55\u5386\u53f2\u6536\u96c6\u60c5\u51b5\u3002</li> <li>\u5feb\u901f\u641c\u7d22\uff1a\u76ee\u524d\u5df2\u652f\u6301\u5168\u5c40\u5feb\u6377\u952e\u8c03\u51fa\u641c\u7d22\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#markdown_5","title":"\u5916\u90e8 Markdown \u6587\u6863\uff1a","text":"<ul> <li>\u5916\u90e8 Markdown \u6587\u6863\u4f7f\u7528\u5916\u90e8\u6a21\u5f0f\u7ba1\u7406\u3002\u5916\u90e8\u6a21\u5f0f\u4f7f\u7528\u76ee\u5f55\u6811\u7684\u65b9\u5f0f\u7f16\u8f91\u548c\u7ba1\u7406\u4f60\u7684 Markdown \u6587\u6863\uff0c\u8fd8\u80fd\u5f88\u597d\u7684\u652f\u6301 GitBook\u3001Jekyll\u3001Hexo \u7b49\u7b49\u7f16\u8f91\u548c\u56fe\u7247\u63d2\u5165\u3002</li> </ul>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#mweb","title":"MWeb \u6587\u6863\uff1a","text":"<p>\u5982\u679c\u8981\u66f4\u8be6\u7ec6\u4e86\u89e3 MWeb\uff0c\u5efa\u8bae\u4f60\u4e00\u5b9a\u8981\u53bb\u770b\u4e00\u4e0b\u5b98\u7f51\u7684\u5e2e\u52a9\u6587\u6863\uff0c\u7f51\u5740\u4e3a\uff1ahttps://zh.mweb.im/help.html\u3002\u6211\u4eec\u5efa\u8bae\u5728\u4f7f\u7528\u6587\u6863\u5e93\u4e4b\u524d\uff0c\u4e00\u5b9a\u8981\u9605\u8bfb\u4e00\u4e0b MWeb \u6587\u6863\u5e93\u8be6\u7ec6\u4ecb\u7ecd \u8fd9\u7bc7\u6587\u7ae0\uff0c\u4ee5\u4fbf\u66f4\u597d\u7684\u4f7f\u7528\u6587\u6863\u5e93\u3002</p>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/markdown/#mweb_1","title":"\u5e2e\u52a9\u6211\u4eec\u6539\u8fdb MWeb","text":"<p>\u5982\u679c\u4f60\u559c\u6b22 MWeb\uff0c\u60f3\u8ba9\u5b83\u53d8\u5f97\u66f4\u597d\uff0c\u4f60\u53ef\u4ee5\uff1a</p> <ol> <li>\u63a8\u8350 MWeb\uff0c\u8ba9\u66f4\u591a\u7684\u4eba\u77e5\u9053\u3002</li> <li>\u7ed9\u6211\u4eec\u53d1\u53cd\u9988\u548c\u5efa\u8bae\uff1acoderforart+2333@gmail.com</li> <li>\u5728 Mac App Store \u4e0a\u8bc4\u4ef7 \uff08\u5982\u679c\u662f\u5728 MAS \u4e0a\u8d2d\u4e70\u7684\u8bdd\uff09\u3002</li> </ol>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/%E5%8F%82%E8%80%83/","title":"\u53c2\u8003","text":"<p>https://www.mkdocs.org/getting-started/</p> <p>https://www.mkdocs.org/user-guide/choosing-your-theme/</p> <p>https://www.mkdocs.org/user-guide/choosing-your-theme/#mkdocs</p> <p>https://squidfunk.github.io/mkdocs-material/getting-started/</p> <p>https://github.com/squidfunk/mkdocs-material</p> <p>https://docs.rockylinux.org/zh/guides/contribute/navigation/</p>"},{"location":"%E8%8D%89%E7%A8%BF%E7%AE%B1/%E6%B5%8B%E8%AF%95%E4%B8%BB%E9%A2%98/","title":"\u6d4b\u8bd5\u4e3b\u9898","text":"<ul> <li> Lorem ipsum dolor sit amet, consectetur adipiscing elit</li> <li> Vestibulum convallis sit amet nisi a tincidunt<ul> <li> In hac habitasse platea dictumst</li> <li> In scelerisque nibh non dolor mollis congue sed et metus</li> <li> Praesent sed risus massa</li> </ul> </li> <li> Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque</li> </ul> \u6d4b\u8bd5html\u9ad8\u4eae<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n  &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> demo.py<pre><code>def sayhi():\n    return \"hi,Python\u5168\u6808\u5f00\u53d1\"\n</code></pre> demo.py<pre><code>def sayhi():\n    return \"hi,Python\u5168\u6808\u5f00\u53d1\" # (1)\n</code></pre> <ol> <li>\u8fd9\u662f\u6211\u81ea\u7531\u6ce8\u91ca\u7684\u5185\u5bb9\uff0c\u6b22\u8fce\u5173\u6ce8\u6211\u7684\u516c\u4f17\u53f7\u3002</li> </ol> <pre><code>!!! note \"\u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846\"\n\u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a\n\n!!! success \"\u8fd9\u662f success \u7c7b\u578b\u7684\u63d0\u793a\u6846\"\n\u6210\u529f\uff01\n\n!!! failure \"\u8fd9\u662f failure \u7c7b\u578b\u7684\u63d0\u793a\u6846\"\n\u5931\u8d25\uff01\n\n!!! bug \"\u8fd9\u662f bug \u7c7b\u578b\u7684\u63d0\u793a\u6846\"\n\u53d1\u73b0\u4e00\u4e2a bug\uff0c\u8bf7\u5c3d\u5feb\u4fee\u590d\uff01\n</code></pre> <p>\u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846</p> <p>\u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a</p> <p>\u8fd9\u662f success \u7c7b\u578b\u7684\u63d0\u793a\u6846</p> <p>\u6210\u529f\uff01</p> <p>\u8fd9\u662f failure \u7c7b\u578b\u7684\u63d0\u793a\u6846</p> <p>\u5931\u8d25\uff01</p> <p>\u8fd9\u662f bug \u7c7b\u578b\u7684\u63d0\u793a\u6846</p> <p>\u53d1\u73b0\u4e00\u4e2a bug\uff0c\u8bf7\u5c3d\u5feb\u4fee\u590d\uff01</p> <pre><code>??? note \"\u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846\"\n\u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a\n\n    \u7b2c\u4e8c\u884c\n\n    \u7b2c\u4e09\u884c\n\n    \u7b2c\u56db\u884c\n\n    \u7b2c\u4e94\u884c\n    ...\n</code></pre> \u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846 <p>\u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a     \u7b2c\u4e8c\u884c</p> <pre><code>\u7b2c\u4e09\u884c\n\n\u7b2c\u56db\u884c\n\n\u7b2c\u4e94\u884c\n...\n</code></pre>"}]}